import{k as pt,s as Ie,z as pn}from"./chunk-KXAUXXVB.js";import{$a as W,A as mt,Bb as _n,Fa as Cn,Hb as Hn,J as gn,Ja as xn,Ka as En,Kb as Wn,L as yn,La as Rn,Lb as Kn,Mb as At,Nb as Qn,Rb as qn,Sa as Dn,U as bn,Ua as Un,Za as In,Zb as $n,_ as Sn,_a as ft,aa as Tn,ab as Be,ba as An,bb as Pn,bc as zn,cb as j,eb as gt,fb as Oe,fc as Ft,gb as Qe,hb as yt,ia as Fn,ib as bt,jb as St,kb as Nn,kc as Pt,lb as vn,lc as ht,mb as Bn,mc as de,nc as Fe,oa as Ke,pb as On,pc as Nt,qa as hn,qc as Yn,ra as ve,rc as Le,sb as Tt,sc as jn,ta as wn,tc as wt,ua as kn,ub as Ln,v as dn,vb as Mn,vc as Xn,w as mn,xb as Vn,y as dt,yb as Gn,yc as Me,z as fn,zc as kt}from"./chunk-TYXPKGSM.js";import{a as Re,g as De,o as Ue}from"./chunk-OX7Q6J2U.js";import{Ka as an,Ma as lt,Mb as pe,Na as _,O as Zt,Ob as cn,P as J,Q as fe,Rc as Zo,Sa as un,T as en,U as rt,Ua as be,Va as ct,Wd as ae,Ya as We,ca as sn,e as Xo,gb as ln,je as Pe,md as Se,ne as Ne,rd as Ee,uc as re,v as Jo}from"./chunk-MHD4HNLY.js";import{K as tn,p as Jt}from"./chunk-G3SOTMUM.js";import{a as u,m as $,n as ut}from"./chunk-56SJOU6P.js";import{$ as at,M as st,a as Te,b as M,da as rn,f as it,ia as xe,ka as It,l as nn,s as on,x as ye}from"./chunk-6E74REJW.js";import{Za as Ce,ha as se,ja as ne,ka as ge,sa as Ae}from"./chunk-66TF6S77.js";import{a as Y}from"./chunk-4P36KWOF.js";import{a as L}from"./chunk-7X4NV6OJ.js";import{f as I,h as s,m as Buffer,n as a}from"./chunk-3KENBVE7.js";s();a();var er=Y.object({data:Y.string(),from:Y.string(),to:Y.string()}),tr=Y.object({transaction:er});async function nr({caip19:e,amount:t,owner:n}){let o=await fe.api().post("/tokens/v1/unwrap",{owner:n,caip19:e,amount:t.toNumber()}),r=tr.safeParse(o.data);if(!r.success){let{error:i}=r;throw Ae.captureError(i,"fungibles"),new ft(`Failed to get unwrap transaction: ${i.message}`)}return r.data.transaction}var or=({caip19:e,amount:t,owner:n})=>ne({gcTime:Oe.Medium,staleTime:1/0,enabled:n!==""&&t.isGreaterThan(0),queryKey:W.unwrapTransaction({caip19:e,amount:t,owner:n}),async queryFn(){return await nr({caip19:e,amount:t,owner:n})}});s();a();function vt(){let e=Se(),t=re(),n=se();return ge({async mutationFn({accountId:o,mutations:r}){await $n(e,t,{accountId:o,mutations:r})},async onSuccess(o,r){await n.invalidateQueries({queryKey:W.hiddenMints(r.accountId)})}})}s();a();var Bt=I(Zo());s();a();var Ct={recipient:"",recipientHandle:"",addressBookRecipient:void 0,amountAsset:new Te(0),amountUsd:0,transactionSpeed:"standard",solana:{references:[]},multichainTransaction:void 0};var Zn={sendSessionId:"",fungibleKey:void 0,splTokenAccount:void 0,analyticsRecipient:void 0,sendFormValues:Ct,shouldShowUsdValues:!1,retryArgs:void 0},K=Ne((e,t)=>({...(0,Bt.default)(Zn),resetSendSlice:()=>{let n=(0,Bt.default)(Zn);n.sendSessionId=tn(),e(n)},setAnalyticsRecipient:n=>{e({analyticsRecipient:n})},setSendFungibleKey:(n,o)=>{e({fungibleKey:n,splTokenAccount:o})},setSendFormValues:n=>{e({sendFormValues:n})},setInputAmount:n=>{let o=t();e({sendFormValues:{...o.sendFormValues,inputAmount:n}})},setShouldShowUsdValues:n=>{e({shouldShowUsdValues:n})},setRetryArgs:n=>{e({retryArgs:n})}}));s();a();var eo={collectible:void 0,sendFormValues:Ct,shouldRequireAmount:!1},to=Ne(e=>({...eo,resetSendSlice:()=>{e({...eo})},setSendCollectible:t=>{e({collectible:t})},setSendFormValues:t=>{e({sendFormValues:t})},setShouldRequireAmount:t=>{e({shouldRequireAmount:t})}}));s();a();s();a();var rr={query:""},ir=Ne(e=>({...rr,setQuery:t=>{e({query:t})}}));s();a();var ar=I(L());s();a();s();a();var ur=I(L());s();a();s();a();s();a();var xt=I(Xo(),1),oo=I(Jo(),1);var no=(0,xt.struct)([(0,xt.u8)("instruction")]);function ro(e,t,n,o=[],r=Ke){let i=kn([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],n,o),l=Buffer.alloc(no.span);return no.encode({instruction:wn.CloseAccount},l),new oo.TransactionInstruction({keys:i,programId:r,data:l})}var Ot=new M(0),Lt=(e,t,n,o=!0)=>{let{data:r,isLoading:i}=At(e),l=K(b=>b.sendFormValues.recipient);if(!t)return Ot;let{data:c,type:p}=t,m=new M(c.balance).multipliedBy(new M(10).pow(c.decimals));if(!j(p)||!n)return m;let d=new M(0);if(dt(n))d=m.minus(new M(n.value));else if(fn(n)){let{gasLimit:b,maxFeePerGas:g,l1Fee:S=new M(0)}=n,h=b.times(g).plus(S);d=m.minus(h)}else if(mt(n)){if(!e||i)return;let b=e.addressType,g=r?.safeToSendUtxos??[],S=mn(n.btcPerKilobyte),h=l&&an.safeParse(l).success?l:"bc1p",w=[{value:g.reduce((D,F)=>D.plus(new M(F.value)),new M(0)).toNumber(),address:h}],N=Sn(b,g,w,S.toNumber(),[]);if(N.type==="error")d=new M(N.maxAmount).integerValue(M.ROUND_DOWN);else{let{inputs:D,fee:F}=N;d=D.reduce((O,E)=>O.plus(new M(E.value)),new M(0)).minus(F).integerValue(M.ROUND_DOWN)}}else return nn(n);return d.isGreaterThan(Ot)?d:o?Ot:d};s();a();var Mt=I(L());s();a();var io=(e,t,n)=>{let o=Xn(e,t),{fungibles:r,isLoadingTokens:i,isErrorTokens:l,isErrorPrices:c}=de({...n,keys:o?[o]:[]});return{isError:c||l,fungible:r.length===1?r[0]:void 0,isLoading:i}};var Vt=(e,t,n,o=new Te(0))=>{let{fungible:r,isLoading:i,isError:l}=io(e,t),c="unknown",p="",m=(0,Mt.useMemo)(()=>{let b=r?.data.walletAddress;if(!b)return;let g=ln(e,b);return{networkID:e,address:b,addressType:g}},[e,r?.data.walletAddress]),d=Lt(m,r,n,!1);return!l&&r&&d&&(d.gte(o)?c="sufficient":c="insufficient",p=r.data.symbol||""),(0,Mt.useMemo)(()=>({hasSufficientFunds:c,nativeTokenSymbol:p,isLoading:i,isError:l}),[c,p,i,l])};s();a();var lo=I(L());s();a();var Gt=I(L());s();a();var so=({chainAddresses:e=[]})=>{let t=W.tokensErrorCount(e);return ne({queryKey:t,initialData:0})};s();a();var lr=({errors:e})=>e;function ao({chainAddresses:e,queryOptions:t}){return On({select:lr,chainAddresses:e,queryOptions:t})}var uo=3,cr=1,Ve=({networkID:e,chainAddresses:t=[]})=>{let{data:n=[]}=ao({chainAddresses:t}),{data:o=0}=so({chainAddresses:t}),r=o>=uo,{data:i=0}=Gn(),l=i>=uo,c=n.length===cr&&n.some(d=>d.code==="TokensTrimmed"),{t:p}=$(),m=(0,Gt.useMemo)(()=>{if(r)return p("partialErrorGeneric");let d=n.filter(g=>e?g.details.chainId===e:!0),b=d.length+(l?1:0);return b?b>1?p("partialErrorGeneric"):l?p("partialErrorTokenPrices"):c?p("partialErrorTokensTrimmed"):e?p("partialErrorTokenDetail"):p("partialErrorBalanceChainName",{chainName:_.getChainName(d[0].details.chainId)}):""},[r,n,l,e,c,p]);return(0,Gt.useMemo)(()=>({partialErrorMessage:m,shouldShowPartialError:m!==""}),[m])};function pr(e){let{onTappingBuy:t,onTappingReceive:n,onTappingSend:o,onTappingSwap:r,account:i}=e,{shouldShowPartialError:l,partialErrorMessage:c}=Ve({chainAddresses:i?.addresses});return{ctaActions:dr({onTappingBuy:t,onTappingReceive:n,onTappingSend:o,onTappingSwap:r}),shouldShowPartialError:l,partialErrorMessage:c}}function dr(e){let{t}=$();return(0,lo.useMemo)(()=>{let o=[];return o.push({text:t("commandSend"),type:"send",onClick:e.onTappingSend}),o.push({text:t("commandSwap"),type:"swap",onClick:e.onTappingSwap}),o.push({text:t("commandReceive"),type:"receive",onClick:e.onTappingReceive}),o.push({text:t("commandBuy"),type:"buy",onClick:e.onTappingBuy}),o.sort((r,i)=>(Le.get(r.type)??100)-(Le.get(i.type)??100)),{primary:o,more:[]}},[t,e.onTappingSend,e.onTappingSwap,e.onTappingReceive,e.onTappingBuy])}s();a();s();a();var $e=(r=>(r.FAIL_SEVERE="FAIL_SEVERE",r.FAIL_HIGH="FAIL_HIGH",r.NO_ACTION="NO_ACTION",r.DATA_NOT_FOUND="DATA_NOT_FOUND",r))($e||{}),co=Y.object({action:Y.nativeEnum($e),address:un,expirationUnixtimeInSec:Y.number().nullish().default(null)}),_t=Y.object({addressScreenResults:Y.array(co)}),qe=class extends Error{constructor(t){super(t),this.name="WalletScreenError"}};s();a();var So=I(L());s();a();s();a();var fr="@phantom/wallet-screening",po=`${fr}:wallet-screen-action`,mo={walletScreenAction(e){return[po,e]}};s();a();var fo=new Error("Failed to fetch wallet screen action.");async function go(e){try{let t=await fe.api().post("/wallet_screen/v1",e);if(!en(t))throw fo;let n=t.data;return _t.parse(n)}catch{throw fo}}var yo=ye({days:7}),bo=e=>{let t=e!==void 0&&_.isMainnetNetworkID(e.networkID),n=[];if(e!==void 0){let c=_.isEVMNetworkID(e.networkID)?e.address.toLowerCase():e.address;n=[{chainId:e.networkID,address:c,resourceType:"address"}]}let o={addresses:n},r=se(),i=mo.walletScreenAction(o),l=[i[0]];return ne({enabled:t,queryKey:i,gcTime:yo,staleTime:yo,refetchInterval:!1,refetchOnMount:!1,async queryFn(){if(gr(r,l))return"FAIL_SEVERE";let p=await go(o);return yr(p)}})},gr=(e,t)=>{let n=e.getQueriesData({queryKey:t,exact:!1}),o=!1;for(let[r,i]of n){let l=i;if(l&&l==="FAIL_SEVERE"){o=!0;break}}return o},yr=e=>{let t=e.addressScreenResults;return t.some(n=>n.action==="FAIL_SEVERE")?"FAIL_SEVERE":t.some(n=>n.action==="FAIL_HIGH")?"FAIL_HIGH":t.some(n=>n.action==="NO_ACTION")?"NO_ACTION":"DATA_NOT_FOUND"};var Ht=(e,t)=>{let n=re(),{data:o}=bo(e);switch((0,So.useEffect)(()=>{o&&e&&n.capture("walletScreened",{data:{walletScreen:{action:o.toString(),surface:t},chainId:_.getChainID(e.networkID),networkId:e.networkID}})},[o,e,t,n]),o){case"FAIL_SEVERE":case"FAIL_HIGH":throw new qe(`Transaction disabled: ${t}`);case"NO_ACTION":case"DATA_NOT_FOUND":return}};s();a();s();a();s();a();var To=I(L());var Sr=({networkID:e,unsignedTransaction:t,pendingActivityRows:n,accountIdentifier:o,accountSigner:r,storage:i,includeCallPayload:l})=>({accountSigner:r,accountIdentifier:o,networkID:e,unsignedTransaction:t,...l&&{callPayload:{from:t.from,to:t.to,data:t.data,value:t.value}},pendingTransactionInput:{ownerAddress:t.from,networkID:e,data:{nonce:"",unsignedTransaction:t,hash:""},type:"swap",display:{summary:n}},storage:i}),Tr=async({t:e,fungible:t,unsignedUnwrapTx:n,gasEstimation:o,storage:r,accountMetadata:i,accountSigner:l})=>{if(!n)throw new Error("Unsigned unwrap transaction is required");if(!o)throw new Error("Gas estimation is required");let{chain:c,balance:p}=t.data;if(!_.isEthereumNetworkID(c.id))throw new Error(`Chain is not supported: ${c.id}`);let m=c.id,d={topRight:{text:`+${p} ${c.symbol}`},topLeft:{text:e("transactionsPendingSwapping")},bottomRight:{text:`-${p} ${t.data.symbol}`},bottomLeft:{text:`${t.data.name}`}},b=Jt.parse({type:"0x2",chainId:_.getEVMNetworkIDValue(m),gas:`0x${o.gasLimit.toString(16)}`,maxFeePerGas:`0x${o.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${o.maxPriorityFeePerGas.toString(16)}`,...n}),g=Sr({storage:r,accountSigner:l,pendingActivityRows:d,includeCallPayload:!1,networkID:m,unsignedTransaction:b,accountIdentifier:i.accountIdentifier});return Fn(g)},Ar=()=>{let{data:e}=ae();return(0,To.useMemo)(()=>{let n=e?.type,o=e?.name??"",r=e?.identifier??"";return{accountName:o,accountType:n,accountIdentifier:r}},[e])},Fr=e=>{let t=Se(),n=se(),{t:o}=$(),r=Ar(),i=Ee();return ge({async mutationFn({fungible:l,unsignedUnwrapTx:c,gasEstimation:p}){return await Tr({t:o,fungible:l,unsignedUnwrapTx:c,gasEstimation:p,accountMetadata:r,storage:t,accountSigner:i})},async onSuccess(){await n.invalidateQueries({queryKey:W.tokens(e)})}})};s();a();s();a();s();a();var Ao=()=>{let{setRetryArgs:e}=K();return t=>{if(t instanceof An){let{successfulTxIds:n}=t,[o,r]=n;e({type:"BRC20",commitTxId:o,revealTxId:r})}}};function hr(){let e=Se(),{data:t}=ae({select:l=>l.identifier}),n=Ao(),o=Kn(),r=Ee();return ge({mutationFn:async({multichainTransaction:l,pendingTransactionInput:c,senderAddress:p,gasEstimation:m})=>{if(!t)throw new Error("No account identifier found");let{networkID:d}=l,b=Be.get(d).onBeforeSend({multichainTransaction:l,gasEstimation:m})??l,g=await Rn({accountIdentifier:t,accountSigner:r,multichainTransaction:b,networkID:d,pendingTransactionInput:c,senderAddress:p,storage:e,utxoManager:o});return En(d,g)},onError(l){l instanceof Error&&(Ae.captureError(l,"fungibles"),l instanceof Tn&&n(l))}})}s();a();var Fo=I(L());var wr=(e,t,n)=>{let o=se(),{fungibles:r}=de({keys:[e]}),i=r.length===1?r[0]:void 0;(0,Fo.useEffect)(()=>{if(!i)return;let{type:l,data:c}=i,{balance:p,decimals:m,chain:d}=c,{id:b}=d,g=j(l)===!0;if(!n||!p||g||p.isEqualTo(t))return;let S=W.transferFungibleLoggingContext(e),h={transactionId:n,decimals:m,chainId:b,isNativeToken:g,previousBalance:p,fungibleKey:e};o.setQueryData(S,h)},[n])};s();a();var wo=I(L());s();a();function ho(e,t,n){return J.PublicKey.findProgramAddressSync([e.toBuffer(),n.toBuffer(),t.toBuffer()],hn)[0]}var kr=new ft("Unable to unwrap SOL. Wrapped SOL Token account does not exist.");function Wt(){let{connection:e}=Hn(),{data:t}=ae(),{solanaChainAddress:n,accountIdentifier:o}=(0,wo.useMemo)(()=>({solanaChainAddress:t?.addresses.find(We),accountIdentifier:t?.identifier??""}),[t]),r=Se(),i=Ee(),{t:l}=$();return ge({mutationFn:async()=>{if(!n)return Promise.reject("solanaChainAddress not loaded");let{networkID:c,address:p}=n,m=new J.PublicKey(p),d=ho(m,ve,Ke);if(!await e.getAccountInfo(d))throw kr;let g=ro(d,m,m,[],Ke),S=new Zt.Transaction().add(g),h={ownerAddress:p,networkID:c,data:{signature:""},type:"unwrapSOL",display:{summary:{topLeft:{text:l("assetDetailUnwrappingSOL")}}}},C=await Cn({accountIdentifier:o,accountSigner:i,connection:e,feePayer:new J.PublicKey(p),pendingTransactionInput:h,storage:r,transaction:S,useSubmissionService:!1});return{networkID:c,id:C}}})}s();a();var ko=ye({minutes:1}),Cr=(e,t=!0)=>{let n=W.solanaBalance(e);return ne({enabled:!!e&&t&&We(e),gcTime:ko,staleTime:ko,queryKey:n,async queryFn(){if(!e)throw new Error("No chain address provided");if(We(e))return yn(e.networkID).getBalance(new J.PublicKey(e.address));throw new Error(`SOL balance not implemented for ${e.networkID}`)}})};s();a();function Kt({balance:e,fungibleTokenType:t,chainAddress:n,isSendEnabledForTokenType:o,isSplNonTransferable:r}){let{data:i}=At(n),l;switch(t){case"BRC20":case"BitcoinNative":l=!!i;break;default:l=!0}return e.isGreaterThan(0)&&o&&l&&!r}s();a();var xo=I(L());s();a();var Co=I(L());var Qt=e=>{let{data:t}=Ie();return(0,Co.useMemo)(()=>{if(!e||!t)return;let n=e.data.chain.id,o=t.explorers[n]??Re.get(n).defaultExplorer,r,i;if(j(e.type))i="address",r=e.data.walletAddress;else switch(e.type){case"ERC20":{i="address",r=e.data.contractAddress;break}case"SPL":{i="address",r=(e.data.splTokenAccountPubkey||e.data.tokenAddress)??"";break}case"BRC20":return{explorerName:"Unisat",explorerUrl:`https://unisat.io/brc20?q=${e.data.walletAddress}`}}let l=Ue({networkID:n,endpoint:i,explorerType:o,param:r});return{explorerName:De[o],explorerUrl:l}},[e,t])};var xr=[{text:"commandReceive",type:"receive"},{text:"commandSend",type:"send"},{text:"commandSwap",type:"swap"},{text:"assetDetailStakeSOL",singleWordAltText:"commandStake",type:"stakeSol",menuOnly:!0},{text:"commandMintLST",singleWordAltText:"commandMintLST",type:"mintLST",menuOnly:!0},{text:"assetDetailUnwrapAll",singleWordAltText:"commandUnwrap",type:"unwrapWrappedSol",menuOnly:!0},{text:"commandStake",singleWordAltText:"commandStake",type:"stake",menuOnly:!0},{text:"commandUnstake",singleWordAltText:"commandUnstake",type:"unstake",menuOnly:!0},{text:"commandReportAsSpam",singleWordAltText:"commandReport",type:"reportAsSpam",isDestructive:!0,menuOnly:!0},{text:"commandReportAsNotSpam",singleWordAltText:"collectiblesReportNotSpam",type:"reportAsNotSpam",isDestructive:!0,menuOnly:!0},{text:"",singleWordAltText:"commandView",type:"viewOnExplorer",menuOnly:!0}];function Er(e,t){return xr.reduce((n,o)=>{let r=e[o.type];if(r===void 0)return n;if((typeof r.enabled>"u"?!!r.onClick:r.enabled)&&r.onClick){let l=r.text?r.text:t(o.text);return[...n,{...o,onClick:r.onClick,text:l,...o.singleWordAltText?{singleWordAltText:t(o.singleWordAltText)}:{}}]}return n},[])}function Rr(e){let{balance:t,canSwap:n,chainAddress:o,fee:r,fungible:i,isReadOnlyAccount:l,isSplNonTransferable:c,killBrc20Sends:p,onDepositPress:m,onMarkAsSpam:d,onMarkNotSpam:b,onSendPress:g,onStakeSolPress:S,onSwapPress:h,onUnwrapWrappedSolPress:C,onNativeMintLSTPress:w,onStakeLSTPress:N,onUnstakeLSTPress:D,onViewOnExplorerPress:F,type:y}=e,{t:O}=$(),E=Pe("solana"),A=Qt(i),v=y==="BRC20"?!p:!0,P=Kt({balance:t,fungibleTokenType:y,chainAddress:o,isSendEnabledForTokenType:v,isSplNonTransferable:c}),V=y==="SolanaNative",U=!l&&V,Q=y==="SPL"&&i?.data.tokenAddress===ve.toBase58(),{fungible:ee}=Fe({key:"SolanaNative"}),T=M(ee?.data?.amount??"0"),q=Q&&!!i.data.tokenAddress&&E!==void 0&&T.isGreaterThan(r),G=(0,xo.useMemo)(()=>{let te=Er({receive:{enabled:!0,onClick:m},viewOnExplorer:{enabled:!0,onClick:F,text:O("assetDetailViewOnExplorer",{explorer:A?.explorerName})},send:{enabled:P,onClick:g},swap:{enabled:n,onClick:h},stakeSol:{enabled:U,onClick:S},mintLST:{onClick:w},unwrapWrappedSol:{enabled:q,onClick:C},stake:{onClick:N},unstake:{onClick:D},reportAsSpam:{enabled:i?.type&&!j(i.type),onClick:d},reportAsNotSpam:{enabled:i?.type&&!j(i.type),onClick:b}},O);return te.sort((k,R)=>(Le.get(k.type)??100)-(Le.get(R.type)??100)),jn(te,4)},[O,m,P,n,U,q,d,b,A?.explorerName,F,i?.type,g,h,S,C,N,D,w]);return{canStakeSol:U,canUnwrapWrappedSol:q,ctaActions:G}}s();a();var Ge=I(L());s();a();s();a();var Dr=Y.object({data:In}),Ur="TokenHoldingsNotLoading";async function Eo(e){let t=be(e.caip19),n=new URLSearchParams;n.append("walletAddress",e.walletAddress);let o=t.resourceType==="nativeToken"?t.slip44:t.address,r=await fe.api().timeout(ye({seconds:10})).get(`/tokens/v1/${t.chainId}/${t.resourceType}/${o}/holdings`,{params:n});if(r.status!==200)throw new ut({key:Ur});let i=await r.data;return Dr.parse(i)}var Ir="get-fungible-holdings",Pr=e=>({gcTime:Oe.Short,staleTime:Qe.Long,enabled:!!e,queryKey:e?W.fungibleHoldings(e):[],async queryFn(){if(!e)throw new Error("No args provided for getFungibleHoldings");try{return(await Eo(e)).data}catch(t){if(rt(t)){let n=t.response?.status;yt(t,n,Ir,{})}throw t}}});function Ro(e){return ne(Pr(e))}function Nr(e){if(e&&_.isBitcoinNetworkID(e.networkID))return`${sn.getDisplayName(e.addressType)} (${on(e.address,5,3)})`}function vr({symbol:e,name:t,chainName:n,addressString:o,mintAddress:r,contractAddress:i,transferFeePercent:l,interestBearingPercent:c,isNonTransferable:p,isPermanentDelegated:m,copyToClipboard:d}){return[{label:u.t("assetDetailTokenNameLabel"),value:e?`${t} (${e})`:t},n?{label:u.t("assetDetailNetworkLabel"),value:n}:void 0,o?{label:u.t("assetDetailAddressLabel"),value:o}:void 0,r?{label:u.t("publicFungibleDetailMint"),value:pe(r,4),onPress:()=>{d(r)}}:void 0,i?{label:u.t("publicFungibleDetailContract"),value:pe(i,4),onPress:()=>{d(i)}}:void 0,l?{label:u.t("sendFungibleTransferFee"),value:`${l}%`,tooltipContent:u.t("sendFungibleTransferFeeToolTip")}:void 0,c?{label:u.t("sendFungibleInterestBearingPercent"),value:`${c}%`}:void 0,p?{label:u.t("sendFungibleNonTransferable"),value:u.t("sendFungibleNonTransferableYes")}:void 0,m?{label:u.t("permanentDelegateTitle"),value:u.t("permanentDelegateValue"),tooltipContent:u.t("permanentDelegateTooltipValue")}:void 0].filter(it)}function Do({fungibleKey:e,account:t,copyToClipboard:n}){let{fungible:o}=Fe({key:e}),{chainName:r,symbol:i,name:l,walletAddress:c,networkID:p,transferFeePercent:m,interestBearingPercent:d,isNonTransferable:b,isPermanentDelegated:g}=(0,Ge.useMemo)(()=>{let E=o?.data;if(!E)return{};let{symbol:A,name:v,chain:P,walletAddress:V}=E,U=St(o),Q=Nn(o),ee=Bn(o),T=!!vn(o);return{symbol:A??null,name:v??u.t("assetDetailUnknownToken"),walletAddress:V,chainName:P.name,networkID:P.id,transferFeePercent:U,interestBearingPercent:Q,isNonTransferable:ee,isPermanentDelegated:T}},[o]),{data:S}=Pe({address:c,networkID:p});Qn(S);let h=(0,Ge.useMemo)(()=>Nr(S),[S]),C=(0,Ge.useMemo)(()=>o&&o.type==="SPL"?o.data.mintAddress:void 0,[o]),w=(0,Ge.useMemo)(()=>o&&o.type==="ERC20"?o.data.contractAddress:void 0,[o]),{partialErrorMessage:N,shouldShowPartialError:D}=Ve({chainAddresses:t?.addresses,networkID:p}),{data:[F]}=Ce(["enable-holdings"]),y=F&&o?ct(ht(o)):void 0,O=Ro(y&&c?{caip19:y,walletAddress:c}:void 0);return(0,Ge.useMemo)(()=>({summaryItems:vr({symbol:i,name:l,chainName:r,addressString:h,mintAddress:C,contractAddress:w,transferFeePercent:m,interestBearingPercent:d,isNonTransferable:b,isPermanentDelegated:g,copyToClipboard:n}),partialErrorMessage:N,shouldShowPartialError:D,holdingsQueryResult:O,isHoldingsEnabled:F}),[n,i,l,r,h,C,w,m,d,b,N,D,g,O,F])}s();a();var Uo=I(L());var Br=e=>{let t=se();return(0,Uo.useCallback)(()=>t.invalidateQueries({queryKey:W.tokens(e)}),[t,e])};s();a();var Io=I(L()),qt=(e,t)=>(0,Io.useMemo)(()=>{if(e)if(mt(e)){let n=dn(e).toNumber().toLocaleString("en-US");return{leftSubtext:void 0,leftSubtextColor:void 0,rightSubtext:t("satsAmount",{sats:n.toString()})}}else return dt(e)&&e.highFees?{leftSubtext:t("notificationTransactionApprovalNetworkFeeHighWarning"),leftSubtextColor:"#ffdc62",rightSubtext:""}:void 0},[e,t]);s();a();s();a();s();a();s();a();var Or="TokenDetailNotLoading";async function $t(e){let t=be(e.caip19),n=t.resourceType==="nativeToken"?t.slip44:t.address,o=await fe.api().timeout(ye({seconds:10})).get(`/tokens/v1/${t.chainId}/${t.resourceType}/${n}`);if(o.status!==200)throw new ut({key:Or});let r=await o.data;return Dn.parse(r.data),r}s();a();var Po={fungibleDetail({caip19:e}){return["fungibleDetail",{caip19:e}]}};var Lr="get-fungible-detail",No=e=>({gcTime:Oe.Short,staleTime:Qe.Long,queryKey:Po.fungibleDetail({caip19:e.caip19}),async queryFn(){try{return(await $t(e)).data}catch(t){if(rt(t)){let n=t.response?.status;yt(t,n,Lr,{})}throw t}}});function Ye(e){return ne(No(e))}var Z=I(L());function Vr(e,t){if(!e)return;let n=[];X(n,u.t("nounSymbol"),e.symbol),X(n,u.t("nounNetwork"),e.chain.name),X(n,lt.safeParse(e.chain.id).success?u.t("publicFungibleDetailMint"):u.t("publicFungibleDetailContract"),t);let o=Bo(e.marketCap);X(n,u.t("publicFungibleDetailMarketCap"),o);let r=je(e.totalSupply);X(n,u.t("publicFungibleDetailTotalSupply"),r);let i=je(e.circulatingSupply);X(n,u.t("publicFungibleDetailCirculatingSupply"),i);let l=Kr(e.maxSupply);X(n,u.t("publicFungibleDetailMaxSupply"),l);let c=je(e.holders);return X(n,u.t("publicFungibleDetailHolders"),c),n}function Gr(e){if(!e)return;let t=[],n=Bo(e.volume24hUSD),o=Rt(e.volume24hUSDChangePercentage);Yt(t,u.t("publicFungibleDetailVolume"),n,o);let r=je(e.trades24h),i=Rt(e.trades24hChangePercentage);Yt(t,u.t("publicFungibleDetailTrades"),r,i);let l=je(e.uniqueWallets24h),c=Rt(e.uniqueWallets24hChangePercentage);return Yt(t,u.t("publicFungibleDetailTraders"),l,c),t.length>0?t:void 0}function _r(e,t){if(!e)return;let n=[],o=Rt(e.top10HoldersPercent);X(n,u.t("publicFungibleDetailTop10Holders"),o,u.t("publicFungibleDetailTop10HoldersTooltip"),t);let r=zt(e.mintable);X(n,u.t("publicFungibleDetailMintable"),r,u.t("publicFungibleDetailMintableTooltip"),t);let i=zt(e.mutableMetadata);X(n,u.t("publicFungibleDetailMutableInfo"),i,u.t("publicFungibleDetailMutableInfoTooltip"),t);let l=zt(e.ownershipRenounced);X(n,u.t("publicFungibleDetailOwnershipRenounced"),l,u.t("publicFungibleDetailOwnershipRenouncedTooltip"),t);let c=vo(e.updateAuthority);X(n,u.t("publicFungibleDetailUpdateAuthority"),c,u.t("publicFungibleDetailUpdateAuthorityTooltip"),t);let p=vo(e.freezeAuthority);return X(n,u.t("publicFungibleDetailFreezeAuthority"),p,u.t("publicFungibleDetailFreezeAuthorityTooltip"),t),n.length>0?n:void 0}function Hr(e){let{fungibleAnalytics:t,caip19:n,canBuy:o,canSwap:r,entryPoint:i,fungibleKey:l,navigateToBalance:c,openBuy:p,openReportIssue:m,openLink:d,openSwapper:b,showSummaryTooltip:g,title:S,onShare:h,copyAddress:C,includeUgcItemTypes:w,refetchBondingCurve:N}=e,{t:D}=$(),F=re(),y=(0,Z.useMemo)(()=>be(n),[n]),{data:O}=ae(),E=O?.isReadOnly??!1,{data:A,refetch:v,isError:P}=Ye({caip19:n}),V=qr(l,y),{fungibles:U,isLoadingTokens:Q,refetch:ee}=de({keys:V}),T=U?.[0],q=Qr(A,T,S),G=(0,Z.useRef)(!1);(0,Z.useEffect)(()=>{!G.current&&!Q&&(G.current=!0,t.onPublicFungiblePageOpen({caip19:n,uiContext:{name:i},hasBalance:!!T}))},[t,n,T,i,Q]);let te=(0,Z.useCallback)(()=>{Promise.all([v(),ee(),N()])},[v,ee,N]),k=(0,Z.useCallback)(()=>{if(!T)return;let x=T.data.chain.id,ce=q??D("assetDetailUnknownToken");F.capture("assetDetailClick",{data:{address:T.data.tokenAddress,chain:x,chainId:x,isNativeOfType:x,networkId:x,type:"fungible",spamStatus:T.data.spamStatus,name:ce}}),c({chainName:T.data.chain.name,fungibleKey:T.data.key,title:q,networkID:T.data.chain.id,symbol:T.data.symbol??"",tokenAddress:T.data.tokenAddress,type:T.type,walletAddress:T.data.walletAddress})},[q,T,c,F,D]),R=[];w&&R.push({type:"ugcWarningBanner",data:{caip19:n,spamStatus:A?.spamStatus}}),!w&&A&&A.spamStatus!=="VERIFIED"&&R.push({type:"unverifiedBanner"}),R.push({type:"priceHistory",data:{caip19:n}});let B=Wr({caip19:n,canBuy:o,canSwap:r,fungible:T,fungibleCaip19:y,openBuy:p,openReportIssue:m,openLink:d,openSwapper:b,title:q,onShare:h,isReadOnly:E}),ue=B.primary.length>0,me=!E&&B.primary.length===0&&B.more.length>0;ue&&R.push({type:"cta",data:{actions:B}}),T&&R.push({type:"sectionHeader",data:u.t("publicFungibleDetailYourBalance")},{type:"balance",data:{fungible:T,onPress:k}}),P&&R.push({type:"error",data:void 0}),A?.description&&R.push({type:"sectionHeader",data:u.t("publicFungibleDetailAbout")},{type:"about",data:A.description});let le=Vr(A,C);le&&(R.push({type:"sectionHeader",data:u.t("publicFungibleDetailInfo")}),w?R.push({type:"tableWithBondingCurveProgress",data:{caip19:n,rows:le,key:"info"}}):R.push({type:"table",data:{key:"info",rows:le}}));let he=Gr(A);he&&R.push({type:"sectionHeader",data:u.t("publicFungibleDetailPerformance")},{type:"table",data:{key:"performance",rows:he}});let oe=_r(A,g);oe&&R.push({type:"sectionHeader",data:u.t("publicFungibleDetailSecurity")},{type:"table",data:{key:"security",rows:oe}});let _e=(0,Z.useCallback)(x=>{F.capture("onPublicFungibleLinkOpen",{data:{url:x}})},[F]);return A?.links&&R.push({type:"links",data:{links:A.links,trackAction:_e}}),{title:q,caip19:n,items:R,actions:me?B:void 0,showMoreInHeader:me,isLoading:Q,refetch:te}}function Wr(e){let{caip19:t,canBuy:n,canSwap:o,fungible:r,fungibleCaip19:i,openBuy:l,openReportIssue:c,openLink:p,openSwapper:m,title:d,onShare:b,isReadOnly:g}=e,{t:S}=$(),{data:h}=pt(),{data:[C]}=Ce(["prefer-phantom-dot-com"]),w=o(i.chainId),N=(0,Z.useCallback)(()=>{t&&m({buyFungibleCaip19:t})},[t,m]),{data:D}=Ie(),F=i.resourceType==="address",y=(0,Z.useMemo)(()=>{if(!F||!D)return;let P=i.chainId,V=D.explorers[P]??Re.get(P).defaultExplorer,U=Ue({networkID:P,endpoint:"address",explorerType:V,param:i.address});return{explorerName:De[V],explorerUrl:U}},[F,i,D]),O=(0,Z.useCallback)(()=>{y?.explorerUrl&&p(y?.explorerUrl)},[y?.explorerUrl,p]),E={caip19:t,hasBalance:!!r,title:d},A=[];w&&!g&&A.push({type:"swap",text:S("commandSwap"),onClick:N,typeSpecificMetadata:E}),n&&!g&&A.push({type:"buy",text:S("commandBuy"),onClick:l??It,typeSpecificMetadata:E});let v=kt.getUrlFromFungible({caip19:i,isAnalyticsOptedOut:!!h,useDotCom:C});return v&&A.push({type:"share",text:S("commandShare"),onClick:()=>b(v),typeSpecificMetadata:{...E,shareUrl:v}}),A.push({type:"reportAsSpam",text:S("commandReportIssue"),onClick:c??It,menuOnly:!0,typeSpecificMetadata:E}),F&&A.push({type:"viewOnExplorer",text:S("assetDetailViewOnExplorer",{explorer:y?.explorerName}),singleWordAltText:S("commandView"),onClick:O,menuOnly:!0,typeSpecificMetadata:{...E,origin:st(y?.explorerUrl)}}),wt(A,3)}var vo=e=>e?pe(e):void 0,Rt=e=>e?at(bt(e)):void 0,je=e=>e?Me(e):void 0,Bo=e=>e?xe(e,{compact:!0}):void 0,Kr=e=>e===null?"\u221E":e===void 0?void 0:Me(e),zt=e=>e==null?void 0:e?u.t("nounYes"):u.t("nounNo");function X(e,t,n,o,r){n&&e.push({label:t,value:n,tooltipContent:o,handleTooltip:r?()=>{r(t,o??"")}:void 0})}function Yt(e,t,n,o,r,i){!n||!o||e.push({label:t,value:n,change:o,tooltipContent:r,handleTooltip:i?()=>{i(t,r??"")}:void 0})}var Qr=(e,t,n)=>e?.name??t?.data.name??n??"",qr=(e,t)=>e?[e]:t?gt(t):void 0;s();a();var z=I(L());function $r(e,{showSummaryTooltip:t,copyAddress:n}){if(!e)return;let o=[];H(o,u.t("nounSymbol"),e.symbol),H(o,u.t("nounNetwork"),e.chain.name),H(o,lt.safeParse(e.chain.id).success?u.t("publicFungibleDetailMint"):u.t("publicFungibleDetailContract"),n);let r=Go(e.marketCap);H(o,u.t("publicFungibleDetailMarketCap"),r);let i=Je(e.totalSupply);H(o,u.t("publicFungibleDetailTotalSupply"),i);let l=Je(e.circulatingSupply);H(o,u.t("publicFungibleDetailCirculatingSupply"),l);let c=ci(e.maxSupply);H(o,u.t("publicFungibleDetailMaxSupply"),c);let p=Je(e.holders);H(o,u.t("publicFungibleDetailHolders"),p);let m=li(e.mintExtensions?.find(Xr)?.state.newerTransferFee.transferFeeBasisPoints);return H(o,u.t("sendFungibleTransferFee"),m,u.t("sendFungibleTransferFeeToolTip"),t),o}function zr(e){if(!e)return;let t=[],n=Go(e.volume24hUSD),o=Xe(e.volume24hUSDChangePercentage);jt(t,u.t("publicFungibleDetailVolume"),n,o);let r=Je(e.trades24h),i=Xe(e.trades24hChangePercentage);jt(t,u.t("publicFungibleDetailTrades"),r,i);let l=Je(e.uniqueWallets24h),c=Xe(e.uniqueWallets24hChangePercentage);return jt(t,u.t("publicFungibleDetailTraders"),l,c),t.length>0?t:void 0}function Yr(e,t){if(!e)return;let n=[],o=Xe(e.top10HoldersPercent);H(n,u.t("publicFungibleDetailTop10Holders"),o,u.t("publicFungibleDetailTop10HoldersTooltip"),t);let r=Dt(e.mintable);H(n,u.t("publicFungibleDetailMintable"),r,u.t("publicFungibleDetailMintableTooltip"),t);let i=Dt(e.mutableMetadata);H(n,u.t("publicFungibleDetailMutableInfo"),i,u.t("publicFungibleDetailMutableInfoTooltip"),t);let l=Dt(e.ownershipRenounced);H(n,u.t("publicFungibleDetailOwnershipRenounced"),l,u.t("publicFungibleDetailOwnershipRenouncedTooltip"),t);let c=Lo(e.updateAuthority);H(n,u.t("publicFungibleDetailUpdateAuthority"),c,u.t("publicFungibleDetailUpdateAuthorityTooltip"),t);let p=Lo(e.freezeAuthority);H(n,u.t("publicFungibleDetailFreezeAuthority"),p,u.t("publicFungibleDetailFreezeAuthorityTooltip"),t);let m=Mo(e.mintExtensions?.find(jr)?.state.delegate);H(n,u.t("permanentDelegateTitle"),m,u.t("permanentDelegateTooltipValue"),t);let d=Mo(e.mintExtensions?.find(Jr));return H(n,u.t("sendFungibleNonTransferable"),d,u.t("sendFungibleNonTransferableToolTip"),t),n.length>0?n:void 0}function jr(e){return e.extension==="permanentDelegate"}function Xr(e){return e.extension==="transferFeeConfig"}function Jr(e){return e.extension==="nonTransferable"}function Zr(e){let{fungibleAnalytics:t,caip19:n,canBuy:o,canSwap:r,entryPoint:i,fungibleKey:l,openBuy:c,openLink:p,openSwapper:m,showSummaryTooltip:d,title:b,onShare:g,onSend:S,onReceive:h,copyAddress:C,includeUgcItemTypes:w,refetchBondingCurve:N,onUnwrapWrappedSol:D,onStakeSol:F,onNativeMintLSTPress:y,onStakeLSTPress:O,onUnstakeLSTPress:E}=e,A=re(),v=(0,z.useMemo)(()=>be(n),[n]),{data:P}=ae(),V=P?.isReadOnly??!1,{data:U,refetch:Q,isError:ee}=Ye({caip19:n}),T=di(l,v),{fungibles:q,isLoadingTokens:G,refetch:te}=de({keys:T}),k=ui(q),R=pi(U,k,b),B=ri({fungible:k,fungibleDetail:U,fungibleCaip19:v}),ue=ai({fungible:B,accountId:P?.identifier}),{onMarkNotSpamAsync:me}=Vo({fungible:B,accountId:P?.identifier,fungibleCaip19:v}),{partialErrorMessage:le,shouldShowPartialError:he}=Ve({chainAddresses:P?.addresses,networkID:v.chainId}),oe=(0,z.useRef)(!1);(0,z.useEffect)(()=>{!oe.current&&!G&&(oe.current=!0,t.onPublicFungiblePageOpen({caip19:n,uiContext:{name:i},hasBalance:!!B?.data.balance.gt(0)}))},[t,n,B,i,G]);let _e=(0,z.useCallback)(()=>{Promise.all([Q(),te(),N()])},[Q,te,N]),x=[];he&&x.push({type:"partialError",data:le}),ti(x,{fungible:B,derivedSpamStatus:ue,onMarkNotSpamAsync:me,includeUgcItemTypes:w,caip19:n,hasFungibleDetail:!!U}),x.push({type:"priceHistory",data:{caip19:n}});let ce=oi({caip19:n,canBuy:o,canSwap:r,fungible:B,fungibleCaip19:v,openBuy:c,openLink:p,openSwapper:m,onSend:S,onReceive:h,title:R,onShare:g,isReadOnly:V,derivedSpamStatus:ue,accountId:P?.identifier,onUnwrapWrappedSol:D,onStakeSol:F,onNativeMintLSTPress:y,onStakeLSTPress:O,onUnstakeLSTPress:E}),we=ce.primary.length>0,et=!V&&ce.primary.length===0&&ce.more.length>0;we&&x.push({type:"cta",data:{actions:ce}}),k&&(x.push({type:"balance",data:{status:"success",fungible:k,holdings:void 0}}),!V&&k.type==="SolanaNative"&&(x.push({type:"sectionHeader",data:u.t("assetDetailStakingLabel")}),x.push({type:"staking",data:k}))),ee&&x.push({type:"error",data:void 0}),U?.description&&x.push({type:"sectionHeader",data:u.t("publicFungibleDetailAbout")},{type:"about",data:U.description.trim()});let ke=$r(U,{copyAddress:C,showSummaryTooltip:d});ke&&(x.push({type:"sectionHeader",data:u.t("publicFungibleDetailInfo")}),w?x.push({type:"tableWithBondingCurveProgress",data:{caip19:n,rows:ke,key:"info"}}):x.push({type:"table",data:{key:"info",rows:ke}}));let tt=zr(U);tt&&x.push({type:"sectionHeader",data:u.t("publicFungibleDetailPerformance")},{type:"table",data:{key:"performance",rows:tt}});let nt=Yr(U,d);nt&&x.push({type:"sectionHeader",data:u.t("publicFungibleDetailSecurity")},{type:"table",data:{key:"security",rows:nt}});let ot=(0,z.useCallback)(Ut=>{A.capture("onPublicFungibleLinkOpen",{data:{url:Ut}})},[A]);return U?.links&&x.push({type:"links",data:{links:U.links,trackAction:ot}}),k&&k.data.balance.gt(0)&&ue!=="POSSIBLE_SPAM"&&x.push({type:"transactionHistory",data:{fungible:k,caip19:n,fungibleKey:(T??[]).find(Boolean)}}),{title:R,caip19:n,fungible:k,items:x,actions:et?ce:void 0,showMoreInHeader:et,isLoading:G||!B,refetch:_e}}var ei=[{type:"receive",text:"commandReceive"},{type:"send",text:"commandSend"},{type:"swap",text:"commandSwap"},{type:"buy",text:"commandBuy"},{type:"share",text:"commandShare"},{text:"assetDetailStakeSOL",singleWordAltText:"commandStake",type:"stakeSol",menuOnly:!0},{text:"commandMintLST",singleWordAltText:"commandMintLST",type:"mintLST",menuOnly:!0},{text:"assetDetailUnwrapAll",singleWordAltText:"commandUnwrap",type:"unwrapWrappedSol",menuOnly:!0},{text:"commandStake",singleWordAltText:"commandStake",type:"stake",menuOnly:!0},{text:"commandUnstake",singleWordAltText:"commandUnstake",type:"unstake",menuOnly:!0},{text:"commandReportAsSpam",type:"reportAsSpam",isDestructive:!0,menuOnly:!0},{text:"commandReportAsNotSpam",type:"reportAsNotSpam",isDestructive:!0,menuOnly:!0},{text:"",singleWordAltText:"commandView",type:"viewOnExplorer",menuOnly:!0}];function ti(e,{fungible:t,derivedSpamStatus:n,onMarkNotSpamAsync:o,includeUgcItemTypes:r,caip19:i,hasFungibleDetail:l}){t&&n&&n==="POSSIBLE_SPAM"?e.push({type:"spamTreatment",data:{fungible:t,spamStatus:n,markAsNotSpam:o}}):r?e.push({type:"ugcWarningBanner",data:{caip19:i,spamStatus:n}}):!r&&l&&n!=="VERIFIED"&&e.push({type:"unverifiedBanner"})}function ni(e,t){return ei.reduce((n,o)=>{let r=e[o.type];return r===void 0?n:!!("enabled"in r?r.enabled:r.onClick)&&r.onClick?[...n,{...o,onClick:r.onClick,text:r.text?r.text:t(o.text),..."singleWordAltText"in o&&{singleWordAltText:t(o.singleWordAltText)},..."typeSpecificMetadata"in r&&{typeSpecificMetadata:r.typeSpecificMetadata}}]:n},[])}function oi(e){let{accountId:t,caip19:n,canBuy:o,canSwap:r,fungible:i,fungibleCaip19:l,openBuy:c,openLink:p,openSwapper:m,onReceive:d,onSend:b,title:g,onShare:S,onUnwrapWrappedSol:h,onStakeSol:C,derivedSpamStatus:w,onNativeMintLSTPress:N,onStakeLSTPress:D,onUnstakeLSTPress:F,isReadOnly:y}=e,{t:O}=$(),{data:E}=pt(),{data:[A]}=Ce(["prefer-phantom-dot-com"]),{onMarkAsSpam:v,onMarkNotSpam:P}=Vo({fungible:i,accountId:t,fungibleCaip19:l}),V=Oo(d,i),U=Oo(b,i),Q=r(l.chainId)&&w&&!Ft(w),ee=(0,z.useCallback)(()=>{n&&m({buyFungibleCaip19:n})},[n,m]),T=ii({walletAddress:i?.data.walletAddress,fungibleCaip19:l}),q=(0,z.useCallback)(()=>{T?.explorerUrl&&p(T?.explorerUrl)},[T?.explorerUrl,p]),G=!!i&&i.data.balance.gt(0),te=j(i?.type),k={caip19:n,hasBalance:G,title:g},R=kt.getUrlFromFungible({caip19:l,isAnalyticsOptedOut:!!E,useDotCom:A}),ue=i&&i.type==="SPL"&&i?.data.tokenAddress===ve.toBase58()&&!y&&i.data.balance.isGreaterThan(Te(xn).dividedBy(J.LAMPORTS_PER_SOL)),me=si(),le=ni({receive:{enabled:!y&&(G||te),onClick:V,typeSpecificMetadata:k},send:{enabled:!y&&G,onClick:U,typeSpecificMetadata:k},swap:{enabled:!y&&Q,onClick:ee,typeSpecificMetadata:k},buy:{enabled:!y&&o,onClick:c,typeSpecificMetadata:k},unwrapWrappedSol:{enabled:ue,onClick:h?()=>h(me):void 0},stakeSol:{enabled:!y&&i?.type==="SolanaNative",onClick:C,typeSpecificMetadata:k},mintLST:{enabled:!y&&G,onClick:N},stake:{enabled:!y&&G,onClick:D},unstake:{enabled:!y&&G,onClick:F},share:{onClick:R?()=>S(R):void 0,typeSpecificMetadata:k},reportAsSpam:{enabled:w&&!Ft(w),onClick:v,typeSpecificMetadata:k},reportAsNotSpam:{enabled:w&&Ft(w),onClick:P,typeSpecificMetadata:k},viewOnExplorer:{enabled:!!T,onClick:q,text:O("assetDetailViewOnExplorer",{explorer:T?.explorerName}),typeSpecificMetadata:{...k,origin:st(T?.explorerUrl)}}},O);return wt(le,4)}function ri({fungible:e,fungibleDetail:t,fungibleCaip19:n}){if(e)return e;if(t){if("address"in n){let o=Pn(n),r=t.address??n.address,i={amount:"0",balance:Te(0),chain:t.chain,decimals:t.decimals,logoUri:t.logoURI??t.logoUri,name:t.name??"Unknown",symbol:t.symbol??"Unknown",key:r,walletAddress:"",spamStatus:t.spamStatus};if("SPL"===o)return{type:"SPL",data:{...i,mintAddress:r,programId:"",splTokenAccountPubkey:""}};if("ERC20"===o)return{type:"ERC20",data:{...i,contractAddress:r}};if("BRC20"===o)return{type:"BRC20",data:{...i,firstCreatedInscriptionId:r}};Ae.captureError(new Error(`Fungible type could not be derived from ${o}`),"fungibles");return}Ae.captureError(new Error(`Fungible type could not be derived from ${n.chainId}/${n.slip44}`),"fungibles")}}function ii({walletAddress:e,fungibleCaip19:t}){let{data:n}=Ie(),o=t.resourceType==="address"?t.address:e;if(!o||!n)return;let r=t.chainId,i=n.explorers[r]??Re.get(r).defaultExplorer,l=Ue({networkID:r,endpoint:"address",explorerType:i,param:o});return{explorerName:De[i],explorerUrl:l}}function Oo(e,t){return(0,z.useMemo)(()=>{if(e)return()=>{t&&e(t)}},[e,t])}function si(){let{mutateAsync:e}=Wt();return e}function ai({fungible:e,accountId:t}){let{data:n}=Pt(t??"");return e?zn(n,{key:e.data.key,spamStatus:e?.data.spamStatus??"NOT_VERIFIED"}):void 0}function Vo({fungible:e,accountId:t,fungibleCaip19:n}){let o=re(),{mutateAsync:r}=vt(),i=(0,z.useCallback)(async()=>{!e||!t||(o.capture("fungiblesReportAsNotSpam",{data:{caip19:ct(n)}}),await r({accountId:t,mutations:[{fungibleKey:e.data.key,visibility:"visible:reported_notSpam"}]}))},[t,e,r,o,n]),l=(0,z.useCallback)(()=>{i()},[i]);return{onMarkAsSpam:(0,z.useMemo)(()=>{if(e&&j(e.type))return;let p=Yn({analytics:o,fungible:e,accountId:t,setVisibilityOverrides:r});if(p)return()=>{p()}},[t,e,r,o]),onMarkNotSpam:l,onMarkNotSpamAsync:i}}var ui=e=>e&&e.length>0?e.reduce((t,n)=>!t||t.data.balance.lt(n.data.balance)?n:t,void 0):void 0,Lo=e=>e?pe(e):void 0,li=e=>e?Xe(bt(e)):void 0,Xe=e=>e?at(e/100):void 0,Je=e=>e?Me(e):void 0,Go=e=>e?xe(e,{compact:!0}):void 0,ci=e=>e===null?"\u221E":e===void 0?void 0:Me(e),Dt=e=>e==null?void 0:e?u.t("nounYes"):u.t("nounNo"),Mo=e=>e==null?void 0:Dt(!!e);function H(e,t,n,o,r){n&&e.push({label:t,value:n,tooltipContent:o,handleTooltip:r?()=>{r(t,o??"")}:void 0})}function jt(e,t,n,o,r,i){!n||!o||e.push({label:t,value:n,change:o,tooltipContent:r,handleTooltip:i?()=>{i(t,r??"")}:void 0})}var pi=(e,t,n)=>e?.name??t?.data.name??n??"",di=(e,t)=>e?[e]:t?gt(t):void 0;s();a();var ie=I(L());s();a();var _o=I(L()),Ho=({networkID:e,transactionUnitAmount:t,onTransactionSpeedChange:n})=>{let{status:o,data:r}=Tt({networkID:e}),{transactionSpeed:i}=K(c=>c.sendFormValues),l=(0,_o.useMemo)(()=>{if(o!=="error"&&r&&i)return()=>n(i,t)},[n,i,t,r,o]);return{transactionSpeed:i,openTransactionSettings:l}};var mi={accentAlert:"#EB3742",white:"#FFFFFF"};var fi=({networkID:e,recipient:t,uiRecipient:n,displayUiRecipient:o,networkName:r,networkFee:i,networkFeeErrorMsg:l,networkFeeRow:c,displayFeeTooltip:p,transferFeePercent:m,solanaMetadata:d,valueLoader:b,fontColors:g,openTransactionSettings:S,onNetworkFeeDescriptionPress:h,onTransferFeePress:C})=>(0,ie.useMemo)(()=>{let w=o?n:t;return[_.isSolanaNetworkID(e)&&d.label?{label:u.t("sendConfirmationLabel"),value:d.label}:void 0,_.isSolanaNetworkID(e)&&d.message?{label:u.t("sendConfirmationMessage"),value:d.message}:void 0,{label:u.t("transactionsTo"),value:w,isAddress:!bn(w),type:"address"},{label:u.t("sendFungibleSummaryNetwork"),value:r},{label:u.t("sendFungibleSummaryNetworkFee"),value:i.length>0?i:l?null:b,color:l?g.accentAlert:g.white,leftSubtext:l||void 0,leftSubtextColor:g.accentAlert,rightSubtext:c?.rightSubtext,tooltipContent:p?u.t("networkFeesTooltipDescription",{chainName:r})||"":void 0,onClick:p?S:void 0,onPress:p?S:void 0,handleTooltip:p?h:void 0},m?{label:u.t("sendFungibleTransferFee"),value:`${m}%`,tooltipContent:u.t("sendFungibleTransferFeeToolTip")||"",handleTooltip:C}:void 0,d.memo?{label:u.t("sendMemo"),value:d.memo.replace(/(\r\n|\n|\r)/gm," ")}:void 0].filter(it)},[p,o,g.accentAlert,g.white,i,l,c?.rightSubtext,e,r,h,C,S,t,d.label,d.memo,d.message,m,n,b]),gi=({hasSufficientFunds:e,isTransactionUnitError:t,hasGasEstimationFailed:n,nativeTokenSymbol:o})=>t?u.t("transactionGasLimitError"):n?u.t("transactionGasEstimationError"):e==="insufficient"?u.t("transactionNotEnoughNative",{nativeTokenSymbol:o}):"",yi=e=>{let{networkID:t,displayUiRecipient:n=!0,valueLoader:o,fontColors:r=mi,onTransactionSpeedChange:i,onNetworkFeeDescriptionPress:l,onTransferFeePress:c,onSubmissionCheckFail:p}=e,m=re(),d=_.getNetworkName(t),b=K(),g=K(He=>He.sendFormValues),S=K(He=>He.setSendFormValues),{amountAsset:h,recipient:C,recipientHandle:w,solana:N}=g,D=w||C,F=K(He=>He.fungibleKey),{fungible:y}=Fe({key:F,splTokenAccount:b.splTokenAccount}),O=y?y.data.tokenAddress:void 0,E=y?.data.symbol??(O?pe(O,4):u.t("tokenRowUnknownToken")),A=y?.data.logoUri??"",v=rn(h,y?.data.decimals??0),P=v.toString(),V=(0,ie.useMemo)(()=>y?ht(y):void 0,[y]),{data:U}=Vn({query:V?{data:V}:void 0}),Q=xe(Un(v.toNumber(),U?.usd??0)),ee=(0,ie.useMemo)(()=>({key:F,amount:P,symbol:E||"",logoUri:A,usdPrice:Q}),[F,A,E,Q,P]),{data:T}=Pe({address:y?.data.walletAddress,networkID:t}),{getExistingAccount:q,getKnownAddressLabel:G}=pn(),te=q(C),k=G(C,t),R=(0,ie.useMemo)(()=>cn(C,te,k,4),[te,C,k]);D=k?C:D,Ht(T,"SEND_FUNGIBLE");let{data:B}=Nt(b),{data:ue,isError:me}=Ln(B),{transactionSpeed:le,openTransactionSettings:he}=Ho({networkID:t,transactionUnitAmount:ue,onTransactionSpeedChange:i}),{data:oe,isFetched:_e,isSuccess:x}=Mn({networkID:t,multichainTransaction:B,transactionSpeed:le,queryOptions:{refetchInterval:!1}}),{data:ce}=_n(y?.data.chain.id,oe),we=Wn(T),et=y&&j(y.type)?h:new M(0),{hasSufficientFunds:ke,isLoading:tt,nativeTokenSymbol:nt}=Vt(t,T?.addressType,oe,et),ot=qn({networkID:t,gasEstimation:oe,gasEstimationPrice:ce}),Ut=qt(oe,u.t),Wo=St(y),{data:Xt}=Tt({networkID:t}),Ko=(0,ie.useMemo)(()=>Be.get(t).displayFeeTooltip&&Object.keys(Xt??{}).length>1,[Xt,t]);(0,ie.useEffect)(()=>{m.capture("sendAssetSummary",{data:{type:"fungible",symbol:E??"",networkId:t,chainId:_.getChainID(t)}})},[t,E,m]);let Qo=_e&&!x,qo=!!oe&&!tt&&ke!=="insufficient"&&!!ot,$o=gi({hasSufficientFunds:ke,isTransactionUnitError:me,hasGasEstimationFailed:Qo,nativeTokenSymbol:nt}),zo=(0,ie.useCallback)(()=>!B||!T||!F?!1:we?(m.capture("showFungibleTxSubmissionFailureModal"),p(we),!1):(S({...g,multichainTransaction:B}),!0),[B,T,F,we,S,g,m,p]),Yo=fi({networkID:t,recipient:D,uiRecipient:R,networkName:d,networkFee:ot,networkFeeErrorMsg:$o,networkFeeRow:Ut,transferFeePercent:Wo,solanaMetadata:N,displayFeeTooltip:Ko,valueLoader:o,fontColors:r,displayUiRecipient:n,openTransactionSettings:he,onNetworkFeeDescriptionPress:l,onTransferFeePress:c}),jo=(0,ie.useMemo)(()=>({title:u.t("sendConfirmationPrimaryText"),send:u.t("commandSend"),cancel:u.t("commandCancel")}),[]);return{sender:T,recipientAddress:C,uiRecipient:R,token:ee,networkName:d,canSend:qo,txSubmissionCheckFailureModal:we,summaryRows:Yo,i18nStrings:jo,multichainTransaction:B,prepareSubmission:zo}};s();a();var Ze=I(L());var bi=({networkID:e,isTxConfirmError:t,isTxSubmissionError:n,isTxConfirmed:o,isTxSubmitted:r})=>{let i=Be.get(e).sendSuccessCondition,l=(0,Ze.useMemo)(()=>{switch(i){case"SUBMISSION":return n?"ERROR":r?"SUCCESS":"LOADING";case"CONFIRMATION":return n||t?"ERROR":o?"SUCCESS":"LOADING"}},[t,o,n,r,i]),c=i==="CONFIRMATION"?"sendStatusConfirmedSuccessTitle":"sendStatusSubmittedSuccessTitle",p=(0,Ze.useMemo)(()=>{switch(l){case"LOADING":return u.t("sendStatusLoadingTitle");case"ERROR":return u.t("sendStatusErrorTitle");case"SUCCESS":return u.t(c)}},[l,c]),{isError:m,isSuccess:d}=(0,Ze.useMemo)(()=>({isError:l==="ERROR",isSuccess:l==="SUCCESS"}),[l]),{transactionSpeed:b="standard"}=K(S=>S.sendFormValues),g=(0,Ze.useMemo)(()=>{let S=gn.get(e).transactionSpeedDescription(b);return S?u.t(S):""},[e,b]);return{title:p,isError:m,isSuccess:d,sendSuccessCondition:i,estimatedTime:g}};s();a();var Si=I(L());s();a();export{ro as a,or as b,vt as c,K as d,to as e,hr as f,wr as g,Lt as h,Wt as i,Cr as j,Qt as k,Rr as l,Do as m,Vt as n,pr as o,Br as p,qt as q,Hr as r,Zr as s,qe as t,po as u,Ht as v,yi as w,bi as x,Fr as y};
//# sourceMappingURL=chunk-2MSBWT3V.js.map
