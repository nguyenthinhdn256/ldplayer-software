import{a as be}from"./chunk-FTAFJKR3.js";import{E as $,Qa as Ce,R as fe,Ra as ve,ja as Se}from"./chunk-GR6D4DPI.js";import{a as xe}from"./chunk-Z6IB25YE.js";import{a as B}from"./chunk-QEXGR5WT.js";import{h as ge}from"./chunk-I5YT3SXD.js";import{a as ye}from"./chunk-TISYHGD5.js";import{a as d,b as T,c as pe,d as me,e as h}from"./chunk-PCKXDRQ7.js";import{a as R,c as he}from"./chunk-OKP6DFCI.js";import{c as ue,o as U}from"./chunk-WIQ4WVKX.js";import{C as ce,D as de}from"./chunk-LTUJMY6D.js";import{d as le}from"./chunk-IS26EKBL.js";import{lc as _}from"./chunk-TYXPKGSM.js";import{Va as X,Wd as se,md as ae}from"./chunk-MHD4HNLY.js";import{m as ne}from"./chunk-56SJOU6P.js";import{N as oe,S as re,ha as ie,w as te}from"./chunk-6E74REJW.js";import{a as q}from"./chunk-7X4NV6OJ.js";import{f as j,h as y,n as x}from"./chunk-3KENBVE7.js";y();x();y();x();y();x();var M=class{constructor(t){this.onExploreTabClickedByUser=t=>{this.#e.capture("onExploreTabClickedByUser",{data:{explore:t}})};this.onExploreTabTitlesDragged=()=>{this.#e.capture("onExploreTabTitlesDragged")};this.onExploreFilterChangedByUser=t=>{this.#e.capture("onExploreFilterChangedByUser",{data:{explore:t}})};this.onExploreListShownToUser=t=>{this.#e.capture("onExploreListShownToUser",{data:{explore:t}})};this.onExploreCarouselShownToUser=t=>{this.#e.capture("onExploreCarouselShownToUser",{data:{explore:t}})};this.onExploreListItemClickedByUser=t=>{let{context:i,...r}=t;this.#e.capture("onExploreListItemClickedByUser",{data:{explore:{context:i||"explore",...r}}})};this.onExploreCarouselItemClickedByUser=t=>{this.#e.capture("onExploreCarouselItemClickedByUser",{data:{explore:t}})};this.onExploreLearnItemClickedByUser=t=>{this.#e.capture("onExploreLearnItemClickedByUser",{data:{explore:t}})};this.onExploreCarouselDragged=t=>{this.#e.capture("onExploreCarouselDragged",{data:{explore:t}})};this.searchedByUser=t=>{this.#e.capture("searchedByUser",{data:{search:t}})};this.searchItemClickedByUser=t=>{this.#e.capture("searchItemClickedByUser",{data:{search:t}})};this.onExploreSectionClickedByUser=t=>{this.#e.capture("onExploreSectionClickedByUser",{data:{explore:t}})};this.onExploreShortcutClickedByUser=t=>{this.#e.capture("onExploreShortcutClickedByUser",{data:{explore:t}})};this.#e=t}#e};var G=new M(le);y();x();var o=j(q());y();x();var a=j(q());y();x();var P=j(q());var Ie=e=>{if(typeof e=="number")return e;switch(e??"small"){case"normal":return 48;case"small":return 32;case"xsmall":return 24;case"xxsmall":return 16}},Oe=e=>{switch(e){case"square":return 6;case"circle":default:return 0}},Ee=U(xe)`
  border-radius: ${e=>e.borderradius}px;
  width: 100%;
  height: 100%;
`,We=U.div`
  width: ${e=>e.width}px;
  height: ${e=>e.height}px;
  align-items: center;
  justify-content: center;
  background-color: ${e=>re(e.color,e.alpha??.1)};
`,O=({src:e,fallback:t,alt:i,size:r="normal",shape:n="circle",style:l,onDragStart:c})=>{let s=t??P.default.createElement(ze,null,"?"),p=Ie(r),g=Ie(r),S=Oe(n);return n==="circle"?P.default.createElement(ye,{color:"#222222",diameter:p,style:l},P.default.createElement(Ee,{src:e,fallback:s,alt:i||void 0,width:p,height:g,borderradius:S,onDragStart:c,loader:P.default.createElement(B,{borderRadius:`${S}px`,width:`${p}px`,height:`${g}px`})})):P.default.createElement(We,{color:"#222222",width:p,height:g,style:l},P.default.createElement(Ee,{src:e,fallback:s,alt:i||"",width:p,height:g,borderradius:S,onDragStart:c,loader:P.default.createElement(B,{borderRadius:`${S}px`,width:`${p}px`,height:`${g}px`})}))},ze=U.div`
  font-size: 22px;
  line-height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
`;var je=({item:e,index:t,onClick:i})=>{let r=e.type==="token"?e.data.data.symbol:e.data.name,n=(0,a.useCallback)(s=>{s.preventDefault()},[]),l=e.type==="token"?a.default.createElement($,{image:{type:"fungible",src:e.data.data.logoUri,fallback:e.data.data.symbol??""},tokenType:e.data.type,chainMeta:e.data.data.chain,size:36}):e.type==="dapp"?a.default.createElement(O,{src:e.data.imageUrl,size:36,shape:"square",onDragStart:n}):null,c=(0,a.useCallback)(()=>{i(t,e)},[t,i,e]);return a.default.createElement("div",{className:W.buttonContainer},a.default.createElement("div",{className:W.button,onClick:c},l,a.default.createElement(h,{className:W.text,color:"white",children:r??""})))},ke=({items:e,onClick:t})=>{let i=he(0),r=(0,a.useRef)(null),[n,l]=(0,a.useState)(0),c=(0,a.useMemo)(()=>{let s=self.innerWidth-n;return Math.min(0,s)},[n]);return(0,a.useEffect)(()=>{r.current&&l(r.current.scrollWidth)},[e]),a.default.createElement(me,{overflow:"hidden"},a.default.createElement(R.div,{ref:r},a.default.createElement(R.div,{className:W.scrollView,style:{x:i},drag:"x",dragConstraints:{left:c,right:0}},e.map((s,p)=>a.default.createElement(je,{key:p,item:s,index:p,onClick:t})))))},W={scrollView:d({paddingTop:8,display:"flex",flexDirection:"row",paddingLeft:8}),buttonContainer:d({paddingRight:10}),button:d({display:"flex",flexDirection:"row",alignItems:"center",backgroundColor:{base:"bgRow",hover:"bgButton"},cursor:"pointer",borderRadius:12,paddingX:6,paddingY:6,height:48}),text:d({font:"body",color:"white",paddingLeft:6,whiteSpace:"nowrap"})};var qe=U.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: solid 1px;
  width: 100%;
  padding: 10px 0;
  padding-right: 16px;
  flex: 1;
  overflow: hidden;
  border-color: ${e=>e.isLast?T.colors.legacy.bgWallet:T.colors.legacy.borderSecondary};
`,v={searchResultsContainer:d({marginTop:16,width:"100%"}),searchResultsHeaderContainer:d({paddingX:16,paddingY:4,display:"flex",alignItems:"center",justifyContent:"space-between"}),searchResult:d({display:"flex",alignItems:"center",paddingLeft:16,gap:16,height:56,maxHeight:56,cursor:"pointer",width:"100%",maxWidth:"100%"}),searchResultTextContainer:d({display:"flex",flexDirection:"column",minWidth:0,flex:1,marginRight:8}),hover:d({cursor:"pointer"}),picturePlaceholder:d({borderRadius:6,height:32,width:32}),noResultsContainer:d({position:"absolute",top:64,right:0,bottom:0,left:0,display:"flex",justifyContent:"center",alignItems:"center",paddingBottom:56}),tokenSecondaryContainer:d({display:"flex",gap:4,alignItems:"center"}),dotContainer:d({display:"flex",justifyContent:"center",alignItems:"center",width:8}),dot:d({backgroundColor:"textSecondary",width:4,height:4,borderRadius:"circle"}),secondaryAction:d({display:"flex",justifyContent:"center",alignItems:"center",width:32,height:32,borderRadius:10,padding:6})},Te=(e,t,{priceMap:i,isPriceMapLoading:r,isReadOnlyAccount:n,entryPoint:l,navigateToSwapper:c,handleHideModalVisibility:s,addRecentlySearchedItem:p,dappsItems:g,navigate:S,setNotifyHomeFungiblePush:m,pushDetailView:w})=>{let D=X(_(e)),f=i[D],I=f?.price,L=I!==void 0,C=f?.usd_24h_change,E=C!==void 0,H=L||E;return{type:"generic",key:D,"data-testid":`search-result-token-${e.data.symbol}`,image:o.default.createElement($,{image:{type:"fungible",src:e.data.logoUri,fallback:e.data.symbol??""},tokenType:e.type,chainMeta:e.data.chain,size:32}),textMain:o.default.createElement(h,{children:te(e.data.name||"",25),font:"body"}),textSecondary:o.default.createElement("div",{className:v.tokenSecondaryContainer},o.default.createElement(h,{children:e.data.symbol||"",font:"caption",color:"textSecondary"}),r?o.default.createElement(o.default.Fragment,null,o.default.createElement(B,{width:"36px",height:"14px",borderRadius:"8px"}),o.default.createElement(B,{width:"48px",height:"14px",borderRadius:"8px"})):o.default.createElement(o.default.Fragment,null,H?o.default.createElement("div",{className:v.dotContainer},o.default.createElement("div",{className:v.dot})):null,L?o.default.createElement(fe,{value:I,font:"caption",color:"textSecondary"}):null,E?o.default.createElement(h,{children:`${ie(C,{includePlusPrefix:!0})}%`,font:"caption",color:C>=0?"accentSuccess":"accentAlert",truncate:"ellipsis"}):null)),secondaryAction:n?void 0:{icon:o.default.createElement(pe.Swap,null),onClick:N=>{N.stopPropagation(),c({buyFungibleCaip19:D}),l==="home"&&setTimeout(()=>{s("searchPage")},50)}},onClick:async()=>{Pe({addRecentlySearchedItem:p,token:e,position:g.length+t+1,entryPoint:l,navigate:S,setNotifyHomeFungiblePush:m,handleHideModalVisibility:s,pushDetailView:w})}}},Zt=({searchedDapps:e,tokens:t,trendingTokens:i,priceMap:r,isPriceMapLoading:n,showMoreDapps:l,setShowMoreDapps:c,renderShowMoreDappsButton:s,showMoreTokens:p,setShowMoreTokens:g,renderShowMoreTokensButton:S,entryPoint:m,recentlyViewedSearchItems:w=[],searchQuery:D})=>{let{t:f}=ne(),{pushDetailView:I}=ge(),L=Se(),{handleHideModalVisibility:C}=ve(),E=be(u=>u.setNotifyHomeFungiblePush),H=m==="home",N=ue(),J=ae(),{mutate:k}=ce(J),{mutate:Q}=de(J),{data:Le}=se(),V=!!Le?.isReadOnly,A=(0,o.useMemo)(()=>e.map((u,b)=>({type:"generic",key:u.id,"data-testid":`search-result-dapp-${u.name}`,image:o.default.createElement(O,{src:u.imageUrl,size:"small",shape:"square"}),textMain:o.default.createElement(h,{children:u.name,font:"body"}),textSecondary:o.default.createElement(h,{children:u.category||"",font:"caption",color:"textSecondary"}),onClick:async()=>{Ne({addRecentlySearchedItem:k,dapp:u,position:b+1,entryPoint:m})}})),[e,k,m]),K=(0,o.useMemo)(()=>t.map((u,b)=>Te(u,b,{priceMap:r,isPriceMapLoading:n,isReadOnlyAccount:V,entryPoint:m,navigateToSwapper:L,handleHideModalVisibility:C,addRecentlySearchedItem:k,dappsItems:A,navigate:N,setNotifyHomeFungiblePush:E,pushDetailView:I})),[t,r,n,V,m,L,C,k,A,N,E,I]),Y=(0,o.useMemo)(()=>i.map((u,b)=>Te(u,b,{priceMap:r,isPriceMapLoading:n,isReadOnlyAccount:V,entryPoint:m,navigateToSwapper:L,handleHideModalVisibility:C,addRecentlySearchedItem:k,dappsItems:A,navigate:N,setNotifyHomeFungiblePush:E,pushDetailView:I})),[i,r,n,V,m,L,C,k,A,N,E,I]),De=(0,o.useMemo)(()=>({type:"recentSearchItems",key:"recentSearchItems",items:w,onClick:async(u,b)=>{if(b.type==="token")Pe({addRecentlySearchedItem:k,token:b.data,position:u,entryPoint:m,navigate:N,setNotifyHomeFungiblePush:E,handleHideModalVisibility:C,pushDetailView:I});else if(b.type==="dapp")Ne({addRecentlySearchedItem:k,dapp:b.data,position:u,entryPoint:m});else throw new Error("Unknown item type")}}),[k,C,m,N,I,w,E]),Ae=w.length?f("commandClear"):void 0,Ue=(0,o.useCallback)(()=>{Q()},[Q]),Be=S?f(l?"exploreShowLess":"exploreShowMore"):void 0,Re=(0,o.useCallback)(()=>{g(!p)},[g,p]),Me=s?f(l?"exploreShowLess":"exploreShowMore"):void 0,Fe=(0,o.useCallback)(()=>{c(!l)},[c,l]);if(!e.length&&!t.length)return o.default.createElement("div",{className:v.noResultsContainer,"data-testid":"explore-search-results-nodata"},o.default.createElement(h,{children:f("dappBrowserSearchNoAppsTokens"),font:"bodyMedium",color:"textSecondary"}));let Z=D==null||D.length===0,He=w.length&&Z?o.default.createElement(z,{testId:"explore-search-results",title:o.default.createElement(h,{children:f("dAppBrowserRecents"),font:"title1Semibold"}),items:[De],accessoryText:Ae,accessoryOnPress:Ue}):null,ee=A.length?o.default.createElement(z,{testId:"explore-search-results",title:o.default.createElement(h,{children:f("exploreSites"),font:"title1Semibold"}),items:A,accessoryText:Me,accessoryOnPress:Fe}):null,Ve=K.length?o.default.createElement(z,{testId:"explore-search-results",title:o.default.createElement(h,{children:f("exploreTokens"),font:"title1Semibold"}),items:K,accessoryText:Be,accessoryOnPress:Re}):null,$e=Z&&Y.length?o.default.createElement(z,{testId:"explore-search-results",title:o.default.createElement(h,{children:f("exploreTrendingTokens"),font:"title1Semibold"}),items:Y}):null;return o.default.createElement(o.default.Fragment,null,He,H?void 0:ee,$e,Ve,H?ee:void 0)},we=({hoverColor:e,baseColor:t,...i})=>o.default.createElement(R.div,{...i,whileHover:{background:e},style:{background:t},transition:{ease:[.5,1,.89,1],duration:.1}}),z=({items:e,title:t,testId:i,accessoryText:r,accessoryOnPress:n})=>o.default.createElement("div",{className:v.searchResultsContainer,"data-testid":i},o.default.createElement("div",{className:v.searchResultsHeaderContainer},t,r?o.default.createElement(h,{className:v.hover,children:r,font:"caption",color:"textSecondary",onPress:n}):null),e.map((l,c)=>o.default.createElement(Xe,{...l,isLast:c===e.length-1}))),Xe=e=>{let[t,i]=(0,o.useState)(!1),[r,n]=(0,o.useState)(!1);if(e.type==="recentSearchItems")return o.default.createElement(ke,{items:e.items,onClick:e.onClick});let{onClick:c,image:s,isLast:p,textMain:g,textSecondary:S,secondaryAction:m,"data-testid":w}=e;return o.default.createElement(we,{className:v.searchResult,onClick:c,"data-testid":w,baseColor:T.colors.legacy.bgWallet,hoverColor:r?T.colors.legacy.bgWallet:T.colors.legacy.bgButton,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1)},o.default.createElement("div",null,s),o.default.createElement(qe,{isLast:p},o.default.createElement("div",{className:v.searchResultTextContainer},g,S),m?o.default.createElement(we,{className:v.secondaryAction,onClick:m.onClick,baseColor:t?T.colors.legacy.borderPrimary:T.colors.legacy.bgButton,hoverColor:T.colors.legacy.borderPrimary,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1)},m.icon):null))};function Ne({addRecentlySearchedItem:e,dapp:t,position:i,entryPoint:r}){e({type:"dapp",data:t}),self.open(oe(t.domain).origin),G.searchItemClickedByUser({itemDetails:{position:i,title:t.name,id:t.id,type:"site",uiContext:r}})}function Pe({addRecentlySearchedItem:e,token:t,position:i,entryPoint:r,navigate:n,setNotifyHomeFungiblePush:l,pushDetailView:c}){let s=X(_(t));G.searchItemClickedByUser({itemDetails:{position:i,title:t.data.name||t.data.symbol||s,id:s,type:"token",uiContext:r}}),r==="home"?(n("/"),setTimeout(()=>{l({caip19:s,title:t.data.name??void 0,entryPoint:"homeSearch"})},25),setTimeout(()=>{e({type:"token",data:t})},75)):(c(o.default.createElement(Ce,{caip19:s,title:t.data.name??void 0,entryPoint:"exploreSearch"})),e({type:"token",data:t}))}export{G as a,Zt as b};
//# sourceMappingURL=chunk-KCGLH3HT.js.map
