import{K as sB,a as Z_,b as Q_,c as Ti,d as fn,e as sh,f as ah,g as bu,h as TY,i as cy,j as ch,k as ba,m as X_,n as eB,o as tB,r as xu,s as rB}from"./chunk-G3SOTMUM.js";import{a as vu,m as Us}from"./chunk-56SJOU6P.js";import{Z as wu,a as uy,c as IE,l as be,n as kE,o as bB,r as xB,x as Ns}from"./chunk-6E74REJW.js";import{$ as jb,Aa as lB,Ea as dB,Fa as hB,G as oB,Ga as gl,Ha as pB,Ia as fy,Ja as yB,Ka as ly,La as bl,Ma as mB,Pa as fo,S as aB,T as cB,U as uB,V as fB,W as zb,X as EE,Y as PY,Z as _Y,Za as gB,_ as BY,_a as Gb,a as W_,aa as Ec,b as z_,c as kY,d as j_,e as G_,h as $_,ha as ve,j as Hb,ja as Bt,ka as Ae,l as Y_,n as J_,o as Wb,q as Os,sa as se,t as nB,u as iB,v as yl,ya as uh,za as ml}from"./chunk-66TF6S77.js";import{a as O}from"./chunk-4P36KWOF.js";import{a as Br}from"./chunk-7X4NV6OJ.js";import{c as L,d as SE,e as Sc,f as X,h as p,i as T,j as H_,k as IY,l as Qr,m as Buffer,n as y}from"./chunk-3KENBVE7.js";var hy=L(hh=>{"use strict";p();y();var TE=H_(),lh=IY(),wB=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;hh.Buffer=ie;hh.SlowBuffer=UY;hh.INSPECT_MAX_BYTES=50;var $b=2147483647;hh.kMaxLength=$b;ie.TYPED_ARRAY_SUPPORT=CY();!ie.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function CY(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(ie.prototype,"parent",{enumerable:!0,get:function(){if(ie.isBuffer(this))return this.buffer}});Object.defineProperty(ie.prototype,"offset",{enumerable:!0,get:function(){if(ie.isBuffer(this))return this.byteOffset}});function Ic(e){if(e>$b)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,ie.prototype),t}function ie(e,t,r){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return CE(e)}return EB(e,t,r)}ie.poolSize=8192;function EB(e,t,r){if(typeof e=="string")return RY(e,t);if(ArrayBuffer.isView(e))return OY(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(xa(e,ArrayBuffer)||e&&xa(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(xa(e,SharedArrayBuffer)||e&&xa(e.buffer,SharedArrayBuffer)))return _E(e,t,r);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(n!=null&&n!==e)return ie.from(n,t,r);let i=NY(e);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return ie.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}ie.from=function(e,t,r){return EB(e,t,r)};Object.setPrototypeOf(ie.prototype,Uint8Array.prototype);Object.setPrototypeOf(ie,Uint8Array);function IB(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function MY(e,t,r){return IB(e),e<=0?Ic(e):t!==void 0?typeof r=="string"?Ic(e).fill(t,r):Ic(e).fill(t):Ic(e)}ie.alloc=function(e,t,r){return MY(e,t,r)};function CE(e){return IB(e),Ic(e<0?0:ME(e)|0)}ie.allocUnsafe=function(e){return CE(e)};ie.allocUnsafeSlow=function(e){return CE(e)};function RY(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!ie.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let r=kB(e,t)|0,n=Ic(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}function PE(e){let t=e.length<0?0:ME(e.length)|0,r=Ic(t);for(let n=0;n<t;n+=1)r[n]=e[n]&255;return r}function OY(e){if(xa(e,Uint8Array)){let t=new Uint8Array(e);return _E(t.buffer,t.byteOffset,t.byteLength)}return PE(e)}function _E(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return t===void 0&&r===void 0?n=new Uint8Array(e):r===void 0?n=new Uint8Array(e,t):n=new Uint8Array(e,t,r),Object.setPrototypeOf(n,ie.prototype),n}function NY(e){if(ie.isBuffer(e)){let t=ME(e.length)|0,r=Ic(t);return r.length===0||e.copy(r,0,0,t),r}if(e.length!==void 0)return typeof e.length!="number"||OE(e.length)?Ic(0):PE(e);if(e.type==="Buffer"&&Array.isArray(e.data))return PE(e.data)}function ME(e){if(e>=$b)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+$b.toString(16)+" bytes");return e|0}function UY(e){return+e!=e&&(e=0),ie.alloc(+e)}ie.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==ie.prototype};ie.compare=function(t,r){if(xa(t,Uint8Array)&&(t=ie.from(t,t.offset,t.byteLength)),xa(r,Uint8Array)&&(r=ie.from(r,r.offset,r.byteLength)),!ie.isBuffer(t)||!ie.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===r)return 0;let n=t.length,i=r.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(t[o]!==r[o]){n=t[o],i=r[o];break}return n<i?-1:i<n?1:0};ie.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};ie.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return ie.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<t.length;++n)r+=t[n].length;let i=ie.allocUnsafe(r),o=0;for(n=0;n<t.length;++n){let s=t[n];if(xa(s,Uint8Array))o+s.length>i.length?(ie.isBuffer(s)||(s=ie.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(ie.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function kB(e,t){if(ie.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||xa(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return BE(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return NB(e).length;default:if(i)return n?-1:BE(e).length;t=(""+t).toLowerCase(),i=!0}}ie.byteLength=kB;function DY(e,t,r){let n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return GY(this,t,r);case"utf8":case"utf-8":return PB(this,t,r);case"ascii":return zY(this,t,r);case"latin1":case"binary":return jY(this,t,r);case"base64":return HY(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $Y(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}ie.prototype._isBuffer=!0;function xl(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}ie.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<t;r+=2)xl(this,r,r+1);return this};ie.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<t;r+=4)xl(this,r,r+3),xl(this,r+1,r+2);return this};ie.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<t;r+=8)xl(this,r,r+7),xl(this,r+1,r+6),xl(this,r+2,r+5),xl(this,r+3,r+4);return this};ie.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?PB(this,0,t):DY.apply(this,arguments)};ie.prototype.toLocaleString=ie.prototype.toString;ie.prototype.equals=function(t){if(!ie.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:ie.compare(this,t)===0};ie.prototype.inspect=function(){let t="",r=hh.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"};wB&&(ie.prototype[wB]=ie.prototype.inspect);ie.prototype.compare=function(t,r,n,i,o){if(xa(t,Uint8Array)&&(t=ie.from(t,t.offset,t.byteLength)),!ie.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(r===void 0&&(r=0),n===void 0&&(n=t?t.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),r<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===t)return 0;let s=o-i,a=n-r,c=Math.min(s,a),u=this.slice(i,o),h=t.slice(r,n);for(let l=0;l<c;++l)if(u[l]!==h[l]){s=u[l],a=h[l];break}return s<a?-1:a<s?1:0};function TB(e,t,r,n,i){if(e.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,OE(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof t=="string"&&(t=ie.from(t,n)),ie.isBuffer(t))return t.length===0?-1:vB(e,t,r,n,i);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):vB(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function vB(e,t,r,n,i){let o=1,s=e.length,a=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;o=2,s/=2,a/=2,r/=2}function c(h,l){return o===1?h[l]:h.readUInt16BE(l*o)}let u;if(i){let h=-1;for(u=r;u<s;u++)if(c(e,u)===c(t,h===-1?0:u-h)){if(h===-1&&(h=u),u-h+1===a)return h*o}else h!==-1&&(u-=u-h),h=-1}else for(r+a>s&&(r=s-a),u=r;u>=0;u--){let h=!0;for(let l=0;l<a;l++)if(c(e,u+l)!==c(t,l)){h=!1;break}if(h)return u}return-1}ie.prototype.includes=function(t,r,n){return this.indexOf(t,r,n)!==-1};ie.prototype.indexOf=function(t,r,n){return TB(this,t,r,n,!0)};ie.prototype.lastIndexOf=function(t,r,n){return TB(this,t,r,n,!1)};function LY(e,t,r,n){r=Number(r)||0;let i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let o=t.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let a=parseInt(t.substr(s*2,2),16);if(OE(a))return s;e[r+s]=a}return s}function KY(e,t,r,n){return Yb(BE(t,e.length-r),e,r,n)}function FY(e,t,r,n){return Yb(QY(t),e,r,n)}function VY(e,t,r,n){return Yb(NB(t),e,r,n)}function qY(e,t,r,n){return Yb(XY(t,e.length-r),e,r,n)}ie.prototype.write=function(t,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-r;if((n===void 0||n>o)&&(n=o),t.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return LY(this,t,r,n);case"utf8":case"utf-8":return KY(this,t,r,n);case"ascii":case"latin1":case"binary":return FY(this,t,r,n);case"base64":return VY(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qY(this,t,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};ie.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function HY(e,t,r){return t===0&&r===e.length?TE.fromByteArray(e):TE.fromByteArray(e.slice(t,r))}function PB(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){let c,u,h,l;switch(a){case 1:o<128&&(s=o);break;case 2:c=e[i+1],(c&192)===128&&(l=(o&31)<<6|c&63,l>127&&(s=l));break;case 3:c=e[i+1],u=e[i+2],(c&192)===128&&(u&192)===128&&(l=(o&15)<<12|(c&63)<<6|u&63,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:c=e[i+1],u=e[i+2],h=e[i+3],(c&192)===128&&(u&192)===128&&(h&192)===128&&(l=(o&15)<<18|(c&63)<<12|(u&63)<<6|h&63,l>65535&&l<1114112&&(s=l))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=a}return WY(n)}var AB=4096;function WY(e){let t=e.length;if(t<=AB)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=AB));return r}function zY(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]&127);return n}function jY(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function GY(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=t;o<r;++o)i+=eJ[e[o]];return i}function $Y(e,t,r){let n=e.slice(t,r),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}ie.prototype.slice=function(t,r){let n=this.length;t=~~t,r=r===void 0?n:~~r,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<t&&(r=t);let i=this.subarray(t,r);return Object.setPrototypeOf(i,ie.prototype),i};function Tn(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}ie.prototype.readUintLE=ie.prototype.readUIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||Tn(t,r,this.length);let i=this[t],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[t+s]*o;return i};ie.prototype.readUintBE=ie.prototype.readUIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||Tn(t,r,this.length);let i=this[t+--r],o=1;for(;r>0&&(o*=256);)i+=this[t+--r]*o;return i};ie.prototype.readUint8=ie.prototype.readUInt8=function(t,r){return t=t>>>0,r||Tn(t,1,this.length),this[t]};ie.prototype.readUint16LE=ie.prototype.readUInt16LE=function(t,r){return t=t>>>0,r||Tn(t,2,this.length),this[t]|this[t+1]<<8};ie.prototype.readUint16BE=ie.prototype.readUInt16BE=function(t,r){return t=t>>>0,r||Tn(t,2,this.length),this[t]<<8|this[t+1]};ie.prototype.readUint32LE=ie.prototype.readUInt32LE=function(t,r){return t=t>>>0,r||Tn(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};ie.prototype.readUint32BE=ie.prototype.readUInt32BE=function(t,r){return t=t>>>0,r||Tn(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};ie.prototype.readBigUInt64LE=Au(function(t){t=t>>>0,dh(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&dy(t,this.length-8);let i=r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,o=this[++t]+this[++t]*2**8+this[++t]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});ie.prototype.readBigUInt64BE=Au(function(t){t=t>>>0,dh(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&dy(t,this.length-8);let i=r*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],o=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});ie.prototype.readIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||Tn(t,r,this.length);let i=this[t],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[t+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*r)),i};ie.prototype.readIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||Tn(t,r,this.length);let i=r,o=1,s=this[t+--i];for(;i>0&&(o*=256);)s+=this[t+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*r)),s};ie.prototype.readInt8=function(t,r){return t=t>>>0,r||Tn(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};ie.prototype.readInt16LE=function(t,r){t=t>>>0,r||Tn(t,2,this.length);let n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};ie.prototype.readInt16BE=function(t,r){t=t>>>0,r||Tn(t,2,this.length);let n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};ie.prototype.readInt32LE=function(t,r){return t=t>>>0,r||Tn(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};ie.prototype.readInt32BE=function(t,r){return t=t>>>0,r||Tn(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};ie.prototype.readBigInt64LE=Au(function(t){t=t>>>0,dh(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&dy(t,this.length-8);let i=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});ie.prototype.readBigInt64BE=Au(function(t){t=t>>>0,dh(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&dy(t,this.length-8);let i=(r<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(i)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n)});ie.prototype.readFloatLE=function(t,r){return t=t>>>0,r||Tn(t,4,this.length),lh.read(this,t,!0,23,4)};ie.prototype.readFloatBE=function(t,r){return t=t>>>0,r||Tn(t,4,this.length),lh.read(this,t,!1,23,4)};ie.prototype.readDoubleLE=function(t,r){return t=t>>>0,r||Tn(t,8,this.length),lh.read(this,t,!0,52,8)};ie.prototype.readDoubleBE=function(t,r){return t=t>>>0,r||Tn(t,8,this.length),lh.read(this,t,!1,52,8)};function Gi(e,t,r,n,i,o){if(!ie.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}ie.prototype.writeUintLE=ie.prototype.writeUIntLE=function(t,r,n,i){if(t=+t,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Gi(this,t,r,n,a,0)}let o=1,s=0;for(this[r]=t&255;++s<n&&(o*=256);)this[r+s]=t/o&255;return r+n};ie.prototype.writeUintBE=ie.prototype.writeUIntBE=function(t,r,n,i){if(t=+t,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Gi(this,t,r,n,a,0)}let o=n-1,s=1;for(this[r+o]=t&255;--o>=0&&(s*=256);)this[r+o]=t/s&255;return r+n};ie.prototype.writeUint8=ie.prototype.writeUInt8=function(t,r,n){return t=+t,r=r>>>0,n||Gi(this,t,r,1,255,0),this[r]=t&255,r+1};ie.prototype.writeUint16LE=ie.prototype.writeUInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||Gi(this,t,r,2,65535,0),this[r]=t&255,this[r+1]=t>>>8,r+2};ie.prototype.writeUint16BE=ie.prototype.writeUInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||Gi(this,t,r,2,65535,0),this[r]=t>>>8,this[r+1]=t&255,r+2};ie.prototype.writeUint32LE=ie.prototype.writeUInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||Gi(this,t,r,4,4294967295,0),this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255,r+4};ie.prototype.writeUint32BE=ie.prototype.writeUInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||Gi(this,t,r,4,4294967295,0),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};function _B(e,t,r,n,i){OB(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o=o>>8,e[r++]=o,o=o>>8,e[r++]=o,o=o>>8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s=s>>8,e[r++]=s,s=s>>8,e[r++]=s,s=s>>8,e[r++]=s,r}function BB(e,t,r,n,i){OB(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o=o>>8,e[r+6]=o,o=o>>8,e[r+5]=o,o=o>>8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s=s>>8,e[r+2]=s,s=s>>8,e[r+1]=s,s=s>>8,e[r]=s,r+8}ie.prototype.writeBigUInt64LE=Au(function(t,r=0){return _B(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});ie.prototype.writeBigUInt64BE=Au(function(t,r=0){return BB(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});ie.prototype.writeIntLE=function(t,r,n,i){if(t=+t,r=r>>>0,!i){let c=Math.pow(2,8*n-1);Gi(this,t,r,n,c-1,-c)}let o=0,s=1,a=0;for(this[r]=t&255;++o<n&&(s*=256);)t<0&&a===0&&this[r+o-1]!==0&&(a=1),this[r+o]=(t/s>>0)-a&255;return r+n};ie.prototype.writeIntBE=function(t,r,n,i){if(t=+t,r=r>>>0,!i){let c=Math.pow(2,8*n-1);Gi(this,t,r,n,c-1,-c)}let o=n-1,s=1,a=0;for(this[r+o]=t&255;--o>=0&&(s*=256);)t<0&&a===0&&this[r+o+1]!==0&&(a=1),this[r+o]=(t/s>>0)-a&255;return r+n};ie.prototype.writeInt8=function(t,r,n){return t=+t,r=r>>>0,n||Gi(this,t,r,1,127,-128),t<0&&(t=255+t+1),this[r]=t&255,r+1};ie.prototype.writeInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||Gi(this,t,r,2,32767,-32768),this[r]=t&255,this[r+1]=t>>>8,r+2};ie.prototype.writeInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||Gi(this,t,r,2,32767,-32768),this[r]=t>>>8,this[r+1]=t&255,r+2};ie.prototype.writeInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||Gi(this,t,r,4,2147483647,-2147483648),this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24,r+4};ie.prototype.writeInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||Gi(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};ie.prototype.writeBigInt64LE=Au(function(t,r=0){return _B(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});ie.prototype.writeBigInt64BE=Au(function(t,r=0){return BB(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function CB(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function MB(e,t,r,n,i){return t=+t,r=r>>>0,i||CB(e,t,r,4,34028234663852886e22,-34028234663852886e22),lh.write(e,t,r,n,23,4),r+4}ie.prototype.writeFloatLE=function(t,r,n){return MB(this,t,r,!0,n)};ie.prototype.writeFloatBE=function(t,r,n){return MB(this,t,r,!1,n)};function RB(e,t,r,n,i){return t=+t,r=r>>>0,i||CB(e,t,r,8,17976931348623157e292,-17976931348623157e292),lh.write(e,t,r,n,52,8),r+8}ie.prototype.writeDoubleLE=function(t,r,n){return RB(this,t,r,!0,n)};ie.prototype.writeDoubleBE=function(t,r,n){return RB(this,t,r,!1,n)};ie.prototype.copy=function(t,r,n,i){if(!ie.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=t.length&&(r=t.length),r||(r=0),i>0&&i<n&&(i=n),i===n||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-r<i-n&&(i=t.length-r+n);let o=i-n;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(t,this.subarray(n,i),r),o};ie.prototype.fill=function(t,r,n,i){if(typeof t=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!ie.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(t.length===1){let s=t.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(t=s)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);let o;if(typeof t=="number")for(o=r;o<n;++o)this[o]=t;else{let s=ie.isBuffer(t)?t:ie.from(t,i),a=s.length;if(a===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-r;++o)this[o+r]=s[o%a]}return this};var fh={};function RE(e,t,r){fh[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}RE("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);RE("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);RE("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=SB(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=SB(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n},RangeError);function SB(e){let t="",r=e.length,n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function YY(e,t,r){dh(t,"offset"),(e[t]===void 0||e[t+r]===void 0)&&dy(t,e.length-(r+1))}function OB(e,t,r,n,i,o){if(e>r||e<t){let s=typeof t=="bigint"?"n":"",a;throw o>3?t===0||t===BigInt(0)?a=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:a=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:a=`>= ${t}${s} and <= ${r}${s}`,new fh.ERR_OUT_OF_RANGE("value",a,e)}YY(n,i,o)}function dh(e,t){if(typeof e!="number")throw new fh.ERR_INVALID_ARG_TYPE(t,"number",e)}function dy(e,t,r){throw Math.floor(e)!==e?(dh(e,r),new fh.ERR_OUT_OF_RANGE(r||"offset","an integer",e)):t<0?new fh.ERR_BUFFER_OUT_OF_BOUNDS:new fh.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}var JY=/[^+/0-9A-Za-z-_]/g;function ZY(e){if(e=e.split("=")[0],e=e.trim().replace(JY,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function BE(e,t){t=t||1/0;let r,n=e.length,i=null,o=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function QY(e){let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function XY(e,t){let r,n,i,o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function NB(e){return TE.toByteArray(ZY(e))}function Yb(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function xa(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function OE(e){return e!==e}var eJ=function(){let e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function Au(e){return typeof BigInt>"u"?tJ:e}function tJ(){throw new Error("BigInt not supported")}});var Zb=L(Pi=>{"use strict";p();y();Object.defineProperty(Pi,"__esModule",{value:!0});Pi.output=Pi.exists=Pi.hash=Pi.bytes=Pi.bool=Pi.number=void 0;function Jb(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}Pi.number=Jb;function UB(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}Pi.bool=UB;function NE(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}Pi.bytes=NE;function DB(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Jb(e.outputLen),Jb(e.blockLen)}Pi.hash=DB;function LB(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}Pi.exists=LB;function KB(e,t){NE(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Pi.output=KB;var rJ={number:Jb,bool:UB,bytes:NE,hash:DB,exists:LB,output:KB};Pi.default=rJ});var FB=L(Qb=>{"use strict";p();y();Object.defineProperty(Qb,"__esModule",{value:!0});Qb.crypto=void 0;Qb.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0}});var Su=L(yt=>{"use strict";p();y();Object.defineProperty(yt,"__esModule",{value:!0});yt.randomBytes=yt.wrapConstructorWithOpts=yt.wrapConstructor=yt.checkOpts=yt.Hash=yt.concatBytes=yt.toBytes=yt.utf8ToBytes=yt.asyncLoop=yt.nextTick=yt.hexToBytes=yt.bytesToHex=yt.isLE=yt.rotr=yt.createView=yt.u32=yt.u8=void 0;var Xb=FB(),nJ=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);yt.u8=nJ;var iJ=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));yt.u32=iJ;var oJ=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);yt.createView=oJ;var sJ=(e,t)=>e<<32-t|e>>>t;yt.rotr=sJ;yt.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!yt.isLE)throw new Error("Non little-endian hardware is not supported");var aJ=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function cJ(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=aJ[e[r]];return t}yt.bytesToHex=cJ;function uJ(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}yt.hexToBytes=uJ;var fJ=async()=>{};yt.nextTick=fJ;async function lJ(e,t,r){let n=Date.now();for(let i=0;i<e;i++){r(i);let o=Date.now()-n;o>=0&&o<t||(await(0,yt.nextTick)(),n+=o)}}yt.asyncLoop=lJ;function VB(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}yt.utf8ToBytes=VB;function DE(e){if(typeof e=="string"&&(e=VB(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}yt.toBytes=DE;function dJ(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}yt.concatBytes=dJ;var UE=class{clone(){return this._cloneInto()}};yt.Hash=UE;var hJ=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function pJ(e,t){if(t!==void 0&&(typeof t!="object"||!hJ(t)))throw new TypeError("Options should be object or undefined");return Object.assign(e,t)}yt.checkOpts=pJ;function yJ(e){let t=n=>e().update(DE(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}yt.wrapConstructor=yJ;function mJ(e){let t=(n,i)=>e(i).update(DE(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}yt.wrapConstructorWithOpts=mJ;function gJ(e=32){if(Xb.crypto.web)return Xb.crypto.web.getRandomValues(new Uint8Array(e));if(Xb.crypto.node)return new Uint8Array(Xb.crypto.node.randomBytes(e).buffer);throw new Error("The environment doesn't have randomBytes function")}yt.randomBytes=gJ});var yy=L(ex=>{"use strict";p();y();Object.defineProperty(ex,"__esModule",{value:!0});ex.SHA2=void 0;var LE=Zb(),py=Su();function bJ(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var KE=class extends py.Hash{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,py.createView)(this.buffer)}update(t){LE.default.exists(this);let{view:r,buffer:n,blockLen:i}=this;t=(0,py.toBytes)(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=(0,py.createView)(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){LE.default.exists(this),LE.default.output(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let l=s;l<i;l++)r[l]=0;bJ(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=(0,py.createView)(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,h[l],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};ex.SHA2=KE});var qE=L(Lo=>{"use strict";p();y();Object.defineProperty(Lo,"__esModule",{value:!0});Lo.add=Lo.toBig=Lo.split=Lo.fromBig=void 0;var tx=BigInt(2**32-1),FE=BigInt(32);function VE(e,t=!1){return t?{h:Number(e&tx),l:Number(e>>FE&tx)}:{h:Number(e>>FE&tx)|0,l:Number(e&tx)|0}}Lo.fromBig=VE;function qB(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l:s}=VE(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}Lo.split=qB;var xJ=(e,t)=>BigInt(e>>>0)<<FE|BigInt(t>>>0);Lo.toBig=xJ;var wJ=(e,t,r)=>e>>>r,vJ=(e,t,r)=>e<<32-r|t>>>r,AJ=(e,t,r)=>e>>>r|t<<32-r,SJ=(e,t,r)=>e<<32-r|t>>>r,EJ=(e,t,r)=>e<<64-r|t>>>r-32,IJ=(e,t,r)=>e>>>r-32|t<<64-r,kJ=(e,t)=>t,TJ=(e,t)=>e,PJ=(e,t,r)=>e<<r|t>>>32-r,_J=(e,t,r)=>t<<r|e>>>32-r,BJ=(e,t,r)=>t<<r-32|e>>>64-r,CJ=(e,t,r)=>e<<r-32|t>>>64-r;function HB(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}Lo.add=HB;var MJ=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),RJ=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,OJ=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),NJ=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,UJ=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),DJ=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0,LJ={fromBig:VE,split:qB,toBig:Lo.toBig,shrSH:wJ,shrSL:vJ,rotrSH:AJ,rotrSL:SJ,rotrBH:EJ,rotrBL:IJ,rotr32H:kJ,rotr32L:TJ,rotlSH:PJ,rotlSL:_J,rotlBH:BJ,rotlBL:CJ,add:HB,add3L:MJ,add3H:RJ,add4L:OJ,add4H:NJ,add5H:DJ,add5L:UJ};Lo.default=LJ});var WB=L(Ko=>{"use strict";p();y();Object.defineProperty(Ko,"__esModule",{value:!0});Ko.sha384=Ko.sha512_256=Ko.sha512_224=Ko.sha512=Ko.SHA512=void 0;var KJ=yy(),lt=qE(),rx=Su(),[FJ,VJ]=lt.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Eu=new Uint32Array(80),Iu=new Uint32Array(80),wl=class extends KJ.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:u,El:h,Fh:l,Fl:g,Gh:x,Gl:A,Hh:E,Hl:B}=this;return[t,r,n,i,o,s,a,c,u,h,l,g,x,A,E,B]}set(t,r,n,i,o,s,a,c,u,h,l,g,x,A,E,B){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=h|0,this.Fh=l|0,this.Fl=g|0,this.Gh=x|0,this.Gl=A|0,this.Hh=E|0,this.Hl=B|0}process(t,r){for(let R=0;R<16;R++,r+=4)Eu[R]=t.getUint32(r),Iu[R]=t.getUint32(r+=4);for(let R=16;R<80;R++){let V=Eu[R-15]|0,q=Iu[R-15]|0,W=lt.default.rotrSH(V,q,1)^lt.default.rotrSH(V,q,8)^lt.default.shrSH(V,q,7),G=lt.default.rotrSL(V,q,1)^lt.default.rotrSL(V,q,8)^lt.default.shrSL(V,q,7),z=Eu[R-2]|0,te=Iu[R-2]|0,_=lt.default.rotrSH(z,te,19)^lt.default.rotrBH(z,te,61)^lt.default.shrSH(z,te,6),f=lt.default.rotrSL(z,te,19)^lt.default.rotrBL(z,te,61)^lt.default.shrSL(z,te,6),m=lt.default.add4L(G,f,Iu[R-7],Iu[R-16]),b=lt.default.add4H(m,W,_,Eu[R-7],Eu[R-16]);Eu[R]=b|0,Iu[R]=m|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:u,Dl:h,Eh:l,El:g,Fh:x,Fl:A,Gh:E,Gl:B,Hh:M,Hl:N}=this;for(let R=0;R<80;R++){let V=lt.default.rotrSH(l,g,14)^lt.default.rotrSH(l,g,18)^lt.default.rotrBH(l,g,41),q=lt.default.rotrSL(l,g,14)^lt.default.rotrSL(l,g,18)^lt.default.rotrBL(l,g,41),W=l&x^~l&E,G=g&A^~g&B,z=lt.default.add5L(N,q,G,VJ[R],Iu[R]),te=lt.default.add5H(z,M,V,W,FJ[R],Eu[R]),_=z|0,f=lt.default.rotrSH(n,i,28)^lt.default.rotrBH(n,i,34)^lt.default.rotrBH(n,i,39),m=lt.default.rotrSL(n,i,28)^lt.default.rotrBL(n,i,34)^lt.default.rotrBL(n,i,39),b=n&o^n&a^o&a,v=i&s^i&c^s&c;M=E|0,N=B|0,E=x|0,B=A|0,x=l|0,A=g|0,{h:l,l:g}=lt.default.add(u|0,h|0,te|0,_|0),u=a|0,h=c|0,a=o|0,c=s|0,o=n|0,s=i|0;let w=lt.default.add3L(_,m,v);n=lt.default.add3H(w,te,f,b),i=w|0}({h:n,l:i}=lt.default.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=lt.default.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=lt.default.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:h}=lt.default.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:l,l:g}=lt.default.add(this.Eh|0,this.El|0,l|0,g|0),{h:x,l:A}=lt.default.add(this.Fh|0,this.Fl|0,x|0,A|0),{h:E,l:B}=lt.default.add(this.Gh|0,this.Gl|0,E|0,B|0),{h:M,l:N}=lt.default.add(this.Hh|0,this.Hl|0,M|0,N|0),this.set(n,i,o,s,a,c,u,h,l,g,x,A,E,B,M,N)}roundClean(){Eu.fill(0),Iu.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};Ko.SHA512=wl;var HE=class extends wl{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},WE=class extends wl{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},zE=class extends wl{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};Ko.sha512=(0,rx.wrapConstructor)(()=>new wl);Ko.sha512_224=(0,rx.wrapConstructor)(()=>new HE);Ko.sha512_256=(0,rx.wrapConstructor)(()=>new WE);Ko.sha384=(0,rx.wrapConstructor)(()=>new zE)});var iC=L(Tt=>{"use strict";p();y();Object.defineProperty(Tt,"__esModule",{value:!0});Tt.utils=Tt.curve25519=Tt.getSharedSecret=Tt.sync=Tt.verify=Tt.sign=Tt.getPublicKey=Tt.Signature=Tt.Point=Tt.RistrettoPoint=Tt.ExtendedPoint=Tt.CURVE=void 0;var qJ=Wb(),Fr=BigInt(0),gt=BigInt(1),Pu=BigInt(2),HJ=BigInt(8),zB=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),jt=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:zB,n:zB,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")});Tt.CURVE=jt;var JB=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),my=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),F3e=BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),WJ=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),zJ=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),jJ=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),GJ=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),Xr=class e{constructor(t,r,n,i){this.x=t,this.y=r,this.z=n,this.t=i}static fromAffine(t){if(!(t instanceof br))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(br.ZERO)?e.ZERO:new e(t.x,t.y,gt,oe(t.x*t.y))}static toAffineBatch(t){let r=JJ(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){GB(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t,c=oe(r*a),u=oe(o*i),h=oe(n*a),l=oe(s*i);return c===u&&h===l}negate(){return new e(oe(-this.x),this.y,this.z,oe(-this.t))}double(){let{x:t,y:r,z:n}=this,{a:i}=jt,o=oe(t*t),s=oe(r*r),a=oe(Pu*oe(n*n)),c=oe(i*o),u=t+r,h=oe(oe(u*u)-o-s),l=c+s,g=l-a,x=c-s,A=oe(h*g),E=oe(l*x),B=oe(h*x),M=oe(g*l);return new e(A,E,M,B)}add(t){GB(t);let{x:r,y:n,z:i,t:o}=this,{x:s,y:a,z:c,t:u}=t,h=oe((n-r)*(a+s)),l=oe((n+r)*(a-s)),g=oe(l-h);if(g===Fr)return this.double();let x=oe(i*Pu*u),A=oe(o*Pu*c),E=A+x,B=l+h,M=A-x,N=oe(E*g),R=oe(B*M),V=oe(E*M),q=oe(g*B);return new e(N,R,q,V)}subtract(t){return this.add(t.negate())}precomputeWindow(t){let r=1+256/t,n=[],i=this,o=i;for(let s=0;s<r;s++){o=i,n.push(o);for(let a=1;a<2**(t-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(t,r){!r&&this.equals(e.BASE)&&(r=br.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&YE.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=e.normalizeZ(i),YE.set(r,i)));let o=e.ZERO,s=e.BASE,a=1+256/n,c=2**(n-1),u=BigInt(2**n-1),h=2**n,l=BigInt(n);for(let g=0;g<a;g++){let x=g*c,A=Number(t&u);t>>=l,A>c&&(A-=h,t+=gt);let E=x,B=x+Math.abs(A)-1,M=g%2!==0,N=A<0;A===0?s=s.add(jB(M,i[E])):o=o.add(jB(N,i[B]))}return e.normalizeZ([o,s])[0]}multiply(t,r){return this.wNAF(mh(t,jt.l),r)}multiplyUnsafe(t){let r=mh(t,jt.l,!1),n=e.BASE,i=e.ZERO;if(r===Fr)return i;if(this.equals(i)||r===gt)return this;if(this.equals(n))return this.wNAF(r);let o=i,s=this;for(;r>Fr;)r&gt&&(o=o.add(s)),s=s.double(),r>>=gt;return o}isSmallOrder(){return this.multiplyUnsafe(jt.h).equals(e.ZERO)}isTorsionFree(){let t=this.multiplyUnsafe(jt.l/Pu).double();return jt.l%Pu&&(t=t.add(this)),t.equals(e.ZERO)}toAffine(t){let{x:r,y:n,z:i}=this,o=this.equals(e.ZERO);t==null&&(t=o?HJ:ox(i));let s=oe(r*t),a=oe(n*t),c=oe(i*t);if(o)return br.ZERO;if(c!==gt)throw new Error("invZ was invalid");return new br(s,a)}fromRistrettoBytes(){GE()}toRistrettoBytes(){GE()}fromRistrettoHash(){GE()}};Tt.ExtendedPoint=Xr;Xr.BASE=new Xr(jt.Gx,jt.Gy,gt,oe(jt.Gx*jt.Gy));Xr.ZERO=new Xr(Fr,gt,gt,Fr);function jB(e,t){let r=t.negate();return e?r:t}function GB(e){if(!(e instanceof Xr))throw new TypeError("ExtendedPoint expected")}function jE(e){if(!(e instanceof _u))throw new TypeError("RistrettoPoint expected")}function GE(){throw new Error("Legacy method: switch to RistrettoPoint")}var _u=class e{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){let{d:r}=jt,n=oe(my*t*t),i=oe((n+gt)*jJ),o=BigInt(-1),s=oe((o-r*n)*oe(n+r)),{isValid:a,value:c}=ZE(i,s),u=oe(c*t);Tu(u)||(u=oe(-u)),a||(c=u),a||(o=n);let h=oe(o*(n-gt)*GJ-s),l=c*c,g=oe((c+c)*s),x=oe(h*WJ),A=oe(gt-l),E=oe(gt+l);return new Xr(oe(g*E),oe(A*x),oe(x*E),oe(g*A))}static hashToCurve(t){t=Ls(t,64);let r=$E(t.slice(0,32)),n=this.calcElligatorRistrettoMap(r),i=$E(t.slice(32,64)),o=this.calcElligatorRistrettoMap(i);return new e(n.add(o))}static fromHex(t){t=Ls(t,32);let{a:r,d:n}=jt,i="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",o=$E(t);if(!ZJ(ph(o),t)||Tu(o))throw new Error(i);let s=oe(o*o),a=oe(gt+r*s),c=oe(gt-r*s),u=oe(a*a),h=oe(c*c),l=oe(r*n*u-h),{isValid:g,value:x}=YB(oe(l*h)),A=oe(x*c),E=oe(x*A*l),B=oe((o+o)*A);Tu(B)&&(B=oe(-B));let M=oe(a*E),N=oe(B*M);if(!g||Tu(N)||M===Fr)throw new Error(i);return new e(new Xr(B,M,gt,N))}toRawBytes(){let{x:t,y:r,z:n,t:i}=this.ep,o=oe(oe(n+r)*oe(n-r)),s=oe(t*r),a=oe(s*s),{value:c}=YB(oe(o*a)),u=oe(c*o),h=oe(c*s),l=oe(u*h*i),g;if(Tu(i*l)){let A=oe(r*my),E=oe(t*my);t=A,r=E,g=oe(u*zJ)}else g=h;Tu(t*l)&&(r=oe(-r));let x=oe((n-r)*g);return Tu(x)&&(x=oe(-x)),ph(x)}toHex(){return by(this.toRawBytes())}toString(){return this.toHex()}equals(t){jE(t);let r=this.ep,n=t.ep,i=oe(r.x*n.y)===oe(r.y*n.x),o=oe(r.y*n.y)===oe(r.x*n.x);return i||o}add(t){return jE(t),new e(this.ep.add(t.ep))}subtract(t){return jE(t),new e(this.ep.subtract(t.ep))}multiply(t){return new e(this.ep.multiply(t))}multiplyUnsafe(t){return new e(this.ep.multiplyUnsafe(t))}};Tt.RistrettoPoint=_u;_u.BASE=new _u(Xr.BASE);_u.ZERO=new _u(Xr.ZERO);var YE=new WeakMap,br=class e{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,YE.delete(this)}static fromHex(t,r=!0){let{d:n,P:i}=jt;t=Ls(t,32);let o=t.slice();o[31]=t[31]&-129;let s=Al(o);if(r&&s>=i)throw new Error("Expected 0 < hex < P");if(!r&&s>=JB)throw new Error("Expected 0 < hex < 2**256");let a=oe(s*s),c=oe(a-gt),u=oe(n*a+gt),{isValid:h,value:l}=ZE(c,u);if(!h)throw new Error("Point.fromHex: invalid y coordinate");let g=(l&gt)===gt;return(t[31]&128)!==0!==g&&(l=oe(-l)),new e(l,s)}static async fromPrivateKey(t){return(await xy(t)).point}toRawBytes(){let t=ph(this.y);return t[31]|=this.x&gt?128:0,t}toHex(){return by(this.toRawBytes())}toX25519(){let{y:t}=this,r=oe((gt+t)*ox(gt-t));return ph(r)}isTorsionFree(){return Xr.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new e(oe(-this.x),this.y)}add(t){return Xr.fromAffine(this).add(Xr.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return Xr.fromAffine(this).multiply(t,this).toAffine()}};Tt.Point=br;br.BASE=new br(jt.Gx,jt.Gy);br.ZERO=new br(Fr,gt);var vl=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromHex(t){let r=Ls(t,64),n=br.fromHex(r.slice(0,32),!1),i=Al(r.slice(32,64));return new e(n,i)}assertValidity(){let{r:t,s:r}=this;if(!(t instanceof br))throw new Error("Expected Point instance");return mh(r,jt.l,!1),this}toRawBytes(){let t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(ph(this.s),32),t}toHex(){return by(this.toRawBytes())}};Tt.Signature=vl;function $B(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var $J=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function by(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=$J[e[r]];return t}function JE(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function ZB(e){let r=e.toString(16).padStart(64,"0");return JE(r)}function ph(e){return ZB(e).reverse()}function Tu(e){return(oe(e)&gt)===gt}function Al(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+by(Uint8Array.from(e).reverse()))}var YJ=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function $E(e){return oe(Al(e)&YJ)}function oe(e,t=jt.P){let r=e%t;return r>=Fr?r:t+r}function ox(e,t=jt.P){if(e===Fr||t<=Fr)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=oe(e,t),n=t,i=Fr,o=gt,s=gt,a=Fr;for(;r!==Fr;){let u=n/r,h=n%r,l=i-s*u,g=o-a*u;n=r,r=h,i=s,o=a,s=l,a=g}if(n!==gt)throw new Error("invert: does not exist");return oe(i,t)}function JJ(e,t=jt.P){let r=new Array(e.length),n=e.reduce((o,s,a)=>s===Fr?o:(r[a]=o,oe(o*s,t)),gt),i=ox(n,t);return e.reduceRight((o,s,a)=>s===Fr?o:(r[a]=oe(o*r[a],t),oe(o*s,t)),i),r}function Ds(e,t){let{P:r}=jt,n=e;for(;t-- >Fr;)n*=n,n%=r;return n}function QB(e){let{P:t}=jt,r=BigInt(5),n=BigInt(10),i=BigInt(20),o=BigInt(40),s=BigInt(80),c=e*e%t*e%t,u=Ds(c,Pu)*c%t,h=Ds(u,gt)*e%t,l=Ds(h,r)*h%t,g=Ds(l,n)*l%t,x=Ds(g,i)*g%t,A=Ds(x,o)*x%t,E=Ds(A,s)*A%t,B=Ds(E,s)*A%t,M=Ds(B,n)*l%t;return{pow_p_5_8:Ds(M,Pu)*e%t,b2:c}}function ZE(e,t){let r=oe(t*t*t),n=oe(r*r*t),i=QB(e*n).pow_p_5_8,o=oe(e*r*i),s=oe(t*o*o),a=o,c=oe(o*my),u=s===e,h=s===oe(-e),l=s===oe(-e*my);return u&&(o=a),(h||l)&&(o=c),Tu(o)&&(o=oe(-o)),{isValid:u||h,value:o}}function YB(e){return ZE(gt,e)}function yh(e){return oe(Al(e),jt.l)}function ZJ(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Ls(e,t){let r=e instanceof Uint8Array?Uint8Array.from(e):JE(e);if(typeof t=="number"&&r.length!==t)throw new Error(`Expected ${t} bytes`);return r}function mh(e,t,r=!0){if(!t)throw new TypeError("Specify max value");if(typeof e=="number"&&Number.isSafeInteger(e)&&(e=BigInt(e)),typeof e=="bigint"&&e<t){if(r){if(Fr<e)return e}else if(Fr<=e)return e}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function XB(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function QJ(e){return Al(XB(Ls(e,32)))}function eC(e){if(e=typeof e=="bigint"||typeof e=="number"?ZB(mh(e,JB)):Ls(e),e.length!==32)throw new Error("Expected 32 bytes");return e}function tC(e){let t=XB(e.slice(0,32)),r=e.slice(32,64),n=yh(t),i=br.BASE.multiply(n),o=i.toRawBytes();return{head:t,prefix:r,scalar:n,point:i,pointBytes:o}}var gy;function ix(...e){if(typeof gy!="function")throw new Error("utils.sha512Sync must be set to use sync methods");return gy(...e)}async function xy(e){return tC(await Tt.utils.sha512(eC(e)))}function QE(e){return tC(ix(eC(e)))}async function XJ(e){return(await xy(e)).pointBytes}Tt.getPublicKey=XJ;function eZ(e){return QE(e).pointBytes}async function tZ(e,t){e=Ls(e);let{prefix:r,scalar:n,pointBytes:i}=await xy(t),o=yh(await Tt.utils.sha512(r,e)),s=br.BASE.multiply(o),a=yh(await Tt.utils.sha512(s.toRawBytes(),i,e)),c=oe(o+a*n,jt.l);return new vl(s,c).toRawBytes()}Tt.sign=tZ;function rZ(e,t){e=Ls(e);let{prefix:r,scalar:n,pointBytes:i}=QE(t),o=yh(ix(r,e)),s=br.BASE.multiply(o),a=yh(ix(s.toRawBytes(),i,e)),c=oe(o+a*n,jt.l);return new vl(s,c).toRawBytes()}function rC(e,t,r){t=Ls(t),r instanceof br||(r=br.fromHex(r,!1));let{r:n,s:i}=e instanceof vl?e.assertValidity():vl.fromHex(e),o=Xr.BASE.multiplyUnsafe(i);return{r:n,s:i,SB:o,pub:r,msg:t}}function nC(e,t,r,n){let i=yh(n),o=Xr.fromAffine(e).multiplyUnsafe(i);return Xr.fromAffine(t).add(o).subtract(r).multiplyUnsafe(jt.h).equals(Xr.ZERO)}async function nZ(e,t,r){let{r:n,SB:i,msg:o,pub:s}=rC(e,t,r),a=await Tt.utils.sha512(n.toRawBytes(),s.toRawBytes(),o);return nC(s,n,i,a)}Tt.verify=nZ;function iZ(e,t,r){let{r:n,SB:i,msg:o,pub:s}=rC(e,t,r),a=ix(n.toRawBytes(),s.toRawBytes(),o);return nC(s,n,i,a)}Tt.sync={getExtendedPublicKey:QE,getPublicKey:eZ,sign:rZ,verify:iZ};async function oZ(e,t){let{head:r}=await xy(e),n=br.fromHex(t).toX25519();return Tt.curve25519.scalarMult(r,n)}Tt.getSharedSecret=oZ;br.BASE._setWindowSize(8);function nx(e,t,r){let n=oe(e*(t-r));return t=oe(t-n),r=oe(r+n),[t,r]}function sZ(e,t){let{P:r}=jt,n=mh(e,r),i=mh(t,r),o=BigInt(121665),s=n,a=gt,c=Fr,u=n,h=gt,l=Fr,g;for(let B=BigInt(254);B>=Fr;B--){let M=i>>B&gt;l^=M,g=nx(l,a,u),a=g[0],u=g[1],g=nx(l,c,h),c=g[0],h=g[1],l=M;let N=a+c,R=oe(N*N),V=a-c,q=oe(V*V),W=R-q,G=u+h,z=u-h,te=oe(z*N),_=oe(G*V),f=te+_,m=te-_;u=oe(f*f),h=oe(s*oe(m*m)),a=oe(R*q),c=oe(W*(R+oe(o*W)))}g=nx(l,a,u),a=g[0],u=g[1],g=nx(l,c,h),c=g[0],h=g[1];let{pow_p_5_8:x,b2:A}=QB(c),E=oe(Ds(x,BigInt(3))*A);return oe(a*E)}function aZ(e){return ph(oe(e,jt.P))}function cZ(e){let t=Ls(e,32);return t[31]&=127,Al(t)}Tt.curve25519={BASE_POINT_U:"0900000000000000000000000000000000000000000000000000000000000000",scalarMult(e,t){let r=cZ(t),n=QJ(e),i=sZ(r,n);if(i===Fr)throw new Error("Invalid private or public key received");return aZ(i)},scalarMultBase(e){return Tt.curve25519.scalarMult(e,Tt.curve25519.BASE_POINT_U)}};var ku={node:qJ,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};Tt.utils={bytesToHex:by,hexToBytes:JE,concatBytes:$B,getExtendedPublicKey:xy,mod:oe,invert:ox,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:e=>{if(e=Ls(e),e.length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return oe(Al(e),jt.l-gt)+gt},randomBytes:(e=32)=>{if(ku.web)return ku.web.getRandomValues(new Uint8Array(e));if(ku.node){let{randomBytes:t}=ku.node;return new Uint8Array(t(e).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Tt.utils.randomBytes(32),sha512:async(...e)=>{let t=$B(...e);if(ku.web){let r=await ku.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(r)}else{if(ku.node)return Uint8Array.from(ku.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(e=8,t=br.BASE){let r=t.equals(br.BASE)?t:new br(t.x,t.y);return r._setWindowSize(e),r.multiply(Pu),r},sha512Sync:void 0};Object.defineProperties(Tt.utils,{sha512Sync:{configurable:!1,get(){return gy},set(e){gy||(gy=e)}}})});var ax=L(gh=>{"use strict";p();y();Object.defineProperty(gh,"__esModule",{value:!0});gh.sha224=gh.sha256=void 0;var uZ=yy(),Fo=Su(),fZ=(e,t,r)=>e&t^~e&r,lZ=(e,t,r)=>e&t^e&r^t&r,dZ=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Bu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Cu=new Uint32Array(64),sx=class extends uZ.SHA2{constructor(){super(64,32,8,!1),this.A=Bu[0]|0,this.B=Bu[1]|0,this.C=Bu[2]|0,this.D=Bu[3]|0,this.E=Bu[4]|0,this.F=Bu[5]|0,this.G=Bu[6]|0,this.H=Bu[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let l=0;l<16;l++,r+=4)Cu[l]=t.getUint32(r,!1);for(let l=16;l<64;l++){let g=Cu[l-15],x=Cu[l-2],A=(0,Fo.rotr)(g,7)^(0,Fo.rotr)(g,18)^g>>>3,E=(0,Fo.rotr)(x,17)^(0,Fo.rotr)(x,19)^x>>>10;Cu[l]=E+Cu[l-7]+A+Cu[l-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:h}=this;for(let l=0;l<64;l++){let g=(0,Fo.rotr)(a,6)^(0,Fo.rotr)(a,11)^(0,Fo.rotr)(a,25),x=h+g+fZ(a,c,u)+dZ[l]+Cu[l]|0,E=((0,Fo.rotr)(n,2)^(0,Fo.rotr)(n,13)^(0,Fo.rotr)(n,22))+lZ(n,i,o)|0;h=u,u=c,c=a,a=s+x|0,s=o,o=i,i=n,n=x+E|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,o,s,a,c,u,h)}roundClean(){Cu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},XE=class extends sx{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};gh.sha256=(0,Fo.wrapConstructor)(()=>new sx);gh.sha224=(0,Fo.wrapConstructor)(()=>new XE)});var oC=L(r3=>{"use strict";p();y();function kc(e,t,r){return t<=e&&e<=r}function dx(e){if(e===void 0)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function hZ(e){for(var t=String(e),r=t.length,n=0,i=[];n<r;){var o=t.charCodeAt(n);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(n===r-1)i.push(65533);else{var s=e.charCodeAt(n+1);if(56320<=s&&s<=57343){var a=o&1023,c=s&1023;i.push(65536+(a<<10)+c),n+=1}else i.push(65533)}n+=1}return i}function pZ(e){for(var t="",r=0;r<e.length;++r){var n=e[r];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var cx=-1;function t3(e){this.tokens=[].slice.call(e)}t3.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():cx},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};var bh=-1;function e3(e,t){if(e)throw TypeError("Decoder error");return t||65533}var ux="utf-8";function fx(e,t){if(!(this instanceof fx))return new fx(e,t);if(e=e!==void 0?String(e).toLowerCase():ux,e!==ux)throw new Error("Encoding not supported. Only utf-8 is supported");t=dx(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}fx.prototype={decode:function(t,r){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),r=dx(r),this._streaming||(this._decoder=new yZ({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!r.stream;for(var i=new t3(n),o=[],s;!i.endOfStream()&&(s=this._decoder.handler(i,i.read()),s!==bh);)s!==null&&(Array.isArray(s)?o.push.apply(o,s):o.push(s));if(!this._streaming){do{if(s=this._decoder.handler(i,i.read()),s===bh)break;s!==null&&(Array.isArray(s)?o.push.apply(o,s):o.push(s))}while(!i.endOfStream());this._decoder=null}return o.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(o[0]===65279?(this._BOMseen=!0,o.shift()):this._BOMseen=!0),pZ(o)}};function lx(e,t){if(!(this instanceof lx))return new lx(e,t);if(e=e!==void 0?String(e).toLowerCase():ux,e!==ux)throw new Error("Encoding not supported. Only utf-8 is supported");t=dx(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}lx.prototype={encode:function(t,r){t=t?String(t):"",r=dx(r),this._streaming||(this._encoder=new mZ(this._options)),this._streaming=!!r.stream;for(var n=[],i=new t3(hZ(t)),o;!i.endOfStream()&&(o=this._encoder.handler(i,i.read()),o!==bh);)Array.isArray(o)?n.push.apply(n,o):n.push(o);if(!this._streaming){for(;o=this._encoder.handler(i,i.read()),o!==bh;)Array.isArray(o)?n.push.apply(n,o):n.push(o);this._encoder=null}return new Uint8Array(n)}};function yZ(e){var t=e.fatal,r=0,n=0,i=0,o=128,s=191;this.handler=function(a,c){if(c===cx&&i!==0)return i=0,e3(t);if(c===cx)return bh;if(i===0){if(kc(c,0,127))return c;if(kc(c,194,223))i=1,r=c-192;else if(kc(c,224,239))c===224&&(o=160),c===237&&(s=159),i=2,r=c-224;else if(kc(c,240,244))c===240&&(o=144),c===244&&(s=143),i=3,r=c-240;else return e3(t);return r=r<<6*i,null}if(!kc(c,o,s))return r=i=n=0,o=128,s=191,a.prepend(c),e3(t);if(o=128,s=191,n+=1,r+=c-128<<6*(i-n),n!==i)return null;var u=r;return r=i=n=0,u}}function mZ(e){var t=e.fatal;this.handler=function(r,n){if(n===cx)return bh;if(kc(n,0,127))return n;var i,o;kc(n,128,2047)?(i=1,o=192):kc(n,2048,65535)?(i=2,o=224):kc(n,65536,1114111)&&(i=3,o=240);for(var s=[(n>>6*i)+o];i>0;){var a=n>>6*(i-1);s.push(128|a&63),i-=1}return s}}r3.TextEncoder=lx;r3.TextDecoder=fx});var fC=L(Jt=>{"use strict";p();y();var gZ=Jt&&Jt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),bZ=Jt&&Jt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),wa=Jt&&Jt.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},xZ=Jt&&Jt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&gZ(t,e,r);return bZ(t,e),t},sC=Jt&&Jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.deserializeUnchecked=Jt.deserialize=Jt.serialize=Jt.BinaryReader=Jt.BinaryWriter=Jt.BorshError=Jt.baseDecode=Jt.baseEncode=void 0;var Mu=sC(Hb()),aC=sC(Os()),wZ=xZ(oC()),vZ=typeof TextDecoder!="function"?wZ.TextDecoder:TextDecoder,AZ=new vZ("utf-8",{fatal:!0});function SZ(e){return typeof e=="string"&&(e=Buffer.from(e,"utf8")),aC.default.encode(Buffer.from(e))}Jt.baseEncode=SZ;function EZ(e){return Buffer.from(aC.default.decode(e))}Jt.baseDecode=EZ;var n3=1024,Wn=class extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}};Jt.BorshError=Wn;var hx=class{constructor(){this.buf=Buffer.alloc(n3),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(n3)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Mu.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Mu.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Mu.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Mu.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(n3)]),this.length+=t.length}writeString(t){this.maybeResize();let r=Buffer.from(t,"utf8");this.writeU32(r.length),this.writeBuffer(r)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,r){this.maybeResize(),this.writeU32(t.length);for(let n of t)this.maybeResize(),r(n)}toArray(){return this.buf.subarray(0,this.length)}};Jt.BinaryWriter=hx;function va(e,t,r){let n=r.value;r.value=function(...i){try{return n.apply(this,i)}catch(o){if(o instanceof RangeError){let s=o.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(s)>=0)throw new Wn("Reached the end of buffer when deserializing")}throw o}}}var _i=class{constructor(t){this.buf=t,this.offset=0}readU8(){let t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){let t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){let t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){let t=this.readBuffer(8);return new Mu.default(t,"le")}readU128(){let t=this.readBuffer(16);return new Mu.default(t,"le")}readU256(){let t=this.readBuffer(32);return new Mu.default(t,"le")}readU512(){let t=this.readBuffer(64);return new Mu.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new Wn(`Expected buffer length ${t} isn't within bounds`);let r=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,r}readString(){let t=this.readU32(),r=this.readBuffer(t);try{return AZ.decode(r)}catch(n){throw new Wn(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){let r=this.readU32(),n=Array();for(let i=0;i<r;++i)n.push(t());return n}};wa([va],_i.prototype,"readU8",null);wa([va],_i.prototype,"readU16",null);wa([va],_i.prototype,"readU32",null);wa([va],_i.prototype,"readU64",null);wa([va],_i.prototype,"readU128",null);wa([va],_i.prototype,"readU256",null);wa([va],_i.prototype,"readU512",null);wa([va],_i.prototype,"readString",null);wa([va],_i.prototype,"readFixedArray",null);wa([va],_i.prototype,"readArray",null);Jt.BinaryReader=_i;function cC(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Sl(e,t,r,n,i){try{if(typeof n=="string")i[`write${cC(n)}`](r);else if(n instanceof Array)if(typeof n[0]=="number"){if(r.length!==n[0])throw new Wn(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(n.length===2&&typeof n[1]=="number"){if(r.length!==n[1])throw new Wn(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let o=0;o<n[1];o++)Sl(e,null,r[o],n[0],i)}else i.writeArray(r,o=>{Sl(e,t,o,n[0],i)});else if(n.kind!==void 0)switch(n.kind){case"option":{r==null?i.writeU8(0):(i.writeU8(1),Sl(e,t,r,n.type,i));break}case"map":{i.writeU32(r.size),r.forEach((o,s)=>{Sl(e,t,s,n.key,i),Sl(e,t,o,n.value,i)});break}default:throw new Wn(`FieldType ${n} unrecognized`)}else uC(e,r,i)}catch(o){throw o instanceof Wn&&o.addToFieldPath(t),o}}function uC(e,t,r){if(typeof t.borshSerialize=="function"){t.borshSerialize(r);return}let n=e.get(t.constructor);if(!n)throw new Wn(`Class ${t.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([i,o])=>{Sl(e,i,t[i],o,r)});else if(n.kind==="enum"){let i=t[n.field];for(let o=0;o<n.values.length;++o){let[s,a]=n.values[o];if(s===i){r.writeU8(o),Sl(e,s,t[s],a,r);break}}}else throw new Wn(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function IZ(e,t,r=hx){let n=new r;return uC(e,t,n),n.toArray()}Jt.serialize=IZ;function El(e,t,r,n){try{if(typeof r=="string")return n[`read${cC(r)}`]();if(r instanceof Array){if(typeof r[0]=="number")return n.readFixedArray(r[0]);if(typeof r[1]=="number"){let i=[];for(let o=0;o<r[1];o++)i.push(El(e,null,r[0],n));return i}else return n.readArray(()=>El(e,t,r[0],n))}if(r.kind==="option")return n.readU8()?El(e,t,r.type,n):void 0;if(r.kind==="map"){let i=new Map,o=n.readU32();for(let s=0;s<o;s++){let a=El(e,t,r.key,n),c=El(e,t,r.value,n);i.set(a,c)}return i}return i3(e,r,n)}catch(i){throw i instanceof Wn&&i.addToFieldPath(t),i}}function i3(e,t,r){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(r);let n=e.get(t);if(!n)throw new Wn(`Class ${t.name} is missing in schema`);if(n.kind==="struct"){let i={};for(let[o,s]of e.get(t).fields)i[o]=El(e,o,s,r);return new t(i)}if(n.kind==="enum"){let i=r.readU8();if(i>=n.values.length)throw new Wn(`Enum index: ${i} is out of range`);let[o,s]=n.values[i],a=El(e,o,s,r);return new t({[o]:a})}throw new Wn(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function kZ(e,t,r,n=_i){let i=new n(r),o=i3(e,t,i);if(i.offset<r.length)throw new Wn(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return o}Jt.deserialize=kZ;function TZ(e,t,r,n=_i){let i=new n(r);return i3(e,t,i)}Jt.deserializeUnchecked=TZ});var Iy=L(Q=>{"use strict";p();y();Object.defineProperty(Q,"__esModule",{value:!0});Q.s16=Q.s8=Q.nu64be=Q.u48be=Q.u40be=Q.u32be=Q.u24be=Q.u16be=Q.nu64=Q.u48=Q.u40=Q.u32=Q.u24=Q.u16=Q.u8=Q.offset=Q.greedy=Q.Constant=Q.UTF8=Q.CString=Q.Blob=Q.Boolean=Q.BitField=Q.BitStructure=Q.VariantLayout=Q.Union=Q.UnionLayoutDiscriminator=Q.UnionDiscriminator=Q.Structure=Q.Sequence=Q.DoubleBE=Q.Double=Q.FloatBE=Q.Float=Q.NearInt64BE=Q.NearInt64=Q.NearUInt64BE=Q.NearUInt64=Q.IntBE=Q.Int=Q.UIntBE=Q.UInt=Q.OffsetLayout=Q.GreedyCount=Q.ExternalLayout=Q.bindConstructorLayout=Q.nameWithProperty=Q.Layout=Q.uint8ArrayToBuffer=Q.checkUint8Array=void 0;Q.constant=Q.utf8=Q.cstr=Q.blob=Q.unionLayoutDiscriminator=Q.union=Q.seq=Q.bits=Q.struct=Q.f64be=Q.f64=Q.f32be=Q.f32=Q.ns64be=Q.s48be=Q.s40be=Q.s32be=Q.s24be=Q.s16be=Q.ns64=Q.s48=Q.s40=Q.s32=Q.s24=void 0;var s3=Qr();function vh(e){if(!(e instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Q.checkUint8Array=vh;function Ut(e){return vh(e),s3.Buffer.from(e.buffer,e.byteOffset,e.length)}Q.uint8ArrayToBuffer=Ut;var qt=class{constructor(t,r){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=r}makeDestinationObject(){return{}}getSpan(t,r){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){let r=Object.create(this.constructor.prototype);return Object.assign(r,this),r.property=t,r}fromArray(t){}};Q.Layout=qt;function a3(e,t){return t.property?e+"["+t.property+"]":e}Q.nameWithProperty=a3;function PZ(e,t){if(typeof e!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(e,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof qt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value(r,n){return t.encode(this,r,n)},writable:!0}),Object.defineProperty(e,"decode",{value(r,n){return t.decode(r,n)},writable:!0})}Q.bindConstructorLayout=PZ;var ui=class extends qt{isCount(){throw new Error("ExternalLayout is abstract")}};Q.ExternalLayout=ui;var px=class extends ui{constructor(t=1,r){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,r),this.elementSpan=t}isCount(){return!0}decode(t,r=0){vh(t);let n=t.length-r;return Math.floor(n/this.elementSpan)}encode(t,r,n){return 0}};Q.GreedyCount=px;var wy=class extends ui{constructor(t,r=0,n){if(!(t instanceof qt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(r))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=r}isCount(){return this.layout instanceof $i||this.layout instanceof lo}decode(t,r=0){return this.layout.decode(t,r+this.offset)}encode(t,r,n=0){return this.layout.encode(t,r,n+this.offset)}};Q.OffsetLayout=wy;var $i=class extends qt{constructor(t,r){if(super(t,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,r=0){return Ut(t).readUIntLE(r,this.span)}encode(t,r,n=0){return Ut(r).writeUIntLE(t,n,this.span),this.span}};Q.UInt=$i;var lo=class extends qt{constructor(t,r){if(super(t,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,r=0){return Ut(t).readUIntBE(r,this.span)}encode(t,r,n=0){return Ut(r).writeUIntBE(t,n,this.span),this.span}};Q.UIntBE=lo;var Tc=class extends qt{constructor(t,r){if(super(t,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,r=0){return Ut(t).readIntLE(r,this.span)}encode(t,r,n=0){return Ut(r).writeIntLE(t,n,this.span),this.span}};Q.Int=Tc;var Ru=class extends qt{constructor(t,r){if(super(t,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,r=0){return Ut(t).readIntBE(r,this.span)}encode(t,r,n=0){return Ut(r).writeIntBE(t,n,this.span),this.span}};Q.IntBE=Ru;var o3=Math.pow(2,32);function Cx(e){let t=Math.floor(e/o3),r=e-t*o3;return{hi32:t,lo32:r}}function Mx(e,t){return e*o3+t}var yx=class extends qt{constructor(t){super(8,t)}decode(t,r=0){let n=Ut(t),i=n.readUInt32LE(r),o=n.readUInt32LE(r+4);return Mx(o,i)}encode(t,r,n=0){let i=Cx(t),o=Ut(r);return o.writeUInt32LE(i.lo32,n),o.writeUInt32LE(i.hi32,n+4),8}};Q.NearUInt64=yx;var mx=class extends qt{constructor(t){super(8,t)}decode(t,r=0){let n=Ut(t),i=n.readUInt32BE(r),o=n.readUInt32BE(r+4);return Mx(i,o)}encode(t,r,n=0){let i=Cx(t),o=Ut(r);return o.writeUInt32BE(i.hi32,n),o.writeUInt32BE(i.lo32,n+4),8}};Q.NearUInt64BE=mx;var gx=class extends qt{constructor(t){super(8,t)}decode(t,r=0){let n=Ut(t),i=n.readUInt32LE(r),o=n.readInt32LE(r+4);return Mx(o,i)}encode(t,r,n=0){let i=Cx(t),o=Ut(r);return o.writeUInt32LE(i.lo32,n),o.writeInt32LE(i.hi32,n+4),8}};Q.NearInt64=gx;var bx=class extends qt{constructor(t){super(8,t)}decode(t,r=0){let n=Ut(t),i=n.readInt32BE(r),o=n.readUInt32BE(r+4);return Mx(i,o)}encode(t,r,n=0){let i=Cx(t),o=Ut(r);return o.writeInt32BE(i.hi32,n),o.writeUInt32BE(i.lo32,n+4),8}};Q.NearInt64BE=bx;var xx=class extends qt{constructor(t){super(4,t)}decode(t,r=0){return Ut(t).readFloatLE(r)}encode(t,r,n=0){return Ut(r).writeFloatLE(t,n),4}};Q.Float=xx;var wx=class extends qt{constructor(t){super(4,t)}decode(t,r=0){return Ut(t).readFloatBE(r)}encode(t,r,n=0){return Ut(r).writeFloatBE(t,n),4}};Q.FloatBE=wx;var vx=class extends qt{constructor(t){super(8,t)}decode(t,r=0){return Ut(t).readDoubleLE(r)}encode(t,r,n=0){return Ut(r).writeDoubleLE(t,n),8}};Q.Double=vx;var Ax=class extends qt{constructor(t){super(8,t)}decode(t,r=0){return Ut(t).readDoubleBE(r)}encode(t,r,n=0){return Ut(r).writeDoubleBE(t,n),8}};Q.DoubleBE=Ax;var Sx=class extends qt{constructor(t,r,n){if(!(t instanceof qt))throw new TypeError("elementLayout must be a Layout");if(!(r instanceof ui&&r.isCount()||Number.isInteger(r)&&0<=r))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(r instanceof ui)&&0<t.span&&(i=r*t.span),super(i,n),this.elementLayout=t,this.count=r}getSpan(t,r=0){if(0<=this.span)return this.span;let n=0,i=this.count;if(i instanceof ui&&(i=i.decode(t,r)),0<this.elementLayout.span)n=i*this.elementLayout.span;else{let o=0;for(;o<i;)n+=this.elementLayout.getSpan(t,r+n),++o}return n}decode(t,r=0){let n=[],i=0,o=this.count;for(o instanceof ui&&(o=o.decode(t,r));i<o;)n.push(this.elementLayout.decode(t,r)),r+=this.elementLayout.getSpan(t,r),i+=1;return n}encode(t,r,n=0){let i=this.elementLayout,o=t.reduce((s,a)=>s+i.encode(a,r,n+s),0);return this.count instanceof ui&&this.count.encode(t.length,r,n),o}};Q.Sequence=Sx;var Ex=class extends qt{constructor(t,r,n){if(!(Array.isArray(t)&&t.reduce((o,s)=>o&&s instanceof qt,!0)))throw new TypeError("fields must be array of Layout instances");typeof r=="boolean"&&n===void 0&&(n=r,r=void 0);for(let o of t)if(0>o.span&&o.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=t.reduce((o,s)=>o+s.getSpan(),0)}catch{}super(i,r),this.fields=t,this.decodePrefixes=!!n}getSpan(t,r=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((i,o)=>{let s=o.getSpan(t,r);return r+=s,i+s},0)}catch{throw new RangeError("indeterminate span")}return n}decode(t,r=0){vh(t);let n=this.makeDestinationObject();for(let i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(t,r)),r+=i.getSpan(t,r),this.decodePrefixes&&t.length===r)break;return n}encode(t,r,n=0){let i=n,o=0,s=0;for(let a of this.fields){let c=a.span;if(s=0<c?c:0,a.property!==void 0){let u=t[a.property];u!==void 0&&(s=a.encode(u,r,n),0>c&&(c=a.getSpan(r,n)))}o=n,n+=c}return o+s-i}fromArray(t){let r=this.makeDestinationObject();for(let n of this.fields)n.property!==void 0&&0<t.length&&(r[n.property]=t.shift());return r}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(let r of this.fields)if(r.property===t)return r}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let r=0;for(let n of this.fields){if(n.property===t)return r;0>n.span?r=-1:0<=r&&(r+=n.span)}}};Q.Structure=Ex;var vy=class{constructor(t){this.property=t}decode(t,r){throw new Error("UnionDiscriminator is abstract")}encode(t,r,n){throw new Error("UnionDiscriminator is abstract")}};Q.UnionDiscriminator=vy;var wh=class extends vy{constructor(t,r){if(!(t instanceof ui&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(r||t.property||"variant"),this.layout=t}decode(t,r){return this.layout.decode(t,r)}encode(t,r,n){return this.layout.encode(t,r,n)}};Q.UnionLayoutDiscriminator=wh;var Ay=class extends qt{constructor(t,r,n){let i;if(t instanceof $i||t instanceof lo)i=new wh(new wy(t));else if(t instanceof ui&&t.isCount())i=new wh(t);else if(t instanceof vy)i=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(r===void 0&&(r=null),!(r===null||r instanceof qt))throw new TypeError("defaultLayout must be null or a Layout");if(r!==null){if(0>r.span)throw new Error("defaultLayout must have constant span");r.property===void 0&&(r=r.replicate("content"))}let o=-1;r&&(o=r.span,0<=o&&(t instanceof $i||t instanceof lo)&&(o+=i.layout.span)),super(o,n),this.discriminator=i,this.usesPrefixDiscriminator=t instanceof $i||t instanceof lo,this.defaultLayout=r,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return s(a)},this.configGetSourceVariant=function(a){s=a.bind(this)}}getSpan(t,r=0){if(0<=this.span)return this.span;let n=this.getVariant(t,r);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,r)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;let r=this.registry[t[this.discriminator.property]];if(r&&(!r.layout||r.property&&Object.prototype.hasOwnProperty.call(t,r.property)))return r}else for(let r in this.registry){let n=this.registry[r];if(n.property&&Object.prototype.hasOwnProperty.call(t,n.property))return n}throw new Error("unable to infer src variant")}decode(t,r=0){let n,i=this.discriminator,o=i.decode(t,r),s=this.registry[o];if(s===void 0){let a=this.defaultLayout,c=0;this.usesPrefixDiscriminator&&(c=i.layout.span),n=this.makeDestinationObject(),n[i.property]=o,n[a.property]=a.decode(t,r+c)}else n=s.decode(t,r);return n}encode(t,r,n=0){let i=this.getSourceVariant(t);if(i===void 0){let o=this.discriminator,s=this.defaultLayout,a=0;return this.usesPrefixDiscriminator&&(a=o.layout.span),o.encode(t[o.property],r,n),a+s.encode(t[s.property],r,n+a)}return i.encode(t,r,n)}addVariant(t,r,n){let i=new Ix(this,t,r,n);return this.registry[t]=i,i}getVariant(t,r=0){let n;return t instanceof Uint8Array?n=this.discriminator.decode(t,r):n=t,this.registry[n]}};Q.Union=Ay;var Ix=class extends qt{constructor(t,r,n,i){if(!(t instanceof Ay))throw new TypeError("union must be a Union");if(!Number.isInteger(r)||0>r)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof qt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let o=t.span;0>t.span&&(o=n?n.span:0,0<=o&&t.usesPrefixDiscriminator&&(o+=t.discriminator.layout.span)),super(o,i),this.union=t,this.variant=r,this.layout=n||null}getSpan(t,r=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(t,r+n)),n+i}decode(t,r=0){let n=this.makeDestinationObject();if(this!==this.union.getVariant(t,r))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,r+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,r,n=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,r,n);let o=i;if(this.layout&&(this.layout.encode(t[this.property],r,n+i),o+=this.layout.getSpan(r,n+i),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(t){if(this.layout)return this.layout.fromArray(t)}};Q.VariantLayout=Ix;function xh(e){return 0>e&&(e+=4294967296),e}var Sy=class extends qt{constructor(t,r,n){if(!(t instanceof $i||t instanceof lo))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof r=="string"&&n===void 0&&(n=r,r=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,n),this.word=t,this.msb=!!r,this.fields=[];let i=0;this._packedSetValue=function(o){return i=xh(o),this},this._packedGetValue=function(){return i}}decode(t,r=0){let n=this.makeDestinationObject(),i=this.word.decode(t,r);this._packedSetValue(i);for(let o of this.fields)o.property!==void 0&&(n[o.property]=o.decode(t));return n}encode(t,r,n=0){let i=this.word.decode(r,n);this._packedSetValue(i);for(let o of this.fields)if(o.property!==void 0){let s=t[o.property];s!==void 0&&o.encode(s)}return this.word.encode(this._packedGetValue(),r,n)}addField(t,r){let n=new Ey(this,t,r);return this.fields.push(n),n}addBoolean(t){let r=new kx(this,t);return this.fields.push(r),r}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(let r of this.fields)if(r.property===t)return r}};Q.BitStructure=Sy;var Ey=class{constructor(t,r,n){if(!(t instanceof Sy))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(r)||0>=r)throw new TypeError("bits must be positive integer");let i=8*t.span,o=t.fields.reduce((s,a)=>s+a.bits,0);if(r+o>i)throw new Error("bits too long for span remainder ("+(i-o)+" of "+i+" remain)");this.container=t,this.bits=r,this.valueMask=(1<<r)-1,r===32&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=i-o-r),this.wordMask=xh(this.valueMask<<this.start),this.property=n}decode(t,r){let n=this.container._packedGetValue();return xh(n&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==xh(t&this.valueMask))throw new TypeError(a3("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let r=this.container._packedGetValue(),n=xh(t<<this.start);this.container._packedSetValue(xh(r&~this.wordMask)|n)}};Q.BitField=Ey;var kx=class extends Ey{constructor(t,r){super(t,1,r)}decode(t,r){return!!super.decode(t,r)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};Q.Boolean=kx;var Tx=class extends qt{constructor(t,r){if(!(t instanceof ui&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof ui||(n=t),super(n,r),this.length=t}getSpan(t,r){let n=this.span;return 0>n&&(n=this.length.decode(t,r)),n}decode(t,r=0){let n=this.span;return 0>n&&(n=this.length.decode(t,r)),Ut(t).slice(r,r+n)}encode(t,r,n){let i=this.length;if(this.length instanceof ui&&(i=t.length),!(t instanceof Uint8Array&&i===t.length))throw new TypeError(a3("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(n+i>r.length)throw new RangeError("encoding overruns Uint8Array");let o=Ut(t);return Ut(r).write(o.toString("hex"),n,i,"hex"),this.length instanceof ui&&this.length.encode(i,r,n),i}};Q.Blob=Tx;var Px=class extends qt{constructor(t){super(-1,t)}getSpan(t,r=0){vh(t);let n=r;for(;n<t.length&&t[n]!==0;)n+=1;return 1+n-r}decode(t,r=0){let n=this.getSpan(t,r);return Ut(t).slice(r,r+n-1).toString("utf-8")}encode(t,r,n=0){typeof t!="string"&&(t=String(t));let i=s3.Buffer.from(t,"utf8"),o=i.length;if(n+o>r.length)throw new RangeError("encoding overruns Buffer");let s=Ut(r);return i.copy(s,n),s[n+o]=0,o+1}};Q.CString=Px;var _x=class extends qt{constructor(t,r){if(typeof t=="string"&&r===void 0&&(r=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,r),this.maxSpan=t}getSpan(t,r=0){return vh(t),t.length-r}decode(t,r=0){let n=this.getSpan(t,r);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return Ut(t).slice(r,r+n).toString("utf-8")}encode(t,r,n=0){typeof t!="string"&&(t=String(t));let i=s3.Buffer.from(t,"utf8"),o=i.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(n+o>r.length)throw new RangeError("encoding overruns Buffer");return i.copy(Ut(r),n),o}};Q.UTF8=_x;var Bx=class extends qt{constructor(t,r){super(0,r),this.value=t}decode(t,r){return this.value}encode(t,r,n){return 0}};Q.Constant=Bx;Q.greedy=(e,t)=>new px(e,t);Q.offset=(e,t,r)=>new wy(e,t,r);Q.u8=e=>new $i(1,e);Q.u16=e=>new $i(2,e);Q.u24=e=>new $i(3,e);Q.u32=e=>new $i(4,e);Q.u40=e=>new $i(5,e);Q.u48=e=>new $i(6,e);Q.nu64=e=>new yx(e);Q.u16be=e=>new lo(2,e);Q.u24be=e=>new lo(3,e);Q.u32be=e=>new lo(4,e);Q.u40be=e=>new lo(5,e);Q.u48be=e=>new lo(6,e);Q.nu64be=e=>new mx(e);Q.s8=e=>new Tc(1,e);Q.s16=e=>new Tc(2,e);Q.s24=e=>new Tc(3,e);Q.s32=e=>new Tc(4,e);Q.s40=e=>new Tc(5,e);Q.s48=e=>new Tc(6,e);Q.ns64=e=>new gx(e);Q.s16be=e=>new Ru(2,e);Q.s24be=e=>new Ru(3,e);Q.s32be=e=>new Ru(4,e);Q.s40be=e=>new Ru(5,e);Q.s48be=e=>new Ru(6,e);Q.ns64be=e=>new bx(e);Q.f32=e=>new xx(e);Q.f32be=e=>new wx(e);Q.f64=e=>new vx(e);Q.f64be=e=>new Ax(e);Q.struct=(e,t,r)=>new Ex(e,t,r);Q.bits=(e,t,r)=>new Sy(e,t,r);Q.seq=(e,t,r)=>new Sx(e,t,r);Q.union=(e,t,r)=>new Ay(e,t,r);Q.unionLayoutDiscriminator=(e,t)=>new wh(e,t);Q.blob=(e,t)=>new Tx(e,t);Q.cstr=e=>new Px(e);Q.utf8=(e,t)=>new _x(e,t);Q.constant=(e,t)=>new Bx(e,t)});var c3=L(Ah=>{"use strict";p();y();Object.defineProperty(Ah,"__esModule",{value:!0});var Rx;function _Z(e){{let t=Buffer.from(e);t.reverse();let r=t.toString("hex");return r.length===0?BigInt(0):BigInt(`0x${r}`)}return Rx.toBigInt(e,!1)}Ah.toBigIntLE=_Z;function BZ(e){{let t=e.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}return Rx.toBigInt(e,!0)}Ah.toBigIntBE=BZ;function CZ(e,t){{let r=e.toString(16),n=Buffer.from(r.padStart(t*2,"0").slice(0,t*2),"hex");return n.reverse(),n}return Rx.fromBigInt(e,Buffer.allocUnsafe(t),!1)}Ah.toBufferLE=CZ;function MZ(e,t){{let r=e.toString(16);return Buffer.from(r.padStart(t*2,"0").slice(0,t*2),"hex")}return Rx.fromBigInt(e,Buffer.allocUnsafe(t),!0)}Ah.toBufferBE=MZ});var bC=L(Te=>{"use strict";p();y();Object.defineProperty(Te,"__esModule",{value:!0});var Ox=class extends TypeError{constructor(t,r){let n,{message:i,...o}=t,{path:s}=t,a=s.length===0?i:"At path: "+s.join(".")+" -- "+i;super(a),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>{var c;return(c=n)!=null?c:n=[t,...r()]}}};function RZ(e){return Ks(e)&&typeof e[Symbol.iterator]=="function"}function Ks(e){return typeof e=="object"&&e!=null}function lC(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function ln(e){return typeof e=="string"?JSON.stringify(e):""+e}function OZ(e){let{done:t,value:r}=e.next();return t?void 0:r}function NZ(e,t,r,n){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});let{path:i,branch:o}=t,{type:s}=r,{refinement:a,message:c="Expected a value of type `"+s+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+ln(n)+"`"}=e;return{value:n,type:s,refinement:a,key:i[i.length-1],path:i,branch:o,...e,message:c}}function*u3(e,t,r,n){RZ(e)||(e=[e]);for(let i of e){let o=NZ(i,t,r,n);o&&(yield o)}}function*f3(e,t,r={}){let{path:n=[],branch:i=[e],coerce:o=!1,mask:s=!1}=r,a={path:n,branch:i};if(o&&(e=t.coercer(e,a),s&&t.type!=="type"&&Ks(t.schema)&&Ks(e)&&!Array.isArray(e)))for(let u in e)t.schema[u]===void 0&&delete e[u];let c=!0;for(let u of t.validator(e,a))c=!1,yield[u,void 0];for(let[u,h,l]of t.entries(e,a)){let g=f3(h,l,{path:u===void 0?n:[...n,u],branch:u===void 0?i:[...i,h],coerce:o,mask:s});for(let x of g)x[0]?(c=!1,yield[x[0],void 0]):o&&(h=x[1],u===void 0?e=h:e instanceof Map?e.set(u,h):e instanceof Set?e.add(h):Ks(e)&&(e[u]=h))}if(c)for(let u of t.refiner(e,a))c=!1,yield[u,void 0];c&&(yield[void 0,e])}var Cr=class{constructor(t){let{type:r,schema:n,validator:i,refiner:o,coercer:s=c=>c,entries:a=function*(){}}=t;this.type=r,this.schema=n,this.entries=a,this.coercer=s,i?this.validator=(c,u)=>{let h=i(c,u);return u3(h,u,this,c)}:this.validator=()=>[],o?this.refiner=(c,u)=>{let h=o(c,u);return u3(h,u,this,c)}:this.refiner=()=>[]}assert(t){return dC(t,this)}create(t){return hC(t,this)}is(t){return l3(t,this)}mask(t){return pC(t,this)}validate(t,r={}){return Sh(t,this,r)}};function dC(e,t){let r=Sh(e,t);if(r[0])throw r[0]}function hC(e,t){let r=Sh(e,t,{coerce:!0});if(r[0])throw r[0];return r[1]}function pC(e,t){let r=Sh(e,t,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}function l3(e,t){return!Sh(e,t)[0]}function Sh(e,t,r={}){let n=f3(e,t,r),i=OZ(n);return i[0]?[new Ox(i[0],function*(){for(let s of n)s[0]&&(yield s[0])}),void 0]:[void 0,i[1]]}function UZ(...e){let t=e.map(n=>n.schema),r=Object.assign({},...t);return ky(r)}function ho(e,t){return new Cr({type:e,schema:null,validator:t})}function DZ(e,t){return new Cr({...e,refiner:(r,n)=>r===void 0||e.refiner(r,n),validator(r,n){return r===void 0?!0:(t(r,n),e.validator(r,n))}})}function LZ(e){return new Cr({type:"dynamic",schema:null,*entries(t,r){yield*e(t,r).entries(t,r)},validator(t,r){return e(t,r).validator(t,r)},coercer(t,r){return e(t,r).coercer(t,r)}})}function KZ(e){let t;return new Cr({type:"lazy",schema:null,*entries(r,n){var i;(i=t)!=null||(t=e()),yield*t.entries(r,n)},validator(r,n){var i;return(i=t)!=null||(t=e()),t.validator(r,n)},coercer(r,n){var i;return(i=t)!=null||(t=e()),t.coercer(r,n)}})}function FZ(e,t){let{schema:r}=e,n={...r};for(let i of t)delete n[i];return ky(n)}function VZ(e){let t=e instanceof Cr?{...e.schema}:{...e};for(let r in t)t[r]=yC(t[r]);return ky(t)}function qZ(e,t){let{schema:r}=e,n={};for(let i of t)n[i]=r[i];return ky(n)}function HZ(e,t){return console.warn("superstruct@0.11 - The `struct` helper has been renamed to `define`."),ho(e,t)}function WZ(){return ho("any",()=>!0)}function zZ(e){return new Cr({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(let[r,n]of t.entries())yield[r,n,e]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+ln(t)}})}function jZ(){return ho("boolean",e=>typeof e=="boolean")}function GZ(){return ho("date",e=>e instanceof Date&&!isNaN(e.getTime())||"Expected a valid `Date` object, but received: "+ln(e))}function $Z(e){let t={},r=e.map(n=>ln(n)).join();for(let n of e)t[n]=n;return new Cr({type:"enums",schema:t,validator(n){return e.includes(n)||"Expected one of `"+r+"`, but received: "+ln(n)}})}function YZ(){return ho("func",e=>typeof e=="function"||"Expected a function, but received: "+ln(e))}function JZ(e){return ho("instance",t=>t instanceof e||"Expected a `"+e.name+"` instance, but received: "+ln(t))}function ZZ(){return ho("integer",e=>typeof e=="number"&&!isNaN(e)&&Number.isInteger(e)||"Expected an integer, but received: "+ln(e))}function QZ(e){return new Cr({type:"intersection",schema:null,*entries(t,r){for(let n of e)yield*n.entries(t,r)},*validator(t,r){for(let n of e)yield*n.validator(t,r)},*refiner(t,r){for(let n of e)yield*n.refiner(t,r)}})}function XZ(e){let t=ln(e),r=typeof e;return new Cr({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?e:null,validator(n){return n===e||"Expected the literal `"+t+"`, but received: "+ln(n)}})}function eQ(e,t){return new Cr({type:"map",schema:null,*entries(r){if(e&&t&&r instanceof Map)for(let[n,i]of r.entries())yield[n,n,e],yield[n,i,t]},coercer(r){return r instanceof Map?new Map(r):r},validator(r){return r instanceof Map||"Expected a `Map` object, but received: "+ln(r)}})}function d3(){return ho("never",()=>!1)}function tQ(e){return new Cr({...e,validator:(t,r)=>t===null||e.validator(t,r),refiner:(t,r)=>t===null||e.refiner(t,r)})}function rQ(){return ho("number",e=>typeof e=="number"&&!isNaN(e)||"Expected a number, but received: "+ln(e))}function ky(e){let t=e?Object.keys(e):[],r=d3();return new Cr({type:"object",schema:e||null,*entries(n){if(e&&Ks(n)){let i=new Set(Object.keys(n));for(let o of t)i.delete(o),yield[o,n[o],e[o]];for(let o of i)yield[o,n[o],r]}},validator(n){return Ks(n)||"Expected an object, but received: "+ln(n)},coercer(n){return Ks(n)?{...n}:n}})}function yC(e){return new Cr({...e,validator:(t,r)=>t===void 0||e.validator(t,r),refiner:(t,r)=>t===void 0||e.refiner(t,r)})}function nQ(e,t){return new Cr({type:"record",schema:null,*entries(r){if(Ks(r))for(let n in r){let i=r[n];yield[n,n,e],yield[n,i,t]}},validator(r){return Ks(r)||"Expected an object, but received: "+ln(r)}})}function iQ(){return ho("regexp",e=>e instanceof RegExp)}function oQ(e){return new Cr({type:"set",schema:null,*entries(t){if(e&&t instanceof Set)for(let r of t)yield[r,r,e]},coercer(t){return t instanceof Set?new Set(t):t},validator(t){return t instanceof Set||"Expected a `Set` object, but received: "+ln(t)}})}function mC(){return ho("string",e=>typeof e=="string"||"Expected a string, but received: "+ln(e))}function sQ(e){let t=d3();return new Cr({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){let n=Math.max(e.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],e[i]||t]}},validator(r){return Array.isArray(r)||"Expected an array, but received: "+ln(r)}})}function aQ(e){let t=Object.keys(e);return new Cr({type:"type",schema:e,*entries(r){if(Ks(r))for(let n of t)yield[n,r[n],e[n]]},validator(r){return Ks(r)||"Expected an object, but received: "+ln(r)}})}function cQ(e){let t=e.map(r=>r.type).join(" | ");return new Cr({type:"union",schema:null,validator(r,n){let i=[];for(let o of e){let[...s]=f3(r,o,n),[a]=s;if(a[0])for(let[c]of s)c&&i.push(c);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+ln(r),...i]}})}function gC(){return ho("unknown",()=>!0)}function h3(e,t,r){return new Cr({...e,coercer:(n,i)=>l3(n,t)?e.coercer(r(n,i),i):e.coercer(n,i)})}function uQ(e,t,r={}){return h3(e,gC(),n=>{let i=typeof t=="function"?t():t;if(n===void 0)return i;if(!r.strict&&lC(n)&&lC(i)){let o={...n},s=!1;for(let a in i)o[a]===void 0&&(o[a]=i[a],s=!0);if(s)return o}return n})}function fQ(e){return h3(e,mC(),t=>t.trim())}function lQ(e){let t="Expected an empty "+e.type;return Eh(e,"empty",r=>{if(r instanceof Map||r instanceof Set){let{size:n}=r;return n===0||t+" but received one with a size of `"+n+"`"}else{let{length:n}=r;return n===0||t+" but received one with a length of `"+n+"`"}})}function dQ(e,t,r={}){let{exclusive:n}=r;return Eh(e,"max",i=>n?i<t:i<=t||"Expected a "+e.type+" greater than "+(n?"":"or equal to ")+t+" but received `"+i+"`")}function hQ(e,t,r={}){let{exclusive:n}=r;return Eh(e,"min",i=>n?i>t:i>=t||"Expected a "+e.type+" greater than "+(n?"":"or equal to ")+t+" but received `"+i+"`")}function pQ(e,t){return Eh(e,"pattern",r=>t.test(r)||"Expected a "+e.type+" matching `/"+t.source+'/` but received "'+r+'"')}function yQ(e,t,r=t){let n="Expected a "+e.type,i=t===r?"of `"+t+"`":"between `"+t+"` and `"+r+"`";return Eh(e,"size",o=>{if(typeof o=="number"||o instanceof Date)return t<=o&&o<=r||n+" "+i+" but received `"+o+"`";if(o instanceof Map||o instanceof Set){let{size:s}=o;return t<=s&&s<=r||n+" with a size "+i+" but received one with a size of `"+s+"`"}else{let{length:s}=o;return t<=s&&s<=r||n+" with a length "+i+" but received one with a length of `"+s+"`"}})}function Eh(e,t,r){return new Cr({...e,*refiner(n,i){yield*e.refiner(n,i);let o=r(n,i),s=u3(o,i,e,n);for(let a of s)yield{...a,refinement:t}}})}Te.Struct=Cr;Te.StructError=Ox;Te.any=WZ;Te.array=zZ;Te.assert=dC;Te.assign=UZ;Te.boolean=jZ;Te.coerce=h3;Te.create=hC;Te.date=GZ;Te.defaulted=uQ;Te.define=ho;Te.deprecated=DZ;Te.dynamic=LZ;Te.empty=lQ;Te.enums=$Z;Te.func=YZ;Te.instance=JZ;Te.integer=ZZ;Te.intersection=QZ;Te.is=l3;Te.lazy=KZ;Te.literal=XZ;Te.map=eQ;Te.mask=pC;Te.max=dQ;Te.min=hQ;Te.never=d3;Te.nullable=tQ;Te.number=rQ;Te.object=ky;Te.omit=FZ;Te.optional=yC;Te.partial=VZ;Te.pattern=pQ;Te.pick=qZ;Te.record=nQ;Te.refine=Eh;Te.regexp=iQ;Te.set=oQ;Te.size=yQ;Te.string=mC;Te.struct=HZ;Te.trimmed=fQ;Te.tuple=sQ;Te.type=aQ;Te.union=cQ;Te.unknown=gC;Te.validate=Sh});var y3=L(p3=>{"use strict";p();y();Object.defineProperty(p3,"__esModule",{value:!0});p3.default=gQ;var Nx,mQ=new Uint8Array(16);function gQ(){if(!Nx&&(Nx=typeof self.crypto<"u"&&self.crypto.getRandomValues&&self.crypto.getRandomValues.bind(self.crypto),!Nx))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Nx(mQ)}});var xC=L(Ux=>{"use strict";p();y();Object.defineProperty(Ux,"__esModule",{value:!0});Ux.default=void 0;var bQ=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Ux.default=bQ});var Ty=L(Dx=>{"use strict";p();y();Object.defineProperty(Dx,"__esModule",{value:!0});Dx.default=void 0;var xQ=wQ(xC());function wQ(e){return e&&e.__esModule?e:{default:e}}function vQ(e){return typeof e=="string"&&xQ.default.test(e)}var AQ=vQ;Dx.default=AQ});var _y=L(Py=>{"use strict";p();y();Object.defineProperty(Py,"__esModule",{value:!0});Py.default=void 0;Py.unsafeStringify=wC;var SQ=EQ(Ty());function EQ(e){return e&&e.__esModule?e:{default:e}}var zn=[];for(let e=0;e<256;++e)zn.push((e+256).toString(16).slice(1));function wC(e,t=0){return zn[e[t+0]]+zn[e[t+1]]+zn[e[t+2]]+zn[e[t+3]]+"-"+zn[e[t+4]]+zn[e[t+5]]+"-"+zn[e[t+6]]+zn[e[t+7]]+"-"+zn[e[t+8]]+zn[e[t+9]]+"-"+zn[e[t+10]]+zn[e[t+11]]+zn[e[t+12]]+zn[e[t+13]]+zn[e[t+14]]+zn[e[t+15]]}function IQ(e,t=0){let r=wC(e,t);if(!(0,SQ.default)(r))throw TypeError("Stringified UUID is invalid");return r}var kQ=IQ;Py.default=kQ});var AC=L(Lx=>{"use strict";p();y();Object.defineProperty(Lx,"__esModule",{value:!0});Lx.default=void 0;var TQ=_Q(y3()),PQ=_y();function _Q(e){return e&&e.__esModule?e:{default:e}}var vC,m3,g3=0,b3=0;function BQ(e,t,r){let n=t&&r||0,i=t||new Array(16);e=e||{};let o=e.node||vC,s=e.clockseq!==void 0?e.clockseq:m3;if(o==null||s==null){let g=e.random||(e.rng||TQ.default)();o==null&&(o=vC=[g[0]|1,g[1],g[2],g[3],g[4],g[5]]),s==null&&(s=m3=(g[6]<<8|g[7])&16383)}let a=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:b3+1,u=a-g3+(c-b3)/1e4;if(u<0&&e.clockseq===void 0&&(s=s+1&16383),(u<0||a>g3)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g3=a,b3=c,m3=s,a+=122192928e5;let h=((a&268435455)*1e4+c)%4294967296;i[n++]=h>>>24&255,i[n++]=h>>>16&255,i[n++]=h>>>8&255,i[n++]=h&255;let l=a/4294967296*1e4&268435455;i[n++]=l>>>8&255,i[n++]=l&255,i[n++]=l>>>24&15|16,i[n++]=l>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let g=0;g<6;++g)i[n+g]=o[g];return t||(0,PQ.unsafeStringify)(i)}var CQ=BQ;Lx.default=CQ});var x3=L(Kx=>{"use strict";p();y();Object.defineProperty(Kx,"__esModule",{value:!0});Kx.default=void 0;var MQ=RQ(Ty());function RQ(e){return e&&e.__esModule?e:{default:e}}function OQ(e){if(!(0,MQ.default)(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var NQ=OQ;Kx.default=NQ});var w3=L(Il=>{"use strict";p();y();Object.defineProperty(Il,"__esModule",{value:!0});Il.URL=Il.DNS=void 0;Il.default=FQ;var UQ=_y(),DQ=LQ(x3());function LQ(e){return e&&e.__esModule?e:{default:e}}function KQ(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var SC="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Il.DNS=SC;var EC="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Il.URL=EC;function FQ(e,t,r){function n(i,o,s,a){var c;if(typeof i=="string"&&(i=KQ(i)),typeof o=="string"&&(o=(0,DQ.default)(o)),((c=o)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,s){a=a||0;for(let h=0;h<16;++h)s[a+h]=u[h];return s}return(0,UQ.unsafeStringify)(u)}try{n.name=e}catch{}return n.DNS=SC,n.URL=EC,n}});var kC=L(Vx=>{"use strict";p();y();Object.defineProperty(Vx,"__esModule",{value:!0});Vx.default=void 0;function VQ(e){if(typeof e=="string"){let t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return qQ(HQ(WQ(e),e.length*8))}function qQ(e){let t=[],r=e.length*32,n="0123456789abcdef";for(let i=0;i<r;i+=8){let o=e[i>>5]>>>i%32&255,s=parseInt(n.charAt(o>>>4&15)+n.charAt(o&15),16);t.push(s)}return t}function IC(e){return(e+64>>>9<<4)+14+1}function HQ(e,t){e[t>>5]|=128<<t%32,e[IC(t)-1]=t;let r=1732584193,n=-271733879,i=-1732584194,o=271733878;for(let s=0;s<e.length;s+=16){let a=r,c=n,u=i,h=o;r=fi(r,n,i,o,e[s],7,-680876936),o=fi(o,r,n,i,e[s+1],12,-389564586),i=fi(i,o,r,n,e[s+2],17,606105819),n=fi(n,i,o,r,e[s+3],22,-1044525330),r=fi(r,n,i,o,e[s+4],7,-176418897),o=fi(o,r,n,i,e[s+5],12,1200080426),i=fi(i,o,r,n,e[s+6],17,-1473231341),n=fi(n,i,o,r,e[s+7],22,-45705983),r=fi(r,n,i,o,e[s+8],7,1770035416),o=fi(o,r,n,i,e[s+9],12,-1958414417),i=fi(i,o,r,n,e[s+10],17,-42063),n=fi(n,i,o,r,e[s+11],22,-1990404162),r=fi(r,n,i,o,e[s+12],7,1804603682),o=fi(o,r,n,i,e[s+13],12,-40341101),i=fi(i,o,r,n,e[s+14],17,-1502002290),n=fi(n,i,o,r,e[s+15],22,1236535329),r=li(r,n,i,o,e[s+1],5,-165796510),o=li(o,r,n,i,e[s+6],9,-1069501632),i=li(i,o,r,n,e[s+11],14,643717713),n=li(n,i,o,r,e[s],20,-373897302),r=li(r,n,i,o,e[s+5],5,-701558691),o=li(o,r,n,i,e[s+10],9,38016083),i=li(i,o,r,n,e[s+15],14,-660478335),n=li(n,i,o,r,e[s+4],20,-405537848),r=li(r,n,i,o,e[s+9],5,568446438),o=li(o,r,n,i,e[s+14],9,-1019803690),i=li(i,o,r,n,e[s+3],14,-187363961),n=li(n,i,o,r,e[s+8],20,1163531501),r=li(r,n,i,o,e[s+13],5,-1444681467),o=li(o,r,n,i,e[s+2],9,-51403784),i=li(i,o,r,n,e[s+7],14,1735328473),n=li(n,i,o,r,e[s+12],20,-1926607734),r=di(r,n,i,o,e[s+5],4,-378558),o=di(o,r,n,i,e[s+8],11,-2022574463),i=di(i,o,r,n,e[s+11],16,1839030562),n=di(n,i,o,r,e[s+14],23,-35309556),r=di(r,n,i,o,e[s+1],4,-1530992060),o=di(o,r,n,i,e[s+4],11,1272893353),i=di(i,o,r,n,e[s+7],16,-155497632),n=di(n,i,o,r,e[s+10],23,-1094730640),r=di(r,n,i,o,e[s+13],4,681279174),o=di(o,r,n,i,e[s],11,-358537222),i=di(i,o,r,n,e[s+3],16,-722521979),n=di(n,i,o,r,e[s+6],23,76029189),r=di(r,n,i,o,e[s+9],4,-640364487),o=di(o,r,n,i,e[s+12],11,-421815835),i=di(i,o,r,n,e[s+15],16,530742520),n=di(n,i,o,r,e[s+2],23,-995338651),r=hi(r,n,i,o,e[s],6,-198630844),o=hi(o,r,n,i,e[s+7],10,1126891415),i=hi(i,o,r,n,e[s+14],15,-1416354905),n=hi(n,i,o,r,e[s+5],21,-57434055),r=hi(r,n,i,o,e[s+12],6,1700485571),o=hi(o,r,n,i,e[s+3],10,-1894986606),i=hi(i,o,r,n,e[s+10],15,-1051523),n=hi(n,i,o,r,e[s+1],21,-2054922799),r=hi(r,n,i,o,e[s+8],6,1873313359),o=hi(o,r,n,i,e[s+15],10,-30611744),i=hi(i,o,r,n,e[s+6],15,-1560198380),n=hi(n,i,o,r,e[s+13],21,1309151649),r=hi(r,n,i,o,e[s+4],6,-145523070),o=hi(o,r,n,i,e[s+11],10,-1120210379),i=hi(i,o,r,n,e[s+2],15,718787259),n=hi(n,i,o,r,e[s+9],21,-343485551),r=Ou(r,a),n=Ou(n,c),i=Ou(i,u),o=Ou(o,h)}return[r,n,i,o]}function WQ(e){if(e.length===0)return[];let t=e.length*8,r=new Uint32Array(IC(t));for(let n=0;n<t;n+=8)r[n>>5]|=(e[n/8]&255)<<n%32;return r}function Ou(e,t){let r=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(r>>16)<<16|r&65535}function zQ(e,t){return e<<t|e>>>32-t}function Fx(e,t,r,n,i,o){return Ou(zQ(Ou(Ou(t,e),Ou(n,o)),i),r)}function fi(e,t,r,n,i,o,s){return Fx(t&r|~t&n,e,t,i,o,s)}function li(e,t,r,n,i,o,s){return Fx(t&n|r&~n,e,t,i,o,s)}function di(e,t,r,n,i,o,s){return Fx(t^r^n,e,t,i,o,s)}function hi(e,t,r,n,i,o,s){return Fx(r^(t|~n),e,t,i,o,s)}var jQ=VQ;Vx.default=jQ});var PC=L(qx=>{"use strict";p();y();Object.defineProperty(qx,"__esModule",{value:!0});qx.default=void 0;var GQ=TC(w3()),$Q=TC(kC());function TC(e){return e&&e.__esModule?e:{default:e}}var YQ=(0,GQ.default)("v3",48,$Q.default),JQ=YQ;qx.default=JQ});var _C=L(Hx=>{"use strict";p();y();Object.defineProperty(Hx,"__esModule",{value:!0});Hx.default=void 0;var ZQ=typeof self.crypto<"u"&&self.crypto.randomUUID&&self.crypto.randomUUID.bind(self.crypto),QQ={randomUUID:ZQ};Hx.default=QQ});var MC=L(Wx=>{"use strict";p();y();Object.defineProperty(Wx,"__esModule",{value:!0});Wx.default=void 0;var BC=CC(_C()),XQ=CC(y3()),eX=_y();function CC(e){return e&&e.__esModule?e:{default:e}}function tX(e,t,r){if(BC.default.randomUUID&&!t&&!e)return BC.default.randomUUID();e=e||{};let n=e.random||(e.rng||XQ.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return(0,eX.unsafeStringify)(n)}var rX=tX;Wx.default=rX});var RC=L(zx=>{"use strict";p();y();Object.defineProperty(zx,"__esModule",{value:!0});zx.default=void 0;function nX(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function v3(e,t){return e<<t|e>>>32-t}function iX(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let s=unescape(encodeURIComponent(e));e=[];for(let a=0;a<s.length;++a)e.push(s.charCodeAt(a))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,i=Math.ceil(n/16),o=new Array(i);for(let s=0;s<i;++s){let a=new Uint32Array(16);for(let c=0;c<16;++c)a[c]=e[s*64+c*4]<<24|e[s*64+c*4+1]<<16|e[s*64+c*4+2]<<8|e[s*64+c*4+3];o[s]=a}o[i-1][14]=(e.length-1)*8/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=(e.length-1)*8&4294967295;for(let s=0;s<i;++s){let a=new Uint32Array(80);for(let x=0;x<16;++x)a[x]=o[s][x];for(let x=16;x<80;++x)a[x]=v3(a[x-3]^a[x-8]^a[x-14]^a[x-16],1);let c=r[0],u=r[1],h=r[2],l=r[3],g=r[4];for(let x=0;x<80;++x){let A=Math.floor(x/20),E=v3(c,5)+nX(A,u,h,l)+g+t[A]+a[x]>>>0;g=l,l=h,h=v3(u,30)>>>0,u=c,c=E}r[0]=r[0]+c>>>0,r[1]=r[1]+u>>>0,r[2]=r[2]+h>>>0,r[3]=r[3]+l>>>0,r[4]=r[4]+g>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var oX=iX;zx.default=oX});var NC=L(jx=>{"use strict";p();y();Object.defineProperty(jx,"__esModule",{value:!0});jx.default=void 0;var sX=OC(w3()),aX=OC(RC());function OC(e){return e&&e.__esModule?e:{default:e}}var cX=(0,sX.default)("v5",80,aX.default),uX=cX;jx.default=uX});var UC=L(Gx=>{"use strict";p();y();Object.defineProperty(Gx,"__esModule",{value:!0});Gx.default=void 0;var fX="00000000-0000-0000-0000-000000000000";Gx.default=fX});var DC=L($x=>{"use strict";p();y();Object.defineProperty($x,"__esModule",{value:!0});$x.default=void 0;var lX=dX(Ty());function dX(e){return e&&e.__esModule?e:{default:e}}function hX(e){if(!(0,lX.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}var pX=hX;$x.default=pX});var A3=L(Fs=>{"use strict";p();y();Object.defineProperty(Fs,"__esModule",{value:!0});Object.defineProperty(Fs,"NIL",{enumerable:!0,get:function(){return xX.default}});Object.defineProperty(Fs,"parse",{enumerable:!0,get:function(){return SX.default}});Object.defineProperty(Fs,"stringify",{enumerable:!0,get:function(){return AX.default}});Object.defineProperty(Fs,"v1",{enumerable:!0,get:function(){return yX.default}});Object.defineProperty(Fs,"v3",{enumerable:!0,get:function(){return mX.default}});Object.defineProperty(Fs,"v4",{enumerable:!0,get:function(){return gX.default}});Object.defineProperty(Fs,"v5",{enumerable:!0,get:function(){return bX.default}});Object.defineProperty(Fs,"validate",{enumerable:!0,get:function(){return vX.default}});Object.defineProperty(Fs,"version",{enumerable:!0,get:function(){return wX.default}});var yX=Pc(AC()),mX=Pc(PC()),gX=Pc(MC()),bX=Pc(NC()),xX=Pc(UC()),wX=Pc(DC()),vX=Pc(Ty()),AX=Pc(_y()),SX=Pc(x3());function Pc(e){return e&&e.__esModule?e:{default:e}}});var KC=L((r8e,LC)=>{"use strict";p();y();var EX=A3().v4,IX=function(e,t,r,n){if(typeof e!="string")throw new TypeError(e+" must be a string");n=n||{};let i=typeof n.version=="number"?n.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");let o={method:e};if(i===2&&(o.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");o.params=t}if(typeof r>"u"){let s=typeof n.generator=="function"?n.generator:function(){return EX()};o.id=s(o,n)}else i===2&&r===null?n.notificationIdNull&&(o.id=null):o.id=r;return o};LC.exports=IX});var VC=L((o8e,FC)=>{"use strict";p();y();var kX=A3().v4,TX=KC(),By=function(e,t){if(!(this instanceof By))return new By(e,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return kX()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=e};FC.exports=By;By.prototype.request=function(e,t,r,n){let i=this,o=null,s=Array.isArray(e)&&typeof t=="function";if(this.options.version===1&&s)throw new TypeError("JSON-RPC 1.0 does not support batching");if(s||!s&&e&&typeof e=="object"&&typeof t=="function")n=t,o=e;else{typeof r=="function"&&(n=r,r=void 0);let u=typeof n=="function";try{o=TX(e,t,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(h){if(u)return n(h);throw h}if(!u)return o}let c;try{c=JSON.stringify(o,this.options.replacer)}catch(u){return n(u)}return this.callServer(c,function(u,h){i._parseResponse(u,h,n)}),o};By.prototype._parseResponse=function(e,t,r){if(e){r(e);return}if(!t)return r();let n;try{n=JSON.parse(t,this.options.reviver)}catch(i){return r(i)}if(r.length===3)if(Array.isArray(n)){let i=function(s){return typeof s.error<"u"},o=function(s){return!i(s)};return r(null,n.filter(i),n.filter(o))}else return r(null,n.error,n.result);r(null,n)}});var Ih=L((c8e,_c)=>{p();y();function S3(e){"@babel/helpers - typeof";return _c.exports=S3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_c.exports.__esModule=!0,_c.exports.default=_c.exports,S3(e)}_c.exports=S3,_c.exports.__esModule=!0,_c.exports.default=_c.exports});var HC=L((l8e,Bc)=>{p();y();var PX=Ih().default;function qC(){"use strict";Bc.exports=qC=function(){return e},Bc.exports.__esModule=!0,Bc.exports.default=Bc.exports;var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(m,b,v){m[b]=v.value},i=typeof Symbol=="function"?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function c(m,b,v){return Object.defineProperty(m,b,{value:v,enumerable:!0,configurable:!0,writable:!0}),m[b]}try{c({},"")}catch{c=function(v,w,P){return v[w]=P}}function u(m,b,v,w){var P=b&&b.prototype instanceof g?b:g,C=Object.create(P.prototype),k=new te(w||[]);return n(C,"_invoke",{value:q(m,v,k)}),C}function h(m,b,v){try{return{type:"normal",arg:m.call(b,v)}}catch(w){return{type:"throw",arg:w}}}e.wrap=u;var l={};function g(){}function x(){}function A(){}var E={};c(E,o,function(){return this});var B=Object.getPrototypeOf,M=B&&B(B(_([])));M&&M!==t&&r.call(M,o)&&(E=M);var N=A.prototype=g.prototype=Object.create(E);function R(m){["next","throw","return"].forEach(function(b){c(m,b,function(v){return this._invoke(b,v)})})}function V(m,b){function v(P,C,k,d){var S=h(m[P],m,C);if(S.type!=="throw"){var F=S.arg,U=F.value;return U&&PX(U)=="object"&&r.call(U,"__await")?b.resolve(U.__await).then(function(D){v("next",D,k,d)},function(D){v("throw",D,k,d)}):b.resolve(U).then(function(D){F.value=D,k(F)},function(D){return v("throw",D,k,d)})}d(S.arg)}var w;n(this,"_invoke",{value:function(C,k){function d(){return new b(function(S,F){v(C,k,S,F)})}return w=w?w.then(d,d):d()}})}function q(m,b,v){var w="suspendedStart";return function(P,C){if(w==="executing")throw new Error("Generator is already running");if(w==="completed"){if(P==="throw")throw C;return f()}for(v.method=P,v.arg=C;;){var k=v.delegate;if(k){var d=W(k,v);if(d){if(d===l)continue;return d}}if(v.method==="next")v.sent=v._sent=v.arg;else if(v.method==="throw"){if(w==="suspendedStart")throw w="completed",v.arg;v.dispatchException(v.arg)}else v.method==="return"&&v.abrupt("return",v.arg);w="executing";var S=h(m,b,v);if(S.type==="normal"){if(w=v.done?"completed":"suspendedYield",S.arg===l)continue;return{value:S.arg,done:v.done}}S.type==="throw"&&(w="completed",v.method="throw",v.arg=S.arg)}}}function W(m,b){var v=b.method,w=m.iterator[v];if(w===void 0)return b.delegate=null,v==="throw"&&m.iterator.return&&(b.method="return",b.arg=void 0,W(m,b),b.method==="throw")||v!=="return"&&(b.method="throw",b.arg=new TypeError("The iterator does not provide a '"+v+"' method")),l;var P=h(w,m.iterator,b.arg);if(P.type==="throw")return b.method="throw",b.arg=P.arg,b.delegate=null,l;var C=P.arg;return C?C.done?(b[m.resultName]=C.value,b.next=m.nextLoc,b.method!=="return"&&(b.method="next",b.arg=void 0),b.delegate=null,l):C:(b.method="throw",b.arg=new TypeError("iterator result is not an object"),b.delegate=null,l)}function G(m){var b={tryLoc:m[0]};1 in m&&(b.catchLoc=m[1]),2 in m&&(b.finallyLoc=m[2],b.afterLoc=m[3]),this.tryEntries.push(b)}function z(m){var b=m.completion||{};b.type="normal",delete b.arg,m.completion=b}function te(m){this.tryEntries=[{tryLoc:"root"}],m.forEach(G,this),this.reset(!0)}function _(m){if(m){var b=m[o];if(b)return b.call(m);if(typeof m.next=="function")return m;if(!isNaN(m.length)){var v=-1,w=function P(){for(;++v<m.length;)if(r.call(m,v))return P.value=m[v],P.done=!1,P;return P.value=void 0,P.done=!0,P};return w.next=w}}return{next:f}}function f(){return{value:void 0,done:!0}}return x.prototype=A,n(N,"constructor",{value:A,configurable:!0}),n(A,"constructor",{value:x,configurable:!0}),x.displayName=c(A,a,"GeneratorFunction"),e.isGeneratorFunction=function(m){var b=typeof m=="function"&&m.constructor;return!!b&&(b===x||(b.displayName||b.name)==="GeneratorFunction")},e.mark=function(m){return Object.setPrototypeOf?Object.setPrototypeOf(m,A):(m.__proto__=A,c(m,a,"GeneratorFunction")),m.prototype=Object.create(N),m},e.awrap=function(m){return{__await:m}},R(V.prototype),c(V.prototype,s,function(){return this}),e.AsyncIterator=V,e.async=function(m,b,v,w,P){P===void 0&&(P=Promise);var C=new V(u(m,b,v,w),P);return e.isGeneratorFunction(b)?C:C.next().then(function(k){return k.done?k.value:C.next()})},R(N),c(N,a,"Generator"),c(N,o,function(){return this}),c(N,"toString",function(){return"[object Generator]"}),e.keys=function(m){var b=Object(m),v=[];for(var w in b)v.push(w);return v.reverse(),function P(){for(;v.length;){var C=v.pop();if(C in b)return P.value=C,P.done=!1,P}return P.done=!0,P}},e.values=_,te.prototype={constructor:te,reset:function(b){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(z),!b)for(var v in this)v.charAt(0)==="t"&&r.call(this,v)&&!isNaN(+v.slice(1))&&(this[v]=void 0)},stop:function(){this.done=!0;var b=this.tryEntries[0].completion;if(b.type==="throw")throw b.arg;return this.rval},dispatchException:function(b){if(this.done)throw b;var v=this;function w(F,U){return k.type="throw",k.arg=b,v.next=F,U&&(v.method="next",v.arg=void 0),!!U}for(var P=this.tryEntries.length-1;P>=0;--P){var C=this.tryEntries[P],k=C.completion;if(C.tryLoc==="root")return w("end");if(C.tryLoc<=this.prev){var d=r.call(C,"catchLoc"),S=r.call(C,"finallyLoc");if(d&&S){if(this.prev<C.catchLoc)return w(C.catchLoc,!0);if(this.prev<C.finallyLoc)return w(C.finallyLoc)}else if(d){if(this.prev<C.catchLoc)return w(C.catchLoc,!0)}else{if(!S)throw new Error("try statement without catch or finally");if(this.prev<C.finallyLoc)return w(C.finallyLoc)}}}},abrupt:function(b,v){for(var w=this.tryEntries.length-1;w>=0;--w){var P=this.tryEntries[w];if(P.tryLoc<=this.prev&&r.call(P,"finallyLoc")&&this.prev<P.finallyLoc){var C=P;break}}C&&(b==="break"||b==="continue")&&C.tryLoc<=v&&v<=C.finallyLoc&&(C=null);var k=C?C.completion:{};return k.type=b,k.arg=v,C?(this.method="next",this.next=C.finallyLoc,l):this.complete(k)},complete:function(b,v){if(b.type==="throw")throw b.arg;return b.type==="break"||b.type==="continue"?this.next=b.arg:b.type==="return"?(this.rval=this.arg=b.arg,this.method="return",this.next="end"):b.type==="normal"&&v&&(this.next=v),l},finish:function(b){for(var v=this.tryEntries.length-1;v>=0;--v){var w=this.tryEntries[v];if(w.finallyLoc===b)return this.complete(w.completion,w.afterLoc),z(w),l}},catch:function(b){for(var v=this.tryEntries.length-1;v>=0;--v){var w=this.tryEntries[v];if(w.tryLoc===b){var P=w.completion;if(P.type==="throw"){var C=P.arg;z(w)}return C}}throw new Error("illegal catch attempt")},delegateYield:function(b,v,w){return this.delegate={iterator:_(b),resultName:v,nextLoc:w},this.method==="next"&&(this.arg=void 0),l}},e}Bc.exports=qC,Bc.exports.__esModule=!0,Bc.exports.default=Bc.exports});var zC=L((p8e,WC)=>{p();y();var Yx=HC()();WC.exports=Yx;try{regeneratorRuntime=Yx}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Yx:Function("r","regeneratorRuntime = r")(Yx)}});var GC=L((g8e,Cy)=>{p();y();function jC(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(u){r(u);return}a.done?t(c):Promise.resolve(c).then(n,i)}function _X(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function s(c){jC(o,n,i,s,a,"next",c)}function a(c){jC(o,n,i,s,a,"throw",c)}s(void 0)})}}Cy.exports=_X,Cy.exports.__esModule=!0,Cy.exports.default=Cy.exports});var E3=L((w8e,My)=>{p();y();function BX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}My.exports=BX,My.exports.__esModule=!0,My.exports.default=My.exports});var YC=L((S8e,Ry)=>{p();y();var $C=Ih().default;function CX(e,t){if($C(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if($C(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}Ry.exports=CX,Ry.exports.__esModule=!0,Ry.exports.default=Ry.exports});var JC=L((k8e,Oy)=>{p();y();var MX=Ih().default,RX=YC();function OX(e){var t=RX(e,"string");return MX(t)==="symbol"?t:String(t)}Oy.exports=OX,Oy.exports.__esModule=!0,Oy.exports.default=Oy.exports});var I3=L((_8e,Ny)=>{p();y();var NX=JC();function ZC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,NX(n.key),n)}}function UX(e,t,r){return t&&ZC(e.prototype,t),r&&ZC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}Ny.exports=UX,Ny.exports.__esModule=!0,Ny.exports.default=Ny.exports});var QC=L((M8e,Cc)=>{p();y();function k3(e,t){return Cc.exports=k3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Cc.exports.__esModule=!0,Cc.exports.default=Cc.exports,k3(e,t)}Cc.exports=k3,Cc.exports.__esModule=!0,Cc.exports.default=Cc.exports});var T3=L((N8e,Uy)=>{p();y();var DX=QC();function LX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DX(e,t)}Uy.exports=LX,Uy.exports.__esModule=!0,Uy.exports.default=Uy.exports});var XC=L((L8e,Dy)=>{p();y();function KX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Dy.exports=KX,Dy.exports.__esModule=!0,Dy.exports.default=Dy.exports});var P3=L((V8e,Ly)=>{p();y();var FX=Ih().default,VX=XC();function qX(e,t){if(t&&(FX(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VX(e)}Ly.exports=qX,Ly.exports.__esModule=!0,Ly.exports.default=Ly.exports});var B3=L((W8e,Mc)=>{p();y();function _3(e){return Mc.exports=_3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mc.exports.__esModule=!0,Mc.exports.default=Mc.exports,_3(e)}Mc.exports=_3,Mc.exports.__esModule=!0,Mc.exports.default=Mc.exports});var t7=L(Zx=>{"use strict";p();y();var Uu=Z_();Object.defineProperty(Zx,"__esModule",{value:!0});Zx.default=void 0;var Nu=Uu(zC()),Jx=Uu(GC()),HX=Uu(Ih()),WX=Uu(E3()),zX=Uu(I3()),jX=Uu(T3()),GX=Uu(P3()),e7=Uu(B3()),$X=Q_();function YX(e){var t=JX();return function(){var n=(0,e7.default)(e),i;if(t){var o=(0,e7.default)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,GX.default)(this,i)}}function JX(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ZX=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},QX=function(e){(0,jX.default)(r,e);var t=YX(r);function r(n){var i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ws://localhost:8080",s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;(0,WX.default)(this,r);var c=s.autoconnect,u=c===void 0?!0:c,h=s.reconnect,l=h===void 0?!0:h,g=s.reconnect_interval,x=g===void 0?1e3:g,A=s.max_reconnects,E=A===void 0?5:A,B=ZX(s,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return i=t.call(this),i.webSocketFactory=n,i.queue={},i.rpc_id=0,i.address=o,i.autoconnect=u,i.ready=!1,i.reconnect=l,i.reconnect_timer_id=void 0,i.reconnect_interval=x,i.max_reconnects=E,i.rest_options=B,i.current_reconnects=0,i.generate_request_id=a||function(){return++i.rpc_id},i.autoconnect&&i._connect(i.address,Object.assign({autoconnect:i.autoconnect,reconnect:i.reconnect,reconnect_interval:i.reconnect_interval,max_reconnects:i.max_reconnects},i.rest_options)),i}return(0,zX.default)(r,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(i,o,s,a){var c=this;return!a&&(0,HX.default)(s)==="object"&&(a=s,s=null),new Promise(function(u,h){if(!c.ready)return h(new Error("socket not ready"));var l=c.generate_request_id(i,o),g={jsonrpc:"2.0",method:i,params:o||null,id:l};c.socket.send(JSON.stringify(g),a,function(x){if(x)return h(x);c.queue[l]={promise:[u,h]},s&&(c.queue[l].timeout=setTimeout(function(){delete c.queue[l],h(new Error("reply timeout"))},s))})})}},{key:"login",value:function(){var n=(0,Jx.default)(Nu.default.mark(function o(s){var a;return Nu.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.call("rpc.login",s);case 2:if(a=u.sent,a){u.next=5;break}throw new Error("authentication failed");case 5:return u.abrupt("return",a);case 6:case"end":return u.stop()}},o,this)}));function i(o){return n.apply(this,arguments)}return i}()},{key:"listMethods",value:function(){var n=(0,Jx.default)(Nu.default.mark(function o(){return Nu.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.call("__listMethods");case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},o,this)}));function i(){return n.apply(this,arguments)}return i}()},{key:"notify",value:function(i,o){var s=this;return new Promise(function(a,c){if(!s.ready)return c(new Error("socket not ready"));var u={jsonrpc:"2.0",method:i,params:o||null};s.socket.send(JSON.stringify(u),function(h){if(h)return c(h);a()})})}},{key:"subscribe",value:function(){var n=(0,Jx.default)(Nu.default.mark(function o(s){var a;return Nu.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return typeof s=="string"&&(s=[s]),u.next=3,this.call("rpc.on",s);case 3:if(a=u.sent,!(typeof s=="string"&&a[s]!=="ok")){u.next=6;break}throw new Error("Failed subscribing to an event '"+s+"' with: "+a[s]);case 6:return u.abrupt("return",a);case 7:case"end":return u.stop()}},o,this)}));function i(o){return n.apply(this,arguments)}return i}()},{key:"unsubscribe",value:function(){var n=(0,Jx.default)(Nu.default.mark(function o(s){var a;return Nu.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return typeof s=="string"&&(s=[s]),u.next=3,this.call("rpc.off",s);case 3:if(a=u.sent,!(typeof s=="string"&&a[s]!=="ok")){u.next=6;break}throw new Error("Failed unsubscribing from an event with: "+a);case 6:return u.abrupt("return",a);case 7:case"end":return u.stop()}},o,this)}));function i(o){return n.apply(this,arguments)}return i}()},{key:"close",value:function(i,o){this.socket.close(i||1e3,o)}},{key:"_connect",value:function(i,o){var s=this;clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(i,o),this.socket.addEventListener("open",function(){s.ready=!0,s.emit("open"),s.current_reconnects=0}),this.socket.addEventListener("message",function(a){var c=a.data;c instanceof ArrayBuffer&&(c=Buffer.from(c).toString());try{c=JSON.parse(c)}catch{return}if(c.notification&&s.listeners(c.notification).length){if(!Object.keys(c.params).length)return s.emit(c.notification);var u=[c.notification];if(c.params.constructor===Object)u.push(c.params);else for(var h=0;h<c.params.length;h++)u.push(c.params[h]);return Promise.resolve().then(function(){s.emit.apply(s,u)})}if(!s.queue[c.id])return c.method&&c.params?Promise.resolve().then(function(){s.emit(c.method,c.params)}):void 0;"error"in c=="result"in c&&s.queue[c.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),s.queue[c.id].timeout&&clearTimeout(s.queue[c.id].timeout),c.error?s.queue[c.id].promise[1](c.error):s.queue[c.id].promise[0](c.result),delete s.queue[c.id]}),this.socket.addEventListener("error",function(a){return s.emit("error",a)}),this.socket.addEventListener("close",function(a){var c=a.code,u=a.reason;s.ready&&setTimeout(function(){return s.emit("close",c,u)},0),s.ready=!1,s.socket=void 0,c!==1e3&&(s.current_reconnects++,s.reconnect&&(s.max_reconnects>s.current_reconnects||s.max_reconnects===0)&&(s.reconnect_timer_id=setTimeout(function(){return s._connect(i,o)},s.reconnect_interval)))})}}]),r}($X.EventEmitter);Zx.default=QX});var n7=L(C3=>{"use strict";p();y();var Ky=Z_();Object.defineProperty(C3,"__esModule",{value:!0});C3.default=aee;var XX=Ky(E3()),eee=Ky(I3()),tee=Ky(T3()),ree=Ky(P3()),r7=Ky(B3()),nee=Q_();function iee(e){var t=oee();return function(){var n=(0,r7.default)(e),i;if(t){var o=(0,r7.default)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,ree.default)(this,i)}}function oee(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var see=function(e){(0,tee.default)(r,e);var t=iee(r);function r(n,i,o){var s;return(0,XX.default)(this,r),s=t.call(this),s.socket=new self.WebSocket(n,o),s.socket.onopen=function(){return s.emit("open")},s.socket.onmessage=function(a){return s.emit("message",a.data)},s.socket.onerror=function(a){return s.emit("error",a)},s.socket.onclose=function(a){s.emit("close",a.code,a.reason)},s}return(0,eee.default)(r,[{key:"send",value:function(i,o,s){var a=s||o;try{this.socket.send(i),a()}catch(c){a(c)}}},{key:"close",value:function(i,o){this.socket.close(i,o)}},{key:"addEventListener",value:function(i,o,s){this.socket.addEventListener(i,o,s)}}]),r}(nee.EventEmitter);function aee(e,t){return new see(e,t)}});var l7=L(ir=>{"use strict";p();y();Object.defineProperty(ir,"__esModule",{value:!0});ir.shake256=ir.shake128=ir.keccak_512=ir.keccak_384=ir.keccak_256=ir.keccak_224=ir.sha3_512=ir.sha3_384=ir.sha3_256=ir.sha3_224=ir.Keccak=ir.keccakP=void 0;var kh=Zb(),qy=qE(),Vy=Su(),[s7,a7,c7]=[[],[],[]],cee=BigInt(0),Fy=BigInt(1),uee=BigInt(2),fee=BigInt(7),lee=BigInt(256),dee=BigInt(113);for(let e=0,t=Fy,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],s7.push(2*(5*n+r)),a7.push((e+1)*(e+2)/2%64);let i=cee;for(let o=0;o<7;o++)t=(t<<Fy^(t>>fee)*dee)%lee,t&uee&&(i^=Fy<<(Fy<<BigInt(o))-Fy);c7.push(i)}var[hee,pee]=qy.default.split(c7,!0),i7=(e,t,r)=>r>32?qy.default.rotlBH(e,t,r):qy.default.rotlSH(e,t,r),o7=(e,t,r)=>r>32?qy.default.rotlBL(e,t,r):qy.default.rotlSL(e,t,r);function u7(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let s=0;s<10;s++)r[s]=e[s]^e[s+10]^e[s+20]^e[s+30]^e[s+40];for(let s=0;s<10;s+=2){let a=(s+8)%10,c=(s+2)%10,u=r[c],h=r[c+1],l=i7(u,h,1)^r[a],g=o7(u,h,1)^r[a+1];for(let x=0;x<50;x+=10)e[s+x]^=l,e[s+x+1]^=g}let i=e[2],o=e[3];for(let s=0;s<24;s++){let a=a7[s],c=i7(i,o,a),u=o7(i,o,a),h=s7[s];i=e[h],o=e[h+1],e[h]=c,e[h+1]=u}for(let s=0;s<50;s+=10){for(let a=0;a<10;a++)r[a]=e[s+a];for(let a=0;a<10;a++)e[s+a]^=~r[(a+2)%10]&r[(a+4)%10]}e[0]^=hee[n],e[1]^=pee[n]}r.fill(0)}ir.keccakP=u7;var Hy=class e extends Vy.Hash{constructor(t,r,n,i=!1,o=24){if(super(),this.blockLen=t,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,kh.default.number(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,Vy.u32)(this.state)}keccak(){u7(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){kh.default.exists(this);let{blockLen:r,state:n}=this;t=(0,Vy.toBytes)(t);let i=t.length;for(let o=0;o<i;){let s=Math.min(r-this.pos,i-o);for(let a=0;a<s;a++)n[this.pos++]^=t[o++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:r,pos:n,blockLen:i}=this;t[n]^=r,r&128&&n===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){kh.default.exists(this,!1),kh.default.bytes(t),this.finish();let r=this.state,{blockLen:n}=this;for(let i=0,o=t.length;i<o;){this.posOut>=n&&this.keccak();let s=Math.min(n-this.posOut,o-i);t.set(r.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return kh.default.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(kh.default.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:r,suffix:n,outputLen:i,rounds:o,enableXOF:s}=this;return t||(t=new e(r,n,i,s,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=n,t.outputLen=i,t.enableXOF=s,t.destroyed=this.destroyed,t}};ir.Keccak=Hy;var Du=(e,t,r)=>(0,Vy.wrapConstructor)(()=>new Hy(t,e,r));ir.sha3_224=Du(6,144,224/8);ir.sha3_256=Du(6,136,256/8);ir.sha3_384=Du(6,104,384/8);ir.sha3_512=Du(6,72,512/8);ir.keccak_224=Du(1,144,224/8);ir.keccak_256=Du(1,136,256/8);ir.keccak_384=Du(1,104,384/8);ir.keccak_512=Du(1,72,512/8);var f7=(e,t,r)=>(0,Vy.wrapConstructorWithOpts)((n={})=>new Hy(t,e,n.dkLen===void 0?r:n.dkLen,!0));ir.shake128=f7(31,168,128/8);ir.shake256=f7(31,136,256/8)});var h7=L(Wy=>{"use strict";p();y();Object.defineProperty(Wy,"__esModule",{value:!0});Wy.hmac=void 0;var Qx=Zb(),d7=Su(),Xx=class extends d7.Hash{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,Qx.default.hash(t);let n=(0,d7.toBytes)(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return Qx.default.exists(this),this.iHash.update(t),this}digestInto(t){Qx.default.exists(this),Qx.default.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},yee=(e,t,r)=>new Xx(e,t).update(r).digest();Wy.hmac=yee;Wy.hmac.create=(e,t)=>new Xx(e,t)});var N3=L(St=>{"use strict";p();y();Object.defineProperty(St,"__esModule",{value:!0});St.utils=St.schnorr=St.verify=St.signSync=St.sign=St.getSharedSecret=St.recoverPublicKey=St.getPublicKey=St.Signature=St.Point=St.CURVE=void 0;var mee=Wb(),Pt=BigInt(0),ur=BigInt(1),Fu=BigInt(2),jy=BigInt(3),p7=BigInt(8),Zt=Object.freeze({a:Pt,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:ur,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});St.CURVE=Zt;var y7=(e,t)=>(e+t/Fu)/t,ew={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){let{n:t}=Zt,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-ur*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=y7(o*e,t),c=y7(-n*e,t),u=me(e-a*r-c*i,t),h=me(-a*n-c*o,t),l=u>s,g=h>s;if(l&&(u=t-u),g&&(h=t-h),u>s||h>s)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:g,k2:h}}},Vs=32,Tl=32,A7=32,ow=Vs+1,sw=2*Vs+1;function m7(e){let{a:t,b:r}=Zt,n=me(e*e),i=me(n*e);return me(i+t*e+r)}var tw=Zt.a===Pt,$y=class extends Error{constructor(t){super(t)}};function g7(e){if(!(e instanceof Bi))throw new TypeError("JacobianPoint expected")}var Bi=class e{constructor(t,r,n){this.x=t,this.y=r,this.z=n}static fromAffine(t){if(!(t instanceof or))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(or.ZERO)?e.ZERO:new e(t.x,t.y,ur)}static toAffineBatch(t){let r=vee(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return e.toAffineBatch(t).map(e.fromAffine)}equals(t){g7(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t,c=me(i*i),u=me(a*a),h=me(r*u),l=me(o*c),g=me(me(n*a)*u),x=me(me(s*i)*c);return h===l&&g===x}negate(){return new e(this.x,me(-this.y),this.z)}double(){let{x:t,y:r,z:n}=this,i=me(t*t),o=me(r*r),s=me(o*o),a=t+o,c=me(Fu*(me(a*a)-i-s)),u=me(jy*i),h=me(u*u),l=me(h-Fu*c),g=me(u*(c-l)-p7*s),x=me(Fu*r*n);return new e(l,g,x)}add(t){g7(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t;if(o===Pt||s===Pt)return this;if(r===Pt||n===Pt)return t;let c=me(i*i),u=me(a*a),h=me(r*u),l=me(o*c),g=me(me(n*a)*u),x=me(me(s*i)*c),A=me(l-h),E=me(x-g);if(A===Pt)return E===Pt?this.double():e.ZERO;let B=me(A*A),M=me(A*B),N=me(h*B),R=me(E*E-M-Fu*N),V=me(E*(N-R)-g*M),q=me(i*a*A);return new e(R,V,q)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){let r=e.ZERO;if(typeof t=="bigint"&&t===Pt)return r;let n=w7(t);if(n===ur)return this;if(!tw){let l=r,g=this;for(;n>Pt;)n&ur&&(l=l.add(g)),g=g.double(),n>>=ur;return l}let{k1neg:i,k1:o,k2neg:s,k2:a}=ew.splitScalar(n),c=r,u=r,h=this;for(;o>Pt||a>Pt;)o&ur&&(c=c.add(h)),a&ur&&(u=u.add(h)),h=h.double(),o>>=ur,a>>=ur;return i&&(c=c.negate()),s&&(u=u.negate()),u=new e(me(u.x*ew.beta),u.y,u.z),c.add(u)}precomputeWindow(t){let r=tw?128/t+1:256/t+1,n=[],i=this,o=i;for(let s=0;s<r;s++){o=i,n.push(o);for(let a=1;a<2**(t-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(t,r){!r&&this.equals(e.BASE)&&(r=or.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&M3.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=e.normalizeZ(i),M3.set(r,i)));let o=e.ZERO,s=e.BASE,a=1+(tw?128/n:256/n),c=2**(n-1),u=BigInt(2**n-1),h=2**n,l=BigInt(n);for(let g=0;g<a;g++){let x=g*c,A=Number(t&u);t>>=l,A>c&&(A-=h,t+=ur);let E=x,B=x+Math.abs(A)-1,M=g%2!==0,N=A<0;A===0?s=s.add(rw(M,i[E])):o=o.add(rw(N,i[B]))}return{p:o,f:s}}multiply(t,r){let n=w7(t),i,o;if(tw){let{k1neg:s,k1:a,k2neg:c,k2:u}=ew.splitScalar(n),{p:h,f:l}=this.wNAF(a,r),{p:g,f:x}=this.wNAF(u,r);h=rw(s,h),g=rw(c,g),g=new e(me(g.x*ew.beta),g.y,g.z),i=h.add(g),o=l.add(x)}else{let{p:s,f:a}=this.wNAF(n,r);i=s,o=a}return e.normalizeZ([i,o])[0]}toAffine(t){let{x:r,y:n,z:i}=this,o=this.equals(e.ZERO);t==null&&(t=o?p7:Mh(i));let s=t,a=me(s*s),c=me(a*s),u=me(r*a),h=me(n*c),l=me(i*s);if(o)return or.ZERO;if(l!==ur)throw new Error("invZ was invalid");return new or(u,h)}};Bi.BASE=new Bi(Zt.Gx,Zt.Gy,ur);Bi.ZERO=new Bi(Pt,ur,Pt);function rw(e,t){let r=t.negate();return e?r:t}var M3=new WeakMap,or=class e{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,M3.delete(this)}hasEvenY(){return this.y%Fu===Pt}static fromCompressedHex(t){let r=t.length===32,n=yo(r?t:t.subarray(1));if(!iw(n))throw new Error("Point is not on curve");let i=m7(n),o=wee(i),s=(o&ur)===ur;r?s&&(o=me(-o)):(t[0]&1)===1!==s&&(o=me(-o));let a=new e(n,o);return a.assertValidity(),a}static fromUncompressedHex(t){let r=yo(t.subarray(1,Vs+1)),n=yo(t.subarray(Vs+1,Vs*2+1)),i=new e(r,n);return i.assertValidity(),i}static fromHex(t){let r=Aa(t),n=r.length,i=r[0];if(n===Vs)return this.fromCompressedHex(r);if(n===ow&&(i===2||i===3))return this.fromCompressedHex(r);if(n===sw&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-${ow} compressed bytes or ${sw} uncompressed bytes, not ${n}`)}static fromPrivateKey(t){return e.BASE.multiply(Pl(t))}static fromSignature(t,r,n){let{r:i,s:o}=E7(r);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");let s=R3(Aa(t)),{n:a}=Zt,c=n===2||n===3?i+a:i,u=Mh(c,a),h=me(-s*u,a),l=me(o*u,a),g=n&1?"03":"02",x=e.fromHex(g+Vu(c)),A=e.BASE.multiplyAndAddUnsafe(x,h,l);if(!A)throw new Error("Cannot recover signature: point at infinify");return A.assertValidity(),A}toRawBytes(t=!1){return qu(this.toHex(t))}toHex(t=!1){let r=Vu(this.x);return t?`${this.hasEvenY()?"02":"03"}${r}`:`04${r}${Vu(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let t="Point is not on elliptic curve",{x:r,y:n}=this;if(!iw(r)||!iw(n))throw new Error(t);let i=me(n*n),o=m7(r);if(me(i-o)!==Pt)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new e(this.x,me(-this.y))}double(){return Bi.fromAffine(this).double().toAffine()}add(t){return Bi.fromAffine(this).add(Bi.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return Bi.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,r,n){let i=Bi.fromAffine(this),o=r===Pt||r===ur||this!==e.BASE?i.multiplyUnsafe(r):i.multiply(r),s=Bi.fromAffine(t).multiplyUnsafe(n),a=o.add(s);return a.equals(Bi.ZERO)?void 0:a.toAffine()}};St.Point=or;or.BASE=new or(Zt.Gx,Zt.Gy);or.ZERO=new or(Pt,Pt);function b7(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function x7(e){if(e.length<2||e[0]!==2)throw new Error(`Invalid signature integer tag: ${Ph(e)}`);let t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:yo(r),left:e.subarray(t+2)}}function gee(e){if(e.length<2||e[0]!=48)throw new Error(`Invalid signature tag: ${Ph(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");let{data:t,left:r}=x7(e.subarray(2)),{data:n,left:i}=x7(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${Ph(i)}`);return{r:t,s:n}}var kl=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromCompact(t){let r=t instanceof Uint8Array,n="Signature.fromCompact";if(typeof t!="string"&&!r)throw new TypeError(`${n}: Expected string or Uint8Array`);let i=r?Ph(t):t;if(i.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new e(aw(i.slice(0,64)),aw(i.slice(64,128)))}static fromDER(t){let r=t instanceof Uint8Array;if(typeof t!="string"&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:n,s:i}=gee(r?t:qu(t));return new e(n,i)}static fromHex(t){return this.fromDER(t)}assertValidity(){let{r:t,s:r}=this;if(!Bh(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Bh(r))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let t=Zt.n>>ur;return this.s>t}normalizeS(){return this.hasHighS()?new e(this.r,me(-this.s,Zt.n)):this}toDERRawBytes(){return qu(this.toDERHex())}toDERHex(){let t=b7(zy(this.s)),r=b7(zy(this.r)),n=t.length/2,i=r.length/2,o=zy(n),s=zy(i);return`30${zy(i+n+4)}02${s}${r}02${o}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return qu(this.toCompactHex())}toCompactHex(){return Vu(this.r)+Vu(this.s)}};St.Signature=kl;function Ku(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var bee=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ph(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=bee[e[r]];return t}var xee=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Vu(e){if(typeof e!="bigint")throw new Error("Expected bigint");if(!(Pt<=e&&e<xee))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function _h(e){let t=qu(Vu(e));if(t.length!==32)throw new Error("Error: expected 32 bytes");return t}function zy(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function aw(e){if(typeof e!="string")throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function qu(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function yo(e){return aw(Ph(e))}function Aa(e){return e instanceof Uint8Array?Uint8Array.from(e):qu(e)}function w7(e){if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if(typeof e=="bigint"&&Bh(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function me(e,t=Zt.P){let r=e%t;return r>=Pt?r:t+r}function Vo(e,t){let{P:r}=Zt,n=e;for(;t-- >Pt;)n*=n,n%=r;return n}function wee(e){let{P:t}=Zt,r=BigInt(6),n=BigInt(11),i=BigInt(22),o=BigInt(23),s=BigInt(44),a=BigInt(88),c=e*e*e%t,u=c*c*e%t,h=Vo(u,jy)*u%t,l=Vo(h,jy)*u%t,g=Vo(l,Fu)*c%t,x=Vo(g,n)*g%t,A=Vo(x,i)*x%t,E=Vo(A,s)*A%t,B=Vo(E,a)*E%t,M=Vo(B,s)*A%t,N=Vo(M,jy)*u%t,R=Vo(N,o)*x%t,V=Vo(R,r)*c%t,q=Vo(V,Fu);if(q*q%t!==e)throw new Error("Cannot find square root");return q}function Mh(e,t=Zt.P){if(e===Pt||t<=Pt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=me(e,t),n=t,i=Pt,o=ur,s=ur,a=Pt;for(;r!==Pt;){let u=n/r,h=n%r,l=i-s*u,g=o-a*u;n=r,r=h,i=s,o=a,s=l,a=g}if(n!==ur)throw new Error("invert: does not exist");return me(i,t)}function vee(e,t=Zt.P){let r=new Array(e.length),n=e.reduce((o,s,a)=>s===Pt?o:(r[a]=o,me(o*s,t)),ur),i=Mh(n,t);return e.reduceRight((o,s,a)=>s===Pt?o:(r[a]=me(o*r[a],t),me(o*s,t)),i),r}function Aee(e){let t=e.length*8-Tl*8,r=yo(e);return t>0?r>>BigInt(t):r}function R3(e,t=!1){let r=Aee(e);if(t)return r;let{n}=Zt;return r>=n?r-n:r}var Th,Gy,cw=class{constructor(t,r){if(this.hashLen=t,this.qByteLen=r,typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(t).fill(1),this.k=new Uint8Array(t).fill(0),this.counter=0}hmac(...t){return St.utils.hmacSha256(this.k,...t)}hmacSync(...t){return Gy(this.k,...t)}checkSync(){if(typeof Gy!="function")throw new $y("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),t.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),t.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){this.incr();let t=0,r=[];for(;t<this.qByteLen;){this.v=await this.hmac(this.v);let n=this.v.slice();r.push(n),t+=this.v.length}return Ku(...r)}generateSync(){this.checkSync(),this.incr();let t=0,r=[];for(;t<this.qByteLen;){this.v=this.hmacSync(this.v);let n=this.v.slice();r.push(n),t+=this.v.length}return Ku(...r)}};function Bh(e){return Pt<e&&e<Zt.n}function iw(e){return Pt<e&&e<Zt.P}function S7(e,t,r,n=!0){let{n:i}=Zt,o=R3(e,!0);if(!Bh(o))return;let s=Mh(o,i),a=or.BASE.multiply(o),c=me(a.x,i);if(c===Pt)return;let u=me(s*me(t+r*c,i),i);if(u===Pt)return;let h=new kl(c,u),l=(a.x===h.r?0:2)|Number(a.y&ur);return n&&h.hasHighS()&&(h=h.normalizeS(),l^=1),{sig:h,recovery:l}}function Pl(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if(typeof e=="string"){if(e.length!==2*Tl)throw new Error("Expected 32 bytes of private key");t=aw(e)}else if(e instanceof Uint8Array){if(e.length!==Tl)throw new Error("Expected 32 bytes of private key");t=yo(e)}else throw new TypeError("Expected valid private key");if(!Bh(t))throw new Error("Expected private key: 0 < key < n");return t}function O3(e){return e instanceof or?(e.assertValidity(),e):or.fromHex(e)}function E7(e){if(e instanceof kl)return e.assertValidity(),e;try{return kl.fromDER(e)}catch{return kl.fromCompact(e)}}function See(e,t=!1){return or.fromPrivateKey(e).toRawBytes(t)}St.getPublicKey=See;function Eee(e,t,r,n=!1){return or.fromSignature(e,t,r).toRawBytes(n)}St.recoverPublicKey=Eee;function v7(e){let t=e instanceof Uint8Array,r=typeof e=="string",n=(t||r)&&e.length;return t?n===ow||n===sw:r?n===ow*2||n===sw*2:e instanceof or}function Iee(e,t,r=!1){if(v7(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!v7(t))throw new TypeError("getSharedSecret: second arg must be public key");let n=O3(t);return n.assertValidity(),n.multiply(Pl(e)).toRawBytes(r)}St.getSharedSecret=Iee;function I7(e){let t=e.length>Vs?e.slice(0,Vs):e;return yo(t)}function kee(e){let t=I7(e),r=me(t,Zt.n);return k7(r<Pt?t:r)}function k7(e){return _h(e)}function T7(e,t,r){if(e==null)throw new Error(`sign: expected valid message hash, not "${e}"`);let n=Aa(e),i=Pl(t),o=[k7(i),kee(n)];if(r!=null){r===!0&&(r=St.utils.randomBytes(Vs));let c=Aa(r);if(c.length!==Vs)throw new Error(`sign: Expected ${Vs} bytes of extra data`);o.push(c)}let s=Ku(...o),a=I7(n);return{seed:s,m:a,d:i}}function P7(e,t){let{sig:r,recovery:n}=e,{der:i,recovered:o}=Object.assign({canonical:!0,der:!0},t),s=i?r.toDERRawBytes():r.toCompactRawBytes();return o?[s,n]:s}async function Tee(e,t,r={}){let{seed:n,m:i,d:o}=T7(e,t,r.extraEntropy),s=new cw(A7,Tl);await s.reseed(n);let a;for(;!(a=S7(await s.generate(),i,o,r.canonical));)await s.reseed();return P7(a,r)}St.sign=Tee;function Pee(e,t,r={}){let{seed:n,m:i,d:o}=T7(e,t,r.extraEntropy),s=new cw(A7,Tl);s.reseedSync(n);let a;for(;!(a=S7(s.generateSync(),i,o,r.canonical));)s.reseedSync();return P7(a,r)}St.signSync=Pee;var _ee={strict:!0};function Bee(e,t,r,n=_ee){let i;try{i=E7(e),t=Aa(t)}catch{return!1}let{r:o,s}=i;if(n.strict&&i.hasHighS())return!1;let a=R3(t),c;try{c=O3(r)}catch{return!1}let{n:u}=Zt,h=Mh(s,u),l=me(a*h,u),g=me(o*h,u),x=or.BASE.multiplyAndAddUnsafe(c,l,g);return x?me(x.x,u)===o:!1}St.verify=Bee;function uw(e){return me(yo(e),Zt.n)}var Ch=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromHex(t){let r=Aa(t);if(r.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${r.length}`);let n=yo(r.subarray(0,32)),i=yo(r.subarray(32,64));return new e(n,i)}assertValidity(){let{r:t,s:r}=this;if(!iw(t)||!Bh(r))throw new Error("Invalid signature")}toHex(){return Vu(this.r)+Vu(this.s)}toRawBytes(){return qu(this.toHex())}};function Cee(e){return or.fromPrivateKey(e).toRawX()}var fw=class{constructor(t,r,n=St.utils.randomBytes()){if(t==null)throw new TypeError(`sign: Expected valid message, not "${t}"`);this.m=Aa(t);let{x:i,scalar:o}=this.getScalar(Pl(r));if(this.px=i,this.d=o,this.rand=Aa(n),this.rand.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(t){let r=or.fromPrivateKey(t),n=r.hasEvenY()?t:Zt.n-t;return{point:r,scalar:n,x:r.toRawX()}}initNonce(t,r){return _h(t^yo(r))}finalizeNonce(t){let r=me(yo(t),Zt.n);if(r===Pt)throw new Error("sign: Creation of signature failed. k is zero");let{point:n,x:i,scalar:o}=this.getScalar(r);return{R:n,rx:i,k:o}}finalizeSig(t,r,n,i){return new Ch(t.x,me(r+n*i,Zt.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){let{m:t,d:r,px:n,rand:i}=this,o=St.utils.taggedHash,s=this.initNonce(r,await o(Lu.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(await o(Lu.nonce,s,n,t)),h=uw(await o(Lu.challenge,c,n,t)),l=this.finalizeSig(a,u,h,r);return await C7(l,t,n)||this.error(),l}calcSync(){let{m:t,d:r,px:n,rand:i}=this,o=St.utils.taggedHashSync,s=this.initNonce(r,o(Lu.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(o(Lu.nonce,s,n,t)),h=uw(o(Lu.challenge,c,n,t)),l=this.finalizeSig(a,u,h,r);return M7(l,t,n)||this.error(),l}};async function Mee(e,t,r){return new fw(e,t,r).calc()}function Ree(e,t,r){return new fw(e,t,r).calcSync()}function _7(e,t,r){let n=e instanceof Ch,i=n?e:Ch.fromHex(e);return n&&i.assertValidity(),{...i,m:Aa(t),P:O3(r)}}function B7(e,t,r,n){let i=or.BASE.multiplyAndAddUnsafe(t,Pl(r),me(-n,Zt.n));return!(!i||!i.hasEvenY()||i.x!==e)}async function C7(e,t,r){try{let{r:n,s:i,m:o,P:s}=_7(e,t,r),a=uw(await St.utils.taggedHash(Lu.challenge,_h(n),s.toRawX(),o));return B7(n,s,i,a)}catch{return!1}}function M7(e,t,r){try{let{r:n,s:i,m:o,P:s}=_7(e,t,r),a=uw(St.utils.taggedHashSync(Lu.challenge,_h(n),s.toRawX(),o));return B7(n,s,i,a)}catch(n){if(n instanceof $y)throw n;return!1}}St.schnorr={Signature:Ch,getPublicKey:Cee,sign:Mee,verify:C7,signSync:Ree,verifySync:M7};or.BASE._setWindowSize(8);var po={node:mee,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Lu={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},nw={};St.utils={bytesToHex:Ph,hexToBytes:qu,concatBytes:Ku,mod:me,invert:Mh,isValidPrivateKey(e){try{return Pl(e),!0}catch{return!1}},_bigintTo32Bytes:_h,_normalizePrivateKey:Pl,hashToPrivateKey:e=>{e=Aa(e);let t=Tl+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");let r=me(yo(e),Zt.n-ur)+ur;return _h(r)},randomBytes:(e=32)=>{if(po.web)return po.web.getRandomValues(new Uint8Array(e));if(po.node){let{randomBytes:t}=po.node;return Uint8Array.from(t(e))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>St.utils.hashToPrivateKey(St.utils.randomBytes(Tl+8)),precompute(e=8,t=or.BASE){let r=t===or.BASE?t:new or(t.x,t.y);return r._setWindowSize(e),r.multiply(jy),r},sha256:async(...e)=>{if(po.web){let t=await po.web.subtle.digest("SHA-256",Ku(...e));return new Uint8Array(t)}else if(po.node){let{createHash:t}=po.node,r=t("sha256");return e.forEach(n=>r.update(n)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(po.web){let r=await po.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=Ku(...t),i=await po.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(po.node){let{createHmac:r}=po.node,n=r("sha256",e);return t.forEach(i=>n.update(i)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let r=nw[e];if(r===void 0){let n=await St.utils.sha256(Uint8Array.from(e,i=>i.charCodeAt(0)));r=Ku(n,n),nw[e]=r}return St.utils.sha256(r,...t)},taggedHashSync:(e,...t)=>{if(typeof Th!="function")throw new $y("sha256Sync is undefined, you need to set it");let r=nw[e];if(r===void 0){let n=Th(Uint8Array.from(e,i=>i.charCodeAt(0)));r=Ku(n,n),nw[e]=r}return Th(r,...t)},_JacobianPoint:Bi};Object.defineProperties(St.utils,{sha256Sync:{configurable:!1,get(){return Th},set(e){Th||(Th=e)}},hmacSha256Sync:{configurable:!1,get(){return Gy},set(e){Gy||(Gy=e)}}})});var _w=L(he=>{"use strict";p();y();Object.defineProperty(he,"__esModule",{value:!0});var Pe=hy(),Oee=WB(),Nee=iC(),Uee=Hb(),Dee=Os(),q3=ax(),U3=fC(),J7=Iy(),H3=c3(),I=bC(),Lee=VC(),Kee=t7(),Fee=n7(),R7=l7(),Vee=h7(),qee=N3();function am(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function c6(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var zu=c6(Nee),O7=am(Uee),jn=am(Dee),H=c6(J7),Hee=am(Lee),Wee=am(Kee),zee=am(Fee),Iw=c6(qee);zu.utils.sha512Sync=(...e)=>Oee.sha512(zu.utils.concatBytes(...e));var jee=zu.utils.randomPrivateKey,N7=()=>{let e=zu.utils.randomPrivateKey(),t=yw(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}},yw=zu.sync.getPublicKey;function U7(e){try{return zu.Point.fromHex(e,!0),!0}catch{return!1}}var u6=(e,t)=>zu.sync.sign(e,t.slice(0,32)),Gee=zu.sync.verify,dt=e=>Pe.Buffer.isBuffer(e)?e:e instanceof Uint8Array?Pe.Buffer.from(e.buffer,e.byteOffset,e.byteLength):Pe.Buffer.from(e),Qy=class{constructor(t){Object.assign(this,t)}encode(){return Pe.Buffer.from(U3.serialize(Zy,this))}static decode(t){return U3.deserialize(Zy,this,t)}static decodeUnchecked(t){return U3.deserializeUnchecked(Zy,this,t)}},W3=class extends Qy{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(r=>{this.enum=r})}},Zy=new Map,Z7,Q7=32,ka=32;function $ee(e){return e._bn!==void 0}var D7=1;Z7=Symbol.toStringTag;var ye=class e extends Qy{constructor(t){if(super({}),this._bn=void 0,$ee(t))this._bn=t._bn;else{if(typeof t=="string"){let r=jn.default.decode(t);if(r.length!=ka)throw new Error("Invalid public key input");this._bn=new O7.default(r)}else this._bn=new O7.default(t);if(this._bn.byteLength()>ka)throw new Error("Invalid public key input")}}static unique(){let t=new e(D7);return D7+=1,new e(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return jn.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){let t=this._bn.toArrayLike(Pe.Buffer);if(t.length===ka)return t;let r=Pe.Buffer.alloc(32);return t.copy(r,32-t.length),r}get[Z7](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,r,n){let i=Pe.Buffer.concat([t.toBuffer(),Pe.Buffer.from(r),n.toBuffer()]),o=q3.sha256(i);return new e(o)}static createProgramAddressSync(t,r){let n=Pe.Buffer.alloc(0);t.forEach(function(o){if(o.length>Q7)throw new TypeError("Max seed length exceeded");n=Pe.Buffer.concat([n,dt(o)])}),n=Pe.Buffer.concat([n,r.toBuffer(),Pe.Buffer.from("ProgramDerivedAddress")]);let i=q3.sha256(n);if(U7(i))throw new Error("Invalid seeds, address must fall off the curve");return new e(i)}static async createProgramAddress(t,r){return this.createProgramAddressSync(t,r)}static findProgramAddressSync(t,r){let n=255,i;for(;n!=0;){try{let o=t.concat(Pe.Buffer.from([n]));i=this.createProgramAddressSync(o,r)}catch(o){if(o instanceof TypeError)throw o;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,r){return this.findProgramAddressSync(t,r)}static isOnCurve(t){let r=new e(t);return U7(r.toBytes())}};ye.default=new ye("11111111111111111111111111111111");Zy.set(ye,{kind:"struct",fields:[["_bn","u256"]]});var z3=class{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){let r=dt(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=r.slice(32,64),this._secretKey=r.slice(0,32)}else this._secretKey=dt(jee()),this._publicKey=dt(yw(this._secretKey))}get publicKey(){return new ye(this._publicKey)}get secretKey(){return Pe.Buffer.concat([this._secretKey,this._publicKey],64)}},Yee=new ye("BPFLoader1111111111111111111111111111111111"),Wu=1232,kw=127,Xy=64,em=class extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}};Object.defineProperty(em.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var tm=class extends Error{constructor(t,r){super(`Transaction was not confirmed in ${r.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}};Object.defineProperty(tm.prototype,"name",{value:"TransactionExpiredTimeoutError"});var Hu=class extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}};Object.defineProperty(Hu.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var Cl=class{constructor(t,r){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=r}keySegments(){let t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(let r of this.keySegments()){if(t<r.length)return r[t];t-=r.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");let n=new Map;this.keySegments().flat().forEach((o,s)=>{n.set(o.toBase58(),s)});let i=o=>{let s=n.get(o.toBase58());if(s===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return s};return t.map(o=>({programIdIndex:i(o.programId),accountKeyIndexes:o.keys.map(s=>i(s.pubkey)),data:o.data}))}},bt=(e="publicKey")=>H.blob(32,e),Jee=(e="signature")=>H.blob(64,e),Bl=(e="string")=>{let t=H.struct([H.u32("length"),H.u32("lengthPadding"),H.blob(H.offset(H.u32(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t),i=t;return i.decode=(o,s)=>r(o,s).chars.toString(),i.encode=(o,s,a)=>{let c={chars:Pe.Buffer.from(o,"utf8")};return n(c,s,a)},i.alloc=o=>H.u32().span+H.u32().span+Pe.Buffer.from(o,"utf8").length,i},Zee=(e="authorized")=>H.struct([bt("staker"),bt("withdrawer")],e),Qee=(e="lockup")=>H.struct([H.ns64("unixTimestamp"),H.ns64("epoch"),bt("custodian")],e),Xee=(e="voteInit")=>H.struct([bt("nodePubkey"),bt("authorizedVoter"),bt("authorizedWithdrawer"),H.u8("commission")],e),ete=(e="voteAuthorizeWithSeedArgs")=>H.struct([H.u32("voteAuthorizationType"),bt("currentAuthorityDerivedKeyOwnerPubkey"),Bl("currentAuthorityDerivedKeySeed"),bt("newAuthorized")],e);function X7(e,t){let r=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(t[i.property]);if("count"in i&&"elementLayout"in i){let o=t[i.property];if(Array.isArray(o))return o.length*r(i.elementLayout)}else if("fields"in i)return X7({layout:i},t[i.property]);return 0},n=0;return e.layout.fields.forEach(i=>{n+=r(i)}),n}function Yi(e){let t=0,r=0;for(;;){let n=e.shift();if(t|=(n&127)<<r*7,r+=1,!(n&128))break}return t}function mo(e,t){let r=t;for(;;){let n=r&127;if(r>>=7,r==0){e.push(n);break}else n|=128,e.push(n)}}function Dt(e,t){if(!e)throw new Error(t||"Assertion failed")}var mw=class e{constructor(t,r){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=r}static compile(t,r){let n=new Map,i=s=>{let a=s.toBase58(),c=n.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,c)),c},o=i(r);o.isSigner=!0,o.isWritable=!0;for(let s of t){i(s.programId).isInvoked=!0;for(let a of s.keys){let c=i(a.pubkey);c.isSigner||=a.isSigner,c.isWritable||=a.isWritable}}return new e(r,n)}getMessageComponents(){let t=[...this.keyMetaMap.entries()];Dt(t.length<=256,"Max static account keys length exceeded");let r=t.filter(([,c])=>c.isSigner&&c.isWritable),n=t.filter(([,c])=>c.isSigner&&!c.isWritable),i=t.filter(([,c])=>!c.isSigner&&c.isWritable),o=t.filter(([,c])=>!c.isSigner&&!c.isWritable),s={numRequiredSignatures:r.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:o.length};{Dt(r.length>0,"Expected at least one writable signer key");let[c]=r[0];Dt(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}let a=[...r.map(([c])=>new ye(c)),...n.map(([c])=>new ye(c)),...i.map(([c])=>new ye(c)),...o.map(([c])=>new ye(c))];return[s,a]}extractTableLookup(t){let[r,n]=this.drainKeysFoundInLookupTable(t.state.addresses,s=>!s.isSigner&&!s.isInvoked&&s.isWritable),[i,o]=this.drainKeysFoundInLookupTable(t.state.addresses,s=>!s.isSigner&&!s.isInvoked&&!s.isWritable);if(!(r.length===0&&i.length===0))return[{accountKey:t.key,writableIndexes:r,readonlyIndexes:i},{writable:n,readonly:o}]}drainKeysFoundInLookupTable(t,r){let n=new Array,i=new Array;for(let[o,s]of this.keyMetaMap.entries())if(r(s)){let a=new ye(o),c=t.findIndex(u=>u.equals(a));c>=0&&(Dt(c<256,"Max lookup table index exceeded"),n.push(c),i.push(a),this.keyMetaMap.delete(o))}return[n,i]}},e9="Reached end of buffer unexpectedly";function Ea(e){if(e.length===0)throw new Error(e9);return e.shift()}function Ji(e,...t){let[r]=t;if(t.length===2?r+(t[1]??0)>e.length:r>=e.length)throw new Error(e9);return e.splice(...t)}var Ta=class e{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(r=>new ye(r)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(r=>this.indexToProgramIds.set(r.programIdIndex,this.accountKeys[r.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:jn.default.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Cl(this.staticAccountKeys)}static compile(t){let r=mw.compile(t.instructions,t.payerKey),[n,i]=r.getMessageComponents(),s=new Cl(i).compileInstructions(t.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:jn.default.encode(a.data)}));return new e({header:n,accountKeys:i,recentBlockhash:t.recentBlockhash,instructions:s})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let r=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){let n=t-r,o=this.accountKeys.length-r-this.header.numReadonlyUnsignedAccounts;return n<o}else{let n=r-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,r)=>!this.isProgramId(r))}serialize(){let t=this.accountKeys.length,r=[];mo(r,t);let n=this.instructions.map(l=>{let{accounts:g,programIdIndex:x}=l,A=Array.from(jn.default.decode(l.data)),E=[];mo(E,g.length);let B=[];return mo(B,A.length),{programIdIndex:x,keyIndicesCount:Pe.Buffer.from(E),keyIndices:g,dataLength:Pe.Buffer.from(B),data:A}}),i=[];mo(i,n.length);let o=Pe.Buffer.alloc(Wu);Pe.Buffer.from(i).copy(o);let s=i.length;n.forEach(l=>{let x=H.struct([H.u8("programIdIndex"),H.blob(l.keyIndicesCount.length,"keyIndicesCount"),H.seq(H.u8("keyIndex"),l.keyIndices.length,"keyIndices"),H.blob(l.dataLength.length,"dataLength"),H.seq(H.u8("userdatum"),l.data.length,"data")]).encode(l,o,s);s+=x}),o=o.slice(0,s);let a=H.struct([H.blob(1,"numRequiredSignatures"),H.blob(1,"numReadonlySignedAccounts"),H.blob(1,"numReadonlyUnsignedAccounts"),H.blob(r.length,"keyCount"),H.seq(bt("key"),t,"keys"),bt("recentBlockhash")]),c={numRequiredSignatures:Pe.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Pe.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Pe.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Pe.Buffer.from(r),keys:this.accountKeys.map(l=>dt(l.toBytes())),recentBlockhash:jn.default.decode(this.recentBlockhash)},u=Pe.Buffer.alloc(2048),h=a.encode(c,u);return o.copy(u,h),u.slice(0,h+o.length)}static from(t){let r=[...t],n=Ea(r);if(n!==(n&kw))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let i=Ea(r),o=Ea(r),s=Yi(r),a=[];for(let g=0;g<s;g++){let x=Ji(r,0,ka);a.push(new ye(Pe.Buffer.from(x)))}let c=Ji(r,0,ka),u=Yi(r),h=[];for(let g=0;g<u;g++){let x=Ea(r),A=Yi(r),E=Ji(r,0,A),B=Yi(r),M=Ji(r,0,B),N=jn.default.encode(Pe.Buffer.from(M));h.push({programIdIndex:x,accounts:E,data:N})}let l={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:o},recentBlockhash:jn.default.encode(Pe.Buffer.from(c)),accountKeys:a,instructions:h};return new e(l)}},Rh=class e{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(let r of this.addressTableLookups)t+=r.readonlyIndexes.length+r.writableIndexes.length;return t}getAccountKeys(t){let r;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");r=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)r=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Cl(this.staticAccountKeys,r)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let r=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){let i=t-n,o=this.addressTableLookups.reduce((s,a)=>s+a.writableIndexes.length,0);return i<o}else if(t>=this.header.numRequiredSignatures){let i=t-r,s=n-r-this.header.numReadonlyUnsignedAccounts;return i<s}else{let i=r-this.header.numReadonlySignedAccounts;return t<i}}resolveAddressTableLookups(t){let r={writable:[],readonly:[]};for(let n of this.addressTableLookups){let i=t.find(o=>o.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(let o of n.writableIndexes)if(o<i.state.addresses.length)r.writable.push(i.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${n.accountKey.toBase58()}`);for(let o of n.readonlyIndexes)if(o<i.state.addresses.length)r.readonly.push(i.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${n.accountKey.toBase58()}`)}return r}static compile(t){let r=mw.compile(t.instructions,t.payerKey),n=new Array,i={writable:new Array,readonly:new Array},o=t.addressLookupTableAccounts||[];for(let h of o){let l=r.extractTableLookup(h);if(l!==void 0){let[g,{writable:x,readonly:A}]=l;n.push(g),i.writable.push(...x),i.readonly.push(...A)}}let[s,a]=r.getMessageComponents(),u=new Cl(a,i).compileInstructions(t.instructions);return new e({header:s,staticAccountKeys:a,recentBlockhash:t.recentBlockhash,compiledInstructions:u,addressTableLookups:n})}serialize(){let t=Array();mo(t,this.staticAccountKeys.length);let r=this.serializeInstructions(),n=Array();mo(n,this.compiledInstructions.length);let i=this.serializeAddressTableLookups(),o=Array();mo(o,this.addressTableLookups.length);let s=H.struct([H.u8("prefix"),H.struct([H.u8("numRequiredSignatures"),H.u8("numReadonlySignedAccounts"),H.u8("numReadonlyUnsignedAccounts")],"header"),H.blob(t.length,"staticAccountKeysLength"),H.seq(bt(),this.staticAccountKeys.length,"staticAccountKeys"),bt("recentBlockhash"),H.blob(n.length,"instructionsLength"),H.blob(r.length,"serializedInstructions"),H.blob(o.length,"addressTableLookupsLength"),H.blob(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(Wu),u=s.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(h=>h.toBytes()),recentBlockhash:jn.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:r,addressTableLookupsLength:new Uint8Array(o),serializedAddressTableLookups:i},a);return a.slice(0,u)}serializeInstructions(){let t=0,r=new Uint8Array(Wu);for(let n of this.compiledInstructions){let i=Array();mo(i,n.accountKeyIndexes.length);let o=Array();mo(o,n.data.length);let s=H.struct([H.u8("programIdIndex"),H.blob(i.length,"encodedAccountKeyIndexesLength"),H.seq(H.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),H.blob(o.length,"encodedDataLength"),H.blob(n.data.length,"data")]);t+=s.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(o),data:n.data},r,t)}return r.slice(0,t)}serializeAddressTableLookups(){let t=0,r=new Uint8Array(Wu);for(let n of this.addressTableLookups){let i=Array();mo(i,n.writableIndexes.length);let o=Array();mo(o,n.readonlyIndexes.length);let s=H.struct([bt("accountKey"),H.blob(i.length,"encodedWritableIndexesLength"),H.seq(H.u8(),n.writableIndexes.length,"writableIndexes"),H.blob(o.length,"encodedReadonlyIndexesLength"),H.seq(H.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=s.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(o),readonlyIndexes:n.readonlyIndexes},r,t)}return r.slice(0,t)}static deserialize(t){let r=[...t],n=Ea(r),i=n&kw;Dt(n!==i,"Expected versioned message but received legacy message");let o=i;Dt(o===0,`Expected versioned message with version 0 but found version ${o}`);let s={numRequiredSignatures:Ea(r),numReadonlySignedAccounts:Ea(r),numReadonlyUnsignedAccounts:Ea(r)},a=[],c=Yi(r);for(let A=0;A<c;A++)a.push(new ye(Ji(r,0,ka)));let u=jn.default.encode(Ji(r,0,ka)),h=Yi(r),l=[];for(let A=0;A<h;A++){let E=Ea(r),B=Yi(r),M=Ji(r,0,B),N=Yi(r),R=new Uint8Array(Ji(r,0,N));l.push({programIdIndex:E,accountKeyIndexes:M,data:R})}let g=Yi(r),x=[];for(let A=0;A<g;A++){let E=new ye(Ji(r,0,ka)),B=Yi(r),M=Ji(r,0,B),N=Yi(r),R=Ji(r,0,N);x.push({accountKey:E,writableIndexes:M,readonlyIndexes:R})}return new e({header:s,staticAccountKeys:a,recentBlockhash:u,compiledInstructions:l,addressTableLookups:x})}},f6={deserializeMessageVersion(e){let t=e[0],r=t&kw;return r===t?"legacy":r},deserialize:e=>{let t=f6.deserializeMessageVersion(e);if(t==="legacy")return Ta.from(e);if(t===0)return Rh.deserialize(e);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};he.TransactionStatus=void 0;(function(e){e[e.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",e[e.PROCESSED=1]="PROCESSED",e[e.TIMED_OUT=2]="TIMED_OUT",e[e.NONCE_INVALID=3]="NONCE_INVALID"})(he.TransactionStatus||(he.TransactionStatus={}));var tte=Pe.Buffer.alloc(Xy).fill(0),$t=class{constructor(t){this.keys=void 0,this.programId=void 0,this.data=Pe.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:r,isWritable:n})=>({pubkey:t.toJSON(),isSigner:r,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}},Gt=class e{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){let{minContextSlot:r,nonceInfo:n}=t;this.minNonceContextSlot=r,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){let{blockhash:r,lastValidBlockHeight:n}=t;this.recentBlockhash=r,this.lastValidBlockHeight=n}else{let{recentBlockhash:r,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=r}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(r=>{"instructions"in r?this.instructions=this.instructions.concat(r.instructions):"data"in r&&"programId"in r&&"keys"in r?this.instructions.push(r):this.instructions.push(new $t(r))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,r;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?r=[this.nonceInfo.nonceInstruction,...this.instructions]:r=this.instructions):(t=this.recentBlockhash,r=this.instructions),!t)throw new Error("Transaction recentBlockhash required");r.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let E=0;E<r.length;E++)if(r[E].programId===void 0)throw new Error(`Transaction instruction index ${E} has undefined program id`);let i=[],o=[];r.forEach(E=>{E.keys.forEach(M=>{o.push({...M})});let B=E.programId.toString();i.includes(B)||i.push(B)}),i.forEach(E=>{o.push({pubkey:new ye(E),isSigner:!1,isWritable:!1})});let s=[];o.forEach(E=>{let B=E.pubkey.toString(),M=s.findIndex(N=>N.pubkey.toString()===B);M>-1?(s[M].isWritable=s[M].isWritable||E.isWritable,s[M].isSigner=s[M].isSigner||E.isSigner):s.push(E)}),s.sort(function(E,B){return E.isSigner!==B.isSigner?E.isSigner?-1:1:E.isWritable!==B.isWritable?E.isWritable?-1:1:E.pubkey.toBase58().localeCompare(B.pubkey.toBase58())});let a=s.findIndex(E=>E.pubkey.equals(n));if(a>-1){let[E]=s.splice(a,1);E.isSigner=!0,E.isWritable=!0,s.unshift(E)}else s.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(let E of this.signatures){let B=s.findIndex(M=>M.pubkey.equals(E.publicKey));if(B>-1)s[B].isSigner||(s[B].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${E.publicKey.toString()}`)}let c=0,u=0,h=0,l=[],g=[];s.forEach(({pubkey:E,isSigner:B,isWritable:M})=>{B?(l.push(E.toString()),c+=1,M||(u+=1)):(g.push(E.toString()),M||(h+=1))});let x=l.concat(g),A=r.map(E=>{let{data:B,programId:M}=E;return{programIdIndex:x.indexOf(M.toString()),accounts:E.keys.map(N=>x.indexOf(N.pubkey.toString())),data:jn.default.encode(B)}});return A.forEach(E=>{Dt(E.programIdIndex>=0),E.accounts.forEach(B=>Dt(B>=0))}),new Ta({header:{numRequiredSignatures:c,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:h},accountKeys:x,recentBlockhash:t,instructions:A})}_compile(){let t=this.compileMessage(),r=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===r.length&&this.signatures.every((i,o)=>r[o].equals(i.publicKey))||(this.signatures=r.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");let r=new Set;this.signatures=t.filter(n=>{let i=n.toString();return r.has(i)?!1:(r.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");let r=new Set,n=[];for(let o of t){let s=o.publicKey.toString();r.has(s)||(r.add(s),n.push(o))}this.signatures=n.map(o=>({signature:null,publicKey:o.publicKey}));let i=this._compile();this._partialSign(i,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");let r=new Set,n=[];for(let o of t){let s=o.publicKey.toString();r.has(s)||(r.add(s),n.push(o))}let i=this._compile();this._partialSign(i,...n)}_partialSign(t,...r){let n=t.serialize();r.forEach(i=>{let o=u6(n,i.secretKey);this._addSignature(i.publicKey,dt(o))})}addSignature(t,r){this._compile(),this._addSignature(t,r)}_addSignature(t,r){Dt(r.length===64);let n=this.signatures.findIndex(i=>t.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=Pe.Buffer.from(r)}verifySignatures(t){return this._verifySignatures(this.serializeMessage(),t===void 0?!0:t)}_verifySignatures(t,r){for(let{signature:n,publicKey:i}of this.signatures)if(n===null){if(r)return!1}else if(!Gee(n,t,i.toBytes()))return!1;return!0}serialize(t){let{requireAllSignatures:r,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),i=this.serializeMessage();if(n&&!this._verifySignatures(i,r))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(t){let{signatures:r}=this,n=[];mo(n,r.length);let i=n.length+r.length*64+t.length,o=Pe.Buffer.alloc(i);return Dt(r.length<256),Pe.Buffer.from(n).copy(o,0),r.forEach(({signature:s},a)=>{s!==null&&(Dt(s.length===64,"signature has invalid length"),Pe.Buffer.from(s).copy(o,n.length+a*64))}),t.copy(o,n.length+r.length*64),Dt(o.length<=Wu,`Transaction too large: ${o.length} > ${Wu}`),o}get keys(){return Dt(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Dt(this.instructions.length===1),this.instructions[0].programId}get data(){return Dt(this.instructions.length===1),this.instructions[0].data}static from(t){let r=[...t],n=Yi(r),i=[];for(let o=0;o<n;o++){let s=Ji(r,0,Xy);i.push(jn.default.encode(Pe.Buffer.from(s)))}return e.populate(Ta.from(r),i)}static populate(t,r=[]){let n=new e;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),r.forEach((i,o)=>{let s={signature:i==jn.default.encode(tte)?null:jn.default.decode(i),publicKey:t.accountKeys[o]};n.signatures.push(s)}),t.instructions.forEach(i=>{let o=i.accounts.map(s=>{let a=t.accountKeys[s];return{pubkey:a,isSigner:n.signatures.some(c=>c.publicKey.toString()===a.toString())||t.isAccountSigner(s),isWritable:t.isAccountWritable(s)}});n.instructions.push(new $t({keys:o,programId:t.accountKeys[i.programIdIndex],data:jn.default.decode(i.data)}))}),n._message=t,n._json=n.toJSON(),n}},j3=class e{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,r){let{header:n,compiledInstructions:i,recentBlockhash:o}=t,{numRequiredSignatures:s,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:c}=n,u=s-a;Dt(u>0,"Message header is invalid");let h=t.staticAccountKeys.length-s-c;Dt(h>=0,"Message header is invalid");let l=t.getAccountKeys(r),g=l.get(0);if(g===void 0)throw new Error("Failed to decompile message because no account keys were found");let x=[];for(let A of i){let E=[];for(let M of A.accountKeyIndexes){let N=l.get(M);if(N===void 0)throw new Error(`Failed to find key for account key index ${M}`);let R=M<s,V;R?V=M<u:M<l.staticAccountKeys.length?V=M-s<h:V=M-l.staticAccountKeys.length<l.accountKeysFromLookups.writable.length,E.push({pubkey:N,isSigner:M<n.numRequiredSignatures,isWritable:V})}let B=l.get(A.programIdIndex);if(B===void 0)throw new Error(`Failed to find program id for program id index ${A.programIdIndex}`);x.push(new $t({programId:B,data:dt(A.data),keys:E}))}return new e({payerKey:g,instructions:x,recentBlockhash:o})}compileToLegacyMessage(){return Ta.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return Rh.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}},G3=class e{get version(){return this.message.version}constructor(t,r){if(this.signatures=void 0,this.message=void 0,r!==void 0)Dt(r.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=r;else{let n=[];for(let i=0;i<t.header.numRequiredSignatures;i++)n.push(new Uint8Array(Xy));this.signatures=n}this.message=t}serialize(){let t=this.message.serialize(),r=Array();mo(r,this.signatures.length);let n=H.struct([H.blob(r.length,"encodedSignaturesLength"),H.seq(Jee(),this.signatures.length,"signatures"),H.blob(t.length,"serializedMessage")]),i=new Uint8Array(2048),o=n.encode({encodedSignaturesLength:new Uint8Array(r),signatures:this.signatures,serializedMessage:t},i);return i.slice(0,o)}static deserialize(t){let r=[...t],n=[],i=Yi(r);for(let s=0;s<i;s++)n.push(new Uint8Array(Ji(r,0,Xy)));let o=f6.deserialize(new Uint8Array(r));return new e(o,n)}sign(t){let r=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let i of t){let o=n.findIndex(s=>s.equals(i.publicKey));Dt(o>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[o]=u6(r,i.secretKey)}}addSignature(t,r){Dt(r.byteLength===64,"Signature must be 64 bytes long");let i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(o=>o.equals(t));Dt(i>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=r}},Sa=new ye("SysvarC1ock11111111111111111111111111111111"),rte=new ye("SysvarEpochSchedu1e111111111111111111111111"),nte=new ye("Sysvar1nstructions1111111111111111111111111"),dw=new ye("SysvarRecentB1ockHashes11111111111111111111"),Oh=new ye("SysvarRent111111111111111111111111111111111"),ite=new ye("SysvarRewards111111111111111111111111111111"),ote=new ye("SysvarS1otHashes111111111111111111111111111"),ste=new ye("SysvarS1otHistory11111111111111111111111111"),hw=new ye("SysvarStakeHistory1111111111111111111111111");async function pw(e,t,r,n){let i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},o=await e.sendTransaction(t,r,i),s;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)s=(await e.confirmTransaction({abortSignal:n?.abortSignal,signature:o,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},n&&n.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){let{nonceInstruction:a}=t.nonceInfo,c=a.keys[0].pubkey;s=(await e.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:c,nonceValue:t.nonceInfo.nonce,signature:o},n&&n.commitment)).value}else n?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),s=(await e.confirmTransaction(o,n&&n.commitment)).value;if(s.err)throw new Error(`Transaction ${o} failed (${JSON.stringify(s)})`);return o}function _l(e){return new Promise(t=>setTimeout(t,e))}function Rt(e,t){let r=e.layout.span>=0?e.layout.span:X7(e,t),n=Pe.Buffer.alloc(r),i=Object.assign({instruction:e.index},t);return e.layout.encode(i,n),n}function Wt(e,t){let r;try{r=e.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(r.instruction!==e.index)throw new Error(`invalid instruction; instruction index mismatch ${r.instruction} != ${e.index}`);return r}var t9=H.nu64("lamportsPerSignature"),r9=H.struct([H.u32("version"),H.u32("state"),bt("authorizedPubkey"),bt("nonce"),H.struct([t9],"feeCalculator")]),$3=r9.span,gw=class e{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){let r=r9.decode(dt(t),0);return new e({authorizedPubkey:new ye(r.authorizedPubkey),nonce:new ye(r.nonce).toString(),feeCalculator:r.feeCalculator})}},ate=e=>{let t=e.decode.bind(e),r=e.encode.bind(e);return{decode:t,encode:r}},cte=e=>t=>{let r=J7.blob(e,t),{encode:n,decode:i}=ate(r),o=r;return o.decode=(s,a)=>{let c=i(s,a);return H3.toBigIntLE(Pe.Buffer.from(c))},o.encode=(s,a,c)=>{let u=H3.toBufferLE(s,e);return n(u,a,c)},o},Nh=cte(8),Y3=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=H.u32("instruction").decode(t.data),i;for(let[o,s]of Object.entries(sr))if(s.index==n){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{lamports:r,space:n,programId:i}=Wt(sr.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:r,space:n,programId:new ye(i)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{lamports:r}=Wt(sr.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:r}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:r,seed:n,programId:i}=Wt(sr.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:r,seed:n,programId:new ye(i)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{space:r}=Wt(sr.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:r}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{base:r,seed:n,space:i,programId:o}=Wt(sr.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new ye(r),seed:n,space:i,programId:new ye(o)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{programId:r}=Wt(sr.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new ye(r)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{base:r,seed:n,programId:i}=Wt(sr.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new ye(r),seed:n,programId:new ye(i)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{base:r,seed:n,lamports:i,space:o,programId:s}=Wt(sr.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new ye(r),seed:n,lamports:i,space:o,programId:new ye(s)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{authorized:r}=Wt(sr.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new ye(r)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Wt(sr.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);let{lamports:r}=Wt(sr.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:r}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{authorized:r}=Wt(sr.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new ye(r)}}static checkProgramId(t){if(!t.equals(pi.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,r){if(t.length<r)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${r}`)}},sr=Object.freeze({Create:{index:0,layout:H.struct([H.u32("instruction"),H.ns64("lamports"),H.ns64("space"),bt("programId")])},Assign:{index:1,layout:H.struct([H.u32("instruction"),bt("programId")])},Transfer:{index:2,layout:H.struct([H.u32("instruction"),Nh("lamports")])},CreateWithSeed:{index:3,layout:H.struct([H.u32("instruction"),bt("base"),Bl("seed"),H.ns64("lamports"),H.ns64("space"),bt("programId")])},AdvanceNonceAccount:{index:4,layout:H.struct([H.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:H.struct([H.u32("instruction"),H.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:H.struct([H.u32("instruction"),bt("authorized")])},AuthorizeNonceAccount:{index:7,layout:H.struct([H.u32("instruction"),bt("authorized")])},Allocate:{index:8,layout:H.struct([H.u32("instruction"),H.ns64("space")])},AllocateWithSeed:{index:9,layout:H.struct([H.u32("instruction"),bt("base"),Bl("seed"),H.ns64("space"),bt("programId")])},AssignWithSeed:{index:10,layout:H.struct([H.u32("instruction"),bt("base"),Bl("seed"),bt("programId")])},TransferWithSeed:{index:11,layout:H.struct([H.u32("instruction"),Nh("lamports"),Bl("seed"),bt("programId")])},UpgradeNonceAccount:{index:12,layout:H.struct([H.u32("instruction")])}}),pi=class e{constructor(){}static createAccount(t){let r=sr.Create,n=Rt(r,{lamports:t.lamports,space:t.space,programId:dt(t.programId.toBuffer())});return new $t({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(t){let r,n;if("basePubkey"in t){let i=sr.TransferWithSeed;r=Rt(i,{lamports:BigInt(t.lamports),seed:t.seed,programId:dt(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{let i=sr.Transfer;r=Rt(i,{lamports:BigInt(t.lamports)}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new $t({keys:n,programId:this.programId,data:r})}static assign(t){let r,n;if("basePubkey"in t){let i=sr.AssignWithSeed;r=Rt(i,{base:dt(t.basePubkey.toBuffer()),seed:t.seed,programId:dt(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{let i=sr.Assign;r=Rt(i,{programId:dt(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new $t({keys:n,programId:this.programId,data:r})}static createAccountWithSeed(t){let r=sr.CreateWithSeed,n=Rt(r,{base:dt(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:dt(t.programId.toBuffer())}),i=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey!=t.fromPubkey&&i.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new $t({keys:i,programId:this.programId,data:n})}static createNonceAccount(t){let r=new Gt;"basePubkey"in t&&"seed"in t?r.add(e.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:$3,programId:this.programId})):r.add(e.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:$3,programId:this.programId}));let n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return r.add(this.nonceInitialize(n)),r}static nonceInitialize(t){let r=sr.InitializeNonceAccount,n=Rt(r,{authorized:dt(t.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:dw,isSigner:!1,isWritable:!1},{pubkey:Oh,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new $t(i)}static nonceAdvance(t){let r=sr.AdvanceNonceAccount,n=Rt(r),i={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:dw,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new $t(i)}static nonceWithdraw(t){let r=sr.WithdrawNonceAccount,n=Rt(r,{lamports:t.lamports});return new $t({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:dw,isSigner:!1,isWritable:!1},{pubkey:Oh,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(t){let r=sr.AuthorizeNonceAccount,n=Rt(r,{authorized:dt(t.newAuthorizedPubkey.toBuffer())});return new $t({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(t){let r,n;if("basePubkey"in t){let i=sr.AllocateWithSeed;r=Rt(i,{base:dt(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:dt(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{let i=sr.Allocate;r=Rt(i,{space:t.space}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new $t({keys:n,programId:this.programId,data:r})}};pi.programId=new ye("11111111111111111111111111111111");var ute=Wu-300,Uh=class e{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/e.chunkSize)+1+1)}static async load(t,r,n,i,o){{let l=await t.getMinimumBalanceForRentExemption(o.length),g=await t.getAccountInfo(n.publicKey,"confirmed"),x=null;if(g!==null){if(g.executable)return console.error("Program load failed, account is already executable"),!1;g.data.length!==o.length&&(x=x||new Gt,x.add(pi.allocate({accountPubkey:n.publicKey,space:o.length}))),g.owner.equals(i)||(x=x||new Gt,x.add(pi.assign({accountPubkey:n.publicKey,programId:i}))),g.lamports<l&&(x=x||new Gt,x.add(pi.transfer({fromPubkey:r.publicKey,toPubkey:n.publicKey,lamports:l-g.lamports})))}else x=new Gt().add(pi.createAccount({fromPubkey:r.publicKey,newAccountPubkey:n.publicKey,lamports:l>0?l:1,space:o.length,programId:i}));x!==null&&await pw(t,x,[r,n],{commitment:"confirmed"})}let s=H.struct([H.u32("instruction"),H.u32("offset"),H.u32("bytesLength"),H.u32("bytesLengthPadding"),H.seq(H.u8("byte"),H.offset(H.u32(),-8),"bytes")]),a=e.chunkSize,c=0,u=o,h=[];for(;u.length>0;){let l=u.slice(0,a),g=Pe.Buffer.alloc(a+16);s.encode({instruction:0,offset:c,bytes:l,bytesLength:0,bytesLengthPadding:0},g);let x=new Gt().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:g});h.push(pw(t,x,[r,n],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await _l(1e3/4),c+=a,u=u.slice(a)}await Promise.all(h);{let l=H.struct([H.u32("instruction")]),g=Pe.Buffer.alloc(l.span);l.encode({instruction:1},g);let x=new Gt().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:Oh,isSigner:!1,isWritable:!1}],programId:i,data:g});await pw(t,x,[r,n],{commitment:"confirmed"})}return!0}};Uh.chunkSize=ute;var fte=new ye("BPFLoader2111111111111111111111111111111111"),J3=class{static getMinNumSignatures(t){return Uh.getMinNumSignatures(t)}static load(t,r,n,i,o){return Uh.load(t,r,n,o,i)}},lte=Object.prototype.toString,dte=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};function Jy(e,t){var r,n,i,o,s,a,c;if(e===!0)return"true";if(e===!1)return"false";switch(typeof e){case"object":if(e===null)return null;if(e.toJSON&&typeof e.toJSON=="function")return Jy(e.toJSON(),t);if(c=lte.call(e),c==="[object Array]"){for(i="[",n=e.length-1,r=0;r<n;r++)i+=Jy(e[r],!0)+",";return n>-1&&(i+=Jy(e[r],!0)),i+"]"}else if(c==="[object Object]"){for(o=dte(e).sort(),n=o.length,i="",r=0;r<n;)s=o[r],a=Jy(e[s],!1),a!==void 0&&(i&&(i+=","),i+=JSON.stringify(s)+":"+a),r++;return"{"+i+"}"}else return JSON.stringify(e);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(e);default:return isFinite(e)?e:null}}var hte=function(e){var t=Jy(e,!1);if(t!==void 0)return""+t},pte=hte,Yy=32;function D3(e){let t=0;for(;e>1;)e/=2,t++;return t}function yte(e){return e===0?1:(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e|=e>>32,e+1)}var bw=class{constructor(t,r,n,i,o){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=r,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=o}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){let r=D3(yte(t+Yy+1))-D3(Yy)-1,n=this.getSlotsInEpoch(r),i=t-(n-Yy);return[r,i]}else{let r=t-this.firstNormalSlot,n=Math.floor(r/this.slotsPerEpoch),i=this.firstNormalEpoch+n,o=r%this.slotsPerEpoch;return[i,o]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Yy:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+D3(Yy)):this.slotsPerEpoch}},rm=class extends Error{constructor(t,r){super(t),this.logs=void 0,this.logs=r}},mte={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016},we=class extends Error{constructor({code:t,message:r,data:n},i){super(i!=null?`${i}: ${r}`:r),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}},gte=globalThis.fetch,Z3=class extends Wee.default{constructor(t,r,n){let i=o=>{let s=zee.default(o,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...r});return"socket"in s?this.underlyingSocket=s.socket:this.underlyingSocket=s,s};super(i,t,r,n),this.underlyingSocket=void 0}call(...t){let r=this.underlyingSocket?.readyState;return r===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}notify(...t){let r=this.underlyingSocket?.readyState;return r===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}},bte=160,xte=64,wte=bte/xte,vte=1e3/wte;function Ate(e,t){let r;try{r=e.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(r.typeIndex!==e.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${e.index}`);return r}var L7=56,nm=class{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){let t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){let r=Ate(Ste,t),n=t.length-L7;Dt(n>=0,"lookup table is invalid"),Dt(n%32===0,"lookup table is invalid");let i=n/32,{addresses:o}=H.struct([H.seq(bt(),i,"addresses")]).decode(t.slice(L7));return{deactivationSlot:r.deactivationSlot,lastExtendedSlot:r.lastExtendedSlot,lastExtendedSlotStartIndex:r.lastExtendedStartIndex,authority:r.authority.length!==0?new ye(r.authority[0]):void 0,addresses:o.map(s=>new ye(s))}}},Ste={index:1,layout:H.struct([H.u32("typeIndex"),Nh("deactivationSlot"),H.nu64("lastExtendedSlot"),H.u8("lastExtendedStartIndex"),H.u8(),H.seq(bt(),H.offset(H.u8(),-1),"authority")])},Ete=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Ite(e){let t=e.match(Ete);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${e}\``);let[r,n,i,o]=t,s=e.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),c=a==null?"":`:${a+1}`;return`${s}//${n}${c}${o}`}var tn=I.coerce(I.instance(ye),I.string(),e=>new ye(e)),n9=I.tuple([I.string(),I.literal("base64")]),l6=I.coerce(I.instance(Pe.Buffer),n9,e=>Pe.Buffer.from(e[0],"base64")),i9=30*1e3;function kte(e){if(/^https?:/.test(e)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return e}function Mr(e){let t,r;if(typeof e=="string")t=e;else if(e){let{commitment:n,...i}=e;t=n,r=i}return{commitment:t,config:r}}function o9(e){return I.union([I.type({jsonrpc:I.literal("2.0"),id:I.string(),result:e}),I.type({jsonrpc:I.literal("2.0"),id:I.string(),error:I.type({code:I.unknown(),message:I.string(),data:I.optional(I.any())})})])}var Tte=o9(I.unknown());function pt(e){return I.coerce(o9(e),Tte,t=>"error"in t?t:{...t,result:I.create(t.result,e)})}function en(e){return pt(I.type({context:I.type({slot:I.number()}),value:e}))}function Tw(e){return I.type({context:I.type({slot:I.number()}),value:e})}function L3(e,t){return e===0?new Rh({header:t.header,staticAccountKeys:t.accountKeys.map(r=>new ye(r)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(r=>({programIdIndex:r.programIdIndex,accountKeyIndexes:r.accounts,data:jn.default.decode(r.data)})),addressTableLookups:t.addressTableLookups}):new Ta(t)}var Pte=I.type({foundation:I.number(),foundationTerm:I.number(),initial:I.number(),taper:I.number(),terminal:I.number()}),_te=pt(I.array(I.nullable(I.type({epoch:I.number(),effectiveSlot:I.number(),amount:I.number(),postBalance:I.number(),commission:I.optional(I.nullable(I.number()))})))),Bte=I.type({total:I.number(),validator:I.number(),foundation:I.number(),epoch:I.number()}),Cte=I.type({epoch:I.number(),slotIndex:I.number(),slotsInEpoch:I.number(),absoluteSlot:I.number(),blockHeight:I.optional(I.number()),transactionCount:I.optional(I.number())}),Mte=I.type({slotsPerEpoch:I.number(),leaderScheduleSlotOffset:I.number(),warmup:I.boolean(),firstNormalEpoch:I.number(),firstNormalSlot:I.number()}),Rte=I.record(I.string(),I.array(I.number())),Rl=I.nullable(I.union([I.type({}),I.string()])),Ote=I.type({err:Rl}),Nte=I.literal("receivedSignature"),Ute=I.type({"solana-core":I.string(),"feature-set":I.optional(I.number())}),K7=en(I.type({err:I.nullable(I.union([I.type({}),I.string()])),logs:I.nullable(I.array(I.string())),accounts:I.optional(I.nullable(I.array(I.nullable(I.type({executable:I.boolean(),owner:I.string(),lamports:I.number(),data:I.array(I.string()),rentEpoch:I.optional(I.number())}))))),unitsConsumed:I.optional(I.number()),returnData:I.optional(I.nullable(I.type({programId:I.string(),data:I.tuple([I.string(),I.literal("base64")])})))})),Dte=en(I.type({byIdentity:I.record(I.string(),I.array(I.number())),range:I.type({firstSlot:I.number(),lastSlot:I.number()})}));function Lte(e,t,r,n,i,o){let s=r||gte,a;o!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return n&&(c=async(h,l)=>{let g=await new Promise((x,A)=>{try{n(h,l,(E,B)=>x([E,B]))}catch(E){A(E)}});return await s(...g)}),new Hee.default(async(h,l)=>{let g={method:"POST",body:h,agent:a,headers:Object.assign({"Content-Type":"application/json"},t||{},Dre)};try{let x=5,A,E=500;for(;c?A=await c(e,g):A=await s(e,g),!(A.status!==429||i===!0||(x-=1,x===0));)console.log(`Server responded with ${A.status} ${A.statusText}.  Retrying after ${E}ms delay...`),await _l(E),E*=2;let B=await A.text();A.ok?l(null,B):l(new Error(`${A.status} ${A.statusText}: ${B}`))}catch(x){x instanceof Error&&l(x)}},{})}function Kte(e){return(t,r)=>new Promise((n,i)=>{e.request(t,r,(o,s)=>{if(o){i(o);return}n(s)})})}function Fte(e){return t=>new Promise((r,n)=>{t.length===0&&r([]);let i=t.map(o=>e.request(o.methodName,o.args));e.request(i,(o,s)=>{if(o){n(o);return}r(s)})})}var Vte=pt(Pte),qte=pt(Bte),Hte=pt(Cte),Wte=pt(Mte),zte=pt(Rte),jte=pt(I.number()),Gte=en(I.type({total:I.number(),circulating:I.number(),nonCirculating:I.number(),nonCirculatingAccounts:I.array(tn)})),Q3=I.type({amount:I.string(),uiAmount:I.nullable(I.number()),decimals:I.number(),uiAmountString:I.optional(I.string())}),$te=en(I.array(I.type({address:tn,amount:I.string(),uiAmount:I.nullable(I.number()),decimals:I.number(),uiAmountString:I.optional(I.string())}))),Yte=en(I.array(I.type({pubkey:tn,account:I.type({executable:I.boolean(),owner:tn,lamports:I.number(),data:l6,rentEpoch:I.number()})}))),X3=I.type({program:I.string(),parsed:I.unknown(),space:I.number()}),Jte=en(I.array(I.type({pubkey:tn,account:I.type({executable:I.boolean(),owner:tn,lamports:I.number(),data:X3,rentEpoch:I.number()})}))),Zte=en(I.array(I.type({lamports:I.number(),address:tn}))),im=I.type({executable:I.boolean(),owner:tn,lamports:I.number(),data:l6,rentEpoch:I.number()}),Qte=I.type({pubkey:tn,account:im}),Xte=I.coerce(I.union([I.instance(Pe.Buffer),X3]),I.union([n9,X3]),e=>Array.isArray(e)?I.create(e,l6):e),e6=I.type({executable:I.boolean(),owner:tn,lamports:I.number(),data:Xte,rentEpoch:I.number()}),ere=I.type({pubkey:tn,account:e6}),tre=I.type({state:I.union([I.literal("active"),I.literal("inactive"),I.literal("activating"),I.literal("deactivating")]),active:I.number(),inactive:I.number()}),rre=pt(I.array(I.type({signature:I.string(),slot:I.number(),err:Rl,memo:I.nullable(I.string()),blockTime:I.optional(I.nullable(I.number()))}))),nre=pt(I.array(I.type({signature:I.string(),slot:I.number(),err:Rl,memo:I.nullable(I.string()),blockTime:I.optional(I.nullable(I.number()))}))),ire=I.type({subscription:I.number(),result:Tw(im)}),ore=I.type({pubkey:tn,account:im}),sre=I.type({subscription:I.number(),result:Tw(ore)}),are=I.type({parent:I.number(),slot:I.number(),root:I.number()}),cre=I.type({subscription:I.number(),result:are}),ure=I.union([I.type({type:I.union([I.literal("firstShredReceived"),I.literal("completed"),I.literal("optimisticConfirmation"),I.literal("root")]),slot:I.number(),timestamp:I.number()}),I.type({type:I.literal("createdBank"),parent:I.number(),slot:I.number(),timestamp:I.number()}),I.type({type:I.literal("frozen"),slot:I.number(),timestamp:I.number(),stats:I.type({numTransactionEntries:I.number(),numSuccessfulTransactions:I.number(),numFailedTransactions:I.number(),maxTransactionsPerEntry:I.number()})}),I.type({type:I.literal("dead"),slot:I.number(),timestamp:I.number(),err:I.string()})]),fre=I.type({subscription:I.number(),result:ure}),lre=I.type({subscription:I.number(),result:Tw(I.union([Ote,Nte]))}),dre=I.type({subscription:I.number(),result:I.number()}),hre=I.type({pubkey:I.string(),gossip:I.nullable(I.string()),tpu:I.nullable(I.string()),rpc:I.nullable(I.string()),version:I.nullable(I.string())}),F7=I.type({votePubkey:I.string(),nodePubkey:I.string(),activatedStake:I.number(),epochVoteAccount:I.boolean(),epochCredits:I.array(I.tuple([I.number(),I.number(),I.number()])),commission:I.number(),lastVote:I.number(),rootSlot:I.nullable(I.number())}),pre=pt(I.type({current:I.array(F7),delinquent:I.array(F7)})),yre=I.union([I.literal("processed"),I.literal("confirmed"),I.literal("finalized")]),mre=I.type({slot:I.number(),confirmations:I.nullable(I.number()),err:Rl,confirmationStatus:I.optional(yre)}),gre=en(I.array(I.nullable(mre))),bre=pt(I.number()),s9=I.type({accountKey:tn,writableIndexes:I.array(I.number()),readonlyIndexes:I.array(I.number())}),d6=I.type({signatures:I.array(I.string()),message:I.type({accountKeys:I.array(I.string()),header:I.type({numRequiredSignatures:I.number(),numReadonlySignedAccounts:I.number(),numReadonlyUnsignedAccounts:I.number()}),instructions:I.array(I.type({accounts:I.array(I.number()),data:I.string(),programIdIndex:I.number()})),recentBlockhash:I.string(),addressTableLookups:I.optional(I.array(s9))})}),a9=I.type({pubkey:tn,signer:I.boolean(),writable:I.boolean(),source:I.optional(I.union([I.literal("transaction"),I.literal("lookupTable")]))}),c9=I.type({accountKeys:I.array(a9),signatures:I.array(I.string())}),u9=I.type({parsed:I.unknown(),program:I.string(),programId:tn}),f9=I.type({accounts:I.array(tn),data:I.string(),programId:tn}),xre=I.union([f9,u9]),wre=I.union([I.type({parsed:I.unknown(),program:I.string(),programId:I.string()}),I.type({accounts:I.array(I.string()),data:I.string(),programId:I.string()})]),l9=I.coerce(xre,wre,e=>"accounts"in e?I.create(e,f9):I.create(e,u9)),d9=I.type({signatures:I.array(I.string()),message:I.type({accountKeys:I.array(a9),instructions:I.array(l9),recentBlockhash:I.string(),addressTableLookups:I.optional(I.nullable(I.array(s9)))})}),xw=I.type({accountIndex:I.number(),mint:I.string(),owner:I.optional(I.string()),uiTokenAmount:Q3}),h9=I.type({writable:I.array(tn),readonly:I.array(tn)}),Pw=I.type({err:Rl,fee:I.number(),innerInstructions:I.optional(I.nullable(I.array(I.type({index:I.number(),instructions:I.array(I.type({accounts:I.array(I.number()),data:I.string(),programIdIndex:I.number()}))})))),preBalances:I.array(I.number()),postBalances:I.array(I.number()),logMessages:I.optional(I.nullable(I.array(I.string()))),preTokenBalances:I.optional(I.nullable(I.array(xw))),postTokenBalances:I.optional(I.nullable(I.array(xw))),loadedAddresses:I.optional(h9),computeUnitsConsumed:I.optional(I.number())}),h6=I.type({err:Rl,fee:I.number(),innerInstructions:I.optional(I.nullable(I.array(I.type({index:I.number(),instructions:I.array(l9)})))),preBalances:I.array(I.number()),postBalances:I.array(I.number()),logMessages:I.optional(I.nullable(I.array(I.string()))),preTokenBalances:I.optional(I.nullable(I.array(xw))),postTokenBalances:I.optional(I.nullable(I.array(xw))),loadedAddresses:I.optional(h9),computeUnitsConsumed:I.optional(I.number())}),Kh=I.union([I.literal(0),I.literal("legacy")]),Ol=I.type({pubkey:I.string(),lamports:I.number(),postBalance:I.nullable(I.number()),rewardType:I.nullable(I.string()),commission:I.optional(I.nullable(I.number()))}),vre=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),transactions:I.array(I.type({transaction:d6,meta:I.nullable(Pw),version:I.optional(Kh)})),rewards:I.optional(I.array(Ol)),blockTime:I.nullable(I.number()),blockHeight:I.nullable(I.number())}))),Are=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),rewards:I.optional(I.array(Ol)),blockTime:I.nullable(I.number()),blockHeight:I.nullable(I.number())}))),Sre=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),transactions:I.array(I.type({transaction:c9,meta:I.nullable(Pw),version:I.optional(Kh)})),rewards:I.optional(I.array(Ol)),blockTime:I.nullable(I.number()),blockHeight:I.nullable(I.number())}))),Ere=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),transactions:I.array(I.type({transaction:d9,meta:I.nullable(h6),version:I.optional(Kh)})),rewards:I.optional(I.array(Ol)),blockTime:I.nullable(I.number()),blockHeight:I.nullable(I.number())}))),Ire=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),transactions:I.array(I.type({transaction:c9,meta:I.nullable(h6),version:I.optional(Kh)})),rewards:I.optional(I.array(Ol)),blockTime:I.nullable(I.number()),blockHeight:I.nullable(I.number())}))),kre=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),rewards:I.optional(I.array(Ol)),blockTime:I.nullable(I.number()),blockHeight:I.nullable(I.number())}))),Tre=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),transactions:I.array(I.type({transaction:d6,meta:I.nullable(Pw)})),rewards:I.optional(I.array(Ol)),blockTime:I.nullable(I.number())}))),V7=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),signatures:I.array(I.string()),blockTime:I.nullable(I.number())}))),K3=pt(I.nullable(I.type({slot:I.number(),meta:Pw,blockTime:I.optional(I.nullable(I.number())),transaction:d6,version:I.optional(Kh)}))),lw=pt(I.nullable(I.type({slot:I.number(),transaction:d9,meta:I.nullable(h6),blockTime:I.optional(I.nullable(I.number())),version:I.optional(Kh)}))),Pre=en(I.type({blockhash:I.string(),feeCalculator:I.type({lamportsPerSignature:I.number()})})),_re=en(I.type({blockhash:I.string(),lastValidBlockHeight:I.number()})),Bre=I.type({slot:I.number(),numTransactions:I.number(),numSlots:I.number(),samplePeriodSecs:I.number()}),Cre=pt(I.array(Bre)),Mre=en(I.nullable(I.type({feeCalculator:I.type({lamportsPerSignature:I.number()})}))),Rre=pt(I.string()),Ore=pt(I.string()),Nre=I.type({err:Rl,logs:I.array(I.string()),signature:I.string()}),Ure=I.type({result:Tw(Nre),subscription:I.number()}),Dre={"solana-client":"js/1.73.5"},t6=class{constructor(t,r){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set;let n,i,o,s,a,c;r&&typeof r=="string"?this._commitment=r:r&&(this._commitment=r.commitment,this._confirmTransactionInitialTimeout=r.confirmTransactionInitialTimeout,n=r.wsEndpoint,i=r.httpHeaders,o=r.fetch,s=r.fetchMiddleware,a=r.disableRetryOnRateLimit,c=r.httpAgent),this._rpcEndpoint=kte(t),this._rpcWsEndpoint=n||Ite(t),this._rpcClient=Lte(t,i,o,s,a,c),this._rpcRequest=Kte(this._rpcClient),this._rpcBatchRequest=Fte(this._rpcClient),this._rpcWebSocket=new Z3(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,r){let{commitment:n,config:i}=Mr(r),o=this._buildArgs([t.toBase58()],n,void 0,i),s=await this._rpcRequest("getBalance",o),a=I.create(s,en(I.number()));if("error"in a)throw new we(a.error,`failed to get balance for ${t.toBase58()}`);return a.result}async getBalance(t,r){return await this.getBalanceAndContext(t,r).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+n)})}async getBlockTime(t){let r=await this._rpcRequest("getBlockTime",[t]),n=I.create(r,pt(I.nullable(I.number())));if("error"in n)throw new we(n.error,`failed to get block time for slot ${t}`);return n.result}async getMinimumLedgerSlot(){let t=await this._rpcRequest("minimumLedgerSlot",[]),r=I.create(t,pt(I.number()));if("error"in r)throw new we(r.error,"failed to get minimum ledger slot");return r.result}async getFirstAvailableBlock(){let t=await this._rpcRequest("getFirstAvailableBlock",[]),r=I.create(t,jte);if("error"in r)throw new we(r.error,"failed to get first available block");return r.result}async getSupply(t){let r={};typeof t=="string"?r={commitment:t}:t?r={...t,commitment:t&&t.commitment||this.commitment}:r={commitment:this.commitment};let n=await this._rpcRequest("getSupply",[r]),i=I.create(n,Gte);if("error"in i)throw new we(i.error,"failed to get supply");return i.result}async getTokenSupply(t,r){let n=this._buildArgs([t.toBase58()],r),i=await this._rpcRequest("getTokenSupply",n),o=I.create(i,en(Q3));if("error"in o)throw new we(o.error,"failed to get token supply");return o.result}async getTokenAccountBalance(t,r){let n=this._buildArgs([t.toBase58()],r),i=await this._rpcRequest("getTokenAccountBalance",n),o=I.create(i,en(Q3));if("error"in o)throw new we(o.error,"failed to get token account balance");return o.result}async getTokenAccountsByOwner(t,r,n){let{commitment:i,config:o}=Mr(n),s=[t.toBase58()];"mint"in r?s.push({mint:r.mint.toBase58()}):s.push({programId:r.programId.toBase58()});let a=this._buildArgs(s,i,"base64",o),c=await this._rpcRequest("getTokenAccountsByOwner",a),u=I.create(c,Yte);if("error"in u)throw new we(u.error,`failed to get token accounts owned by account ${t.toBase58()}`);return u.result}async getParsedTokenAccountsByOwner(t,r,n){let i=[t.toBase58()];"mint"in r?i.push({mint:r.mint.toBase58()}):i.push({programId:r.programId.toBase58()});let o=this._buildArgs(i,n,"jsonParsed"),s=await this._rpcRequest("getTokenAccountsByOwner",o),a=I.create(s,Jte);if("error"in a)throw new we(a.error,`failed to get token accounts owned by account ${t.toBase58()}`);return a.result}async getLargestAccounts(t){let r={...t,commitment:t&&t.commitment||this.commitment},n=r.filter||r.commitment?[r]:[],i=await this._rpcRequest("getLargestAccounts",n),o=I.create(i,Zte);if("error"in o)throw new we(o.error,"failed to get largest accounts");return o.result}async getTokenLargestAccounts(t,r){let n=this._buildArgs([t.toBase58()],r),i=await this._rpcRequest("getTokenLargestAccounts",n),o=I.create(i,$te);if("error"in o)throw new we(o.error,"failed to get token largest accounts");return o.result}async getAccountInfoAndContext(t,r){let{commitment:n,config:i}=Mr(r),o=this._buildArgs([t.toBase58()],n,"base64",i),s=await this._rpcRequest("getAccountInfo",o),a=I.create(s,en(I.nullable(im)));if("error"in a)throw new we(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getParsedAccountInfo(t,r){let{commitment:n,config:i}=Mr(r),o=this._buildArgs([t.toBase58()],n,"jsonParsed",i),s=await this._rpcRequest("getAccountInfo",o),a=I.create(s,en(I.nullable(e6)));if("error"in a)throw new we(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getAccountInfo(t,r){try{return(await this.getAccountInfoAndContext(t,r)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,r){let{commitment:n,config:i}=Mr(r),o=t.map(u=>u.toBase58()),s=this._buildArgs([o],n,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",s),c=I.create(a,en(I.array(I.nullable(e6))));if("error"in c)throw new we(c.error,`failed to get info for accounts ${o}`);return c.result}async getMultipleAccountsInfoAndContext(t,r){let{commitment:n,config:i}=Mr(r),o=t.map(u=>u.toBase58()),s=this._buildArgs([o],n,"base64",i),a=await this._rpcRequest("getMultipleAccounts",s),c=I.create(a,en(I.array(I.nullable(im))));if("error"in c)throw new we(c.error,`failed to get info for accounts ${o}`);return c.result}async getMultipleAccountsInfo(t,r){return(await this.getMultipleAccountsInfoAndContext(t,r)).value}async getStakeActivation(t,r,n){let{commitment:i,config:o}=Mr(r),s=this._buildArgs([t.toBase58()],i,void 0,{...o,epoch:n??o?.epoch}),a=await this._rpcRequest("getStakeActivation",s),c=I.create(a,pt(tre));if("error"in c)throw new we(c.error,`failed to get Stake Activation ${t.toBase58()}`);return c.result}async getProgramAccounts(t,r){let{commitment:n,config:i}=Mr(r),{encoding:o,...s}=i||{},a=this._buildArgs([t.toBase58()],n,o||"base64",s),c=await this._rpcRequest("getProgramAccounts",a),u=I.create(c,pt(I.array(Qte)));if("error"in u)throw new we(u.error,`failed to get accounts owned by program ${t.toBase58()}`);return u.result}async getParsedProgramAccounts(t,r){let{commitment:n,config:i}=Mr(r),o=this._buildArgs([t.toBase58()],n,"jsonParsed",i),s=await this._rpcRequest("getProgramAccounts",o),a=I.create(s,pt(I.array(ere)));if("error"in a)throw new we(a.error,`failed to get accounts owned by program ${t.toBase58()}`);return a.result}async confirmTransaction(t,r){let n;if(typeof t=="string")n=t;else{let o=t;if(o.abortSignal?.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let i;try{i=jn.default.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Dt(i.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:r||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:r||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:r||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((r,n)=>{t!=null&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:r}){let n,i,o=!1,s=new Promise((c,u)=>{try{n=this.onSignature(r,(l,g)=>{n=void 0;let x={context:g,value:l};c({__type:he.TransactionStatus.PROCESSED,response:x})},t);let h=new Promise(l=>{n==null?l():i=this._onSubscriptionStateChange(n,g=>{g==="subscribed"&&l()})});(async()=>{if(await h,o)return;let l=await this.getSignatureStatus(r);if(o||l==null)return;let{context:g,value:x}=l;if(x!=null)if(x?.err)u(x.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(x.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(x.confirmationStatus==="processed"||x.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}o=!0,c({__type:he.TransactionStatus.PROCESSED,response:{context:g,value:x}})}})()}catch(h){u(h)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:s}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:r,lastValidBlockHeight:n,signature:i}}){let o=!1,s=new Promise(l=>{let g=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let x=await g();if(!o){for(;x<=n;)if(await _l(1e3),o||(x=await g(),o))return;l({__type:he.TransactionStatus.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:t,signature:i}),u=this.getCancellationPromise(r),h;try{let l=await Promise.race([u,c,s]);if(l.__type===he.TransactionStatus.PROCESSED)h=l.response;else throw new em(i)}finally{o=!0,a()}return h}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:r,minContextSlot:n,nonceAccountPubkey:i,nonceValue:o,signature:s}}){let a=!1,c=new Promise(x=>{let A=o,E=null,B=async()=>{try{let{context:M,value:N}=await this.getNonceAndContext(i,{commitment:t,minContextSlot:n});return E=M.slot,N?.nonce}catch{return A}};(async()=>{if(A=await B(),!a)for(;;){if(o!==A){x({__type:he.TransactionStatus.NONCE_INVALID,slotInWhichNonceDidAdvance:E});return}if(await _l(2e3),a||(A=await B(),a))return}})()}),{abortConfirmation:u,confirmationPromise:h}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),l=this.getCancellationPromise(r),g;try{let x=await Promise.race([l,h,c]);if(x.__type===he.TransactionStatus.PROCESSED)g=x.response;else{let A;for(;;){let E=await this.getSignatureStatus(s);if(E==null)break;if(E.context.slot<(x.slotInWhichNonceDidAdvance??n)){await _l(400);continue}A=E;break}if(A?.value){let E=t||"finalized",{confirmationStatus:B}=A.value;switch(E){case"processed":case"recent":if(B!=="processed"&&B!=="confirmed"&&B!=="finalized")throw new Hu(s);break;case"confirmed":case"single":case"singleGossip":if(B!=="confirmed"&&B!=="finalized")throw new Hu(s);break;case"finalized":case"max":case"root":if(B!=="finalized")throw new Hu(s);break;default:}g={context:A.context,value:{err:A.value.err}}}else throw new Hu(s)}}finally{a=!0,u()}return g}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:r}){let n,i=new Promise(c=>{let u=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{u=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>c({__type:he.TransactionStatus.TIMED_OUT,timeoutMs:u}),u)}),{abortConfirmation:o,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:t,signature:r}),a;try{let c=await Promise.race([s,i]);if(c.__type===he.TransactionStatus.PROCESSED)a=c.response;else throw new tm(r,c.timeoutMs/1e3)}finally{clearTimeout(n),o()}return a}async getClusterNodes(){let t=await this._rpcRequest("getClusterNodes",[]),r=I.create(t,pt(I.array(hre)));if("error"in r)throw new we(r.error,"failed to get cluster nodes");return r.result}async getVoteAccounts(t){let r=this._buildArgs([],t),n=await this._rpcRequest("getVoteAccounts",r),i=I.create(n,pre);if("error"in i)throw new we(i.error,"failed to get vote accounts");return i.result}async getSlot(t){let{commitment:r,config:n}=Mr(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getSlot",i),s=I.create(o,pt(I.number()));if("error"in s)throw new we(s.error,"failed to get slot");return s.result}async getSlotLeader(t){let{commitment:r,config:n}=Mr(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getSlotLeader",i),s=I.create(o,pt(I.string()));if("error"in s)throw new we(s.error,"failed to get slot leader");return s.result}async getSlotLeaders(t,r){let n=[t,r],i=await this._rpcRequest("getSlotLeaders",n),o=I.create(i,pt(I.array(tn)));if("error"in o)throw new we(o.error,"failed to get slot leaders");return o.result}async getSignatureStatus(t,r){let{context:n,value:i}=await this.getSignatureStatuses([t],r);Dt(i.length===1);let o=i[0];return{context:n,value:o}}async getSignatureStatuses(t,r){let n=[t];r&&n.push(r);let i=await this._rpcRequest("getSignatureStatuses",n),o=I.create(i,gre);if("error"in o)throw new we(o.error,"failed to get signature status");return o.result}async getTransactionCount(t){let{commitment:r,config:n}=Mr(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getTransactionCount",i),s=I.create(o,pt(I.number()));if("error"in s)throw new we(s.error,"failed to get transaction count");return s.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){let r=this._buildArgs([],t),n=await this._rpcRequest("getInflationGovernor",r),i=I.create(n,Vte);if("error"in i)throw new we(i.error,"failed to get inflation");return i.result}async getInflationReward(t,r,n){let{commitment:i,config:o}=Mr(n),s=this._buildArgs([t.map(u=>u.toBase58())],i,void 0,{...o,epoch:r??o?.epoch}),a=await this._rpcRequest("getInflationReward",s),c=I.create(a,_te);if("error"in c)throw new we(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){let t=await this._rpcRequest("getInflationRate",[]),r=I.create(t,qte);if("error"in r)throw new we(r.error,"failed to get inflation rate");return r.result}async getEpochInfo(t){let{commitment:r,config:n}=Mr(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getEpochInfo",i),s=I.create(o,Hte);if("error"in s)throw new we(s.error,"failed to get epoch info");return s.result}async getEpochSchedule(){let t=await this._rpcRequest("getEpochSchedule",[]),r=I.create(t,Wte);if("error"in r)throw new we(r.error,"failed to get epoch schedule");let n=r.result;return new bw(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){let t=await this._rpcRequest("getLeaderSchedule",[]),r=I.create(t,zte);if("error"in r)throw new we(r.error,"failed to get leader schedule");return r.result}async getMinimumBalanceForRentExemption(t,r){let n=this._buildArgs([t],r),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),o=I.create(i,bre);return"error"in o?(console.warn("Unable to fetch minimum balance for rent exemption"),0):o.result}async getRecentBlockhashAndContext(t){let r=this._buildArgs([],t),n=await this._rpcRequest("getRecentBlockhash",r),i=I.create(n,Pre);if("error"in i)throw new we(i.error,"failed to get recent blockhash");return i.result}async getRecentPerformanceSamples(t){let r=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),n=I.create(r,Cre);if("error"in n)throw new we(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(t,r){let n=this._buildArgs([t],r),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),o=I.create(i,Mre);if("error"in o)throw new we(o.error,"failed to get fee calculator");let{context:s,value:a}=o.result;return{context:s,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(t,r){let n=dt(t.serialize()).toString("base64"),i=this._buildArgs([n],r),o=await this._rpcRequest("getFeeForMessage",i),s=I.create(o,en(I.nullable(I.number())));if("error"in s)throw new we(s.error,"failed to get fee for message");if(s.result===null)throw new Error("invalid blockhash");return s.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}}async getLatestBlockhashAndContext(t){let{commitment:r,config:n}=Mr(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getLatestBlockhash",i),s=I.create(o,_re);if("error"in s)throw new we(s.error,"failed to get latest blockhash");return s.result}async getVersion(){let t=await this._rpcRequest("getVersion",[]),r=I.create(t,pt(Ute));if("error"in r)throw new we(r.error,"failed to get version");return r.result}async getGenesisHash(){let t=await this._rpcRequest("getGenesisHash",[]),r=I.create(t,pt(I.string()));if("error"in r)throw new we(r.error,"failed to get genesis hash");return r.result}async getBlock(t,r){let{commitment:n,config:i}=Mr(r),o=this._buildArgsAtLeastConfirmed([t],n,void 0,i),s=await this._rpcRequest("getBlock",o);try{switch(i?.transactionDetails){case"accounts":{let a=I.create(s,Sre);if("error"in a)throw a.error;return a.result}case"none":{let a=I.create(s,Are);if("error"in a)throw a.error;return a.result}default:{let a=I.create(s,vre);if("error"in a)throw a.error;let{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:u,meta:h,version:l})=>({meta:h,transaction:{...u,message:L3(l,u.message)},version:l}))}:null}}}catch(a){throw new we(a,"failed to get confirmed block")}}async getParsedBlock(t,r){let{commitment:n,config:i}=Mr(r),o=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",i),s=await this._rpcRequest("getBlock",o);try{switch(i?.transactionDetails){case"accounts":{let a=I.create(s,Ire);if("error"in a)throw a.error;return a.result}case"none":{let a=I.create(s,kre);if("error"in a)throw a.error;return a.result}default:{let a=I.create(s,Ere);if("error"in a)throw a.error;return a.result}}}catch(a){throw new we(a,"failed to get block")}}async getBlockHeight(t){let{commitment:r,config:n}=Mr(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getBlockHeight",i),s=I.create(o,pt(I.number()));if("error"in s)throw new we(s.error,"failed to get block height information");return s.result}async getBlockProduction(t){let r,n;if(typeof t=="string")n=t;else if(t){let{commitment:a,...c}=t;n=a,r=c}let i=this._buildArgs([],n,"base64",r),o=await this._rpcRequest("getBlockProduction",i),s=I.create(o,Dte);if("error"in s)throw new we(s.error,"failed to get block production information");return s.result}async getTransaction(t,r){let{commitment:n,config:i}=Mr(r),o=this._buildArgsAtLeastConfirmed([t],n,void 0,i),s=await this._rpcRequest("getTransaction",o),a=I.create(s,K3);if("error"in a)throw new we(a.error,"failed to get transaction");let c=a.result;return c&&{...c,transaction:{...c.transaction,message:L3(c.version,c.transaction.message)}}}async getParsedTransaction(t,r){let{commitment:n,config:i}=Mr(r),o=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",i),s=await this._rpcRequest("getTransaction",o),a=I.create(s,lw);if("error"in a)throw new we(a.error,"failed to get transaction");return a.result}async getParsedTransactions(t,r){let{commitment:n,config:i}=Mr(r),o=t.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,"jsonParsed",i)}));return(await this._rpcBatchRequest(o)).map(c=>{let u=I.create(c,lw);if("error"in u)throw new we(u.error,"failed to get transactions");return u.result})}async getTransactions(t,r){let{commitment:n,config:i}=Mr(r),o=t.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,void 0,i)}));return(await this._rpcBatchRequest(o)).map(c=>{let u=I.create(c,K3);if("error"in u)throw new we(u.error,"failed to get transactions");let h=u.result;return h&&{...h,transaction:{...h.transaction,message:L3(h.version,h.transaction.message)}}})}async getConfirmedBlock(t,r){let n=this._buildArgsAtLeastConfirmed([t],r),i=await this._rpcRequest("getConfirmedBlock",n),o=I.create(i,Tre);if("error"in o)throw new we(o.error,"failed to get confirmed block");let s=o.result;if(!s)throw new Error("Confirmed block "+t+" not found");let a={...s,transactions:s.transactions.map(({transaction:c,meta:u})=>{let h=new Ta(c.message);return{meta:u,transaction:{...c,message:h}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:u})=>({meta:u,transaction:Gt.populate(c.message,c.signatures)}))}}async getBlocks(t,r,n){let i=this._buildArgsAtLeastConfirmed(r!==void 0?[t,r]:[t],n),o=await this._rpcRequest("getBlocks",i),s=I.create(o,pt(I.array(I.number())));if("error"in s)throw new we(s.error,"failed to get blocks");return s.result}async getBlockSignatures(t,r){let n=this._buildArgsAtLeastConfirmed([t],r,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),o=I.create(i,V7);if("error"in o)throw new we(o.error,"failed to get block");let s=o.result;if(!s)throw new Error("Block "+t+" not found");return s}async getConfirmedBlockSignatures(t,r){let n=this._buildArgsAtLeastConfirmed([t],r,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getConfirmedBlock",n),o=I.create(i,V7);if("error"in o)throw new we(o.error,"failed to get confirmed block");let s=o.result;if(!s)throw new Error("Confirmed block "+t+" not found");return s}async getConfirmedTransaction(t,r){let n=this._buildArgsAtLeastConfirmed([t],r),i=await this._rpcRequest("getConfirmedTransaction",n),o=I.create(i,K3);if("error"in o)throw new we(o.error,"failed to get transaction");let s=o.result;if(!s)return s;let a=new Ta(s.transaction.message),c=s.transaction.signatures;return{...s,transaction:Gt.populate(a,c)}}async getParsedConfirmedTransaction(t,r){let n=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed"),i=await this._rpcRequest("getConfirmedTransaction",n),o=I.create(i,lw);if("error"in o)throw new we(o.error,"failed to get confirmed transaction");return o.result}async getParsedConfirmedTransactions(t,r){let n=t.map(s=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([s],r,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(s=>{let a=I.create(s,lw);if("error"in a)throw new we(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(t,r,n){let i={},o=await this.getFirstAvailableBlock();for(;!("until"in i)&&(r--,!(r<=0||r<o));)try{let c=await this.getConfirmedBlockSignatures(r,"finalized");c.signatures.length>0&&(i.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let s=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>s));)try{let c=await this.getConfirmedBlockSignatures(n);c.signatures.length>0&&(i.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(t,i)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(t,r,n){let i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),o=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),s=I.create(o,rre);if("error"in s)throw new we(s.error,"failed to get confirmed signatures for address");return s.result}async getSignaturesForAddress(t,r,n){let i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),o=await this._rpcRequest("getSignaturesForAddress",i),s=I.create(o,nre);if("error"in s)throw new we(s.error,"failed to get signatures for address");return s.result}async getAddressLookupTable(t,r){let{context:n,value:i}=await this.getAccountInfoAndContext(t,r),o=null;return i!==null&&(o=new nm({key:t,state:nm.deserialize(i.data)})),{context:n,value:o}}async getNonceAndContext(t,r){let{context:n,value:i}=await this.getAccountInfoAndContext(t,r),o=null;return i!==null&&(o=gw.fromAccountData(i.data)),{context:n,value:o}}async getNonce(t,r){return await this.getNonceAndContext(t,r).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+n)})}async requestAirdrop(t,r){let n=await this._rpcRequest("requestAirdrop",[t.toBase58(),r]),i=I.create(n,Rre);if("error"in i)throw new we(i.error,`airdrop to ${t.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await _l(100);let n=Date.now()-this._blockhashInfo.lastFetch>=i9;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{let t=Date.now(),r=this._blockhashInfo.latestBlockhash,n=r?r.blockhash:null;for(let i=0;i<50;i++){let o=await this.getLatestBlockhash("finalized");if(n!==o.blockhash)return this._blockhashInfo={latestBlockhash:o,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},o;await _l(vte/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){let{commitment:r,config:n}=Mr(t),i=this._buildArgs([],r,"base64",n),o=await this._rpcRequest("getStakeMinimumDelegation",i),s=I.create(o,en(I.number()));if("error"in s)throw new we(s.error,"failed to get stake minimum delegation");return s.result}async simulateTransaction(t,r,n){if("message"in t){let E=t.serialize(),B=Pe.Buffer.from(E).toString("base64");if(Array.isArray(r)||n!==void 0)throw new Error("Invalid arguments");let M=r||{};M.encoding="base64","commitment"in M||(M.commitment=this.commitment);let N=[B,M],R=await this._rpcRequest("simulateTransaction",N),V=I.create(R,K7);if("error"in V)throw new Error("failed to simulate transaction: "+V.error.message);return V.result}let i;if(t instanceof Gt){let A=t;i=new Gt,i.feePayer=A.feePayer,i.instructions=t.instructions,i.nonceInfo=A.nonceInfo,i.signatures=A.signatures}else i=Gt.populate(t),i._message=i._json=void 0;if(r!==void 0&&!Array.isArray(r))throw new Error("Invalid arguments");let o=r;if(i.nonceInfo&&o)i.sign(...o);else{let A=this._disableBlockhashCaching;for(;;){let E=await this._blockhashWithExpiryBlockHeight(A);if(i.lastValidBlockHeight=E.lastValidBlockHeight,i.recentBlockhash=E.blockhash,!o)break;if(i.sign(...o),!i.signature)throw new Error("!signature");let B=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(B)&&!this._blockhashInfo.transactionSignatures.includes(B)){this._blockhashInfo.simulatedSignatures.push(B);break}else A=!0}}let s=i._compile(),a=s.serialize(),u=i._serialize(a).toString("base64"),h={encoding:"base64",commitment:this.commitment};if(n){let A=(Array.isArray(n)?n:s.nonProgramIds()).map(E=>E.toBase58());h.accounts={encoding:"base64",addresses:A}}o&&(h.sigVerify=!0);let l=[u,h],g=await this._rpcRequest("simulateTransaction",l),x=I.create(g,K7);if("error"in x){let A;if("data"in x.error&&(A=x.error.data.logs,A&&Array.isArray(A))){let E=`
    `,B=E+A.join(E);console.error(x.error.message,B)}throw new rm("failed to simulate transaction: "+x.error.message,A)}return x.result}async sendTransaction(t,r,n){if("version"in t){if(r&&Array.isArray(r))throw new Error("Invalid arguments");let s=t.serialize();return await this.sendRawTransaction(s,r)}if(r===void 0||!Array.isArray(r))throw new Error("Invalid arguments");let i=r;if(t.nonceInfo)t.sign(...i);else{let s=this._disableBlockhashCaching;for(;;){let a=await this._blockhashWithExpiryBlockHeight(s);if(t.lastValidBlockHeight=a.lastValidBlockHeight,t.recentBlockhash=a.blockhash,t.sign(...i),!t.signature)throw new Error("!signature");let c=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))s=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}let o=t.serialize();return await this.sendRawTransaction(o,n)}async sendRawTransaction(t,r){let n=dt(t).toString("base64");return await this.sendEncodedTransaction(n,r)}async sendEncodedTransaction(t,r){let n={encoding:"base64"},i=r&&r.skipPreflight,o=r&&r.preflightCommitment||this.commitment;r&&r.maxRetries!=null&&(n.maxRetries=r.maxRetries),r&&r.minContextSlot!=null&&(n.minContextSlot=r.minContextSlot),i&&(n.skipPreflight=i),o&&(n.preflightCommitment=o);let s=[t,n],a=await this._rpcRequest("sendTransaction",s),c=I.create(a,Ore);if("error"in c){let u;throw"data"in c.error&&(u=c.error.data.logs),new rm("failed to send transaction: "+c.error.message,u)}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([r,n])=>{this._setSubscription(r,{...n,state:"pending"})})}_setSubscription(t,r){let n=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=r,n!==r.state){let i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(o=>{try{o(r.state)}catch{}})}}_onSubscriptionStateChange(t,r){let n=this._subscriptionHashByClientSubscriptionId[t];if(n==null)return()=>{};let i=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return i.add(r),()=>{i.delete(r),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}let t=this._rpcWebSocketGeneration,r=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{let i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{let{args:o,method:s}=i;try{this._setSubscription(n,{...i,state:"subscribing"});let a=await this._rpcWebSocket.call(s,o);this._setSubscription(n,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(a instanceof Error&&console.error(`${s} error for argument`,o,a.message),!r())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{let{serverSubscriptionId:o,unsubscribeMethod:s}=i;if(this._subscriptionsAutoDisposedByRpc.has(o))this._subscriptionsAutoDisposedByRpc.delete(o);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(s,[o])}catch(a){if(a instanceof Error&&console.error(`${s} error:`,a.message),!r())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,r){let n=this._subscriptionCallbacksByServerSubscriptionId[t];n!==void 0&&n.forEach(i=>{try{i(...r)}catch(o){console.error(o)}})}_wsOnAccountNotification(t){let{result:r,subscription:n}=I.create(t,ire);this._handleServerNotification(n,[r.value,r.context])}_makeSubscription(t,r){let n=this._nextClientSubscriptionId++,i=pte([t.method,r]),o=this._subscriptionsByHash[i];return o===void 0?this._subscriptionsByHash[i]={...t,args:r,callbacks:new Set([t.callback]),state:"pending"}:o.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];let s=this._subscriptionsByHash[i];Dt(s!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),s.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,r,n){let i=this._buildArgs([t.toBase58()],n||this._commitment||"finalized","base64");return this._makeSubscription({callback:r,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},i)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){let{result:r,subscription:n}=I.create(t,sre);this._handleServerNotification(n,[{accountId:r.value.pubkey,accountInfo:r.value.account},r.context])}onProgramAccountChange(t,r,n,i){let o=this._buildArgs([t.toBase58()],n||this._commitment||"finalized","base64",i?{filters:i}:void 0);return this._makeSubscription({callback:r,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},o)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,r,n){let i=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:r,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){let{result:r,subscription:n}=I.create(t,Ure);this._handleServerNotification(n,[r.value,r.context])}_wsOnSlotNotification(t){let{result:r,subscription:n}=I.create(t,cre);this._handleServerNotification(n,[r])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){let{result:r,subscription:n}=I.create(t,fre);this._handleServerNotification(n,[r])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,r){let n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${r}' events could not be found.`)}_buildArgs(t,r,n,i){let o=r||this._commitment;if(o||n||i){let s={};n&&(s.encoding=n),o&&(s.commitment=o),i&&(s=Object.assign(s,i)),t.push(s)}return t}_buildArgsAtLeastConfirmed(t,r,n,i){let o=r||this._commitment;if(o&&!["confirmed","finalized"].includes(o))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,r,n,i)}_wsOnSignatureNotification(t){let{result:r,subscription:n}=I.create(t,lre);r.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,r.value==="receivedSignature"?[{type:"received"},r.context]:[{type:"status",result:r.value},r.context])}onSignature(t,r,n){let i=this._buildArgs([t],n||this._commitment||"finalized"),o=this._makeSubscription({callback:(s,a)=>{if(s.type==="status"){r(s.result,a);try{this.removeSignatureListener(o)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return o}onSignatureWithOptions(t,r,n){let{commitment:i,...o}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},s=this._buildArgs([t],i,void 0,o),a=this._makeSubscription({callback:(c,u)=>{r(c,u);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return a}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){let{result:r,subscription:n}=I.create(t,dre);this._handleServerNotification(n,[r])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}},ww=class e{constructor(t){this._keypair=void 0,this._keypair=t??N7()}static generate(){return new e(N7())}static fromSecretKey(t,r){if(t.byteLength!==64)throw new Error("bad secret key size");let n=t.slice(32,64);if(!r||!r.skipValidation){let i=t.slice(0,32),o=yw(i);for(let s=0;s<32;s++)if(n[s]!==o[s])throw new Error("provided secretKey is invalid")}return new e({publicKey:n,secretKey:t})}static fromSeed(t){let r=yw(t),n=new Uint8Array(64);return n.set(t),n.set(r,32),new e({publicKey:r,secretKey:n})}get publicKey(){return new ye(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}},Rc=Object.freeze({CreateLookupTable:{index:0,layout:H.struct([H.u32("instruction"),Nh("recentSlot"),H.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:H.struct([H.u32("instruction")])},ExtendLookupTable:{index:2,layout:H.struct([H.u32("instruction"),Nh(),H.seq(bt(),H.offset(H.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:H.struct([H.u32("instruction")])},CloseLookupTable:{index:4,layout:H.struct([H.u32("instruction")])}}),r6=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=H.u32("instruction").decode(t.data),i;for(let[o,s]of Object.entries(Rc))if(s.index==n){i=o;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);let{recentSlot:r}=Wt(Rc.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(r)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);let{addresses:r}=Wt(Rc.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:r.map(n=>new ye(n))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(om.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,r){if(t.length<r)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${r}`)}},om=class{constructor(){}static createLookupTable(t){let[r,n]=ye.findProgramAddressSync([t.authority.toBuffer(),H3.toBufferLE(BigInt(t.recentSlot),8)],this.programId),i=Rc.CreateLookupTable,o=Rt(i,{recentSlot:BigInt(t.recentSlot),bumpSeed:n}),s=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:pi.programId,isSigner:!1,isWritable:!1}];return[new $t({programId:this.programId,keys:s,data:o}),r]}static freezeLookupTable(t){let r=Rc.FreezeLookupTable,n=Rt(r),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new $t({programId:this.programId,keys:i,data:n})}static extendLookupTable(t){let r=Rc.ExtendLookupTable,n=Rt(r,{addresses:t.addresses.map(o=>o.toBytes())}),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&i.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:pi.programId,isSigner:!1,isWritable:!1}),new $t({programId:this.programId,keys:i,data:n})}static deactivateLookupTable(t){let r=Rc.DeactivateLookupTable,n=Rt(r),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new $t({programId:this.programId,keys:i,data:n})}static closeLookupTable(t){let r=Rc.CloseLookupTable,n=Rt(r),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new $t({programId:this.programId,keys:i,data:n})}};om.programId=new ye("AddressLookupTab1e1111111111111111111111111");var n6=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=H.u8("instruction").decode(t.data),i;for(let[o,s]of Object.entries(Ia))if(s.index==n){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(t){this.checkProgramId(t.programId);let{units:r,additionalFee:n}=Wt(Ia.RequestUnits,t.data);return{units:r,additionalFee:n}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);let{bytes:r}=Wt(Ia.RequestHeapFrame,t.data);return{bytes:r}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);let{units:r}=Wt(Ia.SetComputeUnitLimit,t.data);return{units:r}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);let{microLamports:r}=Wt(Ia.SetComputeUnitPrice,t.data);return{microLamports:r}}static checkProgramId(t){if(!t.equals(sm.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}},Ia=Object.freeze({RequestUnits:{index:0,layout:H.struct([H.u8("instruction"),H.u32("units"),H.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:H.struct([H.u8("instruction"),H.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:H.struct([H.u8("instruction"),H.u32("units")])},SetComputeUnitPrice:{index:3,layout:H.struct([H.u8("instruction"),Nh("microLamports")])}}),sm=class{constructor(){}static requestUnits(t){let r=Ia.RequestUnits,n=Rt(r,t);return new $t({keys:[],programId:this.programId,data:n})}static requestHeapFrame(t){let r=Ia.RequestHeapFrame,n=Rt(r,t);return new $t({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(t){let r=Ia.SetComputeUnitLimit,n=Rt(r,t);return new $t({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(t){let r=Ia.SetComputeUnitPrice,n=Rt(r,{microLamports:BigInt(t.microLamports)});return new $t({keys:[],programId:this.programId,data:n})}};sm.programId=new ye("ComputeBudget111111111111111111111111111111");var q7=64,H7=32,W7=64,z7=H.struct([H.u8("numSignatures"),H.u8("padding"),H.u16("signatureOffset"),H.u16("signatureInstructionIndex"),H.u16("publicKeyOffset"),H.u16("publicKeyInstructionIndex"),H.u16("messageDataOffset"),H.u16("messageDataSize"),H.u16("messageInstructionIndex")]),vw=class e{constructor(){}static createInstructionWithPublicKey(t){let{publicKey:r,message:n,signature:i,instructionIndex:o}=t;Dt(r.length===H7,`Public Key must be ${H7} bytes but received ${r.length} bytes`),Dt(i.length===W7,`Signature must be ${W7} bytes but received ${i.length} bytes`);let s=z7.span,a=s+r.length,c=a+i.length,u=1,h=Pe.Buffer.alloc(c+n.length),l=o??65535;return z7.encode({numSignatures:u,padding:0,signatureOffset:a,signatureInstructionIndex:l,publicKeyOffset:s,publicKeyInstructionIndex:l,messageDataOffset:c,messageDataSize:n.length,messageInstructionIndex:l},h),h.fill(r,s),h.fill(i,a),h.fill(n,c),new $t({keys:[],programId:e.programId,data:h})}static createInstructionWithPrivateKey(t){let{privateKey:r,message:n,instructionIndex:i}=t;Dt(r.length===q7,`Private key must be ${q7} bytes but received ${r.length} bytes`);try{let o=ww.fromSecretKey(r),s=o.publicKey.toBytes(),a=u6(n,o.secretKey);return this.createInstructionWithPublicKey({publicKey:s,message:n,signature:a,instructionIndex:i})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};vw.programId=new ye("Ed25519SigVerify111111111111111111111111111");Iw.utils.hmacSha256Sync=(e,...t)=>{let r=Vee.hmac.create(q3.sha256,e);return t.forEach(n=>r.update(n)),r.digest()};var Lre=(e,t)=>Iw.signSync(e,t,{der:!1,recovered:!0});Iw.utils.isValidPrivateKey;var Kre=Iw.getPublicKey,j7=32,F3=20,G7=64,Fre=11,V3=H.struct([H.u8("numSignatures"),H.u16("signatureOffset"),H.u8("signatureInstructionIndex"),H.u16("ethAddressOffset"),H.u8("ethAddressInstructionIndex"),H.u16("messageDataOffset"),H.u16("messageDataSize"),H.u8("messageInstructionIndex"),H.blob(20,"ethAddress"),H.blob(64,"signature"),H.u8("recoveryId")]),Aw=class e{constructor(){}static publicKeyToEthAddress(t){Dt(t.length===G7,`Public key must be ${G7} bytes but received ${t.length} bytes`);try{return Pe.Buffer.from(R7.keccak_256(dt(t))).slice(-F3)}catch(r){throw new Error(`Error constructing Ethereum address: ${r}`)}}static createInstructionWithPublicKey(t){let{publicKey:r,message:n,signature:i,recoveryId:o,instructionIndex:s}=t;return e.createInstructionWithEthAddress({ethAddress:e.publicKeyToEthAddress(r),message:n,signature:i,recoveryId:o,instructionIndex:s})}static createInstructionWithEthAddress(t){let{ethAddress:r,message:n,signature:i,recoveryId:o,instructionIndex:s=0}=t,a;typeof r=="string"?r.startsWith("0x")?a=Pe.Buffer.from(r.substr(2),"hex"):a=Pe.Buffer.from(r,"hex"):a=r,Dt(a.length===F3,`Address must be ${F3} bytes but received ${a.length} bytes`);let c=1+Fre,u=c,h=c+a.length,l=h+i.length+1,g=1,x=Pe.Buffer.alloc(V3.span+n.length);return V3.encode({numSignatures:g,signatureOffset:h,signatureInstructionIndex:s,ethAddressOffset:u,ethAddressInstructionIndex:s,messageDataOffset:l,messageDataSize:n.length,messageInstructionIndex:s,signature:dt(i),ethAddress:dt(a),recoveryId:o},x),x.fill(dt(n),V3.span),new $t({keys:[],programId:e.programId,data:x})}static createInstructionWithPrivateKey(t){let{privateKey:r,message:n,instructionIndex:i}=t;Dt(r.length===j7,`Private key must be ${j7} bytes but received ${r.length} bytes`);try{let o=dt(r),s=Kre(o,!1).slice(1),a=Pe.Buffer.from(R7.keccak_256(dt(n))),[c,u]=Lre(a,o);return this.createInstructionWithPublicKey({publicKey:s,message:n,signature:c,recoveryId:u,instructionIndex:i})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};Aw.programId=new ye("KeccakSecp256k11111111111111111111111111111");var p9=new ye("StakeConfig11111111111111111111111111111111"),Sw=class{constructor(t,r){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=r}},Ml=class{constructor(t,r,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=r,this.custodian=n}};Ml.default=new Ml(0,0,ye.default);var i6=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=H.u32("instruction").decode(t.data),i;for(let[o,s]of Object.entries(Pn))if(s.index==n){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{authorized:r,lockup:n}=Wt(Pn.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new Sw(new ye(r.staker),new ye(r.withdrawer)),lockup:new Ml(n.unixTimestamp,n.epoch,new ye(n.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),Wt(Pn.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{newAuthorized:r,stakeAuthorizationType:n}=Wt(Pn.Authorize,t.data),i={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new ye(r),stakeAuthorizationType:{index:n}};return t.keys.length>3&&(i.custodianPubkey=t.keys[3].pubkey),i}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{newAuthorized:r,stakeAuthorizationType:n,authoritySeed:i,authorityOwner:o}=Wt(Pn.AuthorizeWithSeed,t.data),s={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:i,authorityOwner:new ye(o),newAuthorizedPubkey:new ye(r),stakeAuthorizationType:{index:n}};return t.keys.length>3&&(s.custodianPubkey=t.keys[3].pubkey),s}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:r}=Wt(Pn.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:r}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Wt(Pn.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);let{lamports:r}=Wt(Pn.Withdraw,t.data),n={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:r};return t.keys.length>5&&(n.custodianPubkey=t.keys[5].pubkey),n}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Wt(Pn.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(Dh.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,r){if(t.length<r)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${r}`)}},Pn=Object.freeze({Initialize:{index:0,layout:H.struct([H.u32("instruction"),Zee(),Qee()])},Authorize:{index:1,layout:H.struct([H.u32("instruction"),bt("newAuthorized"),H.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:H.struct([H.u32("instruction")])},Split:{index:3,layout:H.struct([H.u32("instruction"),H.ns64("lamports")])},Withdraw:{index:4,layout:H.struct([H.u32("instruction"),H.ns64("lamports")])},Deactivate:{index:5,layout:H.struct([H.u32("instruction")])},Merge:{index:7,layout:H.struct([H.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:H.struct([H.u32("instruction"),bt("newAuthorized"),H.u32("stakeAuthorizationType"),Bl("authoritySeed"),bt("authorityOwner")])}}),Vre=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),Dh=class{constructor(){}static initialize(t){let{stakePubkey:r,authorized:n,lockup:i}=t,o=i||Ml.default,s=Pn.Initialize,a=Rt(s,{authorized:{staker:dt(n.staker.toBuffer()),withdrawer:dt(n.withdrawer.toBuffer())},lockup:{unixTimestamp:o.unixTimestamp,epoch:o.epoch,custodian:dt(o.custodian.toBuffer())}}),c={keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Oh,isSigner:!1,isWritable:!1}],programId:this.programId,data:a};return new $t(c)}static createAccountWithSeed(t){let r=new Gt;r.add(pi.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:i,lockup:o}=t;return r.add(this.initialize({stakePubkey:n,authorized:i,lockup:o}))}static createAccount(t){let r=new Gt;r.add(pi.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:i,lockup:o}=t;return r.add(this.initialize({stakePubkey:n,authorized:i,lockup:o}))}static delegate(t){let{stakePubkey:r,authorizedPubkey:n,votePubkey:i}=t,o=Pn.Delegate,s=Rt(o);return new Gt().add({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:Sa,isSigner:!1,isWritable:!1},{pubkey:hw,isSigner:!1,isWritable:!1},{pubkey:p9,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static authorize(t){let{stakePubkey:r,authorizedPubkey:n,newAuthorizedPubkey:i,stakeAuthorizationType:o,custodianPubkey:s}=t,a=Pn.Authorize,c=Rt(a,{newAuthorized:dt(i.toBuffer()),stakeAuthorizationType:o.index}),u=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Sa,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return s&&u.push({pubkey:s,isSigner:!1,isWritable:!1}),new Gt().add({keys:u,programId:this.programId,data:c})}static authorizeWithSeed(t){let{stakePubkey:r,authorityBase:n,authoritySeed:i,authorityOwner:o,newAuthorizedPubkey:s,stakeAuthorizationType:a,custodianPubkey:c}=t,u=Pn.AuthorizeWithSeed,h=Rt(u,{newAuthorized:dt(s.toBuffer()),stakeAuthorizationType:a.index,authoritySeed:i,authorityOwner:dt(o.toBuffer())}),l=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:Sa,isSigner:!1,isWritable:!1}];return c&&l.push({pubkey:c,isSigner:!1,isWritable:!1}),new Gt().add({keys:l,programId:this.programId,data:h})}static splitInstruction(t){let{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:o}=t,s=Pn.Split,a=Rt(s,{lamports:o});return new $t({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static split(t){let r=new Gt;return r.add(pi.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t){let{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:o,seed:s,lamports:a}=t,c=new Gt;return c.add(pi.allocate({accountPubkey:i,basePubkey:o,seed:s,space:this.space,programId:this.programId})),c.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:a}))}static merge(t){let{stakePubkey:r,sourceStakePubKey:n,authorizedPubkey:i}=t,o=Pn.Merge,s=Rt(o);return new Gt().add({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:Sa,isSigner:!1,isWritable:!1},{pubkey:hw,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static withdraw(t){let{stakePubkey:r,authorizedPubkey:n,toPubkey:i,lamports:o,custodianPubkey:s}=t,a=Pn.Withdraw,c=Rt(a,{lamports:o}),u=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:Sa,isSigner:!1,isWritable:!1},{pubkey:hw,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return s&&u.push({pubkey:s,isSigner:!1,isWritable:!1}),new Gt().add({keys:u,programId:this.programId,data:c})}static deactivate(t){let{stakePubkey:r,authorizedPubkey:n}=t,i=Pn.Deactivate,o=Rt(i);return new Gt().add({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Sa,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}};Dh.programId=new ye("Stake11111111111111111111111111111111111111");Dh.space=200;var Ew=class{constructor(t,r,n,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=r,this.authorizedWithdrawer=n,this.commission=i}},o6=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=H.u32("instruction").decode(t.data),i;for(let[o,s]of Object.entries(Oc))if(s.index==n){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);let{voteInit:r}=Wt(Oc.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new Ew(new ye(r.nodePubkey),new ye(r.authorizedVoter),new ye(r.authorizedWithdrawer),r.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{newAuthorized:r,voteAuthorizationType:n}=Wt(Oc.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new ye(r),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorized:i,voteAuthorizationType:o}}=Wt(Oc.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new ye(r),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new ye(i),voteAuthorizationType:{index:o},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:r}=Wt(Oc.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:r,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Lh.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,r){if(t.length<r)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${r}`)}},Oc=Object.freeze({InitializeAccount:{index:0,layout:H.struct([H.u32("instruction"),Xee()])},Authorize:{index:1,layout:H.struct([H.u32("instruction"),bt("newAuthorized"),H.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:H.struct([H.u32("instruction"),H.ns64("lamports")])},AuthorizeWithSeed:{index:10,layout:H.struct([H.u32("instruction"),ete()])}}),qre=Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),Lh=class e{constructor(){}static initializeAccount(t){let{votePubkey:r,nodePubkey:n,voteInit:i}=t,o=Oc.InitializeAccount,s=Rt(o,{voteInit:{nodePubkey:dt(i.nodePubkey.toBuffer()),authorizedVoter:dt(i.authorizedVoter.toBuffer()),authorizedWithdrawer:dt(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),a={keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Oh,isSigner:!1,isWritable:!1},{pubkey:Sa,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s};return new $t(a)}static createAccount(t){let r=new Gt;return r.add(pi.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),r.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){let{votePubkey:r,authorizedPubkey:n,newAuthorizedPubkey:i,voteAuthorizationType:o}=t,s=Oc.Authorize,a=Rt(s,{newAuthorized:dt(i.toBuffer()),voteAuthorizationType:o.index}),c=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Sa,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new Gt().add({keys:c,programId:this.programId,data:a})}static authorizeWithSeed(t){let{currentAuthorityDerivedKeyBasePubkey:r,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:o,voteAuthorizationType:s,votePubkey:a}=t,c=Oc.AuthorizeWithSeed,u=Rt(c,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:dt(n.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:dt(o.toBuffer()),voteAuthorizationType:s.index}}),h=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:Sa,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Gt().add({keys:h,programId:this.programId,data:u})}static withdraw(t){let{votePubkey:r,authorizedWithdrawerPubkey:n,lamports:i,toPubkey:o}=t,s=Oc.Withdraw,a=Rt(s,{lamports:i}),c=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new Gt().add({keys:c,programId:this.programId,data:a})}static safeWithdraw(t,r,n){if(t.lamports>r-n)throw new Error("Withdraw will leave vote account with insuffcient funds.");return e.withdraw(t)}};Lh.programId=new ye("Vote111111111111111111111111111111111111111");Lh.space=3731;var y9=new ye("Va1idator1nfo111111111111111111111111111111"),Hre=I.type({name:I.string(),website:I.optional(I.string()),details:I.optional(I.string()),keybaseUsername:I.optional(I.string())}),s6=class e{constructor(t,r){this.key=void 0,this.info=void 0,this.key=t,this.info=r}static fromConfigData(t){let r=[...t];if(Yi(r)!==2)return null;let i=[];for(let o=0;o<2;o++){let s=new ye(Ji(r,0,ka)),a=Ea(r)===1;i.push({publicKey:s,isSigner:a})}if(i[0].publicKey.equals(y9)&&i[1].isSigner){let o=Bl().decode(Pe.Buffer.from(r)),s=JSON.parse(o);return I.assert(s,Hre),new e(i[1].publicKey,s)}return null}},Wre=new ye("Vote111111111111111111111111111111111111111"),zre=H.struct([bt("nodePubkey"),bt("authorizedWithdrawer"),H.u8("commission"),H.nu64(),H.seq(H.struct([H.nu64("slot"),H.u32("confirmationCount")]),H.offset(H.u32(),-8),"votes"),H.u8("rootSlotValid"),H.nu64("rootSlot"),H.nu64(),H.seq(H.struct([H.nu64("epoch"),bt("authorizedVoter")]),H.offset(H.u32(),-8),"authorizedVoters"),H.struct([H.seq(H.struct([bt("authorizedPubkey"),H.nu64("epochOfLastAuthorizedSwitch"),H.nu64("targetEpoch")]),32,"buf"),H.nu64("idx"),H.u8("isEmpty")],"priorVoters"),H.nu64(),H.seq(H.struct([H.nu64("epoch"),H.nu64("credits"),H.nu64("prevCredits")]),H.offset(H.u32(),-8),"epochCredits"),H.struct([H.nu64("slot"),H.nu64("timestamp")],"lastTimestamp")]),a6=class e{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){let n=zre.decode(dt(t),4),i=n.rootSlot;return n.rootSlotValid||(i=null),new e({nodePubkey:new ye(n.nodePubkey),authorizedWithdrawer:new ye(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:i,authorizedVoters:n.authorizedVoters.map(jre),priorVoters:Gre(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}};function jre({authorizedVoter:e,epoch:t}){return{epoch:t,authorizedVoter:new ye(e)}}function $7({authorizedPubkey:e,epochOfLastAuthorizedSwitch:t,targetEpoch:r}){return{authorizedPubkey:new ye(e),epochOfLastAuthorizedSwitch:t,targetEpoch:r}}function Gre({buf:e,idx:t,isEmpty:r}){return r?[]:[...e.slice(t+1).map($7),...e.slice(0,t).map($7)]}var Y7={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function $re(e,t){let r=t===!1?"http":"https";if(!e)return Y7[r].devnet;let n=Y7[r][e];if(!n)throw new Error(`Unknown ${r} cluster: ${e}`);return n}async function Yre(e,t,r,n){let i,o;r&&Object.prototype.hasOwnProperty.call(r,"lastValidBlockHeight")||r&&Object.prototype.hasOwnProperty.call(r,"nonceValue")?(i=r,o=n):o=r;let s=o&&{skipPreflight:o.skipPreflight,preflightCommitment:o.preflightCommitment||o.commitment,minContextSlot:o.minContextSlot},a=await e.sendRawTransaction(t,s),c=o&&o.commitment,h=(await(i?e.confirmTransaction(i,c):e.confirmTransaction(a,c))).value;if(h.err)throw new Error(`Raw transaction ${a} failed (${JSON.stringify(h)})`);return a}var Jre=1e9;he.Account=z3;he.AddressLookupTableAccount=nm;he.AddressLookupTableInstruction=r6;he.AddressLookupTableProgram=om;he.Authorized=Sw;he.BLOCKHASH_CACHE_TIMEOUT_MS=i9;he.BPF_LOADER_DEPRECATED_PROGRAM_ID=Yee;he.BPF_LOADER_PROGRAM_ID=fte;he.BpfLoader=J3;he.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS=Ia;he.ComputeBudgetInstruction=n6;he.ComputeBudgetProgram=sm;he.Connection=t6;he.Ed25519Program=vw;he.Enum=W3;he.EpochSchedule=bw;he.FeeCalculatorLayout=t9;he.Keypair=ww;he.LAMPORTS_PER_SOL=Jre;he.LOOKUP_TABLE_INSTRUCTION_LAYOUTS=Rc;he.Loader=Uh;he.Lockup=Ml;he.MAX_SEED_LENGTH=Q7;he.Message=Ta;he.MessageAccountKeys=Cl;he.MessageV0=Rh;he.NONCE_ACCOUNT_LENGTH=$3;he.NonceAccount=gw;he.PACKET_DATA_SIZE=Wu;he.PUBLIC_KEY_LENGTH=ka;he.PublicKey=ye;he.SIGNATURE_LENGTH_IN_BYTES=Xy;he.SOLANA_SCHEMA=Zy;he.STAKE_CONFIG_ID=p9;he.STAKE_INSTRUCTION_LAYOUTS=Pn;he.SYSTEM_INSTRUCTION_LAYOUTS=sr;he.SYSVAR_CLOCK_PUBKEY=Sa;he.SYSVAR_EPOCH_SCHEDULE_PUBKEY=rte;he.SYSVAR_INSTRUCTIONS_PUBKEY=nte;he.SYSVAR_RECENT_BLOCKHASHES_PUBKEY=dw;he.SYSVAR_RENT_PUBKEY=Oh;he.SYSVAR_REWARDS_PUBKEY=ite;he.SYSVAR_SLOT_HASHES_PUBKEY=ote;he.SYSVAR_SLOT_HISTORY_PUBKEY=ste;he.SYSVAR_STAKE_HISTORY_PUBKEY=hw;he.Secp256k1Program=Aw;he.SendTransactionError=rm;he.SolanaJSONRPCError=we;he.SolanaJSONRPCErrorCode=mte;he.StakeAuthorizationLayout=Vre;he.StakeInstruction=i6;he.StakeProgram=Dh;he.Struct=Qy;he.SystemInstruction=Y3;he.SystemProgram=pi;he.Transaction=Gt;he.TransactionExpiredBlockheightExceededError=em;he.TransactionExpiredNonceInvalidError=Hu;he.TransactionExpiredTimeoutError=tm;he.TransactionInstruction=$t;he.TransactionMessage=j3;he.VALIDATOR_INFO_KEY=y9;he.VERSION_PREFIX_MASK=kw;he.VOTE_PROGRAM_ID=Wre;he.ValidatorInfo=s6;he.VersionedMessage=f6;he.VersionedTransaction=G3;he.VoteAccount=a6;he.VoteAuthorizationLayout=qre;he.VoteInit=Ew;he.VoteInstruction=o6;he.VoteProgram=Lh;he.clusterApiUrl=$re;he.sendAndConfirmRawTransaction=Yre;he.sendAndConfirmTransaction=pw});var kM=L(o1=>{"use strict";p();y();Object.defineProperty(o1,"__esModule",{value:!0});o1.version=void 0;o1.version="properties/5.7.0"});var zo=L(rn=>{"use strict";p();y();var gie=rn&&rn.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},bie=rn&&rn.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(h){return c([u,h])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(h){u=[6,h],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(rn,"__esModule",{value:!0});rn.Description=rn.deepCopy=rn.shallowCopy=rn.checkProperties=rn.resolveProperties=rn.getStatic=rn.defineReadOnly=void 0;var xie=Ti(),wie=kM(),s1=new xie.Logger(wie.version);function TM(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}rn.defineReadOnly=TM;function vie(e,t){for(var r=0;r<32;r++){if(e[t])return e[t];if(!e.prototype||typeof e.prototype!="object")break;e=Object.getPrototypeOf(e.prototype).constructor}return null}rn.getStatic=vie;function Aie(e){return gie(this,void 0,void 0,function(){var t,r;return bie(this,function(n){switch(n.label){case 0:return t=Object.keys(e).map(function(i){var o=e[i];return Promise.resolve(o).then(function(s){return{key:i,value:s}})}),[4,Promise.all(t)];case 1:return r=n.sent(),[2,r.reduce(function(i,o){return i[o.key]=o.value,i},{})]}})})}rn.resolveProperties=Aie;function Sie(e,t){(!e||typeof e!="object")&&s1.throwArgumentError("invalid object","object",e),Object.keys(e).forEach(function(r){t[r]||s1.throwArgumentError("invalid object key - "+r,"transaction:"+r,e)})}rn.checkProperties=Sie;function Eie(e){var t={};for(var r in e)t[r]=e[r];return t}rn.shallowCopy=Eie;var Iie={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function PM(e){if(e==null||Iie[typeof e])return!0;if(Array.isArray(e)||typeof e=="object"){if(!Object.isFrozen(e))return!1;for(var t=Object.keys(e),r=0;r<t.length;r++){var n=null;try{n=e[t[r]]}catch{continue}if(!PM(n))return!1}return!0}return s1.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function kie(e){if(PM(e))return e;if(Array.isArray(e))return Object.freeze(e.map(function(i){return a1(i)}));if(typeof e=="object"){var t={};for(var r in e){var n=e[r];n!==void 0&&TM(t,r,a1(n))}return t}return s1.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function a1(e){return kie(e)}rn.deepCopy=a1;var Tie=function(){function e(t){for(var r in t)this[r]=a1(t[r])}return e}();rn.Description=Tie});var NM=L(u1=>{"use strict";p();y();Object.defineProperty(u1,"__esModule",{value:!0});u1.AddressZero=void 0;u1.AddressZero="0x0000000000000000000000000000000000000000"});var UM=L(Bn=>{"use strict";p();y();Object.defineProperty(Bn,"__esModule",{value:!0});Bn.MaxInt256=Bn.MinInt256=Bn.MaxUint256=Bn.WeiPerEther=Bn.Two=Bn.One=Bn.Zero=Bn.NegativeOne=void 0;var nf=sh(),Mie=nf.BigNumber.from(-1);Bn.NegativeOne=Mie;var Rie=nf.BigNumber.from(0);Bn.Zero=Rie;var Oie=nf.BigNumber.from(1);Bn.One=Oie;var Nie=nf.BigNumber.from(2);Bn.Two=Nie;var Uie=nf.BigNumber.from("1000000000000000000");Bn.WeiPerEther=Uie;var Die=nf.BigNumber.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");Bn.MaxUint256=Die;var Lie=nf.BigNumber.from("-0x8000000000000000000000000000000000000000000000000000000000000000");Bn.MinInt256=Lie;var Kie=nf.BigNumber.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");Bn.MaxInt256=Kie});var DM=L(f1=>{"use strict";p();y();Object.defineProperty(f1,"__esModule",{value:!0});f1.HashZero=void 0;f1.HashZero="0x0000000000000000000000000000000000000000000000000000000000000000"});var LM=L(l1=>{"use strict";p();y();Object.defineProperty(l1,"__esModule",{value:!0});l1.EtherSymbol=void 0;l1.EtherSymbol="\u039E"});var q6=L(vr=>{"use strict";p();y();Object.defineProperty(vr,"__esModule",{value:!0});vr.EtherSymbol=vr.HashZero=vr.MaxInt256=vr.MinInt256=vr.MaxUint256=vr.WeiPerEther=vr.Two=vr.One=vr.Zero=vr.NegativeOne=vr.AddressZero=void 0;var Fie=NM();Object.defineProperty(vr,"AddressZero",{enumerable:!0,get:function(){return Fie.AddressZero}});var of=UM();Object.defineProperty(vr,"NegativeOne",{enumerable:!0,get:function(){return of.NegativeOne}});Object.defineProperty(vr,"Zero",{enumerable:!0,get:function(){return of.Zero}});Object.defineProperty(vr,"One",{enumerable:!0,get:function(){return of.One}});Object.defineProperty(vr,"Two",{enumerable:!0,get:function(){return of.Two}});Object.defineProperty(vr,"WeiPerEther",{enumerable:!0,get:function(){return of.WeiPerEther}});Object.defineProperty(vr,"MaxUint256",{enumerable:!0,get:function(){return of.MaxUint256}});Object.defineProperty(vr,"MinInt256",{enumerable:!0,get:function(){return of.MinInt256}});Object.defineProperty(vr,"MaxInt256",{enumerable:!0,get:function(){return of.MaxInt256}});var Vie=DM();Object.defineProperty(vr,"HashZero",{enumerable:!0,get:function(){return Vie.HashZero}});var qie=LM();Object.defineProperty(vr,"EtherSymbol",{enumerable:!0,get:function(){return qie.EtherSymbol}})});var KM=L(d1=>{"use strict";p();y();Object.defineProperty(d1,"__esModule",{value:!0});d1.version=void 0;d1.version="strings/5.7.0"});var p1=L($r=>{"use strict";p();y();Object.defineProperty($r,"__esModule",{value:!0});$r.toUtf8CodePoints=$r.toUtf8String=$r._toUtf8String=$r._toEscapedUtf8String=$r.toUtf8Bytes=$r.Utf8ErrorFuncs=$r.Utf8ErrorReason=$r.UnicodeNormalizationForm=void 0;var FM=fn(),Hie=Ti(),Wie=KM(),VM=new Hie.Logger(Wie.version),h1;(function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"})(h1=$r.UnicodeNormalizationForm||($r.UnicodeNormalizationForm={}));var Go;(function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"})(Go=$r.Utf8ErrorReason||($r.Utf8ErrorReason={}));function zie(e,t,r,n,i){return VM.throwArgumentError("invalid codepoint at offset "+t+"; "+e,"bytes",r)}function qM(e,t,r,n,i){if(e===Go.BAD_PREFIX||e===Go.UNEXPECTED_CONTINUE){for(var o=0,s=t+1;s<r.length&&r[s]>>6===2;s++)o++;return o}return e===Go.OVERRUN?r.length-t-1:0}function jie(e,t,r,n,i){return e===Go.OVERLONG?(n.push(i),0):(n.push(65533),qM(e,t,r,n,i))}$r.Utf8ErrorFuncs=Object.freeze({error:zie,ignore:qM,replace:jie});function W6(e,t){t==null&&(t=$r.Utf8ErrorFuncs.error),e=(0,FM.arrayify)(e);for(var r=[],n=0;n<e.length;){var i=e[n++];if(!(i>>7)){r.push(i);continue}var o=null,s=null;if((i&224)===192)o=1,s=127;else if((i&240)===224)o=2,s=2047;else if((i&248)===240)o=3,s=65535;else{(i&192)===128?n+=t(Go.UNEXPECTED_CONTINUE,n-1,e,r):n+=t(Go.BAD_PREFIX,n-1,e,r);continue}if(n-1+o>=e.length){n+=t(Go.OVERRUN,n-1,e,r);continue}for(var a=i&(1<<8-o-1)-1,c=0;c<o;c++){var u=e[n];if((u&192)!=128){n+=t(Go.MISSING_CONTINUE,n,e,r),a=null;break}a=a<<6|u&63,n++}if(a!==null){if(a>1114111){n+=t(Go.OUT_OF_RANGE,n-1-o,e,r,a);continue}if(a>=55296&&a<=57343){n+=t(Go.UTF16_SURROGATE,n-1-o,e,r,a);continue}if(a<=s){n+=t(Go.OVERLONG,n-1-o,e,r,a);continue}r.push(a)}}return r}function HM(e,t){t===void 0&&(t=h1.current),t!=h1.current&&(VM.checkNormalize(),e=e.normalize(t));for(var r=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(i&63|128);else if((i&64512)==55296){n++;var o=e.charCodeAt(n);if(n>=e.length||(o&64512)!==56320)throw new Error("invalid utf-8 string");var s=65536+((i&1023)<<10)+(o&1023);r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128)}return(0,FM.arrayify)(r)}$r.toUtf8Bytes=HM;function H6(e){var t="0000"+e.toString(16);return"\\u"+t.substring(t.length-4)}function Gie(e,t){return'"'+W6(e,t).map(function(r){if(r<256){switch(r){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(r>=32&&r<127)return String.fromCharCode(r)}return r<=65535?H6(r):(r-=65536,H6((r>>10&1023)+55296)+H6((r&1023)+56320))}).join("")+'"'}$r._toEscapedUtf8String=Gie;function WM(e){return e.map(function(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))}).join("")}$r._toUtf8String=WM;function $ie(e,t){return WM(W6(e,t))}$r.toUtf8String=$ie;function Yie(e,t){return t===void 0&&(t=h1.current),W6(HM(e,t))}$r.toUtf8CodePoints=Yie});var jM=L(Jh=>{"use strict";p();y();Object.defineProperty(Jh,"__esModule",{value:!0});Jh.parseBytes32String=Jh.formatBytes32String=void 0;var Jie=q6(),z6=fn(),zM=p1();function Zie(e){var t=(0,zM.toUtf8Bytes)(e);if(t.length>31)throw new Error("bytes32 string must be less than 32 bytes");return(0,z6.hexlify)((0,z6.concat)([t,Jie.HashZero]).slice(0,32))}Jh.formatBytes32String=Zie;function Qie(e){var t=(0,z6.arrayify)(e);if(t.length!==32)throw new Error("invalid bytes32 - not 32 bytes long");if(t[31]!==0)throw new Error("invalid bytes32 string - no null terminator");for(var r=31;t[r-1]===0;)r--;return(0,zM.toUtf8String)(t.slice(0,r))}Jh.parseBytes32String=Qie});var ZM=L(Ca=>{"use strict";p();y();Object.defineProperty(Ca,"__esModule",{value:!0});Ca.nameprep=Ca._nameprepTableC=Ca._nameprepTableB2=Ca._nameprepTableA1=void 0;var Tm=p1();function Xie(e){if(e.length%4!==0)throw new Error("bad data");for(var t=[],r=0;r<e.length;r+=4)t.push(parseInt(e.substring(r,r+4),16));return t}function j6(e,t){t||(t=function(i){return[parseInt(i,16)]});var r=0,n={};return e.split(",").forEach(function(i){var o=i.split(":");r+=parseInt(o[0],16),n[r]=t(o[1])}),n}function GM(e){var t=0;return e.split(",").map(function(r){var n=r.split("-");n.length===1?n[1]="0":n[1]===""&&(n[1]="1");var i=t+parseInt(n[0],16);return t=parseInt(n[1],16),{l:i,h:t}})}function G6(e,t){for(var r=0,n=0;n<t.length;n++){var i=t[n];if(r+=i.l,e>=r&&e<=r+i.h&&(e-r)%(i.d||1)===0){if(i.e&&i.e.indexOf(e-r)!==-1)continue;return i}}return null}var eoe=GM("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),toe="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(function(e){return parseInt(e,16)}),roe=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],noe=j6("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),ioe=j6("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),ooe=j6("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",Xie),soe=GM("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function aoe(e){return e.reduce(function(t,r){return r.forEach(function(n){t.push(n)}),t},[])}function $M(e){return!!G6(e,eoe)}Ca._nameprepTableA1=$M;function YM(e){var t=G6(e,roe);if(t)return[e+t.s];var r=noe[e];if(r)return r;var n=ioe[e];if(n)return[e+n[0]];var i=ooe[e];return i||null}Ca._nameprepTableB2=YM;function JM(e){return!!G6(e,soe)}Ca._nameprepTableC=JM;function coe(e){if(e.match(/^[a-z0-9-]*$/i)&&e.length<=59)return e.toLowerCase();var t=(0,Tm.toUtf8CodePoints)(e);t=aoe(t.map(function(n){if(toe.indexOf(n)>=0)return[];if(n>=65024&&n<=65039)return[];var i=YM(n);return i||[n]})),t=(0,Tm.toUtf8CodePoints)((0,Tm._toUtf8String)(t),Tm.UnicodeNormalizationForm.NFKC),t.forEach(function(n){if(JM(n))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")}),t.forEach(function(n){if($M(n))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")});var r=(0,Tm._toUtf8String)(t);if(r.substring(0,1)==="-"||r.substring(2,4)==="--"||r.substring(r.length-1)==="-")throw new Error("invalid hyphen");return r}Ca.nameprep=coe});var sf=L(Vr=>{"use strict";p();y();Object.defineProperty(Vr,"__esModule",{value:!0});Vr.nameprep=Vr.parseBytes32String=Vr.formatBytes32String=Vr.UnicodeNormalizationForm=Vr.Utf8ErrorReason=Vr.Utf8ErrorFuncs=Vr.toUtf8String=Vr.toUtf8CodePoints=Vr.toUtf8Bytes=Vr._toEscapedUtf8String=void 0;var QM=jM();Object.defineProperty(Vr,"formatBytes32String",{enumerable:!0,get:function(){return QM.formatBytes32String}});Object.defineProperty(Vr,"parseBytes32String",{enumerable:!0,get:function(){return QM.parseBytes32String}});var uoe=ZM();Object.defineProperty(Vr,"nameprep",{enumerable:!0,get:function(){return uoe.nameprep}});var Ll=p1();Object.defineProperty(Vr,"_toEscapedUtf8String",{enumerable:!0,get:function(){return Ll._toEscapedUtf8String}});Object.defineProperty(Vr,"toUtf8Bytes",{enumerable:!0,get:function(){return Ll.toUtf8Bytes}});Object.defineProperty(Vr,"toUtf8CodePoints",{enumerable:!0,get:function(){return Ll.toUtf8CodePoints}});Object.defineProperty(Vr,"toUtf8String",{enumerable:!0,get:function(){return Ll.toUtf8String}});Object.defineProperty(Vr,"UnicodeNormalizationForm",{enumerable:!0,get:function(){return Ll.UnicodeNormalizationForm}});Object.defineProperty(Vr,"Utf8ErrorFuncs",{enumerable:!0,get:function(){return Ll.Utf8ErrorFuncs}});Object.defineProperty(Vr,"Utf8ErrorReason",{enumerable:!0,get:function(){return Ll.Utf8ErrorReason}})});var $6=L(y1=>{"use strict";p();y();Object.defineProperty(y1,"__esModule",{value:!0});y1.id=void 0;var foe=bu(),loe=sf();function doe(e){return(0,foe.keccak256)((0,loe.toUtf8Bytes)(e))}y1.id=doe});var Y6=L(m1=>{"use strict";p();y();Object.defineProperty(m1,"__esModule",{value:!0});m1.version=void 0;m1.version="hash/5.7.0"});var eR=L(Zh=>{"use strict";p();y();Object.defineProperty(Zh,"__esModule",{value:!0});Zh.encode=Zh.decode=void 0;var XM=fn();function hoe(e){e=atob(e);for(var t=[],r=0;r<e.length;r++)t.push(e.charCodeAt(r));return(0,XM.arrayify)(t)}Zh.decode=hoe;function poe(e){e=(0,XM.arrayify)(e);for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}Zh.encode=poe});var rR=L(Qh=>{"use strict";p();y();Object.defineProperty(Qh,"__esModule",{value:!0});Qh.encode=Qh.decode=void 0;var tR=eR();Object.defineProperty(Qh,"decode",{enumerable:!0,get:function(){return tR.decode}});Object.defineProperty(Qh,"encode",{enumerable:!0,get:function(){return tR.encode}})});var Z6=L(Cn=>{"use strict";p();y();Object.defineProperty(Cn,"__esModule",{value:!0});Cn.read_emoji_trie=Cn.read_zero_terminated_array=Cn.read_mapped_map=Cn.read_member_array=Cn.signed=Cn.read_compressed_payload=Cn.read_payload=Cn.decode_arithmetic=void 0;function iR(e,t){t==null&&(t=1);var r=[],n=r.forEach,i=function(o,s){n.call(o,function(a){s>0&&Array.isArray(a)?i(a,s-1):r.push(a)})};return i(e,t),r}function yoe(e){for(var t={},r=0;r<e.length;r++){var n=e[r];t[n[0]]=n[1]}return t}function oR(e){var t=0;function r(){return e[t++]<<8|e[t++]}for(var n=r(),i=1,o=[0,1],s=1;s<n;s++)o.push(i+=r());var a=r(),c=t;t+=a;var u=0,h=0;function l(){return u==0&&(h=h<<8|e[t++],u=8),h>>--u&1}for(var g=31,x=Math.pow(2,g),A=x>>>1,E=A>>1,B=x-1,M=0,s=0;s<g;s++)M=M<<1|l();for(var N=[],R=0,V=x;;){for(var q=Math.floor(((M-R+1)*i-1)/V),W=0,G=n;G-W>1;){var z=W+G>>>1;q<o[z]?G=z:W=z}if(W==0)break;N.push(W);for(var te=R+Math.floor(V*o[W]/i),_=R+Math.floor(V*o[W+1]/i)-1;!((te^_)&A);)M=M<<1&B|l(),te=te<<1&B,_=_<<1&B|1;for(;te&~_&E;)M=M&A|M<<1&B>>>1|l(),te=te<<1^A,_=(_^A)<<1|A|1;R=te,V=1+_-te}var f=n-4;return N.map(function(m){switch(m-f){case 3:return f+65792+(e[c++]<<16|e[c++]<<8|e[c++]);case 2:return f+256+(e[c++]<<8|e[c++]);case 1:return f+e[c++];default:return m-1}})}Cn.decode_arithmetic=oR;function sR(e){var t=0;return function(){return e[t++]}}Cn.read_payload=sR;function moe(e){return sR(oR(e))}Cn.read_compressed_payload=moe;function aR(e){return e&1?~e>>1:e>>1}Cn.signed=aR;function goe(e,t){for(var r=Array(e),n=0;n<e;n++)r[n]=1+t();return r}function nR(e,t){for(var r=Array(e),n=0,i=-1;n<e;n++)r[n]=i+=1+t();return r}function boe(e,t){for(var r=Array(e),n=0,i=0;n<e;n++)r[n]=i+=aR(t());return r}function J6(e,t){for(var r=nR(e(),e),n=e(),i=nR(n,e),o=goe(n,e),s=0;s<n;s++)for(var a=0;a<o[s];a++)r.push(i[s]+a);return t?r.map(function(c){return t[c]}):r}Cn.read_member_array=J6;function xoe(e){for(var t=[];;){var r=e();if(r==0)break;t.push(woe(r,e))}for(;;){var r=e()-1;if(r<0)break;t.push(voe(r,e))}return yoe(iR(t))}Cn.read_mapped_map=xoe;function cR(e){for(var t=[];;){var r=e();if(r==0)break;t.push(r)}return t}Cn.read_zero_terminated_array=cR;function uR(e,t,r){for(var n=Array(e).fill(void 0).map(function(){return[]}),i=0;i<t;i++)boe(e,r).forEach(function(o,s){return n[s].push(o)});return n}function woe(e,t){var r=1+t(),n=t(),i=cR(t),o=uR(i.length,1+e,t);return iR(o.map(function(s,a){var c=s[0],u=s.slice(1);return Array(i[a]).fill(void 0).map(function(h,l){var g=l*n;return[c+l*r,u.map(function(x){return x+g})]})}))}function voe(e,t){var r=1+t(),n=uR(r,1+e,t);return n.map(function(i){return[i[0],i.slice(1)]})}function Aoe(e){var t=J6(e).sort(function(n,i){return n-i});return r();function r(){for(var n=[];;){var i=J6(e,t);if(i.length==0)break;n.push({set:new Set(i),node:r()})}n.sort(function(h,l){return l.set.size-h.set.size});var o=e(),s=o%3;o=o/3|0;var a=!!(o&1);o>>=1;var c=o==1,u=o==2;return{branches:n,valid:s,fe0f:a,save:c,check:u}}}Cn.read_emoji_trie=Aoe});var fR=L(g1=>{"use strict";p();y();Object.defineProperty(g1,"__esModule",{value:!0});g1.getData=void 0;var Soe=rR(),Eoe=Z6();function Ioe(){return(0,Eoe.read_compressed_payload)((0,Soe.decode)("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}g1.getData=Ioe});var pR=L(Xh=>{"use strict";p();y();Object.defineProperty(Xh,"__esModule",{value:!0});Xh.ens_normalize=Xh.ens_normalize_post_check=void 0;var koe=sf(),Toe=fR(),b1=(0,Toe.getData)(),x1=Z6(),Poe=new Set((0,x1.read_member_array)(b1)),_oe=new Set((0,x1.read_member_array)(b1)),Boe=(0,x1.read_mapped_map)(b1),Coe=(0,x1.read_emoji_trie)(b1),lR=45,dR=95;function hR(e){return(0,koe.toUtf8CodePoints)(e)}function Moe(e){return e.filter(function(t){return t!=65039})}function Q6(e){for(var t=0,r=e.split(".");t<r.length;t++){var n=r[t],i=hR(n);try{for(var o=i.lastIndexOf(dR)-1;o>=0;o--)if(i[o]!==dR)throw new Error("underscore only allowed at start");if(i.length>=4&&i.every(function(s){return s<128})&&i[2]===lR&&i[3]===lR)throw new Error("invalid label extension")}catch(s){throw new Error('Invalid label "'+n+'": '+s.message)}}return e}Xh.ens_normalize_post_check=Q6;function Roe(e){return Q6(Ooe(e,Moe))}Xh.ens_normalize=Roe;function Ooe(e,t){for(var r=hR(e).reverse(),n=[];r.length;){var i=Uoe(r);if(i){n.push.apply(n,t(i));continue}var o=r.pop();if(Poe.has(o)){n.push(o);continue}if(!_oe.has(o)){var s=Boe[o];if(s){n.push.apply(n,s);continue}throw new Error("Disallowed codepoint: 0x"+o.toString(16).toUpperCase())}}return Q6(Noe(String.fromCodePoint.apply(String,n)))}function Noe(e){return e.normalize("NFC")}function Uoe(e,t){var r,n=Coe,i,o,s=[],a=e.length;t&&(t.length=0);for(var c=function(){var h=e[--a];if(n=(r=n.branches.find(function(l){return l.set.has(h)}))===null||r===void 0?void 0:r.node,!n)return"break";if(n.save)o=h;else if(n.check&&h===o)return"break";s.push(h),n.fe0f&&(s.push(65039),a>0&&e[a-1]==65039&&a--),n.valid&&(i=s.slice(),n.valid==2&&i.splice(1,1),t&&t.push.apply(t,e.slice(a).reverse()),e.length=a)};a;){var u=c();if(u==="break")break}return i}});var X6=L(Ma=>{"use strict";p();y();Object.defineProperty(Ma,"__esModule",{value:!0});Ma.dnsEncode=Ma.namehash=Ma.isValidName=Ma.ensNormalize=void 0;var w1=fn(),gR=sf(),yR=bu(),Doe=Ti(),Loe=Y6(),Koe=new Doe.Logger(Loe.version),Foe=pR(),bR=new Uint8Array(32);bR.fill(0);function mR(e){if(e.length===0)throw new Error("invalid ENS name; empty component");return e}function v1(e){var t=(0,gR.toUtf8Bytes)((0,Foe.ens_normalize)(e)),r=[];if(e.length===0)return r;for(var n=0,i=0;i<t.length;i++){var o=t[i];o===46&&(r.push(mR(t.slice(n,i))),n=i+1)}if(n>=t.length)throw new Error("invalid ENS name; empty component");return r.push(mR(t.slice(n))),r}function Voe(e){return v1(e).map(function(t){return(0,gR.toUtf8String)(t)}).join(".")}Ma.ensNormalize=Voe;function qoe(e){try{return v1(e).length!==0}catch{}return!1}Ma.isValidName=qoe;function Hoe(e){typeof e!="string"&&Koe.throwArgumentError("invalid ENS name; not a string","name",e);for(var t=bR,r=v1(e);r.length;)t=(0,yR.keccak256)((0,w1.concat)([t,(0,yR.keccak256)(r.pop())]));return(0,w1.hexlify)(t)}Ma.namehash=Hoe;function Woe(e){return(0,w1.hexlify)((0,w1.concat)(v1(e).map(function(t){if(t.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");var r=new Uint8Array(t.length+1);return r.set(t,1),r[0]=r.length-1,r})))+"00"}Ma.dnsEncode=Woe});var xR=L(Kl=>{"use strict";p();y();Object.defineProperty(Kl,"__esModule",{value:!0});Kl.hashMessage=Kl.messagePrefix=void 0;var zoe=fn(),joe=bu(),e8=sf();Kl.messagePrefix=`Ethereum Signed Message:
`;function Goe(e){return typeof e=="string"&&(e=(0,e8.toUtf8Bytes)(e)),(0,joe.keccak256)((0,zoe.concat)([(0,e8.toUtf8Bytes)(Kl.messagePrefix),(0,e8.toUtf8Bytes)(String(e.length)),e]))}Kl.hashMessage=Goe});var PR=L(af=>{"use strict";p();y();var $oe=af&&af.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},Yoe=af&&af.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(h){return c([u,h])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(h){u=[6,h],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(af,"__esModule",{value:!0});af.TypedDataEncoder=void 0;var SR=cy(),Vl=sh(),Gn=fn(),e0=bu(),Fl=zo(),Joe=Ti(),Zoe=Y6(),Rr=new Joe.Logger(Zoe.version),ER=$6(),IR=new Uint8Array(32);IR.fill(0);var Qoe=Vl.BigNumber.from(-1),kR=Vl.BigNumber.from(0),TR=Vl.BigNumber.from(1),Xoe=Vl.BigNumber.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function ese(e){var t=(0,Gn.arrayify)(e),r=t.length%32;return r?(0,Gn.hexConcat)([t,IR.slice(r)]):(0,Gn.hexlify)(t)}var tse=(0,Gn.hexZeroPad)(TR.toHexString(),32),rse=(0,Gn.hexZeroPad)(kR.toHexString(),32),wR={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},t8=["name","version","chainId","verifyingContract","salt"];function vR(e){return function(t){return typeof t!="string"&&Rr.throwArgumentError("invalid domain value for "+JSON.stringify(e),"domain."+e,t),t}}var nse={name:vR("name"),version:vR("version"),chainId:function(e){try{return Vl.BigNumber.from(e).toString()}catch{}return Rr.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",e)},verifyingContract:function(e){try{return(0,SR.getAddress)(e).toLowerCase()}catch{}return Rr.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){try{var t=(0,Gn.arrayify)(e);if(t.length!==32)throw new Error("bad length");return(0,Gn.hexlify)(t)}catch{}return Rr.throwArgumentError('invalid domain value "salt"',"domain.salt",e)}};function r8(e){{var t=e.match(/^(u?)int(\d*)$/);if(t){var r=t[1]==="",n=parseInt(t[2]||"256");(n%8!==0||n>256||t[2]&&t[2]!==String(n))&&Rr.throwArgumentError("invalid numeric width","type",e);var i=Xoe.mask(r?n-1:n),o=r?i.add(TR).mul(Qoe):kR;return function(a){var c=Vl.BigNumber.from(a);return(c.lt(o)||c.gt(i))&&Rr.throwArgumentError("value out-of-bounds for "+e,"value",a),(0,Gn.hexZeroPad)(c.toTwos(256).toHexString(),32)}}}{var t=e.match(/^bytes(\d+)$/);if(t){var s=parseInt(t[1]);return(s===0||s>32||t[1]!==String(s))&&Rr.throwArgumentError("invalid bytes width","type",e),function(c){var u=(0,Gn.arrayify)(c);return u.length!==s&&Rr.throwArgumentError("invalid length for "+e,"value",c),ese(c)}}}switch(e){case"address":return function(a){return(0,Gn.hexZeroPad)((0,SR.getAddress)(a),32)};case"bool":return function(a){return a?tse:rse};case"bytes":return function(a){return(0,e0.keccak256)(a)};case"string":return function(a){return(0,ER.id)(a)}}return null}function AR(e,t){return e+"("+t.map(function(r){var n=r.name,i=r.type;return i+" "+n}).join(",")+")"}var ise=function(){function e(t){(0,Fl.defineReadOnly)(this,"types",Object.freeze((0,Fl.deepCopy)(t))),(0,Fl.defineReadOnly)(this,"_encoderCache",{}),(0,Fl.defineReadOnly)(this,"_types",{});var r={},n={},i={};Object.keys(t).forEach(function(l){r[l]={},n[l]=[],i[l]={}});var o=function(l){var g={};t[l].forEach(function(x){g[x.name]&&Rr.throwArgumentError("duplicate variable name "+JSON.stringify(x.name)+" in "+JSON.stringify(l),"types",t),g[x.name]=!0;var A=x.type.match(/^([^\x5b]*)(\x5b|$)/)[1];A===l&&Rr.throwArgumentError("circular type reference to "+JSON.stringify(A),"types",t);var E=r8(A);E||(n[A]||Rr.throwArgumentError("unknown type "+JSON.stringify(A),"types",t),n[A].push(l),r[l][A]=!0)})};for(var s in t)o(s);var a=Object.keys(n).filter(function(l){return n[l].length===0});a.length===0?Rr.throwArgumentError("missing primary type","types",t):a.length>1&&Rr.throwArgumentError("ambiguous primary types or unused types: "+a.map(function(l){return JSON.stringify(l)}).join(", "),"types",t),(0,Fl.defineReadOnly)(this,"primaryType",a[0]);function c(l,g){g[l]&&Rr.throwArgumentError("circular type reference to "+JSON.stringify(l),"types",t),g[l]=!0,Object.keys(r[l]).forEach(function(x){n[x]&&(c(x,g),Object.keys(g).forEach(function(A){i[A][x]=!0}))}),delete g[l]}c(this.primaryType,{});for(var u in i){var h=Object.keys(i[u]);h.sort(),this._types[u]=AR(u,t[u])+h.map(function(l){return AR(l,t[l])}).join("")}}return e.prototype.getEncoder=function(t){var r=this._encoderCache[t];return r||(r=this._encoderCache[t]=this._getEncoder(t)),r},e.prototype._getEncoder=function(t){var r=this;{var n=r8(t);if(n)return n}var i=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){var o=i[1],s=this.getEncoder(o),a=parseInt(i[3]);return function(h){a>=0&&h.length!==a&&Rr.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",h);var l=h.map(s);return r._types[o]&&(l=l.map(e0.keccak256)),(0,e0.keccak256)((0,Gn.hexConcat)(l))}}var c=this.types[t];if(c){var u=(0,ER.id)(this._types[t]);return function(h){var l=c.map(function(g){var x=g.name,A=g.type,E=r.getEncoder(A)(h[x]);return r._types[A]?(0,e0.keccak256)(E):E});return l.unshift(u),(0,Gn.hexConcat)(l)}}return Rr.throwArgumentError("unknown type: "+t,"type",t)},e.prototype.encodeType=function(t){var r=this._types[t];return r||Rr.throwArgumentError("unknown type: "+JSON.stringify(t),"name",t),r},e.prototype.encodeData=function(t,r){return this.getEncoder(t)(r)},e.prototype.hashStruct=function(t,r){return(0,e0.keccak256)(this.encodeData(t,r))},e.prototype.encode=function(t){return this.encodeData(this.primaryType,t)},e.prototype.hash=function(t){return this.hashStruct(this.primaryType,t)},e.prototype._visit=function(t,r,n){var i=this;{var o=r8(t);if(o)return n(t,r)}var s=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(s){var a=s[1],c=parseInt(s[3]);return c>=0&&r.length!==c&&Rr.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",r),r.map(function(h){return i._visit(a,h,n)})}var u=this.types[t];return u?u.reduce(function(h,l){var g=l.name,x=l.type;return h[g]=i._visit(x,r[g],n),h},{}):Rr.throwArgumentError("unknown type: "+t,"type",t)},e.prototype.visit=function(t,r){return this._visit(this.primaryType,t,r)},e.from=function(t){return new e(t)},e.getPrimaryType=function(t){return e.from(t).primaryType},e.hashStruct=function(t,r,n){return e.from(r).hashStruct(t,n)},e.hashDomain=function(t){var r=[];for(var n in t){var i=wR[n];i||Rr.throwArgumentError("invalid typed-data domain key: "+JSON.stringify(n),"domain",t),r.push({name:n,type:i})}return r.sort(function(o,s){return t8.indexOf(o.name)-t8.indexOf(s.name)}),e.hashStruct("EIP712Domain",{EIP712Domain:r},t)},e.encode=function(t,r,n){return(0,Gn.hexConcat)(["0x1901",e.hashDomain(t),e.from(r).hash(n)])},e.hash=function(t,r,n){return(0,e0.keccak256)(e.encode(t,r,n))},e.resolveNames=function(t,r,n,i){return $oe(this,void 0,void 0,function(){var o,s,a,c,u,h,l,g;return Yoe(this,function(x){switch(x.label){case 0:t=(0,Fl.shallowCopy)(t),o={},t.verifyingContract&&!(0,Gn.isHexString)(t.verifyingContract,20)&&(o[t.verifyingContract]="0x"),s=e.from(r),s.visit(n,function(A,E){return A==="address"&&!(0,Gn.isHexString)(E,20)&&(o[E]="0x"),E}),a=[];for(c in o)a.push(c);u=0,x.label=1;case 1:return u<a.length?(h=a[u],l=o,g=h,[4,i(h)]):[3,4];case 2:l[g]=x.sent(),x.label=3;case 3:return u++,[3,1];case 4:return t.verifyingContract&&o[t.verifyingContract]&&(t.verifyingContract=o[t.verifyingContract]),n=s.visit(n,function(A,E){return A==="address"&&o[E]?o[E]:E}),[2,{domain:t,value:n}]}})})},e.getPayload=function(t,r,n){e.hashDomain(t);var i={},o=[];t8.forEach(function(c){var u=t[c];u!=null&&(i[c]=nse[c](u),o.push({name:c,type:wR[c]}))});var s=e.from(r),a=(0,Fl.shallowCopy)(r);return a.EIP712Domain?Rr.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):a.EIP712Domain=o,s.encode(n),{types:a,domain:i,primaryType:s.primaryType,message:s.visit(n,function(c,u){if(c.match(/^bytes(\d*)/))return(0,Gn.hexlify)((0,Gn.arrayify)(u));if(c.match(/^u?int/))return Vl.BigNumber.from(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return typeof u!="string"&&Rr.throwArgumentError("invalid string","value",u),u}return Rr.throwArgumentError("unsupported type","type",c)})}},e}();af.TypedDataEncoder=ise});var i8=L(Mn=>{"use strict";p();y();Object.defineProperty(Mn,"__esModule",{value:!0});Mn._TypedDataEncoder=Mn.hashMessage=Mn.messagePrefix=Mn.ensNormalize=Mn.isValidName=Mn.namehash=Mn.dnsEncode=Mn.id=void 0;var ose=$6();Object.defineProperty(Mn,"id",{enumerable:!0,get:function(){return ose.id}});var n8=X6();Object.defineProperty(Mn,"dnsEncode",{enumerable:!0,get:function(){return n8.dnsEncode}});Object.defineProperty(Mn,"isValidName",{enumerable:!0,get:function(){return n8.isValidName}});Object.defineProperty(Mn,"namehash",{enumerable:!0,get:function(){return n8.namehash}});var _R=xR();Object.defineProperty(Mn,"hashMessage",{enumerable:!0,get:function(){return _R.hashMessage}});Object.defineProperty(Mn,"messagePrefix",{enumerable:!0,get:function(){return _R.messagePrefix}});var sse=X6();Object.defineProperty(Mn,"ensNormalize",{enumerable:!0,get:function(){return sse.ensNormalize}});var ase=PR();Object.defineProperty(Mn,"_TypedDataEncoder",{enumerable:!0,get:function(){return ase.TypedDataEncoder}})});var a8=L(_m=>{"use strict";p();y();Object.defineProperty(_m,"__esModule",{value:!0});_m.SupportedAlgorithm=void 0;var cse;(function(e){e.sha256="sha256",e.sha512="sha512"})(cse=_m.SupportedAlgorithm||(_m.SupportedAlgorithm={}))});var BR=L(S1=>{"use strict";p();y();Object.defineProperty(S1,"__esModule",{value:!0});S1.version=void 0;S1.version="sha2/5.7.0"});var MR=L($o=>{"use strict";p();y();var use=$o&&$o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($o,"__esModule",{value:!0});$o.computeHmac=$o.sha512=$o.sha256=$o.ripemd160=void 0;var Bm=use(Y_()),Cm=fn(),fse=a8(),CR=Ti(),lse=BR(),dse=new CR.Logger(lse.version);function hse(e){return"0x"+Bm.default.ripemd160().update((0,Cm.arrayify)(e)).digest("hex")}$o.ripemd160=hse;function pse(e){return"0x"+Bm.default.sha256().update((0,Cm.arrayify)(e)).digest("hex")}$o.sha256=pse;function yse(e){return"0x"+Bm.default.sha512().update((0,Cm.arrayify)(e)).digest("hex")}$o.sha512=yse;function mse(e,t,r){return fse.SupportedAlgorithm[e]||dse.throwError("unsupported algorithm "+e,CR.Logger.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:e}),"0x"+Bm.default.hmac(Bm.default[e],(0,Cm.arrayify)(t)).update((0,Cm.arrayify)(r)).digest("hex")}$o.computeHmac=mse});var c8=L(Yo=>{"use strict";p();y();Object.defineProperty(Yo,"__esModule",{value:!0});Yo.SupportedAlgorithm=Yo.sha512=Yo.sha256=Yo.ripemd160=Yo.computeHmac=void 0;var E1=MR();Object.defineProperty(Yo,"computeHmac",{enumerable:!0,get:function(){return E1.computeHmac}});Object.defineProperty(Yo,"ripemd160",{enumerable:!0,get:function(){return E1.ripemd160}});Object.defineProperty(Yo,"sha256",{enumerable:!0,get:function(){return E1.sha256}});Object.defineProperty(Yo,"sha512",{enumerable:!0,get:function(){return E1.sha512}});var gse=a8();Object.defineProperty(Yo,"SupportedAlgorithm",{enumerable:!0,get:function(){return gse.SupportedAlgorithm}})});var R8=L((M8,sO)=>{"use strict";p();y();(function(e){function t(d){return parseInt(d)===d}function r(d){if(!t(d.length))return!1;for(var S=0;S<d.length;S++)if(!t(d[S])||d[S]<0||d[S]>255)return!1;return!0}function n(d,S){if(d.buffer&&ArrayBuffer.isView(d)&&d.name==="Uint8Array")return S&&(d.slice?d=d.slice():d=Array.prototype.slice.call(d)),d;if(Array.isArray(d)){if(!r(d))throw new Error("Array contains invalid value: "+d);return new Uint8Array(d)}if(t(d.length)&&r(d))return new Uint8Array(d);throw new Error("unsupported array-like object")}function i(d){return new Uint8Array(d)}function o(d,S,F,U,D){(U!=null||D!=null)&&(d.slice?d=d.slice(U,D):d=Array.prototype.slice.call(d,U,D)),S.set(d,F)}var s=function(){function d(F){var U=[],D=0;for(F=encodeURI(F);D<F.length;){var Y=F.charCodeAt(D++);Y===37?(U.push(parseInt(F.substr(D,2),16)),D+=2):U.push(Y)}return n(U)}function S(F){for(var U=[],D=0;D<F.length;){var Y=F[D];Y<128?(U.push(String.fromCharCode(Y)),D++):Y>191&&Y<224?(U.push(String.fromCharCode((Y&31)<<6|F[D+1]&63)),D+=2):(U.push(String.fromCharCode((Y&15)<<12|(F[D+1]&63)<<6|F[D+2]&63)),D+=3)}return U.join("")}return{toBytes:d,fromBytes:S}}(),a=function(){function d(U){for(var D=[],Y=0;Y<U.length;Y+=2)D.push(parseInt(U.substr(Y,2),16));return D}var S="0123456789abcdef";function F(U){for(var D=[],Y=0;Y<U.length;Y++){var j=U[Y];D.push(S[(j&240)>>4]+S[j&15])}return D.join("")}return{toBytes:d,fromBytes:F}}(),c={16:10,24:12,32:14},u=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],h=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],l=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],g=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],x=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],A=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],E=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],B=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],M=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],N=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],R=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],V=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],q=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],W=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],G=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function z(d){for(var S=[],F=0;F<d.length;F+=4)S.push(d[F]<<24|d[F+1]<<16|d[F+2]<<8|d[F+3]);return S}var te=function(d){if(!(this instanceof te))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:n(d,!0)}),this._prepare()};te.prototype._prepare=function(){var d=c[this.key.length];if(d==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var S=0;S<=d;S++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var F=(d+1)*4,U=this.key.length/4,D=z(this.key),Y,S=0;S<U;S++)Y=S>>2,this._Ke[Y][S%4]=D[S],this._Kd[d-Y][S%4]=D[S];for(var j=0,ee=U,le;ee<F;){if(le=D[U-1],D[0]^=h[le>>16&255]<<24^h[le>>8&255]<<16^h[le&255]<<8^h[le>>24&255]^u[j]<<24,j+=1,U!=8)for(var S=1;S<U;S++)D[S]^=D[S-1];else{for(var S=1;S<U/2;S++)D[S]^=D[S-1];le=D[U/2-1],D[U/2]^=h[le&255]^h[le>>8&255]<<8^h[le>>16&255]<<16^h[le>>24&255]<<24;for(var S=U/2+1;S<U;S++)D[S]^=D[S-1]}for(var S=0,fe,K;S<U&&ee<F;)fe=ee>>2,K=ee%4,this._Ke[fe][K]=D[S],this._Kd[d-fe][K]=D[S++],ee++}for(var fe=1;fe<d;fe++)for(var K=0;K<4;K++)le=this._Kd[fe][K],this._Kd[fe][K]=V[le>>24&255]^q[le>>16&255]^W[le>>8&255]^G[le&255]},te.prototype.encrypt=function(d){if(d.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var S=this._Ke.length-1,F=[0,0,0,0],U=z(d),D=0;D<4;D++)U[D]^=this._Ke[0][D];for(var Y=1;Y<S;Y++){for(var D=0;D<4;D++)F[D]=g[U[D]>>24&255]^x[U[(D+1)%4]>>16&255]^A[U[(D+2)%4]>>8&255]^E[U[(D+3)%4]&255]^this._Ke[Y][D];U=F.slice()}for(var j=i(16),ee,D=0;D<4;D++)ee=this._Ke[S][D],j[4*D]=(h[U[D]>>24&255]^ee>>24)&255,j[4*D+1]=(h[U[(D+1)%4]>>16&255]^ee>>16)&255,j[4*D+2]=(h[U[(D+2)%4]>>8&255]^ee>>8)&255,j[4*D+3]=(h[U[(D+3)%4]&255]^ee)&255;return j},te.prototype.decrypt=function(d){if(d.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var S=this._Kd.length-1,F=[0,0,0,0],U=z(d),D=0;D<4;D++)U[D]^=this._Kd[0][D];for(var Y=1;Y<S;Y++){for(var D=0;D<4;D++)F[D]=B[U[D]>>24&255]^M[U[(D+3)%4]>>16&255]^N[U[(D+2)%4]>>8&255]^R[U[(D+1)%4]&255]^this._Kd[Y][D];U=F.slice()}for(var j=i(16),ee,D=0;D<4;D++)ee=this._Kd[S][D],j[4*D]=(l[U[D]>>24&255]^ee>>24)&255,j[4*D+1]=(l[U[(D+3)%4]>>16&255]^ee>>16)&255,j[4*D+2]=(l[U[(D+2)%4]>>8&255]^ee>>8)&255,j[4*D+3]=(l[U[(D+1)%4]&255]^ee)&255;return j};var _=function(d){if(!(this instanceof _))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new te(d)};_.prototype.encrypt=function(d){if(d=n(d),d.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var S=i(d.length),F=i(16),U=0;U<d.length;U+=16)o(d,F,0,U,U+16),F=this._aes.encrypt(F),o(F,S,U);return S},_.prototype.decrypt=function(d){if(d=n(d),d.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var S=i(d.length),F=i(16),U=0;U<d.length;U+=16)o(d,F,0,U,U+16),F=this._aes.decrypt(F),o(F,S,U);return S};var f=function(d,S){if(!(this instanceof f))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!S)S=i(16);else if(S.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=n(S,!0),this._aes=new te(d)};f.prototype.encrypt=function(d){if(d=n(d),d.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var S=i(d.length),F=i(16),U=0;U<d.length;U+=16){o(d,F,0,U,U+16);for(var D=0;D<16;D++)F[D]^=this._lastCipherblock[D];this._lastCipherblock=this._aes.encrypt(F),o(this._lastCipherblock,S,U)}return S},f.prototype.decrypt=function(d){if(d=n(d),d.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var S=i(d.length),F=i(16),U=0;U<d.length;U+=16){o(d,F,0,U,U+16),F=this._aes.decrypt(F);for(var D=0;D<16;D++)S[U+D]=F[D]^this._lastCipherblock[D];o(d,this._lastCipherblock,0,U,U+16)}return S};var m=function(d,S,F){if(!(this instanceof m))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!S)S=i(16);else if(S.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");F||(F=1),this.segmentSize=F,this._shiftRegister=n(S,!0),this._aes=new te(d)};m.prototype.encrypt=function(d){if(d.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var S=n(d,!0),F,U=0;U<S.length;U+=this.segmentSize){F=this._aes.encrypt(this._shiftRegister);for(var D=0;D<this.segmentSize;D++)S[U+D]^=F[D];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(S,this._shiftRegister,16-this.segmentSize,U,U+this.segmentSize)}return S},m.prototype.decrypt=function(d){if(d.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var S=n(d,!0),F,U=0;U<S.length;U+=this.segmentSize){F=this._aes.encrypt(this._shiftRegister);for(var D=0;D<this.segmentSize;D++)S[U+D]^=F[D];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(d,this._shiftRegister,16-this.segmentSize,U,U+this.segmentSize)}return S};var b=function(d,S){if(!(this instanceof b))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!S)S=i(16);else if(S.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=n(S,!0),this._lastPrecipherIndex=16,this._aes=new te(d)};b.prototype.encrypt=function(d){for(var S=n(d,!0),F=0;F<S.length;F++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),S[F]^=this._lastPrecipher[this._lastPrecipherIndex++];return S},b.prototype.decrypt=b.prototype.encrypt;var v=function(d){if(!(this instanceof v))throw Error("Counter must be instanitated with `new`");d!==0&&!d&&(d=1),typeof d=="number"?(this._counter=i(16),this.setValue(d)):this.setBytes(d)};v.prototype.setValue=function(d){if(typeof d!="number"||parseInt(d)!=d)throw new Error("invalid counter value (must be an integer)");for(var S=15;S>=0;--S)this._counter[S]=d%256,d=d>>8},v.prototype.setBytes=function(d){if(d=n(d,!0),d.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=d},v.prototype.increment=function(){for(var d=15;d>=0;d--)if(this._counter[d]===255)this._counter[d]=0;else{this._counter[d]++;break}};var w=function(d,S){if(!(this instanceof w))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",S instanceof v||(S=new v(S)),this._counter=S,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new te(d)};w.prototype.encrypt=function(d){for(var S=n(d,!0),F=0;F<S.length;F++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),S[F]^=this._remainingCounter[this._remainingCounterIndex++];return S},w.prototype.decrypt=w.prototype.encrypt;function P(d){d=n(d,!0);var S=16-d.length%16,F=i(d.length+S);o(d,F);for(var U=d.length;U<F.length;U++)F[U]=S;return F}function C(d){if(d=n(d,!0),d.length<16)throw new Error("PKCS#7 invalid length");var S=d[d.length-1];if(S>16)throw new Error("PKCS#7 padding byte out of range");for(var F=d.length-S,U=0;U<S;U++)if(d[F+U]!==S)throw new Error("PKCS#7 invalid padding byte");var D=i(F);return o(d,D,0,0,F),D}var k={AES:te,Counter:v,ModeOfOperation:{ecb:_,cbc:f,cfb:m,ofb:b,ctr:w},utils:{hex:a,utf8:s},padding:{pkcs7:{pad:P,strip:C}},_arrayTest:{coerceArray:n,createArray:i,copyArray:o}};typeof M8<"u"?sO.exports=k:typeof define=="function"&&define.amd?define(k):(e.aesjs&&(k._aesjs=e.aesjs),e.aesjs=k)})(M8)});var pO=L((F8,hO)=>{"use strict";p();y();(function(e){function r(x){let A=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),E=1779033703,B=3144134277,M=1013904242,N=2773480762,R=1359893119,V=2600822924,q=528734635,W=1541459225,G=new Uint32Array(64);function z(w){let P=0,C=w.length;for(;C>=64;){let k=E,d=B,S=M,F=N,U=R,D=V,Y=q,j=W,ee,le,fe,K,Z;for(le=0;le<16;le++)fe=P+le*4,G[le]=(w[fe]&255)<<24|(w[fe+1]&255)<<16|(w[fe+2]&255)<<8|w[fe+3]&255;for(le=16;le<64;le++)ee=G[le-2],K=(ee>>>17|ee<<15)^(ee>>>19|ee<<13)^ee>>>10,ee=G[le-15],Z=(ee>>>7|ee<<25)^(ee>>>18|ee<<14)^ee>>>3,G[le]=(K+G[le-7]|0)+(Z+G[le-16]|0)|0;for(le=0;le<64;le++)K=(((U>>>6|U<<26)^(U>>>11|U<<21)^(U>>>25|U<<7))+(U&D^~U&Y)|0)+(j+(A[le]+G[le]|0)|0)|0,Z=((k>>>2|k<<30)^(k>>>13|k<<19)^(k>>>22|k<<10))+(k&d^k&S^d&S)|0,j=Y,Y=D,D=U,U=F+K|0,F=S,S=d,d=k,k=K+Z|0;E=E+k|0,B=B+d|0,M=M+S|0,N=N+F|0,R=R+U|0,V=V+D|0,q=q+Y|0,W=W+j|0,P+=64,C-=64}}z(x);let te,_=x.length%64,f=x.length/536870912|0,m=x.length<<3,b=_<56?56:120,v=x.slice(x.length-_,x.length);for(v.push(128),te=_+1;te<b;te++)v.push(0);return v.push(f>>>24&255),v.push(f>>>16&255),v.push(f>>>8&255),v.push(f>>>0&255),v.push(m>>>24&255),v.push(m>>>16&255),v.push(m>>>8&255),v.push(m>>>0&255),z(v),[E>>>24&255,E>>>16&255,E>>>8&255,E>>>0&255,B>>>24&255,B>>>16&255,B>>>8&255,B>>>0&255,M>>>24&255,M>>>16&255,M>>>8&255,M>>>0&255,N>>>24&255,N>>>16&255,N>>>8&255,N>>>0&255,R>>>24&255,R>>>16&255,R>>>8&255,R>>>0&255,V>>>24&255,V>>>16&255,V>>>8&255,V>>>0&255,q>>>24&255,q>>>16&255,q>>>8&255,q>>>0&255,W>>>24&255,W>>>16&255,W>>>8&255,W>>>0&255]}function n(x,A,E){x=x.length<=64?x:r(x);let B=64+A.length+4,M=new Array(B),N=new Array(64),R,V=[];for(R=0;R<64;R++)M[R]=54;for(R=0;R<x.length;R++)M[R]^=x[R];for(R=0;R<A.length;R++)M[64+R]=A[R];for(R=B-4;R<B;R++)M[R]=0;for(R=0;R<64;R++)N[R]=92;for(R=0;R<x.length;R++)N[R]^=x[R];function q(){for(let W=B-1;W>=B-4;W--){if(M[W]++,M[W]<=255)return;M[W]=0}}for(;E>=32;)q(),V=V.concat(r(N.concat(r(M)))),E-=32;return E>0&&(q(),V=V.concat(r(N.concat(r(M))).slice(0,E))),V}function i(x,A,E,B,M){let N;for(c(x,(2*E-1)*16,M,0,16),N=0;N<2*E;N++)a(x,N*16,M,16),s(M,B),c(M,0,x,A+N*16,16);for(N=0;N<E;N++)c(x,A+N*2*16,x,N*16,16);for(N=0;N<E;N++)c(x,A+(N*2+1)*16,x,(N+E)*16,16)}function o(x,A){return x<<A|x>>>32-A}function s(x,A){c(x,0,A,0,16);for(let E=8;E>0;E-=2)A[4]^=o(A[0]+A[12],7),A[8]^=o(A[4]+A[0],9),A[12]^=o(A[8]+A[4],13),A[0]^=o(A[12]+A[8],18),A[9]^=o(A[5]+A[1],7),A[13]^=o(A[9]+A[5],9),A[1]^=o(A[13]+A[9],13),A[5]^=o(A[1]+A[13],18),A[14]^=o(A[10]+A[6],7),A[2]^=o(A[14]+A[10],9),A[6]^=o(A[2]+A[14],13),A[10]^=o(A[6]+A[2],18),A[3]^=o(A[15]+A[11],7),A[7]^=o(A[3]+A[15],9),A[11]^=o(A[7]+A[3],13),A[15]^=o(A[11]+A[7],18),A[1]^=o(A[0]+A[3],7),A[2]^=o(A[1]+A[0],9),A[3]^=o(A[2]+A[1],13),A[0]^=o(A[3]+A[2],18),A[6]^=o(A[5]+A[4],7),A[7]^=o(A[6]+A[5],9),A[4]^=o(A[7]+A[6],13),A[5]^=o(A[4]+A[7],18),A[11]^=o(A[10]+A[9],7),A[8]^=o(A[11]+A[10],9),A[9]^=o(A[8]+A[11],13),A[10]^=o(A[9]+A[8],18),A[12]^=o(A[15]+A[14],7),A[13]^=o(A[12]+A[15],9),A[14]^=o(A[13]+A[12],13),A[15]^=o(A[14]+A[13],18);for(let E=0;E<16;++E)x[E]+=A[E]}function a(x,A,E,B){for(let M=0;M<B;M++)E[M]^=x[A+M]}function c(x,A,E,B,M){for(;M--;)E[B++]=x[A++]}function u(x){if(!x||typeof x.length!="number")return!1;for(let A=0;A<x.length;A++){let E=x[A];if(typeof E!="number"||E%1||E<0||E>=256)return!1}return!0}function h(x,A){if(typeof x!="number"||x%1)throw new Error("invalid "+A);return x}function l(x,A,E,B,M,N,R){if(E=h(E,"N"),B=h(B,"r"),M=h(M,"p"),N=h(N,"dkLen"),E===0||E&E-1)throw new Error("N must be power of 2");if(E>2147483647/128/B)throw new Error("N too large");if(B>2147483647/128/M)throw new Error("r too large");if(!u(x))throw new Error("password must be an array or buffer");if(x=Array.prototype.slice.call(x),!u(A))throw new Error("salt must be an array or buffer");A=Array.prototype.slice.call(A);let V=n(x,A,M*128*B),q=new Uint32Array(M*32*B);for(let U=0;U<q.length;U++){let D=U*4;q[U]=(V[D+3]&255)<<24|(V[D+2]&255)<<16|(V[D+1]&255)<<8|(V[D+0]&255)<<0}let W=new Uint32Array(64*B),G=new Uint32Array(32*B*E),z=32*B,te=new Uint32Array(16),_=new Uint32Array(16),f=M*E*2,m=0,b=null,v=!1,w=0,P=0,C,k,d=R?parseInt(1e3/B):4294967295,S=typeof setImmediate<"u"?setImmediate:setTimeout,F=function(){if(v)return R(new Error("cancelled"),m/f);let U;switch(w){case 0:k=P*32*B,c(q,k,W,0,z),w=1,C=0;case 1:U=E-C,U>d&&(U=d);for(let Y=0;Y<U;Y++)c(W,0,G,(C+Y)*z,z),i(W,z,B,te,_);if(C+=U,m+=U,R){let Y=parseInt(1e3*m/f);if(Y!==b){if(v=R(null,m/f),v)break;b=Y}}if(C<E)break;C=0,w=2;case 2:U=E-C,U>d&&(U=d);for(let Y=0;Y<U;Y++){let j=(2*B-1)*16,ee=W[j]&E-1;a(G,ee*z,W,z),i(W,z,B,te,_)}if(C+=U,m+=U,R){let Y=parseInt(1e3*m/f);if(Y!==b){if(v=R(null,m/f),v)break;b=Y}}if(C<E)break;if(c(W,0,q,k,z),P++,P<M){w=0;break}V=[];for(let Y=0;Y<q.length;Y++)V.push(q[Y]>>0&255),V.push(q[Y]>>8&255),V.push(q[Y]>>16&255),V.push(q[Y]>>24&255);let D=n(x,V,N);return R&&R(null,1,D),D}R&&S(F)};if(!R)for(;;){let U=F();if(U!=null)return U}F()}let g={scrypt:function(x,A,E,B,M,N,R){return new Promise(function(V,q){let W=0;R&&R(0),l(x,A,E,B,M,N,function(G,z,te){if(G)q(G);else if(te)R&&W!==1&&R(1),V(new Uint8Array(te));else if(R&&z!==W)return W=z,R(z)})})},syncScrypt:function(x,A,E,B,M,N){return new Uint8Array(l(x,A,E,B,M,N))}};typeof F8<"u"?hO.exports=g:typeof define=="function"&&define.amd?define(g):e&&(e.scrypt&&(e._scrypt=e.scrypt),e.scrypt=g)})(F8)});var TO=L((EBe,kO)=>{"use strict";p();y();function $se(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),o=i.charCodeAt(0);if(t[o]!==255)throw new TypeError(i+" is ambiguous");t[o]=n}var s=e.length,a=e.charAt(0),c=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function h(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var A=0,E=0,B=0,M=x.length;B!==M&&x[B]===0;)B++,A++;for(var N=(M-B)*u+1>>>0,R=new Uint8Array(N);B!==M;){for(var V=x[B],q=0,W=N-1;(V!==0||q<E)&&W!==-1;W--,q++)V+=256*R[W]>>>0,R[W]=V%s>>>0,V=V/s>>>0;if(V!==0)throw new Error("Non-zero carry");E=q,B++}for(var G=N-E;G!==N&&R[G]===0;)G++;for(var z=a.repeat(A);G<N;++G)z+=e.charAt(R[G]);return z}function l(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;for(var A=0,E=0,B=0;x[A]===a;)E++,A++;for(var M=(x.length-A)*c+1>>>0,N=new Uint8Array(M);x[A];){var R=t[x.charCodeAt(A)];if(R===255)return;for(var V=0,q=M-1;(R!==0||V<B)&&q!==-1;q--,V++)R+=s*N[q]>>>0,N[q]=R%256>>>0,R=R/256>>>0;if(R!==0)throw new Error("Non-zero carry");B=V,A++}for(var W=M-B;W!==M&&N[W]===0;)W++;for(var G=new Uint8Array(E+(M-W)),z=E;W!==M;)G[z++]=N[W++];return G}function g(x){var A=l(x);if(A)return A;throw new Error("Non-base"+s+" character")}return{encode:h,decodeUnsafe:l,decode:g}}kO.exports=$se});var _O=L((TBe,PO)=>{p();y();var Yse=TO(),Jse="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";PO.exports=Yse(Jse)});var CO=L((BBe,BO)=>{"use strict";p();y();var Z8=_O();BO.exports=function(e){function t(o){var s=Uint8Array.from(o),a=e(s),c=s.length+4,u=new Uint8Array(c);return u.set(s,0),u.set(a.subarray(0,4),s.length),Z8.encode(u,c)}function r(o){var s=o.slice(0,-4),a=o.slice(-4),c=e(s);if(!(a[0]^c[0]|a[1]^c[1]|a[2]^c[2]|a[3]^c[3]))return s}function n(o){var s=Z8.decodeUnsafe(o);if(s)return r(s)}function i(o){var s=Z8.decode(o),a=r(s,e);if(!a)throw new Error("Invalid checksum");return a}return{encode:t,decode:i,decodeUnsafe:n}}});var f0=L((RBe,RO)=>{"use strict";p();y();var{sha256:MO}=ax(),Zse=CO();function Qse(e){return MO(MO(e))}RO.exports=Zse(Qse)});var NO=L((UBe,OO)=>{"use strict";p();y();var Q8=Os(),Xse=W_().Buffer;OO.exports=function(e){function t(o){var s=e(o);return Q8.encode(Xse.concat([o,s],o.length+4))}function r(o){var s=o.slice(0,-4),a=o.slice(-4),c=e(s);if(!(a[0]^c[0]|a[1]^c[1]|a[2]^c[2]|a[3]^c[3]))return s}function n(o){var s=Q8.decodeUnsafe(o);if(s)return r(s)}function i(o){var s=Q8.decode(o),a=r(s,e);if(!a)throw new Error("Invalid checksum");return a}return{encode:t,decode:i,decodeUnsafe:n}}});var LO=L((KBe,DO)=>{"use strict";p();y();var UO=G_(),eae=NO();function tae(e){var t=UO("sha256").update(e).digest();return UO("sha256").update(t).digest()}DO.exports=eae(tae)});var q1=L((qBe,FO)=>{p();y();var X8=LO();function KO(e,t){if(t!==void 0&&e[0]!==t)throw new Error("Invalid network version");if(e.length===33)return{version:e[0],privateKey:e.slice(1,33),compressed:!1};if(e.length!==34)throw new Error("Invalid WIF length");if(e[33]!==1)throw new Error("Invalid compression flag");return{version:e[0],privateKey:e.slice(1,33),compressed:!0}}function eI(e,t,r){var n=new Buffer(r?34:33);return n.writeUInt8(e,0),t.copy(n,1),r&&(n[33]=1),n}function rae(e,t){return KO(X8.decode(e),t)}function nae(e,t,r){return typeof e=="number"?X8.encode(eI(e,t,r)):X8.encode(eI(e.version,e.privateKey,e.compressed))}FO.exports={decode:rae,decodeRaw:KO,encode:nae,encodeRaw:eI}});var nI=L(Mi=>{"use strict";p();y();Object.defineProperty(Mi,"__esModule",{value:!0});Mi.output=Mi.exists=Mi.hash=Mi.bytes=Mi.bool=Mi.number=void 0;function z1(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}Mi.number=z1;function GO(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}Mi.bool=GO;function rI(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}Mi.bytes=rI;function $O(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");z1(e.outputLen),z1(e.blockLen)}Mi.hash=$O;function YO(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}Mi.exists=YO;function JO(e,t){rI(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Mi.output=JO;var cae={number:z1,bool:GO,bytes:rI,hash:$O,exists:YO,output:JO};Mi.default=cae});var ZO=L(j1=>{"use strict";p();y();Object.defineProperty(j1,"__esModule",{value:!0});j1.crypto=void 0;j1.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});var $1=L(ht=>{"use strict";p();y();Object.defineProperty(ht,"__esModule",{value:!0});ht.randomBytes=ht.wrapXOFConstructorWithOpts=ht.wrapConstructorWithOpts=ht.wrapConstructor=ht.checkOpts=ht.Hash=ht.concatBytes=ht.toBytes=ht.utf8ToBytes=ht.asyncLoop=ht.nextTick=ht.hexToBytes=ht.bytesToHex=ht.isLE=ht.rotr=ht.createView=ht.u32=ht.u8=void 0;var iI=ZO(),sI=e=>e instanceof Uint8Array,uae=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);ht.u8=uae;var fae=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));ht.u32=fae;var lae=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);ht.createView=lae;var dae=(e,t)=>e<<32-t|e>>>t;ht.rotr=dae;ht.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!ht.isLE)throw new Error("Non little-endian hardware is not supported");var hae=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function pae(e){if(!sI(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=hae[e[r]];return t}ht.bytesToHex=pae;function yae(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let n=0;n<r.length;n++){let i=n*2,o=e.slice(i,i+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[n]=s}return r}ht.hexToBytes=yae;var mae=async()=>{};ht.nextTick=mae;async function gae(e,t,r){let n=Date.now();for(let i=0;i<e;i++){r(i);let o=Date.now()-n;o>=0&&o<t||(await(0,ht.nextTick)(),n+=o)}}ht.asyncLoop=gae;function QO(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}ht.utf8ToBytes=QO;function G1(e){if(typeof e=="string"&&(e=QO(e)),!sI(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}ht.toBytes=G1;function bae(...e){let t=new Uint8Array(e.reduce((n,i)=>n+i.length,0)),r=0;return e.forEach(n=>{if(!sI(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}ht.concatBytes=bae;var oI=class{clone(){return this._cloneInto()}};ht.Hash=oI;var xae=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function wae(e,t){if(t!==void 0&&(typeof t!="object"||!xae(t)))throw new Error("Options should be object or undefined");return Object.assign(e,t)}ht.checkOpts=wae;function vae(e){let t=n=>e().update(G1(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}ht.wrapConstructor=vae;function Aae(e){let t=(n,i)=>e(i).update(G1(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}ht.wrapConstructorWithOpts=Aae;function Sae(e){let t=(n,i)=>e(i).update(G1(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}ht.wrapXOFConstructorWithOpts=Sae;function Eae(e=32){if(iI.crypto&&typeof iI.crypto.getRandomValues=="function")return iI.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}ht.randomBytes=Eae});var eN=L(Gl=>{"use strict";p();y();Object.defineProperty(Gl,"__esModule",{value:!0});Gl.hmac=Gl.HMAC=void 0;var Y1=nI(),XO=$1(),Km=class extends XO.Hash{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,Y1.default.hash(t);let n=(0,XO.toBytes)(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return Y1.default.exists(this),this.iHash.update(t),this}digestInto(t){Y1.default.exists(this),Y1.default.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};Gl.HMAC=Km;var Iae=(e,t,r)=>new Km(e,t).update(r).digest();Gl.hmac=Iae;Gl.hmac.create=(e,t)=>new Km(e,t)});var tN=L(J1=>{"use strict";p();y();Object.defineProperty(J1,"__esModule",{value:!0});J1.SHA2=void 0;var aI=nI(),Fm=$1();function kae(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var cI=class extends Fm.Hash{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,Fm.createView)(this.buffer)}update(t){aI.default.exists(this);let{view:r,buffer:n,blockLen:i}=this;t=(0,Fm.toBytes)(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=(0,Fm.createView)(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){aI.default.exists(this),aI.default.output(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let l=s;l<i;l++)r[l]=0;kae(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=(0,Fm.createView)(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,h[l],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};J1.SHA2=cI});var rN=L(l0=>{"use strict";p();y();Object.defineProperty(l0,"__esModule",{value:!0});l0.sha224=l0.sha256=void 0;var Tae=tN(),ts=$1(),Pae=(e,t,r)=>e&t^~e&r,_ae=(e,t,r)=>e&t^e&r^t&r,Bae=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),pf=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),yf=new Uint32Array(64),Z1=class extends Tae.SHA2{constructor(){super(64,32,8,!1),this.A=pf[0]|0,this.B=pf[1]|0,this.C=pf[2]|0,this.D=pf[3]|0,this.E=pf[4]|0,this.F=pf[5]|0,this.G=pf[6]|0,this.H=pf[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let l=0;l<16;l++,r+=4)yf[l]=t.getUint32(r,!1);for(let l=16;l<64;l++){let g=yf[l-15],x=yf[l-2],A=(0,ts.rotr)(g,7)^(0,ts.rotr)(g,18)^g>>>3,E=(0,ts.rotr)(x,17)^(0,ts.rotr)(x,19)^x>>>10;yf[l]=E+yf[l-7]+A+yf[l-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:h}=this;for(let l=0;l<64;l++){let g=(0,ts.rotr)(a,6)^(0,ts.rotr)(a,11)^(0,ts.rotr)(a,25),x=h+g+Pae(a,c,u)+Bae[l]+yf[l]|0,E=((0,ts.rotr)(n,2)^(0,ts.rotr)(n,13)^(0,ts.rotr)(n,22))+_ae(n,i,o)|0;h=u,u=c,c=a,a=s+x|0,s=o,o=i,i=n,n=x+E|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,o,s,a,c,u,h)}roundClean(){yf.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},uI=class extends Z1{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};l0.sha256=(0,ts.wrapConstructor)(()=>new Z1);l0.sha224=(0,ts.wrapConstructor)(()=>new uI)});var X1=L(nn=>{"use strict";p();y();var Cae=N3(),Mae=eN(),nN=rN();function Rae(e){var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var Ht=Rae(Cae);Ht.utils.hmacSha256Sync=(e,...t)=>Mae.hmac(nN.sha256,e,Ht.utils.concatBytes(...t));Ht.utils.sha256Sync=(...e)=>nN.sha256(Ht.utils.concatBytes(...e));var dI=Ht.utils._normalizePrivateKey,Oae=32,Nae=32,fI=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65]),Uae=32;function lI(e,t){for(let r=0;r<32;++r)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function Vm(e){return!(!(e instanceof Uint8Array)||e.length!==Nae||lI(e,fI)>=0)}function iN(e){return e instanceof Uint8Array&&e.length===64&&lI(e.subarray(0,32),fI)<0&&lI(e.subarray(32,64),fI)<0}function Q1(e){return e instanceof Uint8Array&&e.length===Oae}function oN(e){return e===void 0||e instanceof Uint8Array&&e.length===Uae}function sN(e){if(typeof e!="string")throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function Dae(e){return sN(Ht.utils.bytesToHex(e))}function hI(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"&&Number.isSafeInteger(e)&&e>=0)t=BigInt(e);else if(typeof e=="string"){if(e.length!==64)throw new Error("Expected 32 bytes of private scalar");t=sN(e)}else if(e instanceof Uint8Array){if(e.length!==32)throw new Error("Expected 32 bytes of private scalar");t=Dae(e)}else throw new TypeError("Expected valid private scalar");if(t<0)throw new Error("Expected private scalar >= 0");return t}var Lae=(e,t)=>{let r=dI(e),n=hI(t),i=Ht.utils._bigintTo32Bytes(Ht.utils.mod(r+n,Ht.CURVE.n));return Ht.utils.isValidPrivateKey(i)?i:null},Kae=(e,t)=>{let r=dI(e),n=hI(t),i=Ht.utils._bigintTo32Bytes(Ht.utils.mod(r-n,Ht.CURVE.n));return Ht.utils.isValidPrivateKey(i)?i:null},Fae=e=>{let t=dI(e),r=Ht.utils._bigintTo32Bytes(Ht.CURVE.n-t);return Ht.utils.isValidPrivateKey(r)?r:null},aN=(e,t,r)=>{let n=Ht.Point.fromHex(e),i=hI(t),o=Ht.Point.BASE.multiplyAndAddUnsafe(n,i,1n);if(!o)throw new Error("Tweaked point at infinity");return o.toRawBytes(r)},Vae=(e,t,r)=>{let n=Ht.Point.fromHex(e),i=typeof t=="string"?t:Ht.utils.bytesToHex(t),o=BigInt(`0x${i}`);return n.multiply(o).toRawBytes(r)};function qm(e,t){return e===void 0?t!==void 0?cN(t):!0:!!e}function $l(e){try{return e()}catch{return null}}function pI(e,t){if(e.length===32!==t)return!1;try{return!!Ht.Point.fromHex(e)}catch{return!1}}function mf(e){return pI(e,!1)}function cN(e){return pI(e,!1)&&e.length===33}function gf(e){return Ht.utils.isValidPrivateKey(e)}function yI(e){return pI(e,!0)}function qae(e,t){if(!yI(e))throw new Error("Expected Point");if(!Vm(t))throw new Error("Expected Tweak");return $l(()=>{let r=aN(e,t,!0);return{parity:r[0]%2===1?1:0,xOnlyPubkey:r.slice(1)}})}function uN(e){if(!mf(e))throw new Error("Expected Point");return e.slice(1,33)}function fN(e,t){if(!gf(e))throw new Error("Expected Private");return $l(()=>Ht.getPublicKey(e,qm(t)))}function Hae(e){if(!gf(e))throw new Error("Expected Private");return uN(fN(e))}function Wae(e,t){if(!mf(e))throw new Error("Expected Point");return Ht.Point.fromHex(e).toRawBytes(qm(t,e))}function zae(e,t,r){if(!mf(e))throw new Error("Expected Point");if(!Vm(t))throw new Error("Expected Tweak");return $l(()=>Vae(e,t,qm(r,e)))}function jae(e,t,r){if(!mf(e)||!mf(t))throw new Error("Expected Point");return $l(()=>{let n=Ht.Point.fromHex(e),i=Ht.Point.fromHex(t);return n.equals(i.negate())?null:n.add(i).toRawBytes(qm(r,e))})}function Gae(e,t,r){if(!mf(e))throw new Error("Expected Point");if(!Vm(t))throw new Error("Expected Tweak");return $l(()=>aN(e,t,qm(r,e)))}function $ae(e,t){if(gf(e)===!1)throw new Error("Expected Private");if(Vm(t)===!1)throw new Error("Expected Tweak");return $l(()=>Lae(e,t))}function Yae(e,t){if(gf(e)===!1)throw new Error("Expected Private");if(Vm(t)===!1)throw new Error("Expected Tweak");return $l(()=>Kae(e,t))}function Jae(e){if(gf(e)===!1)throw new Error("Expected Private");return Fae(e)}function Zae(e,t,r){if(!gf(t))throw new Error("Expected Private");if(!Q1(e))throw new Error("Expected Scalar");if(!oN(r))throw new Error("Expected Extra Data (32 bytes)");return Ht.signSync(e,t,{der:!1,extraEntropy:r})}function Qae(e,t,r=Buffer.alloc(32,0)){if(!gf(t))throw new Error("Expected Private");if(!Q1(e))throw new Error("Expected Scalar");if(!oN(r))throw new Error("Expected Extra Data (32 bytes)");return Ht.schnorr.signSync(e,t,r)}function Xae(e,t,r,n){if(!mf(t))throw new Error("Expected Point");if(!iN(r))throw new Error("Expected Signature");if(!Q1(e))throw new Error("Expected Scalar");return Ht.verify(r,e,t,{strict:n})}function ece(e,t,r){if(!yI(t))throw new Error("Expected Point");if(!iN(r))throw new Error("Expected Signature");if(!Q1(e))throw new Error("Expected Scalar");return Ht.schnorr.verifySync(r,e,t)}nn.isPoint=mf;nn.isPointCompressed=cN;nn.isPrivate=gf;nn.isXOnlyPoint=yI;nn.pointAdd=jae;nn.pointAddScalar=Gae;nn.pointCompress=Wae;nn.pointFromScalar=fN;nn.pointMultiply=zae;nn.privateAdd=$ae;nn.privateNegate=Jae;nn.privateSub=Yae;nn.sign=Zae;nn.signSchnorr=Qae;nn.verify=Xae;nn.verifySchnorr=ece;nn.xOnlyPointAddTweak=qae;nn.xOnlyPointFromPoint=uN;nn.xOnlyPointFromScalar=Hae});var rs=L(xf=>{"use strict";p();y();Object.defineProperty(xf,"__esModule",{value:!0});xf.testnet=xf.regtest=xf.bitcoin=void 0;xf.bitcoin={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128};xf.regtest={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239};xf.testnet={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}});var gI=L(wf=>{"use strict";p();y();Object.defineProperty(wf,"__esModule",{value:!0});wf.encode=wf.decode=wf.check=void 0;function uce(e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return!1;let t=e[3];if(t===0||5+t>=e.length||e[4+t]!==2)return!1;let r=e[5+t];return!(r===0||6+t+r!==e.length||e[4]&128||t>1&&e[4]===0&&!(e[5]&128)||e[t+6]&128||r>1&&e[t+6]===0&&!(e[t+7]&128))}wf.check=uce;function fce(e){if(e.length<8)throw new Error("DER sequence length is too short");if(e.length>72)throw new Error("DER sequence length is too long");if(e[0]!==48)throw new Error("Expected DER sequence");if(e[1]!==e.length-2)throw new Error("DER sequence length is invalid");if(e[2]!==2)throw new Error("Expected DER integer");let t=e[3];if(t===0)throw new Error("R length is zero");if(5+t>=e.length)throw new Error("R length is too long");if(e[4+t]!==2)throw new Error("Expected DER integer (2)");let r=e[5+t];if(r===0)throw new Error("S length is zero");if(6+t+r!==e.length)throw new Error("S length is invalid");if(e[4]&128)throw new Error("R value is negative");if(t>1&&e[4]===0&&!(e[5]&128))throw new Error("R value excessively padded");if(e[t+6]&128)throw new Error("S value is negative");if(r>1&&e[t+6]===0&&!(e[t+7]&128))throw new Error("S value excessively padded");return{r:e.slice(4,4+t),s:e.slice(6+t)}}wf.decode=fce;function lce(e,t){let r=e.length,n=t.length;if(r===0)throw new Error("R length is zero");if(n===0)throw new Error("S length is zero");if(r>33)throw new Error("R length is too long");if(n>33)throw new Error("S length is too long");if(e[0]&128)throw new Error("R value is negative");if(t[0]&128)throw new Error("S value is negative");if(r>1&&e[0]===0&&!(e[1]&128))throw new Error("R value excessively padded");if(n>1&&t[0]===0&&!(t[1]&128))throw new Error("S value excessively padded");let i=Buffer.allocUnsafe(6+r+n);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=e.length,e.copy(i,4),i[4+r]=2,i[5+r]=t.length,t.copy(i,6+r),i}wf.encode=lce});var tv=L(d0=>{"use strict";p();y();Object.defineProperty(d0,"__esModule",{value:!0});d0.REVERSE_OPS=d0.OPS=void 0;var bI={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};d0.OPS=bI;var gN={};d0.REVERSE_OPS=gN;for(let e of Object.keys(bI)){let t=bI[e];gN[t]=e}});var xN=L(Af=>{"use strict";p();y();Object.defineProperty(Af,"__esModule",{value:!0});Af.decode=Af.encode=Af.encodingLength=void 0;var vf=tv();function bN(e){return e<vf.OPS.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}Af.encodingLength=bN;function dce(e,t,r){let n=bN(t);return n===1?e.writeUInt8(t,r):n===2?(e.writeUInt8(vf.OPS.OP_PUSHDATA1,r),e.writeUInt8(t,r+1)):n===3?(e.writeUInt8(vf.OPS.OP_PUSHDATA2,r),e.writeUInt16LE(t,r+1)):(e.writeUInt8(vf.OPS.OP_PUSHDATA4,r),e.writeUInt32LE(t,r+1)),n}Af.encode=dce;function hce(e,t){let r=e.readUInt8(t),n,i;if(r<vf.OPS.OP_PUSHDATA1)n=r,i=1;else if(r===vf.OPS.OP_PUSHDATA1){if(t+2>e.length)return null;n=e.readUInt8(t+1),i=2}else if(r===vf.OPS.OP_PUSHDATA2){if(t+3>e.length)return null;n=e.readUInt16LE(t+1),i=3}else{if(t+5>e.length)return null;if(r!==vf.OPS.OP_PUSHDATA4)throw new Error("Unexpected opcode");n=e.readUInt32LE(t+1),i=5}return{opcode:r,number:n,size:i}}Af.decode=hce});var wN=L(h0=>{"use strict";p();y();Object.defineProperty(h0,"__esModule",{value:!0});h0.encode=h0.decode=void 0;function pce(e,t,r){t=t||4,r=r===void 0?!0:r;let n=e.length;if(n===0)return 0;if(n>t)throw new TypeError("Script number overflow");if(r&&!(e[n-1]&127)&&(n<=1||!(e[n-2]&128)))throw new Error("Non-minimally encoded script number");if(n===5){let o=e.readUInt32LE(0),s=e.readUInt8(4);return s&128?-((s&-129)*4294967296+o):s*4294967296+o}let i=0;for(let o=0;o<n;++o)i|=e[o]<<8*o;return e[n-1]&128?-(i&~(128<<8*(n-1))):i}h0.decode=pce;function yce(e){return e>2147483647?5:e>8388607?4:e>32767?3:e>127?2:e>0?1:0}function mce(e){let t=Math.abs(e),r=yce(t),n=Buffer.allocUnsafe(r),i=e<0;for(let o=0;o<r;++o)n.writeUInt8(t&255,o),t>>=8;return n[r-1]&128?n.writeUInt8(i?128:0,r-1):i&&(n[r-1]|=128),n}h0.encode=mce});var rv=L((i7e,vN)=>{p();y();var Wm={Array:function(e){return e!=null&&e.constructor===Array},Boolean:function(e){return typeof e=="boolean"},Function:function(e){return typeof e=="function"},Nil:function(e){return e==null},Number:function(e){return typeof e=="number"},Object:function(e){return typeof e=="object"},String:function(e){return typeof e=="string"},"":function(){return!0}};Wm.Null=Wm.Nil;for(xI in Wm)Wm[xI].toJSON=function(e){return e}.bind(null,xI);var xI;vN.exports=Wm});var AI=L((a7e,EN)=>{p();y();var Yl=rv();function AN(e){return e.name||e.toString().match(/function (.*?)\s*\(/)[1]}function wI(e){return Yl.Nil(e)?"":AN(e.constructor)}function gce(e){return Yl.Function(e)?"":Yl.String(e)?JSON.stringify(e):e&&Yl.Object(e)?"":e}function vI(e,t){Error.captureStackTrace&&Error.captureStackTrace(e,t)}function nv(e){return Yl.Function(e)?e.toJSON?e.toJSON():AN(e):Yl.Array(e)?"Array":e&&Yl.Object(e)?"Object":e!==void 0?e:""}function SN(e,t,r){var n=gce(t);return"Expected "+nv(e)+", got"+(r!==""?" "+r:"")+(n!==""?" "+n:"")}function Vc(e,t,r){r=r||wI(t),this.message=SN(e,t,r),vI(this,Vc),this.__type=e,this.__value=t,this.__valueTypeName=r}Vc.prototype=Object.create(Error.prototype);Vc.prototype.constructor=Vc;function bce(e,t,r,n,i){var o='" of type ';return t==="key"&&(o='" with key type '),SN('property "'+nv(r)+o+nv(e),n,i)}function p0(e,t,r,n,i){e?(i=i||wI(n),this.message=bce(e,r,t,n,i)):this.message='Unexpected property "'+t+'"',vI(this,Vc),this.__label=r,this.__property=t,this.__type=e,this.__value=n,this.__valueTypeName=i}p0.prototype=Object.create(Error.prototype);p0.prototype.constructor=Vc;function xce(e,t){return new Vc(e,{},t)}function wce(e,t,r){return e instanceof p0?(t=t+"."+e.__property,e=new p0(e.__type,t,e.__label,e.__value,e.__valueTypeName)):e instanceof Vc&&(e=new p0(e.__type,t,r,e.__value,e.__valueTypeName)),vI(e),e}EN.exports={TfTypeError:Vc,TfPropertyTypeError:p0,tfCustomError:xce,tfSubError:wce,tfJSON:nv,getValueTypeName:wI}});var PN=L((f7e,TN)=>{p();y();var kI=rv(),vce=AI();function IN(e){return Buffer.isBuffer(e)}function kN(e){return typeof e=="string"&&/^([0-9a-f]{2})+$/i.test(e)}function iv(e,t){var r=e.toJSON();function n(i){if(!e(i))return!1;if(i.length===t)return!0;throw vce.tfCustomError(r+"(Length: "+t+")",r+"(Length: "+i.length+")")}return n.toJSON=function(){return r},n}var Ace=iv.bind(null,kI.Array),Sce=iv.bind(null,IN),Ece=iv.bind(null,kN),Ice=iv.bind(null,kI.String);function kce(e,t,r){r=r||kI.Number;function n(i,o){return r(i,o)&&i>e&&i<t}return n.toJSON=function(){return`${r.toJSON()} between [${e}, ${t}]`},n}var EI=Math.pow(2,53)-1;function Tce(e){return typeof e=="number"&&isFinite(e)}function Pce(e){return e<<24>>24===e}function _ce(e){return e<<16>>16===e}function Bce(e){return(e|0)===e}function Cce(e){return typeof e=="number"&&e>=-EI&&e<=EI&&Math.floor(e)===e}function Mce(e){return(e&255)===e}function Rce(e){return(e&65535)===e}function Oce(e){return e>>>0===e}function Nce(e){return typeof e=="number"&&e>=0&&e<=EI&&Math.floor(e)===e}var II={ArrayN:Ace,Buffer:IN,BufferN:Sce,Finite:Tce,Hex:kN,HexN:Ece,Int8:Pce,Int16:_ce,Int32:Bce,Int53:Cce,Range:kce,StringN:Ice,UInt8:Mce,UInt16:Rce,UInt32:Oce,UInt53:Nce};for(SI in II)II[SI].toJSON=function(e){return e}.bind(null,SI);var SI;TN.exports=II});var TI=L((h7e,MN)=>{p();y();var jm=AI(),Jn=rv(),qc=jm.tfJSON,BN=jm.TfTypeError,CN=jm.TfPropertyTypeError,zm=jm.tfSubError,Uce=jm.getValueTypeName,Hc={arrayOf:function(t,r){t=Da(t),r=r||{};function n(i,o){return!Jn.Array(i)||Jn.Nil(i)||r.minLength!==void 0&&i.length<r.minLength||r.maxLength!==void 0&&i.length>r.maxLength||r.length!==void 0&&i.length!==r.length?!1:i.every(function(s,a){try{return Ri(t,s,o)}catch(c){throw zm(c,a)}})}return n.toJSON=function(){var i="["+qc(t)+"]";return r.length!==void 0?i+="{"+r.length+"}":(r.minLength!==void 0||r.maxLength!==void 0)&&(i+="{"+(r.minLength===void 0?0:r.minLength)+","+(r.maxLength===void 0?1/0:r.maxLength)+"}"),i},n},maybe:function e(t){t=Da(t);function r(n,i){return Jn.Nil(n)||t(n,i,e)}return r.toJSON=function(){return"?"+qc(t)},r},map:function(t,r){t=Da(t),r&&(r=Da(r));function n(i,o){if(!Jn.Object(i)||Jn.Nil(i))return!1;for(var s in i){try{r&&Ri(r,s,o)}catch(c){throw zm(c,s,"key")}try{var a=i[s];Ri(t,a,o)}catch(c){throw zm(c,s)}}return!0}return r?n.toJSON=function(){return"{"+qc(r)+": "+qc(t)+"}"}:n.toJSON=function(){return"{"+qc(t)+"}"},n},object:function(t){var r={};for(var n in t)r[n]=Da(t[n]);function i(o,s){if(!Jn.Object(o)||Jn.Nil(o))return!1;var a;try{for(a in r){var c=r[a],u=o[a];Ri(c,u,s)}}catch(h){throw zm(h,a)}if(s){for(a in o)if(!r[a])throw new CN(void 0,a)}return!0}return i.toJSON=function(){return qc(r)},i},anyOf:function(){var t=[].slice.call(arguments).map(Da);function r(n,i){return t.some(function(o){try{return Ri(o,n,i)}catch{return!1}})}return r.toJSON=function(){return t.map(qc).join("|")},r},allOf:function(){var t=[].slice.call(arguments).map(Da);function r(n,i){return t.every(function(o){try{return Ri(o,n,i)}catch{return!1}})}return r.toJSON=function(){return t.map(qc).join(" & ")},r},quacksLike:function(t){function r(n){return t===Uce(n)}return r.toJSON=function(){return t},r},tuple:function(){var t=[].slice.call(arguments).map(Da);function r(n,i){return Jn.Nil(n)||Jn.Nil(n.length)||i&&n.length!==t.length?!1:t.every(function(o,s){try{return Ri(o,n[s],i)}catch(a){throw zm(a,s)}})}return r.toJSON=function(){return"("+t.map(qc).join(", ")+")"},r},value:function(t){function r(n){return n===t}return r.toJSON=function(){return t},r}};Hc.oneOf=Hc.anyOf;function Da(e){if(Jn.String(e))return e[0]==="?"?Hc.maybe(e.slice(1)):Jn[e]||Hc.quacksLike(e);if(e&&Jn.Object(e)){if(Jn.Array(e)){if(e.length!==1)throw new TypeError("Expected compile() parameter of type Array of length 1");return Hc.arrayOf(e[0])}return Hc.object(e)}else if(Jn.Function(e))return e;return Hc.value(e)}function Ri(e,t,r,n){if(Jn.Function(e)){if(e(t,r))return!0;throw new BN(n||e,t)}return Ri(Da(e),t,r)}for(Wc in Jn)Ri[Wc]=Jn[Wc];var Wc;for(Wc in Hc)Ri[Wc]=Hc[Wc];var _N=PN();for(Wc in _N)Ri[Wc]=_N[Wc];Ri.compile=Da;Ri.TfTypeError=BN;Ri.TfPropertyTypeError=CN;MN.exports=Ri});var Zn=L(de=>{"use strict";p();y();Object.defineProperty(de,"__esModule",{value:!0});de.oneOf=de.Null=de.BufferN=de.Function=de.UInt32=de.UInt8=de.tuple=de.maybe=de.Hex=de.Buffer=de.String=de.Boolean=de.Array=de.Number=de.Hash256bit=de.Hash160bit=de.Buffer256bit=de.isTaptree=de.isTapleaf=de.TAPLEAF_VERSION_MASK=de.Network=de.ECPoint=de.Satoshi=de.Signer=de.BIP32Path=de.UInt31=de.isPoint=de.typeforce=void 0;var ov=Qr();de.typeforce=TI();var RN=ov.Buffer.alloc(32,0),ON=ov.Buffer.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex");function Dce(e){if(!ov.Buffer.isBuffer(e)||e.length<33)return!1;let t=e[0],r=e.slice(1,33);if(r.compare(RN)===0||r.compare(ON)>=0)return!1;if((t===2||t===3)&&e.length===33)return!0;let n=e.slice(33);return n.compare(RN)===0||n.compare(ON)>=0?!1:t===4&&e.length===65}de.isPoint=Dce;var Lce=Math.pow(2,31)-1;function Kce(e){return de.typeforce.UInt32(e)&&e<=Lce}de.UInt31=Kce;function NN(e){return de.typeforce.String(e)&&!!e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}de.BIP32Path=NN;NN.toJSON=()=>"BIP32 derivation path";function Fce(e){return(de.typeforce.Buffer(e.publicKey)||typeof e.getPublicKey=="function")&&typeof e.sign=="function"}de.Signer=Fce;var Vce=21*1e14;function qce(e){return de.typeforce.UInt53(e)&&e<=Vce}de.Satoshi=qce;de.ECPoint=de.typeforce.quacksLike("Point");de.Network=de.typeforce.compile({messagePrefix:de.typeforce.oneOf(de.typeforce.Buffer,de.typeforce.String),bip32:{public:de.typeforce.UInt32,private:de.typeforce.UInt32},pubKeyHash:de.typeforce.UInt8,scriptHash:de.typeforce.UInt8,wif:de.typeforce.UInt8});de.TAPLEAF_VERSION_MASK=254;function UN(e){return!e||!("output"in e)||!ov.Buffer.isBuffer(e.output)?!1:e.version!==void 0?(e.version&de.TAPLEAF_VERSION_MASK)===e.version:!0}de.isTapleaf=UN;function DN(e){return(0,de.Array)(e)?e.length!==2?!1:e.every(t=>DN(t)):UN(e)}de.isTaptree=DN;de.Buffer256bit=de.typeforce.BufferN(32);de.Hash160bit=de.typeforce.BufferN(20);de.Hash256bit=de.typeforce.BufferN(32);de.Number=de.typeforce.Number;de.Array=de.typeforce.Array;de.Boolean=de.typeforce.Boolean;de.String=de.typeforce.String;de.Buffer=de.typeforce.Buffer;de.Hex=de.typeforce.Hex;de.maybe=de.typeforce.maybe;de.tuple=de.typeforce.tuple;de.UInt8=de.typeforce.UInt8;de.UInt32=de.typeforce.UInt32;de.Function=de.typeforce.Function;de.BufferN=de.typeforce.BufferN;de.Null=de.typeforce.Null;de.oneOf=de.typeforce.oneOf});var qN=L(m0=>{"use strict";p();y();Object.defineProperty(m0,"__esModule",{value:!0});m0.encode=m0.decode=void 0;var{Buffer:y0}=Qr(),VN=gI(),PI=Zn(),{typeforce:Hce}=PI,LN=y0.alloc(1,0);function KN(e){let t=0;for(;e[t]===0;)++t;return t===e.length?LN:(e=e.slice(t),e[0]&128?y0.concat([LN,e],1+e.length):e)}function FN(e){e[0]===0&&(e=e.slice(1));let t=y0.alloc(32,0),r=Math.max(0,32-e.length);return e.copy(t,r),t}function Wce(e){let t=e.readUInt8(e.length-1),r=t&-129;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);let n=VN.decode(e.slice(0,-1)),i=FN(n.r),o=FN(n.s);return{signature:y0.concat([i,o],64),hashType:t}}m0.decode=Wce;function zce(e,t){Hce({signature:PI.BufferN(64),hashType:PI.UInt8},{signature:e,hashType:t});let r=t&-129;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);let n=y0.allocUnsafe(1);n.writeUInt8(t,0);let i=KN(e.slice(0,32)),o=KN(e.slice(32,64));return y0.concat([VN.encode(i,o),n])}m0.encode=zce});var Oi=L(Qt=>{"use strict";p();y();Object.defineProperty(Qt,"__esModule",{value:!0});Qt.signature=Qt.number=Qt.isCanonicalScriptSignature=Qt.isDefinedHashType=Qt.isCanonicalPubKey=Qt.toStack=Qt.fromASM=Qt.toASM=Qt.decompile=Qt.compile=Qt.countNonPushOnlyOPs=Qt.isPushOnly=Qt.OPS=void 0;var jce=gI(),Xi=tv();Object.defineProperty(Qt,"OPS",{enumerable:!0,get:function(){return Xi.OPS}});var _I=xN(),HN=wN(),Gce=qN(),La=Zn(),{typeforce:Gm}=La,WN=Xi.OPS.OP_RESERVED;function $ce(e){return La.Number(e)&&(e===Xi.OPS.OP_0||e>=Xi.OPS.OP_1&&e<=Xi.OPS.OP_16||e===Xi.OPS.OP_1NEGATE)}function zN(e){return La.Buffer(e)||$ce(e)}function jN(e){return La.Array(e)&&e.every(zN)}Qt.isPushOnly=jN;function Yce(e){return e.length-e.filter(zN).length}Qt.countNonPushOnlyOPs=Yce;function sv(e){if(e.length===0)return Xi.OPS.OP_0;if(e.length===1){if(e[0]>=1&&e[0]<=16)return WN+e[0];if(e[0]===129)return Xi.OPS.OP_1NEGATE}}function GN(e){return Buffer.isBuffer(e)}function Jce(e){return La.Array(e)}function av(e){return Buffer.isBuffer(e)}function $N(e){if(GN(e))return e;Gm(La.Array,e);let t=e.reduce((i,o)=>av(o)?o.length===1&&sv(o)!==void 0?i+1:i+_I.encodingLength(o.length)+o.length:i+1,0),r=Buffer.allocUnsafe(t),n=0;if(e.forEach(i=>{if(av(i)){let o=sv(i);if(o!==void 0){r.writeUInt8(o,n),n+=1;return}n+=_I.encode(r,i.length,n),i.copy(r,n),n+=i.length}else r.writeUInt8(i,n),n+=1}),n!==r.length)throw new Error("Could not decode chunks");return r}Qt.compile=$N;function BI(e){if(Jce(e))return e;Gm(La.Buffer,e);let t=[],r=0;for(;r<e.length;){let n=e[r];if(n>Xi.OPS.OP_0&&n<=Xi.OPS.OP_PUSHDATA4){let i=_I.decode(e,r);if(i===null||(r+=i.size,r+i.number>e.length))return null;let o=e.slice(r,r+i.number);r+=i.number;let s=sv(o);s!==void 0?t.push(s):t.push(o)}else t.push(n),r+=1}return t}Qt.decompile=BI;function Zce(e){return GN(e)&&(e=BI(e)),e.map(t=>{if(av(t)){let r=sv(t);if(r===void 0)return t.toString("hex");t=r}return Xi.REVERSE_OPS[t]}).join(" ")}Qt.toASM=Zce;function Qce(e){return Gm(La.String,e),$N(e.split(" ").map(t=>Xi.OPS[t]!==void 0?Xi.OPS[t]:(Gm(La.Hex,t),Buffer.from(t,"hex"))))}Qt.fromASM=Qce;function Xce(e){return e=BI(e),Gm(jN,e),e.map(t=>av(t)?t:t===Xi.OPS.OP_0?Buffer.allocUnsafe(0):HN.encode(t-WN))}Qt.toStack=Xce;function eue(e){return La.isPoint(e)}Qt.isCanonicalPubKey=eue;function YN(e){let t=e&-129;return t>0&&t<4}Qt.isDefinedHashType=YN;function tue(e){return!Buffer.isBuffer(e)||!YN(e[e.length-1])?!1:jce.check(e.slice(0,-1))}Qt.isCanonicalScriptSignature=tue;Qt.number=HN;Qt.signature=Gce});var zc=L(g0=>{"use strict";p();y();Object.defineProperty(g0,"__esModule",{value:!0});g0.value=g0.prop=void 0;function rue(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){let n=r.call(this);return this[t]=n,n},set(n){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:n,writable:!0})}})}g0.prop=rue;function nue(e){let t;return()=>(t!==void 0||(t=e()),t)}g0.value=nue});var QN=L(uv=>{"use strict";p();y();Object.defineProperty(uv,"__esModule",{value:!0});uv.p2data=void 0;var iue=rs(),cv=Oi(),jc=Zn(),JN=zc(),ZN=cv.OPS;function oue(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}function sue(e,t){if(!e.data&&!e.output)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,jc.typeforce)({network:jc.typeforce.maybe(jc.typeforce.Object),output:jc.typeforce.maybe(jc.typeforce.Buffer),data:jc.typeforce.maybe(jc.typeforce.arrayOf(jc.typeforce.Buffer))},e);let n={name:"embed",network:e.network||iue.bitcoin};if(JN.prop(n,"output",()=>{if(e.data)return cv.compile([ZN.OP_RETURN].concat(e.data))}),JN.prop(n,"data",()=>{if(e.output)return cv.decompile(e.output).slice(1)}),t.validate&&e.output){let i=cv.decompile(e.output);if(i[0]!==ZN.OP_RETURN)throw new TypeError("Output is invalid");if(!i.slice(1).every(jc.typeforce.Buffer))throw new TypeError("Output is invalid");if(e.data&&!oue(e.data,n.data))throw new TypeError("Data mismatch")}return Object.assign(n,e)}uv.p2data=sue});var eU=L(lv=>{"use strict";p();y();Object.defineProperty(lv,"__esModule",{value:!0});lv.p2ms=void 0;var aue=rs(),b0=Oi(),hn=Zn(),Sf=zc(),x0=b0.OPS,fv=x0.OP_RESERVED;function XN(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}function cue(e,t){if(!e.input&&!e.output&&!(e.pubkeys&&e.m!==void 0)&&!e.signatures)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{});function r(c){return b0.isCanonicalScriptSignature(c)||(t.allowIncomplete&&c===x0.OP_0)!==void 0}(0,hn.typeforce)({network:hn.typeforce.maybe(hn.typeforce.Object),m:hn.typeforce.maybe(hn.typeforce.Number),n:hn.typeforce.maybe(hn.typeforce.Number),output:hn.typeforce.maybe(hn.typeforce.Buffer),pubkeys:hn.typeforce.maybe(hn.typeforce.arrayOf(hn.isPoint)),signatures:hn.typeforce.maybe(hn.typeforce.arrayOf(r)),input:hn.typeforce.maybe(hn.typeforce.Buffer)},e);let i={network:e.network||aue.bitcoin},o=[],s=!1;function a(c){s||(s=!0,o=b0.decompile(c),i.m=o[0]-fv,i.n=o[o.length-2]-fv,i.pubkeys=o.slice(1,-2))}if(Sf.prop(i,"output",()=>{if(e.m&&i.n&&e.pubkeys)return b0.compile([].concat(fv+e.m,e.pubkeys,fv+i.n,x0.OP_CHECKMULTISIG))}),Sf.prop(i,"m",()=>{if(i.output)return a(i.output),i.m}),Sf.prop(i,"n",()=>{if(i.pubkeys)return i.pubkeys.length}),Sf.prop(i,"pubkeys",()=>{if(e.output)return a(e.output),i.pubkeys}),Sf.prop(i,"signatures",()=>{if(e.input)return b0.decompile(e.input).slice(1)}),Sf.prop(i,"input",()=>{if(e.signatures)return b0.compile([x0.OP_0].concat(e.signatures))}),Sf.prop(i,"witness",()=>{if(i.input)return[]}),Sf.prop(i,"name",()=>{if(!(!i.m||!i.n))return`p2ms(${i.m} of ${i.n})`}),t.validate){if(e.output){if(a(e.output),!hn.typeforce.Number(o[0]))throw new TypeError("Output is invalid");if(!hn.typeforce.Number(o[o.length-2]))throw new TypeError("Output is invalid");if(o[o.length-1]!==x0.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(i.m<=0||i.n>16||i.m>i.n||i.n!==o.length-3)throw new TypeError("Output is invalid");if(!i.pubkeys.every(c=>(0,hn.isPoint)(c)))throw new TypeError("Output is invalid");if(e.m!==void 0&&e.m!==i.m)throw new TypeError("m mismatch");if(e.n!==void 0&&e.n!==i.n)throw new TypeError("n mismatch");if(e.pubkeys&&!XN(e.pubkeys,i.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(e.n!==void 0&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(i.n=e.pubkeys.length,i.n<i.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<i.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>i.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==x0.OP_0)throw new TypeError("Input is invalid");if(i.signatures.length===0||!i.signatures.every(r))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!XN(e.signatures,i.signatures))throw new TypeError("Signature mismatch");if(e.m!==void 0&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(i,e)}lv.p2ms=cue});var rU=L(dv=>{"use strict";p();y();Object.defineProperty(dv,"__esModule",{value:!0});dv.p2pk=void 0;var uue=rs(),v0=Oi(),Gs=Zn(),w0=zc(),tU=v0.OPS;function fue(e,t){if(!e.input&&!e.output&&!e.pubkey&&!e.input&&!e.signature)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,Gs.typeforce)({network:Gs.typeforce.maybe(Gs.typeforce.Object),output:Gs.typeforce.maybe(Gs.typeforce.Buffer),pubkey:Gs.typeforce.maybe(Gs.isPoint),signature:Gs.typeforce.maybe(v0.isCanonicalScriptSignature),input:Gs.typeforce.maybe(Gs.typeforce.Buffer)},e);let r=w0.value(()=>v0.decompile(e.input)),i={name:"p2pk",network:e.network||uue.bitcoin};if(w0.prop(i,"output",()=>{if(e.pubkey)return v0.compile([e.pubkey,tU.OP_CHECKSIG])}),w0.prop(i,"pubkey",()=>{if(e.output)return e.output.slice(1,-1)}),w0.prop(i,"signature",()=>{if(e.input)return r()[0]}),w0.prop(i,"input",()=>{if(e.signature)return v0.compile([e.signature])}),w0.prop(i,"witness",()=>{if(i.input)return[]}),t.validate){if(e.output){if(e.output[e.output.length-1]!==tU.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!(0,Gs.isPoint)(i.pubkey))throw new TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(i.pubkey))throw new TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(i.input))throw new TypeError("Signature mismatch");if(e.input){if(r().length!==1)throw new TypeError("Input is invalid");if(!v0.isCanonicalScriptSignature(i.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(i,e)}dv.p2pk=fue});var sU=L(A0=>{"use strict";p();y();Object.defineProperty(A0,"__esModule",{value:!0});A0.ripemd160=A0.RIPEMD160=void 0;var lue=yy(),due=Su(),hue=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),iU=Uint8Array.from({length:16},(e,t)=>t),pue=iU.map(e=>(9*e+5)%16),CI=[iU],MI=[pue];for(let e=0;e<4;e++)for(let t of[CI,MI])t.push(t[e].map(r=>hue[r]));var oU=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),yue=CI.map((e,t)=>e.map(r=>oU[t][r])),mue=MI.map((e,t)=>e.map(r=>oU[t][r])),gue=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),bue=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),hv=(e,t)=>e<<t|e>>>32-t;function nU(e,t,r,n){return e===0?t^r^n:e===1?t&r|~t&n:e===2?(t|~r)^n:e===3?t&n|r&~n:t^(r|~n)}var pv=new Uint32Array(16),yv=class extends lue.SHA2{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:t,h1:r,h2:n,h3:i,h4:o}=this;return[t,r,n,i,o]}set(t,r,n,i,o){this.h0=t|0,this.h1=r|0,this.h2=n|0,this.h3=i|0,this.h4=o|0}process(t,r){for(let x=0;x<16;x++,r+=4)pv[x]=t.getUint32(r,!0);let n=this.h0|0,i=n,o=this.h1|0,s=o,a=this.h2|0,c=a,u=this.h3|0,h=u,l=this.h4|0,g=l;for(let x=0;x<5;x++){let A=4-x,E=gue[x],B=bue[x],M=CI[x],N=MI[x],R=yue[x],V=mue[x];for(let q=0;q<16;q++){let W=hv(n+nU(x,o,a,u)+pv[M[q]]+E,R[q])+l|0;n=l,l=u,u=hv(a,10)|0,a=o,o=W}for(let q=0;q<16;q++){let W=hv(i+nU(A,s,c,h)+pv[N[q]]+B,V[q])+g|0;i=g,g=h,h=hv(c,10)|0,c=s,s=W}}this.set(this.h1+a+h|0,this.h2+u+g|0,this.h3+l+i|0,this.h4+n+s|0,this.h0+o+c|0)}roundClean(){pv.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};A0.RIPEMD160=yv;A0.ripemd160=(0,due.wrapConstructor)(()=>new yv)});var aU=L(mv=>{"use strict";p();y();Object.defineProperty(mv,"__esModule",{value:!0});mv.sha1=void 0;var xue=yy(),wue=Su(),RI=(e,t)=>e<<t|e>>>32-t>>>0,vue=(e,t,r)=>e&t^~e&r,Aue=(e,t,r)=>e&t^e&r^t&r,$m=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),Ef=new Uint32Array(80),OI=class extends xue.SHA2{constructor(){super(64,20,8,!1),this.A=$m[0]|0,this.B=$m[1]|0,this.C=$m[2]|0,this.D=$m[3]|0,this.E=$m[4]|0}get(){let{A:t,B:r,C:n,D:i,E:o}=this;return[t,r,n,i,o]}set(t,r,n,i,o){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0}process(t,r){for(let c=0;c<16;c++,r+=4)Ef[c]=t.getUint32(r,!1);for(let c=16;c<80;c++)Ef[c]=RI(Ef[c-3]^Ef[c-8]^Ef[c-14]^Ef[c-16],1);let{A:n,B:i,C:o,D:s,E:a}=this;for(let c=0;c<80;c++){let u,h;c<20?(u=vue(i,o,s),h=1518500249):c<40?(u=i^o^s,h=1859775393):c<60?(u=Aue(i,o,s),h=2400959708):(u=i^o^s,h=3395469782);let l=RI(n,5)+u+a+h+Ef[c]|0;a=s,s=o,o=RI(i,30),i=n,n=l}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,this.set(n,i,o,s,a)}roundClean(){Ef.fill(0)}destroy(){this.set(0,0,0,0,0),this.buffer.fill(0)}};mv.sha1=(0,wue.wrapConstructor)(()=>new OI)});var Ka=L(pn=>{"use strict";p();y();Object.defineProperty(pn,"__esModule",{value:!0});pn.taggedHash=pn.TAGGED_HASH_PREFIXES=pn.TAGS=pn.hash256=pn.hash160=pn.sha256=pn.sha1=pn.ripemd160=void 0;var{Buffer:Ni}=Qr(),cU=sU(),Sue=aU(),gv=ax();function Eue(e){return Ni.from((0,cU.ripemd160)(Uint8Array.from(e)))}pn.ripemd160=Eue;function Iue(e){return Ni.from((0,Sue.sha1)(Uint8Array.from(e)))}pn.sha1=Iue;function uU(e){return Ni.from((0,gv.sha256)(Uint8Array.from(e)))}pn.sha256=uU;function kue(e){return Ni.from((0,cU.ripemd160)((0,gv.sha256)(Uint8Array.from(e))))}pn.hash160=kue;function Tue(e){return Ni.from((0,gv.sha256)((0,gv.sha256)(Uint8Array.from(e))))}pn.hash256=Tue;pn.TAGS=["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapBranch","TapSighash","TapTweak","KeyAgg list","KeyAgg coefficient"];pn.TAGGED_HASH_PREFIXES={"BIP0340/challenge":Ni.from([123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124,123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124]),"BIP0340/aux":Ni.from([241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144,241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144]),"BIP0340/nonce":Ni.from([7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47,7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47]),TapLeaf:Ni.from([174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238,174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238]),TapBranch:Ni.from([25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21,25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21]),TapSighash:Ni.from([244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49,244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49]),TapTweak:Ni.from([232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233,232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233]),"KeyAgg list":Ni.from([72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240,72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240]),"KeyAgg coefficient":Ni.from([191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129,191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129])};function Pue(e,t){return uU(Ni.concat([pn.TAGGED_HASH_PREFIXES[e],t]))}pn.taggedHash=Pue});var lU=L(bv=>{"use strict";p();y();Object.defineProperty(bv,"__esModule",{value:!0});bv.p2pkh=void 0;var NI=Ka(),_ue=rs(),S0=Oi(),Ui=Zn(),Gc=zc(),fU=f0(),If=S0.OPS;function Bue(e,t){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.input)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,Ui.typeforce)({network:Ui.typeforce.maybe(Ui.typeforce.Object),address:Ui.typeforce.maybe(Ui.typeforce.String),hash:Ui.typeforce.maybe(Ui.typeforce.BufferN(20)),output:Ui.typeforce.maybe(Ui.typeforce.BufferN(25)),pubkey:Ui.typeforce.maybe(Ui.isPoint),signature:Ui.typeforce.maybe(S0.isCanonicalScriptSignature),input:Ui.typeforce.maybe(Ui.typeforce.Buffer)},e);let r=Gc.value(()=>{let s=Buffer.from(fU.decode(e.address)),a=s.readUInt8(0),c=s.slice(1);return{version:a,hash:c}}),n=Gc.value(()=>S0.decompile(e.input)),i=e.network||_ue.bitcoin,o={name:"p2pkh",network:i};if(Gc.prop(o,"address",()=>{if(!o.hash)return;let s=Buffer.allocUnsafe(21);return s.writeUInt8(i.pubKeyHash,0),o.hash.copy(s,1),fU.encode(s)}),Gc.prop(o,"hash",()=>{if(e.output)return e.output.slice(3,23);if(e.address)return r().hash;if(e.pubkey||o.pubkey)return NI.hash160(e.pubkey||o.pubkey)}),Gc.prop(o,"output",()=>{if(o.hash)return S0.compile([If.OP_DUP,If.OP_HASH160,o.hash,If.OP_EQUALVERIFY,If.OP_CHECKSIG])}),Gc.prop(o,"pubkey",()=>{if(e.input)return n()[1]}),Gc.prop(o,"signature",()=>{if(e.input)return n()[0]}),Gc.prop(o,"input",()=>{if(e.pubkey&&e.signature)return S0.compile([e.signature,e.pubkey])}),Gc.prop(o,"witness",()=>{if(o.input)return[]}),t.validate){let s=Buffer.from([]);if(e.address){if(r().version!==i.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(r().hash.length!==20)throw new TypeError("Invalid address");s=r().hash}if(e.hash){if(s.length>0&&!s.equals(e.hash))throw new TypeError("Hash mismatch");s=e.hash}if(e.output){if(e.output.length!==25||e.output[0]!==If.OP_DUP||e.output[1]!==If.OP_HASH160||e.output[2]!==20||e.output[23]!==If.OP_EQUALVERIFY||e.output[24]!==If.OP_CHECKSIG)throw new TypeError("Output is invalid");let a=e.output.slice(3,23);if(s.length>0&&!s.equals(a))throw new TypeError("Hash mismatch");s=a}if(e.pubkey){let a=NI.hash160(e.pubkey);if(s.length>0&&!s.equals(a))throw new TypeError("Hash mismatch");s=a}if(e.input){let a=n();if(a.length!==2)throw new TypeError("Input is invalid");if(!S0.isCanonicalScriptSignature(a[0]))throw new TypeError("Input has invalid signature");if(!(0,Ui.isPoint)(a[1]))throw new TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(a[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(a[1]))throw new TypeError("Pubkey mismatch");let c=NI.hash160(a[1]);if(s.length>0&&!s.equals(c))throw new TypeError("Hash mismatch")}}return Object.assign(o,e)}bv.p2pkh=Bue});var pU=L(xv=>{"use strict";p();y();Object.defineProperty(xv,"__esModule",{value:!0});xv.p2sh=void 0;var dU=Ka(),Cue=rs(),Va=Oi(),Ar=Zn(),Fa=zc(),hU=f0(),Ym=Va.OPS;function Mue(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}function Rue(e,t){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.input)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,Ar.typeforce)({network:Ar.typeforce.maybe(Ar.typeforce.Object),address:Ar.typeforce.maybe(Ar.typeforce.String),hash:Ar.typeforce.maybe(Ar.typeforce.BufferN(20)),output:Ar.typeforce.maybe(Ar.typeforce.BufferN(23)),redeem:Ar.typeforce.maybe({network:Ar.typeforce.maybe(Ar.typeforce.Object),output:Ar.typeforce.maybe(Ar.typeforce.Buffer),input:Ar.typeforce.maybe(Ar.typeforce.Buffer),witness:Ar.typeforce.maybe(Ar.typeforce.arrayOf(Ar.typeforce.Buffer))}),input:Ar.typeforce.maybe(Ar.typeforce.Buffer),witness:Ar.typeforce.maybe(Ar.typeforce.arrayOf(Ar.typeforce.Buffer))},e);let r=e.network;r||(r=e.redeem&&e.redeem.network||Cue.bitcoin);let n={network:r},i=Fa.value(()=>{let a=Buffer.from(hU.decode(e.address)),c=a.readUInt8(0),u=a.slice(1);return{version:c,hash:u}}),o=Fa.value(()=>Va.decompile(e.input)),s=Fa.value(()=>{let a=o(),c=a[a.length-1];return{network:r,output:c===Ym.OP_FALSE?Buffer.from([]):c,input:Va.compile(a.slice(0,-1)),witness:e.witness||[]}});if(Fa.prop(n,"address",()=>{if(!n.hash)return;let a=Buffer.allocUnsafe(21);return a.writeUInt8(n.network.scriptHash,0),n.hash.copy(a,1),hU.encode(a)}),Fa.prop(n,"hash",()=>{if(e.output)return e.output.slice(2,22);if(e.address)return i().hash;if(n.redeem&&n.redeem.output)return dU.hash160(n.redeem.output)}),Fa.prop(n,"output",()=>{if(n.hash)return Va.compile([Ym.OP_HASH160,n.hash,Ym.OP_EQUAL])}),Fa.prop(n,"redeem",()=>{if(e.input)return s()}),Fa.prop(n,"input",()=>{if(!(!e.redeem||!e.redeem.input||!e.redeem.output))return Va.compile([].concat(Va.decompile(e.redeem.input),e.redeem.output))}),Fa.prop(n,"witness",()=>{if(n.redeem&&n.redeem.witness)return n.redeem.witness;if(n.input)return[]}),Fa.prop(n,"name",()=>{let a=["p2sh"];return n.redeem!==void 0&&n.redeem.name!==void 0&&a.push(n.redeem.name),a.join("-")}),t.validate){let a=Buffer.from([]);if(e.address){if(i().version!==r.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(i().hash.length!==20)throw new TypeError("Invalid address");a=i().hash}if(e.hash){if(a.length>0&&!a.equals(e.hash))throw new TypeError("Hash mismatch");a=e.hash}if(e.output){if(e.output.length!==23||e.output[0]!==Ym.OP_HASH160||e.output[1]!==20||e.output[22]!==Ym.OP_EQUAL)throw new TypeError("Output is invalid");let u=e.output.slice(2,22);if(a.length>0&&!a.equals(u))throw new TypeError("Hash mismatch");a=u}let c=u=>{if(u.output){let h=Va.decompile(u.output);if(!h||h.length<1)throw new TypeError("Redeem.output too short");if(u.output.byteLength>520)throw new TypeError("Redeem.output unspendable if larger than 520 bytes");if(Va.countNonPushOnlyOPs(h)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");let l=dU.hash160(u.output);if(a.length>0&&!a.equals(l))throw new TypeError("Hash mismatch");a=l}if(u.input){let h=u.input.length>0,l=u.witness&&u.witness.length>0;if(!h&&!l)throw new TypeError("Empty input");if(h&&l)throw new TypeError("Input and witness provided");if(h){let g=Va.decompile(u.input);if(!Va.isPushOnly(g))throw new TypeError("Non push-only scriptSig")}}};if(e.input){let u=o();if(!u||u.length<1)throw new TypeError("Input too short");if(!Buffer.isBuffer(s().output))throw new TypeError("Input is invalid");c(s())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==r)throw new TypeError("Network mismatch");if(e.input){let u=s();if(e.redeem.output&&!e.redeem.output.equals(u.output))throw new TypeError("Redeem.output mismatch");if(e.redeem.input&&!e.redeem.input.equals(u.input))throw new TypeError("Redeem.input mismatch")}c(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!Mue(e.redeem.witness,e.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(n,e)}xv.p2sh=Rue});var Jm=L(I0=>{"use strict";p();y();Object.defineProperty(I0,"__esModule",{value:!0});I0.bech32m=I0.bech32=void 0;var wv="qpzry9x8gf2tvdw0s3jn54khce6mua7l",mU={};for(let e=0;e<wv.length;e++){let t=wv.charAt(e);mU[t]=e}function E0(e){let t=e>>25;return(e&33554431)<<5^-(t>>0&1)&996825010^-(t>>1&1)&642813549^-(t>>2&1)&513874426^-(t>>3&1)&1027748829^-(t>>4&1)&705979059}function yU(e){let t=1;for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=E0(t)^n>>5}t=E0(t);for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);t=E0(t)^n&31}return t}function UI(e,t,r,n){let i=0,o=0,s=(1<<r)-1,a=[];for(let c=0;c<e.length;++c)for(i=i<<t|e[c],o+=t;o>=r;)o-=r,a.push(i>>o&s);if(n)o>0&&a.push(i<<r-o&s);else{if(o>=t)return"Excess padding";if(i<<r-o&s)return"Non-zero padding"}return a}function Oue(e){return UI(e,8,5,!0)}function Nue(e){let t=UI(e,5,8,!1);if(Array.isArray(t))return t}function Uue(e){let t=UI(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}function gU(e){let t;e==="bech32"?t=1:t=734539939;function r(s,a,c){if(c=c||90,s.length+7+a.length>c)throw new TypeError("Exceeds length limit");s=s.toLowerCase();let u=yU(s);if(typeof u=="string")throw new Error(u);let h=s+"1";for(let l=0;l<a.length;++l){let g=a[l];if(g>>5)throw new Error("Non 5-bit word");u=E0(u)^g,h+=wv.charAt(g)}for(let l=0;l<6;++l)u=E0(u);u^=t;for(let l=0;l<6;++l){let g=u>>(5-l)*5&31;h+=wv.charAt(g)}return h}function n(s,a){if(a=a||90,s.length<8)return s+" too short";if(s.length>a)return"Exceeds length limit";let c=s.toLowerCase(),u=s.toUpperCase();if(s!==c&&s!==u)return"Mixed-case string "+s;s=c;let h=s.lastIndexOf("1");if(h===-1)return"No separator character for "+s;if(h===0)return"Missing prefix for "+s;let l=s.slice(0,h),g=s.slice(h+1);if(g.length<6)return"Data too short";let x=yU(l);if(typeof x=="string")return x;let A=[];for(let E=0;E<g.length;++E){let B=g.charAt(E),M=mU[B];if(M===void 0)return"Unknown character "+B;x=E0(x)^M,!(E+6>=g.length)&&A.push(M)}return x!==t?"Invalid checksum for "+s:{prefix:l,words:A}}function i(s,a){let c=n(s,a);if(typeof c=="object")return c}function o(s,a){let c=n(s,a);if(typeof c=="object")return c;throw new Error(c)}return{decodeUnsafe:i,decode:o,encode:r,toWords:Oue,fromWordsUnsafe:Nue,fromWords:Uue}}I0.bech32=gU("bech32");I0.bech32m=gU("bech32m")});var xU=L(Sv=>{"use strict";p();y();Object.defineProperty(Sv,"__esModule",{value:!0});Sv.p2wpkh=void 0;var{Buffer:LI}=Qr(),DI=Ka(),Due=rs(),Av=Oi(),yn=Zn(),kf=zc(),vv=Jm(),bU=Av.OPS,Lue=LI.alloc(0);function Kue(e,t){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.witness)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,yn.typeforce)({address:yn.typeforce.maybe(yn.typeforce.String),hash:yn.typeforce.maybe(yn.typeforce.BufferN(20)),input:yn.typeforce.maybe(yn.typeforce.BufferN(0)),network:yn.typeforce.maybe(yn.typeforce.Object),output:yn.typeforce.maybe(yn.typeforce.BufferN(22)),pubkey:yn.typeforce.maybe(yn.isPoint),signature:yn.typeforce.maybe(Av.isCanonicalScriptSignature),witness:yn.typeforce.maybe(yn.typeforce.arrayOf(yn.typeforce.Buffer))},e);let r=kf.value(()=>{let o=vv.bech32.decode(e.address),s=o.words.shift(),a=vv.bech32.fromWords(o.words);return{version:s,prefix:o.prefix,data:LI.from(a)}}),n=e.network||Due.bitcoin,i={name:"p2wpkh",network:n};if(kf.prop(i,"address",()=>{if(!i.hash)return;let o=vv.bech32.toWords(i.hash);return o.unshift(0),vv.bech32.encode(n.bech32,o)}),kf.prop(i,"hash",()=>{if(e.output)return e.output.slice(2,22);if(e.address)return r().data;if(e.pubkey||i.pubkey)return DI.hash160(e.pubkey||i.pubkey)}),kf.prop(i,"output",()=>{if(i.hash)return Av.compile([bU.OP_0,i.hash])}),kf.prop(i,"pubkey",()=>{if(e.pubkey)return e.pubkey;if(e.witness)return e.witness[1]}),kf.prop(i,"signature",()=>{if(e.witness)return e.witness[0]}),kf.prop(i,"input",()=>{if(i.witness)return Lue}),kf.prop(i,"witness",()=>{if(e.pubkey&&e.signature)return[e.signature,e.pubkey]}),t.validate){let o=LI.from([]);if(e.address){if(n&&n.bech32!==r().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(r().version!==0)throw new TypeError("Invalid address version");if(r().data.length!==20)throw new TypeError("Invalid address data");o=r().data}if(e.hash){if(o.length>0&&!o.equals(e.hash))throw new TypeError("Hash mismatch");o=e.hash}if(e.output){if(e.output.length!==22||e.output[0]!==bU.OP_0||e.output[1]!==20)throw new TypeError("Output is invalid");if(o.length>0&&!o.equals(e.output.slice(2)))throw new TypeError("Hash mismatch");o=e.output.slice(2)}if(e.pubkey){let s=DI.hash160(e.pubkey);if(o.length>0&&!o.equals(s))throw new TypeError("Hash mismatch");if(o=s,!(0,yn.isPoint)(e.pubkey)||e.pubkey.length!==33)throw new TypeError("Invalid pubkey for p2wpkh")}if(e.witness){if(e.witness.length!==2)throw new TypeError("Witness is invalid");if(!Av.isCanonicalScriptSignature(e.witness[0]))throw new TypeError("Witness has invalid signature");if(!(0,yn.isPoint)(e.witness[1])||e.witness[1].length!==33)throw new TypeError("Witness has invalid pubkey");if(e.signature&&!e.signature.equals(e.witness[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(e.witness[1]))throw new TypeError("Pubkey mismatch");let s=DI.hash160(e.witness[1]);if(o.length>0&&!o.equals(s))throw new TypeError("Hash mismatch")}}return Object.assign(i,e)}Sv.p2wpkh=Kue});var AU=L(Tv=>{"use strict";p();y();Object.defineProperty(Tv,"__esModule",{value:!0});Tv.p2wsh=void 0;var{Buffer:kv}=Qr(),wU=Ka(),Fue=rs(),Yc=Oi(),dr=Zn(),$c=zc(),Ev=Jm(),vU=Yc.OPS,KI=kv.alloc(0);function Vue(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}function Iv(e){return!!(kv.isBuffer(e)&&e.length===65&&e[0]===4&&(0,dr.isPoint)(e))}function que(e,t){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.witness)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,dr.typeforce)({network:dr.typeforce.maybe(dr.typeforce.Object),address:dr.typeforce.maybe(dr.typeforce.String),hash:dr.typeforce.maybe(dr.typeforce.BufferN(32)),output:dr.typeforce.maybe(dr.typeforce.BufferN(34)),redeem:dr.typeforce.maybe({input:dr.typeforce.maybe(dr.typeforce.Buffer),network:dr.typeforce.maybe(dr.typeforce.Object),output:dr.typeforce.maybe(dr.typeforce.Buffer),witness:dr.typeforce.maybe(dr.typeforce.arrayOf(dr.typeforce.Buffer))}),input:dr.typeforce.maybe(dr.typeforce.BufferN(0)),witness:dr.typeforce.maybe(dr.typeforce.arrayOf(dr.typeforce.Buffer))},e);let r=$c.value(()=>{let s=Ev.bech32.decode(e.address),a=s.words.shift(),c=Ev.bech32.fromWords(s.words);return{version:a,prefix:s.prefix,data:kv.from(c)}}),n=$c.value(()=>Yc.decompile(e.redeem.input)),i=e.network;i||(i=e.redeem&&e.redeem.network||Fue.bitcoin);let o={network:i};if($c.prop(o,"address",()=>{if(!o.hash)return;let s=Ev.bech32.toWords(o.hash);return s.unshift(0),Ev.bech32.encode(i.bech32,s)}),$c.prop(o,"hash",()=>{if(e.output)return e.output.slice(2);if(e.address)return r().data;if(o.redeem&&o.redeem.output)return wU.sha256(o.redeem.output)}),$c.prop(o,"output",()=>{if(o.hash)return Yc.compile([vU.OP_0,o.hash])}),$c.prop(o,"redeem",()=>{if(e.witness)return{output:e.witness[e.witness.length-1],input:KI,witness:e.witness.slice(0,-1)}}),$c.prop(o,"input",()=>{if(o.witness)return KI}),$c.prop(o,"witness",()=>{if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){let s=Yc.toStack(n());return o.redeem=Object.assign({witness:s},e.redeem),o.redeem.input=KI,[].concat(s,e.redeem.output)}if(e.redeem&&e.redeem.output&&e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)}),$c.prop(o,"name",()=>{let s=["p2wsh"];return o.redeem!==void 0&&o.redeem.name!==void 0&&s.push(o.redeem.name),s.join("-")}),t.validate){let s=kv.from([]);if(e.address){if(r().prefix!==i.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(r().version!==0)throw new TypeError("Invalid address version");if(r().data.length!==32)throw new TypeError("Invalid address data");s=r().data}if(e.hash){if(s.length>0&&!s.equals(e.hash))throw new TypeError("Hash mismatch");s=e.hash}if(e.output){if(e.output.length!==34||e.output[0]!==vU.OP_0||e.output[1]!==32)throw new TypeError("Output is invalid");let a=e.output.slice(2);if(s.length>0&&!s.equals(a))throw new TypeError("Hash mismatch");s=a}if(e.redeem){if(e.redeem.network&&e.redeem.network!==i)throw new TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(e.redeem.output){let a=Yc.decompile(e.redeem.output);if(!a||a.length<1)throw new TypeError("Redeem.output is invalid");if(e.redeem.output.byteLength>3600)throw new TypeError("Redeem.output unspendable if larger than 3600 bytes");if(Yc.countNonPushOnlyOPs(a)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");let c=wU.sha256(e.redeem.output);if(s.length>0&&!s.equals(c))throw new TypeError("Hash mismatch");s=c}if(e.redeem.input&&!Yc.isPushOnly(n()))throw new TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!Vue(e.witness,e.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(e.redeem.input&&n().some(Iv)||e.redeem.output&&(Yc.decompile(e.redeem.output)||[]).some(Iv))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(e.witness&&e.witness.length>0){let a=e.witness[e.witness.length-1];if(e.redeem&&e.redeem.output&&!e.redeem.output.equals(a))throw new TypeError("Witness and redeem.output mismatch");if(e.witness.some(Iv)||(Yc.decompile(a)||[]).some(Iv))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(o,e)}Tv.p2wsh=que});var Pv=L(k0=>{"use strict";p();y();Object.defineProperty(k0,"__esModule",{value:!0});k0.getEccLib=k0.initEccLib=void 0;var Zm={};function Hue(e){e?e!==Zm.eccLib&&(zue(e),Zm.eccLib=e):Zm.eccLib=e}k0.initEccLib=Hue;function Wue(){if(!Zm.eccLib)throw new Error("No ECC Library provided. You must call initEccLib() with a valid TinySecp256k1Interface instance");return Zm.eccLib}k0.getEccLib=Wue;var Jc=e=>Buffer.from(e,"hex");function zue(e){ns(typeof e.isXOnlyPoint=="function"),ns(e.isXOnlyPoint(Jc("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),ns(e.isXOnlyPoint(Jc("fffffffffffffffffffffffffffffffffffffffffffffffffffffffeeffffc2e"))),ns(e.isXOnlyPoint(Jc("f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9"))),ns(e.isXOnlyPoint(Jc("0000000000000000000000000000000000000000000000000000000000000001"))),ns(!e.isXOnlyPoint(Jc("0000000000000000000000000000000000000000000000000000000000000000"))),ns(!e.isXOnlyPoint(Jc("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"))),ns(typeof e.xOnlyPointAddTweak=="function"),jue.forEach(t=>{let r=e.xOnlyPointAddTweak(Jc(t.pubkey),Jc(t.tweak));t.result===null?ns(r===null):(ns(r!==null),ns(r.parity===t.parity),ns(Buffer.from(r.xOnlyPubkey).equals(Jc(t.result))))})}function ns(e){if(!e)throw new Error("ecc library invalid")}var jue=[{pubkey:"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",tweak:"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140",parity:-1,result:null},{pubkey:"1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b",tweak:"a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac",parity:1,result:"e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"},{pubkey:"2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991",tweak:"823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47",parity:0,result:"9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"}]});var qI=L((f9e,EU)=>{"use strict";p();y();var FI=W_().Buffer,Gue=9007199254740991;function VI(e){if(e<0||e>Gue||e%1!==0)throw new RangeError("value out of range")}function Qm(e,t,r){if(VI(e),t||(t=FI.allocUnsafe(SU(e))),!FI.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");return r||(r=0),e<253?(t.writeUInt8(e,r),Qm.bytes=1):e<=65535?(t.writeUInt8(253,r),t.writeUInt16LE(e,r+1),Qm.bytes=3):e<=4294967295?(t.writeUInt8(254,r),t.writeUInt32LE(e,r+1),Qm.bytes=5):(t.writeUInt8(255,r),t.writeUInt32LE(e>>>0,r+1),t.writeUInt32LE(e/4294967296|0,r+5),Qm.bytes=9),t}function Xm(e,t){if(!FI.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");t||(t=0);var r=e.readUInt8(t);if(r<253)return Xm.bytes=1,r;if(r===253)return Xm.bytes=3,e.readUInt16LE(t+1);if(r===254)return Xm.bytes=5,e.readUInt32LE(t+1);Xm.bytes=9;var n=e.readUInt32LE(t+1),i=e.readUInt32LE(t+5),o=i*4294967296+n;return VI(o),o}function SU(e){return VI(e),e<253?1:e<=65535?3:e<=4294967295?5:9}EU.exports={encode:Qm,decode:Xm,encodingLength:SU}});var tg=L(wi=>{"use strict";p();y();Object.defineProperty(wi,"__esModule",{value:!0});wi.BufferReader=wi.BufferWriter=wi.cloneBuffer=wi.reverseBuffer=wi.writeUInt64LE=wi.readUInt64LE=wi.varuint=void 0;var Jl=Zn(),{typeforce:IU}=Jl,eg=qI();wi.varuint=eg;function kU(e,t){if(typeof e!="number")throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function TU(e,t){let r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return n*=4294967296,kU(n+r,9007199254740991),n+r}wi.readUInt64LE=TU;function PU(e,t,r){return kU(t,9007199254740991),e.writeInt32LE(t&-1,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}wi.writeUInt64LE=PU;function $ue(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e}wi.reverseBuffer=$ue;function Yue(e){let t=Buffer.allocUnsafe(e.length);return e.copy(t),t}wi.cloneBuffer=Yue;var HI=class e{static withCapacity(t){return new e(Buffer.alloc(t))}constructor(t,r=0){this.buffer=t,this.offset=r,IU(Jl.tuple(Jl.Buffer,Jl.UInt32),[t,r])}writeUInt8(t){this.offset=this.buffer.writeUInt8(t,this.offset)}writeInt32(t){this.offset=this.buffer.writeInt32LE(t,this.offset)}writeUInt32(t){this.offset=this.buffer.writeUInt32LE(t,this.offset)}writeUInt64(t){this.offset=PU(this.buffer,t,this.offset)}writeVarInt(t){eg.encode(t,this.buffer,this.offset),this.offset+=eg.encode.bytes}writeSlice(t){if(this.buffer.length<this.offset+t.length)throw new Error("Cannot write slice out of bounds");this.offset+=t.copy(this.buffer,this.offset)}writeVarSlice(t){this.writeVarInt(t.length),this.writeSlice(t)}writeVector(t){this.writeVarInt(t.length),t.forEach(r=>this.writeVarSlice(r))}end(){if(this.buffer.length===this.offset)return this.buffer;throw new Error(`buffer size ${this.buffer.length}, offset ${this.offset}`)}};wi.BufferWriter=HI;var WI=class{constructor(t,r=0){this.buffer=t,this.offset=r,IU(Jl.tuple(Jl.Buffer,Jl.UInt32),[t,r])}readUInt8(){let t=this.buffer.readUInt8(this.offset);return this.offset++,t}readInt32(){let t=this.buffer.readInt32LE(this.offset);return this.offset+=4,t}readUInt32(){let t=this.buffer.readUInt32LE(this.offset);return this.offset+=4,t}readUInt64(){let t=TU(this.buffer,this.offset);return this.offset+=8,t}readVarInt(){let t=eg.decode(this.buffer,this.offset);return this.offset+=eg.decode.bytes,t}readSlice(t){if(this.buffer.length<this.offset+t)throw new Error("Cannot read slice out of bounds");let r=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,r}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){let t=this.readVarInt(),r=[];for(let n=0;n<t;n++)r.push(this.readVarSlice());return r}};wi.BufferReader=WI});var _v=L(mn=>{"use strict";p();y();Object.defineProperty(mn,"__esModule",{value:!0});mn.tweakKey=mn.tapTweakHash=mn.tapleafHash=mn.findScriptPath=mn.toHashTree=mn.rootHashFromPath=mn.MAX_TAPTREE_DEPTH=mn.LEAF_VERSION_TAPSCRIPT=void 0;var Tf=Qr(),Jue=Pv(),$I=Ka(),_U=tg(),Zue=Zn();mn.LEAF_VERSION_TAPSCRIPT=192;mn.MAX_TAPTREE_DEPTH=128;var Que=e=>"left"in e&&"right"in e;function Xue(e,t){if(e.length<33)throw new TypeError(`The control-block length is too small. Got ${e.length}, expected min 33.`);let r=(e.length-33)/32,n=t;for(let i=0;i<r;i++){let o=e.slice(33+32*i,65+32*i);n.compare(o)<0?n=GI(n,o):n=GI(o,n)}return n}mn.rootHashFromPath=Xue;function zI(e){if((0,Zue.isTapleaf)(e))return{hash:BU(e)};let t=[zI(e[0]),zI(e[1])];t.sort((i,o)=>i.hash.compare(o.hash));let[r,n]=t;return{hash:GI(r.hash,n.hash),left:r,right:n}}mn.toHashTree=zI;function jI(e,t){if(Que(e)){let r=jI(e.left,t);if(r!==void 0)return[...r,e.right.hash];let n=jI(e.right,t);if(n!==void 0)return[...n,e.left.hash]}else if(e.hash.equals(t))return[]}mn.findScriptPath=jI;function BU(e){let t=e.version||mn.LEAF_VERSION_TAPSCRIPT;return $I.taggedHash("TapLeaf",Tf.Buffer.concat([Tf.Buffer.from([t]),tfe(e.output)]))}mn.tapleafHash=BU;function CU(e,t){return $I.taggedHash("TapTweak",Tf.Buffer.concat(t?[e,t]:[e]))}mn.tapTweakHash=CU;function efe(e,t){if(!Tf.Buffer.isBuffer(e)||e.length!==32||t&&t.length!==32)return null;let r=CU(e,t),n=(0,Jue.getEccLib)().xOnlyPointAddTweak(e,r);return!n||n.xOnlyPubkey===null?null:{parity:n.parity,x:Tf.Buffer.from(n.xOnlyPubkey)}}mn.tweakKey=efe;function GI(e,t){return $I.taggedHash("TapBranch",Tf.Buffer.concat([e,t]))}function tfe(e){let t=_U.varuint.encodingLength(e.length),r=Tf.Buffer.allocUnsafe(t);return _U.varuint.encode(e.length,r),Tf.Buffer.concat([r,e])}});var NU=L(Mv=>{"use strict";p();y();Object.defineProperty(Mv,"__esModule",{value:!0});Mv.p2tr=void 0;var Bv=Qr(),rfe=rs(),YI=Oi(),xt=Zn(),MU=Pv(),eo=_v(),is=zc(),Cv=Jm(),RU=YI.OPS,OU=1,nfe=80;function ife(e,t){if(!e.address&&!e.output&&!e.pubkey&&!e.internalPubkey&&!(e.witness&&e.witness.length>1))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,xt.typeforce)({address:xt.typeforce.maybe(xt.typeforce.String),input:xt.typeforce.maybe(xt.typeforce.BufferN(0)),network:xt.typeforce.maybe(xt.typeforce.Object),output:xt.typeforce.maybe(xt.typeforce.BufferN(34)),internalPubkey:xt.typeforce.maybe(xt.typeforce.BufferN(32)),hash:xt.typeforce.maybe(xt.typeforce.BufferN(32)),pubkey:xt.typeforce.maybe(xt.typeforce.BufferN(32)),signature:xt.typeforce.maybe(xt.typeforce.anyOf(xt.typeforce.BufferN(64),xt.typeforce.BufferN(65))),witness:xt.typeforce.maybe(xt.typeforce.arrayOf(xt.typeforce.Buffer)),scriptTree:xt.typeforce.maybe(xt.isTaptree),redeem:xt.typeforce.maybe({output:xt.typeforce.maybe(xt.typeforce.Buffer),redeemVersion:xt.typeforce.maybe(xt.typeforce.Number),witness:xt.typeforce.maybe(xt.typeforce.arrayOf(xt.typeforce.Buffer))}),redeemVersion:xt.typeforce.maybe(xt.typeforce.Number)},e);let r=is.value(()=>{let a=Cv.bech32m.decode(e.address),c=a.words.shift(),u=Cv.bech32m.fromWords(a.words);return{version:c,prefix:a.prefix,data:Bv.Buffer.from(u)}}),n=is.value(()=>{if(!(!e.witness||!e.witness.length))return e.witness.length>=2&&e.witness[e.witness.length-1][0]===nfe?e.witness.slice(0,-1):e.witness.slice()}),i=is.value(()=>{if(e.scriptTree)return(0,eo.toHashTree)(e.scriptTree);if(e.hash)return{hash:e.hash}}),o=e.network||rfe.bitcoin,s={name:"p2tr",network:o};if(is.prop(s,"address",()=>{if(!s.pubkey)return;let a=Cv.bech32m.toWords(s.pubkey);return a.unshift(OU),Cv.bech32m.encode(o.bech32,a)}),is.prop(s,"hash",()=>{let a=i();if(a)return a.hash;let c=n();if(c&&c.length>1){let u=c[c.length-1],h=u[0]&xt.TAPLEAF_VERSION_MASK,l=c[c.length-2],g=(0,eo.tapleafHash)({output:l,version:h});return(0,eo.rootHashFromPath)(u,g)}return null}),is.prop(s,"output",()=>{if(s.pubkey)return YI.compile([RU.OP_1,s.pubkey])}),is.prop(s,"redeemVersion",()=>e.redeemVersion?e.redeemVersion:e.redeem&&e.redeem.redeemVersion!==void 0&&e.redeem.redeemVersion!==null?e.redeem.redeemVersion:eo.LEAF_VERSION_TAPSCRIPT),is.prop(s,"redeem",()=>{let a=n();if(!(!a||a.length<2))return{output:a[a.length-2],witness:a.slice(0,-2),redeemVersion:a[a.length-1][0]&xt.TAPLEAF_VERSION_MASK}}),is.prop(s,"pubkey",()=>{if(e.pubkey)return e.pubkey;if(e.output)return e.output.slice(2);if(e.address)return r().data;if(s.internalPubkey){let a=(0,eo.tweakKey)(s.internalPubkey,s.hash);if(a)return a.x}}),is.prop(s,"internalPubkey",()=>{if(e.internalPubkey)return e.internalPubkey;let a=n();if(a&&a.length>1)return a[a.length-1].slice(1,33)}),is.prop(s,"signature",()=>{if(e.signature)return e.signature;let a=n();if(!(!a||a.length!==1))return a[0]}),is.prop(s,"witness",()=>{if(e.witness)return e.witness;let a=i();if(a&&e.redeem&&e.redeem.output&&e.internalPubkey){let c=(0,eo.tapleafHash)({output:e.redeem.output,version:s.redeemVersion}),u=(0,eo.findScriptPath)(a,c);if(!u)return;let h=(0,eo.tweakKey)(e.internalPubkey,a.hash);if(!h)return;let l=Bv.Buffer.concat([Bv.Buffer.from([s.redeemVersion|h.parity]),e.internalPubkey].concat(u));return[e.redeem.output,l]}if(e.signature)return[e.signature]}),t.validate){let a=Bv.Buffer.from([]);if(e.address){if(o&&o.bech32!==r().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(r().version!==OU)throw new TypeError("Invalid address version");if(r().data.length!==32)throw new TypeError("Invalid address data");a=r().data}if(e.pubkey){if(a.length>0&&!a.equals(e.pubkey))throw new TypeError("Pubkey mismatch");a=e.pubkey}if(e.output){if(e.output.length!==34||e.output[0]!==RU.OP_1||e.output[1]!==32)throw new TypeError("Output is invalid");if(a.length>0&&!a.equals(e.output.slice(2)))throw new TypeError("Pubkey mismatch");a=e.output.slice(2)}if(e.internalPubkey){let h=(0,eo.tweakKey)(e.internalPubkey,s.hash);if(a.length>0&&!a.equals(h.x))throw new TypeError("Pubkey mismatch");a=h.x}if(a&&a.length&&!(0,MU.getEccLib)().isXOnlyPoint(a))throw new TypeError("Invalid pubkey for p2tr");let c=i();if(e.hash&&c&&!e.hash.equals(c.hash))throw new TypeError("Hash mismatch");if(e.redeem&&e.redeem.output&&c){let h=(0,eo.tapleafHash)({output:e.redeem.output,version:s.redeemVersion});if(!(0,eo.findScriptPath)(c,h))throw new TypeError("Redeem script not in tree")}let u=n();if(e.redeem&&s.redeem){if(e.redeem.redeemVersion&&e.redeem.redeemVersion!==s.redeem.redeemVersion)throw new TypeError("Redeem.redeemVersion and witness mismatch");if(e.redeem.output){if(YI.decompile(e.redeem.output).length===0)throw new TypeError("Redeem.output is invalid");if(s.redeem.output&&!e.redeem.output.equals(s.redeem.output))throw new TypeError("Redeem.output and witness mismatch")}if(e.redeem.witness&&s.redeem.witness&&!ofe(e.redeem.witness,s.redeem.witness))throw new TypeError("Redeem.witness and witness mismatch")}if(u&&u.length)if(u.length===1){if(e.signature&&!e.signature.equals(u[0]))throw new TypeError("Signature mismatch")}else{let h=u[u.length-1];if(h.length<33)throw new TypeError(`The control-block length is too small. Got ${h.length}, expected min 33.`);if((h.length-33)%32!==0)throw new TypeError(`The control-block length of ${h.length} is incorrect!`);let l=(h.length-33)/32;if(l>128)throw new TypeError(`The script path is too long. Got ${l}, expected max 128.`);let g=h.slice(1,33);if(e.internalPubkey&&!e.internalPubkey.equals(g))throw new TypeError("Internal pubkey mismatch");if(!(0,MU.getEccLib)().isXOnlyPoint(g))throw new TypeError("Invalid internalPubkey for p2tr witness");let x=h[0]&xt.TAPLEAF_VERSION_MASK,A=u[u.length-2],E=(0,eo.tapleafHash)({output:A,version:x}),B=(0,eo.rootHashFromPath)(h,E),M=(0,eo.tweakKey)(g,B);if(!M)throw new TypeError("Invalid outputKey for p2tr witness");if(a.length&&!a.equals(M.x))throw new TypeError("Pubkey mismatch for p2tr witness");if(M.parity!==(h[0]&1))throw new Error("Incorrect parity")}}return Object.assign(s,e)}Mv.p2tr=ife;function ofe(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}});var T0=L(On=>{"use strict";p();y();Object.defineProperty(On,"__esModule",{value:!0});On.p2tr=On.p2wsh=On.p2wpkh=On.p2sh=On.p2pkh=On.p2pk=On.p2ms=On.embed=void 0;var sfe=QN();Object.defineProperty(On,"embed",{enumerable:!0,get:function(){return sfe.p2data}});var afe=eU();Object.defineProperty(On,"p2ms",{enumerable:!0,get:function(){return afe.p2ms}});var cfe=rU();Object.defineProperty(On,"p2pk",{enumerable:!0,get:function(){return cfe.p2pk}});var ufe=lU();Object.defineProperty(On,"p2pkh",{enumerable:!0,get:function(){return ufe.p2pkh}});var ffe=pU();Object.defineProperty(On,"p2sh",{enumerable:!0,get:function(){return ffe.p2sh}});var lfe=xU();Object.defineProperty(On,"p2wpkh",{enumerable:!0,get:function(){return lfe.p2wpkh}});var dfe=AU();Object.defineProperty(On,"p2wsh",{enumerable:!0,get:function(){return dfe.p2wsh}});var hfe=NU();Object.defineProperty(On,"p2tr",{enumerable:!0,get:function(){return hfe.p2tr}})});var JI=L(to=>{"use strict";p();y();Object.defineProperty(to,"__esModule",{value:!0});to.toOutputScript=to.fromOutputScript=to.toBech32=to.toBase58Check=to.fromBech32=to.fromBase58Check=void 0;var UU=rs(),qa=T0(),DU=Oi(),Rv=Zn(),P0=Jm(),LU=f0(),KU=40,FU=2,VU=16,qU=2,HU=80,WU="WARNING: Sending to a future segwit version address can lead to loss of funds. End users MUST be warned carefully in the GUI and asked if they wish to proceed with caution. Wallets should verify the segwit version from the output of fromBech32, then decide when it is safe to use which version of segwit.";function pfe(e,t){let r=e.slice(2);if(r.length<FU||r.length>KU)throw new TypeError("Invalid program length for segwit address");let n=e[0]-HU;if(n<qU||n>VU)throw new TypeError("Invalid version for segwit address");if(e[1]!==r.length)throw new TypeError("Invalid script for segwit address");return console.warn(WU),GU(r,n,t.bech32)}function zU(e){let t=Buffer.from(LU.decode(e));if(t.length<21)throw new TypeError(e+" is too short");if(t.length>21)throw new TypeError(e+" is too long");let r=t.readUInt8(0),n=t.slice(1);return{version:r,hash:n}}to.fromBase58Check=zU;function jU(e){let t,r;try{t=P0.bech32.decode(e)}catch{}if(t){if(r=t.words[0],r!==0)throw new TypeError(e+" uses wrong encoding")}else if(t=P0.bech32m.decode(e),r=t.words[0],r===0)throw new TypeError(e+" uses wrong encoding");let n=P0.bech32.fromWords(t.words.slice(1));return{version:r,prefix:t.prefix,data:Buffer.from(n)}}to.fromBech32=jU;function yfe(e,t){(0,Rv.typeforce)((0,Rv.tuple)(Rv.Hash160bit,Rv.UInt8),arguments);let r=Buffer.allocUnsafe(21);return r.writeUInt8(t,0),e.copy(r,1),LU.encode(r)}to.toBase58Check=yfe;function GU(e,t,r){let n=P0.bech32.toWords(e);return n.unshift(t),t===0?P0.bech32.encode(r,n):P0.bech32m.encode(r,n)}to.toBech32=GU;function mfe(e,t){t=t||UU.bitcoin;try{return qa.p2pkh({output:e,network:t}).address}catch{}try{return qa.p2sh({output:e,network:t}).address}catch{}try{return qa.p2wpkh({output:e,network:t}).address}catch{}try{return qa.p2wsh({output:e,network:t}).address}catch{}try{return qa.p2tr({output:e,network:t}).address}catch{}try{return pfe(e,t)}catch{}throw new Error(DU.toASM(e)+" has no matching Address")}to.fromOutputScript=mfe;function gfe(e,t){t=t||UU.bitcoin;let r,n;try{r=zU(e)}catch{}if(r){if(r.version===t.pubKeyHash)return qa.p2pkh({hash:r.hash}).output;if(r.version===t.scriptHash)return qa.p2sh({hash:r.hash}).output}else{try{n=jU(e)}catch{}if(n){if(n.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(n.version===0){if(n.data.length===20)return qa.p2wpkh({hash:n.data}).output;if(n.data.length===32)return qa.p2wsh({hash:n.data}).output}else if(n.version===1){if(n.data.length===32)return qa.p2tr({pubkey:n.data}).output}else if(n.version>=qU&&n.version<=VU&&n.data.length>=FU&&n.data.length<=KU)return console.warn(WU),DU.compile([n.version+HU,n.data])}}throw new Error(e+" has no matching Script")}to.toOutputScript=gfe});var $U=L(Ov=>{"use strict";p();y();Object.defineProperty(Ov,"__esModule",{value:!0});Ov.fastMerkleRoot=void 0;function bfe(e,t){if(!Array.isArray(e))throw TypeError("Expected values Array");if(typeof t!="function")throw TypeError("Expected digest Function");let r=e.length,n=e.concat();for(;r>1;){let i=0;for(let o=0;o<r;o+=2,++i){let s=n[o],a=o+1===r?s:n[o+1],c=Buffer.concat([s,a]);n[i]=t(c)}r=i}return n[0]}Ov.fastMerkleRoot=bfe});var _0=L(Nv=>{"use strict";p();y();Object.defineProperty(Nv,"__esModule",{value:!0});Nv.Transaction=void 0;var{Buffer:vi}=Qr(),on=tg(),Di=Ka(),YU=Oi(),xfe=Oi(),Nt=Zn(),{typeforce:Ha}=Nt;function Wa(e){let t=e.length;return on.varuint.encodingLength(t)+t}function wfe(e){let t=e.length;return on.varuint.encodingLength(t)+e.reduce((r,n)=>r+Wa(n),0)}var Pf=vi.allocUnsafe(0),JU=[],ZI=vi.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),ZU=vi.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),vfe=vi.from("ffffffffffffffff","hex"),Afe={script:Pf,valueBuffer:vfe};function Sfe(e){return e.value!==void 0}var Ao=class e{constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}static fromBuffer(t,r){let n=new on.BufferReader(t),i=new e;i.version=n.readInt32();let o=n.readUInt8(),s=n.readUInt8(),a=!1;o===e.ADVANCED_TRANSACTION_MARKER&&s===e.ADVANCED_TRANSACTION_FLAG?a=!0:n.offset-=2;let c=n.readVarInt();for(let h=0;h<c;++h)i.ins.push({hash:n.readSlice(32),index:n.readUInt32(),script:n.readVarSlice(),sequence:n.readUInt32(),witness:JU});let u=n.readVarInt();for(let h=0;h<u;++h)i.outs.push({value:n.readUInt64(),script:n.readVarSlice()});if(a){for(let h=0;h<c;++h)i.ins[h].witness=n.readVector();if(!i.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(i.locktime=n.readUInt32(),r)return i;if(n.offset!==t.length)throw new Error("Transaction has unexpected data");return i}static fromHex(t){return e.fromBuffer(vi.from(t,"hex"),!1)}static isCoinbaseHash(t){Ha(Nt.Hash256bit,t);for(let r=0;r<32;++r)if(t[r]!==0)return!1;return!0}isCoinbase(){return this.ins.length===1&&e.isCoinbaseHash(this.ins[0].hash)}addInput(t,r,n,i){return Ha(Nt.tuple(Nt.Hash256bit,Nt.UInt32,Nt.maybe(Nt.UInt32),Nt.maybe(Nt.Buffer)),arguments),Nt.Null(n)&&(n=e.DEFAULT_SEQUENCE),this.ins.push({hash:t,index:r,script:i||Pf,sequence:n,witness:JU})-1}addOutput(t,r){return Ha(Nt.tuple(Nt.Buffer,Nt.Satoshi),arguments),this.outs.push({script:t,value:r})-1}hasWitnesses(){return this.ins.some(t=>t.witness.length!==0)}weight(){let t=this.byteLength(!1),r=this.byteLength(!0);return t*3+r}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(t=!0){let r=t&&this.hasWitnesses();return(r?10:8)+on.varuint.encodingLength(this.ins.length)+on.varuint.encodingLength(this.outs.length)+this.ins.reduce((n,i)=>n+40+Wa(i.script),0)+this.outs.reduce((n,i)=>n+8+Wa(i.script),0)+(r?this.ins.reduce((n,i)=>n+wfe(i.witness),0):0)}clone(){let t=new e;return t.version=this.version,t.locktime=this.locktime,t.ins=this.ins.map(r=>({hash:r.hash,index:r.index,script:r.script,sequence:r.sequence,witness:r.witness})),t.outs=this.outs.map(r=>({script:r.script,value:r.value})),t}hashForSignature(t,r,n){if(Ha(Nt.tuple(Nt.UInt32,Nt.Buffer,Nt.Number),arguments),t>=this.ins.length)return ZU;let i=YU.compile(YU.decompile(r).filter(a=>a!==xfe.OPS.OP_CODESEPARATOR)),o=this.clone();if((n&31)===e.SIGHASH_NONE)o.outs=[],o.ins.forEach((a,c)=>{c!==t&&(a.sequence=0)});else if((n&31)===e.SIGHASH_SINGLE){if(t>=this.outs.length)return ZU;o.outs.length=t+1;for(let a=0;a<t;a++)o.outs[a]=Afe;o.ins.forEach((a,c)=>{c!==t&&(a.sequence=0)})}n&e.SIGHASH_ANYONECANPAY?(o.ins=[o.ins[t]],o.ins[0].script=i):(o.ins.forEach(a=>{a.script=Pf}),o.ins[t].script=i);let s=vi.allocUnsafe(o.byteLength(!1)+4);return s.writeInt32LE(n,s.length-4),o.__toBuffer(s,0,!1),Di.hash256(s)}hashForWitnessV1(t,r,n,i,o,s){if(Ha(Nt.tuple(Nt.UInt32,Ha.arrayOf(Nt.Buffer),Ha.arrayOf(Nt.Satoshi),Nt.UInt32),arguments),n.length!==this.ins.length||r.length!==this.ins.length)throw new Error("Must supply prevout script and value for all inputs");let a=i===e.SIGHASH_DEFAULT?e.SIGHASH_ALL:i&e.SIGHASH_OUTPUT_MASK,u=(i&e.SIGHASH_INPUT_MASK)===e.SIGHASH_ANYONECANPAY,h=a===e.SIGHASH_NONE,l=a===e.SIGHASH_SINGLE,g=Pf,x=Pf,A=Pf,E=Pf,B=Pf;if(!u){let V=on.BufferWriter.withCapacity(36*this.ins.length);this.ins.forEach(q=>{V.writeSlice(q.hash),V.writeUInt32(q.index)}),g=Di.sha256(V.end()),V=on.BufferWriter.withCapacity(8*this.ins.length),n.forEach(q=>V.writeUInt64(q)),x=Di.sha256(V.end()),V=on.BufferWriter.withCapacity(r.map(Wa).reduce((q,W)=>q+W)),r.forEach(q=>V.writeVarSlice(q)),A=Di.sha256(V.end()),V=on.BufferWriter.withCapacity(4*this.ins.length),this.ins.forEach(q=>V.writeUInt32(q.sequence)),E=Di.sha256(V.end())}if(h||l){if(l&&t<this.outs.length){let V=this.outs[t],q=on.BufferWriter.withCapacity(8+Wa(V.script));q.writeUInt64(V.value),q.writeVarSlice(V.script),B=Di.sha256(q.end())}}else{let V=this.outs.map(W=>8+Wa(W.script)).reduce((W,G)=>W+G),q=on.BufferWriter.withCapacity(V);this.outs.forEach(W=>{q.writeUInt64(W.value),q.writeVarSlice(W.script)}),B=Di.sha256(q.end())}let M=(o?2:0)+(s?1:0),N=174-(u?49:0)-(h?32:0)+(s?32:0)+(o?37:0),R=on.BufferWriter.withCapacity(N);if(R.writeUInt8(i),R.writeInt32(this.version),R.writeUInt32(this.locktime),R.writeSlice(g),R.writeSlice(x),R.writeSlice(A),R.writeSlice(E),h||l||R.writeSlice(B),R.writeUInt8(M),u){let V=this.ins[t];R.writeSlice(V.hash),R.writeUInt32(V.index),R.writeUInt64(n[t]),R.writeVarSlice(r[t]),R.writeUInt32(V.sequence)}else R.writeUInt32(t);if(s){let V=on.BufferWriter.withCapacity(Wa(s));V.writeVarSlice(s),R.writeSlice(Di.sha256(V.end()))}return l&&R.writeSlice(B),o&&(R.writeSlice(o),R.writeUInt8(0),R.writeUInt32(4294967295)),Di.taggedHash("TapSighash",vi.concat([vi.from([0]),R.end()]))}hashForWitnessV0(t,r,n,i){Ha(Nt.tuple(Nt.UInt32,Nt.Buffer,Nt.Satoshi,Nt.UInt32),arguments);let o=vi.from([]),s,a=ZI,c=ZI,u=ZI;if(i&e.SIGHASH_ANYONECANPAY||(o=vi.allocUnsafe(36*this.ins.length),s=new on.BufferWriter(o,0),this.ins.forEach(l=>{s.writeSlice(l.hash),s.writeUInt32(l.index)}),c=Di.hash256(o)),!(i&e.SIGHASH_ANYONECANPAY)&&(i&31)!==e.SIGHASH_SINGLE&&(i&31)!==e.SIGHASH_NONE&&(o=vi.allocUnsafe(4*this.ins.length),s=new on.BufferWriter(o,0),this.ins.forEach(l=>{s.writeUInt32(l.sequence)}),u=Di.hash256(o)),(i&31)!==e.SIGHASH_SINGLE&&(i&31)!==e.SIGHASH_NONE){let l=this.outs.reduce((g,x)=>g+8+Wa(x.script),0);o=vi.allocUnsafe(l),s=new on.BufferWriter(o,0),this.outs.forEach(g=>{s.writeUInt64(g.value),s.writeVarSlice(g.script)}),a=Di.hash256(o)}else if((i&31)===e.SIGHASH_SINGLE&&t<this.outs.length){let l=this.outs[t];o=vi.allocUnsafe(8+Wa(l.script)),s=new on.BufferWriter(o,0),s.writeUInt64(l.value),s.writeVarSlice(l.script),a=Di.hash256(o)}o=vi.allocUnsafe(156+Wa(r)),s=new on.BufferWriter(o,0);let h=this.ins[t];return s.writeInt32(this.version),s.writeSlice(c),s.writeSlice(u),s.writeSlice(h.hash),s.writeUInt32(h.index),s.writeVarSlice(r),s.writeUInt64(n),s.writeUInt32(h.sequence),s.writeSlice(a),s.writeUInt32(this.locktime),s.writeUInt32(i),Di.hash256(o)}getHash(t){return t&&this.isCoinbase()?vi.alloc(32,0):Di.hash256(this.__toBuffer(void 0,void 0,t))}getId(){return(0,on.reverseBuffer)(this.getHash(!1)).toString("hex")}toBuffer(t,r){return this.__toBuffer(t,r,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(t,r){Ha(Nt.tuple(Nt.Number,Nt.Buffer),arguments),this.ins[t].script=r}setWitness(t,r){Ha(Nt.tuple(Nt.Number,[Nt.Buffer]),arguments),this.ins[t].witness=r}__toBuffer(t,r,n=!1){t||(t=vi.allocUnsafe(this.byteLength(n)));let i=new on.BufferWriter(t,r||0);i.writeInt32(this.version);let o=n&&this.hasWitnesses();return o&&(i.writeUInt8(e.ADVANCED_TRANSACTION_MARKER),i.writeUInt8(e.ADVANCED_TRANSACTION_FLAG)),i.writeVarInt(this.ins.length),this.ins.forEach(s=>{i.writeSlice(s.hash),i.writeUInt32(s.index),i.writeVarSlice(s.script),i.writeUInt32(s.sequence)}),i.writeVarInt(this.outs.length),this.outs.forEach(s=>{Sfe(s)?i.writeUInt64(s.value):i.writeSlice(s.valueBuffer),i.writeVarSlice(s.script)}),o&&this.ins.forEach(s=>{i.writeVector(s.witness)}),i.writeUInt32(this.locktime),r!==void 0?t.slice(r,i.offset):t}};Nv.Transaction=Ao;Ao.DEFAULT_SEQUENCE=4294967295;Ao.SIGHASH_DEFAULT=0;Ao.SIGHASH_ALL=1;Ao.SIGHASH_NONE=2;Ao.SIGHASH_SINGLE=3;Ao.SIGHASH_ANYONECANPAY=128;Ao.SIGHASH_OUTPUT_MASK=3;Ao.SIGHASH_INPUT_MASK=128;Ao.ADVANCED_TRANSACTION_MARKER=0;Ao.ADVANCED_TRANSACTION_FLAG=1});var tD=L(Uv=>{"use strict";p();y();Object.defineProperty(Uv,"__esModule",{value:!0});Uv.Block=void 0;var Zl=tg(),QI=Ka(),Efe=$U(),Ife=_0(),eD=Zn(),{typeforce:kfe}=eD,XI=new TypeError("Cannot compute merkle root for zero transactions"),QU=new TypeError("Cannot compute witness commit for non-segwit block"),e4=class e{constructor(){this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}static fromBuffer(t){if(t.length<80)throw new Error("Buffer too small (< 80 bytes)");let r=new Zl.BufferReader(t),n=new e;if(n.version=r.readInt32(),n.prevHash=r.readSlice(32),n.merkleRoot=r.readSlice(32),n.timestamp=r.readUInt32(),n.bits=r.readUInt32(),n.nonce=r.readUInt32(),t.length===80)return n;let i=()=>{let a=Ife.Transaction.fromBuffer(r.buffer.slice(r.offset),!0);return r.offset+=a.byteLength(),a},o=r.readVarInt();n.transactions=[];for(let a=0;a<o;++a){let c=i();n.transactions.push(c)}let s=n.getWitnessCommit();return s&&(n.witnessCommit=s),n}static fromHex(t){return e.fromBuffer(Buffer.from(t,"hex"))}static calculateTarget(t){let r=((t&4278190080)>>24)-3,n=t&8388607,i=Buffer.alloc(32,0);return i.writeUIntBE(n,29-r,3),i}static calculateMerkleRoot(t,r){if(kfe([{getHash:eD.Function}],t),t.length===0)throw XI;if(r&&!XU(t))throw QU;let n=t.map(o=>o.getHash(r)),i=(0,Efe.fastMerkleRoot)(n,QI.hash256);return r?QI.hash256(Buffer.concat([i,t[0].ins[0].witness[0]])):i}getWitnessCommit(){if(!XU(this.transactions))return null;let t=this.transactions[0].outs.filter(n=>n.script.slice(0,6).equals(Buffer.from("6a24aa21a9ed","hex"))).map(n=>n.script.slice(6,38));if(t.length===0)return null;let r=t[t.length-1];return r instanceof Buffer&&r.length===32?r:null}hasWitnessCommit(){return this.witnessCommit instanceof Buffer&&this.witnessCommit.length===32||this.getWitnessCommit()!==null}hasWitness(){return Tfe(this.transactions)}weight(){let t=this.byteLength(!1,!1),r=this.byteLength(!1,!0);return t*3+r}byteLength(t,r=!0){return t||!this.transactions?80:80+Zl.varuint.encodingLength(this.transactions.length)+this.transactions.reduce((n,i)=>n+i.byteLength(r),0)}getHash(){return QI.hash256(this.toBuffer(!0))}getId(){return(0,Zl.reverseBuffer)(this.getHash()).toString("hex")}getUTCDate(){let t=new Date(0);return t.setUTCSeconds(this.timestamp),t}toBuffer(t){let r=Buffer.allocUnsafe(this.byteLength(t)),n=new Zl.BufferWriter(r);return n.writeInt32(this.version),n.writeSlice(this.prevHash),n.writeSlice(this.merkleRoot),n.writeUInt32(this.timestamp),n.writeUInt32(this.bits),n.writeUInt32(this.nonce),t||!this.transactions||(Zl.varuint.encode(this.transactions.length,r,n.offset),n.offset+=Zl.varuint.encode.bytes,this.transactions.forEach(i=>{let o=i.byteLength();i.toBuffer(r,n.offset),n.offset+=o})),r}toHex(t){return this.toBuffer(t).toString("hex")}checkTxRoots(){let t=this.hasWitnessCommit();return!t&&this.hasWitness()?!1:this.__checkMerkleRoot()&&(t?this.__checkWitnessCommit():!0)}checkProofOfWork(){let t=(0,Zl.reverseBuffer)(this.getHash()),r=e.calculateTarget(this.bits);return t.compare(r)<=0}__checkMerkleRoot(){if(!this.transactions)throw XI;let t=e.calculateMerkleRoot(this.transactions);return this.merkleRoot.compare(t)===0}__checkWitnessCommit(){if(!this.transactions)throw XI;if(!this.hasWitnessCommit())throw QU;let t=e.calculateMerkleRoot(this.transactions,!0);return this.witnessCommit.compare(t)===0}};Uv.Block=e4;function XU(e){return e instanceof Array&&e[0]&&e[0].ins&&e[0].ins instanceof Array&&e[0].ins[0]&&e[0].ins[0].witness&&e[0].ins[0].witness instanceof Array&&e[0].ins[0].witness.length>0}function Tfe(e){return e instanceof Array&&e.some(t=>typeof t=="object"&&t.ins instanceof Array&&t.ins.some(r=>typeof r=="object"&&r.witness instanceof Array&&r.witness.length>0))}});var Nn=L($s=>{"use strict";p();y();Object.defineProperty($s,"__esModule",{value:!0});var Pfe;(function(e){e[e.UNSIGNED_TX=0]="UNSIGNED_TX",e[e.GLOBAL_XPUB=1]="GLOBAL_XPUB"})(Pfe=$s.GlobalTypes||($s.GlobalTypes={}));$s.GLOBAL_TYPE_NAMES=["unsignedTx","globalXpub"];var _fe;(function(e){e[e.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",e[e.WITNESS_UTXO=1]="WITNESS_UTXO",e[e.PARTIAL_SIG=2]="PARTIAL_SIG",e[e.SIGHASH_TYPE=3]="SIGHASH_TYPE",e[e.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",e[e.BIP32_DERIVATION=6]="BIP32_DERIVATION",e[e.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",e[e.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",e[e.POR_COMMITMENT=9]="POR_COMMITMENT",e[e.TAP_KEY_SIG=19]="TAP_KEY_SIG",e[e.TAP_SCRIPT_SIG=20]="TAP_SCRIPT_SIG",e[e.TAP_LEAF_SCRIPT=21]="TAP_LEAF_SCRIPT",e[e.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION",e[e.TAP_INTERNAL_KEY=23]="TAP_INTERNAL_KEY",e[e.TAP_MERKLE_ROOT=24]="TAP_MERKLE_ROOT"})(_fe=$s.InputTypes||($s.InputTypes={}));$s.INPUT_TYPE_NAMES=["nonWitnessUtxo","witnessUtxo","partialSig","sighashType","redeemScript","witnessScript","bip32Derivation","finalScriptSig","finalScriptWitness","porCommitment","tapKeySig","tapScriptSig","tapLeafScript","tapBip32Derivation","tapInternalKey","tapMerkleRoot"];var Bfe;(function(e){e[e.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",e[e.BIP32_DERIVATION=2]="BIP32_DERIVATION",e[e.TAP_INTERNAL_KEY=5]="TAP_INTERNAL_KEY",e[e.TAP_TREE=6]="TAP_TREE",e[e.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION"})(Bfe=$s.OutputTypes||($s.OutputTypes={}));$s.OUTPUT_TYPE_NAMES=["redeemScript","witnessScript","bip32Derivation","tapInternalKey","tapTree","tapBip32Derivation"]});var nD=L(Ql=>{"use strict";p();y();Object.defineProperty(Ql,"__esModule",{value:!0});var rD=Nn(),Cfe=e=>[...Array(e).keys()];function Mfe(e){if(e.key[0]!==rD.GlobalTypes.GLOBAL_XPUB)throw new Error("Decode Error: could not decode globalXpub with key 0x"+e.key.toString("hex"));if(e.key.length!==79||![2,3].includes(e.key[46]))throw new Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+e.key.toString("hex"));if(e.value.length/4%1!==0)throw new Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");let t=e.key.slice(1),r={masterFingerprint:e.value.slice(0,4),extendedPubkey:t,path:"m"};for(let n of Cfe(e.value.length/4-1)){let i=e.value.readUInt32LE(n*4+4),o=!!(i&2147483648),s=i&2147483647;r.path+="/"+s.toString(10)+(o?"'":"")}return r}Ql.decode=Mfe;function Rfe(e){let t=Buffer.from([rD.GlobalTypes.GLOBAL_XPUB]),r=Buffer.concat([t,e.extendedPubkey]),n=e.path.split("/"),i=Buffer.allocUnsafe(n.length*4);e.masterFingerprint.copy(i,0);let o=4;return n.slice(1).forEach(s=>{let a=s.slice(-1)==="'",c=2147483647&parseInt(a?s.slice(0,-1):s,10);a&&(c+=2147483648),i.writeUInt32LE(c,o),o+=4}),{key:r,value:i}}Ql.encode=Rfe;Ql.expected="{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }";function Ofe(e){let t=e.extendedPubkey,r=e.masterFingerprint,n=e.path;return Buffer.isBuffer(t)&&t.length===78&&[2,3].indexOf(t[45])>-1&&Buffer.isBuffer(r)&&r.length===4&&typeof n=="string"&&!!n.match(/^m(\/\d+'?)*$/)}Ql.check=Ofe;function Nfe(e,t,r){let n=t.extendedPubkey.toString("hex");return r.has(n)?!1:(r.add(n),e.filter(i=>i.extendedPubkey.equals(t.extendedPubkey)).length===0)}Ql.canAddToArray=Nfe});var iD=L(t4=>{"use strict";p();y();Object.defineProperty(t4,"__esModule",{value:!0});var Ufe=Nn();function Dfe(e){return{key:Buffer.from([Ufe.GlobalTypes.UNSIGNED_TX]),value:e.toBuffer()}}t4.encode=Dfe});var sD=L(Xl=>{"use strict";p();y();Object.defineProperty(Xl,"__esModule",{value:!0});var oD=Nn();function Lfe(e){if(e.key[0]!==oD.InputTypes.FINAL_SCRIPTSIG)throw new Error("Decode Error: could not decode finalScriptSig with key 0x"+e.key.toString("hex"));return e.value}Xl.decode=Lfe;function Kfe(e){return{key:Buffer.from([oD.InputTypes.FINAL_SCRIPTSIG]),value:e}}Xl.encode=Kfe;Xl.expected="Buffer";function Ffe(e){return Buffer.isBuffer(e)}Xl.check=Ffe;function Vfe(e,t){return!!e&&!!t&&e.finalScriptSig===void 0}Xl.canAdd=Vfe});var cD=L(ed=>{"use strict";p();y();Object.defineProperty(ed,"__esModule",{value:!0});var aD=Nn();function qfe(e){if(e.key[0]!==aD.InputTypes.FINAL_SCRIPTWITNESS)throw new Error("Decode Error: could not decode finalScriptWitness with key 0x"+e.key.toString("hex"));return e.value}ed.decode=qfe;function Hfe(e){return{key:Buffer.from([aD.InputTypes.FINAL_SCRIPTWITNESS]),value:e}}ed.encode=Hfe;ed.expected="Buffer";function Wfe(e){return Buffer.isBuffer(e)}ed.check=Wfe;function zfe(e,t){return!!e&&!!t&&e.finalScriptWitness===void 0}ed.canAdd=zfe});var fD=L(td=>{"use strict";p();y();Object.defineProperty(td,"__esModule",{value:!0});var uD=Nn();function jfe(e){if(e.key[0]!==uD.InputTypes.NON_WITNESS_UTXO)throw new Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+e.key.toString("hex"));return e.value}td.decode=jfe;function Gfe(e){return{key:Buffer.from([uD.InputTypes.NON_WITNESS_UTXO]),value:e}}td.encode=Gfe;td.expected="Buffer";function $fe(e){return Buffer.isBuffer(e)}td.check=$fe;function Yfe(e,t){return!!e&&!!t&&e.nonWitnessUtxo===void 0}td.canAdd=Yfe});var dD=L(rd=>{"use strict";p();y();Object.defineProperty(rd,"__esModule",{value:!0});var lD=Nn();function Jfe(e){if(e.key[0]!==lD.InputTypes.PARTIAL_SIG)throw new Error("Decode Error: could not decode partialSig with key 0x"+e.key.toString("hex"));if(!(e.key.length===34||e.key.length===66)||![2,3,4].includes(e.key[1]))throw new Error("Decode Error: partialSig has invalid pubkey in key 0x"+e.key.toString("hex"));return{pubkey:e.key.slice(1),signature:e.value}}rd.decode=Jfe;function Zfe(e){let t=Buffer.from([lD.InputTypes.PARTIAL_SIG]);return{key:Buffer.concat([t,e.pubkey]),value:e.signature}}rd.encode=Zfe;rd.expected="{ pubkey: Buffer; signature: Buffer; }";function Qfe(e){return Buffer.isBuffer(e.pubkey)&&Buffer.isBuffer(e.signature)&&[33,65].includes(e.pubkey.length)&&[2,3,4].includes(e.pubkey[0])&&Xfe(e.signature)}rd.check=Qfe;function Xfe(e){if(!Buffer.isBuffer(e)||e.length<9||e[0]!==48||e.length!==e[1]+3||e[2]!==2)return!1;let t=e[3];if(t>33||t<1||e[3+t+1]!==2)return!1;let r=e[3+t+2];return!(r>33||r<1||e.length!==3+t+2+r+2)}function ele(e,t,r){let n=t.pubkey.toString("hex");return r.has(n)?!1:(r.add(n),e.filter(i=>i.pubkey.equals(t.pubkey)).length===0)}rd.canAddToArray=ele});var pD=L(nd=>{"use strict";p();y();Object.defineProperty(nd,"__esModule",{value:!0});var hD=Nn();function tle(e){if(e.key[0]!==hD.InputTypes.POR_COMMITMENT)throw new Error("Decode Error: could not decode porCommitment with key 0x"+e.key.toString("hex"));return e.value.toString("utf8")}nd.decode=tle;function rle(e){return{key:Buffer.from([hD.InputTypes.POR_COMMITMENT]),value:Buffer.from(e,"utf8")}}nd.encode=rle;nd.expected="string";function nle(e){return typeof e=="string"}nd.check=nle;function ile(e,t){return!!e&&!!t&&e.porCommitment===void 0}nd.canAdd=ile});var mD=L(id=>{"use strict";p();y();Object.defineProperty(id,"__esModule",{value:!0});var yD=Nn();function ole(e){if(e.key[0]!==yD.InputTypes.SIGHASH_TYPE)throw new Error("Decode Error: could not decode sighashType with key 0x"+e.key.toString("hex"));return e.value.readUInt32LE(0)}id.decode=ole;function sle(e){let t=Buffer.from([yD.InputTypes.SIGHASH_TYPE]),r=Buffer.allocUnsafe(4);return r.writeUInt32LE(e,0),{key:t,value:r}}id.encode=sle;id.expected="number";function ale(e){return typeof e=="number"}id.check=ale;function cle(e,t){return!!e&&!!t&&e.sighashType===void 0}id.canAdd=cle});var xD=L(od=>{"use strict";p();y();Object.defineProperty(od,"__esModule",{value:!0});var gD=Nn();function ule(e){if(e.key[0]!==gD.InputTypes.TAP_KEY_SIG||e.key.length!==1)throw new Error("Decode Error: could not decode tapKeySig with key 0x"+e.key.toString("hex"));if(!bD(e.value))throw new Error("Decode Error: tapKeySig not a valid 64-65-byte BIP340 signature");return e.value}od.decode=ule;function fle(e){return{key:Buffer.from([gD.InputTypes.TAP_KEY_SIG]),value:e}}od.encode=fle;od.expected="Buffer";function bD(e){return Buffer.isBuffer(e)&&(e.length===64||e.length===65)}od.check=bD;function lle(e,t){return!!e&&!!t&&e.tapKeySig===void 0}od.canAdd=lle});var vD=L(sd=>{"use strict";p();y();Object.defineProperty(sd,"__esModule",{value:!0});var wD=Nn();function dle(e){if(e.key[0]!==wD.InputTypes.TAP_LEAF_SCRIPT)throw new Error("Decode Error: could not decode tapLeafScript with key 0x"+e.key.toString("hex"));if((e.key.length-2)%32!==0)throw new Error("Decode Error: tapLeafScript has invalid control block in key 0x"+e.key.toString("hex"));let t=e.value[e.value.length-1];if((e.key[1]&254)!==t)throw new Error("Decode Error: tapLeafScript bad leaf version in key 0x"+e.key.toString("hex"));let r=e.value.slice(0,-1);return{controlBlock:e.key.slice(1),script:r,leafVersion:t}}sd.decode=dle;function hle(e){let t=Buffer.from([wD.InputTypes.TAP_LEAF_SCRIPT]),r=Buffer.from([e.leafVersion]);return{key:Buffer.concat([t,e.controlBlock]),value:Buffer.concat([e.script,r])}}sd.encode=hle;sd.expected="{ controlBlock: Buffer; leafVersion: number, script: Buffer; }";function ple(e){return Buffer.isBuffer(e.controlBlock)&&(e.controlBlock.length-1)%32===0&&(e.controlBlock[0]&254)===e.leafVersion&&Buffer.isBuffer(e.script)}sd.check=ple;function yle(e,t,r){let n=t.controlBlock.toString("hex");return r.has(n)?!1:(r.add(n),e.filter(i=>i.controlBlock.equals(t.controlBlock)).length===0)}sd.canAddToArray=yle});var ED=L(ad=>{"use strict";p();y();Object.defineProperty(ad,"__esModule",{value:!0});var AD=Nn();function mle(e){if(e.key[0]!==AD.InputTypes.TAP_MERKLE_ROOT||e.key.length!==1)throw new Error("Decode Error: could not decode tapMerkleRoot with key 0x"+e.key.toString("hex"));if(!SD(e.value))throw new Error("Decode Error: tapMerkleRoot not a 32-byte hash");return e.value}ad.decode=mle;function gle(e){return{key:Buffer.from([AD.InputTypes.TAP_MERKLE_ROOT]),value:e}}ad.encode=gle;ad.expected="Buffer";function SD(e){return Buffer.isBuffer(e)&&e.length===32}ad.check=SD;function ble(e,t){return!!e&&!!t&&e.tapMerkleRoot===void 0}ad.canAdd=ble});var kD=L(cd=>{"use strict";p();y();Object.defineProperty(cd,"__esModule",{value:!0});var ID=Nn();function xle(e){if(e.key[0]!==ID.InputTypes.TAP_SCRIPT_SIG)throw new Error("Decode Error: could not decode tapScriptSig with key 0x"+e.key.toString("hex"));if(e.key.length!==65)throw new Error("Decode Error: tapScriptSig has invalid key 0x"+e.key.toString("hex"));if(e.value.length!==64&&e.value.length!==65)throw new Error("Decode Error: tapScriptSig has invalid signature in key 0x"+e.key.toString("hex"));let t=e.key.slice(1,33),r=e.key.slice(33);return{pubkey:t,leafHash:r,signature:e.value}}cd.decode=xle;function wle(e){let t=Buffer.from([ID.InputTypes.TAP_SCRIPT_SIG]);return{key:Buffer.concat([t,e.pubkey,e.leafHash]),value:e.signature}}cd.encode=wle;cd.expected="{ pubkey: Buffer; leafHash: Buffer; signature: Buffer; }";function vle(e){return Buffer.isBuffer(e.pubkey)&&Buffer.isBuffer(e.leafHash)&&Buffer.isBuffer(e.signature)&&e.pubkey.length===32&&e.leafHash.length===32&&(e.signature.length===64||e.signature.length===65)}cd.check=vle;function Ale(e,t,r){let n=t.pubkey.toString("hex")+t.leafHash.toString("hex");return r.has(n)?!1:(r.add(n),e.filter(i=>i.pubkey.equals(t.pubkey)&&i.leafHash.equals(t.leafHash)).length===0)}cd.canAddToArray=Ale});var _f=L(ig=>{"use strict";p();y();Object.defineProperty(ig,"__esModule",{value:!0});var Sle=9007199254740991;function r4(e){if(e<0||e>Sle||e%1!==0)throw new RangeError("value out of range")}function rg(e,t,r){if(r4(e),t||(t=Buffer.allocUnsafe(TD(e))),!Buffer.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");return r||(r=0),e<253?(t.writeUInt8(e,r),Object.assign(rg,{bytes:1})):e<=65535?(t.writeUInt8(253,r),t.writeUInt16LE(e,r+1),Object.assign(rg,{bytes:3})):e<=4294967295?(t.writeUInt8(254,r),t.writeUInt32LE(e,r+1),Object.assign(rg,{bytes:5})):(t.writeUInt8(255,r),t.writeUInt32LE(e>>>0,r+1),t.writeUInt32LE(e/4294967296|0,r+5),Object.assign(rg,{bytes:9})),t}ig.encode=rg;function ng(e,t){if(!Buffer.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");t||(t=0);let r=e.readUInt8(t);if(r<253)return Object.assign(ng,{bytes:1}),r;if(r===253)return Object.assign(ng,{bytes:3}),e.readUInt16LE(t+1);if(r===254)return Object.assign(ng,{bytes:5}),e.readUInt32LE(t+1);{Object.assign(ng,{bytes:9});let n=e.readUInt32LE(t+1),o=e.readUInt32LE(t+5)*4294967296+n;return r4(o),o}}ig.decode=ng;function TD(e){return r4(e),e<253?1:e<=65535?3:e<=4294967295?5:9}ig.encodingLength=TD});var Lv=L(Bf=>{"use strict";p();y();Object.defineProperty(Bf,"__esModule",{value:!0});var Dv=_f();Bf.range=e=>[...Array(e).keys()];function Ele(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e}Bf.reverseBuffer=Ele;function Ile(e){let t=e.map(PD);return t.push(Buffer.from([0])),Buffer.concat(t)}Bf.keyValsToBuffer=Ile;function PD(e){let t=e.key.length,r=e.value.length,n=Dv.encodingLength(t),i=Dv.encodingLength(r),o=Buffer.allocUnsafe(n+t+i+r);return Dv.encode(t,o,0),e.key.copy(o,n),Dv.encode(r,o,n+t),e.value.copy(o,n+t+i),o}Bf.keyValToBuffer=PD;function _D(e,t){if(typeof e!="number")throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function kle(e,t){let r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return n*=4294967296,_D(n+r,9007199254740991),n+r}Bf.readUInt64LE=kle;function Tle(e,t,r){return _D(t,9007199254740991),e.writeInt32LE(t&-1,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}Bf.writeUInt64LE=Tle});var MD=L(ud=>{"use strict";p();y();Object.defineProperty(ud,"__esModule",{value:!0});var BD=Nn(),CD=Lv(),Kv=_f();function Ple(e){if(e.key[0]!==BD.InputTypes.WITNESS_UTXO)throw new Error("Decode Error: could not decode witnessUtxo with key 0x"+e.key.toString("hex"));let t=CD.readUInt64LE(e.value,0),r=8,n=Kv.decode(e.value,r);r+=Kv.encodingLength(n);let i=e.value.slice(r);if(i.length!==n)throw new Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:i,value:t}}ud.decode=Ple;function _le(e){let{script:t,value:r}=e,n=Kv.encodingLength(t.length),i=Buffer.allocUnsafe(8+n+t.length);return CD.writeUInt64LE(i,r,0),Kv.encode(t.length,i,8),t.copy(i,8+n),{key:Buffer.from([BD.InputTypes.WITNESS_UTXO]),value:i}}ud.encode=_le;ud.expected="{ script: Buffer; value: number; }";function Ble(e){return Buffer.isBuffer(e.script)&&typeof e.value=="number"}ud.check=Ble;function Cle(e,t){return!!e&&!!t&&e.witnessUtxo===void 0}ud.canAdd=Cle});var OD=L(fd=>{"use strict";p();y();Object.defineProperty(fd,"__esModule",{value:!0});var RD=Nn(),n4=_f();function Mle(e){if(e.key[0]!==RD.OutputTypes.TAP_TREE||e.key.length!==1)throw new Error("Decode Error: could not decode tapTree with key 0x"+e.key.toString("hex"));let t=0,r=[];for(;t<e.value.length;){let n=e.value[t++],i=e.value[t++],o=n4.decode(e.value,t);t+=n4.encodingLength(o),r.push({depth:n,leafVersion:i,script:e.value.slice(t,t+o)}),t+=o}return{leaves:r}}fd.decode=Mle;function Rle(e){let t=Buffer.from([RD.OutputTypes.TAP_TREE]),r=[].concat(...e.leaves.map(n=>[Buffer.of(n.depth,n.leafVersion),n4.encode(n.script.length),n.script]));return{key:t,value:Buffer.concat(r)}}fd.encode=Rle;fd.expected="{ leaves: [{ depth: number; leafVersion: number, script: Buffer; }] }";function Ole(e){return Array.isArray(e.leaves)&&e.leaves.every(t=>t.depth>=0&&t.depth<=128&&(t.leafVersion&254)===t.leafVersion&&Buffer.isBuffer(t.script))}fd.check=Ole;function Nle(e,t){return!!e&&!!t&&e.tapTree===void 0}fd.canAdd=Nle});var o4=L(i4=>{"use strict";p();y();Object.defineProperty(i4,"__esModule",{value:!0});var Ule=e=>[...Array(e).keys()],Dle=e=>e.length===33&&[2,3].includes(e[0])||e.length===65&&e[0]===4;function Lle(e,t=Dle){function r(a){if(a.key[0]!==e)throw new Error("Decode Error: could not decode bip32Derivation with key 0x"+a.key.toString("hex"));let c=a.key.slice(1);if(!t(c))throw new Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+a.key.toString("hex"));if(a.value.length/4%1!==0)throw new Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");let u={masterFingerprint:a.value.slice(0,4),pubkey:c,path:"m"};for(let h of Ule(a.value.length/4-1)){let l=a.value.readUInt32LE(h*4+4),g=!!(l&2147483648),x=l&2147483647;u.path+="/"+x.toString(10)+(g?"'":"")}return u}function n(a){let c=Buffer.from([e]),u=Buffer.concat([c,a.pubkey]),h=a.path.split("/"),l=Buffer.allocUnsafe(h.length*4);a.masterFingerprint.copy(l,0);let g=4;return h.slice(1).forEach(x=>{let A=x.slice(-1)==="'",E=2147483647&parseInt(A?x.slice(0,-1):x,10);A&&(E+=2147483648),l.writeUInt32LE(E,g),g+=4}),{key:u,value:l}}let i="{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }";function o(a){return Buffer.isBuffer(a.pubkey)&&Buffer.isBuffer(a.masterFingerprint)&&typeof a.path=="string"&&t(a.pubkey)&&a.masterFingerprint.length===4}function s(a,c,u){let h=c.pubkey.toString("hex");return u.has(h)?!1:(u.add(h),a.filter(l=>l.pubkey.equals(c.pubkey)).length===0)}return{decode:r,encode:n,check:o,expected:i,canAddToArray:s}}i4.makeConverter=Lle});var ND=L(s4=>{"use strict";p();y();Object.defineProperty(s4,"__esModule",{value:!0});function Kle(e){return t;function t(r){let n;if(e.includes(r.key[0])&&(n=r.key.slice(1),!(n.length===33||n.length===65)||![2,3,4].includes(n[0])))throw new Error("Format Error: invalid pubkey in key 0x"+r.key.toString("hex"));return n}}s4.makeChecker=Kle});var UD=L(a4=>{"use strict";p();y();Object.defineProperty(a4,"__esModule",{value:!0});function Fle(e){function t(s){if(s.key[0]!==e)throw new Error("Decode Error: could not decode redeemScript with key 0x"+s.key.toString("hex"));return s.value}function r(s){return{key:Buffer.from([e]),value:s}}let n="Buffer";function i(s){return Buffer.isBuffer(s)}function o(s,a){return!!s&&!!a&&s.redeemScript===void 0}return{decode:t,encode:r,check:i,expected:n,canAdd:o}}a4.makeConverter=Fle});var DD=L(c4=>{"use strict";p();y();Object.defineProperty(c4,"__esModule",{value:!0});var Fv=_f(),Vle=o4(),qle=e=>e.length===32;function Hle(e){let t=Vle.makeConverter(e,qle);function r(s){let a=Fv.decode(s.value),c=Fv.encodingLength(a),u=t.decode({key:s.key,value:s.value.slice(c+a*32)}),h=new Array(a);for(let l=0,g=c;l<a;l++,g+=32)h[l]=s.value.slice(g,g+32);return Object.assign({},u,{leafHashes:h})}function n(s){let a=t.encode(s),c=Fv.encodingLength(s.leafHashes.length),u=Buffer.allocUnsafe(c);Fv.encode(s.leafHashes.length,u);let h=Buffer.concat([u,...s.leafHashes,a.value]);return Object.assign({},a,{value:h})}let i="{ masterFingerprint: Buffer; pubkey: Buffer; path: string; leafHashes: Buffer[]; }";function o(s){return Array.isArray(s.leafHashes)&&s.leafHashes.every(a=>Buffer.isBuffer(a)&&a.length===32)&&t.check(s)}return{decode:r,encode:n,check:o,expected:i,canAddToArray:t.canAddToArray}}c4.makeConverter=Hle});var LD=L(u4=>{"use strict";p();y();Object.defineProperty(u4,"__esModule",{value:!0});function Wle(e){function t(s){if(s.key[0]!==e||s.key.length!==1)throw new Error("Decode Error: could not decode tapInternalKey with key 0x"+s.key.toString("hex"));if(s.value.length!==32)throw new Error("Decode Error: tapInternalKey not a 32-byte x-only pubkey");return s.value}function r(s){return{key:Buffer.from([e]),value:s}}let n="Buffer";function i(s){return Buffer.isBuffer(s)&&s.length===32}function o(s,a){return!!s&&!!a&&s.tapInternalKey===void 0}return{decode:t,encode:r,check:i,expected:n,canAdd:o}}u4.makeConverter=Wle});var KD=L(f4=>{"use strict";p();y();Object.defineProperty(f4,"__esModule",{value:!0});function zle(e){function t(s){if(s.key[0]!==e)throw new Error("Decode Error: could not decode witnessScript with key 0x"+s.key.toString("hex"));return s.value}function r(s){return{key:Buffer.from([e]),value:s}}let n="Buffer";function i(s){return Buffer.isBuffer(s)}function o(s,a){return!!s&&!!a&&s.witnessScript===void 0}return{decode:t,encode:r,check:i,expected:n,canAdd:o}}f4.makeConverter=zle});var Vv=L(og=>{"use strict";p();y();Object.defineProperty(og,"__esModule",{value:!0});var So=Nn(),jle=nD(),Gle=iD(),$le=sD(),Yle=cD(),Jle=fD(),Zle=dD(),Qle=pD(),Xle=mD(),ede=xD(),tde=vD(),rde=ED(),nde=kD(),ide=MD(),ode=OD(),FD=o4(),l4=ND(),VD=UD(),qD=DD(),HD=LD(),WD=KD(),sde={unsignedTx:Gle,globalXpub:jle,checkPubkey:l4.makeChecker([])};og.globals=sde;var ade={nonWitnessUtxo:Jle,partialSig:Zle,sighashType:Xle,finalScriptSig:$le,finalScriptWitness:Yle,porCommitment:Qle,witnessUtxo:ide,bip32Derivation:FD.makeConverter(So.InputTypes.BIP32_DERIVATION),redeemScript:VD.makeConverter(So.InputTypes.REDEEM_SCRIPT),witnessScript:WD.makeConverter(So.InputTypes.WITNESS_SCRIPT),checkPubkey:l4.makeChecker([So.InputTypes.PARTIAL_SIG,So.InputTypes.BIP32_DERIVATION]),tapKeySig:ede,tapScriptSig:nde,tapLeafScript:tde,tapBip32Derivation:qD.makeConverter(So.InputTypes.TAP_BIP32_DERIVATION),tapInternalKey:HD.makeConverter(So.InputTypes.TAP_INTERNAL_KEY),tapMerkleRoot:rde};og.inputs=ade;var cde={bip32Derivation:FD.makeConverter(So.OutputTypes.BIP32_DERIVATION),redeemScript:VD.makeConverter(So.OutputTypes.REDEEM_SCRIPT),witnessScript:WD.makeConverter(So.OutputTypes.WITNESS_SCRIPT),checkPubkey:l4.makeChecker([So.OutputTypes.BIP32_DERIVATION]),tapBip32Derivation:qD.makeConverter(So.OutputTypes.TAP_BIP32_DERIVATION),tapTree:ode,tapInternalKey:HD.makeConverter(So.OutputTypes.TAP_INTERNAL_KEY)};og.outputs=cde});var GD=L(sg=>{"use strict";p();y();Object.defineProperty(sg,"__esModule",{value:!0});var hr=Vv(),qv=Lv(),zD=_f(),ft=Nn();function ude(e,t){let r=0;function n(){let B=zD.decode(e,r);r+=zD.encodingLength(B);let M=e.slice(r,r+B);return r+=B,M}function i(){let B=e.readUInt32BE(r);return r+=4,B}function o(){let B=e.readUInt8(r);return r+=1,B}function s(){let B=n(),M=n();return{key:B,value:M}}function a(){if(r>=e.length)throw new Error("Format Error: Unexpected End of PSBT");let B=e.readUInt8(r)===0;return B&&r++,B}if(i()!==1886610036)throw new Error("Format Error: Invalid Magic Number");if(o()!==255)throw new Error("Format Error: Magic Number must be followed by 0xff separator");let c=[],u={};for(;!a();){let B=s(),M=B.key.toString("hex");if(u[M])throw new Error("Format Error: Keys must be unique for global keymap: key "+M);u[M]=1,c.push(B)}let h=c.filter(B=>B.key[0]===ft.GlobalTypes.UNSIGNED_TX);if(h.length!==1)throw new Error("Format Error: Only one UNSIGNED_TX allowed");let l=t(h[0].value),{inputCount:g,outputCount:x}=l.getInputOutputCounts(),A=[],E=[];for(let B of qv.range(g)){let M={},N=[];for(;!a();){let R=s(),V=R.key.toString("hex");if(M[V])throw new Error("Format Error: Keys must be unique for each input: input index "+B+" key "+V);M[V]=1,N.push(R)}A.push(N)}for(let B of qv.range(x)){let M={},N=[];for(;!a();){let R=s(),V=R.key.toString("hex");if(M[V])throw new Error("Format Error: Keys must be unique for each output: output index "+B+" key "+V);M[V]=1,N.push(R)}E.push(N)}return jD(l,{globalMapKeyVals:c,inputKeyVals:A,outputKeyVals:E})}sg.psbtFromBuffer=ude;function Qn(e,t,r){if(!t.equals(Buffer.from([r])))throw new Error(`Format Error: Invalid ${e} key: ${t.toString("hex")}`)}sg.checkKeyBuffer=Qn;function jD(e,{globalMapKeyVals:t,inputKeyVals:r,outputKeyVals:n}){let i={unsignedTx:e},o=0;for(let h of t)switch(h.key[0]){case ft.GlobalTypes.UNSIGNED_TX:if(Qn("global",h.key,ft.GlobalTypes.UNSIGNED_TX),o>0)throw new Error("Format Error: GlobalMap has multiple UNSIGNED_TX");o++;break;case ft.GlobalTypes.GLOBAL_XPUB:i.globalXpub===void 0&&(i.globalXpub=[]),i.globalXpub.push(hr.globals.globalXpub.decode(h));break;default:i.unknownKeyVals||(i.unknownKeyVals=[]),i.unknownKeyVals.push(h)}let s=r.length,a=n.length,c=[],u=[];for(let h of qv.range(s)){let l={};for(let g of r[h])switch(hr.inputs.checkPubkey(g),g.key[0]){case ft.InputTypes.NON_WITNESS_UTXO:if(Qn("input",g.key,ft.InputTypes.NON_WITNESS_UTXO),l.nonWitnessUtxo!==void 0)throw new Error("Format Error: Input has multiple NON_WITNESS_UTXO");l.nonWitnessUtxo=hr.inputs.nonWitnessUtxo.decode(g);break;case ft.InputTypes.WITNESS_UTXO:if(Qn("input",g.key,ft.InputTypes.WITNESS_UTXO),l.witnessUtxo!==void 0)throw new Error("Format Error: Input has multiple WITNESS_UTXO");l.witnessUtxo=hr.inputs.witnessUtxo.decode(g);break;case ft.InputTypes.PARTIAL_SIG:l.partialSig===void 0&&(l.partialSig=[]),l.partialSig.push(hr.inputs.partialSig.decode(g));break;case ft.InputTypes.SIGHASH_TYPE:if(Qn("input",g.key,ft.InputTypes.SIGHASH_TYPE),l.sighashType!==void 0)throw new Error("Format Error: Input has multiple SIGHASH_TYPE");l.sighashType=hr.inputs.sighashType.decode(g);break;case ft.InputTypes.REDEEM_SCRIPT:if(Qn("input",g.key,ft.InputTypes.REDEEM_SCRIPT),l.redeemScript!==void 0)throw new Error("Format Error: Input has multiple REDEEM_SCRIPT");l.redeemScript=hr.inputs.redeemScript.decode(g);break;case ft.InputTypes.WITNESS_SCRIPT:if(Qn("input",g.key,ft.InputTypes.WITNESS_SCRIPT),l.witnessScript!==void 0)throw new Error("Format Error: Input has multiple WITNESS_SCRIPT");l.witnessScript=hr.inputs.witnessScript.decode(g);break;case ft.InputTypes.BIP32_DERIVATION:l.bip32Derivation===void 0&&(l.bip32Derivation=[]),l.bip32Derivation.push(hr.inputs.bip32Derivation.decode(g));break;case ft.InputTypes.FINAL_SCRIPTSIG:Qn("input",g.key,ft.InputTypes.FINAL_SCRIPTSIG),l.finalScriptSig=hr.inputs.finalScriptSig.decode(g);break;case ft.InputTypes.FINAL_SCRIPTWITNESS:Qn("input",g.key,ft.InputTypes.FINAL_SCRIPTWITNESS),l.finalScriptWitness=hr.inputs.finalScriptWitness.decode(g);break;case ft.InputTypes.POR_COMMITMENT:Qn("input",g.key,ft.InputTypes.POR_COMMITMENT),l.porCommitment=hr.inputs.porCommitment.decode(g);break;case ft.InputTypes.TAP_KEY_SIG:Qn("input",g.key,ft.InputTypes.TAP_KEY_SIG),l.tapKeySig=hr.inputs.tapKeySig.decode(g);break;case ft.InputTypes.TAP_SCRIPT_SIG:l.tapScriptSig===void 0&&(l.tapScriptSig=[]),l.tapScriptSig.push(hr.inputs.tapScriptSig.decode(g));break;case ft.InputTypes.TAP_LEAF_SCRIPT:l.tapLeafScript===void 0&&(l.tapLeafScript=[]),l.tapLeafScript.push(hr.inputs.tapLeafScript.decode(g));break;case ft.InputTypes.TAP_BIP32_DERIVATION:l.tapBip32Derivation===void 0&&(l.tapBip32Derivation=[]),l.tapBip32Derivation.push(hr.inputs.tapBip32Derivation.decode(g));break;case ft.InputTypes.TAP_INTERNAL_KEY:Qn("input",g.key,ft.InputTypes.TAP_INTERNAL_KEY),l.tapInternalKey=hr.inputs.tapInternalKey.decode(g);break;case ft.InputTypes.TAP_MERKLE_ROOT:Qn("input",g.key,ft.InputTypes.TAP_MERKLE_ROOT),l.tapMerkleRoot=hr.inputs.tapMerkleRoot.decode(g);break;default:l.unknownKeyVals||(l.unknownKeyVals=[]),l.unknownKeyVals.push(g)}c.push(l)}for(let h of qv.range(a)){let l={};for(let g of n[h])switch(hr.outputs.checkPubkey(g),g.key[0]){case ft.OutputTypes.REDEEM_SCRIPT:if(Qn("output",g.key,ft.OutputTypes.REDEEM_SCRIPT),l.redeemScript!==void 0)throw new Error("Format Error: Output has multiple REDEEM_SCRIPT");l.redeemScript=hr.outputs.redeemScript.decode(g);break;case ft.OutputTypes.WITNESS_SCRIPT:if(Qn("output",g.key,ft.OutputTypes.WITNESS_SCRIPT),l.witnessScript!==void 0)throw new Error("Format Error: Output has multiple WITNESS_SCRIPT");l.witnessScript=hr.outputs.witnessScript.decode(g);break;case ft.OutputTypes.BIP32_DERIVATION:l.bip32Derivation===void 0&&(l.bip32Derivation=[]),l.bip32Derivation.push(hr.outputs.bip32Derivation.decode(g));break;case ft.OutputTypes.TAP_INTERNAL_KEY:Qn("output",g.key,ft.OutputTypes.TAP_INTERNAL_KEY),l.tapInternalKey=hr.outputs.tapInternalKey.decode(g);break;case ft.OutputTypes.TAP_TREE:Qn("output",g.key,ft.OutputTypes.TAP_TREE),l.tapTree=hr.outputs.tapTree.decode(g);break;case ft.OutputTypes.TAP_BIP32_DERIVATION:l.tapBip32Derivation===void 0&&(l.tapBip32Derivation=[]),l.tapBip32Derivation.push(hr.outputs.tapBip32Derivation.decode(g));break;default:l.unknownKeyVals||(l.unknownKeyVals=[]),l.unknownKeyVals.push(g)}u.push(l)}return{globalMap:i,inputs:c,outputs:u}}sg.psbtFromKeyVals=jD});var JD=L(Hv=>{"use strict";p();y();Object.defineProperty(Hv,"__esModule",{value:!0});var d4=Vv(),$D=Lv();function fde({globalMap:e,inputs:t,outputs:r}){let{globalKeyVals:n,inputKeyVals:i,outputKeyVals:o}=YD({globalMap:e,inputs:t,outputs:r}),s=$D.keyValsToBuffer(n),a=l=>l.length===0?[Buffer.from([0])]:l.map($D.keyValsToBuffer),c=a(i),u=a(o),h=Buffer.allocUnsafe(5);return h.writeUIntBE(482972169471,0,5),Buffer.concat([h,s].concat(c,u))}Hv.psbtToBuffer=fde;var lde=(e,t)=>e.key.compare(t.key);function h4(e,t){let r=new Set,n=Object.entries(e).reduce((o,[s,a])=>{if(s==="unknownKeyVals")return o;let c=t[s];if(c===void 0)return o;let u=(Array.isArray(a)?a:[a]).map(c.encode);return u.map(l=>l.key.toString("hex")).forEach(l=>{if(r.has(l))throw new Error("Serialize Error: Duplicate key: "+l);r.add(l)}),o.concat(u)},[]),i=e.unknownKeyVals?e.unknownKeyVals.filter(o=>!r.has(o.key.toString("hex"))):[];return n.concat(i).sort(lde)}function YD({globalMap:e,inputs:t,outputs:r}){return{globalKeyVals:h4(e,d4.globals),inputKeyVals:t.map(n=>h4(n,d4.inputs)),outputKeyVals:r.map(n=>h4(n,d4.outputs))}}Hv.psbtToKeyVals=YD});var p4=L(Wv=>{"use strict";p();y();function ZD(e){for(var t in e)Wv.hasOwnProperty(t)||(Wv[t]=e[t])}Object.defineProperty(Wv,"__esModule",{value:!0});ZD(GD());ZD(JD())});var XD=L(g4=>{"use strict";p();y();Object.defineProperty(g4,"__esModule",{value:!0});var y4=p4();function dde(e){let t=e[0],r=y4.psbtToKeyVals(t),n=e.slice(1);if(n.length===0)throw new Error("Combine: Nothing to combine");let i=QD(t);if(i===void 0)throw new Error("Combine: Self missing transaction");let o=B0(r.globalKeyVals),s=r.inputKeyVals.map(B0),a=r.outputKeyVals.map(B0);for(let c of n){let u=QD(c);if(u===void 0||!u.toBuffer().equals(i.toBuffer()))throw new Error("Combine: One of the Psbts does not have the same transaction.");let h=y4.psbtToKeyVals(c);B0(h.globalKeyVals).forEach(m4(o,r.globalKeyVals,h.globalKeyVals)),h.inputKeyVals.map(B0).forEach((A,E)=>A.forEach(m4(s[E],r.inputKeyVals[E],h.inputKeyVals[E]))),h.outputKeyVals.map(B0).forEach((A,E)=>A.forEach(m4(a[E],r.outputKeyVals[E],h.outputKeyVals[E])))}return y4.psbtFromKeyVals(i,{globalMapKeyVals:r.globalKeyVals,inputKeyVals:r.inputKeyVals,outputKeyVals:r.outputKeyVals})}g4.combine=dde;function m4(e,t,r){return n=>{if(e.has(n))return;let i=r.filter(o=>o.key.toString("hex")===n)[0];t.push(i),e.add(n)}}function QD(e){return e.globalMap.unsignedTx}function B0(e){let t=new Set;return e.forEach(r=>{let n=r.key.toString("hex");if(t.has(n))throw new Error("Combine: KeyValue Map keys should be unique");t.add(n)}),t}});var x4=L(Ai=>{"use strict";p();y();Object.defineProperty(Ai,"__esModule",{value:!0});var hde=Vv();function tL(e,t){let r=e[t];if(r===void 0)throw new Error(`No input #${t}`);return r}Ai.checkForInput=tL;function rL(e,t){let r=e[t];if(r===void 0)throw new Error(`No output #${t}`);return r}Ai.checkForOutput=rL;function pde(e,t,r){if(e.key[0]<r)throw new Error("Use the method for your specific key instead of addUnknownKeyVal*");if(t&&t.filter(n=>n.key.equals(e.key)).length!==0)throw new Error(`Duplicate Key: ${e.key.toString("hex")}`)}Ai.checkHasKey=pde;function yde(e){let t=0;return Object.keys(e).forEach(r=>{Number(isNaN(Number(r)))&&t++}),t}Ai.getEnumLength=yde;function mde(e,t){let r=!1;if(t.nonWitnessUtxo||t.witnessUtxo){let n=!!t.redeemScript,i=!!t.witnessScript,o=!n||!!t.finalScriptSig,s=!i||!!t.finalScriptWitness,a=!!t.finalScriptSig||!!t.finalScriptWitness;r=o&&s&&a}if(r===!1)throw new Error(`Input #${e} has too much or too little data to clean`)}Ai.inputCheckUncleanFinalized=mde;function eL(e,t,r,n){throw new Error(`Data for ${e} key ${t} is incorrect: Expected ${r} and got ${JSON.stringify(n)}`)}function b4(e){return(t,r)=>{for(let n of Object.keys(t)){let i=t[n],{canAdd:o,canAddToArray:s,check:a,expected:c}=hde[e+"s"][n]||{},u=!!s;if(a)if(u){if(!Array.isArray(i)||r[n]&&!Array.isArray(r[n]))throw new Error(`Key type ${n} must be an array`);i.every(a)||eL(e,n,c,i);let h=r[n]||[],l=new Set;if(!i.every(g=>s(h,g,l)))throw new Error("Can not add duplicate data to array");r[n]=h.concat(i)}else{if(a(i)||eL(e,n,c,i),!o(r,i))throw new Error(`Can not add duplicate data to ${e}`);r[n]=i}}}}Ai.updateGlobal=b4("global");Ai.updateInput=b4("input");Ai.updateOutput=b4("output");function gde(e,t){let r=e.length-1,n=tL(e,r);Ai.updateInput(t,n)}Ai.addInputAttributes=gde;function bde(e,t){let r=e.length-1,n=rL(e,r);Ai.updateOutput(t,n)}Ai.addOutputAttributes=bde;function xde(e,t){if(!Buffer.isBuffer(t)||t.length<4)throw new Error("Set Version: Invalid Transaction");return t.writeUInt32LE(e,0),t}Ai.defaultVersionSetter=xde;function wde(e,t){if(!Buffer.isBuffer(t)||t.length<4)throw new Error("Set Locktime: Invalid Transaction");return t.writeUInt32LE(e,t.length-4),t}Ai.defaultLocktimeSetter=wde});var iL=L(A4=>{"use strict";p();y();Object.defineProperty(A4,"__esModule",{value:!0});var vde=XD(),nL=p4(),w4=Nn(),Xn=x4(),v4=class{constructor(t){this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:t}}static fromBase64(t,r){let n=Buffer.from(t,"base64");return this.fromBuffer(n,r)}static fromHex(t,r){let n=Buffer.from(t,"hex");return this.fromBuffer(n,r)}static fromBuffer(t,r){let n=nL.psbtFromBuffer(t,r),i=new this(n.globalMap.unsignedTx);return Object.assign(i,n),i}toBase64(){return this.toBuffer().toString("base64")}toHex(){return this.toBuffer().toString("hex")}toBuffer(){return nL.psbtToBuffer(this)}updateGlobal(t){return Xn.updateGlobal(t,this.globalMap),this}updateInput(t,r){let n=Xn.checkForInput(this.inputs,t);return Xn.updateInput(r,n),this}updateOutput(t,r){let n=Xn.checkForOutput(this.outputs,t);return Xn.updateOutput(r,n),this}addUnknownKeyValToGlobal(t){return Xn.checkHasKey(t,this.globalMap.unknownKeyVals,Xn.getEnumLength(w4.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(t),this}addUnknownKeyValToInput(t,r){let n=Xn.checkForInput(this.inputs,t);return Xn.checkHasKey(r,n.unknownKeyVals,Xn.getEnumLength(w4.InputTypes)),n.unknownKeyVals||(n.unknownKeyVals=[]),n.unknownKeyVals.push(r),this}addUnknownKeyValToOutput(t,r){let n=Xn.checkForOutput(this.outputs,t);return Xn.checkHasKey(r,n.unknownKeyVals,Xn.getEnumLength(w4.OutputTypes)),n.unknownKeyVals||(n.unknownKeyVals=[]),n.unknownKeyVals.push(r),this}addInput(t){this.globalMap.unsignedTx.addInput(t),this.inputs.push({unknownKeyVals:[]});let r=t.unknownKeyVals||[],n=this.inputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach(i=>this.addUnknownKeyValToInput(n,i)),Xn.addInputAttributes(this.inputs,t),this}addOutput(t){this.globalMap.unsignedTx.addOutput(t),this.outputs.push({unknownKeyVals:[]});let r=t.unknownKeyVals||[],n=this.outputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach(i=>this.addUnknownKeyValToOutput(n,i)),Xn.addOutputAttributes(this.outputs,t),this}clearFinalizedInput(t){let r=Xn.checkForInput(this.inputs,t);Xn.inputCheckUncleanFinalized(t,r);for(let n of Object.keys(r))["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(n)||delete r[n];return this}combine(...t){let r=vde.combine([this].concat(t));return Object.assign(this,r),this}getTransaction(){return this.globalMap.unsignedTx.toBuffer()}};A4.Psbt=v4});var jv=L(ar=>{"use strict";p();y();Object.defineProperty(ar,"__esModule",{value:!0});ar.signatureBlocksAction=ar.checkInputForSig=ar.pubkeyInScript=ar.pubkeyPositionInScript=ar.witnessStackToScriptWitness=ar.isP2TR=ar.isP2SHScript=ar.isP2WSHScript=ar.isP2WPKH=ar.isP2PKH=ar.isP2PK=ar.isP2MS=void 0;var oL=_f(),ag=Oi(),zv=_0(),Ade=Ka(),ld=T0();function dd(e){return t=>{try{return e({output:t}),!0}catch{return!1}}}ar.isP2MS=dd(ld.p2ms);ar.isP2PK=dd(ld.p2pk);ar.isP2PKH=dd(ld.p2pkh);ar.isP2WPKH=dd(ld.p2wpkh);ar.isP2WSHScript=dd(ld.p2wsh);ar.isP2SHScript=dd(ld.p2sh);ar.isP2TR=dd(ld.p2tr);function Sde(e){let t=Buffer.allocUnsafe(0);function r(s){t=Buffer.concat([t,Buffer.from(s)])}function n(s){let a=t.length,c=oL.encodingLength(s);t=Buffer.concat([t,Buffer.allocUnsafe(c)]),oL.encode(s,t,a)}function i(s){n(s.length),r(s)}function o(s){n(s.length),s.forEach(i)}return o(e),t}ar.witnessStackToScriptWitness=Sde;function sL(e,t){let r=(0,Ade.hash160)(e),n=e.slice(1,33),i=ag.decompile(t);if(i===null)throw new Error("Unknown script error");return i.findIndex(o=>typeof o=="number"?!1:o.equals(e)||o.equals(r)||o.equals(n))}ar.pubkeyPositionInScript=sL;function Ede(e,t){return sL(e,t)!==-1}ar.pubkeyInScript=Ede;function Ide(e,t){return kde(e).some(n=>aL(n,ag.signature.decode,t))}ar.checkInputForSig=Ide;function aL(e,t,r){let{hashType:n}=t(e),i=[];switch(n&zv.Transaction.SIGHASH_ANYONECANPAY&&i.push("addInput"),n&31){case zv.Transaction.SIGHASH_ALL:break;case zv.Transaction.SIGHASH_SINGLE:case zv.Transaction.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence");break}return i.indexOf(r)===-1}ar.signatureBlocksAction=aL;function kde(e){let t=[];if((e.partialSig||[]).length===0){if(!e.finalScriptSig&&!e.finalScriptWitness)return[];t=Tde(e)}else t=e.partialSig;return t.map(r=>r.signature)}function Tde(e){let t=e.finalScriptSig?ag.decompile(e.finalScriptSig)||[]:[],r=e.finalScriptWitness?ag.decompile(e.finalScriptWitness)||[]:[];return t.concat(r).filter(n=>Buffer.isBuffer(n)&&ag.isCanonicalScriptSignature(n)).map(n=>({signature:n}))}});var uL=L(Sr=>{"use strict";p();y();Object.defineProperty(Sr,"__esModule",{value:!0});Sr.checkTaprootInputForSigs=Sr.tapTreeFromList=Sr.tapTreeToList=Sr.tweakInternalPubKey=Sr.checkTaprootOutputFields=Sr.checkTaprootInputFields=Sr.isTaprootOutput=Sr.isTaprootInput=Sr.serializeTaprootSignature=Sr.tapScriptFinalizer=Sr.toXOnly=void 0;var k4=Zn(),Pde=_0(),Yv=jv(),Cf=_v(),_de=T0(),Bde=jv(),Cde=e=>e.length===32?e:e.slice(1,33);Sr.toXOnly=Cde;function Mde(e,t,r){let n=Jde(t,e,r);try{let o=$de(t,n).concat(n.script).concat(n.controlBlock);return{finalScriptWitness:(0,Yv.witnessStackToScriptWitness)(o)}}catch(i){throw new Error(`Can not finalize taproot input #${e}: ${i}`)}}Sr.tapScriptFinalizer=Mde;function Rde(e,t){let r=t?Buffer.from([t]):Buffer.from([]);return Buffer.concat([e,r])}Sr.serializeTaprootSignature=Rde;function Gv(e){return e&&!!(e.tapInternalKey||e.tapMerkleRoot||e.tapLeafScript&&e.tapLeafScript.length||e.tapBip32Derivation&&e.tapBip32Derivation.length||e.witnessUtxo&&(0,Yv.isP2TR)(e.witnessUtxo.script))}Sr.isTaprootInput=Gv;function $v(e,t){return e&&!!(e.tapInternalKey||e.tapTree||e.tapBip32Derivation&&e.tapBip32Derivation.length||t&&(0,Yv.isP2TR)(t))}Sr.isTaprootOutput=$v;function Ode(e,t,r){zde(e,t,r),Gde(e,t,r)}Sr.checkTaprootInputFields=Ode;function Nde(e,t,r){jde(e,t,r),Ude(e,t)}Sr.checkTaprootOutputFields=Nde;function Ude(e,t){if(!t.tapTree&&!t.tapInternalKey)return;let r=t.tapInternalKey||e.tapInternalKey,n=t.tapTree||e.tapTree;if(r){let{script:i}=e,o=Dde(r,n);if(i&&!i.equals(o))throw new Error("Error adding output. Script or address missmatch.")}}function Dde(e,t){let r=t&&cL(t.leaves),{output:n}=(0,_de.p2tr)({internalPubkey:e,scriptTree:r});return n}function Lde(e,t){let r=t.tapInternalKey,n=r&&(0,Cf.tweakKey)(r,t.tapMerkleRoot);if(!n)throw new Error(`Cannot tweak tap internal key for input #${e}. Public key: ${r&&r.toString("hex")}`);return n.x}Sr.tweakInternalPubKey=Lde;function Kde(e){if(!(0,k4.isTaptree)(e))throw new Error("Cannot convert taptree to tapleaf list. Expecting a tapree structure.");return E4(e)}Sr.tapTreeToList=Kde;function cL(e=[]){return e.length===1&&e[0].depth===0?{output:e[0].script,version:e[0].leafVersion}:Wde(e)}Sr.tapTreeFromList=cL;function Fde(e,t){return qde(e).some(n=>(0,Bde.signatureBlocksAction)(n,Vde,t))}Sr.checkTaprootInputForSigs=Fde;function Vde(e){return{signature:e.slice(0,64),hashType:e.slice(64)[0]||Pde.Transaction.SIGHASH_DEFAULT}}function qde(e){let t=[];if(e.tapKeySig&&t.push(e.tapKeySig),e.tapScriptSig&&t.push(...e.tapScriptSig.map(r=>r.signature)),!t.length){let r=Hde(e.finalScriptWitness);r&&t.push(r)}return t}function Hde(e){if(!e)return;let t=e.slice(2);if(t.length===64||t.length===65)return t}function E4(e,t=[],r=0){if(r>Cf.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");return e?(0,k4.isTapleaf)(e)?(t.push({depth:r,leafVersion:e.version||Cf.LEAF_VERSION_TAPSCRIPT,script:e.output}),t):(e[0]&&E4(e[0],t,r+1),e[1]&&E4(e[1],t,r+1),t):[]}function Wde(e){let t;for(let r of e)if(t=I4(r,t),!t)throw new Error("No room left to insert tapleaf in tree");return t}function I4(e,t,r=0){if(r>Cf.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");if(e.depth===r)return t?void 0:{output:e.script,version:e.leafVersion};if((0,k4.isTapleaf)(t))return;let n=I4(e,t&&t[0],r+1);if(n)return[n,t&&t[1]];let i=I4(e,t&&t[1],r+1);if(i)return[t&&t[0],i]}function zde(e,t,r){let n=Gv(e)&&C0(t),i=C0(e)&&Gv(t),o=e===t&&Gv(t)&&C0(t);if(n||i||o)throw new Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)}function jde(e,t,r){let n=$v(e)&&C0(t),i=C0(e)&&$v(t),o=e===t&&$v(t)&&C0(t);if(n||i||o)throw new Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)}function Gde(e,t,r){if(t.tapMerkleRoot){let n=(t.tapLeafScript||[]).every(o=>S4(o,t.tapMerkleRoot)),i=(e.tapLeafScript||[]).every(o=>S4(o,t.tapMerkleRoot));if(!n||!i)throw new Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}else if(e.tapMerkleRoot&&!(t.tapLeafScript||[]).every(i=>S4(i,e.tapMerkleRoot)))throw new Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}function S4(e,t){if(!t)return!0;let r=(0,Cf.tapleafHash)({output:e.script,version:e.leafVersion});return(0,Cf.rootHashFromPath)(e.controlBlock,r).equals(t)}function $de(e,t){let r=(0,Cf.tapleafHash)({output:t.script,version:t.leafVersion});return(e.tapScriptSig||[]).filter(n=>n.leafHash.equals(r)).map(n=>Yde(t.script,n)).sort((n,i)=>i.positionInScript-n.positionInScript).map(n=>n.signature)}function Yde(e,t){return Object.assign({positionInScript:(0,Yv.pubkeyPositionInScript)(t.pubkey,e)},t)}function Jde(e,t,r){if(!e.tapScriptSig||!e.tapScriptSig.length)throw new Error(`Can not finalize taproot input #${t}. No tapleaf script signature provided.`);let n=(e.tapLeafScript||[]).sort((i,o)=>i.controlBlock.length-o.controlBlock.length).find(i=>Zde(i,e.tapScriptSig,r));if(!n)throw new Error(`Can not finalize taproot input #${t}. Signature for tapleaf script not found.`);return n}function Zde(e,t,r){let n=(0,Cf.tapleafHash)({output:e.script,version:e.leafVersion});return(!r||r.equals(n))&&t.find(o=>o.leafHash.equals(n))!==void 0}function C0(e){return e&&!!(e.redeemScript||e.witnessScript||e.bip32Derivation&&e.bip32Derivation.length)}});var RL=L(rA=>{"use strict";p();y();Object.defineProperty(rA,"__esModule",{value:!0});rA.Psbt=void 0;var fL=iL(),lL=_f(),Li=x4(),dL=JI(),Zv=tg(),Qde=rs(),os=T0(),Xde=_v(),Zc=Oi(),ei=_0(),Ur=uL(),sn=jv(),ehe={network:Qde.bitcoin,maximumFeeRate:5e3},P4=class e{static fromBase64(t,r={}){let n=Buffer.from(t,"base64");return this.fromBuffer(n,r)}static fromHex(t,r={}){let n=Buffer.from(t,"hex");return this.fromBuffer(n,r)}static fromBuffer(t,r={}){let n=fL.Psbt.fromBuffer(t,the),i=new e(r,n);return she(i.__CACHE.__TX,i.__CACHE),i}constructor(t={},r=new fL.Psbt(new Qv)){this.data=r,this.opts=Object.assign({},ehe,t),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},this.data.inputs.length===0&&this.setVersion(2);let n=(i,o,s,a)=>Object.defineProperty(i,o,{enumerable:s,writable:a});n(this,"__CACHE",!1,!0),n(this,"opts",!1,!0)}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(t){this.setVersion(t)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(t){this.setLocktime(t)}get txInputs(){return this.__CACHE.__TX.ins.map(t=>({hash:(0,Zv.cloneBuffer)(t.hash),index:t.index,sequence:t.sequence}))}get txOutputs(){return this.__CACHE.__TX.outs.map(t=>{let r;try{r=(0,dL.fromOutputScript)(t.script,this.opts.network)}catch{}return{script:(0,Zv.cloneBuffer)(t.script),value:t.value,address:r}})}combine(...t){return this.data.combine(...t.map(r=>r.data)),this}clone(){let t=e.fromBuffer(this.data.toBuffer());return t.opts=JSON.parse(JSON.stringify(this.opts)),t}setMaximumFeeRate(t){Jv(t),this.opts.maximumFeeRate=t}setVersion(t){Jv(t),cg(this.data.inputs,"setVersion");let r=this.__CACHE;return r.__TX.version=t,r.__EXTRACTED_TX=void 0,this}setLocktime(t){Jv(t),cg(this.data.inputs,"setLocktime");let r=this.__CACHE;return r.__TX.locktime=t,r.__EXTRACTED_TX=void 0,this}setInputSequence(t,r){Jv(r),cg(this.data.inputs,"setInputSequence");let n=this.__CACHE;if(n.__TX.ins.length<=t)throw new Error("Input index too high");return n.__TX.ins[t].sequence=r,n.__EXTRACTED_TX=void 0,this}addInputs(t){return t.forEach(r=>this.addInput(r)),this}addInput(t){if(arguments.length>1||!t||t.hash===void 0||t.index===void 0)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");(0,Ur.checkTaprootInputFields)(t,t,"addInput"),cg(this.data.inputs,"addInput"),t.witnessScript&&Xv(t.witnessScript);let r=this.__CACHE;this.data.addInput(t);let n=r.__TX.ins[r.__TX.ins.length-1];SL(r,n);let i=this.data.inputs.length-1,o=this.data.inputs[i];return o.nonWitnessUtxo&&B4(this.__CACHE,o,i),r.__FEE=void 0,r.__FEE_RATE=void 0,r.__EXTRACTED_TX=void 0,this}addOutputs(t){return t.forEach(r=>this.addOutput(r)),this}addOutput(t){if(arguments.length>1||!t||t.value===void 0||t.address===void 0&&t.script===void 0)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");cg(this.data.inputs,"addOutput");let{address:r}=t;if(typeof r=="string"){let{network:i}=this.opts,o=(0,dL.toOutputScript)(r,i);t=Object.assign(t,{script:o})}(0,Ur.checkTaprootOutputFields)(t,t,"addOutput");let n=this.__CACHE;return this.data.addOutput(t),n.__FEE=void 0,n.__FEE_RATE=void 0,n.__EXTRACTED_TX=void 0,this}extractTransaction(t){if(!this.data.inputs.every(vL))throw new Error("Not finalized");let r=this.__CACHE;if(t||nhe(this,r,this.opts),r.__EXTRACTED_TX)return r.__EXTRACTED_TX;let n=r.__TX.clone();return _L(this.data.inputs,n,r,!0),n}getFeeRate(){return gL("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return gL("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return(0,Li.checkForInput)(this.data.inputs,0),ug(this.data.inputs.length).forEach(t=>this.finalizeInput(t)),this}finalizeInput(t,r){let n=(0,Li.checkForInput)(this.data.inputs,t);return(0,Ur.isTaprootInput)(n)?this._finalizeTaprootInput(t,n,void 0,r):this._finalizeInput(t,n,r)}finalizeTaprootInput(t,r,n=Ur.tapScriptFinalizer){let i=(0,Li.checkForInput)(this.data.inputs,t);if((0,Ur.isTaprootInput)(i))return this._finalizeTaprootInput(t,i,r,n);throw new Error(`Cannot finalize input #${t}. Not Taproot.`)}_finalizeInput(t,r,n=ahe){let{script:i,isP2SH:o,isP2WSH:s,isSegwit:a}=lhe(t,r,this.__CACHE);if(!i)throw new Error(`No script found for input #${t}`);ihe(r);let{finalScriptSig:c,finalScriptWitness:u}=n(t,r,i,a,o,s);if(c&&this.data.updateInput(t,{finalScriptSig:c}),u&&this.data.updateInput(t,{finalScriptWitness:u}),!c&&!u)throw new Error(`Unknown error finalizing input #${t}`);return this.data.clearFinalizedInput(t),this}_finalizeTaprootInput(t,r,n,i=Ur.tapScriptFinalizer){if(!r.witnessUtxo)throw new Error(`Cannot finalize input #${t}. Missing withness utxo.`);if(r.tapKeySig){let o=os.p2tr({output:r.witnessUtxo.script,signature:r.tapKeySig}),s=(0,sn.witnessStackToScriptWitness)(o.witness);this.data.updateInput(t,{finalScriptWitness:s})}else{let{finalScriptWitness:o}=i(t,r,n);this.data.updateInput(t,{finalScriptWitness:o})}return this.data.clearFinalizedInput(t),this}getInputType(t){let r=(0,Li.checkForInput)(this.data.inputs,t),n=BL(t,r,this.__CACHE),i=tA(n,t,"input",r.redeemScript||mhe(r.finalScriptSig),r.witnessScript||ghe(r.finalScriptWitness)),o=i.type==="raw"?"":i.type+"-",s=ML(i.meaningfulScript);return o+s}inputHasPubkey(t,r){let n=(0,Li.checkForInput)(this.data.inputs,t);return phe(r,n,t,this.__CACHE)}inputHasHDKey(t,r){let n=(0,Li.checkForInput)(this.data.inputs,t),i=pL(r);return!!n.bip32Derivation&&n.bip32Derivation.some(i)}outputHasPubkey(t,r){let n=(0,Li.checkForOutput)(this.data.outputs,t);return yhe(r,n,t,this.__CACHE)}outputHasHDKey(t,r){let n=(0,Li.checkForOutput)(this.data.outputs,t),i=pL(r);return!!n.bip32Derivation&&n.bip32Derivation.some(i)}validateSignaturesOfAllInputs(t){return(0,Li.checkForInput)(this.data.inputs,0),ug(this.data.inputs.length).map(n=>this.validateSignaturesOfInput(n,t)).reduce((n,i)=>i===!0&&n,!0)}validateSignaturesOfInput(t,r,n){let i=this.data.inputs[t];return(0,Ur.isTaprootInput)(i)?this.validateSignaturesOfTaprootInput(t,r,n):this._validateSignaturesOfInput(t,r,n)}_validateSignaturesOfInput(t,r,n){let i=this.data.inputs[t],o=(i||{}).partialSig;if(!i||!o||o.length<1)throw new Error("No signatures to validate");if(typeof r!="function")throw new Error("Need validator function to validate signatures");let s=n?o.filter(l=>l.pubkey.equals(n)):o;if(s.length<1)throw new Error("No signatures for this pubkey");let a=[],c,u,h;for(let l of s){let g=Zc.signature.decode(l.signature),{hash:x,script:A}=h!==g.hashType?IL(t,Object.assign({},i,{sighashType:g.hashType}),this.__CACHE,!0):{hash:c,script:u};h=g.hashType,c=x,u=A,AL(l.pubkey,A,"verify"),a.push(r(l.pubkey,x,g.signature))}return a.every(l=>l===!0)}validateSignaturesOfTaprootInput(t,r,n){let i=this.data.inputs[t],o=(i||{}).tapKeySig,s=(i||{}).tapScriptSig;if(!i&&!o&&!(s&&!s.length))throw new Error("No signatures to validate");if(typeof r!="function")throw new Error("Need validator function to validate signatures");n=n&&(0,Ur.toXOnly)(n);let a=n?_4(t,i,this.data.inputs,n,this.__CACHE):uhe(t,i,this.data.inputs,this.__CACHE);if(!a.length)throw new Error("No signatures for this pubkey");let c=a.find(h=>!h.leafHash),u=0;if(o&&c){if(!r(c.pubkey,c.hash,xL(o)))return!1;u++}if(s)for(let h of s){let l=a.find(g=>h.pubkey.equals(g.pubkey));if(l){if(!r(h.pubkey,l.hash,xL(h.signature)))return!1;u++}}return u>0}signAllInputsHD(t,r=[ei.Transaction.SIGHASH_ALL]){if(!t||!t.publicKey||!t.fingerprint)throw new Error("Need HDSigner to sign input");let n=[];for(let i of ug(this.data.inputs.length))try{this.signInputHD(i,t,r),n.push(!0)}catch{n.push(!1)}if(n.every(i=>i===!1))throw new Error("No inputs were signed");return this}signAllInputsHDAsync(t,r=[ei.Transaction.SIGHASH_ALL]){return new Promise((n,i)=>{if(!t||!t.publicKey||!t.fingerprint)return i(new Error("Need HDSigner to sign input"));let o=[],s=[];for(let a of ug(this.data.inputs.length))s.push(this.signInputHDAsync(a,t,r).then(()=>{o.push(!0)},()=>{o.push(!1)}));return Promise.all(s).then(()=>{if(o.every(a=>a===!1))return i(new Error("No inputs were signed"));n()})})}signInputHD(t,r,n=[ei.Transaction.SIGHASH_ALL]){if(!r||!r.publicKey||!r.fingerprint)throw new Error("Need HDSigner to sign input");return wL(t,this.data.inputs,r).forEach(o=>this.signInput(t,o,n)),this}signInputHDAsync(t,r,n=[ei.Transaction.SIGHASH_ALL]){return new Promise((i,o)=>{if(!r||!r.publicKey||!r.fingerprint)return o(new Error("Need HDSigner to sign input"));let a=wL(t,this.data.inputs,r).map(c=>this.signInputAsync(t,c,n));return Promise.all(a).then(()=>{i()}).catch(o)})}signAllInputs(t,r){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");let n=[];for(let i of ug(this.data.inputs.length))try{this.signInput(i,t,r),n.push(!0)}catch{n.push(!1)}if(n.every(i=>i===!1))throw new Error("No inputs were signed");return this}signAllInputsAsync(t,r){return new Promise((n,i)=>{if(!t||!t.publicKey)return i(new Error("Need Signer to sign input"));let o=[],s=[];for(let[a]of this.data.inputs.entries())s.push(this.signInputAsync(a,t,r).then(()=>{o.push(!0)},()=>{o.push(!1)}));return Promise.all(s).then(()=>{if(o.every(a=>a===!1))return i(new Error("No inputs were signed"));n()})})}signInput(t,r,n){if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let i=(0,Li.checkForInput)(this.data.inputs,t);return(0,Ur.isTaprootInput)(i)?this._signTaprootInput(t,i,r,void 0,n):this._signInput(t,r,n)}signTaprootInput(t,r,n,i){if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let o=(0,Li.checkForInput)(this.data.inputs,t);if((0,Ur.isTaprootInput)(o))return this._signTaprootInput(t,o,r,n,i);throw new Error(`Input #${t} is not of type Taproot.`)}_signInput(t,r,n=[ei.Transaction.SIGHASH_ALL]){let{hash:i,sighashType:o}=bL(this.data.inputs,t,r.publicKey,this.__CACHE,n),s=[{pubkey:r.publicKey,signature:Zc.signature.encode(r.sign(i),o)}];return this.data.updateInput(t,{partialSig:s}),this}_signTaprootInput(t,r,n,i,o=[ei.Transaction.SIGHASH_DEFAULT]){let s=this.checkTaprootHashesForSig(t,r,n,i,o),a=s.filter(u=>!u.leafHash).map(u=>(0,Ur.serializeTaprootSignature)(n.signSchnorr(u.hash),r.sighashType))[0],c=s.filter(u=>!!u.leafHash).map(u=>({pubkey:(0,Ur.toXOnly)(n.publicKey),signature:(0,Ur.serializeTaprootSignature)(n.signSchnorr(u.hash),r.sighashType),leafHash:u.leafHash}));return a&&this.data.updateInput(t,{tapKeySig:a}),c.length&&this.data.updateInput(t,{tapScriptSig:c}),this}signInputAsync(t,r,n){return Promise.resolve().then(()=>{if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let i=(0,Li.checkForInput)(this.data.inputs,t);return(0,Ur.isTaprootInput)(i)?this._signTaprootInputAsync(t,i,r,void 0,n):this._signInputAsync(t,r,n)})}signTaprootInputAsync(t,r,n,i){return Promise.resolve().then(()=>{if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let o=(0,Li.checkForInput)(this.data.inputs,t);if((0,Ur.isTaprootInput)(o))return this._signTaprootInputAsync(t,o,r,n,i);throw new Error(`Input #${t} is not of type Taproot.`)})}_signInputAsync(t,r,n=[ei.Transaction.SIGHASH_ALL]){let{hash:i,sighashType:o}=bL(this.data.inputs,t,r.publicKey,this.__CACHE,n);return Promise.resolve(r.sign(i)).then(s=>{let a=[{pubkey:r.publicKey,signature:Zc.signature.encode(s,o)}];this.data.updateInput(t,{partialSig:a})})}async _signTaprootInputAsync(t,r,n,i,o=[ei.Transaction.SIGHASH_DEFAULT]){let s=this.checkTaprootHashesForSig(t,r,n,i,o),a=[],c=s.filter(h=>!h.leafHash)[0];if(c){let h=Promise.resolve(n.signSchnorr(c.hash)).then(l=>({tapKeySig:(0,Ur.serializeTaprootSignature)(l,r.sighashType)}));a.push(h)}let u=s.filter(h=>!!h.leafHash);if(u.length){let h=u.map(l=>Promise.resolve(n.signSchnorr(l.hash)).then(g=>({tapScriptSig:[{pubkey:(0,Ur.toXOnly)(n.publicKey),signature:(0,Ur.serializeTaprootSignature)(g,r.sighashType),leafHash:l.leafHash}]})));a.push(...h)}return Promise.all(a).then(h=>{h.forEach(l=>this.data.updateInput(t,l))})}checkTaprootHashesForSig(t,r,n,i,o){if(typeof n.signSchnorr!="function")throw new Error(`Need Schnorr Signer to sign taproot input #${t}.`);let s=_4(t,r,this.data.inputs,n.publicKey,this.__CACHE,i,o);if(!s||!s.length)throw new Error(`Can not sign for input #${t} with the key ${n.publicKey.toString("hex")}`);return s}toBuffer(){return T4(this.__CACHE),this.data.toBuffer()}toHex(){return T4(this.__CACHE),this.data.toHex()}toBase64(){return T4(this.__CACHE),this.data.toBase64()}updateGlobal(t){return this.data.updateGlobal(t),this}updateInput(t,r){return r.witnessScript&&Xv(r.witnessScript),(0,Ur.checkTaprootInputFields)(this.data.inputs[t],r,"updateInput"),this.data.updateInput(t,r),r.nonWitnessUtxo&&B4(this.__CACHE,this.data.inputs[t],t),this}updateOutput(t,r){let n=this.data.outputs[t];return(0,Ur.checkTaprootOutputFields)(n,r,"updateOutput"),this.data.updateOutput(t,r),this}addUnknownKeyValToGlobal(t){return this.data.addUnknownKeyValToGlobal(t),this}addUnknownKeyValToInput(t,r){return this.data.addUnknownKeyValToInput(t,r),this}addUnknownKeyValToOutput(t,r){return this.data.addUnknownKeyValToOutput(t,r),this}clearFinalizedInput(t){return this.data.clearFinalizedInput(t),this}};rA.Psbt=P4;var the=e=>new Qv(e),Qv=class{constructor(t=Buffer.from([2,0,0,0,0,0,0,0,0,0])){this.tx=ei.Transaction.fromBuffer(t),ohe(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(t){if(t.hash===void 0||t.index===void 0||!Buffer.isBuffer(t.hash)&&typeof t.hash!="string"||typeof t.index!="number")throw new Error("Error adding input.");let r=typeof t.hash=="string"?(0,Zv.reverseBuffer)(Buffer.from(t.hash,"hex")):t.hash;this.tx.addInput(r,t.index,t.sequence)}addOutput(t){if(t.script===void 0||t.value===void 0||!Buffer.isBuffer(t.script)||typeof t.value!="number")throw new Error("Error adding output.");this.tx.addOutput(t.script,t.value)}toBuffer(){return this.tx.toBuffer()}};function rhe(e,t,r){switch(r){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return hL(1,e.partialSig);case"multisig":let n=os.p2ms({output:t});return hL(n.m,e.partialSig,n.pubkeys);default:return!1}}function T4(e){if(e.__UNSAFE_SIGN_NONSEGWIT!==!1)throw new Error("Not BIP174 compliant, can not export")}function hL(e,t,r){if(!t)return!1;let n;if(r?n=r.map(i=>{let o=bhe(i);return t.find(s=>s.pubkey.equals(o))}).filter(i=>!!i):n=t,n.length>e)throw new Error("Too many signatures");return n.length===e}function vL(e){return!!e.finalScriptSig||!!e.finalScriptWitness}function pL(e){return t=>!(!t.masterFingerprint.equals(e.fingerprint)||!e.derivePath(t.path).publicKey.equals(t.pubkey))}function Jv(e){if(typeof e!="number"||e!==Math.floor(e)||e>4294967295||e<0)throw new Error("Invalid 32 bit integer")}function nhe(e,t,r){let n=t.__FEE_RATE||e.getFeeRate(),i=t.__EXTRACTED_TX.virtualSize(),o=n*i;if(n>=r.maximumFeeRate)throw new Error(`Warning: You are paying around ${(o/1e8).toFixed(8)} in fees, which is ${n} satoshi per byte for a transaction with a VSize of ${i} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}function cg(e,t){e.forEach(r=>{if((0,Ur.isTaprootInput)(r)?(0,Ur.checkTaprootInputForSigs)(r,t):(0,sn.checkInputForSig)(r,t))throw new Error("Can not modify transaction, signatures exist.")})}function ihe(e){if(!e.sighashType||!e.partialSig)return;let{partialSig:t,sighashType:r}=e;t.forEach(n=>{let{hashType:i}=Zc.signature.decode(n.signature);if(r!==i)throw new Error("Signature sighash does not match input sighash type")})}function AL(e,t,r){if(!(0,sn.pubkeyInScript)(e,t))throw new Error(`Can not ${r} for this input with the key ${e.toString("hex")}`)}function ohe(e){if(!e.ins.every(r=>r.script&&r.script.length===0&&r.witness&&r.witness.length===0))throw new Error("Format Error: Transaction ScriptSigs are not empty")}function she(e,t){e.ins.forEach(r=>{SL(t,r)})}function SL(e,t){let r=(0,Zv.reverseBuffer)(Buffer.from(t.hash)).toString("hex")+":"+t.index;if(e.__TX_IN_CACHE[r])throw new Error("Duplicate input detected.");e.__TX_IN_CACHE[r]=1}function EL(e,t){return(r,n,i,o)=>{let s=e({redeem:{output:i}}).output;if(!n.equals(s))throw new Error(`${t} for ${o} #${r} doesn't match the scriptPubKey in the prevout`)}}var yL=EL(os.p2sh,"Redeem script"),mL=EL(os.p2wsh,"Witness script");function gL(e,t,r,n){if(!r.every(vL))throw new Error(`PSBT must be finalized to calculate ${t}`);if(e==="__FEE_RATE"&&n.__FEE_RATE)return n.__FEE_RATE;if(e==="__FEE"&&n.__FEE)return n.__FEE;let i,o=!0;if(n.__EXTRACTED_TX?(i=n.__EXTRACTED_TX,o=!1):i=n.__TX.clone(),_L(r,i,n,o),e==="__FEE_RATE")return n.__FEE_RATE;if(e==="__FEE")return n.__FEE}function ahe(e,t,r,n,i,o){let s=ML(r);if(!rhe(t,r,s))throw new Error(`Can not finalize input #${e}`);return che(r,s,t.partialSig,n,i,o)}function che(e,t,r,n,i,o){let s,a,c=fhe(e,t,r),u=o?os.p2wsh({redeem:c}):null,h=i?os.p2sh({redeem:u||c}):null;return n?(u?a=(0,sn.witnessStackToScriptWitness)(u.witness):a=(0,sn.witnessStackToScriptWitness)(c.witness),h&&(s=h.input)):h?s=h.input:s=c.input,{finalScriptSig:s,finalScriptWitness:a}}function bL(e,t,r,n,i){let o=(0,Li.checkForInput)(e,t),{hash:s,sighashType:a,script:c}=IL(t,o,n,!1,i);return AL(r,c,"sign"),{hash:s,sighashType:a}}function IL(e,t,r,n,i){let o=r.__TX,s=t.sighashType||ei.Transaction.SIGHASH_ALL;TL(s,i);let a,c;if(t.nonWitnessUtxo){let l=eA(r,t,e),g=o.ins[e].hash,x=l.getHash();if(!g.equals(x))throw new Error(`Non-witness UTXO hash for input #${e} doesn't match the hash specified in the prevout`);let A=o.ins[e].index;c=l.outs[A]}else if(t.witnessUtxo)c=t.witnessUtxo;else throw new Error("Need a Utxo input item for signing");let{meaningfulScript:u,type:h}=tA(c.script,e,"input",t.redeemScript,t.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(h)>=0)a=o.hashForWitnessV0(e,u,c.value,s);else if((0,sn.isP2WPKH)(u)){let l=os.p2pkh({hash:u.slice(2)}).output;a=o.hashForWitnessV0(e,l,c.value,s)}else{if(t.nonWitnessUtxo===void 0&&r.__UNSAFE_SIGN_NONSEGWIT===!1)throw new Error(`Input #${e} has witnessUtxo but non-segwit script: ${u.toString("hex")}`);!n&&r.__UNSAFE_SIGN_NONSEGWIT!==!1&&console.warn(`Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as Psbt's predecesor (TransactionBuilder - now removed) when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.
*********************
PROCEED WITH CAUTION!
*********************`),a=o.hashForSignature(e,u,s)}return{script:u,sighashType:s,hash:a}}function uhe(e,t,r,n){let i=[];if(t.tapInternalKey){let s=kL(e,t,n);s&&i.push(s)}if(t.tapScriptSig){let s=t.tapScriptSig.map(a=>a.pubkey);i.push(...s)}return i.map(s=>_4(e,t,r,s,n)).flat()}function kL(e,t,r){let{script:n}=C4(e,t,r);return(0,sn.isP2TR)(n)?n.subarray(2,34):null}function xL(e){return e.length===64?e:e.subarray(0,64)}function _4(e,t,r,n,i,o,s){let a=i.__TX,c=t.sighashType||ei.Transaction.SIGHASH_DEFAULT;TL(c,s);let u=r.map((A,E)=>C4(E,A,i)),h=u.map(A=>A.script),l=u.map(A=>A.value),g=[];if(t.tapInternalKey&&!o){let A=kL(e,t,i)||Buffer.from([]);if((0,Ur.toXOnly)(n).equals(A)){let E=a.hashForWitnessV1(e,h,l,c);g.push({pubkey:n,hash:E})}}let x=(t.tapLeafScript||[]).filter(A=>(0,sn.pubkeyInScript)(n,A.script)).map(A=>{let E=(0,Xde.tapleafHash)({output:A.script,version:A.leafVersion});return Object.assign({hash:E},A)}).filter(A=>!o||o.equals(A.hash)).map(A=>{let E=a.hashForWitnessV1(e,h,l,ei.Transaction.SIGHASH_DEFAULT,A.hash);return{pubkey:n,hash:E,leafHash:A.hash}});return g.concat(x)}function TL(e,t){if(t&&t.indexOf(e)<0){let r=hhe(e);throw new Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${r}`)}}function fhe(e,t,r){let n;switch(t){case"multisig":let i=dhe(e,r);n=os.p2ms({output:e,signatures:i});break;case"pubkey":n=os.p2pk({output:e,signature:r[0].signature});break;case"pubkeyhash":n=os.p2pkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature});break;case"witnesspubkeyhash":n=os.p2wpkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature});break}return n}function lhe(e,t,r){let n=r.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!t.redeemScript,i.isP2WSH=!!t.witnessScript,t.witnessScript)i.script=t.witnessScript;else if(t.redeemScript)i.script=t.redeemScript;else if(t.nonWitnessUtxo){let o=eA(r,t,e),s=n.ins[e].index;i.script=o.outs[s].script}else t.witnessUtxo&&(i.script=t.witnessUtxo.script);return(t.witnessScript||(0,sn.isP2WPKH)(i.script))&&(i.isSegwit=!0),i}function wL(e,t,r){let n=(0,Li.checkForInput)(t,e);if(!n.bip32Derivation||n.bip32Derivation.length===0)throw new Error("Need bip32Derivation to sign with HD");let i=n.bip32Derivation.map(s=>{if(s.masterFingerprint.equals(r.fingerprint))return s}).filter(s=>!!s);if(i.length===0)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return i.map(s=>{let a=r.derivePath(s.path);if(!s.pubkey.equals(a.publicKey))throw new Error("pubkey did not match bip32Derivation");return a})}function dhe(e,t){return os.p2ms({output:e}).pubkeys.map(n=>(t.filter(i=>i.pubkey.equals(n))[0]||{}).signature).filter(n=>!!n)}function PL(e){let t=0;function r(s){return t+=s,e.slice(t-s,t)}function n(){let s=lL.decode(e,t);return t+=lL.decode.bytes,s}function i(){return r(n())}function o(){let s=n(),a=[];for(let c=0;c<s;c++)a.push(i());return a}return o()}function hhe(e){let t=e&ei.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(e&31){case ei.Transaction.SIGHASH_ALL:t+="SIGHASH_ALL";break;case ei.Transaction.SIGHASH_SINGLE:t+="SIGHASH_SINGLE";break;case ei.Transaction.SIGHASH_NONE:t+="SIGHASH_NONE";break}return t}function B4(e,t,r){e.__NON_WITNESS_UTXO_BUF_CACHE[r]=t.nonWitnessUtxo;let n=ei.Transaction.fromBuffer(t.nonWitnessUtxo);e.__NON_WITNESS_UTXO_TX_CACHE[r]=n;let i=e,o=r;delete t.nonWitnessUtxo,Object.defineProperty(t,"nonWitnessUtxo",{enumerable:!0,get(){let s=i.__NON_WITNESS_UTXO_BUF_CACHE[o],a=i.__NON_WITNESS_UTXO_TX_CACHE[o];if(s!==void 0)return s;{let c=a.toBuffer();return i.__NON_WITNESS_UTXO_BUF_CACHE[o]=c,c}},set(s){i.__NON_WITNESS_UTXO_BUF_CACHE[o]=s}})}function _L(e,t,r,n){let i=0;e.forEach((c,u)=>{if(n&&c.finalScriptSig&&(t.ins[u].script=c.finalScriptSig),n&&c.finalScriptWitness&&(t.ins[u].witness=PL(c.finalScriptWitness)),c.witnessUtxo)i+=c.witnessUtxo.value;else if(c.nonWitnessUtxo){let h=eA(r,c,u),l=t.ins[u].index,g=h.outs[l];i+=g.value}});let o=t.outs.reduce((c,u)=>c+u.value,0),s=i-o;if(s<0)throw new Error("Outputs are spending more than Inputs");let a=t.virtualSize();r.__FEE=s,r.__EXTRACTED_TX=t,r.__FEE_RATE=Math.floor(s/a)}function eA(e,t,r){let n=e.__NON_WITNESS_UTXO_TX_CACHE;return n[r]||B4(e,t,r),n[r]}function BL(e,t,r){let{script:n}=C4(e,t,r);return n}function C4(e,t,r){if(t.witnessUtxo!==void 0)return{script:t.witnessUtxo.script,value:t.witnessUtxo.value};if(t.nonWitnessUtxo!==void 0){let i=eA(r,t,e).outs[r.__TX.ins[e].index];return{script:i.script,value:i.value}}else throw new Error("Can't find pubkey in input without Utxo data")}function phe(e,t,r,n){let i=BL(r,t,n),{meaningfulScript:o}=tA(i,r,"input",t.redeemScript,t.witnessScript);return(0,sn.pubkeyInScript)(e,o)}function yhe(e,t,r,n){let i=n.__TX.outs[r].script,{meaningfulScript:o}=tA(i,r,"output",t.redeemScript,t.witnessScript);return(0,sn.pubkeyInScript)(e,o)}function mhe(e){if(!e)return;let t=Zc.decompile(e);if(!t)return;let r=t[t.length-1];if(!(!Buffer.isBuffer(r)||CL(r)||xhe(r)||!Zc.decompile(r)))return r}function ghe(e){if(!e)return;let t=PL(e),r=t[t.length-1];if(!(CL(r)||!Zc.decompile(r)))return r}function bhe(e){if(e.length===65){let t=e[64]&1,r=e.slice(0,33);return r[0]=2|t,r}return e.slice()}function CL(e){return e.length===33&&Zc.isCanonicalPubKey(e)}function xhe(e){return Zc.isCanonicalScriptSignature(e)}function tA(e,t,r,n,i){let o=(0,sn.isP2SHScript)(e),s=o&&n&&(0,sn.isP2WSHScript)(n),a=(0,sn.isP2WSHScript)(e);if(o&&n===void 0)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((a||s)&&i===void 0)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");let c;return s?(c=i,yL(t,e,n,r),mL(t,n,i,r),Xv(c)):a?(c=i,mL(t,e,i,r),Xv(c)):o?(c=n,yL(t,e,n,r)):c=e,{meaningfulScript:c,type:s?"p2sh-p2wsh":o?"p2sh":a?"p2wsh":"raw"}}function Xv(e){if((0,sn.isP2WPKH)(e)||(0,sn.isP2SHScript)(e))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function ML(e){return(0,sn.isP2WPKH)(e)?"witnesspubkeyhash":(0,sn.isP2PKH)(e)?"pubkeyhash":(0,sn.isP2MS)(e)?"multisig":(0,sn.isP2PK)(e)?"pubkey":"nonstandard"}function ug(e){return[...Array(e).keys()]}});var fg=L(qr=>{"use strict";p();y();Object.defineProperty(qr,"__esModule",{value:!0});qr.initEccLib=qr.Transaction=qr.opcodes=qr.Psbt=qr.Block=qr.script=qr.payments=qr.networks=qr.crypto=qr.address=void 0;var whe=JI();qr.address=whe;var vhe=Ka();qr.crypto=vhe;var Ahe=rs();qr.networks=Ahe;var She=T0();qr.payments=She;var Ehe=Oi();qr.script=Ehe;var Ihe=tD();Object.defineProperty(qr,"Block",{enumerable:!0,get:function(){return Ihe.Block}});var khe=RL();Object.defineProperty(qr,"Psbt",{enumerable:!0,get:function(){return khe.Psbt}});var The=tv();Object.defineProperty(qr,"opcodes",{enumerable:!0,get:function(){return The.OPS}});var Phe=_0();Object.defineProperty(qr,"Transaction",{enumerable:!0,get:function(){return Phe.Transaction}});var _he=Pv();Object.defineProperty(qr,"initEccLib",{enumerable:!0,get:function(){return _he.initEccLib}})});var U0=L(wA=>{"use strict";p();y();Object.defineProperty(wA,"__esModule",{value:!0});wA.AppAuthError=void 0;var d0e=function(){function e(t,r){this.message=t,this.extras=r}return e}();wA.AppAuthError=d0e});var vA=L(ja=>{"use strict";p();y();Object.defineProperty(ja,"__esModule",{value:!0});ja.DefaultCrypto=ja.textEncodeLite=ja.urlSafe=ja.bufferToString=void 0;var h0e=H_(),SK=U0(),EK=typeof self<"u"&&!!self.crypto,p0e=EK&&!!self.crypto.subtle,rk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function IK(e){for(var t=[],r=0;r<e.byteLength;r+=1){var n=e[r]%rk.length;t.push(rk[n])}return t.join("")}ja.bufferToString=IK;function kK(e){var t=h0e.fromByteArray(new Uint8Array(e));return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}ja.urlSafe=kK;function TK(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}ja.textEncodeLite=TK;var y0e=function(){function e(){}return e.prototype.generateRandom=function(t){var r=new Uint8Array(t);if(EK)self.crypto.getRandomValues(r);else for(var n=0;n<t;n+=1)r[n]=Math.random()*rk.length|0;return IK(r)},e.prototype.deriveChallenge=function(t){return t.length<43||t.length>128?Promise.reject(new SK.AppAuthError("Invalid code length.")):p0e?new Promise(function(r,n){self.crypto.subtle.digest("SHA-256",TK(t)).then(function(i){return r(kK(new Uint8Array(i)))},function(i){return n(i)})}):Promise.reject(new SK.AppAuthError("window.crypto.subtle is unavailable."))},e}();ja.DefaultCrypto=y0e});var nk=L(Eo=>{"use strict";p();y();Object.defineProperty(Eo,"__esModule",{value:!0});Eo.IS_PROFILE=Eo.IS_LOG=Eo.setFlag=Eo.Flags=void 0;Eo.Flags={IS_LOG:!0,IS_PROFILE:!1};function m0e(e,t){Eo.Flags[e]=t}Eo.setFlag=m0e;Eo.IS_LOG=Eo.Flags.IS_LOG,Eo.IS_PROFILE=Eo.Flags.IS_PROFILE});var wg=L(Uf=>{"use strict";p();y();var ik=Uf&&Uf.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(Uf,"__esModule",{value:!0});Uf.profile=Uf.log=void 0;var PK=nk();function ok(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(PK.Flags.IS_LOG){var n=t?t.length:0;n>0?console.log.apply(console,ik([e],t,!1)):console.log(e)}}Uf.log=ok;var g0e=typeof self<"u"&&!!self.performance&&!!console.profile;function b0e(e,t,r){return PK.Flags.IS_PROFILE?x0e(e,t,r):r}Uf.profile=b0e;function x0e(e,t,r){var n=r.value,i=n.name;return i||(i="anonymous function"),g0e?r.value=function(o){console.profile(i);var s=self.performance.now(),a=n.call.apply(n,ik([this||self],o,!1)),c=self.performance.now()-s;return console.log("".concat(i," took ").concat(c," ms")),console.profileEnd(),a}:r.value=function(o){ok("Profile start ".concat(i));var s=Date.now(),a=n.call.apply(n,ik([this||self],o,!1)),c=Date.now()-s;return ok("Profile end ".concat(i," took ").concat(c," ms.")),a},r}});var sk=L(AA=>{"use strict";p();y();Object.defineProperty(AA,"__esModule",{value:!0});AA.AuthorizationRequest=void 0;var w0e=vA(),v0e=wg(),A0e=10,S0e=function(e){return e.generateRandom(A0e)},E0e=function(){function e(t,r,n){r===void 0&&(r=new w0e.DefaultCrypto),n===void 0&&(n=!0),this.crypto=r,this.usePkce=n,this.clientId=t.client_id,this.redirectUri=t.redirect_uri,this.scope=t.scope,this.responseType=t.response_type||e.RESPONSE_TYPE_CODE,this.state=t.state||S0e(r),this.extras=t.extras,this.internal=t.internal}return e.prototype.setupCodeVerifier=function(){var t=this;if(this.usePkce){var r=this.crypto.generateRandom(128),n=this.crypto.deriveChallenge(r).catch(function(i){(0,v0e.log)("Unable to generate PKCE challenge. Not using PKCE",i)});return n.then(function(i){i&&(t.internal=t.internal||{},t.internal.code_verifier=r,t.extras=t.extras||{},t.extras.code_challenge=i,t.extras.code_challenge_method="S256")})}else return Promise.resolve()},e.prototype.toJson=function(){var t=this;return this.setupCodeVerifier().then(function(){return{response_type:t.responseType,client_id:t.clientId,redirect_uri:t.redirectUri,scope:t.scope,state:t.state,extras:t.extras,internal:t.internal}})},e.RESPONSE_TYPE_TOKEN="token",e.RESPONSE_TYPE_CODE="code",e}();AA.AuthorizationRequest=E0e});var _K=L(SA=>{"use strict";p();y();Object.defineProperty(SA,"__esModule",{value:!0});SA.requireValidUrl=void 0;var I0e=U0();function k0e(e){try{return new URL(e),e}catch{throw new I0e.AppAuthError("Invalid input url ".concat(e))}}SA.requireValidUrl=k0e});var ck=L(tu=>{"use strict";p();y();Object.defineProperty(tu,"__esModule",{value:!0});tu.AuthorizationRequestHandler=tu.BUILT_IN_PARAMETERS=tu.AuthorizationNotifier=void 0;var ak=wg(),T0e=_K(),P0e=function(){function e(){this.listener=null}return e.prototype.setAuthorizationListener=function(t){this.listener=t},e.prototype.onAuthorizationComplete=function(t,r,n){this.listener&&this.listener(t,r,n)},e}();tu.AuthorizationNotifier=P0e;tu.BUILT_IN_PARAMETERS=["redirect_uri","client_id","response_type","state","scope"];var _0e=function(){function e(t,r){this.utils=t,this.crypto=r,this.notifier=null}return e.prototype.buildRequestUrl=function(t,r){var n={redirect_uri:r.redirectUri,client_id:r.clientId,response_type:r.responseType,state:r.state,scope:r.scope};if(r.extras)for(var i in r.extras)r.extras.hasOwnProperty(i)&&tu.BUILT_IN_PARAMETERS.indexOf(i)<0&&(n[i]=r.extras[i]);var o=this.utils.stringify(n),s=(0,T0e.requireValidUrl)(t.authorizationEndpoint),a="".concat(s,"?").concat(o);return a},e.prototype.completeAuthorizationRequestIfPossible=function(){var t=this;return(0,ak.log)("Checking to see if there is an authorization response to be delivered."),this.notifier||(0,ak.log)(`Notifier is not present on AuthorizationRequest handler.
          No delivery of result will be possible`),this.completeAuthorizationRequest().then(function(r){r||(0,ak.log)("No result is available yet."),r&&t.notifier&&t.notifier.onAuthorizationComplete(r.request,r.response,r.error)})},e.prototype.setAuthorizationNotifier=function(t){return this.notifier=t,this},e}();tu.AuthorizationRequestHandler=_0e});var uk=L(D0=>{"use strict";p();y();Object.defineProperty(D0,"__esModule",{value:!0});D0.AuthorizationError=D0.AuthorizationResponse=void 0;var B0e=function(){function e(t){this.code=t.code,this.state=t.state}return e.prototype.toJson=function(){return{code:this.code,state:this.state}},e}();D0.AuthorizationResponse=B0e;var C0e=function(){function e(t){this.error=t.error,this.errorDescription=t.error_description,this.errorUri=t.error_uri,this.state=t.state}return e.prototype.toJson=function(){return{error:this.error,error_description:this.errorDescription,error_uri:this.errorUri,state:this.state}},e}();D0.AuthorizationError=C0e});var IA=L(as=>{"use strict";p();y();var lk=as&&as.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(as,"__esModule",{value:!0});as.TestRequestor=as.FetchRequestor=as.JQueryRequestor=as.Requestor=void 0;var fk=U0(),EA=function(){function e(){}return e}();as.Requestor=EA;var M0e=function(e){lk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.xhr=function(r){var n=$.ajax(r);return new Promise(function(i,o){n.then(function(s,a,c){i(s)},function(s,a,c){o(new fk.AppAuthError(c))})})},t}(EA);as.JQueryRequestor=M0e;var R0e=function(e){lk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.xhr=function(r){if(!r.url)return Promise.reject(new fk.AppAuthError("A URL must be provided."));var n=new URL(r.url),i={};if(i.method=r.method,i.mode="cors",r.data)if(r.method&&r.method.toUpperCase()==="POST")i.body=r.data;else{var o=new URLSearchParams(r.data);o.forEach(function(c,u){n.searchParams.append(u,c)})}if(i.headers={},r.headers)for(var s in r.headers)r.headers.hasOwnProperty(s)&&(i.headers[s]=r.headers[s]);var a=r.dataType&&r.dataType.toLowerCase()==="json";return a&&(i.headers.Accept="application/json, text/javascript, */*; q=0.01"),fetch(n.toString(),i).then(function(c){if(c.status>=200&&c.status<300){var u=c.headers.get("content-type");return a||u&&u.indexOf("application/json")!==-1?c.json():c.text()}else return Promise.reject(new fk.AppAuthError(c.status.toString(),c.statusText))})},t}(EA);as.FetchRequestor=R0e;var O0e=function(e){lk(t,e);function t(r){var n=e.call(this)||this;return n.promise=r,n}return t.prototype.xhr=function(r){return this.promise},t}(EA);as.TestRequestor=O0e});var BK=L(kA=>{"use strict";p();y();Object.defineProperty(kA,"__esModule",{value:!0});kA.AuthorizationServiceConfiguration=void 0;var N0e=IA(),U0e=".well-known",D0e="openid-configuration",L0e=function(){function e(t){this.authorizationEndpoint=t.authorization_endpoint,this.tokenEndpoint=t.token_endpoint,this.revocationEndpoint=t.revocation_endpoint,this.userInfoEndpoint=t.userinfo_endpoint,this.endSessionEndpoint=t.end_session_endpoint}return e.prototype.toJson=function(){return{authorization_endpoint:this.authorizationEndpoint,token_endpoint:this.tokenEndpoint,revocation_endpoint:this.revocationEndpoint,end_session_endpoint:this.endSessionEndpoint,userinfo_endpoint:this.userInfoEndpoint}},e.fetchFromIssuer=function(t,r){var n="".concat(t,"/").concat(U0e,"/").concat(D0e),i=r||new N0e.JQueryRequestor;return i.xhr({url:n,dataType:"json",method:"GET"}).then(function(o){return new e(o)})},e}();kA.AuthorizationServiceConfiguration=L0e});var PA=L(TA=>{"use strict";p();y();Object.defineProperty(TA,"__esModule",{value:!0});TA.BasicQueryStringUtils=void 0;var K0e=function(){function e(){}return e.prototype.parse=function(t,r){return r?this.parseQueryString(t.hash):this.parseQueryString(t.search)},e.prototype.parseQueryString=function(t){var r={};t=t.trim().replace(/^(\?|#|&)/,"");for(var n=t.split("&"),i=0;i<n.length;i+=1){var o=n[i],s=o.split("=");if(s.length>=2){var a=decodeURIComponent(s.shift()),c=s.length>0?s.join("="):null;c&&(r[a]=decodeURIComponent(c))}}return r},e.prototype.stringify=function(t){var r=[];for(var n in t)t.hasOwnProperty(n)&&t[n]&&r.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t[n])));return r.join("&")},e}();TA.BasicQueryStringUtils=K0e});var dk=L(Df=>{"use strict";p();y();var F0e=Df&&Df.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Df,"__esModule",{value:!0});Df.LocalStorageBackend=Df.StorageBackend=void 0;var CK=function(){function e(){}return e}();Df.StorageBackend=CK;var V0e=function(e){F0e(t,e);function t(r){var n=e.call(this)||this;return n.storage=r||self.localStorage,n}return t.prototype.getItem=function(r){var n=this;return new Promise(function(i,o){var s=n.storage.getItem(r);i(s||null)})},t.prototype.removeItem=function(r){var n=this;return new Promise(function(i,o){n.storage.removeItem(r),i()})},t.prototype.clear=function(){var r=this;return new Promise(function(n,i){r.storage.clear(),n()})},t.prototype.setItem=function(r,n){var i=this;return new Promise(function(o,s){i.storage.setItem(r,n),o()})},t}(CK);Df.LocalStorageBackend=V0e});var OK=L(L0=>{"use strict";p();y();var q0e=L0&&L0.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(L0,"__esModule",{value:!0});L0.RedirectRequestHandler=void 0;var H0e=sk(),W0e=ck(),MK=uk(),z0e=vA(),_A=wg(),j0e=PA(),G0e=dk(),hk=function(e){return"".concat(e,"_appauth_authorization_request")},RK=function(e){return"".concat(e,"_appauth_authorization_service_configuration")},pk="appauth_current_authorization_request",$0e=function(e){q0e(t,e);function t(r,n,i,o){r===void 0&&(r=new G0e.LocalStorageBackend),n===void 0&&(n=new j0e.BasicQueryStringUtils),i===void 0&&(i=self.location),o===void 0&&(o=new z0e.DefaultCrypto);var s=e.call(this,n,o)||this;return s.storageBackend=r,s.locationLike=i,s}return t.prototype.performAuthorizationRequest=function(r,n){var i=this,o=this.crypto.generateRandom(10),s=Promise.all([this.storageBackend.setItem(pk,o),n.toJson().then(function(a){return i.storageBackend.setItem(hk(o),JSON.stringify(a))}),this.storageBackend.setItem(RK(o),JSON.stringify(r.toJson()))]);s.then(function(){var a=i.buildRequestUrl(r,n);(0,_A.log)("Making a request to ",n,a),i.locationLike.assign(a)})},t.prototype.completeAuthorizationRequest=function(){var r=this;return this.storageBackend.getItem(pk).then(function(n){return n?r.storageBackend.getItem(hk(n)).then(function(i){return JSON.parse(i)}).then(function(i){return new H0e.AuthorizationRequest(i)}).then(function(i){var o="".concat(r.locationLike.origin).concat(r.locationLike.pathname),s=r.utils.parse(r.locationLike,!0),a=s.state,c=s.code,u=s.error;(0,_A.log)("Potential authorization request ",o,s,a,c,u);var h=a===i.state,l=null,g=null;if(h){if(u){var x=s.error_uri,A=s.error_description;g=new MK.AuthorizationError({error:u,error_description:A,error_uri:x,state:a})}else l=new MK.AuthorizationResponse({code:c,state:a});return Promise.all([r.storageBackend.removeItem(pk),r.storageBackend.removeItem(hk(n)),r.storageBackend.removeItem(RK(n))]).then(function(){return(0,_A.log)("Delivering authorization response"),{request:i,response:l,error:g}})}else return(0,_A.log)("Mismatched request (state and request_uri) dont match."),Promise.resolve(null)}):null})},t}(W0e.AuthorizationRequestHandler);L0.RedirectRequestHandler=$0e});var NK=L(BA=>{"use strict";p();y();Object.defineProperty(BA,"__esModule",{value:!0});BA.RevokeTokenRequest=void 0;var Y0e=function(){function e(t){this.token=t.token,this.tokenTypeHint=t.token_type_hint,this.clientId=t.client_id,this.clientSecret=t.client_secret}return e.prototype.toJson=function(){var t={token:this.token};return this.tokenTypeHint&&(t.token_type_hint=this.tokenTypeHint),this.clientId&&(t.client_id=this.clientId),this.clientSecret&&(t.client_secret=this.clientSecret),t},e.prototype.toStringMap=function(){var t=this.toJson();return t},e}();BA.RevokeTokenRequest=Y0e});var UK=L(Lf=>{"use strict";p();y();Object.defineProperty(Lf,"__esModule",{value:!0});Lf.TokenRequest=Lf.GRANT_TYPE_REFRESH_TOKEN=Lf.GRANT_TYPE_AUTHORIZATION_CODE=void 0;Lf.GRANT_TYPE_AUTHORIZATION_CODE="authorization_code";Lf.GRANT_TYPE_REFRESH_TOKEN="refresh_token";var J0e=function(){function e(t){this.clientId=t.client_id,this.redirectUri=t.redirect_uri,this.grantType=t.grant_type,this.code=t.code,this.refreshToken=t.refresh_token,this.extras=t.extras}return e.prototype.toJson=function(){return{grant_type:this.grantType,code:this.code,refresh_token:this.refreshToken,redirect_uri:this.redirectUri,client_id:this.clientId,extras:this.extras}},e.prototype.toStringMap=function(){var t={grant_type:this.grantType,client_id:this.clientId,redirect_uri:this.redirectUri};if(this.code&&(t.code=this.code),this.refreshToken&&(t.refresh_token=this.refreshToken),this.extras)for(var r in this.extras)this.extras.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=this.extras[r]);return t},e}();Lf.TokenRequest=J0e});var yk=L(Ga=>{"use strict";p();y();Object.defineProperty(Ga,"__esModule",{value:!0});Ga.TokenError=Ga.TokenResponse=Ga.nowInSeconds=void 0;var Z0e=10*60*-1,Q0e=function(){return Math.round(new Date().getTime()/1e3)};Ga.nowInSeconds=Q0e;var X0e=function(){function e(t){this.accessToken=t.access_token,this.tokenType=t.token_type||"bearer",t.expires_in&&(this.expiresIn=parseInt(t.expires_in,10)),this.refreshToken=t.refresh_token,this.scope=t.scope,this.idToken=t.id_token,this.issuedAt=t.issued_at||(0,Ga.nowInSeconds)()}return e.prototype.toJson=function(){var t;return{access_token:this.accessToken,id_token:this.idToken,refresh_token:this.refreshToken,scope:this.scope,token_type:this.tokenType,issued_at:this.issuedAt,expires_in:(t=this.expiresIn)===null||t===void 0?void 0:t.toString()}},e.prototype.isValid=function(t){if(t===void 0&&(t=Z0e),this.expiresIn){var r=(0,Ga.nowInSeconds)();return r<this.issuedAt+this.expiresIn+t}else return!0},e}();Ga.TokenResponse=X0e;var epe=function(){function e(t){this.error=t.error,this.errorDescription=t.error_description,this.errorUri=t.error_uri}return e.prototype.toJson=function(){return{error:this.error,error_description:this.errorDescription,error_uri:this.errorUri}},e}();Ga.TokenError=epe});var LK=L(CA=>{"use strict";p();y();Object.defineProperty(CA,"__esModule",{value:!0});CA.BaseTokenRequestHandler=void 0;var tpe=U0(),rpe=PA(),DK=yk(),npe=IA(),ipe=function(){function e(t,r){t===void 0&&(t=new npe.JQueryRequestor),r===void 0&&(r=new rpe.BasicQueryStringUtils),this.requestor=t,this.utils=r}return e.prototype.isTokenResponse=function(t){return t.error===void 0},e.prototype.performRevokeTokenRequest=function(t,r){var n=this.requestor.xhr({url:t.revocationEndpoint,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.utils.stringify(r.toStringMap())});return n.then(function(i){return!0})},e.prototype.performTokenRequest=function(t,r){var n=this,i=this.requestor.xhr({url:t.tokenEndpoint,method:"POST",dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.utils.stringify(r.toStringMap())});return i.then(function(o){return n.isTokenResponse(o)?new DK.TokenResponse(o):Promise.reject(new tpe.AppAuthError(o.error,new DK.TokenError(o)))})},e}();CA.BaseTokenRequestHandler=ipe});var FK=L(KK=>{"use strict";p();y();Object.defineProperty(KK,"__esModule",{value:!0})});var mk=L(Dr=>{"use strict";p();y();var ope=Dr&&Dr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ni=Dr&&Dr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&ope(t,e,r)};Object.defineProperty(Dr,"__esModule",{value:!0});ni(sk(),Dr);ni(ck(),Dr);ni(uk(),Dr);ni(BK(),Dr);ni(vA(),Dr);ni(U0(),Dr);ni(nk(),Dr);ni(wg(),Dr);ni(PA(),Dr);ni(OK(),Dr);ni(NK(),Dr);ni(dk(),Dr);ni(UK(),Dr);ni(LK(),Dr);ni(yk(),Dr);ni(FK(),Dr);ni(IA(),Dr)});var DV=L((Wg,ip)=>{p();y();var Pme=200,aV="__lodash_hash_undefined__",cV=9007199254740991,AT="[object Arguments]",_me="[object Array]",uV="[object Boolean]",fV="[object Date]",Bme="[object Error]",ST="[object Function]",lV="[object GeneratorFunction]",JA="[object Map]",dV="[object Number]",ET="[object Object]",JF="[object Promise]",hV="[object RegExp]",ZA="[object Set]",pV="[object String]",yV="[object Symbol]",mT="[object WeakMap]",mV="[object ArrayBuffer]",QA="[object DataView]",gV="[object Float32Array]",bV="[object Float64Array]",xV="[object Int8Array]",wV="[object Int16Array]",vV="[object Int32Array]",AV="[object Uint8Array]",SV="[object Uint8ClampedArray]",EV="[object Uint16Array]",IV="[object Uint32Array]",Cme=/[\\^$.*+?()[\]{}|]/g,Mme=/\w*$/,Rme=/^\[object .+?Constructor\]$/,Ome=/^(?:0|[1-9]\d*)$/,cr={};cr[AT]=cr[_me]=cr[mV]=cr[QA]=cr[uV]=cr[fV]=cr[gV]=cr[bV]=cr[xV]=cr[wV]=cr[vV]=cr[JA]=cr[dV]=cr[ET]=cr[hV]=cr[ZA]=cr[pV]=cr[yV]=cr[AV]=cr[SV]=cr[EV]=cr[IV]=!0;cr[Bme]=cr[ST]=cr[mT]=!1;var Nme=typeof self=="object"&&self&&self.Object===Object&&self,Ume=typeof self=="object"&&self&&self.Object===Object&&self,su=Nme||Ume||Function("return this")(),kV=typeof Wg=="object"&&Wg&&!Wg.nodeType&&Wg,ZF=kV&&typeof ip=="object"&&ip&&!ip.nodeType&&ip,Dme=ZF&&ZF.exports===kV;function Lme(e,t){return e.set(t[0],t[1]),e}function Kme(e,t){return e.add(t),e}function Fme(e,t){for(var r=-1,n=e?e.length:0;++r<n&&t(e[r],r,e)!==!1;);return e}function Vme(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function TV(e,t,r,n){var i=-1,o=e?e.length:0;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function qme(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Hme(e,t){return e?.[t]}function PV(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function QF(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}function IT(e,t){return function(r){return e(t(r))}}function XF(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Wme=Array.prototype,zme=Function.prototype,XA=Object.prototype,yT=su["__core-js_shared__"],eV=function(){var e=/[^.]+$/.exec(yT&&yT.keys&&yT.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),_V=zme.toString,Wf=XA.hasOwnProperty,e2=XA.toString,jme=RegExp("^"+_V.call(Wf).replace(Cme,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tV=Dme?su.Buffer:void 0,rV=su.Symbol,nV=su.Uint8Array,Gme=IT(Object.getPrototypeOf,Object),$me=Object.create,Yme=XA.propertyIsEnumerable,Jme=Wme.splice,iV=Object.getOwnPropertySymbols,Zme=tV?tV.isBuffer:void 0,Qme=IT(Object.keys,Object),gT=ap(su,"DataView"),zg=ap(su,"Map"),bT=ap(su,"Promise"),xT=ap(su,"Set"),wT=ap(su,"WeakMap"),jg=ap(Object,"create"),Xme=Pd(gT),ege=Pd(zg),tge=Pd(bT),rge=Pd(xT),nge=Pd(wT),oV=rV?rV.prototype:void 0,sV=oV?oV.valueOf:void 0;function Td(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ige(){this.__data__=jg?jg(null):{}}function oge(e){return this.has(e)&&delete this.__data__[e]}function sge(e){var t=this.__data__;if(jg){var r=t[e];return r===aV?void 0:r}return Wf.call(t,e)?t[e]:void 0}function age(e){var t=this.__data__;return jg?t[e]!==void 0:Wf.call(t,e)}function cge(e,t){var r=this.__data__;return r[e]=jg&&t===void 0?aV:t,this}Td.prototype.clear=ige;Td.prototype.delete=oge;Td.prototype.get=sge;Td.prototype.has=age;Td.prototype.set=cge;function au(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function uge(){this.__data__=[]}function fge(e){var t=this.__data__,r=t2(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Jme.call(t,r,1),!0}function lge(e){var t=this.__data__,r=t2(t,e);return r<0?void 0:t[r][1]}function dge(e){return t2(this.__data__,e)>-1}function hge(e,t){var r=this.__data__,n=t2(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}au.prototype.clear=uge;au.prototype.delete=fge;au.prototype.get=lge;au.prototype.has=dge;au.prototype.set=hge;function op(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function pge(){this.__data__={hash:new Td,map:new(zg||au),string:new Td}}function yge(e){return r2(this,e).delete(e)}function mge(e){return r2(this,e).get(e)}function gge(e){return r2(this,e).has(e)}function bge(e,t){return r2(this,e).set(e,t),this}op.prototype.clear=pge;op.prototype.delete=yge;op.prototype.get=mge;op.prototype.has=gge;op.prototype.set=bge;function sp(e){this.__data__=new au(e)}function xge(){this.__data__=new au}function wge(e){return this.__data__.delete(e)}function vge(e){return this.__data__.get(e)}function Age(e){return this.__data__.has(e)}function Sge(e,t){var r=this.__data__;if(r instanceof au){var n=r.__data__;if(!zg||n.length<Pme-1)return n.push([e,t]),this;r=this.__data__=new op(n)}return r.set(e,t),this}sp.prototype.clear=xge;sp.prototype.delete=wge;sp.prototype.get=vge;sp.prototype.has=Age;sp.prototype.set=Sge;function Ege(e,t){var r=TT(e)||$ge(e)?qme(e.length,String):[],n=r.length,i=!!n;for(var o in e)(t||Wf.call(e,o))&&!(i&&(o=="length"||Wge(o,n)))&&r.push(o);return r}function BV(e,t,r){var n=e[t];(!(Wf.call(e,t)&&OV(n,r))||r===void 0&&!(t in e))&&(e[t]=r)}function t2(e,t){for(var r=e.length;r--;)if(OV(e[r][0],t))return r;return-1}function Ige(e,t){return e&&CV(t,PT(t),e)}function vT(e,t,r,n,i,o,s){var a;if(n&&(a=o?n(e,i,o,s):n(e)),a!==void 0)return a;if(!n2(e))return e;var c=TT(e);if(c){if(a=Vge(e),!t)return Lge(e,a)}else{var u=kd(e),h=u==ST||u==lV;if(Jge(e))return Cge(e,t);if(u==ET||u==AT||h&&!o){if(PV(e))return o?e:{};if(a=qge(h?{}:e),!t)return Kge(e,Ige(a,e))}else{if(!cr[u])return o?e:{};a=Hge(e,u,vT,t)}}s||(s=new sp);var l=s.get(e);if(l)return l;if(s.set(e,a),!c)var g=r?Fge(e):PT(e);return Fme(g||e,function(x,A){g&&(A=x,x=e[A]),BV(a,A,vT(x,t,r,n,A,e,s))}),a}function kge(e){return n2(e)?$me(e):{}}function Tge(e,t,r){var n=t(e);return TT(e)?n:Vme(n,r(e))}function Pge(e){return e2.call(e)}function _ge(e){if(!n2(e)||jge(e))return!1;var t=UV(e)||PV(e)?jme:Rme;return t.test(Pd(e))}function Bge(e){if(!RV(e))return Qme(e);var t=[];for(var r in Object(e))Wf.call(e,r)&&r!="constructor"&&t.push(r);return t}function Cge(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}function kT(e){var t=new e.constructor(e.byteLength);return new nV(t).set(new nV(e)),t}function Mge(e,t){var r=t?kT(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function Rge(e,t,r){var n=t?r(QF(e),!0):QF(e);return TV(n,Lme,new e.constructor)}function Oge(e){var t=new e.constructor(e.source,Mme.exec(e));return t.lastIndex=e.lastIndex,t}function Nge(e,t,r){var n=t?r(XF(e),!0):XF(e);return TV(n,Kme,new e.constructor)}function Uge(e){return sV?Object(sV.call(e)):{}}function Dge(e,t){var r=t?kT(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Lge(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function CV(e,t,r,n){r||(r={});for(var i=-1,o=t.length;++i<o;){var s=t[i],a=n?n(r[s],e[s],s,r,e):void 0;BV(r,s,a===void 0?e[s]:a)}return r}function Kge(e,t){return CV(e,MV(e),t)}function Fge(e){return Tge(e,PT,MV)}function r2(e,t){var r=e.__data__;return zge(t)?r[typeof t=="string"?"string":"hash"]:r.map}function ap(e,t){var r=Hme(e,t);return _ge(r)?r:void 0}var MV=iV?IT(iV,Object):Xge,kd=Pge;(gT&&kd(new gT(new ArrayBuffer(1)))!=QA||zg&&kd(new zg)!=JA||bT&&kd(bT.resolve())!=JF||xT&&kd(new xT)!=ZA||wT&&kd(new wT)!=mT)&&(kd=function(e){var t=e2.call(e),r=t==ET?e.constructor:void 0,n=r?Pd(r):void 0;if(n)switch(n){case Xme:return QA;case ege:return JA;case tge:return JF;case rge:return ZA;case nge:return mT}return t});function Vge(e){var t=e.length,r=e.constructor(t);return t&&typeof e[0]=="string"&&Wf.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function qge(e){return typeof e.constructor=="function"&&!RV(e)?kge(Gme(e)):{}}function Hge(e,t,r,n){var i=e.constructor;switch(t){case mV:return kT(e);case uV:case fV:return new i(+e);case QA:return Mge(e,n);case gV:case bV:case xV:case wV:case vV:case AV:case SV:case EV:case IV:return Dge(e,n);case JA:return Rge(e,n,r);case dV:case pV:return new i(e);case hV:return Oge(e);case ZA:return Nge(e,n,r);case yV:return Uge(e)}}function Wge(e,t){return t=t??cV,!!t&&(typeof e=="number"||Ome.test(e))&&e>-1&&e%1==0&&e<t}function zge(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function jge(e){return!!eV&&eV in e}function RV(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||XA;return e===r}function Pd(e){if(e!=null){try{return _V.call(e)}catch{}try{return e+""}catch{}}return""}function Gge(e){return vT(e,!0,!0)}function OV(e,t){return e===t||e!==e&&t!==t}function $ge(e){return Yge(e)&&Wf.call(e,"callee")&&(!Yme.call(e,"callee")||e2.call(e)==AT)}var TT=Array.isArray;function NV(e){return e!=null&&Zge(e.length)&&!UV(e)}function Yge(e){return Qge(e)&&NV(e)}var Jge=Zme||ebe;function UV(e){var t=n2(e)?e2.call(e):"";return t==ST||t==lV}function Zge(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=cV}function n2(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Qge(e){return!!e&&typeof e=="object"}function PT(e){return NV(e)?Ege(e):Bge(e)}function Xge(){return[]}function ebe(){return!1}ip.exports=Gge});var gH=L(($Qe,mH)=>{p();y();var Ft={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function fs(e,t){if(!e)throw new Error(t)}function Mt(e,t,r){if(fs(t instanceof Uint8Array,`Expected ${e} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){let n=r.join(", "),i=`Expected ${e} to be an Uint8Array with length [${n}]`;fs(r.includes(t.length),i)}else{let n=`Expected ${e} to be an Uint8Array with length ${r}`;fs(t.length===r,n)}}function Dd(e){fs(vp(e)==="Boolean","Expected compressed to be a Boolean")}function aa(e=r=>new Uint8Array(r),t){return typeof e=="function"&&(e=e(t)),Mt("output",e,t),e}function vp(e){return Object.prototype.toString.call(e).slice(8,-1)}mH.exports=e=>({contextRandomize(t){switch(fs(t===null||t instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),t!==null&&Mt("seed",t,32),e.contextRandomize(t)){case 1:throw new Error(Ft.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(t){return Mt("private key",t,32),e.privateKeyVerify(t)===0},privateKeyNegate(t){switch(Mt("private key",t,32),e.privateKeyNegate(t)){case 0:return t;case 1:throw new Error(Ft.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(t,r){switch(Mt("private key",t,32),Mt("tweak",r,32),e.privateKeyTweakAdd(t,r)){case 0:return t;case 1:throw new Error(Ft.TWEAK_ADD)}},privateKeyTweakMul(t,r){switch(Mt("private key",t,32),Mt("tweak",r,32),e.privateKeyTweakMul(t,r)){case 0:return t;case 1:throw new Error(Ft.TWEAK_MUL)}},publicKeyVerify(t){return Mt("public key",t,[33,65]),e.publicKeyVerify(t)===0},publicKeyCreate(t,r=!0,n){switch(Mt("private key",t,32),Dd(r),n=aa(n,r?33:65),e.publicKeyCreate(n,t)){case 0:return n;case 1:throw new Error(Ft.SECKEY_INVALID);case 2:throw new Error(Ft.PUBKEY_SERIALIZE)}},publicKeyConvert(t,r=!0,n){switch(Mt("public key",t,[33,65]),Dd(r),n=aa(n,r?33:65),e.publicKeyConvert(n,t)){case 0:return n;case 1:throw new Error(Ft.PUBKEY_PARSE);case 2:throw new Error(Ft.PUBKEY_SERIALIZE)}},publicKeyNegate(t,r=!0,n){switch(Mt("public key",t,[33,65]),Dd(r),n=aa(n,r?33:65),e.publicKeyNegate(n,t)){case 0:return n;case 1:throw new Error(Ft.PUBKEY_PARSE);case 2:throw new Error(Ft.IMPOSSIBLE_CASE);case 3:throw new Error(Ft.PUBKEY_SERIALIZE)}},publicKeyCombine(t,r=!0,n){fs(Array.isArray(t),"Expected public keys to be an Array"),fs(t.length>0,"Expected public keys array will have more than zero items");for(let i of t)Mt("public key",i,[33,65]);switch(Dd(r),n=aa(n,r?33:65),e.publicKeyCombine(n,t)){case 0:return n;case 1:throw new Error(Ft.PUBKEY_PARSE);case 2:throw new Error(Ft.PUBKEY_COMBINE);case 3:throw new Error(Ft.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(t,r,n=!0,i){switch(Mt("public key",t,[33,65]),Mt("tweak",r,32),Dd(n),i=aa(i,n?33:65),e.publicKeyTweakAdd(i,t,r)){case 0:return i;case 1:throw new Error(Ft.PUBKEY_PARSE);case 2:throw new Error(Ft.TWEAK_ADD)}},publicKeyTweakMul(t,r,n=!0,i){switch(Mt("public key",t,[33,65]),Mt("tweak",r,32),Dd(n),i=aa(i,n?33:65),e.publicKeyTweakMul(i,t,r)){case 0:return i;case 1:throw new Error(Ft.PUBKEY_PARSE);case 2:throw new Error(Ft.TWEAK_MUL)}},signatureNormalize(t){switch(Mt("signature",t,64),e.signatureNormalize(t)){case 0:return t;case 1:throw new Error(Ft.SIG_PARSE)}},signatureExport(t,r){Mt("signature",t,64),r=aa(r,72);let n={output:r,outputlen:72};switch(e.signatureExport(n,t)){case 0:return r.slice(0,n.outputlen);case 1:throw new Error(Ft.SIG_PARSE);case 2:throw new Error(Ft.IMPOSSIBLE_CASE)}},signatureImport(t,r){switch(Mt("signature",t),r=aa(r,64),e.signatureImport(r,t)){case 0:return r;case 1:throw new Error(Ft.SIG_PARSE);case 2:throw new Error(Ft.IMPOSSIBLE_CASE)}},ecdsaSign(t,r,n={},i){Mt("message",t,32),Mt("private key",r,32),fs(vp(n)==="Object","Expected options to be an Object"),n.data!==void 0&&Mt("options.data",n.data),n.noncefn!==void 0&&fs(vp(n.noncefn)==="Function","Expected options.noncefn to be a Function"),i=aa(i,64);let o={signature:i,recid:null};switch(e.ecdsaSign(o,t,r,n.data,n.noncefn)){case 0:return o;case 1:throw new Error(Ft.SIGN);case 2:throw new Error(Ft.IMPOSSIBLE_CASE)}},ecdsaVerify(t,r,n){switch(Mt("signature",t,64),Mt("message",r,32),Mt("public key",n,[33,65]),e.ecdsaVerify(t,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(Ft.SIG_PARSE);case 2:throw new Error(Ft.PUBKEY_PARSE)}},ecdsaRecover(t,r,n,i=!0,o){switch(Mt("signature",t,64),fs(vp(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),Mt("message",n,32),Dd(i),o=aa(o,i?33:65),e.ecdsaRecover(o,t,r,n)){case 0:return o;case 1:throw new Error(Ft.SIG_PARSE);case 2:throw new Error(Ft.RECOVER);case 3:throw new Error(Ft.IMPOSSIBLE_CASE)}},ecdh(t,r,n={},i){switch(Mt("public key",t,[33,65]),Mt("private key",r,32),fs(vp(n)==="Object","Expected options to be an Object"),n.data!==void 0&&Mt("options.data",n.data),n.hashfn!==void 0?(fs(vp(n.hashfn)==="Function","Expected options.hashfn to be a Function"),n.xbuf!==void 0&&Mt("options.xbuf",n.xbuf,32),n.ybuf!==void 0&&Mt("options.ybuf",n.ybuf,32),Mt("output",i)):i=aa(i,32),e.ecdh(i,t,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return i;case 1:throw new Error(Ft.PUBKEY_PARSE);case 2:throw new Error(Ft.ECDH)}}})});var xH=L((ZQe,bH)=>{p();y();var bwe=J_().ec,ec=new bwe("secp256k1"),_t=ec.curve,rr=_t.n.constructor;function xwe(e,t){let r=new rr(t);if(r.cmp(_t.p)>=0)return null;r=r.toRed(_t.red);let n=r.redSqr().redIMul(r).redIAdd(_t.b).redSqrt();return e===3!==n.isOdd()&&(n=n.redNeg()),ec.keyPair({pub:{x:r,y:n}})}function wwe(e,t,r){let n=new rr(t),i=new rr(r);if(n.cmp(_t.p)>=0||i.cmp(_t.p)>=0||(n=n.toRed(_t.red),i=i.toRed(_t.red),(e===6||e===7)&&i.isOdd()!==(e===7)))return null;let o=n.redSqr().redIMul(n);return i.redSqr().redISub(o.redIAdd(_t.b)).isZero()?ec.keyPair({pub:{x:n,y:i}}):null}function Qf(e){let t=e[0];switch(t){case 2:case 3:return e.length!==33?null:xwe(t,e.subarray(1,33));case 4:case 6:case 7:return e.length!==65?null:wwe(t,e.subarray(1,33),e.subarray(33,65));default:return null}}function Ld(e,t){let r=t.encode(null,e.length===33);for(let n=0;n<e.length;++n)e[n]=r[n]}bH.exports={contextRandomize(){return 0},privateKeyVerify(e){let t=new rr(e);return t.cmp(_t.n)<0&&!t.isZero()?0:1},privateKeyNegate(e){let t=new rr(e),r=_t.n.sub(t).umod(_t.n).toArrayLike(Uint8Array,"be",32);return e.set(r),0},privateKeyTweakAdd(e,t){let r=new rr(t);if(r.cmp(_t.n)>=0||(r.iadd(new rr(e)),r.cmp(_t.n)>=0&&r.isub(_t.n),r.isZero()))return 1;let n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},privateKeyTweakMul(e,t){let r=new rr(t);if(r.cmp(_t.n)>=0||r.isZero())return 1;r.imul(new rr(e)),r.cmp(_t.n)>=0&&(r=r.umod(_t.n));let n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},publicKeyVerify(e){return Qf(e)===null?1:0},publicKeyCreate(e,t){let r=new rr(t);if(r.cmp(_t.n)>=0||r.isZero())return 1;let n=ec.keyFromPrivate(t).getPublic();return Ld(e,n),0},publicKeyConvert(e,t){let r=Qf(t);if(r===null)return 1;let n=r.getPublic();return Ld(e,n),0},publicKeyNegate(e,t){let r=Qf(t);if(r===null)return 1;let n=r.getPublic();return n.y=n.y.redNeg(),Ld(e,n),0},publicKeyCombine(e,t){let r=new Array(t.length);for(let i=0;i<t.length;++i)if(r[i]=Qf(t[i]),r[i]===null)return 1;let n=r[0].getPublic();for(let i=1;i<r.length;++i)n=n.add(r[i].pub);return n.isInfinity()?2:(Ld(e,n),0)},publicKeyTweakAdd(e,t,r){let n=Qf(t);if(n===null)return 1;if(r=new rr(r),r.cmp(_t.n)>=0)return 2;let i=n.getPublic().add(_t.g.mul(r));return i.isInfinity()?2:(Ld(e,i),0)},publicKeyTweakMul(e,t,r){let n=Qf(t);if(n===null)return 1;if(r=new rr(r),r.cmp(_t.n)>=0||r.isZero())return 2;let i=n.getPublic().mul(r);return Ld(e,i),0},signatureNormalize(e){let t=new rr(e.subarray(0,32)),r=new rr(e.subarray(32,64));return t.cmp(_t.n)>=0||r.cmp(_t.n)>=0?1:(r.cmp(ec.nh)===1&&e.set(_t.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(e,t){let r=t.subarray(0,32),n=t.subarray(32,64);if(new rr(r).cmp(_t.n)>=0||new rr(n).cmp(_t.n)>=0)return 1;let{output:i}=e,o=i.subarray(4,37);o[0]=0,o.set(r,1);let s=33,a=0;for(;s>1&&o[a]===0&&!(o[a+1]&128);--s,++a);if(o=o.subarray(a),o[0]&128||s>1&&o[0]===0&&!(o[1]&128))return 1;let c=i.subarray(39,72);c[0]=0,c.set(n,1);let u=33,h=0;for(;u>1&&c[h]===0&&!(c[h+1]&128);--u,++h);return c=c.subarray(h),c[0]&128||u>1&&c[0]===0&&!(c[1]&128)?1:(e.outputlen=6+s+u,i[0]=48,i[1]=e.outputlen-2,i[2]=2,i[3]=o.length,i.set(o,4),i[4+s]=2,i[5+s]=c.length,i.set(c,6+s),0)},signatureImport(e,t){if(t.length<8||t.length>72||t[0]!==48||t[1]!==t.length-2||t[2]!==2)return 1;let r=t[3];if(r===0||5+r>=t.length||t[4+r]!==2)return 1;let n=t[5+r];if(n===0||6+r+n!==t.length||t[4]&128||r>1&&t[4]===0&&!(t[5]&128)||t[r+6]&128||n>1&&t[r+6]===0&&!(t[r+7]&128))return 1;let i=t.subarray(4,4+r);if(i.length===33&&i[0]===0&&(i=i.subarray(1)),i.length>32)return 1;let o=t.subarray(6+r);if(o.length===33&&o[0]===0&&(o=o.slice(1)),o.length>32)throw new Error("S length is too long");let s=new rr(i);s.cmp(_t.n)>=0&&(s=new rr(0));let a=new rr(t.subarray(6+r));return a.cmp(_t.n)>=0&&(a=new rr(0)),e.set(s.toArrayLike(Uint8Array,"be",32),0),e.set(a.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(e,t,r,n,i){if(i){let a=i;i=c=>{let u=a(t,r,null,n,c);if(!(u instanceof Uint8Array&&u.length===32))throw new Error("This is the way");return new rr(u)}}let o=new rr(r);if(o.cmp(_t.n)>=0||o.isZero())return 1;let s;try{s=ec.sign(t,r,{canonical:!0,k:i,pers:n})}catch{return 1}return e.signature.set(s.r.toArrayLike(Uint8Array,"be",32),0),e.signature.set(s.s.toArrayLike(Uint8Array,"be",32),32),e.recid=s.recoveryParam,0},ecdsaVerify(e,t,r){let n={r:e.subarray(0,32),s:e.subarray(32,64)},i=new rr(n.r),o=new rr(n.s);if(i.cmp(_t.n)>=0||o.cmp(_t.n)>=0)return 1;if(o.cmp(ec.nh)===1||i.isZero()||o.isZero())return 3;let s=Qf(r);if(s===null)return 2;let a=s.getPublic();return ec.verify(t,n,a)?0:3},ecdsaRecover(e,t,r,n){let i={r:t.slice(0,32),s:t.slice(32,64)},o=new rr(i.r),s=new rr(i.s);if(o.cmp(_t.n)>=0||s.cmp(_t.n)>=0)return 1;if(o.isZero()||s.isZero())return 2;let a;try{a=ec.recoverPubKey(n,i,r)}catch{return 2}return Ld(e,a),0},ecdh(e,t,r,n,i,o,s){let a=Qf(t);if(a===null)return 1;let c=new rr(r);if(c.cmp(_t.n)>=0||c.isZero())return 2;let u=a.getPublic().mul(c);if(i===void 0){let h=u.encode(null,!0),l=ec.hash().update(h).digest();for(let g=0;g<32;++g)e[g]=l[g]}else{o||(o=new Uint8Array(32));let h=u.getX().toArray("be",32);for(let A=0;A<32;++A)o[A]=h[A];s||(s=new Uint8Array(32));let l=u.getY().toArray("be",32);for(let A=0;A<32;++A)s[A]=l[A];let g=i(o,s,n);if(!(g instanceof Uint8Array&&g.length===e.length))return 2;e.set(g)}return 0}}});var _P=L((eXe,wH)=>{p();y();wH.exports=gH()(xH())});var AH=L(Y2=>{"use strict";p();y();Object.defineProperty(Y2,"__esModule",{value:!0});var vH=z_();function vwe(e){return new Promise(function(t,r){vH(e,function(n,i){if(n){r(n);return}t(i)})})}Y2.getRandomBytes=vwe;function Awe(e){return vH(e)}Y2.getRandomBytesSync=Awe});var kH=L(tc=>{"use strict";p();y();var Swe=tc&&tc.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},Ewe=tc&&tc.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(h){return c([u,h])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(h){u=[6,h],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};function Iwe(e){for(var t in e)tc.hasOwnProperty(t)||(tc[t]=e[t])}Object.defineProperty(tc,"__esModule",{value:!0});var SH=_P(),EH=AH(),IH=32;function kwe(){return Swe(this,void 0,void 0,function(){var e;return Ewe(this,function(t){switch(t.label){case 0:return[4,EH.getRandomBytes(IH)];case 1:return e=t.sent(),SH.privateKeyVerify(e)?[2,e]:[3,0];case 2:return[2]}})})}tc.createPrivateKey=kwe;function Twe(){for(;;){var e=EH.getRandomBytesSync(IH);if(SH.privateKeyVerify(e))return e}}tc.createPrivateKeySync=Twe;Iwe(_P())});var Kd=L((TH,BP)=>{p();y();(function(e,t){"use strict";function r(_,f){if(!_)throw new Error(f||"Assertion failed")}function n(_,f){_.super_=f;var m=function(){};m.prototype=f.prototype,_.prototype=new m,_.prototype.constructor=_}function i(_,f,m){if(i.isBN(_))return _;this.negative=0,this.words=null,this.length=0,this.red=null,_!==null&&((f==="le"||f==="be")&&(m=f,f=10),this._init(_||0,f||10,m||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof self<"u"&&typeof self.Buffer<"u"?o=self.Buffer:o=$_().Buffer}catch{}i.isBN=function(f){return f instanceof i?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===i.wordSize&&Array.isArray(f.words)},i.max=function(f,m){return f.cmp(m)>0?f:m},i.min=function(f,m){return f.cmp(m)<0?f:m},i.prototype._init=function(f,m,b){if(typeof f=="number")return this._initNumber(f,m,b);if(typeof f=="object")return this._initArray(f,m,b);m==="hex"&&(m=16),r(m===(m|0)&&m>=2&&m<=36),f=f.toString().replace(/\s+/g,"");var v=0;f[0]==="-"&&(v++,this.negative=1),v<f.length&&(m===16?this._parseHex(f,v,b):(this._parseBase(f,m,v),b==="le"&&this._initArray(this.toArray(),m,b)))},i.prototype._initNumber=function(f,m,b){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(r(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),m,b)},i.prototype._initArray=function(f,m,b){if(r(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var w,P,C=0;if(b==="be")for(v=f.length-1,w=0;v>=0;v-=3)P=f[v]|f[v-1]<<8|f[v-2]<<16,this.words[w]|=P<<C&67108863,this.words[w+1]=P>>>26-C&67108863,C+=24,C>=26&&(C-=26,w++);else if(b==="le")for(v=0,w=0;v<f.length;v+=3)P=f[v]|f[v+1]<<8|f[v+2]<<16,this.words[w]|=P<<C&67108863,this.words[w+1]=P>>>26-C&67108863,C+=24,C>=26&&(C-=26,w++);return this.strip()};function s(_,f){var m=_.charCodeAt(f);return m>=65&&m<=70?m-55:m>=97&&m<=102?m-87:m-48&15}function a(_,f,m){var b=s(_,m);return m-1>=f&&(b|=s(_,m-1)<<4),b}i.prototype._parseHex=function(f,m,b){this.length=Math.ceil((f.length-m)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var w=0,P=0,C;if(b==="be")for(v=f.length-1;v>=m;v-=2)C=a(f,m,v)<<w,this.words[P]|=C&67108863,w>=18?(w-=18,P+=1,this.words[P]|=C>>>26):w+=8;else{var k=f.length-m;for(v=k%2===0?m+1:m;v<f.length;v+=2)C=a(f,m,v)<<w,this.words[P]|=C&67108863,w>=18?(w-=18,P+=1,this.words[P]|=C>>>26):w+=8}this.strip()};function c(_,f,m,b){for(var v=0,w=Math.min(_.length,m),P=f;P<w;P++){var C=_.charCodeAt(P)-48;v*=b,C>=49?v+=C-49+10:C>=17?v+=C-17+10:v+=C}return v}i.prototype._parseBase=function(f,m,b){this.words=[0],this.length=1;for(var v=0,w=1;w<=67108863;w*=m)v++;v--,w=w/m|0;for(var P=f.length-b,C=P%v,k=Math.min(P,P-C)+b,d=0,S=b;S<k;S+=v)d=c(f,S,S+v,m),this.imuln(w),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(C!==0){var F=1;for(d=c(f,S,f.length,m),S=0;S<C;S++)F*=m;this.imuln(F),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},i.prototype.copy=function(f){f.words=new Array(this.length);for(var m=0;m<this.length;m++)f.words[m]=this.words[m];f.length=this.length,f.negative=this.negative,f.red=this.red},i.prototype.clone=function(){var f=new i(null);return this.copy(f),f},i.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(f,m){f=f||10,m=m|0||1;var b;if(f===16||f==="hex"){b="";for(var v=0,w=0,P=0;P<this.length;P++){var C=this.words[P],k=((C<<v|w)&16777215).toString(16);w=C>>>24-v&16777215,w!==0||P!==this.length-1?b=u[6-k.length]+k+b:b=k+b,v+=2,v>=26&&(v-=26,P--)}for(w!==0&&(b=w.toString(16)+b);b.length%m!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(f===(f|0)&&f>=2&&f<=36){var d=h[f],S=l[f];b="";var F=this.clone();for(F.negative=0;!F.isZero();){var U=F.modn(S).toString(f);F=F.idivn(S),F.isZero()?b=U+b:b=u[d-U.length]+U+b}for(this.isZero()&&(b="0"+b);b.length%m!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(f,m){return r(typeof o<"u"),this.toArrayLike(o,f,m)},i.prototype.toArray=function(f,m){return this.toArrayLike(Array,f,m)},i.prototype.toArrayLike=function(f,m,b){var v=this.byteLength(),w=b||Math.max(1,v);r(v<=w,"byte array longer than desired length"),r(w>0,"Requested array length <= 0"),this.strip();var P=m==="le",C=new f(w),k,d,S=this.clone();if(P){for(d=0;!S.isZero();d++)k=S.andln(255),S.iushrn(8),C[d]=k;for(;d<w;d++)C[d]=0}else{for(d=0;d<w-v;d++)C[d]=0;for(d=0;!S.isZero();d++)k=S.andln(255),S.iushrn(8),C[w-d-1]=k}return C},Math.clz32?i.prototype._countBits=function(f){return 32-Math.clz32(f)}:i.prototype._countBits=function(f){var m=f,b=0;return m>=4096&&(b+=13,m>>>=13),m>=64&&(b+=7,m>>>=7),m>=8&&(b+=4,m>>>=4),m>=2&&(b+=2,m>>>=2),b+m},i.prototype._zeroBits=function(f){if(f===0)return 26;var m=f,b=0;return m&8191||(b+=13,m>>>=13),m&127||(b+=7,m>>>=7),m&15||(b+=4,m>>>=4),m&3||(b+=2,m>>>=2),m&1||b++,b},i.prototype.bitLength=function(){var f=this.words[this.length-1],m=this._countBits(f);return(this.length-1)*26+m};function g(_){for(var f=new Array(_.bitLength()),m=0;m<f.length;m++){var b=m/26|0,v=m%26;f[m]=(_.words[b]&1<<v)>>>v}return f}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,m=0;m<this.length;m++){var b=this._zeroBits(this.words[m]);if(f+=b,b!==26)break}return f},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},i.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var m=0;m<f.length;m++)this.words[m]=this.words[m]|f.words[m];return this.strip()},i.prototype.ior=function(f){return r((this.negative|f.negative)===0),this.iuor(f)},i.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},i.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},i.prototype.iuand=function(f){var m;this.length>f.length?m=f:m=this;for(var b=0;b<m.length;b++)this.words[b]=this.words[b]&f.words[b];return this.length=m.length,this.strip()},i.prototype.iand=function(f){return r((this.negative|f.negative)===0),this.iuand(f)},i.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},i.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},i.prototype.iuxor=function(f){var m,b;this.length>f.length?(m=this,b=f):(m=f,b=this);for(var v=0;v<b.length;v++)this.words[v]=m.words[v]^b.words[v];if(this!==m)for(;v<m.length;v++)this.words[v]=m.words[v];return this.length=m.length,this.strip()},i.prototype.ixor=function(f){return r((this.negative|f.negative)===0),this.iuxor(f)},i.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},i.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},i.prototype.inotn=function(f){r(typeof f=="number"&&f>=0);var m=Math.ceil(f/26)|0,b=f%26;this._expand(m),b>0&&m--;for(var v=0;v<m;v++)this.words[v]=~this.words[v]&67108863;return b>0&&(this.words[v]=~this.words[v]&67108863>>26-b),this.strip()},i.prototype.notn=function(f){return this.clone().inotn(f)},i.prototype.setn=function(f,m){r(typeof f=="number"&&f>=0);var b=f/26|0,v=f%26;return this._expand(b+1),m?this.words[b]=this.words[b]|1<<v:this.words[b]=this.words[b]&~(1<<v),this.strip()},i.prototype.iadd=function(f){var m;if(this.negative!==0&&f.negative===0)return this.negative=0,m=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,m=this.isub(f),f.negative=1,m._normSign();var b,v;this.length>f.length?(b=this,v=f):(b=f,v=this);for(var w=0,P=0;P<v.length;P++)m=(b.words[P]|0)+(v.words[P]|0)+w,this.words[P]=m&67108863,w=m>>>26;for(;w!==0&&P<b.length;P++)m=(b.words[P]|0)+w,this.words[P]=m&67108863,w=m>>>26;if(this.length=b.length,w!==0)this.words[this.length]=w,this.length++;else if(b!==this)for(;P<b.length;P++)this.words[P]=b.words[P];return this},i.prototype.add=function(f){var m;return f.negative!==0&&this.negative===0?(f.negative=0,m=this.sub(f),f.negative^=1,m):f.negative===0&&this.negative!==0?(this.negative=0,m=f.sub(this),this.negative=1,m):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},i.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var m=this.iadd(f);return f.negative=1,m._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var b=this.cmp(f);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,w;b>0?(v=this,w=f):(v=f,w=this);for(var P=0,C=0;C<w.length;C++)m=(v.words[C]|0)-(w.words[C]|0)+P,P=m>>26,this.words[C]=m&67108863;for(;P!==0&&C<v.length;C++)m=(v.words[C]|0)+P,P=m>>26,this.words[C]=m&67108863;if(P===0&&C<v.length&&v!==this)for(;C<v.length;C++)this.words[C]=v.words[C];return this.length=Math.max(this.length,C),v!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(f){return this.clone().isub(f)};function x(_,f,m){m.negative=f.negative^_.negative;var b=_.length+f.length|0;m.length=b,b=b-1|0;var v=_.words[0]|0,w=f.words[0]|0,P=v*w,C=P&67108863,k=P/67108864|0;m.words[0]=C;for(var d=1;d<b;d++){for(var S=k>>>26,F=k&67108863,U=Math.min(d,f.length-1),D=Math.max(0,d-_.length+1);D<=U;D++){var Y=d-D|0;v=_.words[Y]|0,w=f.words[D]|0,P=v*w+F,S+=P/67108864|0,F=P&67108863}m.words[d]=F|0,k=S|0}return k!==0?m.words[d]=k|0:m.length--,m.strip()}var A=function(f,m,b){var v=f.words,w=m.words,P=b.words,C=0,k,d,S,F=v[0]|0,U=F&8191,D=F>>>13,Y=v[1]|0,j=Y&8191,ee=Y>>>13,le=v[2]|0,fe=le&8191,K=le>>>13,Z=v[3]|0,J=Z&8191,ne=Z>>>13,pe=v[4]|0,re=pe&8191,ce=pe>>>13,ut=v[5]|0,Ee=ut&8191,_e=ut>>>13,Do=v[6]|0,Oe=Do&8191,Be=Do>>>13,ga=v[7]|0,Ce=ga&8191,nt=ga>>>13,gu=v[8]|0,it=gu&8191,ot=gu>>>13,dc=v[9]|0,Ne=dc&8191,Ue=dc>>>13,hc=w[0]|0,De=hc&8191,Le=hc>>>13,pc=w[1]|0,Ke=pc&8191,Fe=pc>>>13,yc=w[2]|0,Ve=yc&8191,qe=yc>>>13,mc=w[3]|0,He=mc&8191,We=mc>>>13,gc=w[4]|0,ze=gc&8191,je=gc>>>13,bc=w[5]|0,Ge=bc&8191,$e=bc>>>13,xc=w[6]|0,Ye=xc&8191,Je=xc>>>13,wc=w[7]|0,Ze=wc&8191,Qe=wc>>>13,vc=w[8]|0,Xe=vc&8191,et=vc>>>13,Ac=w[9]|0,tt=Ac&8191,rt=Ac>>>13;b.negative=f.negative^m.negative,b.length=19,k=Math.imul(U,De),d=Math.imul(U,Le),d=d+Math.imul(D,De)|0,S=Math.imul(D,Le);var gs=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(gs>>>26)|0,gs&=67108863,k=Math.imul(j,De),d=Math.imul(j,Le),d=d+Math.imul(ee,De)|0,S=Math.imul(ee,Le),k=k+Math.imul(U,Ke)|0,d=d+Math.imul(U,Fe)|0,d=d+Math.imul(D,Ke)|0,S=S+Math.imul(D,Fe)|0;var bs=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(bs>>>26)|0,bs&=67108863,k=Math.imul(fe,De),d=Math.imul(fe,Le),d=d+Math.imul(K,De)|0,S=Math.imul(K,Le),k=k+Math.imul(j,Ke)|0,d=d+Math.imul(j,Fe)|0,d=d+Math.imul(ee,Ke)|0,S=S+Math.imul(ee,Fe)|0,k=k+Math.imul(U,Ve)|0,d=d+Math.imul(U,qe)|0,d=d+Math.imul(D,Ve)|0,S=S+Math.imul(D,qe)|0;var xs=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(xs>>>26)|0,xs&=67108863,k=Math.imul(J,De),d=Math.imul(J,Le),d=d+Math.imul(ne,De)|0,S=Math.imul(ne,Le),k=k+Math.imul(fe,Ke)|0,d=d+Math.imul(fe,Fe)|0,d=d+Math.imul(K,Ke)|0,S=S+Math.imul(K,Fe)|0,k=k+Math.imul(j,Ve)|0,d=d+Math.imul(j,qe)|0,d=d+Math.imul(ee,Ve)|0,S=S+Math.imul(ee,qe)|0,k=k+Math.imul(U,He)|0,d=d+Math.imul(U,We)|0,d=d+Math.imul(D,He)|0,S=S+Math.imul(D,We)|0;var ws=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(ws>>>26)|0,ws&=67108863,k=Math.imul(re,De),d=Math.imul(re,Le),d=d+Math.imul(ce,De)|0,S=Math.imul(ce,Le),k=k+Math.imul(J,Ke)|0,d=d+Math.imul(J,Fe)|0,d=d+Math.imul(ne,Ke)|0,S=S+Math.imul(ne,Fe)|0,k=k+Math.imul(fe,Ve)|0,d=d+Math.imul(fe,qe)|0,d=d+Math.imul(K,Ve)|0,S=S+Math.imul(K,qe)|0,k=k+Math.imul(j,He)|0,d=d+Math.imul(j,We)|0,d=d+Math.imul(ee,He)|0,S=S+Math.imul(ee,We)|0,k=k+Math.imul(U,ze)|0,d=d+Math.imul(U,je)|0,d=d+Math.imul(D,ze)|0,S=S+Math.imul(D,je)|0;var vs=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(vs>>>26)|0,vs&=67108863,k=Math.imul(Ee,De),d=Math.imul(Ee,Le),d=d+Math.imul(_e,De)|0,S=Math.imul(_e,Le),k=k+Math.imul(re,Ke)|0,d=d+Math.imul(re,Fe)|0,d=d+Math.imul(ce,Ke)|0,S=S+Math.imul(ce,Fe)|0,k=k+Math.imul(J,Ve)|0,d=d+Math.imul(J,qe)|0,d=d+Math.imul(ne,Ve)|0,S=S+Math.imul(ne,qe)|0,k=k+Math.imul(fe,He)|0,d=d+Math.imul(fe,We)|0,d=d+Math.imul(K,He)|0,S=S+Math.imul(K,We)|0,k=k+Math.imul(j,ze)|0,d=d+Math.imul(j,je)|0,d=d+Math.imul(ee,ze)|0,S=S+Math.imul(ee,je)|0,k=k+Math.imul(U,Ge)|0,d=d+Math.imul(U,$e)|0,d=d+Math.imul(D,Ge)|0,S=S+Math.imul(D,$e)|0;var As=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(As>>>26)|0,As&=67108863,k=Math.imul(Oe,De),d=Math.imul(Oe,Le),d=d+Math.imul(Be,De)|0,S=Math.imul(Be,Le),k=k+Math.imul(Ee,Ke)|0,d=d+Math.imul(Ee,Fe)|0,d=d+Math.imul(_e,Ke)|0,S=S+Math.imul(_e,Fe)|0,k=k+Math.imul(re,Ve)|0,d=d+Math.imul(re,qe)|0,d=d+Math.imul(ce,Ve)|0,S=S+Math.imul(ce,qe)|0,k=k+Math.imul(J,He)|0,d=d+Math.imul(J,We)|0,d=d+Math.imul(ne,He)|0,S=S+Math.imul(ne,We)|0,k=k+Math.imul(fe,ze)|0,d=d+Math.imul(fe,je)|0,d=d+Math.imul(K,ze)|0,S=S+Math.imul(K,je)|0,k=k+Math.imul(j,Ge)|0,d=d+Math.imul(j,$e)|0,d=d+Math.imul(ee,Ge)|0,S=S+Math.imul(ee,$e)|0,k=k+Math.imul(U,Ye)|0,d=d+Math.imul(U,Je)|0,d=d+Math.imul(D,Ye)|0,S=S+Math.imul(D,Je)|0;var Ss=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(Ss>>>26)|0,Ss&=67108863,k=Math.imul(Ce,De),d=Math.imul(Ce,Le),d=d+Math.imul(nt,De)|0,S=Math.imul(nt,Le),k=k+Math.imul(Oe,Ke)|0,d=d+Math.imul(Oe,Fe)|0,d=d+Math.imul(Be,Ke)|0,S=S+Math.imul(Be,Fe)|0,k=k+Math.imul(Ee,Ve)|0,d=d+Math.imul(Ee,qe)|0,d=d+Math.imul(_e,Ve)|0,S=S+Math.imul(_e,qe)|0,k=k+Math.imul(re,He)|0,d=d+Math.imul(re,We)|0,d=d+Math.imul(ce,He)|0,S=S+Math.imul(ce,We)|0,k=k+Math.imul(J,ze)|0,d=d+Math.imul(J,je)|0,d=d+Math.imul(ne,ze)|0,S=S+Math.imul(ne,je)|0,k=k+Math.imul(fe,Ge)|0,d=d+Math.imul(fe,$e)|0,d=d+Math.imul(K,Ge)|0,S=S+Math.imul(K,$e)|0,k=k+Math.imul(j,Ye)|0,d=d+Math.imul(j,Je)|0,d=d+Math.imul(ee,Ye)|0,S=S+Math.imul(ee,Je)|0,k=k+Math.imul(U,Ze)|0,d=d+Math.imul(U,Qe)|0,d=d+Math.imul(D,Ze)|0,S=S+Math.imul(D,Qe)|0;var Es=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(Es>>>26)|0,Es&=67108863,k=Math.imul(it,De),d=Math.imul(it,Le),d=d+Math.imul(ot,De)|0,S=Math.imul(ot,Le),k=k+Math.imul(Ce,Ke)|0,d=d+Math.imul(Ce,Fe)|0,d=d+Math.imul(nt,Ke)|0,S=S+Math.imul(nt,Fe)|0,k=k+Math.imul(Oe,Ve)|0,d=d+Math.imul(Oe,qe)|0,d=d+Math.imul(Be,Ve)|0,S=S+Math.imul(Be,qe)|0,k=k+Math.imul(Ee,He)|0,d=d+Math.imul(Ee,We)|0,d=d+Math.imul(_e,He)|0,S=S+Math.imul(_e,We)|0,k=k+Math.imul(re,ze)|0,d=d+Math.imul(re,je)|0,d=d+Math.imul(ce,ze)|0,S=S+Math.imul(ce,je)|0,k=k+Math.imul(J,Ge)|0,d=d+Math.imul(J,$e)|0,d=d+Math.imul(ne,Ge)|0,S=S+Math.imul(ne,$e)|0,k=k+Math.imul(fe,Ye)|0,d=d+Math.imul(fe,Je)|0,d=d+Math.imul(K,Ye)|0,S=S+Math.imul(K,Je)|0,k=k+Math.imul(j,Ze)|0,d=d+Math.imul(j,Qe)|0,d=d+Math.imul(ee,Ze)|0,S=S+Math.imul(ee,Qe)|0,k=k+Math.imul(U,Xe)|0,d=d+Math.imul(U,et)|0,d=d+Math.imul(D,Xe)|0,S=S+Math.imul(D,et)|0;var Is=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(Is>>>26)|0,Is&=67108863,k=Math.imul(Ne,De),d=Math.imul(Ne,Le),d=d+Math.imul(Ue,De)|0,S=Math.imul(Ue,Le),k=k+Math.imul(it,Ke)|0,d=d+Math.imul(it,Fe)|0,d=d+Math.imul(ot,Ke)|0,S=S+Math.imul(ot,Fe)|0,k=k+Math.imul(Ce,Ve)|0,d=d+Math.imul(Ce,qe)|0,d=d+Math.imul(nt,Ve)|0,S=S+Math.imul(nt,qe)|0,k=k+Math.imul(Oe,He)|0,d=d+Math.imul(Oe,We)|0,d=d+Math.imul(Be,He)|0,S=S+Math.imul(Be,We)|0,k=k+Math.imul(Ee,ze)|0,d=d+Math.imul(Ee,je)|0,d=d+Math.imul(_e,ze)|0,S=S+Math.imul(_e,je)|0,k=k+Math.imul(re,Ge)|0,d=d+Math.imul(re,$e)|0,d=d+Math.imul(ce,Ge)|0,S=S+Math.imul(ce,$e)|0,k=k+Math.imul(J,Ye)|0,d=d+Math.imul(J,Je)|0,d=d+Math.imul(ne,Ye)|0,S=S+Math.imul(ne,Je)|0,k=k+Math.imul(fe,Ze)|0,d=d+Math.imul(fe,Qe)|0,d=d+Math.imul(K,Ze)|0,S=S+Math.imul(K,Qe)|0,k=k+Math.imul(j,Xe)|0,d=d+Math.imul(j,et)|0,d=d+Math.imul(ee,Xe)|0,S=S+Math.imul(ee,et)|0,k=k+Math.imul(U,tt)|0,d=d+Math.imul(U,rt)|0,d=d+Math.imul(D,tt)|0,S=S+Math.imul(D,rt)|0;var ks=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(ks>>>26)|0,ks&=67108863,k=Math.imul(Ne,Ke),d=Math.imul(Ne,Fe),d=d+Math.imul(Ue,Ke)|0,S=Math.imul(Ue,Fe),k=k+Math.imul(it,Ve)|0,d=d+Math.imul(it,qe)|0,d=d+Math.imul(ot,Ve)|0,S=S+Math.imul(ot,qe)|0,k=k+Math.imul(Ce,He)|0,d=d+Math.imul(Ce,We)|0,d=d+Math.imul(nt,He)|0,S=S+Math.imul(nt,We)|0,k=k+Math.imul(Oe,ze)|0,d=d+Math.imul(Oe,je)|0,d=d+Math.imul(Be,ze)|0,S=S+Math.imul(Be,je)|0,k=k+Math.imul(Ee,Ge)|0,d=d+Math.imul(Ee,$e)|0,d=d+Math.imul(_e,Ge)|0,S=S+Math.imul(_e,$e)|0,k=k+Math.imul(re,Ye)|0,d=d+Math.imul(re,Je)|0,d=d+Math.imul(ce,Ye)|0,S=S+Math.imul(ce,Je)|0,k=k+Math.imul(J,Ze)|0,d=d+Math.imul(J,Qe)|0,d=d+Math.imul(ne,Ze)|0,S=S+Math.imul(ne,Qe)|0,k=k+Math.imul(fe,Xe)|0,d=d+Math.imul(fe,et)|0,d=d+Math.imul(K,Xe)|0,S=S+Math.imul(K,et)|0,k=k+Math.imul(j,tt)|0,d=d+Math.imul(j,rt)|0,d=d+Math.imul(ee,tt)|0,S=S+Math.imul(ee,rt)|0;var Ts=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(Ts>>>26)|0,Ts&=67108863,k=Math.imul(Ne,Ve),d=Math.imul(Ne,qe),d=d+Math.imul(Ue,Ve)|0,S=Math.imul(Ue,qe),k=k+Math.imul(it,He)|0,d=d+Math.imul(it,We)|0,d=d+Math.imul(ot,He)|0,S=S+Math.imul(ot,We)|0,k=k+Math.imul(Ce,ze)|0,d=d+Math.imul(Ce,je)|0,d=d+Math.imul(nt,ze)|0,S=S+Math.imul(nt,je)|0,k=k+Math.imul(Oe,Ge)|0,d=d+Math.imul(Oe,$e)|0,d=d+Math.imul(Be,Ge)|0,S=S+Math.imul(Be,$e)|0,k=k+Math.imul(Ee,Ye)|0,d=d+Math.imul(Ee,Je)|0,d=d+Math.imul(_e,Ye)|0,S=S+Math.imul(_e,Je)|0,k=k+Math.imul(re,Ze)|0,d=d+Math.imul(re,Qe)|0,d=d+Math.imul(ce,Ze)|0,S=S+Math.imul(ce,Qe)|0,k=k+Math.imul(J,Xe)|0,d=d+Math.imul(J,et)|0,d=d+Math.imul(ne,Xe)|0,S=S+Math.imul(ne,et)|0,k=k+Math.imul(fe,tt)|0,d=d+Math.imul(fe,rt)|0,d=d+Math.imul(K,tt)|0,S=S+Math.imul(K,rt)|0;var Ps=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(Ps>>>26)|0,Ps&=67108863,k=Math.imul(Ne,He),d=Math.imul(Ne,We),d=d+Math.imul(Ue,He)|0,S=Math.imul(Ue,We),k=k+Math.imul(it,ze)|0,d=d+Math.imul(it,je)|0,d=d+Math.imul(ot,ze)|0,S=S+Math.imul(ot,je)|0,k=k+Math.imul(Ce,Ge)|0,d=d+Math.imul(Ce,$e)|0,d=d+Math.imul(nt,Ge)|0,S=S+Math.imul(nt,$e)|0,k=k+Math.imul(Oe,Ye)|0,d=d+Math.imul(Oe,Je)|0,d=d+Math.imul(Be,Ye)|0,S=S+Math.imul(Be,Je)|0,k=k+Math.imul(Ee,Ze)|0,d=d+Math.imul(Ee,Qe)|0,d=d+Math.imul(_e,Ze)|0,S=S+Math.imul(_e,Qe)|0,k=k+Math.imul(re,Xe)|0,d=d+Math.imul(re,et)|0,d=d+Math.imul(ce,Xe)|0,S=S+Math.imul(ce,et)|0,k=k+Math.imul(J,tt)|0,d=d+Math.imul(J,rt)|0,d=d+Math.imul(ne,tt)|0,S=S+Math.imul(ne,rt)|0;var _s=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(_s>>>26)|0,_s&=67108863,k=Math.imul(Ne,ze),d=Math.imul(Ne,je),d=d+Math.imul(Ue,ze)|0,S=Math.imul(Ue,je),k=k+Math.imul(it,Ge)|0,d=d+Math.imul(it,$e)|0,d=d+Math.imul(ot,Ge)|0,S=S+Math.imul(ot,$e)|0,k=k+Math.imul(Ce,Ye)|0,d=d+Math.imul(Ce,Je)|0,d=d+Math.imul(nt,Ye)|0,S=S+Math.imul(nt,Je)|0,k=k+Math.imul(Oe,Ze)|0,d=d+Math.imul(Oe,Qe)|0,d=d+Math.imul(Be,Ze)|0,S=S+Math.imul(Be,Qe)|0,k=k+Math.imul(Ee,Xe)|0,d=d+Math.imul(Ee,et)|0,d=d+Math.imul(_e,Xe)|0,S=S+Math.imul(_e,et)|0,k=k+Math.imul(re,tt)|0,d=d+Math.imul(re,rt)|0,d=d+Math.imul(ce,tt)|0,S=S+Math.imul(ce,rt)|0;var Bs=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(Bs>>>26)|0,Bs&=67108863,k=Math.imul(Ne,Ge),d=Math.imul(Ne,$e),d=d+Math.imul(Ue,Ge)|0,S=Math.imul(Ue,$e),k=k+Math.imul(it,Ye)|0,d=d+Math.imul(it,Je)|0,d=d+Math.imul(ot,Ye)|0,S=S+Math.imul(ot,Je)|0,k=k+Math.imul(Ce,Ze)|0,d=d+Math.imul(Ce,Qe)|0,d=d+Math.imul(nt,Ze)|0,S=S+Math.imul(nt,Qe)|0,k=k+Math.imul(Oe,Xe)|0,d=d+Math.imul(Oe,et)|0,d=d+Math.imul(Be,Xe)|0,S=S+Math.imul(Be,et)|0,k=k+Math.imul(Ee,tt)|0,d=d+Math.imul(Ee,rt)|0,d=d+Math.imul(_e,tt)|0,S=S+Math.imul(_e,rt)|0;var Cs=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(Cs>>>26)|0,Cs&=67108863,k=Math.imul(Ne,Ye),d=Math.imul(Ne,Je),d=d+Math.imul(Ue,Ye)|0,S=Math.imul(Ue,Je),k=k+Math.imul(it,Ze)|0,d=d+Math.imul(it,Qe)|0,d=d+Math.imul(ot,Ze)|0,S=S+Math.imul(ot,Qe)|0,k=k+Math.imul(Ce,Xe)|0,d=d+Math.imul(Ce,et)|0,d=d+Math.imul(nt,Xe)|0,S=S+Math.imul(nt,et)|0,k=k+Math.imul(Oe,tt)|0,d=d+Math.imul(Oe,rt)|0,d=d+Math.imul(Be,tt)|0,S=S+Math.imul(Be,rt)|0;var Ms=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(Ms>>>26)|0,Ms&=67108863,k=Math.imul(Ne,Ze),d=Math.imul(Ne,Qe),d=d+Math.imul(Ue,Ze)|0,S=Math.imul(Ue,Qe),k=k+Math.imul(it,Xe)|0,d=d+Math.imul(it,et)|0,d=d+Math.imul(ot,Xe)|0,S=S+Math.imul(ot,et)|0,k=k+Math.imul(Ce,tt)|0,d=d+Math.imul(Ce,rt)|0,d=d+Math.imul(nt,tt)|0,S=S+Math.imul(nt,rt)|0;var Rs=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(Rs>>>26)|0,Rs&=67108863,k=Math.imul(Ne,Xe),d=Math.imul(Ne,et),d=d+Math.imul(Ue,Xe)|0,S=Math.imul(Ue,et),k=k+Math.imul(it,tt)|0,d=d+Math.imul(it,rt)|0,d=d+Math.imul(ot,tt)|0,S=S+Math.imul(ot,rt)|0;var hl=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(hl>>>26)|0,hl&=67108863,k=Math.imul(Ne,tt),d=Math.imul(Ne,rt),d=d+Math.imul(Ue,tt)|0,S=Math.imul(Ue,rt);var pl=(C+k|0)+((d&8191)<<13)|0;return C=(S+(d>>>13)|0)+(pl>>>26)|0,pl&=67108863,P[0]=gs,P[1]=bs,P[2]=xs,P[3]=ws,P[4]=vs,P[5]=As,P[6]=Ss,P[7]=Es,P[8]=Is,P[9]=ks,P[10]=Ts,P[11]=Ps,P[12]=_s,P[13]=Bs,P[14]=Cs,P[15]=Ms,P[16]=Rs,P[17]=hl,P[18]=pl,C!==0&&(P[19]=C,b.length++),b};Math.imul||(A=x);function E(_,f,m){m.negative=f.negative^_.negative,m.length=_.length+f.length;for(var b=0,v=0,w=0;w<m.length-1;w++){var P=v;v=0;for(var C=b&67108863,k=Math.min(w,f.length-1),d=Math.max(0,w-_.length+1);d<=k;d++){var S=w-d,F=_.words[S]|0,U=f.words[d]|0,D=F*U,Y=D&67108863;P=P+(D/67108864|0)|0,Y=Y+C|0,C=Y&67108863,P=P+(Y>>>26)|0,v+=P>>>26,P&=67108863}m.words[w]=C,b=P,P=v}return b!==0?m.words[w]=b:m.length--,m.strip()}function B(_,f,m){var b=new M;return b.mulp(_,f,m)}i.prototype.mulTo=function(f,m){var b,v=this.length+f.length;return this.length===10&&f.length===10?b=A(this,f,m):v<63?b=x(this,f,m):v<1024?b=E(this,f,m):b=B(this,f,m),b};function M(_,f){this.x=_,this.y=f}M.prototype.makeRBT=function(f){for(var m=new Array(f),b=i.prototype._countBits(f)-1,v=0;v<f;v++)m[v]=this.revBin(v,b,f);return m},M.prototype.revBin=function(f,m,b){if(f===0||f===b-1)return f;for(var v=0,w=0;w<m;w++)v|=(f&1)<<m-w-1,f>>=1;return v},M.prototype.permute=function(f,m,b,v,w,P){for(var C=0;C<P;C++)v[C]=m[f[C]],w[C]=b[f[C]]},M.prototype.transform=function(f,m,b,v,w,P){this.permute(P,f,m,b,v,w);for(var C=1;C<w;C<<=1)for(var k=C<<1,d=Math.cos(2*Math.PI/k),S=Math.sin(2*Math.PI/k),F=0;F<w;F+=k)for(var U=d,D=S,Y=0;Y<C;Y++){var j=b[F+Y],ee=v[F+Y],le=b[F+Y+C],fe=v[F+Y+C],K=U*le-D*fe;fe=U*fe+D*le,le=K,b[F+Y]=j+le,v[F+Y]=ee+fe,b[F+Y+C]=j-le,v[F+Y+C]=ee-fe,Y!==k&&(K=d*U-S*D,D=d*D+S*U,U=K)}},M.prototype.guessLen13b=function(f,m){var b=Math.max(m,f)|1,v=b&1,w=0;for(b=b/2|0;b;b=b>>>1)w++;return 1<<w+1+v},M.prototype.conjugate=function(f,m,b){if(!(b<=1))for(var v=0;v<b/2;v++){var w=f[v];f[v]=f[b-v-1],f[b-v-1]=w,w=m[v],m[v]=-m[b-v-1],m[b-v-1]=-w}},M.prototype.normalize13b=function(f,m){for(var b=0,v=0;v<m/2;v++){var w=Math.round(f[2*v+1]/m)*8192+Math.round(f[2*v]/m)+b;f[v]=w&67108863,w<67108864?b=0:b=w/67108864|0}return f},M.prototype.convert13b=function(f,m,b,v){for(var w=0,P=0;P<m;P++)w=w+(f[P]|0),b[2*P]=w&8191,w=w>>>13,b[2*P+1]=w&8191,w=w>>>13;for(P=2*m;P<v;++P)b[P]=0;r(w===0),r((w&-8192)===0)},M.prototype.stub=function(f){for(var m=new Array(f),b=0;b<f;b++)m[b]=0;return m},M.prototype.mulp=function(f,m,b){var v=2*this.guessLen13b(f.length,m.length),w=this.makeRBT(v),P=this.stub(v),C=new Array(v),k=new Array(v),d=new Array(v),S=new Array(v),F=new Array(v),U=new Array(v),D=b.words;D.length=v,this.convert13b(f.words,f.length,C,v),this.convert13b(m.words,m.length,S,v),this.transform(C,P,k,d,v,w),this.transform(S,P,F,U,v,w);for(var Y=0;Y<v;Y++){var j=k[Y]*F[Y]-d[Y]*U[Y];d[Y]=k[Y]*U[Y]+d[Y]*F[Y],k[Y]=j}return this.conjugate(k,d,v),this.transform(k,d,D,P,v,w),this.conjugate(D,P,v),this.normalize13b(D,v),b.negative=f.negative^m.negative,b.length=f.length+m.length,b.strip()},i.prototype.mul=function(f){var m=new i(null);return m.words=new Array(this.length+f.length),this.mulTo(f,m)},i.prototype.mulf=function(f){var m=new i(null);return m.words=new Array(this.length+f.length),B(this,f,m)},i.prototype.imul=function(f){return this.clone().mulTo(f,this)},i.prototype.imuln=function(f){r(typeof f=="number"),r(f<67108864);for(var m=0,b=0;b<this.length;b++){var v=(this.words[b]|0)*f,w=(v&67108863)+(m&67108863);m>>=26,m+=v/67108864|0,m+=w>>>26,this.words[b]=w&67108863}return m!==0&&(this.words[b]=m,this.length++),this},i.prototype.muln=function(f){return this.clone().imuln(f)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(f){var m=g(f);if(m.length===0)return new i(1);for(var b=this,v=0;v<m.length&&m[v]===0;v++,b=b.sqr());if(++v<m.length)for(var w=b.sqr();v<m.length;v++,w=w.sqr())m[v]!==0&&(b=b.mul(w));return b},i.prototype.iushln=function(f){r(typeof f=="number"&&f>=0);var m=f%26,b=(f-m)/26,v=67108863>>>26-m<<26-m,w;if(m!==0){var P=0;for(w=0;w<this.length;w++){var C=this.words[w]&v,k=(this.words[w]|0)-C<<m;this.words[w]=k|P,P=C>>>26-m}P&&(this.words[w]=P,this.length++)}if(b!==0){for(w=this.length-1;w>=0;w--)this.words[w+b]=this.words[w];for(w=0;w<b;w++)this.words[w]=0;this.length+=b}return this.strip()},i.prototype.ishln=function(f){return r(this.negative===0),this.iushln(f)},i.prototype.iushrn=function(f,m,b){r(typeof f=="number"&&f>=0);var v;m?v=(m-m%26)/26:v=0;var w=f%26,P=Math.min((f-w)/26,this.length),C=67108863^67108863>>>w<<w,k=b;if(v-=P,v=Math.max(0,v),k){for(var d=0;d<P;d++)k.words[d]=this.words[d];k.length=P}if(P!==0)if(this.length>P)for(this.length-=P,d=0;d<this.length;d++)this.words[d]=this.words[d+P];else this.words[0]=0,this.length=1;var S=0;for(d=this.length-1;d>=0&&(S!==0||d>=v);d--){var F=this.words[d]|0;this.words[d]=S<<26-w|F>>>w,S=F&C}return k&&S!==0&&(k.words[k.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(f,m,b){return r(this.negative===0),this.iushrn(f,m,b)},i.prototype.shln=function(f){return this.clone().ishln(f)},i.prototype.ushln=function(f){return this.clone().iushln(f)},i.prototype.shrn=function(f){return this.clone().ishrn(f)},i.prototype.ushrn=function(f){return this.clone().iushrn(f)},i.prototype.testn=function(f){r(typeof f=="number"&&f>=0);var m=f%26,b=(f-m)/26,v=1<<m;if(this.length<=b)return!1;var w=this.words[b];return!!(w&v)},i.prototype.imaskn=function(f){r(typeof f=="number"&&f>=0);var m=f%26,b=(f-m)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(m!==0&&b++,this.length=Math.min(b,this.length),m!==0){var v=67108863^67108863>>>m<<m;this.words[this.length-1]&=v}return this.strip()},i.prototype.maskn=function(f){return this.clone().imaskn(f)},i.prototype.iaddn=function(f){return r(typeof f=="number"),r(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},i.prototype._iaddn=function(f){this.words[0]+=f;for(var m=0;m<this.length&&this.words[m]>=67108864;m++)this.words[m]-=67108864,m===this.length-1?this.words[m+1]=1:this.words[m+1]++;return this.length=Math.max(this.length,m+1),this},i.prototype.isubn=function(f){if(r(typeof f=="number"),r(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var m=0;m<this.length&&this.words[m]<0;m++)this.words[m]+=67108864,this.words[m+1]-=1;return this.strip()},i.prototype.addn=function(f){return this.clone().iaddn(f)},i.prototype.subn=function(f){return this.clone().isubn(f)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(f,m,b){var v=f.length+b,w;this._expand(v);var P,C=0;for(w=0;w<f.length;w++){P=(this.words[w+b]|0)+C;var k=(f.words[w]|0)*m;P-=k&67108863,C=(P>>26)-(k/67108864|0),this.words[w+b]=P&67108863}for(;w<this.length-b;w++)P=(this.words[w+b]|0)+C,C=P>>26,this.words[w+b]=P&67108863;if(C===0)return this.strip();for(r(C===-1),C=0,w=0;w<this.length;w++)P=-(this.words[w]|0)+C,C=P>>26,this.words[w]=P&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(f,m){var b=this.length-f.length,v=this.clone(),w=f,P=w.words[w.length-1]|0,C=this._countBits(P);b=26-C,b!==0&&(w=w.ushln(b),v.iushln(b),P=w.words[w.length-1]|0);var k=v.length-w.length,d;if(m!=="mod"){d=new i(null),d.length=k+1,d.words=new Array(d.length);for(var S=0;S<d.length;S++)d.words[S]=0}var F=v.clone()._ishlnsubmul(w,1,k);F.negative===0&&(v=F,d&&(d.words[k]=1));for(var U=k-1;U>=0;U--){var D=(v.words[w.length+U]|0)*67108864+(v.words[w.length+U-1]|0);for(D=Math.min(D/P|0,67108863),v._ishlnsubmul(w,D,U);v.negative!==0;)D--,v.negative=0,v._ishlnsubmul(w,1,U),v.isZero()||(v.negative^=1);d&&(d.words[U]=D)}return d&&d.strip(),v.strip(),m!=="div"&&b!==0&&v.iushrn(b),{div:d||null,mod:v}},i.prototype.divmod=function(f,m,b){if(r(!f.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var v,w,P;return this.negative!==0&&f.negative===0?(P=this.neg().divmod(f,m),m!=="mod"&&(v=P.div.neg()),m!=="div"&&(w=P.mod.neg(),b&&w.negative!==0&&w.iadd(f)),{div:v,mod:w}):this.negative===0&&f.negative!==0?(P=this.divmod(f.neg(),m),m!=="mod"&&(v=P.div.neg()),{div:v,mod:P.mod}):this.negative&f.negative?(P=this.neg().divmod(f.neg(),m),m!=="div"&&(w=P.mod.neg(),b&&w.negative!==0&&w.isub(f)),{div:P.div,mod:w}):f.length>this.length||this.cmp(f)<0?{div:new i(0),mod:this}:f.length===1?m==="div"?{div:this.divn(f.words[0]),mod:null}:m==="mod"?{div:null,mod:new i(this.modn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new i(this.modn(f.words[0]))}:this._wordDiv(f,m)},i.prototype.div=function(f){return this.divmod(f,"div",!1).div},i.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},i.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},i.prototype.divRound=function(f){var m=this.divmod(f);if(m.mod.isZero())return m.div;var b=m.div.negative!==0?m.mod.isub(f):m.mod,v=f.ushrn(1),w=f.andln(1),P=b.cmp(v);return P<0||w===1&&P===0?m.div:m.div.negative!==0?m.div.isubn(1):m.div.iaddn(1)},i.prototype.modn=function(f){r(f<=67108863);for(var m=(1<<26)%f,b=0,v=this.length-1;v>=0;v--)b=(m*b+(this.words[v]|0))%f;return b},i.prototype.idivn=function(f){r(f<=67108863);for(var m=0,b=this.length-1;b>=0;b--){var v=(this.words[b]|0)+m*67108864;this.words[b]=v/f|0,m=v%f}return this.strip()},i.prototype.divn=function(f){return this.clone().idivn(f)},i.prototype.egcd=function(f){r(f.negative===0),r(!f.isZero());var m=this,b=f.clone();m.negative!==0?m=m.umod(f):m=m.clone();for(var v=new i(1),w=new i(0),P=new i(0),C=new i(1),k=0;m.isEven()&&b.isEven();)m.iushrn(1),b.iushrn(1),++k;for(var d=b.clone(),S=m.clone();!m.isZero();){for(var F=0,U=1;!(m.words[0]&U)&&F<26;++F,U<<=1);if(F>0)for(m.iushrn(F);F-- >0;)(v.isOdd()||w.isOdd())&&(v.iadd(d),w.isub(S)),v.iushrn(1),w.iushrn(1);for(var D=0,Y=1;!(b.words[0]&Y)&&D<26;++D,Y<<=1);if(D>0)for(b.iushrn(D);D-- >0;)(P.isOdd()||C.isOdd())&&(P.iadd(d),C.isub(S)),P.iushrn(1),C.iushrn(1);m.cmp(b)>=0?(m.isub(b),v.isub(P),w.isub(C)):(b.isub(m),P.isub(v),C.isub(w))}return{a:P,b:C,gcd:b.iushln(k)}},i.prototype._invmp=function(f){r(f.negative===0),r(!f.isZero());var m=this,b=f.clone();m.negative!==0?m=m.umod(f):m=m.clone();for(var v=new i(1),w=new i(0),P=b.clone();m.cmpn(1)>0&&b.cmpn(1)>0;){for(var C=0,k=1;!(m.words[0]&k)&&C<26;++C,k<<=1);if(C>0)for(m.iushrn(C);C-- >0;)v.isOdd()&&v.iadd(P),v.iushrn(1);for(var d=0,S=1;!(b.words[0]&S)&&d<26;++d,S<<=1);if(d>0)for(b.iushrn(d);d-- >0;)w.isOdd()&&w.iadd(P),w.iushrn(1);m.cmp(b)>=0?(m.isub(b),v.isub(w)):(b.isub(m),w.isub(v))}var F;return m.cmpn(1)===0?F=v:F=w,F.cmpn(0)<0&&F.iadd(f),F},i.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var m=this.clone(),b=f.clone();m.negative=0,b.negative=0;for(var v=0;m.isEven()&&b.isEven();v++)m.iushrn(1),b.iushrn(1);do{for(;m.isEven();)m.iushrn(1);for(;b.isEven();)b.iushrn(1);var w=m.cmp(b);if(w<0){var P=m;m=b,b=P}else if(w===0||b.cmpn(1)===0)break;m.isub(b)}while(!0);return b.iushln(v)},i.prototype.invm=function(f){return this.egcd(f).a.umod(f)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(f){return this.words[0]&f},i.prototype.bincn=function(f){r(typeof f=="number");var m=f%26,b=(f-m)/26,v=1<<m;if(this.length<=b)return this._expand(b+1),this.words[b]|=v,this;for(var w=v,P=b;w!==0&&P<this.length;P++){var C=this.words[P]|0;C+=w,w=C>>>26,C&=67108863,this.words[P]=C}return w!==0&&(this.words[P]=w,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(f){var m=f<0;if(this.negative!==0&&!m)return-1;if(this.negative===0&&m)return 1;this.strip();var b;if(this.length>1)b=1;else{m&&(f=-f),r(f<=67108863,"Number is too big");var v=this.words[0]|0;b=v===f?0:v<f?-1:1}return this.negative!==0?-b|0:b},i.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var m=this.ucmp(f);return this.negative!==0?-m|0:m},i.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var m=0,b=this.length-1;b>=0;b--){var v=this.words[b]|0,w=f.words[b]|0;if(v!==w){v<w?m=-1:v>w&&(m=1);break}}return m},i.prototype.gtn=function(f){return this.cmpn(f)===1},i.prototype.gt=function(f){return this.cmp(f)===1},i.prototype.gten=function(f){return this.cmpn(f)>=0},i.prototype.gte=function(f){return this.cmp(f)>=0},i.prototype.ltn=function(f){return this.cmpn(f)===-1},i.prototype.lt=function(f){return this.cmp(f)===-1},i.prototype.lten=function(f){return this.cmpn(f)<=0},i.prototype.lte=function(f){return this.cmp(f)<=0},i.prototype.eqn=function(f){return this.cmpn(f)===0},i.prototype.eq=function(f){return this.cmp(f)===0},i.red=function(f){return new z(f)},i.prototype.toRed=function(f){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(f){return this.red=f,this},i.prototype.forceRed=function(f){return r(!this.red,"Already a number in reduction context"),this._forceRed(f)},i.prototype.redAdd=function(f){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},i.prototype.redIAdd=function(f){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},i.prototype.redSub=function(f){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},i.prototype.redISub=function(f){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},i.prototype.redShl=function(f){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},i.prototype.redMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},i.prototype.redIMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(f){return r(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var N={k256:null,p224:null,p192:null,p25519:null};function R(_,f){this.name=_,this.p=new i(f,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}R.prototype._tmp=function(){var f=new i(null);return f.words=new Array(Math.ceil(this.n/13)),f},R.prototype.ireduce=function(f){var m=f,b;do this.split(m,this.tmp),m=this.imulK(m),m=m.iadd(this.tmp),b=m.bitLength();while(b>this.n);var v=b<this.n?-1:m.ucmp(this.p);return v===0?(m.words[0]=0,m.length=1):v>0?m.isub(this.p):m.strip!==void 0?m.strip():m._strip(),m},R.prototype.split=function(f,m){f.iushrn(this.n,0,m)},R.prototype.imulK=function(f){return f.imul(this.k)};function V(){R.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(V,R),V.prototype.split=function(f,m){for(var b=4194303,v=Math.min(f.length,9),w=0;w<v;w++)m.words[w]=f.words[w];if(m.length=v,f.length<=9){f.words[0]=0,f.length=1;return}var P=f.words[9];for(m.words[m.length++]=P&b,w=10;w<f.length;w++){var C=f.words[w]|0;f.words[w-10]=(C&b)<<4|P>>>22,P=C}P>>>=22,f.words[w-10]=P,P===0&&f.length>10?f.length-=10:f.length-=9},V.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var m=0,b=0;b<f.length;b++){var v=f.words[b]|0;m+=v*977,f.words[b]=m&67108863,m=v*64+(m/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function q(){R.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(q,R);function W(){R.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(W,R);function G(){R.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(G,R),G.prototype.imulK=function(f){for(var m=0,b=0;b<f.length;b++){var v=(f.words[b]|0)*19+m,w=v&67108863;v>>>=26,f.words[b]=w,m=v}return m!==0&&(f.words[f.length++]=m),f},i._prime=function(f){if(N[f])return N[f];var m;if(f==="k256")m=new V;else if(f==="p224")m=new q;else if(f==="p192")m=new W;else if(f==="p25519")m=new G;else throw new Error("Unknown prime "+f);return N[f]=m,m};function z(_){if(typeof _=="string"){var f=i._prime(_);this.m=f.p,this.prime=f}else r(_.gtn(1),"modulus must be greater than 1"),this.m=_,this.prime=null}z.prototype._verify1=function(f){r(f.negative===0,"red works only with positives"),r(f.red,"red works only with red numbers")},z.prototype._verify2=function(f,m){r((f.negative|m.negative)===0,"red works only with positives"),r(f.red&&f.red===m.red,"red works only with red numbers")},z.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):f.umod(this.m)._forceRed(this)},z.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},z.prototype.add=function(f,m){this._verify2(f,m);var b=f.add(m);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},z.prototype.iadd=function(f,m){this._verify2(f,m);var b=f.iadd(m);return b.cmp(this.m)>=0&&b.isub(this.m),b},z.prototype.sub=function(f,m){this._verify2(f,m);var b=f.sub(m);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},z.prototype.isub=function(f,m){this._verify2(f,m);var b=f.isub(m);return b.cmpn(0)<0&&b.iadd(this.m),b},z.prototype.shl=function(f,m){return this._verify1(f),this.imod(f.ushln(m))},z.prototype.imul=function(f,m){return this._verify2(f,m),this.imod(f.imul(m))},z.prototype.mul=function(f,m){return this._verify2(f,m),this.imod(f.mul(m))},z.prototype.isqr=function(f){return this.imul(f,f.clone())},z.prototype.sqr=function(f){return this.mul(f,f)},z.prototype.sqrt=function(f){if(f.isZero())return f.clone();var m=this.m.andln(3);if(r(m%2===1),m===3){var b=this.m.add(new i(1)).iushrn(2);return this.pow(f,b)}for(var v=this.m.subn(1),w=0;!v.isZero()&&v.andln(1)===0;)w++,v.iushrn(1);r(!v.isZero());var P=new i(1).toRed(this),C=P.redNeg(),k=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new i(2*d*d).toRed(this);this.pow(d,k).cmp(C)!==0;)d.redIAdd(C);for(var S=this.pow(d,v),F=this.pow(f,v.addn(1).iushrn(1)),U=this.pow(f,v),D=w;U.cmp(P)!==0;){for(var Y=U,j=0;Y.cmp(P)!==0;j++)Y=Y.redSqr();r(j<D);var ee=this.pow(S,new i(1).iushln(D-j-1));F=F.redMul(ee),S=ee.redSqr(),U=U.redMul(S),D=j}return F},z.prototype.invm=function(f){var m=f._invmp(this.m);return m.negative!==0?(m.negative=0,this.imod(m).redNeg()):this.imod(m)},z.prototype.pow=function(f,m){if(m.isZero())return new i(1).toRed(this);if(m.cmpn(1)===0)return f.clone();var b=4,v=new Array(1<<b);v[0]=new i(1).toRed(this),v[1]=f;for(var w=2;w<v.length;w++)v[w]=this.mul(v[w-1],f);var P=v[0],C=0,k=0,d=m.bitLength()%26;for(d===0&&(d=26),w=m.length-1;w>=0;w--){for(var S=m.words[w],F=d-1;F>=0;F--){var U=S>>F&1;if(P!==v[0]&&(P=this.sqr(P)),U===0&&C===0){k=0;continue}C<<=1,C|=U,k++,!(k!==b&&(w!==0||F!==0))&&(P=this.mul(P,v[C]),k=0,C=0)}d=26}return P},z.prototype.convertTo=function(f){var m=f.umod(this.m);return m===f?m.clone():m},z.prototype.convertFrom=function(f){var m=f.clone();return m.red=null,m},i.mont=function(f){return new te(f)};function te(_){z.call(this,_),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(te,z),te.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},te.prototype.convertFrom=function(f){var m=this.imod(f.mul(this.rinv));return m.red=null,m},te.prototype.imul=function(f,m){if(f.isZero()||m.isZero())return f.words[0]=0,f.length=1,f;var b=f.imul(m),v=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=b.isub(v).iushrn(this.shift),P=w;return w.cmp(this.m)>=0?P=w.isub(this.m):w.cmpn(0)<0&&(P=w.iadd(this.m)),P._forceRed(this)},te.prototype.mul=function(f,m){if(f.isZero()||m.isZero())return new i(0)._forceRed(this);var b=f.mul(m),v=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=b.isub(v).iushrn(this.shift),P=w;return w.cmp(this.m)>=0?P=w.isub(this.m):w.cmpn(0)<0&&(P=w.iadd(this.m)),P._forceRed(this)},te.prototype.invm=function(f){var m=this.imod(f._invmp(this.m).mul(this.r2));return m._forceRed(this)}})(typeof BP>"u"||BP,TH)});var _H=L(Sp=>{"use strict";p();y();Object.defineProperty(Sp,"__esModule",{value:!0});var Fd=Kd(),Pwe=J_().ec,CP=new Pwe("secp256k1"),Ap=CP.curve;Sp.privateKeyExport=function(e,t){t===void 0&&(t=!0);var r=new Fd(e);if(r.ucmp(Ap.n)>=0)throw new Error("couldn't export to DER format");var n=CP.g.mul(r);return PH(n.getX(),n.getY(),t)};Sp.privateKeyModInverse=function(e){var t=new Fd(e);if(t.ucmp(Ap.n)>=0||t.isZero())throw new Error("private key range is invalid");return t.invm(Ap.n).toArrayLike(Buffer,"be",32)};Sp.signatureImport=function(e){var t=new Fd(e.r);t.ucmp(Ap.n)>=0&&(t=new Fd(0));var r=new Fd(e.s);return r.ucmp(Ap.n)>=0&&(r=new Fd(0)),Buffer.concat([t.toArrayLike(Buffer,"be",32),r.toArrayLike(Buffer,"be",32)])};Sp.ecdhUnsafe=function(e,t,r){r===void 0&&(r=!0);var n=CP.keyFromPublic(e),i=new Fd(t);if(i.ucmp(Ap.n)>=0||i.isZero())throw new Error("scalar was invalid (zero or overflow)");var o=n.pub.mul(i);return PH(o.getX(),o.getY(),r)};var PH=function(e,t,r){var n;return r?(n=Buffer.alloc(33),n[0]=t.isOdd()?3:2,e.toArrayLike(Buffer,"be",32).copy(n,1)):(n=Buffer.alloc(65),n[0]=4,e.toArrayLike(Buffer,"be",32).copy(n,1),t.toArrayLike(Buffer,"be",32).copy(n,33)),n}});var BH=L(sb=>{"use strict";p();y();Object.defineProperty(sb,"__esModule",{value:!0});var{Buffer:ob}=Qr(),_we=ob.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Bwe=ob.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);sb.privateKeyExport=function(e,t,r){r===void 0&&(r=!0);var n=ob.from(r?_we:Bwe);return e.copy(n,r?8:9),t.copy(n,r?181:214),n};sb.privateKeyImport=function(e){var t=e.length,r=0;if(t<r+1||e[r]!==48||(r+=1,t<r+1||!(e[r]&128)))return null;var n=e[r]&127;if(r+=1,n<1||n>2||t<r+n)return null;var i=e[r+n-1]|(n>1?e[r+n-2]<<8:0);return r+=n,t<r+i||t<r+3||e[r]!==2||e[r+1]!==1||e[r+2]!==1||(r+=3,t<r+2||e[r]!==4||e[r+1]>32||t<r+2+e[r+1])?null:e.slice(r+2,r+2+e[r+1])};sb.signatureImportLax=function(e){var t=ob.alloc(32,0),r=ob.alloc(32,0),n=e.length,i=0;if(e[i++]!==48)return null;var o=e[i++];if(o&128&&(i+=o-128,i>n)||e[i++]!==2)return null;var s=e[i++];if(s&128){if(o=s-128,i+o>n)return null;for(;o>0&&e[i]===0;i+=1,o-=1);for(s=0;o>0;i+=1,o-=1)s=(s<<8)+e[i]}if(s>n-i)return null;var a=i;if(i+=s,e[i++]!==2)return null;var c=e[i++];if(c&128){if(o=c-128,i+o>n)return null;for(;o>0&&e[i]===0;i+=1,o-=1);for(c=0;o>0;i+=1,o-=1)c=(c<<8)+e[i]}if(c>n-i)return null;var u=i;for(i+=c;s>0&&e[a]===0;s-=1,a+=1);if(s>32)return null;var h=e.slice(a,a+s);for(h.copy(t,32-h.length);c>0&&e[u]===0;c-=1,u+=1);if(c>32)return null;var l=e.slice(u,u+c);return l.copy(r,32-l.length),{r:t,s:r}}});var Z2=L(Re=>{"use strict";p();y();Object.defineProperty(Re,"__esModule",{value:!0});Re.ecdhUnsafe=Re.ecdh=Re.recover=Re.verify=Re.sign=Re.signatureImportLax=Re.signatureImport=Re.signatureExport=Re.signatureNormalize=Re.publicKeyCombine=Re.publicKeyTweakMul=Re.publicKeyTweakAdd=Re.publicKeyVerify=Re.publicKeyConvert=Re.publicKeyCreate=Re.privateKeyTweakMul=Re.privateKeyTweakAdd=Re.privateKeyModInverse=Re.privateKeyNegate=Re.privateKeyImport=Re.privateKeyExport=Re.privateKeyVerify=void 0;var ai=kH(),J2=_H(),MP=BH();Re.privateKeyVerify=function(e){return e.length!==32?!1:ai.privateKeyVerify(Uint8Array.from(e))};Re.privateKeyExport=function(e,t){if(e.length!==32)throw new RangeError("private key length is invalid");var r=J2.privateKeyExport(e,t);return MP.privateKeyExport(e,r,t)};Re.privateKeyImport=function(e){if(e=MP.privateKeyImport(e),e!==null&&e.length===32&&Re.privateKeyVerify(e))return e;throw new Error("couldn't import from DER format")};Re.privateKeyNegate=function(e){return Buffer.from(ai.privateKeyNegate(Uint8Array.from(e)))};Re.privateKeyModInverse=function(e){if(e.length!==32)throw new Error("private key length is invalid");return Buffer.from(J2.privateKeyModInverse(Uint8Array.from(e)))};Re.privateKeyTweakAdd=function(e,t){return Buffer.from(ai.privateKeyTweakAdd(Uint8Array.from(e),t))};Re.privateKeyTweakMul=function(e,t){return Buffer.from(ai.privateKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t)))};Re.publicKeyCreate=function(e,t){return Buffer.from(ai.publicKeyCreate(Uint8Array.from(e),t))};Re.publicKeyConvert=function(e,t){return Buffer.from(ai.publicKeyConvert(Uint8Array.from(e),t))};Re.publicKeyVerify=function(e){return e.length!==33&&e.length!==65?!1:ai.publicKeyVerify(Uint8Array.from(e))};Re.publicKeyTweakAdd=function(e,t,r){return Buffer.from(ai.publicKeyTweakAdd(Uint8Array.from(e),Uint8Array.from(t),r))};Re.publicKeyTweakMul=function(e,t,r){return Buffer.from(ai.publicKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t),r))};Re.publicKeyCombine=function(e,t){var r=[];return e.forEach(function(n){r.push(Uint8Array.from(n))}),Buffer.from(ai.publicKeyCombine(r,t))};Re.signatureNormalize=function(e){return Buffer.from(ai.signatureNormalize(Uint8Array.from(e)))};Re.signatureExport=function(e){return Buffer.from(ai.signatureExport(Uint8Array.from(e)))};Re.signatureImport=function(e){return Buffer.from(ai.signatureImport(Uint8Array.from(e)))};Re.signatureImportLax=function(e){if(e.length===0)throw new RangeError("signature length is invalid");var t=MP.signatureImportLax(e);if(t===null)throw new Error("couldn't parse DER signature");return J2.signatureImport(t)};Re.sign=function(e,t,r){if(r===null)throw new TypeError("options should be an Object");var n=void 0;if(r){if(n={},r.data===null)throw new TypeError("options.data should be a Buffer");if(r.data){if(r.data.length!=32)throw new RangeError("options.data length is invalid");n.data=new Uint8Array(r.data)}if(r.noncefn===null)throw new TypeError("options.noncefn should be a Function");r.noncefn&&(n.noncefn=function(o,s,a,c,u){var h=a!=null?Buffer.from(a):null,l=c!=null?Buffer.from(c):null,g=Buffer.from("");return r.noncefn&&(g=r.noncefn(Buffer.from(o),Buffer.from(s),h,l,u)),new Uint8Array(g)})}var i=ai.ecdsaSign(Uint8Array.from(e),Uint8Array.from(t),n);return{signature:Buffer.from(i.signature),recovery:i.recid}};Re.verify=function(e,t,r){return ai.ecdsaVerify(Uint8Array.from(t),Uint8Array.from(e),r)};Re.recover=function(e,t,r,n){return Buffer.from(ai.ecdsaRecover(Uint8Array.from(t),r,Uint8Array.from(e),n))};Re.ecdh=function(e,t){return Buffer.from(ai.ecdh(Uint8Array.from(e),Uint8Array.from(t),{}))};Re.ecdhUnsafe=function(e,t,r){if(e.length!==33&&e.length!==65)throw new RangeError("public key length is invalid");if(t.length!==32)throw new RangeError("private key length is invalid");return Buffer.from(J2.ecdhUnsafe(Uint8Array.from(e),Uint8Array.from(t),r))}});var RP=L((wXe,CH)=>{p();y();CH.exports=function(t){if(typeof t!="string")throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.slice(0,2)==="0x"}});var RH=L((SXe,MH)=>{p();y();var Cwe=RP();MH.exports=function(t){return typeof t!="string"?t:Cwe(t)?t.slice(2):t}});var Vd=L((kXe,UH)=>{"use strict";p();y();var Mwe=RP(),OH=RH();function Q2(e){var t=e;if(typeof t!="string")throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}function NH(e){var t=e.toString(16);return"0x"+t}function Rwe(e){var t=NH(e);return new Buffer(Q2(t.slice(2)),"hex")}function Owe(e){if(typeof e!="string")throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return Buffer.byteLength(e,"utf8")}function Nwe(e,t,r){if(Array.isArray(e)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(Array.isArray(t)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[!!r&&"some"||"every"](function(n){return e.indexOf(n)>=0})}function Uwe(e){var t=new Buffer(Q2(OH(e).replace(/^0+|0+$/g,"")),"hex");return t.toString("utf8")}function Dwe(e){var t="",r=0,n=e.length;for(e.substring(0,2)==="0x"&&(r=2);r<n;r+=2){var i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t}function Lwe(e){var t=new Buffer(e,"utf8");return"0x"+Q2(t.toString("hex")).replace(/^0+|0+$/g,"")}function Kwe(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r),i=n.toString(16);t+=i.length<2?"0"+i:i}return"0x"+t}function Fwe(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if(typeof t!="string")throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var n=[],i=0;i<e.length;i++){var o=e[i][t];if(r&&!o)o="";else if(typeof o!="string")throw new Error("invalid abi");n.push(o)}return n}function Vwe(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}UH.exports={arrayContainsArray:Nwe,intToBuffer:Rwe,getBinarySize:Owe,isHexPrefixed:Mwe,stripHexPrefix:OH,padToEven:Q2,intToHex:NH,fromAscii:Kwe,fromUtf8:Lwe,toAscii:Dwe,toUtf8:Uwe,getKeys:Fwe,isHexString:Vwe}});var X2=L(rc=>{"use strict";p();y();var qwe=rc&&rc.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rc,"__esModule",{value:!0});rc.getLength=rc.decode=rc.encode=void 0;var Hwe=qwe(Hb());function LH(e){if(Array.isArray(e)){for(var t=[],r=0;r<e.length;r++)t.push(LH(e[r]));var n=Buffer.concat(t);return Buffer.concat([DH(n.length,192),n])}else{var i=DP(e);return i.length===1&&i[0]<128?i:Buffer.concat([DH(i.length,128),i])}}rc.encode=LH;function OP(e,t){if(e[0]==="0"&&e[1]==="0")throw new Error("invalid RLP: extra zeros");return parseInt(e,t)}function DH(e,t){if(e<56)return Buffer.from([e+t]);var r=UP(e),n=r.length/2,i=UP(t+55+n);return Buffer.from(i+r,"hex")}function Wwe(e,t){if(t===void 0&&(t=!1),!e||e.length===0)return Buffer.from([]);var r=DP(e),n=NP(r);if(t)return n;if(n.remainder.length!==0)throw new Error("invalid remainder");return n.data}rc.decode=Wwe;function zwe(e){if(!e||e.length===0)return Buffer.from([]);var t=DP(e),r=t[0];if(r<=127)return t.length;if(r<=183)return r-127;if(r<=191)return r-182;if(r<=247)return r-191;var n=r-246,i=OP(t.slice(1,n).toString("hex"),16);return n+i}rc.getLength=zwe;function NP(e){var t,r,n,i,o,s=[],a=e[0];if(a<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(a<=183){if(t=a-127,a===128?n=Buffer.from([]):n=e.slice(1,t),t===2&&n[0]<128)throw new Error("invalid rlp encoding: byte must be less 0x80");return{data:n,remainder:e.slice(t)}}else if(a<=191){if(r=a-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=OP(e.slice(1,r).toString("hex"),16),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");if(n=e.slice(r,t+r),n.length<t)throw new Error("invalid RLP: not enough bytes for string");return{data:n,remainder:e.slice(t+r)}}else if(a<=247){for(t=a-191,i=e.slice(1,t);i.length;)o=NP(i),s.push(o.data),i=o.remainder;return{data:s,remainder:e.slice(t)}}else{r=a-246,t=OP(e.slice(1,r).toString("hex"),16);var c=r+t;if(c>e.length)throw new Error("invalid rlp: total length is larger than the data");if(i=e.slice(r,c),i.length===0)throw new Error("invalid rlp, List has a invalid length");for(;i.length;)o=NP(i),s.push(o.data),i=o.remainder;return{data:s,remainder:e.slice(c)}}}function KH(e){return e.slice(0,2)==="0x"}function jwe(e){return typeof e!="string"?e:KH(e)?e.slice(2):e}function UP(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");var t=e.toString(16);return t.length%2?"0"+t:t}function Gwe(e){return e.length%2?"0"+e:e}function $we(e){var t=UP(e);return Buffer.from(t,"hex")}function DP(e){if(!Buffer.isBuffer(e)){if(typeof e=="string")return KH(e)?Buffer.from(Gwe(jwe(e)),"hex"):Buffer.from(e);if(typeof e=="number"||typeof e=="bigint")return e?$we(e):Buffer.from([]);if(e==null)return Buffer.from([]);if(e instanceof Uint8Array)return Buffer.from(e);if(Hwe.default.isBN(e))return Buffer.from(e.toArray());throw new Error("invalid type")}return e}});var VH=L(Jr=>{"use strict";p();y();Object.defineProperty(Jr,"__esModule",{value:!0});Jr.KECCAK256_RLP=Jr.KECCAK256_RLP_S=Jr.KECCAK256_RLP_ARRAY=Jr.KECCAK256_RLP_ARRAY_S=Jr.KECCAK256_NULL=Jr.KECCAK256_NULL_S=Jr.TWO_POW256=Jr.MAX_INTEGER=void 0;var FH=Kd(),{Buffer:LP}=Qr();Jr.MAX_INTEGER=new FH("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16);Jr.TWO_POW256=new FH("10000000000000000000000000000000000000000000000000000000000000000",16);Jr.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";Jr.KECCAK256_NULL=LP.from(Jr.KECCAK256_NULL_S,"hex");Jr.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";Jr.KECCAK256_RLP_ARRAY=LP.from(Jr.KECCAK256_RLP_ARRAY_S,"hex");Jr.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";Jr.KECCAK256_RLP=LP.from(Jr.KECCAK256_RLP_S,"hex")});var WH=L((NXe,HH)=>{"use strict";p();y();var Ywe=Object.prototype.toString,Jwe=Function.prototype.toString,Zwe=/^\s*(?:function)?\*/,qH=EE()(),KP=Object.getPrototypeOf,Qwe=function(){if(!qH)return!1;try{return Function("return function*() {}")()}catch{}},FP;HH.exports=function(t){if(typeof t!="function")return!1;if(Zwe.test(Jwe.call(t)))return!0;if(!qH){var r=Ywe.call(t);return r==="[object GeneratorFunction]"}if(!KP)return!1;if(typeof FP>"u"){var n=Qwe();FP=n?KP(n):!1}return KP(t)===FP}});var GH=L((LXe,jH)=>{"use strict";p();y();var Xwe=BY(),e1e=Object.prototype.toString,zH=Object.prototype.hasOwnProperty,t1e=function(t,r,n){for(var i=0,o=t.length;i<o;i++)zH.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t))},r1e=function(t,r,n){for(var i=0,o=t.length;i<o;i++)n==null?r(t.charAt(i),i,t):r.call(n,t.charAt(i),i,t)},n1e=function(t,r,n){for(var i in t)zH.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t))},i1e=function(t,r,n){if(!Xwe(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),e1e.call(t)==="[object Array]"?t1e(t,r,i):typeof t=="string"?r1e(t,r,i):n1e(t,r,i)};jH.exports=i1e});var qP=L((VXe,$H)=>{"use strict";p();y();var VP=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],o1e=typeof globalThis>"u"?self:globalThis;$H.exports=function(){for(var t=[],r=0;r<VP.length;r++)typeof o1e[VP[r]]=="function"&&(t[t.length]=VP[r]);return t}});var ZH=L((WXe,JH)=>{"use strict";p();y();var s1e="Function.prototype.bind called on incompatible ",a1e=Object.prototype.toString,c1e=Math.max,u1e="[object Function]",YH=function(t,r){for(var n=[],i=0;i<t.length;i+=1)n[i]=t[i];for(var o=0;o<r.length;o+=1)n[o+t.length]=r[o];return n},f1e=function(t,r){for(var n=[],i=r||0,o=0;i<t.length;i+=1,o+=1)n[o]=t[i];return n},l1e=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r};JH.exports=function(t){var r=this;if(typeof r!="function"||a1e.apply(r)!==u1e)throw new TypeError(s1e+r);for(var n=f1e(arguments,1),i,o=function(){if(this instanceof i){var h=r.apply(this,YH(n,arguments));return Object(h)===h?h:this}return r.apply(t,YH(n,arguments))},s=c1e(0,r.length-n.length),a=[],c=0;c<s;c++)a[c]="$"+c;if(i=Function("binder","return function ("+l1e(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i}});var XH=L((GXe,QH)=>{"use strict";p();y();var d1e=ZH();QH.exports=Function.prototype.bind||d1e});var HP=L((JXe,tW)=>{"use strict";p();y();var eW={foo:{}},h1e=Object;tW.exports=function(){return{__proto__:eW}.foo===eW.foo&&!({__proto__:null}instanceof h1e)}});var nW=L((XXe,rW)=>{"use strict";p();y();var p1e="Function.prototype.bind called on incompatible ",WP=Array.prototype.slice,y1e=Object.prototype.toString,m1e="[object Function]";rW.exports=function(t){var r=this;if(typeof r!="function"||y1e.call(r)!==m1e)throw new TypeError(p1e+r);for(var n=WP.call(arguments,1),i,o=function(){if(this instanceof i){var h=r.apply(this,n.concat(WP.call(arguments)));return Object(h)===h?h:this}else return r.apply(t,n.concat(WP.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],c=0;c<s;c++)a.push("$"+c);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i}});var oW=L((ret,iW)=>{"use strict";p();y();var g1e=nW();iW.exports=Function.prototype.bind||g1e});var rS=L((oet,fW)=>{"use strict";p();y();var Et,Tp=SyntaxError,uW=Function,kp=TypeError,zP=function(e){try{return uW('"use strict"; return ('+e+").constructor;")()}catch{}},qd=Object.getOwnPropertyDescriptor;if(qd)try{qd({},"")}catch{qd=null}var jP=function(){throw new kp},b1e=qd?function(){try{return arguments.callee,jP}catch{try{return qd(arguments,"callee").get}catch{return jP}}}():jP,Ep=aB()(),x1e=HP()(),Dn=Object.getPrototypeOf||(x1e?function(e){return e.__proto__}:null),Ip={},w1e=typeof Uint8Array>"u"||!Dn?Et:Dn(Uint8Array),Hd={"%AggregateError%":typeof AggregateError>"u"?Et:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Et:ArrayBuffer,"%ArrayIteratorPrototype%":Ep&&Dn?Dn([][Symbol.iterator]()):Et,"%AsyncFromSyncIteratorPrototype%":Et,"%AsyncFunction%":Ip,"%AsyncGenerator%":Ip,"%AsyncGeneratorFunction%":Ip,"%AsyncIteratorPrototype%":Ip,"%Atomics%":typeof Atomics>"u"?Et:Atomics,"%BigInt%":typeof BigInt>"u"?Et:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Et:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Et:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Et:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Et:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Et:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Et:FinalizationRegistry,"%Function%":uW,"%GeneratorFunction%":Ip,"%Int8Array%":typeof Int8Array>"u"?Et:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Et:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Et:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ep&&Dn?Dn(Dn([][Symbol.iterator]())):Et,"%JSON%":typeof JSON=="object"?JSON:Et,"%Map%":typeof Map>"u"?Et:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ep||!Dn?Et:Dn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Et:Promise,"%Proxy%":typeof Proxy>"u"?Et:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Et:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Et:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ep||!Dn?Et:Dn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Et:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ep&&Dn?Dn(""[Symbol.iterator]()):Et,"%Symbol%":Ep?Symbol:Et,"%SyntaxError%":Tp,"%ThrowTypeError%":b1e,"%TypedArray%":w1e,"%TypeError%":kp,"%Uint8Array%":typeof Uint8Array>"u"?Et:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Et:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Et:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Et:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Et:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Et:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Et:WeakSet};if(Dn)try{null.error}catch(e){sW=Dn(Dn(e)),Hd["%Error.prototype%"]=sW}var sW,v1e=function e(t){var r;if(t==="%AsyncFunction%")r=zP("async function () {}");else if(t==="%GeneratorFunction%")r=zP("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=zP("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&Dn&&(r=Dn(i.prototype))}return Hd[t]=r,r},aW={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ab=oW(),eS=cB(),A1e=ab.call(Function.call,Array.prototype.concat),S1e=ab.call(Function.apply,Array.prototype.splice),cW=ab.call(Function.call,String.prototype.replace),tS=ab.call(Function.call,String.prototype.slice),E1e=ab.call(Function.call,RegExp.prototype.exec),I1e=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,k1e=/\\(\\)?/g,T1e=function(t){var r=tS(t,0,1),n=tS(t,-1);if(r==="%"&&n!=="%")throw new Tp("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Tp("invalid intrinsic syntax, expected opening `%`");var i=[];return cW(t,I1e,function(o,s,a,c){i[i.length]=a?cW(c,k1e,"$1"):s||o}),i},P1e=function(t,r){var n=t,i;if(eS(aW,n)&&(i=aW[n],n="%"+i[0]+"%"),eS(Hd,n)){var o=Hd[n];if(o===Ip&&(o=v1e(n)),typeof o>"u"&&!r)throw new kp("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Tp("intrinsic "+t+" does not exist!")};fW.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new kp("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new kp('"allowMissing" argument must be a boolean');if(E1e(/^%?[^%]*%?$/,t)===null)throw new Tp("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=T1e(t),i=n.length>0?n[0]:"",o=P1e("%"+i+"%",r),s=o.name,a=o.value,c=!1,u=o.alias;u&&(i=u[0],S1e(n,A1e([0,1],u)));for(var h=1,l=!0;h<n.length;h+=1){var g=n[h],x=tS(g,0,1),A=tS(g,-1);if((x==='"'||x==="'"||x==="`"||A==='"'||A==="'"||A==="`")&&x!==A)throw new Tp("property names with quotes must have matching quotes");if((g==="constructor"||!l)&&(c=!0),i+="."+g,s="%"+i+"%",eS(Hd,s))a=Hd[s];else if(a!=null){if(!(g in a)){if(!r)throw new kp("base intrinsic for "+t+" exists, but the property is not available.");return}if(qd&&h+1>=n.length){var E=qd(a,g);l=!!E,l&&"get"in E&&!("originalValue"in E.get)?a=E.get:a=a[g]}else l=eS(a,g),a=a[g];l&&!c&&(Hd[s]=a)}}return a}});var dW=L((cet,lW)=>{"use strict";p();y();var _1e="Function.prototype.bind called on incompatible ",GP=Array.prototype.slice,B1e=Object.prototype.toString,C1e="[object Function]";lW.exports=function(t){var r=this;if(typeof r!="function"||B1e.call(r)!==C1e)throw new TypeError(_1e+r);for(var n=GP.call(arguments,1),i,o=function(){if(this instanceof i){var h=r.apply(this,n.concat(GP.call(arguments)));return Object(h)===h?h:this}else return r.apply(t,n.concat(GP.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],c=0;c<s;c++)a.push("$"+c);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i}});var pW=L((det,hW)=>{"use strict";p();y();var M1e=dW();hW.exports=Function.prototype.bind||M1e});var wW=L((yet,xW)=>{"use strict";p();y();var It,Cp=SyntaxError,bW=Function,Bp=TypeError,$P=function(e){try{return bW('"use strict"; return ('+e+").constructor;")()}catch{}},Wd=Object.getOwnPropertyDescriptor;if(Wd)try{Wd({},"")}catch{Wd=null}var YP=function(){throw new Bp},R1e=Wd?function(){try{return arguments.callee,YP}catch{try{return Wd(arguments,"callee").get}catch{return YP}}}():YP,Pp=aB()(),O1e=HP()(),Ln=Object.getPrototypeOf||(O1e?function(e){return e.__proto__}:null),_p={},N1e=typeof Uint8Array>"u"||!Ln?It:Ln(Uint8Array),zd={"%AggregateError%":typeof AggregateError>"u"?It:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?It:ArrayBuffer,"%ArrayIteratorPrototype%":Pp&&Ln?Ln([][Symbol.iterator]()):It,"%AsyncFromSyncIteratorPrototype%":It,"%AsyncFunction%":_p,"%AsyncGenerator%":_p,"%AsyncGeneratorFunction%":_p,"%AsyncIteratorPrototype%":_p,"%Atomics%":typeof Atomics>"u"?It:Atomics,"%BigInt%":typeof BigInt>"u"?It:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?It:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?It:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?It:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?It:Float32Array,"%Float64Array%":typeof Float64Array>"u"?It:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?It:FinalizationRegistry,"%Function%":bW,"%GeneratorFunction%":_p,"%Int8Array%":typeof Int8Array>"u"?It:Int8Array,"%Int16Array%":typeof Int16Array>"u"?It:Int16Array,"%Int32Array%":typeof Int32Array>"u"?It:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Pp&&Ln?Ln(Ln([][Symbol.iterator]())):It,"%JSON%":typeof JSON=="object"?JSON:It,"%Map%":typeof Map>"u"?It:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Pp||!Ln?It:Ln(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?It:Promise,"%Proxy%":typeof Proxy>"u"?It:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?It:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?It:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Pp||!Ln?It:Ln(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?It:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Pp&&Ln?Ln(""[Symbol.iterator]()):It,"%Symbol%":Pp?Symbol:It,"%SyntaxError%":Cp,"%ThrowTypeError%":R1e,"%TypedArray%":N1e,"%TypeError%":Bp,"%Uint8Array%":typeof Uint8Array>"u"?It:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?It:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?It:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?It:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?It:WeakMap,"%WeakRef%":typeof WeakRef>"u"?It:WeakRef,"%WeakSet%":typeof WeakSet>"u"?It:WeakSet};if(Ln)try{null.error}catch(e){yW=Ln(Ln(e)),zd["%Error.prototype%"]=yW}var yW,U1e=function e(t){var r;if(t==="%AsyncFunction%")r=$P("async function () {}");else if(t==="%GeneratorFunction%")r=$P("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=$P("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&Ln&&(r=Ln(i.prototype))}return zd[t]=r,r},mW={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},cb=pW(),nS=cB(),D1e=cb.call(Function.call,Array.prototype.concat),L1e=cb.call(Function.apply,Array.prototype.splice),gW=cb.call(Function.call,String.prototype.replace),iS=cb.call(Function.call,String.prototype.slice),K1e=cb.call(Function.call,RegExp.prototype.exec),F1e=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,V1e=/\\(\\)?/g,q1e=function(t){var r=iS(t,0,1),n=iS(t,-1);if(r==="%"&&n!=="%")throw new Cp("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Cp("invalid intrinsic syntax, expected opening `%`");var i=[];return gW(t,F1e,function(o,s,a,c){i[i.length]=a?gW(c,V1e,"$1"):s||o}),i},H1e=function(t,r){var n=t,i;if(nS(mW,n)&&(i=mW[n],n="%"+i[0]+"%"),nS(zd,n)){var o=zd[n];if(o===_p&&(o=U1e(n)),typeof o>"u"&&!r)throw new Bp("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Cp("intrinsic "+t+" does not exist!")};xW.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new Bp("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Bp('"allowMissing" argument must be a boolean');if(K1e(/^%?[^%]*%?$/,t)===null)throw new Cp("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=q1e(t),i=n.length>0?n[0]:"",o=H1e("%"+i+"%",r),s=o.name,a=o.value,c=!1,u=o.alias;u&&(i=u[0],L1e(n,D1e([0,1],u)));for(var h=1,l=!0;h<n.length;h+=1){var g=n[h],x=iS(g,0,1),A=iS(g,-1);if((x==='"'||x==="'"||x==="`"||A==='"'||A==="'"||A==="`")&&x!==A)throw new Cp("property names with quotes must have matching quotes");if((g==="constructor"||!l)&&(c=!0),i+="."+g,s="%"+i+"%",nS(zd,s))a=zd[s];else if(a!=null){if(!(g in a)){if(!r)throw new Bp("base intrinsic for "+t+" exists, but the property is not available.");return}if(Wd&&h+1>=n.length){var E=Wd(a,g);l=!!E,l&&"get"in E&&!("originalValue"in E.get)?a=E.get:a=a[g]}else l=nS(a,g),a=a[g];l&&!c&&(zd[s]=a)}}return a}});var SW=L((bet,AW)=>{"use strict";p();y();var W1e=fB()(),JP=wW(),ub=W1e&&JP("%Object.defineProperty%",!0);if(ub)try{ub({},"a",{value:1})}catch{ub=!1}var z1e=JP("%SyntaxError%"),Mp=JP("%TypeError%"),vW=jb();AW.exports=function(t,r,n){if(!t||typeof t!="object"&&typeof t!="function")throw new Mp("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Mp("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Mp("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Mp("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Mp("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Mp("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,c=!!vW&&vW(t,r);if(ub)ub(t,r,{configurable:s===null&&c?c.configurable:!s,enumerable:i===null&&c?c.enumerable:!i,value:n,writable:o===null&&c?c.writable:!o});else if(a||!i&&!o&&!s)t[r]=n;else throw new z1e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var _W=L((vet,PW)=>{"use strict";p();y();var TW=rS(),EW=SW(),j1e=fB()(),IW=jb(),kW=TW("%TypeError%"),G1e=TW("%Math.floor%");PW.exports=function(t,r){if(typeof t!="function")throw new kW("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||G1e(r)!==r)throw new kW("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in t&&IW){var s=IW(t,"length");s&&!s.configurable&&(i=!1),s&&!s.writable&&(o=!1)}return(i||o||!n)&&(j1e?EW(t,"length",r,!0,!0):EW(t,"length",r)),t}});var QP=L((Iet,oS)=>{"use strict";p();y();var ZP=XH(),Rp=rS(),$1e=_W(),Y1e=Rp("%TypeError%"),CW=Rp("%Function.prototype.apply%"),MW=Rp("%Function.prototype.call%"),RW=Rp("%Reflect.apply%",!0)||ZP.call(MW,CW),fb=Rp("%Object.defineProperty%",!0),J1e=Rp("%Math.max%");if(fb)try{fb({},"a",{value:1})}catch{fb=null}oS.exports=function(t){if(typeof t!="function")throw new Y1e("a function is required");var r=RW(ZP,MW,arguments);return $1e(r,1+J1e(0,t.length-(arguments.length-1)),!0)};var BW=function(){return RW(ZP,CW,arguments)};fb?fb(oS.exports,"apply",{value:BW}):oS.exports.apply=BW});var DW=L((Pet,UW)=>{"use strict";p();y();var OW=rS(),NW=QP(),Z1e=NW(OW("String.prototype.indexOf"));UW.exports=function(t,r){var n=OW(t,!!r);return typeof n=="function"&&Z1e(t,".prototype.")>-1?NW(n):n}});var qW=L((Cet,VW)=>{"use strict";p();y();var aS=GH(),Q1e=qP(),LW=QP(),t5=DW(),sS=jb(),X1e=t5("Object.prototype.toString"),FW=EE()(),KW=typeof globalThis>"u"?self:globalThis,e5=Q1e(),r5=t5("String.prototype.slice"),XP=Object.getPrototypeOf,eve=t5("Array.prototype.indexOf",!0)||function(t,r){for(var n=0;n<t.length;n+=1)if(t[n]===r)return n;return-1},cS={__proto__:null};FW&&sS&&XP?aS(e5,function(e){var t=new KW[e];if(Symbol.toStringTag in t){var r=XP(t),n=sS(r,Symbol.toStringTag);if(!n){var i=XP(r);n=sS(i,Symbol.toStringTag)}cS["$"+e]=LW(n.get)}}):aS(e5,function(e){var t=new KW[e],r=t.slice||t.set;r&&(cS["$"+e]=LW(r))});var tve=function(t){var r=!1;return aS(cS,function(n,i){if(!r)try{"$"+n(t)===i&&(r=r5(i,1))}catch{}}),r},rve=function(t){var r=!1;return aS(cS,function(n,i){if(!r)try{n(t),r=r5(i,1)}catch{}}),r};VW.exports=function(t){if(!t||typeof t!="object")return!1;if(!FW){var r=r5(X1e(t),8,-1);return eve(e5,r)>-1?r:r!=="Object"?!1:rve(t)}return sS?tve(t):null}});var WW=L((Oet,HW)=>{p();y();var nve=Object.prototype.hasOwnProperty,ive=Object.prototype.toString;HW.exports=function(t,r,n){if(ive.call(r)!=="[object Function]")throw new TypeError("iterator must be a function");var i=t.length;if(i===+i)for(var o=0;o<i;o++)r.call(n,t[o],o,t);else for(var s in t)nve.call(t,s)&&r.call(n,t[s],s,t)}});var jW=L((Det,zW)=>{"use strict";p();y();zW.exports=jb()});var QW=L((Fet,ZW)=>{"use strict";p();y();var GW=WW(),ove=qP(),i5=PY(),sve=i5("Object.prototype.toString"),$W=EE()(),ave=typeof globalThis>"u"?self:globalThis,YW=ove(),cve=i5("Array.prototype.indexOf",!0)||function(t,r){for(var n=0;n<t.length;n+=1)if(t[n]===r)return n;return-1},uve=i5("String.prototype.slice"),JW={},uS=jW(),n5=Object.getPrototypeOf;$W&&uS&&n5&&GW(YW,function(e){var t=new ave[e];if(Symbol.toStringTag in t){var r=n5(t),n=uS(r,Symbol.toStringTag);if(!n){var i=n5(r);n=uS(i,Symbol.toStringTag)}JW[e]=n.get}});var fve=function(t){var r=!1;return GW(JW,function(n,i){if(!r)try{r=n.call(t)===i}catch{}}),r};ZW.exports=function(t){if(!t||typeof t!="object")return!1;if(!$W||!(Symbol.toStringTag in t)){var r=uve(sve(t),8,-1);return cve(YW,r)>-1}return uS?fve(t):!1}});var dz=L(vt=>{"use strict";p();y();var lve=_Y(),dve=WH(),ca=qW(),XW=QW();function Op(e){return e.call.bind(e)}var ez=typeof BigInt<"u",tz=typeof Symbol<"u",ls=Op(Object.prototype.toString),hve=Op(Number.prototype.valueOf),pve=Op(String.prototype.valueOf),yve=Op(Boolean.prototype.valueOf);ez&&(rz=Op(BigInt.prototype.valueOf));var rz;tz&&(nz=Op(Symbol.prototype.valueOf));var nz;function db(e,t){if(typeof e!="object")return!1;try{return t(e),!0}catch{return!1}}vt.isArgumentsObject=lve;vt.isGeneratorFunction=dve;vt.isTypedArray=XW;function mve(e){return typeof Promise<"u"&&e instanceof Promise||e!==null&&typeof e=="object"&&typeof e.then=="function"&&typeof e.catch=="function"}vt.isPromise=mve;function gve(e){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(e):XW(e)||oz(e)}vt.isArrayBufferView=gve;function bve(e){return ca(e)==="Uint8Array"}vt.isUint8Array=bve;function xve(e){return ca(e)==="Uint8ClampedArray"}vt.isUint8ClampedArray=xve;function wve(e){return ca(e)==="Uint16Array"}vt.isUint16Array=wve;function vve(e){return ca(e)==="Uint32Array"}vt.isUint32Array=vve;function Ave(e){return ca(e)==="Int8Array"}vt.isInt8Array=Ave;function Sve(e){return ca(e)==="Int16Array"}vt.isInt16Array=Sve;function Eve(e){return ca(e)==="Int32Array"}vt.isInt32Array=Eve;function Ive(e){return ca(e)==="Float32Array"}vt.isFloat32Array=Ive;function kve(e){return ca(e)==="Float64Array"}vt.isFloat64Array=kve;function Tve(e){return ca(e)==="BigInt64Array"}vt.isBigInt64Array=Tve;function Pve(e){return ca(e)==="BigUint64Array"}vt.isBigUint64Array=Pve;function fS(e){return ls(e)==="[object Map]"}fS.working=typeof Map<"u"&&fS(new Map);function _ve(e){return typeof Map>"u"?!1:fS.working?fS(e):e instanceof Map}vt.isMap=_ve;function lS(e){return ls(e)==="[object Set]"}lS.working=typeof Set<"u"&&lS(new Set);function Bve(e){return typeof Set>"u"?!1:lS.working?lS(e):e instanceof Set}vt.isSet=Bve;function dS(e){return ls(e)==="[object WeakMap]"}dS.working=typeof WeakMap<"u"&&dS(new WeakMap);function Cve(e){return typeof WeakMap>"u"?!1:dS.working?dS(e):e instanceof WeakMap}vt.isWeakMap=Cve;function s5(e){return ls(e)==="[object WeakSet]"}s5.working=typeof WeakSet<"u"&&s5(new WeakSet);function Mve(e){return s5(e)}vt.isWeakSet=Mve;function hS(e){return ls(e)==="[object ArrayBuffer]"}hS.working=typeof ArrayBuffer<"u"&&hS(new ArrayBuffer);function iz(e){return typeof ArrayBuffer>"u"?!1:hS.working?hS(e):e instanceof ArrayBuffer}vt.isArrayBuffer=iz;function pS(e){return ls(e)==="[object DataView]"}pS.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&pS(new DataView(new ArrayBuffer(1),0,1));function oz(e){return typeof DataView>"u"?!1:pS.working?pS(e):e instanceof DataView}vt.isDataView=oz;var o5=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function lb(e){return ls(e)==="[object SharedArrayBuffer]"}function sz(e){return typeof o5>"u"?!1:(typeof lb.working>"u"&&(lb.working=lb(new o5)),lb.working?lb(e):e instanceof o5)}vt.isSharedArrayBuffer=sz;function Rve(e){return ls(e)==="[object AsyncFunction]"}vt.isAsyncFunction=Rve;function Ove(e){return ls(e)==="[object Map Iterator]"}vt.isMapIterator=Ove;function Nve(e){return ls(e)==="[object Set Iterator]"}vt.isSetIterator=Nve;function Uve(e){return ls(e)==="[object Generator]"}vt.isGeneratorObject=Uve;function Dve(e){return ls(e)==="[object WebAssembly.Module]"}vt.isWebAssemblyCompiledModule=Dve;function az(e){return db(e,hve)}vt.isNumberObject=az;function cz(e){return db(e,pve)}vt.isStringObject=cz;function uz(e){return db(e,yve)}vt.isBooleanObject=uz;function fz(e){return ez&&db(e,rz)}vt.isBigIntObject=fz;function lz(e){return tz&&db(e,nz)}vt.isSymbolObject=lz;function Lve(e){return az(e)||cz(e)||uz(e)||fz(e)||lz(e)}vt.isBoxedPrimitive=Lve;function Kve(e){return typeof Uint8Array<"u"&&(iz(e)||sz(e))}vt.isAnyArrayBuffer=Kve;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(e){Object.defineProperty(vt,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})})});var pz=L((jet,hz)=>{p();y();hz.exports=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}});var Up=L(At=>{p();y();var yz=Object.getOwnPropertyDescriptors||function(t){for(var r=Object.keys(t),n={},i=0;i<r.length;i++)n[r[i]]=Object.getOwnPropertyDescriptor(t,r[i]);return n},Fve=/%[sdj%]/g;At.format=function(e){if(!vS(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(Xf(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,i=n.length,o=String(e).replace(Fve,function(a){if(a==="%%")return"%";if(r>=i)return a;switch(a){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch{return"[Circular]"}default:return a}}),s=n[r];r<i;s=n[++r])wS(s)||!Np(s)?o+=" "+s:o+=" "+Xf(s);return o};At.deprecate=function(e,t){if(typeof process<"u"&&process.noDeprecation===!0)return e;if(typeof process>"u")return function(){return At.deprecate(e,t).apply(this,arguments)};var r=!1;function n(){if(!r){if(process.throwDeprecation)throw new Error(t);process.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}return n};var yS={},mz=/^$/;T.NODE_DEBUG&&(mS=T.NODE_DEBUG,mS=mS.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),mz=new RegExp("^"+mS+"$","i"));var mS;At.debuglog=function(e){if(e=e.toUpperCase(),!yS[e])if(mz.test(e)){var t=process.pid;yS[e]=function(){var r=At.format.apply(At,arguments);console.error("%s %d: %s",e,t,r)}}else yS[e]=function(){};return yS[e]};function Xf(e,t){var r={seen:[],stylize:qve};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),f5(t)?r.showHidden=t:t&&At._extend(r,t),Gd(r.showHidden)&&(r.showHidden=!1),Gd(r.depth)&&(r.depth=2),Gd(r.colors)&&(r.colors=!1),Gd(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=Vve),bS(r,e,r.depth)}At.inspect=Xf;Xf.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Xf.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Vve(e,t){var r=Xf.styles[t];return r?"\x1B["+Xf.colors[r][0]+"m"+e+"\x1B["+Xf.colors[r][1]+"m":e}function qve(e,t){return e}function Hve(e){var t={};return e.forEach(function(r,n){t[r]=!0}),t}function bS(e,t,r){if(e.customInspect&&t&&gS(t.inspect)&&t.inspect!==At.inspect&&!(t.constructor&&t.constructor.prototype===t)){var n=t.inspect(r,e);return vS(n)||(n=bS(e,n,r)),n}var i=Wve(e,t);if(i)return i;var o=Object.keys(t),s=Hve(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),pb(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return a5(t);if(o.length===0){if(gS(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(hb(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(xS(t))return e.stylize(Date.prototype.toString.call(t),"date");if(pb(t))return a5(t)}var c="",u=!1,h=["{","}"];if(gz(t)&&(u=!0,h=["[","]"]),gS(t)){var l=t.name?": "+t.name:"";c=" [Function"+l+"]"}if(hb(t)&&(c=" "+RegExp.prototype.toString.call(t)),xS(t)&&(c=" "+Date.prototype.toUTCString.call(t)),pb(t)&&(c=" "+a5(t)),o.length===0&&(!u||t.length==0))return h[0]+c+h[1];if(r<0)return hb(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var g;return u?g=zve(e,t,r,s,o):g=o.map(function(x){return u5(e,t,r,s,x,u)}),e.seen.pop(),jve(g,c,h)}function Wve(e,t){if(Gd(t))return e.stylize("undefined","undefined");if(vS(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(bz(t))return e.stylize(""+t,"number");if(f5(t))return e.stylize(""+t,"boolean");if(wS(t))return e.stylize("null","null")}function a5(e){return"["+Error.prototype.toString.call(e)+"]"}function zve(e,t,r,n,i){for(var o=[],s=0,a=t.length;s<a;++s)xz(t,String(s))?o.push(u5(e,t,r,n,String(s),!0)):o.push("");return i.forEach(function(c){c.match(/^\d+$/)||o.push(u5(e,t,r,n,c,!0))}),o}function u5(e,t,r,n,i,o){var s,a,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?c.set?a=e.stylize("[Getter/Setter]","special"):a=e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),xz(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(wS(r)?a=bS(e,c.value,null):a=bS(e,c.value,r-1),a.indexOf(`
`)>-1&&(o?a=a.split(`
`).map(function(u){return"  "+u}).join(`
`).slice(2):a=`
`+a.split(`
`).map(function(u){return"   "+u}).join(`
`))):a=e.stylize("[Circular]","special")),Gd(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.slice(1,-1),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function jve(e,t,r){var n=0,i=e.reduce(function(o,s){return n++,s.indexOf(`
`)>=0&&n++,o+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}At.types=dz();function gz(e){return Array.isArray(e)}At.isArray=gz;function f5(e){return typeof e=="boolean"}At.isBoolean=f5;function wS(e){return e===null}At.isNull=wS;function Gve(e){return e==null}At.isNullOrUndefined=Gve;function bz(e){return typeof e=="number"}At.isNumber=bz;function vS(e){return typeof e=="string"}At.isString=vS;function $ve(e){return typeof e=="symbol"}At.isSymbol=$ve;function Gd(e){return e===void 0}At.isUndefined=Gd;function hb(e){return Np(e)&&l5(e)==="[object RegExp]"}At.isRegExp=hb;At.types.isRegExp=hb;function Np(e){return typeof e=="object"&&e!==null}At.isObject=Np;function xS(e){return Np(e)&&l5(e)==="[object Date]"}At.isDate=xS;At.types.isDate=xS;function pb(e){return Np(e)&&(l5(e)==="[object Error]"||e instanceof Error)}At.isError=pb;At.types.isNativeError=pb;function gS(e){return typeof e=="function"}At.isFunction=gS;function Yve(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e>"u"}At.isPrimitive=Yve;At.isBuffer=pz();function l5(e){return Object.prototype.toString.call(e)}function c5(e){return e<10?"0"+e.toString(10):e.toString(10)}var Jve=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Zve(){var e=new Date,t=[c5(e.getHours()),c5(e.getMinutes()),c5(e.getSeconds())].join(":");return[e.getDate(),Jve[e.getMonth()],t].join(" ")}At.log=function(){console.log("%s - %s",Zve(),At.format.apply(At,arguments))};At.inherits=kY();At._extend=function(e,t){if(!t||!Np(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};function xz(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var jd=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;At.promisify=function(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');if(jd&&t[jd]){var r=t[jd];if(typeof r!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,jd,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var n,i,o=new Promise(function(c,u){n=c,i=u}),s=[],a=0;a<arguments.length;a++)s.push(arguments[a]);s.push(function(c,u){c?i(c):n(u)});try{t.apply(this,s)}catch(c){i(c)}return o}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),jd&&Object.defineProperty(r,jd,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,yz(t))};At.promisify.custom=jd;function Qve(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function Xve(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');function t(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};e.apply(this,r).then(function(a){process.nextTick(s.bind(null,null,a))},function(a){process.nextTick(Qve.bind(null,a,s))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,yz(e)),t}At.callbackify=Xve});var y5=L((Qet,Az)=>{"use strict";p();y();function Dp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Dp=function(r){return typeof r}:Dp=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Dp(e)}function eAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tAe(e,t){return t&&(Dp(t)==="object"||typeof t=="function")?t:rAe(e)}function rAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h5(e){return h5=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},h5(e)}function nAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p5(e,t)}function p5(e,t){return p5=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},p5(e,t)}var vz={},Lp,d5;function yb(e,t,r){r||(r=Error);function n(o,s,a){return typeof t=="string"?t:t(o,s,a)}var i=function(o){nAe(s,o);function s(a,c,u){var h;return eAe(this,s),h=tAe(this,h5(s).call(this,n(a,c,u))),h.code=e,h}return s}(r);vz[e]=i}function wz(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(n){return String(n)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function iAe(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function oAe(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function sAe(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}yb("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError);yb("ERR_INVALID_ARG_TYPE",function(e,t,r){Lp===void 0&&(Lp=mb()),Lp(typeof e=="string","'name' must be a string");var n;typeof t=="string"&&iAe(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";var i;if(oAe(e," argument"))i="The ".concat(e," ").concat(n," ").concat(wz(t,"type"));else{var o=sAe(e,".")?"property":"argument";i='The "'.concat(e,'" ').concat(o," ").concat(n," ").concat(wz(t,"type"))}return i+=". Received type ".concat(Dp(r)),i},TypeError);yb("ERR_INVALID_ARG_VALUE",function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";d5===void 0&&(d5=Up());var n=d5.inspect(t);return n.length>128&&(n="".concat(n.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(r,". Received ").concat(n)},TypeError,RangeError);yb("ERR_INVALID_RETURN_VALUE",function(e,t,r){var n;return r&&r.constructor&&r.constructor.name?n="instance of ".concat(r.constructor.name):n="type ".concat(Dp(r)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(n,".")},TypeError);yb("ERR_MISSING_ARGS",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Lp===void 0&&(Lp=mb()),Lp(t.length>0,"At least one arg needs to be specified");var n="The ",i=t.length;switch(t=t.map(function(o){return'"'.concat(o,'"')}),i){case 1:n+="".concat(t[0]," argument");break;case 2:n+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:n+=t.slice(0,i-1).join(", "),n+=", and ".concat(t[i-1]," arguments");break}return"".concat(n," must be specified")},TypeError);Az.exports.codes=vz});var Tz=L((ttt,kz)=>{"use strict";p();y();function aAe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){cAe(e,i,r[i])})}return e}function cAe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fAe(e,t,r){return t&&Sz(e.prototype,t),r&&Sz(e,r),e}function Kp(e,t){return t&&(ds(t)==="object"||typeof t=="function")?t:m5(e)}function m5(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wb(e,t)}function g5(e){var t=typeof Map=="function"?new Map:void 0;return g5=function(n){if(n===null||!hAe(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(n))return t.get(n);t.set(n,i)}function i(){return AS(n,arguments,el(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),wb(i,n)},g5(e)}function dAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function AS(e,t,r){return dAe()?AS=Reflect.construct:AS=function(i,o,s){var a=[null];a.push.apply(a,o);var c=Function.bind.apply(i,a),u=new c;return s&&wb(u,s.prototype),u},AS.apply(null,arguments)}function hAe(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function wb(e,t){return wb=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},wb(e,t)}function el(e){return el=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},el(e)}function ds(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ds=function(r){return typeof r}:ds=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ds(e)}var pAe=Up(),b5=pAe.inspect,yAe=y5(),mAe=yAe.codes.ERR_INVALID_ARG_TYPE;function Ez(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function gAe(e,t){if(t=Math.floor(t),e.length==0||t==0)return"";var r=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+=e.substring(0,r-e.length),e}var ua="",gb="",bb="",ci="",$d={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},bAe=10;function Iz(e){var t=Object.keys(e),r=Object.create(Object.getPrototypeOf(e));return t.forEach(function(n){r[n]=e[n]}),Object.defineProperty(r,"message",{value:e.message}),r}function xb(e){return b5(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function xAe(e,t,r){var n="",i="",o=0,s="",a=!1,c=xb(e),u=c.split(`
`),h=xb(t).split(`
`),l=0,g="";if(r==="strictEqual"&&ds(e)==="object"&&ds(t)==="object"&&e!==null&&t!==null&&(r="strictEqualObject"),u.length===1&&h.length===1&&u[0]!==h[0]){var x=u[0].length+h[0].length;if(x<=bAe){if((ds(e)!=="object"||e===null)&&(ds(t)!=="object"||t===null)&&(e!==0||t!==0))return"".concat($d[r],`

`)+"".concat(u[0]," !== ").concat(h[0],`
`)}else if(r!=="strictEqualObject"){var A=process.stderr&&process.stderr.isTTY?process.stderr.columns:80;if(x<A){for(;u[0][l]===h[0][l];)l++;l>2&&(g=`
  `.concat(gAe(" ",l),"^"),l=0)}}}for(var E=u[u.length-1],B=h[h.length-1];E===B&&(l++<2?s=`
  `.concat(E).concat(s):n=E,u.pop(),h.pop(),!(u.length===0||h.length===0));)E=u[u.length-1],B=h[h.length-1];var M=Math.max(u.length,h.length);if(M===0){var N=c.split(`
`);if(N.length>30)for(N[26]="".concat(ua,"...").concat(ci);N.length>27;)N.pop();return"".concat($d.notIdentical,`

`).concat(N.join(`
`),`
`)}l>3&&(s=`
`.concat(ua,"...").concat(ci).concat(s),a=!0),n!==""&&(s=`
  `.concat(n).concat(s),n="");var R=0,V=$d[r]+`
`.concat(gb,"+ actual").concat(ci," ").concat(bb,"- expected").concat(ci),q=" ".concat(ua,"...").concat(ci," Lines skipped");for(l=0;l<M;l++){var W=l-o;if(u.length<l+1)W>1&&l>2&&(W>4?(i+=`
`.concat(ua,"...").concat(ci),a=!0):W>3&&(i+=`
  `.concat(h[l-2]),R++),i+=`
  `.concat(h[l-1]),R++),o=l,n+=`
`.concat(bb,"-").concat(ci," ").concat(h[l]),R++;else if(h.length<l+1)W>1&&l>2&&(W>4?(i+=`
`.concat(ua,"...").concat(ci),a=!0):W>3&&(i+=`
  `.concat(u[l-2]),R++),i+=`
  `.concat(u[l-1]),R++),o=l,i+=`
`.concat(gb,"+").concat(ci," ").concat(u[l]),R++;else{var G=h[l],z=u[l],te=z!==G&&(!Ez(z,",")||z.slice(0,-1)!==G);te&&Ez(G,",")&&G.slice(0,-1)===z&&(te=!1,z+=","),te?(W>1&&l>2&&(W>4?(i+=`
`.concat(ua,"...").concat(ci),a=!0):W>3&&(i+=`
  `.concat(u[l-2]),R++),i+=`
  `.concat(u[l-1]),R++),o=l,i+=`
`.concat(gb,"+").concat(ci," ").concat(z),n+=`
`.concat(bb,"-").concat(ci," ").concat(G),R+=2):(i+=n,n="",(W===1||l===0)&&(i+=`
  `.concat(z),R++))}if(R>20&&l<M-2)return"".concat(V).concat(q,`
`).concat(i,`
`).concat(ua,"...").concat(ci).concat(n,`
`)+"".concat(ua,"...").concat(ci)}return"".concat(V).concat(a?q:"",`
`).concat(i).concat(n).concat(s).concat(g)}var wAe=function(e){lAe(t,e);function t(r){var n;if(uAe(this,t),ds(r)!=="object"||r===null)throw new mAe("options","Object",r);var i=r.message,o=r.operator,s=r.stackStartFn,a=r.actual,c=r.expected,u=Error.stackTraceLimit;if(Error.stackTraceLimit=0,i!=null)n=Kp(this,el(t).call(this,String(i)));else if(process.stderr&&process.stderr.isTTY&&(process.stderr&&process.stderr.getColorDepth&&process.stderr.getColorDepth()!==1?(ua="\x1B[34m",gb="\x1B[32m",ci="\x1B[39m",bb="\x1B[31m"):(ua="",gb="",ci="",bb="")),ds(a)==="object"&&a!==null&&ds(c)==="object"&&c!==null&&"stack"in a&&a instanceof Error&&"stack"in c&&c instanceof Error&&(a=Iz(a),c=Iz(c)),o==="deepStrictEqual"||o==="strictEqual")n=Kp(this,el(t).call(this,xAe(a,c,o)));else if(o==="notDeepStrictEqual"||o==="notStrictEqual"){var h=$d[o],l=xb(a).split(`
`);if(o==="notStrictEqual"&&ds(a)==="object"&&a!==null&&(h=$d.notStrictEqualObject),l.length>30)for(l[26]="".concat(ua,"...").concat(ci);l.length>27;)l.pop();l.length===1?n=Kp(this,el(t).call(this,"".concat(h," ").concat(l[0]))):n=Kp(this,el(t).call(this,"".concat(h,`

`).concat(l.join(`
`),`
`)))}else{var g=xb(a),x="",A=$d[o];o==="notDeepEqual"||o==="notEqual"?(g="".concat($d[o],`

`).concat(g),g.length>1024&&(g="".concat(g.slice(0,1021),"..."))):(x="".concat(xb(c)),g.length>512&&(g="".concat(g.slice(0,509),"...")),x.length>512&&(x="".concat(x.slice(0,509),"...")),o==="deepEqual"||o==="equal"?g="".concat(A,`

`).concat(g,`

should equal

`):x=" ".concat(o," ").concat(x)),n=Kp(this,el(t).call(this,"".concat(g).concat(x)))}return Error.stackTraceLimit=u,n.generatedMessage=!i,Object.defineProperty(m5(n),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),n.code="ERR_ASSERTION",n.actual=a,n.expected=c,n.operator=o,Error.captureStackTrace&&Error.captureStackTrace(m5(n),s),n.stack,n.name="AssertionError",Kp(n)}return fAe(t,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:b5.custom,value:function(n,i){return b5(this,aAe({},i,{customInspect:!1,depth:0}))}}]),t}(g5(Error));kz.exports=wAe});var Bz=L((itt,_z)=>{"use strict";p();y();function Pz(e,t){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var o=Object.keys(Object(i)),s=0,a=o.length;s<a;s++){var c=o[s],u=Object.getOwnPropertyDescriptor(i,c);u!==void 0&&u.enumerable&&(r[c]=i[c])}}return r}function vAe(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:Pz})}_z.exports={assign:Pz,polyfill:vAe}});var x5=L((att,Mz)=>{"use strict";p();y();var Cz=function(e){return e!==e};Mz.exports=function(t,r){return t===0&&r===0?1/t===1/r:!!(t===r||Cz(t)&&Cz(r))}});var w5=L((ftt,Rz)=>{"use strict";p();y();var AAe=x5();Rz.exports=function(){return typeof Object.is=="function"?Object.is:AAe}});var Nz=L((htt,Oz)=>{"use strict";p();y();var SAe=w5(),EAe=zb();Oz.exports=function(){var t=SAe();return EAe(Object,{is:t},{is:function(){return Object.is!==t}}),t}});var v5=L((mtt,Lz)=>{"use strict";p();y();var IAe=zb(),kAe=uB(),TAe=x5(),Uz=w5(),PAe=Nz(),Dz=kAe(Uz(),Object);IAe(Dz,{getPolyfill:Uz,implementation:TAe,shim:PAe});Lz.exports=Dz});var A5=L((xtt,Kz)=>{"use strict";p();y();Kz.exports=function(t){return t!==t}});var S5=L((Att,Fz)=>{"use strict";p();y();var _Ae=A5();Fz.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:_Ae}});var qz=L((Itt,Vz)=>{"use strict";p();y();var BAe=zb(),CAe=S5();Vz.exports=function(){var t=CAe();return BAe(Number,{isNaN:t},{isNaN:function(){return Number.isNaN!==t}}),t}});var jz=L((Ptt,zz)=>{"use strict";p();y();var MAe=uB(),RAe=zb(),OAe=A5(),Hz=S5(),NAe=qz(),Wz=MAe(Hz(),Number);RAe(Wz,{getPolyfill:Hz,implementation:OAe,shim:NAe});zz.exports=Wz});var lj=L((Ctt,fj)=>{"use strict";p();y();function Gz(e,t){return LAe(e)||DAe(e,t)||UAe()}function UAe(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function DAe(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var s=e[Symbol.iterator](),a;!(n=(a=s.next()).done)&&(r.push(a.value),!(t&&r.length===t));n=!0);}catch(c){i=!0,o=c}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw o}}return r}function LAe(e){if(Array.isArray(e))return e}function Mo(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Mo=function(r){return typeof r}:Mo=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Mo(e)}var KAe=/a/g.flags!==void 0,_S=function(t){var r=[];return t.forEach(function(n){return r.push(n)}),r},$z=function(t){var r=[];return t.forEach(function(n,i){return r.push([i,n])}),r},oj=Object.is?Object.is:v5(),TS=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},E5=Number.isNaN?Number.isNaN:jz();function k5(e){return e.call.bind(e)}var Ab=k5(Object.prototype.hasOwnProperty),PS=k5(Object.prototype.propertyIsEnumerable),Yz=k5(Object.prototype.toString),qi=Up().types,FAe=qi.isAnyArrayBuffer,VAe=qi.isArrayBufferView,Jz=qi.isDate,SS=qi.isMap,Zz=qi.isRegExp,ES=qi.isSet,qAe=qi.isNativeError,HAe=qi.isBoxedPrimitive,Qz=qi.isNumberObject,Xz=qi.isStringObject,ej=qi.isBooleanObject,tj=qi.isBigIntObject,WAe=qi.isSymbolObject,zAe=qi.isFloat32Array,jAe=qi.isFloat64Array;function GAe(e){if(e.length===0||e.length>10)return!0;for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r<48||r>57)return!0}return e.length===10&&e>=Math.pow(2,32)}function IS(e){return Object.keys(e).filter(GAe).concat(TS(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function sj(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}var kS=void 0,$Ae=!0,YAe=!1,I5=0,T5=1,aj=2,cj=3;function JAe(e,t){return KAe?e.source===t.source&&e.flags===t.flags:RegExp.prototype.toString.call(e)===RegExp.prototype.toString.call(t)}function ZAe(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function QAe(e,t){return e.byteLength!==t.byteLength?!1:sj(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))===0}function XAe(e,t){return e.byteLength===t.byteLength&&sj(new Uint8Array(e),new Uint8Array(t))===0}function e2e(e,t){return Qz(e)?Qz(t)&&oj(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):Xz(e)?Xz(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):ej(e)?ej(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):tj(e)?tj(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):WAe(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}function hs(e,t,r,n){if(e===t)return e!==0?!0:r?oj(e,t):!0;if(r){if(Mo(e)!=="object")return typeof e=="number"&&E5(e)&&E5(t);if(Mo(t)!=="object"||e===null||t===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(e===null||Mo(e)!=="object")return t===null||Mo(t)!=="object"?e==t:!1;if(t===null||Mo(t)!=="object")return!1}var i=Yz(e),o=Yz(t);if(i!==o)return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var s=IS(e,kS),a=IS(t,kS);return s.length!==a.length?!1:vb(e,t,r,n,T5,s)}if(i==="[object Object]"&&(!SS(e)&&SS(t)||!ES(e)&&ES(t)))return!1;if(Jz(e)){if(!Jz(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(Zz(e)){if(!Zz(t)||!JAe(e,t))return!1}else if(qAe(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else if(VAe(e)){if(!r&&(zAe(e)||jAe(e))){if(!ZAe(e,t))return!1}else if(!QAe(e,t))return!1;var c=IS(e,kS),u=IS(t,kS);return c.length!==u.length?!1:vb(e,t,r,n,I5,c)}else{if(ES(e))return!ES(t)||e.size!==t.size?!1:vb(e,t,r,n,aj);if(SS(e))return!SS(t)||e.size!==t.size?!1:vb(e,t,r,n,cj);if(FAe(e)){if(!XAe(e,t))return!1}else if(HAe(e)&&!e2e(e,t))return!1}return vb(e,t,r,n,I5)}function rj(e,t){return t.filter(function(r){return PS(e,r)})}function vb(e,t,r,n,i,o){if(arguments.length===5){o=Object.keys(e);var s=Object.keys(t);if(o.length!==s.length)return!1}for(var a=0;a<o.length;a++)if(!Ab(t,o[a]))return!1;if(r&&arguments.length===5){var c=TS(e);if(c.length!==0){var u=0;for(a=0;a<c.length;a++){var h=c[a];if(PS(e,h)){if(!PS(t,h))return!1;o.push(h),u++}else if(PS(t,h))return!1}var l=TS(t);if(c.length!==l.length&&rj(t,l).length!==u)return!1}else{var g=TS(t);if(g.length!==0&&rj(t,g).length!==0)return!1}}if(o.length===0&&(i===I5||i===T5&&e.length===0||e.size===0))return!0;if(n===void 0)n={val1:new Map,val2:new Map,position:0};else{var x=n.val1.get(e);if(x!==void 0){var A=n.val2.get(t);if(A!==void 0)return x===A}n.position++}n.val1.set(e,n.position),n.val2.set(t,n.position);var E=o2e(e,t,r,o,n,i);return n.val1.delete(e),n.val2.delete(t),E}function nj(e,t,r,n){for(var i=_S(e),o=0;o<i.length;o++){var s=i[o];if(hs(t,s,r,n))return e.delete(s),!0}return!1}function uj(e){switch(Mo(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(E5(e))return!1}return!0}function t2e(e,t,r){var n=uj(r);return n??(t.has(n)&&!e.has(n))}function r2e(e,t,r,n,i){var o=uj(r);if(o!=null)return o;var s=t.get(o);return s===void 0&&!t.has(o)||!hs(n,s,!1,i)?!1:!e.has(o)&&hs(n,s,!1,i)}function n2e(e,t,r,n){for(var i=null,o=_S(e),s=0;s<o.length;s++){var a=o[s];if(Mo(a)==="object"&&a!==null)i===null&&(i=new Set),i.add(a);else if(!t.has(a)){if(r||!t2e(e,t,a))return!1;i===null&&(i=new Set),i.add(a)}}if(i!==null){for(var c=_S(t),u=0;u<c.length;u++){var h=c[u];if(Mo(h)==="object"&&h!==null){if(!nj(i,h,r,n))return!1}else if(!r&&!e.has(h)&&!nj(i,h,r,n))return!1}return i.size===0}return!0}function ij(e,t,r,n,i,o){for(var s=_S(e),a=0;a<s.length;a++){var c=s[a];if(hs(r,c,i,o)&&hs(n,t.get(c),i,o))return e.delete(c),!0}return!1}function i2e(e,t,r,n){for(var i=null,o=$z(e),s=0;s<o.length;s++){var a=Gz(o[s],2),c=a[0],u=a[1];if(Mo(c)==="object"&&c!==null)i===null&&(i=new Set),i.add(c);else{var h=t.get(c);if(h===void 0&&!t.has(c)||!hs(u,h,r,n)){if(r||!r2e(e,t,c,u,n))return!1;i===null&&(i=new Set),i.add(c)}}}if(i!==null){for(var l=$z(t),g=0;g<l.length;g++){var x=Gz(l[g],2),c=x[0],A=x[1];if(Mo(c)==="object"&&c!==null){if(!ij(i,e,c,A,r,n))return!1}else if(!r&&(!e.has(c)||!hs(e.get(c),A,!1,n))&&!ij(i,e,c,A,!1,n))return!1}return i.size===0}return!0}function o2e(e,t,r,n,i,o){var s=0;if(o===aj){if(!n2e(e,t,r,i))return!1}else if(o===cj){if(!i2e(e,t,r,i))return!1}else if(o===T5)for(;s<e.length;s++)if(Ab(e,s)){if(!Ab(t,s)||!hs(e[s],t[s],r,i))return!1}else{if(Ab(t,s))return!1;for(var a=Object.keys(e);s<a.length;s++){var c=a[s];if(!Ab(t,c)||!hs(e[c],t[c],r,i))return!1}return a.length===Object.keys(t).length}for(s=0;s<n.length;s++){var u=n[s];if(!hs(e[u],t[u],r,i))return!1}return!0}function s2e(e,t){return hs(e,t,YAe)}function a2e(e,t){return hs(e,t,$Ae)}fj.exports={isDeepEqual:s2e,isDeepStrictEqual:a2e}});var mb=L((Ott,Tj)=>{"use strict";p();y();function tl(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?tl=function(r){return typeof r}:tl=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},tl(e)}function c2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u2e=y5(),Eb=u2e.codes,dj=Eb.ERR_AMBIGUOUS_ARGUMENT,Sb=Eb.ERR_INVALID_ARG_TYPE,f2e=Eb.ERR_INVALID_ARG_VALUE,l2e=Eb.ERR_INVALID_RETURN_VALUE,nl=Eb.ERR_MISSING_ARGS,Yd=Tz(),d2e=Up(),h2e=d2e.inspect,mj=Up().types,p2e=mj.isPromise,P5=mj.isRegExp,y2e=Object.assign?Object.assign:Bz().assign,gj=Object.is?Object.is:v5(),rl,BS;function Ib(){var e=lj();rl=e.isDeepEqual,BS=e.isDeepStrictEqual}var hj=!1,Pr=Tj.exports=_5,CS={};function fa(e){throw e.message instanceof Error?e.message:new Yd(e)}function bj(e,t,r,n,i){var o=arguments.length,s;if(o===0)s="Failed";else if(o===1)r=e,e=void 0;else{if(hj===!1){hj=!0;var a=process.emitWarning?process.emitWarning:console.warn.bind(console);a("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}o===2&&(n="!=")}if(r instanceof Error)throw r;var c={actual:e,expected:t,operator:n===void 0?"fail":n,stackStartFn:i||bj};r!==void 0&&(c.message=r);var u=new Yd(c);throw s&&(u.message=s,u.generatedMessage=!0),u}Pr.fail=bj;Pr.AssertionError=Yd;function xj(e,t,r,n){if(!r){var i=!1;if(t===0)i=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var o=new Yd({actual:r,expected:!0,message:n,operator:"==",stackStartFn:e});throw o.generatedMessage=i,o}}function _5(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];xj.apply(void 0,[_5,t.length].concat(t))}Pr.ok=_5;Pr.equal=function e(t,r,n){if(arguments.length<2)throw new nl("actual","expected");t!=r&&fa({actual:t,expected:r,message:n,operator:"==",stackStartFn:e})};Pr.notEqual=function e(t,r,n){if(arguments.length<2)throw new nl("actual","expected");t==r&&fa({actual:t,expected:r,message:n,operator:"!=",stackStartFn:e})};Pr.deepEqual=function e(t,r,n){if(arguments.length<2)throw new nl("actual","expected");rl===void 0&&Ib(),rl(t,r)||fa({actual:t,expected:r,message:n,operator:"deepEqual",stackStartFn:e})};Pr.notDeepEqual=function e(t,r,n){if(arguments.length<2)throw new nl("actual","expected");rl===void 0&&Ib(),rl(t,r)&&fa({actual:t,expected:r,message:n,operator:"notDeepEqual",stackStartFn:e})};Pr.deepStrictEqual=function e(t,r,n){if(arguments.length<2)throw new nl("actual","expected");rl===void 0&&Ib(),BS(t,r)||fa({actual:t,expected:r,message:n,operator:"deepStrictEqual",stackStartFn:e})};Pr.notDeepStrictEqual=wj;function wj(e,t,r){if(arguments.length<2)throw new nl("actual","expected");rl===void 0&&Ib(),BS(e,t)&&fa({actual:e,expected:t,message:r,operator:"notDeepStrictEqual",stackStartFn:wj})}Pr.strictEqual=function e(t,r,n){if(arguments.length<2)throw new nl("actual","expected");gj(t,r)||fa({actual:t,expected:r,message:n,operator:"strictEqual",stackStartFn:e})};Pr.notStrictEqual=function e(t,r,n){if(arguments.length<2)throw new nl("actual","expected");gj(t,r)&&fa({actual:t,expected:r,message:n,operator:"notStrictEqual",stackStartFn:e})};var pj=function e(t,r,n){var i=this;c2e(this,e),r.forEach(function(o){o in t&&(n!==void 0&&typeof n[o]=="string"&&P5(t[o])&&t[o].test(n[o])?i[o]=n[o]:i[o]=t[o])})};function m2e(e,t,r,n,i,o){if(!(r in e)||!BS(e[r],t[r])){if(!n){var s=new pj(e,i),a=new pj(t,i,e),c=new Yd({actual:s,expected:a,operator:"deepStrictEqual",stackStartFn:o});throw c.actual=e,c.expected=t,c.operator=o.name,c}fa({actual:e,expected:t,message:n,operator:o.name,stackStartFn:o})}}function vj(e,t,r,n){if(typeof t!="function"){if(P5(t))return t.test(e);if(arguments.length===2)throw new Sb("expected",["Function","RegExp"],t);if(tl(e)!=="object"||e===null){var i=new Yd({actual:e,expected:t,message:r,operator:"deepStrictEqual",stackStartFn:n});throw i.operator=n.name,i}var o=Object.keys(t);if(t instanceof Error)o.push("name","message");else if(o.length===0)throw new f2e("error",t,"may not be an empty object");return rl===void 0&&Ib(),o.forEach(function(s){typeof e[s]=="string"&&P5(t[s])&&t[s].test(e[s])||m2e(e,t,s,r,o,n)}),!0}return t.prototype!==void 0&&e instanceof t?!0:Error.isPrototypeOf(t)?!1:t.call({},e)===!0}function Aj(e){if(typeof e!="function")throw new Sb("fn","Function",e);try{e()}catch(t){return t}return CS}function yj(e){return p2e(e)||e!==null&&tl(e)==="object"&&typeof e.then=="function"&&typeof e.catch=="function"}function Sj(e){return Promise.resolve().then(function(){var t;if(typeof e=="function"){if(t=e(),!yj(t))throw new l2e("instance of Promise","promiseFn",t)}else if(yj(e))t=e;else throw new Sb("promiseFn",["Function","Promise"],e);return Promise.resolve().then(function(){return t}).then(function(){return CS}).catch(function(r){return r})})}function Ej(e,t,r,n){if(typeof r=="string"){if(arguments.length===4)throw new Sb("error",["Object","Error","Function","RegExp"],r);if(tl(t)==="object"&&t!==null){if(t.message===r)throw new dj("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===r)throw new dj("error/message",'The error "'.concat(t,'" is identical to the message.'));n=r,r=void 0}else if(r!=null&&tl(r)!=="object"&&typeof r!="function")throw new Sb("error",["Object","Error","Function","RegExp"],r);if(t===CS){var i="";r&&r.name&&(i+=" (".concat(r.name,")")),i+=n?": ".concat(n):".";var o=e.name==="rejects"?"rejection":"exception";fa({actual:void 0,expected:r,operator:e.name,message:"Missing expected ".concat(o).concat(i),stackStartFn:e})}if(r&&!vj(t,r,n,e))throw t}function Ij(e,t,r,n){if(t!==CS){if(typeof r=="string"&&(n=r,r=void 0),!r||vj(t,r)){var i=n?": ".concat(n):".",o=e.name==="doesNotReject"?"rejection":"exception";fa({actual:t,expected:r,operator:e.name,message:"Got unwanted ".concat(o).concat(i,`
`)+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}Pr.throws=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];Ej.apply(void 0,[e,Aj(t)].concat(n))};Pr.rejects=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Sj(t).then(function(o){return Ej.apply(void 0,[e,o].concat(n))})};Pr.doesNotThrow=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];Ij.apply(void 0,[e,Aj(t)].concat(n))};Pr.doesNotReject=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Sj(t).then(function(o){return Ij.apply(void 0,[e,o].concat(n))})};Pr.ifError=function e(t){if(t!=null){var r="ifError got unwanted exception: ";tl(t)==="object"&&typeof t.message=="string"?t.message.length===0&&t.constructor?r+=t.constructor.name:r+=t.message:r+=h2e(t);var n=new Yd({actual:t,expected:null,operator:"ifError",message:r,stackStartFn:e}),i=t.stack;if(typeof i=="string"){var o=i.split(`
`);o.shift();for(var s=n.stack.split(`
`),a=0;a<o.length;a++){var c=s.indexOf(o[a]);if(c!==-1){s=s.slice(0,c);break}}n.stack="".concat(s.join(`
`),`
`).concat(o.join(`
`))}throw n}};function kj(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];xj.apply(void 0,[kj,t.length].concat(t))}Pr.strict=y2e(kj,Pr,{equal:Pr.strictEqual,deepEqual:Pr.deepStrictEqual,notEqual:Pr.notStrictEqual,notDeepEqual:Pr.notDeepStrictEqual});Pr.strict.strict=Pr.strict});var Vp=L(kt=>{"use strict";p();y();Object.defineProperty(kt,"__esModule",{value:!0});kt.baToJSON=kt.addHexPrefix=kt.toUnsigned=kt.fromSigned=kt.bufferToHex=kt.bufferToInt=kt.toBuffer=kt.stripZeros=kt.unpad=kt.setLengthRight=kt.setLength=kt.setLengthLeft=kt.zeros=void 0;var Fp=Vd(),B5=Kd();kt.zeros=function(e){return Buffer.allocUnsafe(e).fill(0)};kt.setLengthLeft=function(e,t,r){r===void 0&&(r=!1);var n=kt.zeros(t);return e=kt.toBuffer(e),r?e.length<t?(e.copy(n),n):e.slice(0,t):e.length<t?(e.copy(n,t-e.length),n):e.slice(-t)};kt.setLength=kt.setLengthLeft;kt.setLengthRight=function(e,t){return kt.setLength(e,t,!0)};kt.unpad=function(e){e=Fp.stripHexPrefix(e);for(var t=e[0];e.length>0&&t.toString()==="0";)e=e.slice(1),t=e[0];return e};kt.stripZeros=kt.unpad;kt.toBuffer=function(e){if(!Buffer.isBuffer(e))if(Array.isArray(e))e=Buffer.from(e);else if(typeof e=="string")if(Fp.isHexString(e))e=Buffer.from(Fp.padToEven(Fp.stripHexPrefix(e)),"hex");else throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: "+e);else if(typeof e=="number")e=Fp.intToBuffer(e);else if(e==null)e=Buffer.allocUnsafe(0);else if(B5.isBN(e))e=e.toArrayLike(Buffer);else if(e.toArray)e=Buffer.from(e.toArray());else throw new Error("invalid type");return e};kt.bufferToInt=function(e){return new B5(kt.toBuffer(e)).toNumber()};kt.bufferToHex=function(e){return e=kt.toBuffer(e),"0x"+e.toString("hex")};kt.fromSigned=function(e){return new B5(e).fromTwos(256)};kt.toUnsigned=function(e){return Buffer.from(e.toTwos(256).toArray())};kt.addHexPrefix=function(e){return typeof e!="string"||Fp.isHexPrefixed(e)?e:"0x"+e};kt.baToJSON=function(e){if(Buffer.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var t=[],r=0;r<e.length;r++)t.push(kt.baToJSON(e[r]));return t}}});var Pj=L(C5=>{"use strict";p();y();Object.defineProperty(C5,"__esModule",{value:!0});function g2e(e){return function(t){var r=e();return r.update(t),Buffer.from(r.digest())}}C5.createHashFunction=g2e});var Cj=L((Htt,Bj)=>{p();y();var{Transform:b2e}=j_();Bj.exports=e=>class _j extends b2e{constructor(r,n,i,o,s){super(s),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._hashBitLength=o,this._options=s,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let o=null;try{this.update(r,n)}catch(s){o=s}i(o)}_flush(r){let n=null;try{this.push(this.digest())}catch(i){n=i}r(n)}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new _j(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var Oj=L((jtt,Rj)=>{p();y();var{Transform:x2e}=j_();Rj.exports=e=>class Mj extends x2e{constructor(r,n,i,o){super(o),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._options=o,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let o=null;try{this.update(r,n)}catch(s){o=s}i(o)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(r);return n!==void 0&&(i=i.toString(n)),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new Mj(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var Uj=L((Ytt,Nj)=>{p();y();var w2e=Cj(),v2e=Oj();Nj.exports=function(e){let t=w2e(e),r=v2e(e);return function(n,i){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new t(1152,448,null,224,i);case"keccak256":return new t(1088,512,null,256,i);case"keccak384":return new t(832,768,null,384,i);case"keccak512":return new t(576,1024,null,512,i);case"sha3-224":return new t(1152,448,6,224,i);case"sha3-256":return new t(1088,512,6,256,i);case"sha3-384":return new t(832,768,6,384,i);case"sha3-512":return new t(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw new Error("Invald algorithm: "+n)}}}});var Kj=L(Lj=>{p();y();var Dj=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];Lj.p1600=function(e){for(let t=0;t<24;++t){let r=e[0]^e[10]^e[20]^e[30]^e[40],n=e[1]^e[11]^e[21]^e[31]^e[41],i=e[2]^e[12]^e[22]^e[32]^e[42],o=e[3]^e[13]^e[23]^e[33]^e[43],s=e[4]^e[14]^e[24]^e[34]^e[44],a=e[5]^e[15]^e[25]^e[35]^e[45],c=e[6]^e[16]^e[26]^e[36]^e[46],u=e[7]^e[17]^e[27]^e[37]^e[47],h=e[8]^e[18]^e[28]^e[38]^e[48],l=e[9]^e[19]^e[29]^e[39]^e[49],g=h^(i<<1|o>>>31),x=l^(o<<1|i>>>31),A=e[0]^g,E=e[1]^x,B=e[10]^g,M=e[11]^x,N=e[20]^g,R=e[21]^x,V=e[30]^g,q=e[31]^x,W=e[40]^g,G=e[41]^x;g=r^(s<<1|a>>>31),x=n^(a<<1|s>>>31);let z=e[2]^g,te=e[3]^x,_=e[12]^g,f=e[13]^x,m=e[22]^g,b=e[23]^x,v=e[32]^g,w=e[33]^x,P=e[42]^g,C=e[43]^x;g=i^(c<<1|u>>>31),x=o^(u<<1|c>>>31);let k=e[4]^g,d=e[5]^x,S=e[14]^g,F=e[15]^x,U=e[24]^g,D=e[25]^x,Y=e[34]^g,j=e[35]^x,ee=e[44]^g,le=e[45]^x;g=s^(h<<1|l>>>31),x=a^(l<<1|h>>>31);let fe=e[6]^g,K=e[7]^x,Z=e[16]^g,J=e[17]^x,ne=e[26]^g,pe=e[27]^x,re=e[36]^g,ce=e[37]^x,ut=e[46]^g,Ee=e[47]^x;g=c^(r<<1|n>>>31),x=u^(n<<1|r>>>31);let _e=e[8]^g,Do=e[9]^x,Oe=e[18]^g,Be=e[19]^x,ga=e[28]^g,Ce=e[29]^x,nt=e[38]^g,gu=e[39]^x,it=e[48]^g,ot=e[49]^x,dc=A,Ne=E,Ue=M<<4|B>>>28,hc=B<<4|M>>>28,De=N<<3|R>>>29,Le=R<<3|N>>>29,pc=q<<9|V>>>23,Ke=V<<9|q>>>23,Fe=W<<18|G>>>14,yc=G<<18|W>>>14,Ve=z<<1|te>>>31,qe=te<<1|z>>>31,mc=f<<12|_>>>20,He=_<<12|f>>>20,We=m<<10|b>>>22,gc=b<<10|m>>>22,ze=w<<13|v>>>19,je=v<<13|w>>>19,bc=P<<2|C>>>30,Ge=C<<2|P>>>30,$e=d<<30|k>>>2,xc=k<<30|d>>>2,Ye=S<<6|F>>>26,Je=F<<6|S>>>26,wc=D<<11|U>>>21,Ze=U<<11|D>>>21,Qe=Y<<15|j>>>17,vc=j<<15|Y>>>17,Xe=le<<29|ee>>>3,et=ee<<29|le>>>3,Ac=fe<<28|K>>>4,tt=K<<28|fe>>>4,rt=J<<23|Z>>>9,gs=Z<<23|J>>>9,bs=ne<<25|pe>>>7,xs=pe<<25|ne>>>7,ws=re<<21|ce>>>11,vs=ce<<21|re>>>11,As=Ee<<24|ut>>>8,Ss=ut<<24|Ee>>>8,Es=_e<<27|Do>>>5,Is=Do<<27|_e>>>5,ks=Oe<<20|Be>>>12,Ts=Be<<20|Oe>>>12,Ps=Ce<<7|ga>>>25,_s=ga<<7|Ce>>>25,Bs=nt<<8|gu>>>24,Cs=gu<<8|nt>>>24,Ms=it<<14|ot>>>18,Rs=ot<<14|it>>>18;e[0]=dc^~mc&wc,e[1]=Ne^~He&Ze,e[10]=Ac^~ks&De,e[11]=tt^~Ts&Le,e[20]=Ve^~Ye&bs,e[21]=qe^~Je&xs,e[30]=Es^~Ue&We,e[31]=Is^~hc&gc,e[40]=$e^~rt&Ps,e[41]=xc^~gs&_s,e[2]=mc^~wc&ws,e[3]=He^~Ze&vs,e[12]=ks^~De&ze,e[13]=Ts^~Le&je,e[22]=Ye^~bs&Bs,e[23]=Je^~xs&Cs,e[32]=Ue^~We&Qe,e[33]=hc^~gc&vc,e[42]=rt^~Ps&pc,e[43]=gs^~_s&Ke,e[4]=wc^~ws&Ms,e[5]=Ze^~vs&Rs,e[14]=De^~ze&Xe,e[15]=Le^~je&et,e[24]=bs^~Bs&Fe,e[25]=xs^~Cs&yc,e[34]=We^~Qe&As,e[35]=gc^~vc&Ss,e[44]=Ps^~pc&bc,e[45]=_s^~Ke&Ge,e[6]=ws^~Ms&dc,e[7]=vs^~Rs&Ne,e[16]=ze^~Xe&Ac,e[17]=je^~et&tt,e[26]=Bs^~Fe&Ve,e[27]=Cs^~yc&qe,e[36]=Qe^~As&Es,e[37]=vc^~Ss&Is,e[46]=pc^~bc&$e,e[47]=Ke^~Ge&xc,e[8]=Ms^~dc&mc,e[9]=Rs^~Ne&He,e[18]=Xe^~Ac&ks,e[19]=et^~tt&Ts,e[28]=Fe^~Ve&Ye,e[29]=yc^~qe&Je,e[38]=As^~Es&Ue,e[39]=Ss^~Is&hc,e[48]=bc^~$e&rt,e[49]=Ge^~xc&gs,e[0]^=Dj[t*2],e[1]^=Dj[t*2+1]}}});var Vj=L((trt,Fj)=>{p();y();var MS=Kj();function qp(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}qp.prototype.initialize=function(e,t){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1};qp.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(MS.p1600(this.state),this.count=0)};qp.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<8*(this.count%4),e&128&&this.count===this.blockSize-1&&MS.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),MS.p1600(this.state),this.count=0,this.squeezing=!0};qp.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);let t=Buffer.alloc(e);for(let r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(MS.p1600(this.state),this.count=0);return t};qp.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing};Fj.exports=qp});var Hj=L((irt,qj)=>{p();y();qj.exports=Uj()(Vj())});var Wj=L(Hp=>{"use strict";p();y();Object.defineProperty(Hp,"__esModule",{value:!0});var RS=Pj(),OS=Hj();Hp.keccak224=RS.createHashFunction(function(){return OS("keccak224")});Hp.keccak256=RS.createHashFunction(function(){return OS("keccak256")});Hp.keccak384=RS.createHashFunction(function(){return OS("keccak384")});Hp.keccak512=RS.createHashFunction(function(){return OS("keccak512")})});var DS=L(oo=>{"use strict";p();y();Object.defineProperty(oo,"__esModule",{value:!0});oo.rlphash=oo.ripemd160=oo.sha256=oo.keccak256=oo.keccak=void 0;var US=Wj(),A2e=US.keccak224,S2e=US.keccak384,E2e=US.keccak256,I2e=US.keccak512,zj=G_(),k2e=Vd(),T2e=X2(),NS=Vp();oo.keccak=function(e,t){switch(t===void 0&&(t=256),typeof e=="string"&&!k2e.isHexString(e)?e=Buffer.from(e,"utf8"):e=NS.toBuffer(e),t||(t=256),t){case 224:return A2e(e);case 256:return E2e(e);case 384:return S2e(e);case 512:return I2e(e);default:throw new Error("Invald algorithm: keccak"+t)}};oo.keccak256=function(e){return oo.keccak(e)};oo.sha256=function(e){return e=NS.toBuffer(e),zj("sha256").update(e).digest()};oo.ripemd160=function(e,t){e=NS.toBuffer(e);var r=zj("rmd160").update(e).digest();return t===!0?NS.setLength(r,32):r};oo.rlphash=function(e){return oo.keccak(T2e.encode(e))}});var jj=L(mt=>{"use strict";p();y();Object.defineProperty(mt,"__esModule",{value:!0});mt.importPublic=mt.privateToPublic=mt.privateToAddress=mt.publicToAddress=mt.pubToAddress=mt.isValidPublic=mt.isValidPrivate=mt.isPrecompiled=mt.generateAddress2=mt.generateAddress=mt.isValidChecksumAddress=mt.toChecksumAddress=mt.isZeroAddress=mt.isValidAddress=mt.zeroAddress=void 0;var M5=mb(),P2e=Vd(),Wp=Z2(),_2e=Kd(),la=Vp(),zp=DS();mt.zeroAddress=function(){var e=20,t=la.zeros(e);return la.bufferToHex(t)};mt.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)};mt.isZeroAddress=function(e){var t=mt.zeroAddress();return t===la.addHexPrefix(e)};mt.toChecksumAddress=function(e,t){e=P2e.stripHexPrefix(e).toLowerCase();for(var r=t!==void 0?t.toString()+"0x":"",n=zp.keccak(r+e).toString("hex"),i="0x",o=0;o<e.length;o++)parseInt(n[o],16)>=8?i+=e[o].toUpperCase():i+=e[o];return i};mt.isValidChecksumAddress=function(e,t){return mt.isValidAddress(e)&&mt.toChecksumAddress(e,t)===e};mt.generateAddress=function(e,t){e=la.toBuffer(e);var r=new _2e(t);return r.isZero()?zp.rlphash([e,null]).slice(-20):zp.rlphash([e,Buffer.from(r.toArray())]).slice(-20)};mt.generateAddress2=function(e,t,r){var n=la.toBuffer(e),i=la.toBuffer(t),o=la.toBuffer(r);M5(n.length===20),M5(i.length===32);var s=zp.keccak256(Buffer.concat([Buffer.from("ff","hex"),n,i,zp.keccak256(o)]));return s.slice(-20)};mt.isPrecompiled=function(e){var t=la.unpad(e);return t.length===1&&t[0]>=1&&t[0]<=8};mt.isValidPrivate=function(e){return Wp.privateKeyVerify(e)};mt.isValidPublic=function(e,t){return t===void 0&&(t=!1),e.length===64?Wp.publicKeyVerify(Buffer.concat([Buffer.from([4]),e])):t?Wp.publicKeyVerify(e):!1};mt.pubToAddress=function(e,t){return t===void 0&&(t=!1),e=la.toBuffer(e),t&&e.length!==64&&(e=Wp.publicKeyConvert(e,!1).slice(1)),M5(e.length===64),zp.keccak(e).slice(-20)};mt.publicToAddress=mt.pubToAddress;mt.privateToAddress=function(e){return mt.publicToAddress(mt.privateToPublic(e))};mt.privateToPublic=function(e){return e=la.toBuffer(e),Wp.publicKeyCreate(e,!1).slice(1)};mt.importPublic=function(e){return e=la.toBuffer(e),e.length!==64&&(e=Wp.publicKeyConvert(e,!1).slice(1)),e}});var Gj=L(so=>{"use strict";p();y();Object.defineProperty(so,"__esModule",{value:!0});so.hashPersonalMessage=so.isValidSignature=so.fromRpcSig=so.toRpcSig=so.ecrecover=so.ecsign=void 0;var R5=Z2(),LS=Kd(),Jd=Vp(),B2e=DS();so.ecsign=function(e,t,r){var n=R5.sign(e,t),i=n.recovery,o={r:n.signature.slice(0,32),s:n.signature.slice(32,64),v:r?i+(r*2+35):i+27};return o};so.ecrecover=function(e,t,r,n,i){var o=Buffer.concat([Jd.setLength(r,32),Jd.setLength(n,32)],64),s=O5(t,i);if(!N5(s))throw new Error("Invalid signature v value");var a=R5.recover(e,o,s);return R5.publicKeyConvert(a,!1).slice(1)};so.toRpcSig=function(e,t,r,n){var i=O5(e,n);if(!N5(i))throw new Error("Invalid signature v value");return Jd.bufferToHex(Buffer.concat([Jd.setLengthLeft(t,32),Jd.setLengthLeft(r,32),Jd.toBuffer(e)]))};so.fromRpcSig=function(e){var t=Jd.toBuffer(e);if(t.length!==65)throw new Error("Invalid signature length");var r=t[64];return r<27&&(r+=27),{v:r,r:t.slice(0,32),s:t.slice(32,64)}};so.isValidSignature=function(e,t,r,n,i){n===void 0&&(n=!0);var o=new LS("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),s=new LS("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(t.length!==32||r.length!==32||!N5(O5(e,i)))return!1;var a=new LS(t),c=new LS(r);return!(a.isZero()||a.gt(s)||c.isZero()||c.gt(s)||n&&c.cmp(o)===1)};so.hashPersonalMessage=function(e){var t=Buffer.from(`Ethereum Signed Message:
`+e.length.toString(),"utf-8");return B2e.keccak(Buffer.concat([t,e]))};function O5(e,t){return t?e-(2*t+35):e-27}function N5(e){return e===0||e===1}});var Jj=L(FS=>{"use strict";p();y();Object.defineProperty(FS,"__esModule",{value:!0});FS.defineProperties=void 0;var $j=mb(),C2e=Vd(),Yj=X2(),KS=Vp();FS.defineProperties=function(e,t,r){if(e.raw=[],e._fields=[],e.toJSON=function(i){if(i===void 0&&(i=!1),i){var o={};return e._fields.forEach(function(s){o[s]="0x"+e[s].toString("hex")}),o}return KS.baToJSON(e.raw)},e.serialize=function(){return Yj.encode(e.raw)},t.forEach(function(i,o){e._fields.push(i.name);function s(){return e.raw[o]}function a(c){c=KS.toBuffer(c),c.toString("hex")==="00"&&!i.allowZero&&(c=Buffer.allocUnsafe(0)),i.allowLess&&i.length?(c=KS.stripZeros(c),$j(i.length>=c.length,"The field "+i.name+" must not have more "+i.length+" bytes")):!(i.allowZero&&c.length===0)&&i.length&&$j(i.length===c.length,"The field "+i.name+" must have byte length of "+i.length),e.raw[o]=c}Object.defineProperty(e,i.name,{enumerable:!0,configurable:!0,get:s,set:a}),i.default&&(e[i.name]=i.default),i.alias&&Object.defineProperty(e,i.alias,{enumerable:!1,configurable:!0,set:a,get:s})}),r)if(typeof r=="string"&&(r=Buffer.from(C2e.stripHexPrefix(r),"hex")),Buffer.isBuffer(r)&&(r=Yj.decode(r)),Array.isArray(r)){if(r.length>e._fields.length)throw new Error("wrong number of fields in data");r.forEach(function(i,o){e[e._fields[o]]=KS.toBuffer(i)})}else if(typeof r=="object"){var n=Object.keys(r);t.forEach(function(i){n.indexOf(i.name)!==-1&&(e[i.name]=r[i.name]),n.indexOf(i.alias)!==-1&&(e[i.alias]=r[i.alias])})}else throw new Error("invalid data")}});var kb=L(In=>{"use strict";p();y();var M2e=In&&In.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),jp=In&&In.__exportStar||function(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&M2e(t,e,r)};Object.defineProperty(In,"__esModule",{value:!0});In.secp256k1=In.rlp=In.BN=void 0;var R2e=Z2();In.secp256k1=R2e;var O2e=Vd(),N2e=Kd();In.BN=N2e;var U2e=X2();In.rlp=U2e;Object.assign(In,O2e);jp(VH(),In);jp(jj(),In);jp(DS(),In);jp(Gj(),In);jp(Vp(),In);jp(Jj(),In)});var Tb=L(ao=>{"use strict";p();y();Object.defineProperty(ao,"__esModule",{value:!0});ao.normalize=ao.recoverPublicKey=ao.concatSig=ao.legacyToBuffer=ao.isNullish=ao.padWithZeroes=void 0;var ps=kb(),U5=Vd();function D5(e,t){if(e!==""&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}ao.padWithZeroes=D5;function D2e(e){return e==null}ao.isNullish=D2e;function L2e(e){return typeof e=="string"&&!U5.isHexString(e)?Buffer.from(e):ps.toBuffer(e)}ao.legacyToBuffer=L2e;function K2e(e,t,r){let n=ps.fromSigned(t),i=ps.fromSigned(r),o=ps.bufferToInt(e),s=D5(ps.toUnsigned(n).toString("hex"),64),a=D5(ps.toUnsigned(i).toString("hex"),64),c=U5.stripHexPrefix(U5.intToHex(o));return ps.addHexPrefix(s.concat(a,c))}ao.concatSig=K2e;function F2e(e,t){let r=ps.fromRpcSig(t);return ps.ecrecover(e,r.v,r.r,r.s)}ao.recoverPublicKey=F2e;function V2e(e){if(e){if(typeof e=="number"){let t=ps.toBuffer(e);e=ps.bufferToHex(t)}if(typeof e!="string"){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return ps.addHexPrefix(e.toLowerCase())}}ao.normalize=V2e});var Qj=L(il=>{"use strict";p();y();Object.defineProperty(il,"__esModule",{value:!0});il.extractPublicKey=il.recoverPersonalSignature=il.personalSign=void 0;var Gp=kb(),nc=Tb();function q2e({privateKey:e,data:t}){if(nc.isNullish(t))throw new Error("Missing data parameter");if(nc.isNullish(e))throw new Error("Missing privateKey parameter");let r=nc.legacyToBuffer(t),n=Gp.hashPersonalMessage(r),i=Gp.ecsign(n,e);return nc.concatSig(Gp.toBuffer(i.v),i.r,i.s)}il.personalSign=q2e;function H2e({data:e,signature:t}){if(nc.isNullish(e))throw new Error("Missing data parameter");if(nc.isNullish(t))throw new Error("Missing signature parameter");let r=Zj(e,t),n=Gp.publicToAddress(r);return Gp.bufferToHex(n)}il.recoverPersonalSignature=H2e;function W2e({data:e,signature:t}){if(nc.isNullish(e))throw new Error("Missing data parameter");if(nc.isNullish(t))throw new Error("Missing signature parameter");return`0x${Zj(e,t).toString("hex")}`}il.extractPublicKey=W2e;function Zj(e,t){let r=Gp.hashPersonalMessage(nc.legacyToBuffer(e));return nc.recoverPublicKey(r,t)}});var eG=L((Xj,L5)=>{p();y();(function(e,t){"use strict";function r(_,f){if(!_)throw new Error(f||"Assertion failed")}function n(_,f){_.super_=f;var m=function(){};m.prototype=f.prototype,_.prototype=new m,_.prototype.constructor=_}function i(_,f,m){if(i.isBN(_))return _;this.negative=0,this.words=null,this.length=0,this.red=null,_!==null&&((f==="le"||f==="be")&&(m=f,f=10),this._init(_||0,f||10,m||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof self<"u"&&typeof self.Buffer<"u"?o=self.Buffer:o=$_().Buffer}catch{}i.isBN=function(f){return f instanceof i?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===i.wordSize&&Array.isArray(f.words)},i.max=function(f,m){return f.cmp(m)>0?f:m},i.min=function(f,m){return f.cmp(m)<0?f:m},i.prototype._init=function(f,m,b){if(typeof f=="number")return this._initNumber(f,m,b);if(typeof f=="object")return this._initArray(f,m,b);m==="hex"&&(m=16),r(m===(m|0)&&m>=2&&m<=36),f=f.toString().replace(/\s+/g,"");var v=0;f[0]==="-"&&(v++,this.negative=1),v<f.length&&(m===16?this._parseHex(f,v,b):(this._parseBase(f,m,v),b==="le"&&this._initArray(this.toArray(),m,b)))},i.prototype._initNumber=function(f,m,b){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(r(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),m,b)},i.prototype._initArray=function(f,m,b){if(r(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var w,P,C=0;if(b==="be")for(v=f.length-1,w=0;v>=0;v-=3)P=f[v]|f[v-1]<<8|f[v-2]<<16,this.words[w]|=P<<C&67108863,this.words[w+1]=P>>>26-C&67108863,C+=24,C>=26&&(C-=26,w++);else if(b==="le")for(v=0,w=0;v<f.length;v+=3)P=f[v]|f[v+1]<<8|f[v+2]<<16,this.words[w]|=P<<C&67108863,this.words[w+1]=P>>>26-C&67108863,C+=24,C>=26&&(C-=26,w++);return this.strip()};function s(_,f){var m=_.charCodeAt(f);return m>=65&&m<=70?m-55:m>=97&&m<=102?m-87:m-48&15}function a(_,f,m){var b=s(_,m);return m-1>=f&&(b|=s(_,m-1)<<4),b}i.prototype._parseHex=function(f,m,b){this.length=Math.ceil((f.length-m)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var w=0,P=0,C;if(b==="be")for(v=f.length-1;v>=m;v-=2)C=a(f,m,v)<<w,this.words[P]|=C&67108863,w>=18?(w-=18,P+=1,this.words[P]|=C>>>26):w+=8;else{var k=f.length-m;for(v=k%2===0?m+1:m;v<f.length;v+=2)C=a(f,m,v)<<w,this.words[P]|=C&67108863,w>=18?(w-=18,P+=1,this.words[P]|=C>>>26):w+=8}this.strip()};function c(_,f,m,b){for(var v=0,w=Math.min(_.length,m),P=f;P<w;P++){var C=_.charCodeAt(P)-48;v*=b,C>=49?v+=C-49+10:C>=17?v+=C-17+10:v+=C}return v}i.prototype._parseBase=function(f,m,b){this.words=[0],this.length=1;for(var v=0,w=1;w<=67108863;w*=m)v++;v--,w=w/m|0;for(var P=f.length-b,C=P%v,k=Math.min(P,P-C)+b,d=0,S=b;S<k;S+=v)d=c(f,S,S+v,m),this.imuln(w),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(C!==0){var F=1;for(d=c(f,S,f.length,m),S=0;S<C;S++)F*=m;this.imuln(F),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},i.prototype.copy=function(f){f.words=new Array(this.length);for(var m=0;m<this.length;m++)f.words[m]=this.words[m];f.length=this.length,f.negative=this.negative,f.red=this.red},i.prototype.clone=function(){var f=new i(null);return this.copy(f),f},i.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(f,m){f=f||10,m=m|0||1;var b;if(f===16||f==="hex"){b="";for(var v=0,w=0,P=0;P<this.length;P++){var C=this.words[P],k=((C<<v|w)&16777215).toString(16);w=C>>>24-v&16777215,w!==0||P!==this.length-1?b=u[6-k.length]+k+b:b=k+b,v+=2,v>=26&&(v-=26,P--)}for(w!==0&&(b=w.toString(16)+b);b.length%m!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(f===(f|0)&&f>=2&&f<=36){var d=h[f],S=l[f];b="";var F=this.clone();for(F.negative=0;!F.isZero();){var U=F.modn(S).toString(f);F=F.idivn(S),F.isZero()?b=U+b:b=u[d-U.length]+U+b}for(this.isZero()&&(b="0"+b);b.length%m!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(f,m){return r(typeof o<"u"),this.toArrayLike(o,f,m)},i.prototype.toArray=function(f,m){return this.toArrayLike(Array,f,m)},i.prototype.toArrayLike=function(f,m,b){var v=this.byteLength(),w=b||Math.max(1,v);r(v<=w,"byte array longer than desired length"),r(w>0,"Requested array length <= 0"),this.strip();var P=m==="le",C=new f(w),k,d,S=this.clone();if(P){for(d=0;!S.isZero();d++)k=S.andln(255),S.iushrn(8),C[d]=k;for(;d<w;d++)C[d]=0}else{for(d=0;d<w-v;d++)C[d]=0;for(d=0;!S.isZero();d++)k=S.andln(255),S.iushrn(8),C[w-d-1]=k}return C},Math.clz32?i.prototype._countBits=function(f){return 32-Math.clz32(f)}:i.prototype._countBits=function(f){var m=f,b=0;return m>=4096&&(b+=13,m>>>=13),m>=64&&(b+=7,m>>>=7),m>=8&&(b+=4,m>>>=4),m>=2&&(b+=2,m>>>=2),b+m},i.prototype._zeroBits=function(f){if(f===0)return 26;var m=f,b=0;return m&8191||(b+=13,m>>>=13),m&127||(b+=7,m>>>=7),m&15||(b+=4,m>>>=4),m&3||(b+=2,m>>>=2),m&1||b++,b},i.prototype.bitLength=function(){var f=this.words[this.length-1],m=this._countBits(f);return(this.length-1)*26+m};function g(_){for(var f=new Array(_.bitLength()),m=0;m<f.length;m++){var b=m/26|0,v=m%26;f[m]=(_.words[b]&1<<v)>>>v}return f}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,m=0;m<this.length;m++){var b=this._zeroBits(this.words[m]);if(f+=b,b!==26)break}return f},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},i.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var m=0;m<f.length;m++)this.words[m]=this.words[m]|f.words[m];return this.strip()},i.prototype.ior=function(f){return r((this.negative|f.negative)===0),this.iuor(f)},i.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},i.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},i.prototype.iuand=function(f){var m;this.length>f.length?m=f:m=this;for(var b=0;b<m.length;b++)this.words[b]=this.words[b]&f.words[b];return this.length=m.length,this.strip()},i.prototype.iand=function(f){return r((this.negative|f.negative)===0),this.iuand(f)},i.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},i.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},i.prototype.iuxor=function(f){var m,b;this.length>f.length?(m=this,b=f):(m=f,b=this);for(var v=0;v<b.length;v++)this.words[v]=m.words[v]^b.words[v];if(this!==m)for(;v<m.length;v++)this.words[v]=m.words[v];return this.length=m.length,this.strip()},i.prototype.ixor=function(f){return r((this.negative|f.negative)===0),this.iuxor(f)},i.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},i.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},i.prototype.inotn=function(f){r(typeof f=="number"&&f>=0);var m=Math.ceil(f/26)|0,b=f%26;this._expand(m),b>0&&m--;for(var v=0;v<m;v++)this.words[v]=~this.words[v]&67108863;return b>0&&(this.words[v]=~this.words[v]&67108863>>26-b),this.strip()},i.prototype.notn=function(f){return this.clone().inotn(f)},i.prototype.setn=function(f,m){r(typeof f=="number"&&f>=0);var b=f/26|0,v=f%26;return this._expand(b+1),m?this.words[b]=this.words[b]|1<<v:this.words[b]=this.words[b]&~(1<<v),this.strip()},i.prototype.iadd=function(f){var m;if(this.negative!==0&&f.negative===0)return this.negative=0,m=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,m=this.isub(f),f.negative=1,m._normSign();var b,v;this.length>f.length?(b=this,v=f):(b=f,v=this);for(var w=0,P=0;P<v.length;P++)m=(b.words[P]|0)+(v.words[P]|0)+w,this.words[P]=m&67108863,w=m>>>26;for(;w!==0&&P<b.length;P++)m=(b.words[P]|0)+w,this.words[P]=m&67108863,w=m>>>26;if(this.length=b.length,w!==0)this.words[this.length]=w,this.length++;else if(b!==this)for(;P<b.length;P++)this.words[P]=b.words[P];return this},i.prototype.add=function(f){var m;return f.negative!==0&&this.negative===0?(f.negative=0,m=this.sub(f),f.negative^=1,m):f.negative===0&&this.negative!==0?(this.negative=0,m=f.sub(this),this.negative=1,m):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},i.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var m=this.iadd(f);return f.negative=1,m._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var b=this.cmp(f);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,w;b>0?(v=this,w=f):(v=f,w=this);for(var P=0,C=0;C<w.length;C++)m=(v.words[C]|0)-(w.words[C]|0)+P,P=m>>26,this.words[C]=m&67108863;for(;P!==0&&C<v.length;C++)m=(v.words[C]|0)+P,P=m>>26,this.words[C]=m&67108863;if(P===0&&C<v.length&&v!==this)for(;C<v.length;C++)this.words[C]=v.words[C];return this.length=Math.max(this.length,C),v!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(f){return this.clone().isub(f)};function x(_,f,m){m.negative=f.negative^_.negative;var b=_.length+f.length|0;m.length=b,b=b-1|0;var v=_.words[0]|0,w=f.words[0]|0,P=v*w,C=P&67108863,k=P/67108864|0;m.words[0]=C;for(var d=1;d<b;d++){for(var S=k>>>26,F=k&67108863,U=Math.min(d,f.length-1),D=Math.max(0,d-_.length+1);D<=U;D++){var Y=d-D|0;v=_.words[Y]|0,w=f.words[D]|0,P=v*w+F,S+=P/67108864|0,F=P&67108863}m.words[d]=F|0,k=S|0}return k!==0?m.words[d]=k|0:m.length--,m.strip()}var A=function(f,m,b){var v=f.words,w=m.words,P=b.words,C=0,k,d,S,F=v[0]|0,U=F&8191,D=F>>>13,Y=v[1]|0,j=Y&8191,ee=Y>>>13,le=v[2]|0,fe=le&8191,K=le>>>13,Z=v[3]|0,J=Z&8191,ne=Z>>>13,pe=v[4]|0,re=pe&8191,ce=pe>>>13,ut=v[5]|0,Ee=ut&8191,_e=ut>>>13,Do=v[6]|0,Oe=Do&8191,Be=Do>>>13,ga=v[7]|0,Ce=ga&8191,nt=ga>>>13,gu=v[8]|0,it=gu&8191,ot=gu>>>13,dc=v[9]|0,Ne=dc&8191,Ue=dc>>>13,hc=w[0]|0,De=hc&8191,Le=hc>>>13,pc=w[1]|0,Ke=pc&8191,Fe=pc>>>13,yc=w[2]|0,Ve=yc&8191,qe=yc>>>13,mc=w[3]|0,He=mc&8191,We=mc>>>13,gc=w[4]|0,ze=gc&8191,je=gc>>>13,bc=w[5]|0,Ge=bc&8191,$e=bc>>>13,xc=w[6]|0,Ye=xc&8191,Je=xc>>>13,wc=w[7]|0,Ze=wc&8191,Qe=wc>>>13,vc=w[8]|0,Xe=vc&8191,et=vc>>>13,Ac=w[9]|0,tt=Ac&8191,rt=Ac>>>13;b.negative=f.negative^m.negative,b.length=19,k=Math.imul(U,De),d=Math.imul(U,Le),d=d+Math.imul(D,De)|0,S=Math.imul(D,Le);var gs=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(gs>>>26)|0,gs&=67108863,k=Math.imul(j,De),d=Math.imul(j,Le),d=d+Math.imul(ee,De)|0,S=Math.imul(ee,Le),k=k+Math.imul(U,Ke)|0,d=d+Math.imul(U,Fe)|0,d=d+Math.imul(D,Ke)|0,S=S+Math.imul(D,Fe)|0;var bs=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(bs>>>26)|0,bs&=67108863,k=Math.imul(fe,De),d=Math.imul(fe,Le),d=d+Math.imul(K,De)|0,S=Math.imul(K,Le),k=k+Math.imul(j,Ke)|0,d=d+Math.imul(j,Fe)|0,d=d+Math.imul(ee,Ke)|0,S=S+Math.imul(ee,Fe)|0,k=k+Math.imul(U,Ve)|0,d=d+Math.imul(U,qe)|0,d=d+Math.imul(D,Ve)|0,S=S+Math.imul(D,qe)|0;var xs=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(xs>>>26)|0,xs&=67108863,k=Math.imul(J,De),d=Math.imul(J,Le),d=d+Math.imul(ne,De)|0,S=Math.imul(ne,Le),k=k+Math.imul(fe,Ke)|0,d=d+Math.imul(fe,Fe)|0,d=d+Math.imul(K,Ke)|0,S=S+Math.imul(K,Fe)|0,k=k+Math.imul(j,Ve)|0,d=d+Math.imul(j,qe)|0,d=d+Math.imul(ee,Ve)|0,S=S+Math.imul(ee,qe)|0,k=k+Math.imul(U,He)|0,d=d+Math.imul(U,We)|0,d=d+Math.imul(D,He)|0,S=S+Math.imul(D,We)|0;var ws=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(ws>>>26)|0,ws&=67108863,k=Math.imul(re,De),d=Math.imul(re,Le),d=d+Math.imul(ce,De)|0,S=Math.imul(ce,Le),k=k+Math.imul(J,Ke)|0,d=d+Math.imul(J,Fe)|0,d=d+Math.imul(ne,Ke)|0,S=S+Math.imul(ne,Fe)|0,k=k+Math.imul(fe,Ve)|0,d=d+Math.imul(fe,qe)|0,d=d+Math.imul(K,Ve)|0,S=S+Math.imul(K,qe)|0,k=k+Math.imul(j,He)|0,d=d+Math.imul(j,We)|0,d=d+Math.imul(ee,He)|0,S=S+Math.imul(ee,We)|0,k=k+Math.imul(U,ze)|0,d=d+Math.imul(U,je)|0,d=d+Math.imul(D,ze)|0,S=S+Math.imul(D,je)|0;var vs=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(vs>>>26)|0,vs&=67108863,k=Math.imul(Ee,De),d=Math.imul(Ee,Le),d=d+Math.imul(_e,De)|0,S=Math.imul(_e,Le),k=k+Math.imul(re,Ke)|0,d=d+Math.imul(re,Fe)|0,d=d+Math.imul(ce,Ke)|0,S=S+Math.imul(ce,Fe)|0,k=k+Math.imul(J,Ve)|0,d=d+Math.imul(J,qe)|0,d=d+Math.imul(ne,Ve)|0,S=S+Math.imul(ne,qe)|0,k=k+Math.imul(fe,He)|0,d=d+Math.imul(fe,We)|0,d=d+Math.imul(K,He)|0,S=S+Math.imul(K,We)|0,k=k+Math.imul(j,ze)|0,d=d+Math.imul(j,je)|0,d=d+Math.imul(ee,ze)|0,S=S+Math.imul(ee,je)|0,k=k+Math.imul(U,Ge)|0,d=d+Math.imul(U,$e)|0,d=d+Math.imul(D,Ge)|0,S=S+Math.imul(D,$e)|0;var As=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(As>>>26)|0,As&=67108863,k=Math.imul(Oe,De),d=Math.imul(Oe,Le),d=d+Math.imul(Be,De)|0,S=Math.imul(Be,Le),k=k+Math.imul(Ee,Ke)|0,d=d+Math.imul(Ee,Fe)|0,d=d+Math.imul(_e,Ke)|0,S=S+Math.imul(_e,Fe)|0,k=k+Math.imul(re,Ve)|0,d=d+Math.imul(re,qe)|0,d=d+Math.imul(ce,Ve)|0,S=S+Math.imul(ce,qe)|0,k=k+Math.imul(J,He)|0,d=d+Math.imul(J,We)|0,d=d+Math.imul(ne,He)|0,S=S+Math.imul(ne,We)|0,k=k+Math.imul(fe,ze)|0,d=d+Math.imul(fe,je)|0,d=d+Math.imul(K,ze)|0,S=S+Math.imul(K,je)|0,k=k+Math.imul(j,Ge)|0,d=d+Math.imul(j,$e)|0,d=d+Math.imul(ee,Ge)|0,S=S+Math.imul(ee,$e)|0,k=k+Math.imul(U,Ye)|0,d=d+Math.imul(U,Je)|0,d=d+Math.imul(D,Ye)|0,S=S+Math.imul(D,Je)|0;var Ss=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(Ss>>>26)|0,Ss&=67108863,k=Math.imul(Ce,De),d=Math.imul(Ce,Le),d=d+Math.imul(nt,De)|0,S=Math.imul(nt,Le),k=k+Math.imul(Oe,Ke)|0,d=d+Math.imul(Oe,Fe)|0,d=d+Math.imul(Be,Ke)|0,S=S+Math.imul(Be,Fe)|0,k=k+Math.imul(Ee,Ve)|0,d=d+Math.imul(Ee,qe)|0,d=d+Math.imul(_e,Ve)|0,S=S+Math.imul(_e,qe)|0,k=k+Math.imul(re,He)|0,d=d+Math.imul(re,We)|0,d=d+Math.imul(ce,He)|0,S=S+Math.imul(ce,We)|0,k=k+Math.imul(J,ze)|0,d=d+Math.imul(J,je)|0,d=d+Math.imul(ne,ze)|0,S=S+Math.imul(ne,je)|0,k=k+Math.imul(fe,Ge)|0,d=d+Math.imul(fe,$e)|0,d=d+Math.imul(K,Ge)|0,S=S+Math.imul(K,$e)|0,k=k+Math.imul(j,Ye)|0,d=d+Math.imul(j,Je)|0,d=d+Math.imul(ee,Ye)|0,S=S+Math.imul(ee,Je)|0,k=k+Math.imul(U,Ze)|0,d=d+Math.imul(U,Qe)|0,d=d+Math.imul(D,Ze)|0,S=S+Math.imul(D,Qe)|0;var Es=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(Es>>>26)|0,Es&=67108863,k=Math.imul(it,De),d=Math.imul(it,Le),d=d+Math.imul(ot,De)|0,S=Math.imul(ot,Le),k=k+Math.imul(Ce,Ke)|0,d=d+Math.imul(Ce,Fe)|0,d=d+Math.imul(nt,Ke)|0,S=S+Math.imul(nt,Fe)|0,k=k+Math.imul(Oe,Ve)|0,d=d+Math.imul(Oe,qe)|0,d=d+Math.imul(Be,Ve)|0,S=S+Math.imul(Be,qe)|0,k=k+Math.imul(Ee,He)|0,d=d+Math.imul(Ee,We)|0,d=d+Math.imul(_e,He)|0,S=S+Math.imul(_e,We)|0,k=k+Math.imul(re,ze)|0,d=d+Math.imul(re,je)|0,d=d+Math.imul(ce,ze)|0,S=S+Math.imul(ce,je)|0,k=k+Math.imul(J,Ge)|0,d=d+Math.imul(J,$e)|0,d=d+Math.imul(ne,Ge)|0,S=S+Math.imul(ne,$e)|0,k=k+Math.imul(fe,Ye)|0,d=d+Math.imul(fe,Je)|0,d=d+Math.imul(K,Ye)|0,S=S+Math.imul(K,Je)|0,k=k+Math.imul(j,Ze)|0,d=d+Math.imul(j,Qe)|0,d=d+Math.imul(ee,Ze)|0,S=S+Math.imul(ee,Qe)|0,k=k+Math.imul(U,Xe)|0,d=d+Math.imul(U,et)|0,d=d+Math.imul(D,Xe)|0,S=S+Math.imul(D,et)|0;var Is=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(Is>>>26)|0,Is&=67108863,k=Math.imul(Ne,De),d=Math.imul(Ne,Le),d=d+Math.imul(Ue,De)|0,S=Math.imul(Ue,Le),k=k+Math.imul(it,Ke)|0,d=d+Math.imul(it,Fe)|0,d=d+Math.imul(ot,Ke)|0,S=S+Math.imul(ot,Fe)|0,k=k+Math.imul(Ce,Ve)|0,d=d+Math.imul(Ce,qe)|0,d=d+Math.imul(nt,Ve)|0,S=S+Math.imul(nt,qe)|0,k=k+Math.imul(Oe,He)|0,d=d+Math.imul(Oe,We)|0,d=d+Math.imul(Be,He)|0,S=S+Math.imul(Be,We)|0,k=k+Math.imul(Ee,ze)|0,d=d+Math.imul(Ee,je)|0,d=d+Math.imul(_e,ze)|0,S=S+Math.imul(_e,je)|0,k=k+Math.imul(re,Ge)|0,d=d+Math.imul(re,$e)|0,d=d+Math.imul(ce,Ge)|0,S=S+Math.imul(ce,$e)|0,k=k+Math.imul(J,Ye)|0,d=d+Math.imul(J,Je)|0,d=d+Math.imul(ne,Ye)|0,S=S+Math.imul(ne,Je)|0,k=k+Math.imul(fe,Ze)|0,d=d+Math.imul(fe,Qe)|0,d=d+Math.imul(K,Ze)|0,S=S+Math.imul(K,Qe)|0,k=k+Math.imul(j,Xe)|0,d=d+Math.imul(j,et)|0,d=d+Math.imul(ee,Xe)|0,S=S+Math.imul(ee,et)|0,k=k+Math.imul(U,tt)|0,d=d+Math.imul(U,rt)|0,d=d+Math.imul(D,tt)|0,S=S+Math.imul(D,rt)|0;var ks=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(ks>>>26)|0,ks&=67108863,k=Math.imul(Ne,Ke),d=Math.imul(Ne,Fe),d=d+Math.imul(Ue,Ke)|0,S=Math.imul(Ue,Fe),k=k+Math.imul(it,Ve)|0,d=d+Math.imul(it,qe)|0,d=d+Math.imul(ot,Ve)|0,S=S+Math.imul(ot,qe)|0,k=k+Math.imul(Ce,He)|0,d=d+Math.imul(Ce,We)|0,d=d+Math.imul(nt,He)|0,S=S+Math.imul(nt,We)|0,k=k+Math.imul(Oe,ze)|0,d=d+Math.imul(Oe,je)|0,d=d+Math.imul(Be,ze)|0,S=S+Math.imul(Be,je)|0,k=k+Math.imul(Ee,Ge)|0,d=d+Math.imul(Ee,$e)|0,d=d+Math.imul(_e,Ge)|0,S=S+Math.imul(_e,$e)|0,k=k+Math.imul(re,Ye)|0,d=d+Math.imul(re,Je)|0,d=d+Math.imul(ce,Ye)|0,S=S+Math.imul(ce,Je)|0,k=k+Math.imul(J,Ze)|0,d=d+Math.imul(J,Qe)|0,d=d+Math.imul(ne,Ze)|0,S=S+Math.imul(ne,Qe)|0,k=k+Math.imul(fe,Xe)|0,d=d+Math.imul(fe,et)|0,d=d+Math.imul(K,Xe)|0,S=S+Math.imul(K,et)|0,k=k+Math.imul(j,tt)|0,d=d+Math.imul(j,rt)|0,d=d+Math.imul(ee,tt)|0,S=S+Math.imul(ee,rt)|0;var Ts=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(Ts>>>26)|0,Ts&=67108863,k=Math.imul(Ne,Ve),d=Math.imul(Ne,qe),d=d+Math.imul(Ue,Ve)|0,S=Math.imul(Ue,qe),k=k+Math.imul(it,He)|0,d=d+Math.imul(it,We)|0,d=d+Math.imul(ot,He)|0,S=S+Math.imul(ot,We)|0,k=k+Math.imul(Ce,ze)|0,d=d+Math.imul(Ce,je)|0,d=d+Math.imul(nt,ze)|0,S=S+Math.imul(nt,je)|0,k=k+Math.imul(Oe,Ge)|0,d=d+Math.imul(Oe,$e)|0,d=d+Math.imul(Be,Ge)|0,S=S+Math.imul(Be,$e)|0,k=k+Math.imul(Ee,Ye)|0,d=d+Math.imul(Ee,Je)|0,d=d+Math.imul(_e,Ye)|0,S=S+Math.imul(_e,Je)|0,k=k+Math.imul(re,Ze)|0,d=d+Math.imul(re,Qe)|0,d=d+Math.imul(ce,Ze)|0,S=S+Math.imul(ce,Qe)|0,k=k+Math.imul(J,Xe)|0,d=d+Math.imul(J,et)|0,d=d+Math.imul(ne,Xe)|0,S=S+Math.imul(ne,et)|0,k=k+Math.imul(fe,tt)|0,d=d+Math.imul(fe,rt)|0,d=d+Math.imul(K,tt)|0,S=S+Math.imul(K,rt)|0;var Ps=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(Ps>>>26)|0,Ps&=67108863,k=Math.imul(Ne,He),d=Math.imul(Ne,We),d=d+Math.imul(Ue,He)|0,S=Math.imul(Ue,We),k=k+Math.imul(it,ze)|0,d=d+Math.imul(it,je)|0,d=d+Math.imul(ot,ze)|0,S=S+Math.imul(ot,je)|0,k=k+Math.imul(Ce,Ge)|0,d=d+Math.imul(Ce,$e)|0,d=d+Math.imul(nt,Ge)|0,S=S+Math.imul(nt,$e)|0,k=k+Math.imul(Oe,Ye)|0,d=d+Math.imul(Oe,Je)|0,d=d+Math.imul(Be,Ye)|0,S=S+Math.imul(Be,Je)|0,k=k+Math.imul(Ee,Ze)|0,d=d+Math.imul(Ee,Qe)|0,d=d+Math.imul(_e,Ze)|0,S=S+Math.imul(_e,Qe)|0,k=k+Math.imul(re,Xe)|0,d=d+Math.imul(re,et)|0,d=d+Math.imul(ce,Xe)|0,S=S+Math.imul(ce,et)|0,k=k+Math.imul(J,tt)|0,d=d+Math.imul(J,rt)|0,d=d+Math.imul(ne,tt)|0,S=S+Math.imul(ne,rt)|0;var _s=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(_s>>>26)|0,_s&=67108863,k=Math.imul(Ne,ze),d=Math.imul(Ne,je),d=d+Math.imul(Ue,ze)|0,S=Math.imul(Ue,je),k=k+Math.imul(it,Ge)|0,d=d+Math.imul(it,$e)|0,d=d+Math.imul(ot,Ge)|0,S=S+Math.imul(ot,$e)|0,k=k+Math.imul(Ce,Ye)|0,d=d+Math.imul(Ce,Je)|0,d=d+Math.imul(nt,Ye)|0,S=S+Math.imul(nt,Je)|0,k=k+Math.imul(Oe,Ze)|0,d=d+Math.imul(Oe,Qe)|0,d=d+Math.imul(Be,Ze)|0,S=S+Math.imul(Be,Qe)|0,k=k+Math.imul(Ee,Xe)|0,d=d+Math.imul(Ee,et)|0,d=d+Math.imul(_e,Xe)|0,S=S+Math.imul(_e,et)|0,k=k+Math.imul(re,tt)|0,d=d+Math.imul(re,rt)|0,d=d+Math.imul(ce,tt)|0,S=S+Math.imul(ce,rt)|0;var Bs=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(Bs>>>26)|0,Bs&=67108863,k=Math.imul(Ne,Ge),d=Math.imul(Ne,$e),d=d+Math.imul(Ue,Ge)|0,S=Math.imul(Ue,$e),k=k+Math.imul(it,Ye)|0,d=d+Math.imul(it,Je)|0,d=d+Math.imul(ot,Ye)|0,S=S+Math.imul(ot,Je)|0,k=k+Math.imul(Ce,Ze)|0,d=d+Math.imul(Ce,Qe)|0,d=d+Math.imul(nt,Ze)|0,S=S+Math.imul(nt,Qe)|0,k=k+Math.imul(Oe,Xe)|0,d=d+Math.imul(Oe,et)|0,d=d+Math.imul(Be,Xe)|0,S=S+Math.imul(Be,et)|0,k=k+Math.imul(Ee,tt)|0,d=d+Math.imul(Ee,rt)|0,d=d+Math.imul(_e,tt)|0,S=S+Math.imul(_e,rt)|0;var Cs=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(Cs>>>26)|0,Cs&=67108863,k=Math.imul(Ne,Ye),d=Math.imul(Ne,Je),d=d+Math.imul(Ue,Ye)|0,S=Math.imul(Ue,Je),k=k+Math.imul(it,Ze)|0,d=d+Math.imul(it,Qe)|0,d=d+Math.imul(ot,Ze)|0,S=S+Math.imul(ot,Qe)|0,k=k+Math.imul(Ce,Xe)|0,d=d+Math.imul(Ce,et)|0,d=d+Math.imul(nt,Xe)|0,S=S+Math.imul(nt,et)|0,k=k+Math.imul(Oe,tt)|0,d=d+Math.imul(Oe,rt)|0,d=d+Math.imul(Be,tt)|0,S=S+Math.imul(Be,rt)|0;var Ms=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(Ms>>>26)|0,Ms&=67108863,k=Math.imul(Ne,Ze),d=Math.imul(Ne,Qe),d=d+Math.imul(Ue,Ze)|0,S=Math.imul(Ue,Qe),k=k+Math.imul(it,Xe)|0,d=d+Math.imul(it,et)|0,d=d+Math.imul(ot,Xe)|0,S=S+Math.imul(ot,et)|0,k=k+Math.imul(Ce,tt)|0,d=d+Math.imul(Ce,rt)|0,d=d+Math.imul(nt,tt)|0,S=S+Math.imul(nt,rt)|0;var Rs=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(Rs>>>26)|0,Rs&=67108863,k=Math.imul(Ne,Xe),d=Math.imul(Ne,et),d=d+Math.imul(Ue,Xe)|0,S=Math.imul(Ue,et),k=k+Math.imul(it,tt)|0,d=d+Math.imul(it,rt)|0,d=d+Math.imul(ot,tt)|0,S=S+Math.imul(ot,rt)|0;var hl=(C+k|0)+((d&8191)<<13)|0;C=(S+(d>>>13)|0)+(hl>>>26)|0,hl&=67108863,k=Math.imul(Ne,tt),d=Math.imul(Ne,rt),d=d+Math.imul(Ue,tt)|0,S=Math.imul(Ue,rt);var pl=(C+k|0)+((d&8191)<<13)|0;return C=(S+(d>>>13)|0)+(pl>>>26)|0,pl&=67108863,P[0]=gs,P[1]=bs,P[2]=xs,P[3]=ws,P[4]=vs,P[5]=As,P[6]=Ss,P[7]=Es,P[8]=Is,P[9]=ks,P[10]=Ts,P[11]=Ps,P[12]=_s,P[13]=Bs,P[14]=Cs,P[15]=Ms,P[16]=Rs,P[17]=hl,P[18]=pl,C!==0&&(P[19]=C,b.length++),b};Math.imul||(A=x);function E(_,f,m){m.negative=f.negative^_.negative,m.length=_.length+f.length;for(var b=0,v=0,w=0;w<m.length-1;w++){var P=v;v=0;for(var C=b&67108863,k=Math.min(w,f.length-1),d=Math.max(0,w-_.length+1);d<=k;d++){var S=w-d,F=_.words[S]|0,U=f.words[d]|0,D=F*U,Y=D&67108863;P=P+(D/67108864|0)|0,Y=Y+C|0,C=Y&67108863,P=P+(Y>>>26)|0,v+=P>>>26,P&=67108863}m.words[w]=C,b=P,P=v}return b!==0?m.words[w]=b:m.length--,m.strip()}function B(_,f,m){var b=new M;return b.mulp(_,f,m)}i.prototype.mulTo=function(f,m){var b,v=this.length+f.length;return this.length===10&&f.length===10?b=A(this,f,m):v<63?b=x(this,f,m):v<1024?b=E(this,f,m):b=B(this,f,m),b};function M(_,f){this.x=_,this.y=f}M.prototype.makeRBT=function(f){for(var m=new Array(f),b=i.prototype._countBits(f)-1,v=0;v<f;v++)m[v]=this.revBin(v,b,f);return m},M.prototype.revBin=function(f,m,b){if(f===0||f===b-1)return f;for(var v=0,w=0;w<m;w++)v|=(f&1)<<m-w-1,f>>=1;return v},M.prototype.permute=function(f,m,b,v,w,P){for(var C=0;C<P;C++)v[C]=m[f[C]],w[C]=b[f[C]]},M.prototype.transform=function(f,m,b,v,w,P){this.permute(P,f,m,b,v,w);for(var C=1;C<w;C<<=1)for(var k=C<<1,d=Math.cos(2*Math.PI/k),S=Math.sin(2*Math.PI/k),F=0;F<w;F+=k)for(var U=d,D=S,Y=0;Y<C;Y++){var j=b[F+Y],ee=v[F+Y],le=b[F+Y+C],fe=v[F+Y+C],K=U*le-D*fe;fe=U*fe+D*le,le=K,b[F+Y]=j+le,v[F+Y]=ee+fe,b[F+Y+C]=j-le,v[F+Y+C]=ee-fe,Y!==k&&(K=d*U-S*D,D=d*D+S*U,U=K)}},M.prototype.guessLen13b=function(f,m){var b=Math.max(m,f)|1,v=b&1,w=0;for(b=b/2|0;b;b=b>>>1)w++;return 1<<w+1+v},M.prototype.conjugate=function(f,m,b){if(!(b<=1))for(var v=0;v<b/2;v++){var w=f[v];f[v]=f[b-v-1],f[b-v-1]=w,w=m[v],m[v]=-m[b-v-1],m[b-v-1]=-w}},M.prototype.normalize13b=function(f,m){for(var b=0,v=0;v<m/2;v++){var w=Math.round(f[2*v+1]/m)*8192+Math.round(f[2*v]/m)+b;f[v]=w&67108863,w<67108864?b=0:b=w/67108864|0}return f},M.prototype.convert13b=function(f,m,b,v){for(var w=0,P=0;P<m;P++)w=w+(f[P]|0),b[2*P]=w&8191,w=w>>>13,b[2*P+1]=w&8191,w=w>>>13;for(P=2*m;P<v;++P)b[P]=0;r(w===0),r((w&-8192)===0)},M.prototype.stub=function(f){for(var m=new Array(f),b=0;b<f;b++)m[b]=0;return m},M.prototype.mulp=function(f,m,b){var v=2*this.guessLen13b(f.length,m.length),w=this.makeRBT(v),P=this.stub(v),C=new Array(v),k=new Array(v),d=new Array(v),S=new Array(v),F=new Array(v),U=new Array(v),D=b.words;D.length=v,this.convert13b(f.words,f.length,C,v),this.convert13b(m.words,m.length,S,v),this.transform(C,P,k,d,v,w),this.transform(S,P,F,U,v,w);for(var Y=0;Y<v;Y++){var j=k[Y]*F[Y]-d[Y]*U[Y];d[Y]=k[Y]*U[Y]+d[Y]*F[Y],k[Y]=j}return this.conjugate(k,d,v),this.transform(k,d,D,P,v,w),this.conjugate(D,P,v),this.normalize13b(D,v),b.negative=f.negative^m.negative,b.length=f.length+m.length,b.strip()},i.prototype.mul=function(f){var m=new i(null);return m.words=new Array(this.length+f.length),this.mulTo(f,m)},i.prototype.mulf=function(f){var m=new i(null);return m.words=new Array(this.length+f.length),B(this,f,m)},i.prototype.imul=function(f){return this.clone().mulTo(f,this)},i.prototype.imuln=function(f){r(typeof f=="number"),r(f<67108864);for(var m=0,b=0;b<this.length;b++){var v=(this.words[b]|0)*f,w=(v&67108863)+(m&67108863);m>>=26,m+=v/67108864|0,m+=w>>>26,this.words[b]=w&67108863}return m!==0&&(this.words[b]=m,this.length++),this},i.prototype.muln=function(f){return this.clone().imuln(f)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(f){var m=g(f);if(m.length===0)return new i(1);for(var b=this,v=0;v<m.length&&m[v]===0;v++,b=b.sqr());if(++v<m.length)for(var w=b.sqr();v<m.length;v++,w=w.sqr())m[v]!==0&&(b=b.mul(w));return b},i.prototype.iushln=function(f){r(typeof f=="number"&&f>=0);var m=f%26,b=(f-m)/26,v=67108863>>>26-m<<26-m,w;if(m!==0){var P=0;for(w=0;w<this.length;w++){var C=this.words[w]&v,k=(this.words[w]|0)-C<<m;this.words[w]=k|P,P=C>>>26-m}P&&(this.words[w]=P,this.length++)}if(b!==0){for(w=this.length-1;w>=0;w--)this.words[w+b]=this.words[w];for(w=0;w<b;w++)this.words[w]=0;this.length+=b}return this.strip()},i.prototype.ishln=function(f){return r(this.negative===0),this.iushln(f)},i.prototype.iushrn=function(f,m,b){r(typeof f=="number"&&f>=0);var v;m?v=(m-m%26)/26:v=0;var w=f%26,P=Math.min((f-w)/26,this.length),C=67108863^67108863>>>w<<w,k=b;if(v-=P,v=Math.max(0,v),k){for(var d=0;d<P;d++)k.words[d]=this.words[d];k.length=P}if(P!==0)if(this.length>P)for(this.length-=P,d=0;d<this.length;d++)this.words[d]=this.words[d+P];else this.words[0]=0,this.length=1;var S=0;for(d=this.length-1;d>=0&&(S!==0||d>=v);d--){var F=this.words[d]|0;this.words[d]=S<<26-w|F>>>w,S=F&C}return k&&S!==0&&(k.words[k.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(f,m,b){return r(this.negative===0),this.iushrn(f,m,b)},i.prototype.shln=function(f){return this.clone().ishln(f)},i.prototype.ushln=function(f){return this.clone().iushln(f)},i.prototype.shrn=function(f){return this.clone().ishrn(f)},i.prototype.ushrn=function(f){return this.clone().iushrn(f)},i.prototype.testn=function(f){r(typeof f=="number"&&f>=0);var m=f%26,b=(f-m)/26,v=1<<m;if(this.length<=b)return!1;var w=this.words[b];return!!(w&v)},i.prototype.imaskn=function(f){r(typeof f=="number"&&f>=0);var m=f%26,b=(f-m)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(m!==0&&b++,this.length=Math.min(b,this.length),m!==0){var v=67108863^67108863>>>m<<m;this.words[this.length-1]&=v}return this.strip()},i.prototype.maskn=function(f){return this.clone().imaskn(f)},i.prototype.iaddn=function(f){return r(typeof f=="number"),r(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},i.prototype._iaddn=function(f){this.words[0]+=f;for(var m=0;m<this.length&&this.words[m]>=67108864;m++)this.words[m]-=67108864,m===this.length-1?this.words[m+1]=1:this.words[m+1]++;return this.length=Math.max(this.length,m+1),this},i.prototype.isubn=function(f){if(r(typeof f=="number"),r(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var m=0;m<this.length&&this.words[m]<0;m++)this.words[m]+=67108864,this.words[m+1]-=1;return this.strip()},i.prototype.addn=function(f){return this.clone().iaddn(f)},i.prototype.subn=function(f){return this.clone().isubn(f)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(f,m,b){var v=f.length+b,w;this._expand(v);var P,C=0;for(w=0;w<f.length;w++){P=(this.words[w+b]|0)+C;var k=(f.words[w]|0)*m;P-=k&67108863,C=(P>>26)-(k/67108864|0),this.words[w+b]=P&67108863}for(;w<this.length-b;w++)P=(this.words[w+b]|0)+C,C=P>>26,this.words[w+b]=P&67108863;if(C===0)return this.strip();for(r(C===-1),C=0,w=0;w<this.length;w++)P=-(this.words[w]|0)+C,C=P>>26,this.words[w]=P&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(f,m){var b=this.length-f.length,v=this.clone(),w=f,P=w.words[w.length-1]|0,C=this._countBits(P);b=26-C,b!==0&&(w=w.ushln(b),v.iushln(b),P=w.words[w.length-1]|0);var k=v.length-w.length,d;if(m!=="mod"){d=new i(null),d.length=k+1,d.words=new Array(d.length);for(var S=0;S<d.length;S++)d.words[S]=0}var F=v.clone()._ishlnsubmul(w,1,k);F.negative===0&&(v=F,d&&(d.words[k]=1));for(var U=k-1;U>=0;U--){var D=(v.words[w.length+U]|0)*67108864+(v.words[w.length+U-1]|0);for(D=Math.min(D/P|0,67108863),v._ishlnsubmul(w,D,U);v.negative!==0;)D--,v.negative=0,v._ishlnsubmul(w,1,U),v.isZero()||(v.negative^=1);d&&(d.words[U]=D)}return d&&d.strip(),v.strip(),m!=="div"&&b!==0&&v.iushrn(b),{div:d||null,mod:v}},i.prototype.divmod=function(f,m,b){if(r(!f.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var v,w,P;return this.negative!==0&&f.negative===0?(P=this.neg().divmod(f,m),m!=="mod"&&(v=P.div.neg()),m!=="div"&&(w=P.mod.neg(),b&&w.negative!==0&&w.iadd(f)),{div:v,mod:w}):this.negative===0&&f.negative!==0?(P=this.divmod(f.neg(),m),m!=="mod"&&(v=P.div.neg()),{div:v,mod:P.mod}):this.negative&f.negative?(P=this.neg().divmod(f.neg(),m),m!=="div"&&(w=P.mod.neg(),b&&w.negative!==0&&w.isub(f)),{div:P.div,mod:w}):f.length>this.length||this.cmp(f)<0?{div:new i(0),mod:this}:f.length===1?m==="div"?{div:this.divn(f.words[0]),mod:null}:m==="mod"?{div:null,mod:new i(this.modn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new i(this.modn(f.words[0]))}:this._wordDiv(f,m)},i.prototype.div=function(f){return this.divmod(f,"div",!1).div},i.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},i.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},i.prototype.divRound=function(f){var m=this.divmod(f);if(m.mod.isZero())return m.div;var b=m.div.negative!==0?m.mod.isub(f):m.mod,v=f.ushrn(1),w=f.andln(1),P=b.cmp(v);return P<0||w===1&&P===0?m.div:m.div.negative!==0?m.div.isubn(1):m.div.iaddn(1)},i.prototype.modn=function(f){r(f<=67108863);for(var m=(1<<26)%f,b=0,v=this.length-1;v>=0;v--)b=(m*b+(this.words[v]|0))%f;return b},i.prototype.idivn=function(f){r(f<=67108863);for(var m=0,b=this.length-1;b>=0;b--){var v=(this.words[b]|0)+m*67108864;this.words[b]=v/f|0,m=v%f}return this.strip()},i.prototype.divn=function(f){return this.clone().idivn(f)},i.prototype.egcd=function(f){r(f.negative===0),r(!f.isZero());var m=this,b=f.clone();m.negative!==0?m=m.umod(f):m=m.clone();for(var v=new i(1),w=new i(0),P=new i(0),C=new i(1),k=0;m.isEven()&&b.isEven();)m.iushrn(1),b.iushrn(1),++k;for(var d=b.clone(),S=m.clone();!m.isZero();){for(var F=0,U=1;!(m.words[0]&U)&&F<26;++F,U<<=1);if(F>0)for(m.iushrn(F);F-- >0;)(v.isOdd()||w.isOdd())&&(v.iadd(d),w.isub(S)),v.iushrn(1),w.iushrn(1);for(var D=0,Y=1;!(b.words[0]&Y)&&D<26;++D,Y<<=1);if(D>0)for(b.iushrn(D);D-- >0;)(P.isOdd()||C.isOdd())&&(P.iadd(d),C.isub(S)),P.iushrn(1),C.iushrn(1);m.cmp(b)>=0?(m.isub(b),v.isub(P),w.isub(C)):(b.isub(m),P.isub(v),C.isub(w))}return{a:P,b:C,gcd:b.iushln(k)}},i.prototype._invmp=function(f){r(f.negative===0),r(!f.isZero());var m=this,b=f.clone();m.negative!==0?m=m.umod(f):m=m.clone();for(var v=new i(1),w=new i(0),P=b.clone();m.cmpn(1)>0&&b.cmpn(1)>0;){for(var C=0,k=1;!(m.words[0]&k)&&C<26;++C,k<<=1);if(C>0)for(m.iushrn(C);C-- >0;)v.isOdd()&&v.iadd(P),v.iushrn(1);for(var d=0,S=1;!(b.words[0]&S)&&d<26;++d,S<<=1);if(d>0)for(b.iushrn(d);d-- >0;)w.isOdd()&&w.iadd(P),w.iushrn(1);m.cmp(b)>=0?(m.isub(b),v.isub(w)):(b.isub(m),w.isub(v))}var F;return m.cmpn(1)===0?F=v:F=w,F.cmpn(0)<0&&F.iadd(f),F},i.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var m=this.clone(),b=f.clone();m.negative=0,b.negative=0;for(var v=0;m.isEven()&&b.isEven();v++)m.iushrn(1),b.iushrn(1);do{for(;m.isEven();)m.iushrn(1);for(;b.isEven();)b.iushrn(1);var w=m.cmp(b);if(w<0){var P=m;m=b,b=P}else if(w===0||b.cmpn(1)===0)break;m.isub(b)}while(!0);return b.iushln(v)},i.prototype.invm=function(f){return this.egcd(f).a.umod(f)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(f){return this.words[0]&f},i.prototype.bincn=function(f){r(typeof f=="number");var m=f%26,b=(f-m)/26,v=1<<m;if(this.length<=b)return this._expand(b+1),this.words[b]|=v,this;for(var w=v,P=b;w!==0&&P<this.length;P++){var C=this.words[P]|0;C+=w,w=C>>>26,C&=67108863,this.words[P]=C}return w!==0&&(this.words[P]=w,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(f){var m=f<0;if(this.negative!==0&&!m)return-1;if(this.negative===0&&m)return 1;this.strip();var b;if(this.length>1)b=1;else{m&&(f=-f),r(f<=67108863,"Number is too big");var v=this.words[0]|0;b=v===f?0:v<f?-1:1}return this.negative!==0?-b|0:b},i.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var m=this.ucmp(f);return this.negative!==0?-m|0:m},i.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var m=0,b=this.length-1;b>=0;b--){var v=this.words[b]|0,w=f.words[b]|0;if(v!==w){v<w?m=-1:v>w&&(m=1);break}}return m},i.prototype.gtn=function(f){return this.cmpn(f)===1},i.prototype.gt=function(f){return this.cmp(f)===1},i.prototype.gten=function(f){return this.cmpn(f)>=0},i.prototype.gte=function(f){return this.cmp(f)>=0},i.prototype.ltn=function(f){return this.cmpn(f)===-1},i.prototype.lt=function(f){return this.cmp(f)===-1},i.prototype.lten=function(f){return this.cmpn(f)<=0},i.prototype.lte=function(f){return this.cmp(f)<=0},i.prototype.eqn=function(f){return this.cmpn(f)===0},i.prototype.eq=function(f){return this.cmp(f)===0},i.red=function(f){return new z(f)},i.prototype.toRed=function(f){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(f){return this.red=f,this},i.prototype.forceRed=function(f){return r(!this.red,"Already a number in reduction context"),this._forceRed(f)},i.prototype.redAdd=function(f){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},i.prototype.redIAdd=function(f){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},i.prototype.redSub=function(f){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},i.prototype.redISub=function(f){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},i.prototype.redShl=function(f){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},i.prototype.redMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},i.prototype.redIMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(f){return r(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var N={k256:null,p224:null,p192:null,p25519:null};function R(_,f){this.name=_,this.p=new i(f,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}R.prototype._tmp=function(){var f=new i(null);return f.words=new Array(Math.ceil(this.n/13)),f},R.prototype.ireduce=function(f){var m=f,b;do this.split(m,this.tmp),m=this.imulK(m),m=m.iadd(this.tmp),b=m.bitLength();while(b>this.n);var v=b<this.n?-1:m.ucmp(this.p);return v===0?(m.words[0]=0,m.length=1):v>0?m.isub(this.p):m.strip!==void 0?m.strip():m._strip(),m},R.prototype.split=function(f,m){f.iushrn(this.n,0,m)},R.prototype.imulK=function(f){return f.imul(this.k)};function V(){R.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(V,R),V.prototype.split=function(f,m){for(var b=4194303,v=Math.min(f.length,9),w=0;w<v;w++)m.words[w]=f.words[w];if(m.length=v,f.length<=9){f.words[0]=0,f.length=1;return}var P=f.words[9];for(m.words[m.length++]=P&b,w=10;w<f.length;w++){var C=f.words[w]|0;f.words[w-10]=(C&b)<<4|P>>>22,P=C}P>>>=22,f.words[w-10]=P,P===0&&f.length>10?f.length-=10:f.length-=9},V.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var m=0,b=0;b<f.length;b++){var v=f.words[b]|0;m+=v*977,f.words[b]=m&67108863,m=v*64+(m/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function q(){R.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(q,R);function W(){R.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(W,R);function G(){R.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(G,R),G.prototype.imulK=function(f){for(var m=0,b=0;b<f.length;b++){var v=(f.words[b]|0)*19+m,w=v&67108863;v>>>=26,f.words[b]=w,m=v}return m!==0&&(f.words[f.length++]=m),f},i._prime=function(f){if(N[f])return N[f];var m;if(f==="k256")m=new V;else if(f==="p224")m=new q;else if(f==="p192")m=new W;else if(f==="p25519")m=new G;else throw new Error("Unknown prime "+f);return N[f]=m,m};function z(_){if(typeof _=="string"){var f=i._prime(_);this.m=f.p,this.prime=f}else r(_.gtn(1),"modulus must be greater than 1"),this.m=_,this.prime=null}z.prototype._verify1=function(f){r(f.negative===0,"red works only with positives"),r(f.red,"red works only with red numbers")},z.prototype._verify2=function(f,m){r((f.negative|m.negative)===0,"red works only with positives"),r(f.red&&f.red===m.red,"red works only with red numbers")},z.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):f.umod(this.m)._forceRed(this)},z.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},z.prototype.add=function(f,m){this._verify2(f,m);var b=f.add(m);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},z.prototype.iadd=function(f,m){this._verify2(f,m);var b=f.iadd(m);return b.cmp(this.m)>=0&&b.isub(this.m),b},z.prototype.sub=function(f,m){this._verify2(f,m);var b=f.sub(m);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},z.prototype.isub=function(f,m){this._verify2(f,m);var b=f.isub(m);return b.cmpn(0)<0&&b.iadd(this.m),b},z.prototype.shl=function(f,m){return this._verify1(f),this.imod(f.ushln(m))},z.prototype.imul=function(f,m){return this._verify2(f,m),this.imod(f.imul(m))},z.prototype.mul=function(f,m){return this._verify2(f,m),this.imod(f.mul(m))},z.prototype.isqr=function(f){return this.imul(f,f.clone())},z.prototype.sqr=function(f){return this.mul(f,f)},z.prototype.sqrt=function(f){if(f.isZero())return f.clone();var m=this.m.andln(3);if(r(m%2===1),m===3){var b=this.m.add(new i(1)).iushrn(2);return this.pow(f,b)}for(var v=this.m.subn(1),w=0;!v.isZero()&&v.andln(1)===0;)w++,v.iushrn(1);r(!v.isZero());var P=new i(1).toRed(this),C=P.redNeg(),k=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new i(2*d*d).toRed(this);this.pow(d,k).cmp(C)!==0;)d.redIAdd(C);for(var S=this.pow(d,v),F=this.pow(f,v.addn(1).iushrn(1)),U=this.pow(f,v),D=w;U.cmp(P)!==0;){for(var Y=U,j=0;Y.cmp(P)!==0;j++)Y=Y.redSqr();r(j<D);var ee=this.pow(S,new i(1).iushln(D-j-1));F=F.redMul(ee),S=ee.redSqr(),U=U.redMul(S),D=j}return F},z.prototype.invm=function(f){var m=f._invmp(this.m);return m.negative!==0?(m.negative=0,this.imod(m).redNeg()):this.imod(m)},z.prototype.pow=function(f,m){if(m.isZero())return new i(1).toRed(this);if(m.cmpn(1)===0)return f.clone();var b=4,v=new Array(1<<b);v[0]=new i(1).toRed(this),v[1]=f;for(var w=2;w<v.length;w++)v[w]=this.mul(v[w-1],f);var P=v[0],C=0,k=0,d=m.bitLength()%26;for(d===0&&(d=26),w=m.length-1;w>=0;w--){for(var S=m.words[w],F=d-1;F>=0;F--){var U=S>>F&1;if(P!==v[0]&&(P=this.sqr(P)),U===0&&C===0){k=0;continue}C<<=1,C|=U,k++,!(k!==b&&(w!==0||F!==0))&&(P=this.mul(P,v[C]),k=0,C=0)}d=26}return P},z.prototype.convertTo=function(f){var m=f.umod(this.m);return m===f?m.clone():m},z.prototype.convertFrom=function(f){var m=f.clone();return m.red=null,m},i.mont=function(f){return new te(f)};function te(_){z.call(this,_),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(te,z),te.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},te.prototype.convertFrom=function(f){var m=this.imod(f.mul(this.rinv));return m.red=null,m},te.prototype.imul=function(f,m){if(f.isZero()||m.isZero())return f.words[0]=0,f.length=1,f;var b=f.imul(m),v=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=b.isub(v).iushrn(this.shift),P=w;return w.cmp(this.m)>=0?P=w.isub(this.m):w.cmpn(0)<0&&(P=w.iadd(this.m)),P._forceRed(this)},te.prototype.mul=function(f,m){if(f.isZero()||m.isZero())return new i(0)._forceRed(this);var b=f.mul(m),v=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=b.isub(v).iushrn(this.shift),P=w;return w.cmp(this.m)>=0?P=w.isub(this.m):w.cmpn(0)<0&&(P=w.iadd(this.m)),P._forceRed(this)},te.prototype.invm=function(f){var m=this.imod(f._invmp(this.m).mul(this.r2));return m._forceRed(this)}})(typeof L5>"u"||L5,Xj)});var iG=L((Rrt,nG)=>{p();y();var oc=kb(),co=eG(),_r=function(){};function VS(e){return e.startsWith("int[")?"int256"+e.slice(3):e==="int"?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):e==="uint"?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):e==="fixed"?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):e==="ufixed"?"ufixed128x128":e}_r.eventID=function(e,t){var r=e+"("+t.map(VS).join(",")+")";return oc.keccak256(Buffer.from(r))};_r.methodID=function(e,t){return _r.eventID(e,t).slice(0,4)};function ol(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function K5(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}function _b(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?t[2]===""?"dynamic":parseInt(t[2],10):null}function Zd(e){var t=typeof e;if(t==="string")return oc.isHexPrefixed(e)?new co(oc.stripHexPrefix(e),16):new co(e,10);if(t==="number")return new co(e);if(e.toArray)return e;throw new Error("Argument is not a number")}function rG(e){var t=/^(\w+)\((.*)\)$/.exec(e);if(t.length!==3)throw new Error("Invalid method signature");var r=/^(.+)\):\((.+)$/.exec(t[2]);if(r!==null&&r.length===3)return{method:t[1],args:r[1].split(","),retargs:r[2].split(",")};var n=t[2].split(",");return n.length===1&&n[0]===""&&(n=[]),{method:t[1],args:n}}function ic(e,t){var r,n,i,o;if(e==="address")return ic("uint160",Zd(t));if(e==="bool")return ic("uint8",t?1:0);if(e==="string")return ic("bytes",Buffer.from(t,"utf8"));if(Pb(e)){if(typeof t.length>"u")throw new Error("Not an array?");if(r=_b(e),r!=="dynamic"&&r!==0&&t.length>r)throw new Error("Elements exceed array size: "+r);i=[],e=e.slice(0,e.lastIndexOf("[")),typeof t=="string"&&(t=JSON.parse(t));for(o in t)i.push(ic(e,t[o]));if(r==="dynamic"){var s=ic("uint256",t.length);i.unshift(s)}return Buffer.concat(i)}else{if(e==="bytes")return t=Buffer.from(t),i=Buffer.concat([ic("uint256",t.length),t]),t.length%32!==0&&(i=Buffer.concat([i,oc.zeros(32-t.length%32)])),i;if(e.startsWith("bytes")){if(r=ol(e),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);return oc.setLengthRight(t,32)}else if(e.startsWith("uint")){if(r=ol(e),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(n=Zd(t),n.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+n.bitLength());if(n<0)throw new Error("Supplied uint is negative");return n.toArrayLike(Buffer,"be",32)}else if(e.startsWith("int")){if(r=ol(e),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(n=Zd(t),n.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+n.bitLength());return n.toTwos(256).toArrayLike(Buffer,"be",32)}else if(e.startsWith("ufixed")){if(r=K5(e),n=Zd(t),n<0)throw new Error("Supplied ufixed is negative");return ic("uint256",n.mul(new co(2).pow(new co(r[1]))))}else if(e.startsWith("fixed"))return r=K5(e),ic("int256",Zd(t).mul(new co(2).pow(new co(r[1]))))}throw new Error("Unsupported or invalid type: "+e)}function da(e,t,r){typeof e=="string"&&(e=F5(e));var n,i,o,s;if(e.name==="address")return da(e.rawType,t,r).toArrayLike(Buffer,"be",20).toString("hex");if(e.name==="bool")return da(e.rawType,t,r).toString()===new co(1).toString();if(e.name==="string"){var a=da(e.rawType,t,r);return Buffer.from(a,"utf8").toString()}else if(e.isArray){for(o=[],n=e.size,e.size==="dynamic"&&(r=da("uint256",t,r).toNumber(),n=da("uint256",t,r).toNumber(),r=r+32),s=0;s<n;s++){var c=da(e.subArray,t,r);o.push(c),r+=e.subArray.memoryUsage}return o}else{if(e.name==="bytes")return r=da("uint256",t,r).toNumber(),n=da("uint256",t,r).toNumber(),t.slice(r+32,r+32+n);if(e.name.startsWith("bytes"))return t.slice(r,r+e.size);if(e.name.startsWith("uint")){if(i=new co(t.slice(r,r+32),16,"be"),i.bitLength()>e.size)throw new Error("Decoded int exceeds width: "+e.size+" vs "+i.bitLength());return i}else if(e.name.startsWith("int")){if(i=new co(t.slice(r,r+32),16,"be").fromTwos(256),i.bitLength()>e.size)throw new Error("Decoded uint exceeds width: "+e.size+" vs "+i.bitLength());return i}else if(e.name.startsWith("ufixed")){if(n=new co(2).pow(new co(e.size[1])),i=da("uint256",t,r),!i.mod(n).isZero())throw new Error("Decimals not supported yet");return i.div(n)}else if(e.name.startsWith("fixed")){if(n=new co(2).pow(new co(e.size[1])),i=da("int256",t,r),!i.mod(n).isZero())throw new Error("Decimals not supported yet");return i.div(n)}}throw new Error("Unsupported or invalid type: "+e.name)}function F5(e){var t,r;if(Pb(e)){t=_b(e);var n=e.slice(0,e.lastIndexOf("["));return n=F5(n),r={isArray:!0,name:e,size:t,memoryUsage:t==="dynamic"?32:n.memoryUsage*t,subArray:n},r}else{var i;switch(e){case"address":i="uint160";break;case"bool":i="uint8";break;case"string":i="bytes";break}if(r={rawType:i,name:e,memoryUsage:32},e.startsWith("bytes")&&e!=="bytes"||e.startsWith("uint")||e.startsWith("int")?r.size=ol(e):(e.startsWith("ufixed")||e.startsWith("fixed"))&&(r.size=K5(e)),e.startsWith("bytes")&&e!=="bytes"&&(r.size<1||r.size>32))throw new Error("Invalid bytes<N> width: "+r.size);if((e.startsWith("uint")||e.startsWith("int"))&&(r.size%8||r.size<8||r.size>256))throw new Error("Invalid int/uint<N> width: "+r.size);return r}}function z2e(e){return e==="string"||e==="bytes"||_b(e)==="dynamic"}function Pb(e){return e.lastIndexOf("]")===e.length-1}_r.rawEncode=function(e,t){var r=[],n=[],i=0;e.forEach(function(u){if(Pb(u)){var h=_b(u);h!=="dynamic"?i+=32*h:i+=32}else i+=32});for(var o=0;o<e.length;o++){var s=VS(e[o]),a=t[o],c=ic(s,a);z2e(s)?(r.push(ic("uint256",i)),n.push(c),i+=c.length):r.push(c)}return Buffer.concat(r.concat(n))};_r.rawDecode=function(e,t){var r=[];t=Buffer.from(t);for(var n=0,i=0;i<e.length;i++){var o=VS(e[i]),s=F5(o,t,n),a=da(s,t,n);n+=s.memoryUsage,r.push(a)}return r};_r.simpleEncode=function(e){var t=Array.prototype.slice.call(arguments).slice(1),r=rG(e);if(t.length!==r.args.length)throw new Error("Argument count mismatch");return Buffer.concat([_r.methodID(r.method,r.args),_r.rawEncode(r.args,t)])};_r.simpleDecode=function(e,t){var r=rG(e);if(!r.retargs)throw new Error("No return values in method");return _r.rawDecode(r.retargs,t)};function tG(e,t){return e.startsWith("address")||e.startsWith("bytes")?"0x"+t.toString("hex"):t.toString()}_r.stringify=function(e,t){var r=[];for(var n in e){var i=e[n],o=t[n];/^[^\[]+\[.*\]$/.test(i)?o=o.map(function(s){return tG(i,s)}).join(", "):o=tG(i,o),r.push(o)}return r};_r.solidityHexValue=function(e,t,r){var n,i;if(Pb(e)){var o=e.replace(/\[.*?\]/,"");if(!Pb(o)){var s=_b(e);if(s!=="dynamic"&&s!==0&&t.length>s)throw new Error("Elements exceed array size: "+s)}var a=t.map(function(h){return _r.solidityHexValue(o,h,256)});return Buffer.concat(a)}else{if(e==="bytes")return t;if(e==="string")return Buffer.from(t,"utf8");if(e==="bool"){r=r||8;var c=Array(r/4).join("0");return Buffer.from(t?c+"1":c+"0","hex")}else if(e==="address"){var u=20;return r&&(u=r/8),oc.setLengthLeft(t,u)}else if(e.startsWith("bytes")){if(n=ol(e),n<1||n>32)throw new Error("Invalid bytes<N> width: "+n);return oc.setLengthRight(t,n)}else if(e.startsWith("uint")){if(n=ol(e),n%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);if(i=Zd(t),i.bitLength()>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+i.bitLength());return r=r||n,i.toArrayLike(Buffer,"be",r/8)}else if(e.startsWith("int")){if(n=ol(e),n%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);if(i=Zd(t),i.bitLength()>n)throw new Error("Supplied int exceeds width: "+n+" vs "+i.bitLength());return r=r||n,i.toTwos(n).toArrayLike(Buffer,"be",r/8)}else throw new Error("Unsupported or invalid type: "+e)}};_r.solidityPack=function(e,t){if(e.length!==t.length)throw new Error("Number of types are not matching the values");for(var r=[],n=0;n<e.length;n++){var i=VS(e[n]),o=t[n];r.push(_r.solidityHexValue(i,o,null))}return Buffer.concat(r)};_r.soliditySHA3=function(e,t){return oc.keccak256(_r.solidityPack(e,t))};_r.soliditySHA256=function(e,t){return oc.sha256(_r.solidityPack(e,t))};_r.solidityRIPEMD160=function(e,t){return oc.ripemd160(_r.solidityPack(e,t),!0)};function j2e(e){return e>="0"&&e<="9"}_r.fromSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="s")t.push("bytes");else if(n==="b"){for(var i="bytes",o=r+1;o<e.length&&j2e(e[o]);)i+=e[o]-"0",o++;r=o-1,t.push(i)}else if(n==="i")t.push("int256");else if(n==="a")t.push("int256[]");else throw new Error("Unsupported or invalid type: "+n)}return t};_r.toSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="bytes")t.push("s");else if(n.startsWith("bytes"))t.push("b"+ol(n));else if(n==="int256")t.push("i");else if(n==="int256[]")t.push("a");else throw new Error("Unsupported or invalid type: "+n)}return t.join("")};nG.exports=_r});var sG=L((Urt,oG)=>{p();y();oG.exports=iG()});var lG=L(Kn=>{"use strict";p();y();Object.defineProperty(Kn,"__esModule",{value:!0});Kn.recoverTypedSignature=Kn.signTypedData=Kn.typedSignatureHash=Kn.TypedDataUtils=Kn.TYPED_MESSAGE_SCHEMA=Kn.SignTypedDataVersion=void 0;var ys=kb(),Bb=sG(),Qd=Tb(),Hi;(function(e){e.V1="V1",e.V3="V3",e.V4="V4"})(Hi=Kn.SignTypedDataVersion||(Kn.SignTypedDataVersion={}));Kn.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]};function $p(e,t){if(Object.keys(Hi).includes(e)){if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}else throw new Error(`Invalid version: '${e}'`)}function aG(e,t,r,n,i){if($p(i,[Hi.V3,Hi.V4]),e[r]!==void 0)return["bytes32",i===Hi.V4&&n==null?"0x0000000000000000000000000000000000000000000000000000000000000000":ys.keccak(q5(r,n,e,i))];if(n===void 0)throw new Error(`missing value for field ${t} of type ${r}`);if(r==="bytes")return["bytes32",ys.keccak(n)];if(r==="string")return typeof n=="string"&&(n=Buffer.from(n,"utf8")),["bytes32",ys.keccak(n)];if(r.lastIndexOf("]")===r.length-1){if(i===Hi.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");let o=r.slice(0,r.lastIndexOf("[")),s=n.map(a=>aG(e,t,o,a,i));return["bytes32",ys.keccak(Bb.rawEncode(s.map(([a])=>a),s.map(([,a])=>a)))]}return[r,n]}function q5(e,t,r,n){$p(n,[Hi.V3,Hi.V4]);let i=["bytes32"],o=[uG(e,r)];for(let s of r[e]){if(n===Hi.V3&&t[s.name]===void 0)continue;let[a,c]=aG(r,s.name,s.type,t[s.name],n);i.push(a),o.push(c)}return Bb.rawEncode(i,o)}function cG(e,t){let r="",n=H5(e,t);n.delete(e);let i=[e,...Array.from(n).sort()];for(let o of i){if(!t[o])throw new Error(`No type definition specified: ${o}`);r+=`${o}(${t[o].map(({name:a,type:c})=>`${c} ${a}`).join(",")})`}return r}function H5(e,t,r=new Set){if([e]=e.match(/^\w*/u),r.has(e)||t[e]===void 0)return r;r.add(e);for(let n of t[e])H5(n.type,t,r);return r}function V5(e,t,r,n){return $p(n,[Hi.V3,Hi.V4]),ys.keccak(q5(e,t,r,n))}function uG(e,t){return ys.keccak(cG(e,t))}function fG(e){let t={};for(let r in Kn.TYPED_MESSAGE_SCHEMA.properties)e[r]&&(t[r]=e[r]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}function G2e(e,t){$p(t,[Hi.V3,Hi.V4]);let r=fG(e),n=[Buffer.from("1901","hex")];return n.push(V5("EIP712Domain",r.domain,r.types,t)),r.primaryType!=="EIP712Domain"&&n.push(V5(r.primaryType,r.message,r.types,t)),ys.keccak(Buffer.concat(n))}Kn.TypedDataUtils={encodeData:q5,encodeType:cG,findTypeDependencies:H5,hashStruct:V5,hashType:uG,sanitizeData:fG,eip712Hash:G2e};function $2e(e){let t=W5(e);return ys.bufferToHex(t)}Kn.typedSignatureHash=$2e;function W5(e){let t=new Error("Expect argument to be non-empty array");if(typeof e!="object"||!("length"in e)||!e.length)throw t;let r=e.map(function(o){return o.type!=="bytes"?o.value:Qd.legacyToBuffer(o.value)}),n=e.map(function(o){return o.type}),i=e.map(function(o){if(!o.name)throw t;return`${o.type} ${o.name}`});return Bb.soliditySHA3(["bytes32","bytes32"],[Bb.soliditySHA3(new Array(e.length).fill("string"),i),Bb.soliditySHA3(n,r)])}function Y2e({privateKey:e,data:t,version:r}){if($p(r),Qd.isNullish(t))throw new Error("Missing data parameter");if(Qd.isNullish(e))throw new Error("Missing private key parameter");let n=r===Hi.V1?W5(t):Kn.TypedDataUtils.eip712Hash(t,r),i=ys.ecsign(n,e);return Qd.concatSig(ys.toBuffer(i.v),i.r,i.s)}Kn.signTypedData=Y2e;function J2e({data:e,signature:t,version:r}){if($p(r),Qd.isNullish(e))throw new Error("Missing data parameter");if(Qd.isNullish(t))throw new Error("Missing signature parameter");let n=r===Hi.V1?W5(e):Kn.TypedDataUtils.eip712Hash(e,r),i=Qd.recoverPublicKey(n,t),o=ys.publicToAddress(i);return ys.bufferToHex(o)}Kn.recoverTypedSignature=J2e});var hG=L((dG,qS)=>{p();y();(function(e,t){"use strict";typeof qS<"u"&&qS.exports?qS.exports=t():(e.nacl||(e.nacl={}),e.nacl.util=t())})(dG,function(){"use strict";var e={};function t(r){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(r))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(r){if(typeof r!="string")throw new TypeError("expected string");var n,i=unescape(encodeURIComponent(r)),o=new Uint8Array(i.length);for(n=0;n<i.length;n++)o[n]=i.charCodeAt(n);return o},e.encodeUTF8=function(r){var n,i=[];for(n=0;n<r.length;n++)i.push(String.fromCharCode(r[n]));return decodeURIComponent(escape(i.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(e.encodeBase64=function(r){return Buffer.from(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(Buffer.from(r,"base64"),0))}):(e.encodeBase64=function(r){return new Buffer(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(new Buffer(r,"base64"),0))}):(e.encodeBase64=function(r){var n,i=[],o=r.length;for(n=0;n<o;n++)i.push(String.fromCharCode(r[n]));return btoa(i.join(""))},e.decodeBase64=function(r){t(r);var n,i=atob(r),o=new Uint8Array(i.length);for(n=0;n<i.length;n++)o[n]=i.charCodeAt(n);return o}),e})});var bG=L(Fn=>{"use strict";p();y();var Z2e=Fn&&Fn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Q2e=Fn&&Fn.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),pG=Fn&&Fn.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Z2e(t,e,r);return Q2e(t,e),t};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.getEncryptionPublicKey=Fn.decryptSafely=Fn.decrypt=Fn.encryptSafely=Fn.encrypt=void 0;var Xd=pG(uh()),ha=pG(hG()),sc=Tb();function yG({publicKey:e,data:t,version:r}){if(sc.isNullish(e))throw new Error("Missing publicKey parameter");if(sc.isNullish(t))throw new Error("Missing data parameter");if(sc.isNullish(r))throw new Error("Missing version parameter");switch(r){case"x25519-xsalsa20-poly1305":{if(typeof t!="string")throw new Error("Message data must be given as a string");let n=Xd.box.keyPair(),i;try{i=ha.decodeBase64(e)}catch{throw new Error("Bad public key")}let o=ha.decodeUTF8(t),s=Xd.randomBytes(Xd.box.nonceLength),a=Xd.box(o,s,i,n.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:ha.encodeBase64(s),ephemPublicKey:ha.encodeBase64(n.publicKey),ciphertext:ha.encodeBase64(a)}}default:throw new Error("Encryption type/version not supported")}}Fn.encrypt=yG;function X2e({publicKey:e,data:t,version:r}){if(sc.isNullish(e))throw new Error("Missing publicKey parameter");if(sc.isNullish(t))throw new Error("Missing data parameter");if(sc.isNullish(r))throw new Error("Missing version parameter");let n=2**11,i=16;if(typeof t=="object"&&"toJSON"in t)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");let o={data:t,padding:""},a=Buffer.byteLength(JSON.stringify(o),"utf-8")%n,c=0;a>0&&(c=n-a-i),o.padding="0".repeat(c);let u=JSON.stringify(o);return yG({publicKey:e,data:u,version:r})}Fn.encryptSafely=X2e;function mG({encryptedData:e,privateKey:t}){if(sc.isNullish(e))throw new Error("Missing encryptedData parameter");if(sc.isNullish(t))throw new Error("Missing privateKey parameter");switch(e.version){case"x25519-xsalsa20-poly1305":{let r=gG(t),n=Xd.box.keyPair.fromSecretKey(r).secretKey,i=ha.decodeBase64(e.nonce),o=ha.decodeBase64(e.ciphertext),s=ha.decodeBase64(e.ephemPublicKey),a=Xd.box.open(o,i,s,n),c;try{c=ha.encodeUTF8(a)}catch{throw new Error("Decryption failed.")}if(c)return c;throw new Error("Decryption failed.")}default:throw new Error("Encryption type/version not supported.")}}Fn.decrypt=mG;function eSe({encryptedData:e,privateKey:t}){if(sc.isNullish(e))throw new Error("Missing encryptedData parameter");if(sc.isNullish(t))throw new Error("Missing privateKey parameter");return JSON.parse(mG({encryptedData:e,privateKey:t})).data}Fn.decryptSafely=eSe;function tSe(e){let t=gG(e),r=Xd.box.keyPair.fromSecretKey(t).publicKey;return ha.encodeBase64(r)}Fn.getEncryptionPublicKey=tSe;function gG(e){let t=Buffer.from(e,"hex").toString("base64");return ha.decodeBase64(t)}});var wG=L(Ro=>{"use strict";p();y();var rSe=Ro&&Ro.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),z5=Ro&&Ro.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&rSe(t,e,r)};Object.defineProperty(Ro,"__esModule",{value:!0});Ro.normalize=Ro.concatSig=void 0;z5(Qj(),Ro);z5(lG(),Ro);z5(bG(),Ro);var xG=Tb();Object.defineProperty(Ro,"concatSig",{enumerable:!0,get:function(){return xG.concatSig}});Object.defineProperty(Ro,"normalize",{enumerable:!0,get:function(){return xG.normalize}})});var n$=L(ey=>{"use strict";p();y();Object.defineProperty(ey,"__esModule",{value:!0});ey.testnet=ey.bitcoin=void 0;ey.bitcoin={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128};ey.testnet={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}});var i$=L(nr=>{"use strict";p();y();Object.defineProperty(nr,"__esModule",{value:!0});nr.maybe=nr.Boolean=nr.Array=nr.Buffer256bit=nr.Network=nr.typeforce=void 0;nr.typeforce=TI();nr.Network=nr.typeforce.compile({messagePrefix:nr.typeforce.oneOf(nr.typeforce.Buffer,nr.typeforce.String),bip32:{public:nr.typeforce.UInt32,private:nr.typeforce.UInt32},pubKeyHash:nr.typeforce.UInt8,scriptHash:nr.typeforce.UInt8,wif:nr.typeforce.UInt8});nr.Buffer256bit=nr.typeforce.BufferN(32);nr.Array=nr.typeforce.Array;nr.Boolean=nr.typeforce.Boolean;nr.maybe=nr.typeforce.maybe});var o$=L(XS=>{"use strict";p();y();Object.defineProperty(XS,"__esModule",{value:!0});XS.testEcc=void 0;var ke=e=>Buffer.from(e,"hex");function JSe(e){mr(e.isPoint(ke("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),mr(!e.isPoint(ke("030000000000000000000000000000000000000000000000000000000000000005"))),mr(e.isPrivate(ke("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),mr(e.isPrivate(ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),mr(!e.isPrivate(ke("0000000000000000000000000000000000000000000000000000000000000000"))),mr(!e.isPrivate(ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"))),mr(!e.isPrivate(ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364142"))),mr(Buffer.from(e.privateAdd(ke("0000000000000000000000000000000000000000000000000000000000000001"),ke("0000000000000000000000000000000000000000000000000000000000000000"))).equals(ke("0000000000000000000000000000000000000000000000000000000000000001"))),mr(e.privateAdd(ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"),ke("0000000000000000000000000000000000000000000000000000000000000003"))===null),mr(Buffer.from(e.privateAdd(ke("e211078564db65c3ce7704f08262b1f38f1ef412ad15b5ac2d76657a63b2c500"),ke("b51fbb69051255d1becbd683de5848242a89c229348dd72896a87ada94ae8665"))).equals(ke("9730c2ee69edbb958d42db7460bafa18fef9d955325aec99044c81c8282b0a24"))),mr(Buffer.from(e.privateNegate(ke("0000000000000000000000000000000000000000000000000000000000000001"))).equals(ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),mr(Buffer.from(e.privateNegate(ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"))).equals(ke("0000000000000000000000000000000000000000000000000000000000000003"))),mr(Buffer.from(e.privateNegate(ke("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(ke("4eede1bf775995d70a494f0a7bb6bc11e0b8cccd41cce8009ab1132c8b0a3792"))),mr(Buffer.from(e.pointCompress(ke("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!0)).equals(ke("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),mr(Buffer.from(e.pointCompress(ke("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!1)).equals(ke("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),mr(Buffer.from(e.pointCompress(ke("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!0)).equals(ke("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),mr(Buffer.from(e.pointCompress(ke("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!1)).equals(ke("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),mr(Buffer.from(e.pointFromScalar(ke("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(ke("02b07ba9dca9523b7ef4bd97703d43d20399eb698e194704791a25ce77a400df99"))),mr(e.xOnlyPointAddTweak(ke("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))===null);let t=e.xOnlyPointAddTweak(ke("1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b"),ke("a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac"));mr(Buffer.from(t.xOnlyPubkey).equals(ke("e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"))&&t.parity===1),t=e.xOnlyPointAddTweak(ke("2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991"),ke("823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47")),mr(Buffer.from(t.xOnlyPubkey).equals(ke("9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"))&&t.parity===0),mr(Buffer.from(e.sign(ke("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))).equals(ke("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),mr(e.verify(ke("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),ke("0379be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),ke("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),e.signSchnorr&&mr(Buffer.from(e.signSchnorr(ke("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),ke("c90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b14e5c9"),ke("c87aa53824b4d7ae2eb035a2b5bbbccc080e76cdc6d1692c4b0b62d798e6d906"))).equals(ke("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7"))),e.verifySchnorr&&mr(e.verifySchnorr(ke("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),ke("dd308afec5777e13121fa72b9cc1b7cc0139715309b086c960e18fd969774eb8"),ke("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7")))}XS.testEcc=JSe;function mr(e){if(!e)throw new Error("ecc library invalid")}});var a$=L(ty=>{"use strict";p();y();Object.defineProperty(ty,"__esModule",{value:!0});ty.ECPairFactory=ty.networks=void 0;var h_=n$();ty.networks=h_;var Wi=i$(),ZSe=z_(),s$=q1(),QSe=o$(),d_=Wi.typeforce.maybe(Wi.typeforce.compile({compressed:Wi.maybe(Wi.Boolean),network:Wi.maybe(Wi.Network)})),XSe=e=>e.length===32?e:e.slice(1,33);function eEe(e){(0,QSe.testEcc)(e);function t(a){return e.isPoint(a)}function r(a,c){if(Wi.typeforce(Wi.Buffer256bit,a),!e.isPrivate(a))throw new TypeError("Private key not in range [1, n)");return Wi.typeforce(d_,c),new s(a,void 0,c)}function n(a,c){return Wi.typeforce(e.isPoint,a),Wi.typeforce(d_,c),new s(void 0,a,c)}function i(a,c){let u=s$.decode(a),h=u.version;if(Wi.Array(c)){if(c=c.filter(l=>h===l.wif).pop(),!c)throw new Error("Unknown network version")}else if(c=c||h_.bitcoin,h!==c.wif)throw new Error("Invalid network version");return r(u.privateKey,{compressed:u.compressed,network:c})}function o(a){Wi.typeforce(d_,a),a===void 0&&(a={});let c=a.rng||ZSe,u;do u=c(32),Wi.typeforce(Wi.Buffer256bit,u);while(!e.isPrivate(u));return r(u,a)}class s{__D;__Q;compressed;network;lowR;constructor(c,u,h){this.__D=c,this.__Q=u,this.lowR=!1,h===void 0&&(h={}),this.compressed=h.compressed===void 0?!0:h.compressed,this.network=h.network||h_.bitcoin,u!==void 0&&(this.__Q=Buffer.from(e.pointCompress(u,this.compressed)))}get privateKey(){return this.__D}get publicKey(){if(!this.__Q){let c=e.pointFromScalar(this.__D,this.compressed);this.__Q=Buffer.from(c)}return this.__Q}toWIF(){if(!this.__D)throw new Error("Missing private key");return s$.encode(this.network.wif,this.__D,this.compressed)}tweak(c){return this.privateKey?this.tweakFromPrivateKey(c):this.tweakFromPublicKey(c)}sign(c,u){if(!this.__D)throw new Error("Missing private key");if(u===void 0&&(u=this.lowR),u===!1)return Buffer.from(e.sign(c,this.__D));{let h=e.sign(c,this.__D),l=Buffer.alloc(32,0),g=0;for(;h[0]>127;)g++,l.writeUIntLE(g,0,6),h=e.sign(c,this.__D,l);return Buffer.from(h)}}signSchnorr(c){if(!this.privateKey)throw new Error("Missing private key");if(!e.signSchnorr)throw new Error("signSchnorr not supported by ecc library");return Buffer.from(e.signSchnorr(c,this.privateKey))}verify(c,u){return e.verify(c,this.publicKey,u)}verifySchnorr(c,u){if(!e.verifySchnorr)throw new Error("verifySchnorr not supported by ecc library");return e.verifySchnorr(c,this.publicKey.subarray(1,33),u)}tweakFromPublicKey(c){let u=XSe(this.publicKey),h=e.xOnlyPointAddTweak(u,c);if(!h||h.xOnlyPubkey===null)throw new Error("Cannot tweak public key!");let l=Buffer.from([h.parity===0?2:3]);return n(Buffer.concat([l,h.xOnlyPubkey]),{network:this.network,compressed:this.compressed})}tweakFromPrivateKey(c){let h=this.publicKey[0]===3||this.publicKey[0]===4&&(this.publicKey[64]&1)===1?e.privateNegate(this.privateKey):this.privateKey,l=e.privateAdd(h,c);if(!l)throw new Error("Invalid tweaked private key!");return r(Buffer.from(l),{network:this.network,compressed:this.compressed})}}return{isPoint:t,fromPrivateKey:r,fromPublicKey:n,fromWIF:i,makeRandom:o}}ty.ECPairFactory=eEe});var c$=L(dl=>{"use strict";p();y();Object.defineProperty(dl,"__esModule",{value:!0});dl.networks=dl.ECPairFactory=dl.default=void 0;var p_=a$();Object.defineProperty(dl,"default",{enumerable:!0,get:function(){return p_.ECPairFactory}});Object.defineProperty(dl,"ECPairFactory",{enumerable:!0,get:function(){return p_.ECPairFactory}});Object.defineProperty(dl,"networks",{enumerable:!0,get:function(){return p_.networks}})});p();y();var Nl=X(Qr()),zr=X(_w()),Nc=X(Os());p();y();uy.config({EXPONENTIAL_AT:1e3,DECIMAL_PLACES:78});p();y();var Zre=(e,t)=>e+t,m9=e=>e.reduce(Zre,0);var g9=Nl.Buffer.alloc(64).fill(0),p6=e=>qo(e)?Nl.Buffer.from(e.message.serialize()):e.serializeMessage(),Bw=e=>Nc.default.encode(p6(e)),b9=e=>{try{return Bw(Fh(e,"bs58"))}catch{return Bw(Fh(e,"base64"))}},x9=e=>{try{return Fh(e,"bs58").version}catch{return Fh(e,"base64").version}},w9=e=>y6(g6(e)),qo=e=>e&&"version"in e,Cw=(e,t)=>qo(e)?Nl.Buffer.from(e.serialize()):e.serialize(t??{requireAllSignatures:!1,verifySignatures:!1}),y6=(e,t)=>Nc.default.encode(Cw(e,t)),v9=(e,t)=>Cw(e,t).toString("base64"),Fh=(e,t)=>{let r;if(t==="base64")r=Nl.Buffer.from(e,"base64");else if(t==="bs58")r=Nc.default.decode(e);else throw new Error("Unsupported encoding");return zr.VersionedTransaction.deserialize(r)};function m6(e){return qo(e)?e.signatures.filter(r=>r.every(i=>i===0)===!1).length>0:e.signatures.filter(({signature:r})=>r?r.find(i=>i!==0)!==void 0:!1).length>0}var A9=e=>{let t=e.map(r=>zr.VersionedMessage.deserialize(Nc.default.decode(r)));return m9(t.map(r=>r.header.numRequiredSignatures))},g6=e=>{let t=Nc.default.decode(e);if(zr.VersionedMessage.deserializeMessageVersion(t)==="legacy"){let i=zr.Message.from(t);return zr.Transaction.populate(i,[])}let n=zr.VersionedMessage.deserialize(t);return new zr.VersionedTransaction(n)},S9=(e,t=[])=>{let r=Nc.default.decode(e);if(zr.VersionedMessage.deserializeMessageVersion(r)==="legacy"){let i=zr.Message.from(r);return zr.Transaction.populate(i,t.map(s=>s?Nc.default.encode(s):Nc.default.encode(g9)))}else{let i=zr.VersionedMessage.deserialize(r);return new zr.VersionedTransaction(i,t.map(s=>s||g9))}},E9=e=>e.compileMessage().accountKeys,b6=e=>qo(e)?e.message.recentBlockhash:e.recentBlockhash,I9=(e,t)=>{qo(e)?e.message.recentBlockhash=t:e.recentBlockhash=t},k9=async(e,t)=>{if(b6(e))return;let r=(await t.getLatestBlockhash("confirmed")).blockhash;I9(e,r)},T9=async(e,t)=>{if(m6(e))return;let r=(await t.getLatestBlockhash("confirmed")).blockhash;I9(e,r)},x6=(e,t)=>{qo(e)||(e.feePayer=t)},w6=e=>qo(e)?e.message.staticAccountKeys[0]:e.feePayer,P9=(e,t)=>{w6(e)||x6(e,t)},_9=(e,t)=>{qo(e)?e.sign(t):e.partialSign(...t)},B9=e=>qo(e)?e.message.staticAccountKeys:e.signatures.map(t=>t.publicKey),C9=e=>qo(e)?e.signatures.map(t=>Nl.Buffer.from(t)):e.signatures.map(t=>t.signature).filter(t=>t!==null);function M9(e){if(!Qre(Nl.Buffer.from(e)))return!1;let t;try{t=zr.Message.from(e)}catch{t=void 0}let r;try{r=zr.VersionedMessage.deserialize(e)}catch{r=void 0}return!t&&!r||(t?.instructions?.length??0)===0&&(r?.compiledInstructions?.length??0)===0}function Qre(e){let t=e.length,r=0;for(;r<t;)if(!(e[r]&128))r++;else if((e[r]&224)===192){if(r+1===t||(e[r+1]&192)!==128||(e[r]&254)===192)return!1;r+=2}else if((e[r]&240)===224){if(r+2>=t||(e[r+1]&192)!==128||(e[r+2]&192)!==128||e[r]===224&&(e[r+1]&224)===128||e[r]===237&&(e[r+1]&224)===160)return!1;r+=3}else if((e[r]&248)===240){if(r+3>=t||(e[r+1]&192)!==128||(e[r+2]&192)!==128||(e[r+3]&192)!==128||e[r]===240&&(e[r+1]&240)===128||e[r]===244&&e[r+1]>143||e[r]>244)return!1;r+=4}else return!1;return!0}var R9=e=>uy(e).dividedBy(zr.LAMPORTS_PER_SOL),O9=e=>uy(e).multipliedBy(zr.LAMPORTS_PER_SOL);var go={};SE(go,{BufferLayout:()=>rne,Message:()=>Zi.Message,MessageV0:()=>Zi.MessageV0,Transaction:()=>Zi.Transaction,TransactionInstruction:()=>Zi.TransactionInstruction,TransactionMessage:()=>Zi.TransactionMessage,VersionedMessage:()=>Zi.VersionedMessage,VersionedTransaction:()=>Zi.VersionedTransaction,getAccountsFromTransaction:()=>E9,getFeePayer:()=>w6,getRecentBlockhash:()=>b6,getRequiredSignatures:()=>A9,getSignaturePubKeys:()=>B9,getSignatures:()=>C9,isAlreadySigned:()=>m6,isSafeMessage:()=>M9,isVersionedTransaction:()=>qo,lamportsToSolana:()=>R9,messageAndSignaturesToTransaction:()=>S9,messageStringToTransaction:()=>g6,messageStringToTransactionString:()=>w9,setFeePayer:()=>x6,setFeePayerIfNotExists:()=>P9,setRecentBlockhashIfNotExists:()=>k9,setRecentBlockhashIfNotSigned:()=>T9,signWithAdditionalSigners:()=>_9,solanaInstructionEncodeData:()=>K9,solanaToLamports:()=>O9,transactionStringToMessageString:()=>b9,transactionStringToTransaction:()=>Fh,transactionStringToVersion:()=>x9,transactionToBase58TransactionString:()=>y6,transactionToBase64TransactionString:()=>v9,transactionToMessageString:()=>Bw,transactionToSerializedMessage:()=>p6,transactionToSerializedTransaction:()=>Cw,u64:()=>D9});p();y();var rne=X(Iy()),Zi=X(_w());Sc(go,X(_w()));p();y();var N9=X(hy()),U9=X(Iy()),Mw=X(c3()),Xre=e=>{let t=e.decode.bind(e),r=e.encode.bind(e);return{decode:t,encode:r}},Rw=e=>t=>{let r=(0,U9.blob)(e,t),{encode:n,decode:i}=Xre(r),o=r;return o.decode=(s,a)=>{let c=i(s,a);return(0,Mw.toBigIntLE)(N9.Buffer.from(c))},o.encode=(s,a,c)=>{let u=(0,Mw.toBufferLE)(s,e);return n(u,a,c)},o},D9=Rw(8),EIe=Rw(16),IIe=Rw(24),kIe=Rw(32);p();y();var L9=X(hy());p();y();var ene=X(hy()),Vh=X(Iy());function v6(e,t){let r=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(t[i.property]);if("count"in i&&"elementLayout"in i){let o=t[i.property];if(Array.isArray(o))return o.length*r(i.elementLayout)}else if("fields"in i)return v6({layout:i},t[i.property]);return 0},n=0;return e.layout.fields.forEach(i=>{n+=r(i)}),n}function K9(e,t){let r=e.layout.span>=0?e.layout.span:v6(e,t),n=L9.Buffer.alloc(r),i=Object.assign({instruction:e.index},t);return e.layout.encode(i,n),n}p();y();p();y();p();y();p();y();var nne=X(Wb(),1);var _n=BigInt(0),Ct=BigInt(1),$u=BigInt(2),ine=BigInt(8),F9=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),fr=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:F9,n:F9,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")});var z9=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),cm=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),VIe=BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),one=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),sne=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),ane=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),cne=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),dn=class e{constructor(t,r,n,i){this.x=t,this.y=r,this.z=n,this.t=i}static fromAffine(t){if(!(t instanceof jr))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(jr.ZERO)?e.ZERO:new e(t.x,t.y,Ct,ue(t.x*t.y))}static toAffineBatch(t){let r=lne(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){q9(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t,c=ue(r*a),u=ue(o*i),h=ue(n*a),l=ue(s*i);return c===u&&h===l}negate(){return new e(ue(-this.x),this.y,this.z,ue(-this.t))}double(){let{x:t,y:r,z:n}=this,{a:i}=fr,o=ue(t*t),s=ue(r*r),a=ue($u*ue(n*n)),c=ue(i*o),u=t+r,h=ue(ue(u*u)-o-s),l=c+s,g=l-a,x=c-s,A=ue(h*g),E=ue(l*x),B=ue(h*x),M=ue(g*l);return new e(A,E,M,B)}add(t){q9(t);let{x:r,y:n,z:i,t:o}=this,{x:s,y:a,z:c,t:u}=t,h=ue((n-r)*(a+s)),l=ue((n+r)*(a-s)),g=ue(l-h);if(g===_n)return this.double();let x=ue(i*$u*u),A=ue(o*$u*c),E=A+x,B=l+h,M=A-x,N=ue(E*g),R=ue(B*M),V=ue(E*M),q=ue(g*B);return new e(N,R,q,V)}subtract(t){return this.add(t.negate())}precomputeWindow(t){let r=1+256/t,n=[],i=this,o=i;for(let s=0;s<r;s++){o=i,n.push(o);for(let a=1;a<2**(t-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(t,r){!r&&this.equals(e.BASE)&&(r=jr.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&I6.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=e.normalizeZ(i),I6.set(r,i)));let o=e.ZERO,s=e.BASE,a=1+256/n,c=2**(n-1),u=BigInt(2**n-1),h=2**n,l=BigInt(n);for(let g=0;g<a;g++){let x=g*c,A=Number(t&u);t>>=l,A>c&&(A-=h,t+=Ct);let E=x,B=x+Math.abs(A)-1,M=g%2!==0,N=A<0;A===0?s=s.add(V9(M,i[E])):o=o.add(V9(N,i[B]))}return e.normalizeZ([o,s])[0]}multiply(t,r){return this.wNAF(Nw(t,fr.l),r)}multiplyUnsafe(t){let r=Nw(t,fr.l,!1),n=e.BASE,i=e.ZERO;if(r===_n)return i;if(this.equals(i)||r===Ct)return this;if(this.equals(n))return this.wNAF(r);let o=i,s=this;for(;r>_n;)r&Ct&&(o=o.add(s)),s=s.double(),r>>=Ct;return o}isSmallOrder(){return this.multiplyUnsafe(fr.h).equals(e.ZERO)}isTorsionFree(){let t=this.multiplyUnsafe(fr.l/$u).double();return fr.l%$u&&(t=t.add(this)),t.equals(e.ZERO)}toAffine(t){let{x:r,y:n,z:i}=this,o=this.equals(e.ZERO);t==null&&(t=o?ine:Dw(i));let s=ue(r*t),a=ue(n*t),c=ue(i*t);if(o)return jr.ZERO;if(c!==Ct)throw new Error("invZ was invalid");return new jr(s,a)}fromRistrettoBytes(){S6()}toRistrettoBytes(){S6()}fromRistrettoHash(){S6()}};dn.BASE=new dn(fr.Gx,fr.Gy,Ct,ue(fr.Gx*fr.Gy));dn.ZERO=new dn(_n,Ct,Ct,_n);function V9(e,t){let r=t.negate();return e?r:t}function q9(e){if(!(e instanceof dn))throw new TypeError("ExtendedPoint expected")}function A6(e){if(!(e instanceof Ul))throw new TypeError("RistrettoPoint expected")}function S6(){throw new Error("Legacy method: switch to RistrettoPoint")}var Ul=class e{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){let{d:r}=fr,n=ue(cm*t*t),i=ue((n+Ct)*ane),o=BigInt(-1),s=ue((o-r*n)*ue(n+r)),{isValid:a,value:c}=T6(i,s),u=ue(c*t);Gu(u)||(u=ue(-u)),a||(c=u),a||(o=n);let h=ue(o*(n-Ct)*cne-s),l=c*c,g=ue((c+c)*s),x=ue(h*one),A=ue(Ct-l),E=ue(Ct+l);return new dn(ue(g*E),ue(A*x),ue(x*E),ue(g*A))}static hashToCurve(t){t=Yu(t,64);let r=E6(t.slice(0,32)),n=this.calcElligatorRistrettoMap(r),i=E6(t.slice(32,64)),o=this.calcElligatorRistrettoMap(i);return new e(n.add(o))}static fromHex(t){t=Yu(t,32);let{a:r,d:n}=fr,i="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",o=E6(t);if(!hne(lm(o),t)||Gu(o))throw new Error(i);let s=ue(o*o),a=ue(Ct+r*s),c=ue(Ct-r*s),u=ue(a*a),h=ue(c*c),l=ue(r*n*u-h),{isValid:g,value:x}=W9(ue(l*h)),A=ue(x*c),E=ue(x*A*l),B=ue((o+o)*A);Gu(B)&&(B=ue(-B));let M=ue(a*E),N=ue(B*M);if(!g||Gu(N)||M===_n)throw new Error(i);return new e(new dn(B,M,Ct,N))}toRawBytes(){let{x:t,y:r,z:n,t:i}=this.ep,o=ue(ue(n+r)*ue(n-r)),s=ue(t*r),a=ue(s*s),{value:c}=W9(ue(o*a)),u=ue(c*o),h=ue(c*s),l=ue(u*h*i),g;if(Gu(i*l)){let A=ue(r*cm),E=ue(t*cm);t=A,r=E,g=ue(u*sne)}else g=h;Gu(t*l)&&(r=ue(-r));let x=ue((n-r)*g);return Gu(x)&&(x=ue(-x)),lm(x)}toHex(){return dm(this.toRawBytes())}toString(){return this.toHex()}equals(t){A6(t);let r=this.ep,n=t.ep,i=ue(r.x*n.y)===ue(r.y*n.x),o=ue(r.y*n.y)===ue(r.x*n.x);return i||o}add(t){return A6(t),new e(this.ep.add(t.ep))}subtract(t){return A6(t),new e(this.ep.subtract(t.ep))}multiply(t){return new e(this.ep.multiply(t))}multiplyUnsafe(t){return new e(this.ep.multiplyUnsafe(t))}};Ul.BASE=new Ul(dn.BASE);Ul.ZERO=new Ul(dn.ZERO);var I6=new WeakMap,jr=class e{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,I6.delete(this)}static fromHex(t,r=!0){let{d:n,P:i}=fr;t=Yu(t,32);let o=t.slice();o[31]=t[31]&-129;let s=hm(o);if(r&&s>=i)throw new Error("Expected 0 < hex < P");if(!r&&s>=z9)throw new Error("Expected 0 < hex < 2**256");let a=ue(s*s),c=ue(a-Ct),u=ue(n*a+Ct),{isValid:h,value:l}=T6(c,u);if(!h)throw new Error("Point.fromHex: invalid y coordinate");let g=(l&Ct)===Ct;return(t[31]&128)!==0!==g&&(l=ue(-l)),new e(l,s)}static async fromPrivateKey(t){return(await Y9(t)).point}toRawBytes(){let t=lm(this.y);return t[31]|=this.x&Ct?128:0,t}toHex(){return dm(this.toRawBytes())}toX25519(){let{y:t}=this,r=ue((Ct+t)*Dw(Ct-t));return lm(r)}isTorsionFree(){return dn.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new e(ue(-this.x),this.y)}add(t){return dn.fromAffine(this).add(dn.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return dn.fromAffine(this).multiply(t,this).toAffine()}};jr.BASE=new jr(fr.Gx,fr.Gy);jr.ZERO=new jr(_n,Ct);var fm=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromHex(t){let r=Yu(t,64),n=jr.fromHex(r.slice(0,32),!1),i=hm(r.slice(32,64));return new e(n,i)}assertValidity(){let{r:t,s:r}=this;if(!(t instanceof jr))throw new Error("Expected Point instance");return Nw(r,fr.l,!1),this}toRawBytes(){let t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(lm(this.s),32),t}toHex(){return dm(this.toRawBytes())}};function H9(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var une=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function dm(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=une[e[r]];return t}function k6(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function j9(e){let r=e.toString(16).padStart(64,"0");return k6(r)}function lm(e){return j9(e).reverse()}function Gu(e){return(ue(e)&Ct)===Ct}function hm(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+dm(Uint8Array.from(e).reverse()))}var fne=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function E6(e){return ue(hm(e)&fne)}function ue(e,t=fr.P){let r=e%t;return r>=_n?r:t+r}function Dw(e,t=fr.P){if(e===_n||t<=_n)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=ue(e,t),n=t,i=_n,o=Ct,s=Ct,a=_n;for(;r!==_n;){let u=n/r,h=n%r,l=i-s*u,g=o-a*u;n=r,r=h,i=s,o=a,s=l,a=g}if(n!==Ct)throw new Error("invert: does not exist");return ue(i,t)}function lne(e,t=fr.P){let r=new Array(e.length),n=e.reduce((o,s,a)=>s===_n?o:(r[a]=o,ue(o*s,t)),Ct),i=Dw(n,t);return e.reduceRight((o,s,a)=>s===_n?o:(r[a]=ue(o*r[a],t),ue(o*s,t)),i),r}function Pa(e,t){let{P:r}=fr,n=e;for(;t-- >_n;)n*=n,n%=r;return n}function dne(e){let{P:t}=fr,r=BigInt(5),n=BigInt(10),i=BigInt(20),o=BigInt(40),s=BigInt(80),c=e*e%t*e%t,u=Pa(c,$u)*c%t,h=Pa(u,Ct)*e%t,l=Pa(h,r)*h%t,g=Pa(l,n)*l%t,x=Pa(g,i)*g%t,A=Pa(x,o)*x%t,E=Pa(A,s)*A%t,B=Pa(E,s)*A%t,M=Pa(B,n)*l%t;return{pow_p_5_8:Pa(M,$u)*e%t,b2:c}}function T6(e,t){let r=ue(t*t*t),n=ue(r*r*t),i=dne(e*n).pow_p_5_8,o=ue(e*r*i),s=ue(t*o*o),a=o,c=ue(o*cm),u=s===e,h=s===ue(-e),l=s===ue(-e*cm);return u&&(o=a),(h||l)&&(o=c),Gu(o)&&(o=ue(-o)),{isValid:u||h,value:o}}function W9(e){return T6(Ct,e)}function Ow(e){return ue(hm(e),fr.l)}function hne(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Yu(e,t){let r=e instanceof Uint8Array?Uint8Array.from(e):k6(e);if(typeof t=="number"&&r.length!==t)throw new Error(`Expected ${t} bytes`);return r}function Nw(e,t,r=!0){if(!t)throw new TypeError("Specify max value");if(typeof e=="number"&&Number.isSafeInteger(e)&&(e=BigInt(e)),typeof e=="bigint"&&e<t){if(r){if(_n<e)return e}else if(_n<=e)return e}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function pne(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function G9(e){if(e=typeof e=="bigint"||typeof e=="number"?j9(Nw(e,z9)):Yu(e),e.length!==32)throw new Error("Expected 32 bytes");return e}function $9(e){let t=pne(e.slice(0,32)),r=e.slice(32,64),n=Ow(t),i=jr.BASE.multiply(n),o=i.toRawBytes();return{head:t,prefix:r,scalar:n,point:i,pointBytes:o}}var um;function Uw(...e){if(typeof um!="function")throw new Error("utils.sha512Sync must be set to use sync methods");return um(...e)}async function Y9(e){return $9(await Uc.sha512(G9(e)))}function P6(e){return $9(Uw(G9(e)))}function yne(e){return P6(e).pointBytes}function mne(e,t){e=Yu(e);let{prefix:r,scalar:n,pointBytes:i}=P6(t),o=Ow(Uw(r,e)),s=jr.BASE.multiply(o),a=Ow(Uw(s.toRawBytes(),i,e)),c=ue(o+a*n,fr.l);return new fm(s,c).toRawBytes()}function gne(e,t,r){t=Yu(t),r instanceof jr||(r=jr.fromHex(r,!1));let{r:n,s:i}=e instanceof fm?e.assertValidity():fm.fromHex(e),o=dn.BASE.multiplyUnsafe(i);return{r:n,s:i,SB:o,pub:r,msg:t}}function bne(e,t,r,n){let i=Ow(n),o=dn.fromAffine(e).multiplyUnsafe(i);return dn.fromAffine(t).add(o).subtract(r).multiplyUnsafe(fr.h).equals(dn.ZERO)}function xne(e,t,r){let{r:n,SB:i,msg:o,pub:s}=gne(e,t,r),a=Uw(n.toRawBytes(),s.toRawBytes(),o);return bne(s,n,i,a)}var Lw={getExtendedPublicKey:P6,getPublicKey:yne,sign:mne,verify:xne};jr.BASE._setWindowSize(8);var ju={node:nne,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Uc={bytesToHex:dm,hexToBytes:k6,concatBytes:H9,getExtendedPublicKey:Y9,mod:ue,invert:Dw,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:e=>{if(e=Yu(e),e.length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return ue(hm(e),fr.l-Ct)+Ct},randomBytes:(e=32)=>{if(ju.web)return ju.web.getRandomValues(new Uint8Array(e));if(ju.node){let{randomBytes:t}=ju.node;return new Uint8Array(t(e).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Uc.randomBytes(32),sha512:async(...e)=>{let t=H9(...e);if(ju.web){let r=await ju.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(r)}else{if(ju.node)return Uint8Array.from(ju.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(e=8,t=jr.BASE){let r=t.equals(jr.BASE)?t:new jr(t.x,t.y);return r._setWindowSize(e),r.multiply($u),r},sha512Sync:void 0};Object.defineProperties(Uc,{sha512Sync:{configurable:!1,get(){return um},set(e){um||(um=e)}}});p();y();p();y();var Kw=BigInt(4294967295),_6=BigInt(32);function J9(e,t=!1){return t?{h:Number(e&Kw),l:Number(e>>_6&Kw)}:{h:Number(e>>_6&Kw)|0,l:Number(e&Kw)|0}}function wne(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l:s}=J9(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}var vne=(e,t)=>BigInt(e>>>0)<<_6|BigInt(t>>>0),Ane=(e,t,r)=>e>>>r,Sne=(e,t,r)=>e<<32-r|t>>>r,Ene=(e,t,r)=>e>>>r|t<<32-r,Ine=(e,t,r)=>e<<32-r|t>>>r,kne=(e,t,r)=>e<<64-r|t>>>r-32,Tne=(e,t,r)=>e>>>r-32|t<<64-r,Pne=(e,t)=>t,_ne=(e,t)=>e,Bne=(e,t,r)=>e<<r|t>>>32-r,Cne=(e,t,r)=>t<<r|e>>>32-r,Mne=(e,t,r)=>t<<r-32|e>>>64-r,Rne=(e,t,r)=>e<<r-32|t>>>64-r;function One(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}var Nne=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Une=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,Dne=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),Lne=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,Kne=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),Fne=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0,Vne={fromBig:J9,split:wne,toBig:vne,shrSH:Ane,shrSL:Sne,rotrSH:Ene,rotrSL:Ine,rotrBH:kne,rotrBL:Tne,rotr32H:Pne,rotr32L:_ne,rotlSH:Bne,rotlSL:Cne,rotlBH:Mne,rotlBL:Rne,add:One,add3L:Nne,add3H:Une,add4L:Dne,add4H:Lne,add5H:Fne,add5L:Kne},Me=Vne;var[qne,Hne]=Me.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Ju=new Uint32Array(80),Zu=new Uint32Array(80),qh=class extends yB{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:u,El:h,Fh:l,Fl:g,Gh:x,Gl:A,Hh:E,Hl:B}=this;return[t,r,n,i,o,s,a,c,u,h,l,g,x,A,E,B]}set(t,r,n,i,o,s,a,c,u,h,l,g,x,A,E,B){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=h|0,this.Fh=l|0,this.Fl=g|0,this.Gh=x|0,this.Gl=A|0,this.Hh=E|0,this.Hl=B|0}process(t,r){for(let R=0;R<16;R++,r+=4)Ju[R]=t.getUint32(r),Zu[R]=t.getUint32(r+=4);for(let R=16;R<80;R++){let V=Ju[R-15]|0,q=Zu[R-15]|0,W=Me.rotrSH(V,q,1)^Me.rotrSH(V,q,8)^Me.shrSH(V,q,7),G=Me.rotrSL(V,q,1)^Me.rotrSL(V,q,8)^Me.shrSL(V,q,7),z=Ju[R-2]|0,te=Zu[R-2]|0,_=Me.rotrSH(z,te,19)^Me.rotrBH(z,te,61)^Me.shrSH(z,te,6),f=Me.rotrSL(z,te,19)^Me.rotrBL(z,te,61)^Me.shrSL(z,te,6),m=Me.add4L(G,f,Zu[R-7],Zu[R-16]),b=Me.add4H(m,W,_,Ju[R-7],Ju[R-16]);Ju[R]=b|0,Zu[R]=m|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:u,Dl:h,Eh:l,El:g,Fh:x,Fl:A,Gh:E,Gl:B,Hh:M,Hl:N}=this;for(let R=0;R<80;R++){let V=Me.rotrSH(l,g,14)^Me.rotrSH(l,g,18)^Me.rotrBH(l,g,41),q=Me.rotrSL(l,g,14)^Me.rotrSL(l,g,18)^Me.rotrBL(l,g,41),W=l&x^~l&E,G=g&A^~g&B,z=Me.add5L(N,q,G,Hne[R],Zu[R]),te=Me.add5H(z,M,V,W,qne[R],Ju[R]),_=z|0,f=Me.rotrSH(n,i,28)^Me.rotrBH(n,i,34)^Me.rotrBH(n,i,39),m=Me.rotrSL(n,i,28)^Me.rotrBL(n,i,34)^Me.rotrBL(n,i,39),b=n&o^n&a^o&a,v=i&s^i&c^s&c;M=E|0,N=B|0,E=x|0,B=A|0,x=l|0,A=g|0,{h:l,l:g}=Me.add(u|0,h|0,te|0,_|0),u=a|0,h=c|0,a=o|0,c=s|0,o=n|0,s=i|0;let w=Me.add3L(_,m,v);n=Me.add3H(w,te,f,b),i=w|0}({h:n,l:i}=Me.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=Me.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=Me.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:h}=Me.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:l,l:g}=Me.add(this.Eh|0,this.El|0,l|0,g|0),{h:x,l:A}=Me.add(this.Fh|0,this.Fl|0,x|0,A|0),{h:E,l:B}=Me.add(this.Gh|0,this.Gl|0,E|0,B|0),{h:M,l:N}=Me.add(this.Hh|0,this.Hl|0,M|0,N|0),this.set(n,i,o,s,a,c,u,h,l,g,x,A,E,B,M,N)}roundClean(){Ju.fill(0),Zu.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},B6=class extends qh{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},C6=class extends qh{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},M6=class extends qh{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}},bo=gl(()=>new qh),ZIe=gl(()=>new B6),QIe=gl(()=>new C6),XIe=gl(()=>new M6);p();y();var Wne=X(Wb(),1);var Lt=BigInt(0),xr=BigInt(1),Xu=BigInt(2),mm=BigInt(3),Z9=BigInt(8),wr=Object.freeze({a:Lt,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:xr,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),Q9=(e,t)=>(e+t/Xu)/t,Fw={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){let{n:t}=wr,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-xr*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=Q9(o*e,t),c=Q9(-n*e,t),u=ge(e-a*r-c*i,t),h=ge(-a*n-c*o,t),l=u>s,g=h>s;if(l&&(u=t-u),g&&(h=t-h),u>s||h>s)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:g,k2:h}}},Hh=32,bm=32;var X9=Hh+1,eM=2*Hh+1;function tM(e){let{a:t,b:r}=wr,n=ge(e*e),i=ge(n*e);return ge(i+t*e+r)}var Vw=wr.a===Lt,zw=class extends Error{constructor(t){super(t)}};function rM(e){if(!(e instanceof Ci))throw new TypeError("JacobianPoint expected")}var Ci=class e{constructor(t,r,n){this.x=t,this.y=r,this.z=n}static fromAffine(t){if(!(t instanceof Gr))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(Gr.ZERO)?e.ZERO:new e(t.x,t.y,xr)}static toAffineBatch(t){let r=Yne(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return e.toAffineBatch(t).map(e.fromAffine)}equals(t){rM(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t,c=ge(i*i),u=ge(a*a),h=ge(r*u),l=ge(o*c),g=ge(ge(n*a)*u),x=ge(ge(s*i)*c);return h===l&&g===x}negate(){return new e(this.x,ge(-this.y),this.z)}double(){let{x:t,y:r,z:n}=this,i=ge(t*t),o=ge(r*r),s=ge(o*o),a=t+o,c=ge(Xu*(ge(a*a)-i-s)),u=ge(mm*i),h=ge(u*u),l=ge(h-Xu*c),g=ge(u*(c-l)-Z9*s),x=ge(Xu*r*n);return new e(l,g,x)}add(t){rM(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t;if(o===Lt||s===Lt)return this;if(r===Lt||n===Lt)return t;let c=ge(i*i),u=ge(a*a),h=ge(r*u),l=ge(o*c),g=ge(ge(n*a)*u),x=ge(ge(s*i)*c),A=ge(l-h),E=ge(x-g);if(A===Lt)return E===Lt?this.double():e.ZERO;let B=ge(A*A),M=ge(A*B),N=ge(h*B),R=ge(E*E-M-Xu*N),V=ge(E*(N-R)-g*M),q=ge(i*a*A);return new e(R,V,q)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){let r=e.ZERO;if(typeof t=="bigint"&&t===Lt)return r;let n=oM(t);if(n===xr)return this;if(!Vw){let l=r,g=this;for(;n>Lt;)n&xr&&(l=l.add(g)),g=g.double(),n>>=xr;return l}let{k1neg:i,k1:o,k2neg:s,k2:a}=Fw.splitScalar(n),c=r,u=r,h=this;for(;o>Lt||a>Lt;)o&xr&&(c=c.add(h)),a&xr&&(u=u.add(h)),h=h.double(),o>>=xr,a>>=xr;return i&&(c=c.negate()),s&&(u=u.negate()),u=new e(ge(u.x*Fw.beta),u.y,u.z),c.add(u)}precomputeWindow(t){let r=Vw?128/t+1:256/t+1,n=[],i=this,o=i;for(let s=0;s<r;s++){o=i,n.push(o);for(let a=1;a<2**(t-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(t,r){!r&&this.equals(e.BASE)&&(r=Gr.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&O6.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=e.normalizeZ(i),O6.set(r,i)));let o=e.ZERO,s=e.BASE,a=1+(Vw?128/n:256/n),c=2**(n-1),u=BigInt(2**n-1),h=2**n,l=BigInt(n);for(let g=0;g<a;g++){let x=g*c,A=Number(t&u);t>>=l,A>c&&(A-=h,t+=xr);let E=x,B=x+Math.abs(A)-1,M=g%2!==0,N=A<0;A===0?s=s.add(qw(M,i[E])):o=o.add(qw(N,i[B]))}return{p:o,f:s}}multiply(t,r){let n=oM(t),i,o;if(Vw){let{k1neg:s,k1:a,k2neg:c,k2:u}=Fw.splitScalar(n),{p:h,f:l}=this.wNAF(a,r),{p:g,f:x}=this.wNAF(u,r);h=qw(s,h),g=qw(c,g),g=new e(ge(g.x*Fw.beta),g.y,g.z),i=h.add(g),o=l.add(x)}else{let{p:s,f:a}=this.wNAF(n,r);i=s,o=a}return e.normalizeZ([i,o])[0]}toAffine(t){let{x:r,y:n,z:i}=this,o=this.equals(e.ZERO);t==null&&(t=o?Z9:Yw(i));let s=t,a=ge(s*s),c=ge(a*s),u=ge(r*a),h=ge(n*c),l=ge(i*s);if(o)return Gr.ZERO;if(l!==xr)throw new Error("invZ was invalid");return new Gr(u,h)}};Ci.BASE=new Ci(wr.Gx,wr.Gy,xr);Ci.ZERO=new Ci(Lt,xr,Lt);function qw(e,t){let r=t.negate();return e?r:t}var O6=new WeakMap,Gr=class e{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,O6.delete(this)}hasEvenY(){return this.y%Xu===Lt}static fromCompressedHex(t){let r=t.length===32,n=Wo(r?t:t.subarray(1));if(!Ww(n))throw new Error("Point is not on curve");let i=tM(n),o=$ne(i),s=(o&xr)===xr;r?s&&(o=ge(-o)):(t[0]&1)===1!==s&&(o=ge(-o));let a=new e(n,o);return a.assertValidity(),a}static fromUncompressedHex(t){let r=Wo(t.subarray(1,Hh+1)),n=Wo(t.subarray(Hh+1,Hh*2+1)),i=new e(r,n);return i.assertValidity(),i}static fromHex(t){let r=Dl(t),n=r.length,i=r[0];if(n===Hh)return this.fromCompressedHex(r);if(n===X9&&(i===2||i===3))return this.fromCompressedHex(r);if(n===eM&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-${X9} compressed bytes or ${eM} uncompressed bytes, not ${n}`)}static fromPrivateKey(t){return e.BASE.multiply(vm(t))}static fromSignature(t,r,n){let{r:i,s:o}=Xne(r);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");let s=Zne(Dl(t)),{n:a}=wr,c=n===2||n===3?i+a:i,u=Yw(c,a),h=ge(-s*u,a),l=ge(o*u,a),g=n&1?"03":"02",x=e.fromHex(g+ef(c)),A=e.BASE.multiplyAndAddUnsafe(x,h,l);if(!A)throw new Error("Cannot recover signature: point at infinify");return A.assertValidity(),A}toRawBytes(t=!1){return tf(this.toHex(t))}toHex(t=!1){let r=ef(this.x);return t?`${this.hasEvenY()?"02":"03"}${r}`:`04${r}${ef(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let t="Point is not on elliptic curve",{x:r,y:n}=this;if(!Ww(r)||!Ww(n))throw new Error(t);let i=ge(n*n),o=tM(r);if(ge(i-o)!==Lt)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new e(this.x,ge(-this.y))}double(){return Ci.fromAffine(this).double().toAffine()}add(t){return Ci.fromAffine(this).add(Ci.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return Ci.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,r,n){let i=Ci.fromAffine(this),o=r===Lt||r===xr||this!==e.BASE?i.multiplyUnsafe(r):i.multiply(r),s=Ci.fromAffine(t).multiplyUnsafe(n),a=o.add(s);return a.equals(Ci.ZERO)?void 0:a.toAffine()}};Gr.BASE=new Gr(wr.Gx,wr.Gy);Gr.ZERO=new Gr(Lt,Lt);function nM(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function iM(e){if(e.length<2||e[0]!==2)throw new Error(`Invalid signature integer tag: ${zh(e)}`);let t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:Wo(r),left:e.subarray(t+2)}}function zne(e){if(e.length<2||e[0]!=48)throw new Error(`Invalid signature tag: ${zh(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");let{data:t,left:r}=iM(e.subarray(2)),{data:n,left:i}=iM(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${zh(i)}`);return{r:t,s:n}}var gm=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromCompact(t){let r=t instanceof Uint8Array,n="Signature.fromCompact";if(typeof t!="string"&&!r)throw new TypeError(`${n}: Expected string or Uint8Array`);let i=r?zh(t):t;if(i.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new e(jw(i.slice(0,64)),jw(i.slice(64,128)))}static fromDER(t){let r=t instanceof Uint8Array;if(typeof t!="string"&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:n,s:i}=zne(r?t:tf(t));return new e(n,i)}static fromHex(t){return this.fromDER(t)}assertValidity(){let{r:t,s:r}=this;if(!wm(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!wm(r))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let t=wr.n>>xr;return this.s>t}normalizeS(){return this.hasHighS()?new e(this.r,ge(-this.s,wr.n)):this}toDERRawBytes(){return tf(this.toDERHex())}toDERHex(){let t=nM(ym(this.s)),r=nM(ym(this.r)),n=t.length/2,i=r.length/2,o=ym(n),s=ym(i);return`30${ym(i+n+4)}02${s}${r}02${o}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return tf(this.toCompactHex())}toCompactHex(){return ef(this.r)+ef(this.s)}};function pm(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var jne=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function zh(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=jne[e[r]];return t}var Gne=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function ef(e){if(typeof e!="bigint")throw new Error("Expected bigint");if(!(Lt<=e&&e<Gne))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function xm(e){let t=tf(ef(e));if(t.length!==32)throw new Error("Error: expected 32 bytes");return t}function ym(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function jw(e){if(typeof e!="string")throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function tf(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function Wo(e){return jw(zh(e))}function Dl(e){return e instanceof Uint8Array?Uint8Array.from(e):tf(e)}function oM(e){if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if(typeof e=="bigint"&&wm(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function ge(e,t=wr.P){let r=e%t;return r>=Lt?r:t+r}function Ho(e,t){let{P:r}=wr,n=e;for(;t-- >Lt;)n*=n,n%=r;return n}function $ne(e){let{P:t}=wr,r=BigInt(6),n=BigInt(11),i=BigInt(22),o=BigInt(23),s=BigInt(44),a=BigInt(88),c=e*e*e%t,u=c*c*e%t,h=Ho(u,mm)*u%t,l=Ho(h,mm)*u%t,g=Ho(l,Xu)*c%t,x=Ho(g,n)*g%t,A=Ho(x,i)*x%t,E=Ho(A,s)*A%t,B=Ho(E,a)*E%t,M=Ho(B,s)*A%t,N=Ho(M,mm)*u%t,R=Ho(N,o)*x%t,V=Ho(R,r)*c%t,q=Ho(V,Xu);if(q*q%t!==e)throw new Error("Cannot find square root");return q}function Yw(e,t=wr.P){if(e===Lt||t<=Lt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=ge(e,t),n=t,i=Lt,o=xr,s=xr,a=Lt;for(;r!==Lt;){let u=n/r,h=n%r,l=i-s*u,g=o-a*u;n=r,r=h,i=s,o=a,s=l,a=g}if(n!==xr)throw new Error("invert: does not exist");return ge(i,t)}function Yne(e,t=wr.P){let r=new Array(e.length),n=e.reduce((o,s,a)=>s===Lt?o:(r[a]=o,ge(o*s,t)),xr),i=Yw(n,t);return e.reduceRight((o,s,a)=>s===Lt?o:(r[a]=ge(o*r[a],t),ge(o*s,t)),i),r}function Jne(e){let t=e.length*8-bm*8,r=Wo(e);return t>0?r>>BigInt(t):r}function Zne(e,t=!1){let r=Jne(e);if(t)return r;let{n}=wr;return r>=n?r-n:r}var Wh,R6;function wm(e){return Lt<e&&e<wr.n}function Ww(e){return Lt<e&&e<wr.P}function vm(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if(typeof e=="string"){if(e.length!==2*bm)throw new Error("Expected 32 bytes of private key");t=jw(e)}else if(e instanceof Uint8Array){if(e.length!==bm)throw new Error("Expected 32 bytes of private key");t=Wo(e)}else throw new TypeError("Expected valid private key");if(!wm(t))throw new Error("Expected private key: 0 < key < n");return t}function Qne(e){return e instanceof Gr?(e.assertValidity(),e):Gr.fromHex(e)}function Xne(e){if(e instanceof gm)return e.assertValidity(),e;try{return gm.fromDER(e)}catch{return gm.fromCompact(e)}}function Dc(e,t=!1){return Gr.fromPrivateKey(e).toRawBytes(t)}function Gw(e){return ge(Wo(e),wr.n)}var jh=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromHex(t){let r=Dl(t);if(r.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${r.length}`);let n=Wo(r.subarray(0,32)),i=Wo(r.subarray(32,64));return new e(n,i)}assertValidity(){let{r:t,s:r}=this;if(!Ww(t)||!wm(r))throw new Error("Invalid signature")}toHex(){return ef(this.r)+ef(this.s)}toRawBytes(){return tf(this.toHex())}};function eie(e){return Gr.fromPrivateKey(e).toRawX()}var $w=class{constructor(t,r,n=_a.randomBytes()){if(t==null)throw new TypeError(`sign: Expected valid message, not "${t}"`);this.m=Dl(t);let{x:i,scalar:o}=this.getScalar(vm(r));if(this.px=i,this.d=o,this.rand=Dl(n),this.rand.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(t){let r=Gr.fromPrivateKey(t),n=r.hasEvenY()?t:wr.n-t;return{point:r,scalar:n,x:r.toRawX()}}initNonce(t,r){return xm(t^Wo(r))}finalizeNonce(t){let r=ge(Wo(t),wr.n);if(r===Lt)throw new Error("sign: Creation of signature failed. k is zero");let{point:n,x:i,scalar:o}=this.getScalar(r);return{R:n,rx:i,k:o}}finalizeSig(t,r,n,i){return new jh(t.x,ge(r+n*i,wr.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){let{m:t,d:r,px:n,rand:i}=this,o=_a.taggedHash,s=this.initNonce(r,await o(Qu.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(await o(Qu.nonce,s,n,t)),h=Gw(await o(Qu.challenge,c,n,t)),l=this.finalizeSig(a,u,h,r);return await cM(l,t,n)||this.error(),l}calcSync(){let{m:t,d:r,px:n,rand:i}=this,o=_a.taggedHashSync,s=this.initNonce(r,o(Qu.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(o(Qu.nonce,s,n,t)),h=Gw(o(Qu.challenge,c,n,t)),l=this.finalizeSig(a,u,h,r);return uM(l,t,n)||this.error(),l}};async function tie(e,t,r){return new $w(e,t,r).calc()}function rie(e,t,r){return new $w(e,t,r).calcSync()}function sM(e,t,r){let n=e instanceof jh,i=n?e:jh.fromHex(e);return n&&i.assertValidity(),{...i,m:Dl(t),P:Qne(r)}}function aM(e,t,r,n){let i=Gr.BASE.multiplyAndAddUnsafe(t,vm(r),ge(-n,wr.n));return!(!i||!i.hasEvenY()||i.x!==e)}async function cM(e,t,r){try{let{r:n,s:i,m:o,P:s}=sM(e,t,r),a=Gw(await _a.taggedHash(Qu.challenge,xm(n),s.toRawX(),o));return aM(n,s,i,a)}catch{return!1}}function uM(e,t,r){try{let{r:n,s:i,m:o,P:s}=sM(e,t,r),a=Gw(_a.taggedHashSync(Qu.challenge,xm(n),s.toRawX(),o));return aM(n,s,i,a)}catch(n){if(n instanceof zw)throw n;return!1}}var fM={Signature:jh,getPublicKey:eie,sign:tie,verify:cM,signSync:rie,verifySync:uM};Gr.BASE._setWindowSize(8);var xo={node:Wne,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Qu={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},Hw={},_a={bytesToHex:zh,hexToBytes:tf,concatBytes:pm,mod:ge,invert:Yw,isValidPrivateKey(e){try{return vm(e),!0}catch{return!1}},_bigintTo32Bytes:xm,_normalizePrivateKey:vm,hashToPrivateKey:e=>{e=Dl(e);let t=bm+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");let r=ge(Wo(e),wr.n-xr)+xr;return xm(r)},randomBytes:(e=32)=>{if(xo.web)return xo.web.getRandomValues(new Uint8Array(e));if(xo.node){let{randomBytes:t}=xo.node;return Uint8Array.from(t(e))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>_a.hashToPrivateKey(_a.randomBytes(bm+8)),precompute(e=8,t=Gr.BASE){let r=t===Gr.BASE?t:new Gr(t.x,t.y);return r._setWindowSize(e),r.multiply(mm),r},sha256:async(...e)=>{if(xo.web){let t=await xo.web.subtle.digest("SHA-256",pm(...e));return new Uint8Array(t)}else if(xo.node){let{createHash:t}=xo.node,r=t("sha256");return e.forEach(n=>r.update(n)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(xo.web){let r=await xo.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=pm(...t),i=await xo.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(xo.node){let{createHmac:r}=xo.node,n=r("sha256",e);return t.forEach(i=>n.update(i)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let r=Hw[e];if(r===void 0){let n=await _a.sha256(Uint8Array.from(e,i=>i.charCodeAt(0)));r=pm(n,n),Hw[e]=r}return _a.sha256(r,...t)},taggedHashSync:(e,...t)=>{if(typeof Wh!="function")throw new zw("sha256Sync is undefined, you need to set it");let r=Hw[e];if(r===void 0){let n=Wh(Uint8Array.from(e,i=>i.charCodeAt(0)));r=pm(n,n),Hw[e]=r}return Wh(r,...t)},_JacobianPoint:Ci};Object.defineProperties(_a,{sha256Sync:{configurable:!1,get(){return Wh},set(e){Wh||(Wh=e)}},hmacSha256Sync:{configurable:!1,get(){return R6},set(e){R6||(R6=e)}}});p();y();var lM=new RegExp("^[0-9]+'?$"),Gh=2147483648;p();y();var l4e=new RegExp("^m(\\/[0-9]+')+$");var iie="ed25519 seed",dM=e=>{let t=Buffer.from(bl(bo,Buffer.from(iie),e)).toString("hex"),r=t.slice(0,64),n=t.slice(64);return{key:Buffer.from(r,"hex"),chainCode:Buffer.from(n,"hex")}},hM=({key:e,chainCode:t},r)=>{let n=Buffer.allocUnsafe(4);n.writeUInt32BE(r,0);let i=Buffer.concat([Buffer.alloc(1,0),e,n]),o=Buffer.from(bl(bo,t,i)).toString("hex"),s=o.slice(0,64),a=o.slice(64);return{key:Buffer.from(s,"hex"),chainCode:Buffer.from(a,"hex")}};p();y();var Lc=X(Qr()),Jw=X(sh()),$h=X(fn());var oie=Lc.Buffer.from("Bitcoin seed"),pM=Jw.BigNumber.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),yM=e=>{let t=Lc.Buffer.from(bl(bo,Lc.Buffer.from(oie),e)).toString("hex"),r=t.slice(0,64),n=t.slice(64);return{key:Lc.Buffer.from(r,"hex"),chainCode:Lc.Buffer.from(n,"hex")}},mM=(e,t)=>{let{key:r,chainCode:n}=e,i=new Uint8Array(37);if(t&Gh)i.set(r,1);else{let l=Dc(r,!0);i.set((0,$h.arrayify)(l))}for(let l=24;l>=0;l-=8)i[33+(l>>3)]=t>>24-l&255;let o=Lc.Buffer.from(bl(bo,n,i)).toString("hex"),s=o.slice(0,64),a=o.slice(64),c=Jw.BigNumber.from(`0x${s}`);if(c.gte(pM))throw new Error("Invalid private key");let u=c.add(`0x${r.toString("hex")}`).mod(pM);if(u.eq(Jw.BigNumber.from(0)))throw new Error("Invalid private key");let h=(0,$h.hexZeroPad)((0,$h.hexlify)(u),32);return{key:Lc.Buffer.from(h.replace("0x",""),"hex"),chainCode:Lc.Buffer.from(a,"hex")}};p();y();var N6=O.string().refine(e=>{if(typeof e!="string")return!1;let t=e.split("/");if(t.length<2||t[0]!=="m")return!1;for(let r=1;r<t.length;++r)if(!lM.test(t[r]))return!1;return!0},{message:"Value is not a valid derivation path."});var Am=O.union([O.literal("bitcoinTaproot"),O.literal("bitcoinNativeSegwit"),O.literal("bitcoinNestedSegwit"),O.literal("bitcoinLegacy")]),Sm=O.union([O.literal("bip44RootEthereum"),O.literal("bip44Ethereum"),O.literal("bip44EthereumSecondary"),O.literal("bip44EthereumTertiary")]),Em=O.union([O.literal("bip44Root"),O.literal("bip44"),O.literal("bip44Change"),O.literal("deprecated")]);p();y();var sie=O.union([O.literal("bip44Change"),O.literal("bip44"),O.literal("deprecated")]),aie=O.union([O.literal("bip44Ethereum"),O.literal("bip44EthereumSecondary"),O.literal("bip44EthereumTertiary")]),cie=O.union([O.literal("bitcoinTaproot"),O.literal("bitcoinNativeSegwit"),O.literal("bitcoinNestedSegwit"),O.literal("bitcoinLegacy")]),U6=O.number().int().min(0),uie=O.object({pathType:O.literal("bip44Root"),index:O.number().optional()}),fie=O.object({pathType:sie,index:U6}),lie=O.object({pathType:O.literal("bip44RootEthereum"),index:O.number().optional()}),die=O.object({pathType:aie,index:U6}),hie=O.object({pathType:cie,index:U6}),Zw=O.union([uie,fie,lie,die,hie]),Im=new Error("Invalid derivation path."),bM=new Error("Unsupported derivation path."),D6=e=>{if(!Zw.safeParse(e).success)throw Im;switch(e.pathType){case"bitcoinTaproot":return`m/86'/0'/0'/0/${e.index}`;case"bitcoinNativeSegwit":return`m/84'/0'/0'/0/${e.index}`;case"bitcoinNestedSegwit":return`m/46'/0'/0'/0/${e.index}`;case"bitcoinLegacy":return`m/44'/0'/0'/0/${e.index}`;case"bip44RootEthereum":return"m/44'/60'";case"bip44Ethereum":return`m/44'/60'/0'/0/${e.index}`;case"bip44EthereumSecondary":return`m/44'/60'/1'/0/${e.index}`;case"bip44EthereumTertiary":return`m/44'/60'/2'/0/${e.index}`;case"bip44Root":return"m/44'/501'";case"deprecated":return`m/501'/${e.index}'/0/0`;case"bip44":return`m/44'/501'/${e.index}'`;case"bip44Change":return`m/44'/501'/${e.index}'/0'`}},gM=1<<31>>>0,pie=e=>{try{let t=e.replace("0x","").match(/.{1,2}/g)??[];if(t.length===0)throw Im;let r=parseInt(t[0],16),n="m";for(let i=0;i<r;i++){let o="";for(let c=0;c<4;c++)o+=t[1+i*4+c];let s=parseInt(o,16),a=s>=gM;a&&(s-=gM),n+=`/${s.toString(10)}${a?"'":""}`}return n}catch{throw Im}},yie=e=>{let t,r=N6.safeParse(`m/${e.replace("m/","")}`);if(r.success)t=r.data;else try{t=pie(e)}catch{throw Im}if(t==="m/44'/501'")return{pathType:"bip44Root"};if(t==="m/44'/60'")return{pathType:"bip44RootEthereum"};let n=t.replace("m/","").split("/");try{if(n.length===5&&n[0]==="86'"&&n[1]==="0'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bitcoinTaproot",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="84'"&&n[1]==="0'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bitcoinNativeSegwit",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="46'"&&n[1]==="0'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bitcoinNestedSegwit",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="44'"&&n[1]==="0'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bitcoinLegacy",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="44'"&&n[1]==="60'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bip44Ethereum",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="44'"&&n[1]==="60'"&&n[2]==="1'"&&n[3]==="0")return{pathType:"bip44EthereumSecondary",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="44'"&&n[1]==="60'"&&n[2]==="2'"&&n[3]==="0")return{pathType:"bip44EthereumTertiary",index:parseInt(n[4],10)};if(n.length===4&&n[0]==="44'"&&n[1]==="501'"&&n[3]==="0'")return{pathType:"bip44Change",index:parseInt(n[2],10)};if(n.length===3&&n[0]==="44'"&&n[1]==="501'")return{pathType:"bip44",index:parseInt(n[2],10)};if(n.length===4&&n[0]==="501'"&&n[2]==="0"&&n[3]==="0")return{pathType:"deprecated",index:parseInt(n[1],10)}}catch{}throw bM};p();y();var R4e=new Error("Unsupported path."),L6=e=>{switch(e){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":return!0;case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Root":case"bip44":case"bip44Change":case"deprecated":return!1}},K6=e=>{switch(e){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":return!1;case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":return!0;case"bip44Root":case"bip44":case"bip44Change":case"deprecated":return!1}},F6=e=>{switch(e){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":return!1;case"bip44Root":case"bip44":case"bip44Change":case"deprecated":return!0}};Uc.sha512Sync=(...e)=>bo(Uc.concatBytes(...e));var{getPublicKey:mie}=Lw,qs=class{#e;#t;constructor(t){this.#e={ellipticCurve:"ed25519",value:dM(t),nodes:{}},this.#t={ellipticCurve:"secp256k1",value:yM(t),nodes:{}}}derivePathType(t,r){switch(t){case"bitcoinTaproot":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/86'/0'/0'/0/${r}`,useCompressedPublicKey:!0});case"bitcoinNativeSegwit":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/84'/0'/0'/0/${r}`,useCompressedPublicKey:!0});case"bitcoinNestedSegwit":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/46'/0'/0'/0/${r}`,useCompressedPublicKey:!0});case"bitcoinLegacy":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/44'/0'/0'/0/${r}`,useCompressedPublicKey:!0});case"bip44Ethereum":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/44'/60'/0'/0/${r}`});case"bip44EthereumSecondary":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/44'/60'/1'/0/${r}`});case"bip44EthereumTertiary":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/44'/60'/2'/0/${r}`});case"bip44RootEthereum":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:"m/44'/60'"});case"bip44Change":return this.derivePath({ellipticCurve:"ed25519",derivationPath:`m/44'/501'/${r}'/0'`});case"bip44":return this.derivePath({ellipticCurve:"ed25519",derivationPath:`m/44'/501'/${r}'`});case"deprecated":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/501'/${r}'/0/0`});case"bip44Root":return this.derivePath({ellipticCurve:"ed25519",derivationPath:"m/44'/501'"})}}derivePath(t){return t.ellipticCurve==="ed25519"?this.deriveED25519Path(t):t.ellipticCurve==="secp256k1"?this.deriveSECP256K1Path(t):be(t)}deriveED25519Path(t){let{ellipticCurve:r,derivationPath:n}=t,i=n.split("/"),o=this.#e;for(let c of i){if(c==="m")continue;if(!o)throw new Error("Cannot derive path, no current node.");let u=o.nodes?.[c]??null;if(!u){let h={ellipticCurve:r,value:hM(o.value,parseInt(c,10)+Gh),nodes:{}};u=h,o.nodes[c]=h}o=u}if(!o)throw new Error(`Unable to derive ${n} on curve ${r}.`);let s=mie(o.value.key),a=new Uint8Array(64);return a.set(o.value.key),a.set(s,32),{publicKey:s,secretKey:a}}deriveSECP256K1Path(t){let{ellipticCurve:r,derivationPath:n,useCompressedPublicKey:i=!1}=t,o=n.split("/"),s=this.#t;for(let u of o){if(u==="m")continue;if(!s)throw new Error("Cannot derive path, no current node.");let h=s.nodes?.[u]??null;if(!h){let l=0;u.endsWith("'")&&(l=Gh);let g={ellipticCurve:r,value:mM(s.value,parseInt(u,10)+l),nodes:{}};h=g,s.nodes[u]=g}s=h}if(!s)throw new Error(`Unable to derive ${n} on curve ${r}.`);let a=s.value.key;return{publicKey:Dc(a,i),secretKey:new Uint8Array(a)}}cleanUpTree(t){if(t){t.value.key.fill(0),t.value.chainCode.fill(0);let r=Object.values(t.nodes);for(let n of r)this.cleanUpTree(n)}}cleanup(){this.cleanUpTree(this.#e),this.cleanUpTree(this.#t),this.#e=null,this.#t=null}};p();y();var Ie=(s=>(s.BitcoinTaproot="bip122_p2tr",s.BitcoinNativeSegwit="bip122_p2wpkh",s.BitcoinNestedSegwit="bip122_p2sh",s.BitcoinLegacy="bip122_p2pkh",s.Solana="solana",s.EVM="eip155",s))(Ie||{}),xM=["bip122_p2tr","bip122_p2wpkh","bip122_p2sh","bip122_p2pkh"],rf=O.enum(xM);var Qw=class{constructor(){this.type="bip122_p2pkh";this.displayName="Legacy";this.defaultDerivationPathType="bitcoinLegacy";this.otherDerivationPathType=[]}};p();y();var Xw=class{constructor(){this.type="bip122_p2wpkh";this.displayName="Native Segwit";this.defaultDerivationPathType="bitcoinNativeSegwit";this.otherDerivationPathType=[]}};p();y();var e1=class{constructor(){this.type="bip122_p2sh";this.displayName="Nested Segwit";this.defaultDerivationPathType="bitcoinNestedSegwit";this.otherDerivationPathType=[]}};p();y();var t1=class{constructor(){this.type="bip122_p2tr";this.displayName="Taproot";this.defaultDerivationPathType="bitcoinTaproot";this.otherDerivationPathType=[]}};p();y();var r1=class{constructor(){this.type="eip155";this.displayName="Ethereum";this.defaultDerivationPathType="bip44Ethereum";this.otherDerivationPathType=["bip44RootEthereum","bip44EthereumSecondary","bip44EthereumTertiary"]}};p();y();var n1=class{constructor(){this.type="solana";this.displayName="Solana";this.defaultDerivationPathType="bip44Change";this.otherDerivationPathType=["bip44Root","bip44","deprecated"]}};var wM,vM,AM,SM,EM,IM;IM="bip122_p2tr",EM="bip122_p2wpkh",SM="bip122_p2sh",AM="bip122_p2pkh",vM="eip155",wM="solana";var V6=class{constructor(){this[IM]=new t1;this[EM]=new Xw;this[SM]=new e1;this[AM]=new Qw;this[vM]=new r1;this[wM]=new n1;this.allAddressTypes=Object.values(Ie);this.allAddressTypeDefinitions=this.allAddressTypes.map(t=>this[t]);this.addressTypeByDerivationPathType={};this.allAddressTypeDefinitions.forEach(t=>{this.addressTypeByDerivationPathType[t.defaultDerivationPathType]=t.type,t.otherDerivationPathType.forEach(r=>{this.addressTypeByDerivationPathType[r]=t.type})})}getAll(){return this.allAddressTypes}getDisplayName(t){return this[t].displayName}getAddressType(t){return this.addressTypeByDerivationPathType[t]}},mi=new V6;p();y();p();y();p();y();var i1=class{constructor(){this.addressTypes=["bip122_p2tr","bip122_p2wpkh","bip122_p2sh","bip122_p2pkh"]}generateKeypairFromPrivateKey(t){let r=t.fold(i=>Buffer.from(i));return{publicKey:Dc(r,!0),privateKey:r}}generateKeypairFromSeed(t,r,n){let i=t.fold(o=>new qs(o));try{let o=i.derivePathType(n,r);return{publicKey:o.publicKey,privateKey:o.secretKey}}finally{i.cleanup()}}};p();y();p();y();var j8=X(cy());p();y();var CM=X(sh());var Yh=X(zo()),MM=X(Ti());p();y();var _M="abstract-provider/5.7.0";var Pie=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},_ie=new MM.Logger(_M),BM=class extends Yh.Description{static isForkEvent(t){return!!(t&&t._isForkEvent)}};var c1=class e{constructor(){_ie.checkAbstract(new.target,e),(0,Yh.defineReadOnly)(this,"_isProvider",!0)}getFeeData(){return Pie(this,void 0,void 0,function*(){let{block:t,gasPrice:r}=yield(0,Yh.resolveProperties)({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(s=>null)}),n=null,i=null,o=null;return t&&t.baseFeePerGas&&(n=t.baseFeePerGas,o=CM.BigNumber.from("1500000000"),i=t.baseFeePerGas.mul(2).add(o)),{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:o,gasPrice:r}})}addListener(t,r){return this.on(t,r)}removeListener(t,r){return this.off(t,r)}static isProvider(t){return!!(t&&t._isProvider)}};p();y();var Ws=X(zo()),Ba=X(Ti());p();y();var RM="abstract-signer/5.7.0";var Hs=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},jo=new Ba.Logger(RM),Bie=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],Cie=[Ba.Logger.errors.INSUFFICIENT_FUNDS,Ba.Logger.errors.NONCE_EXPIRED,Ba.Logger.errors.REPLACEMENT_UNDERPRICED],km=class e{constructor(){jo.checkAbstract(new.target,e),(0,Ws.defineReadOnly)(this,"_isSigner",!0)}getBalance(t){return Hs(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),t)})}getTransactionCount(t){return Hs(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),t)})}estimateGas(t){return Hs(this,void 0,void 0,function*(){this._checkProvider("estimateGas");let r=yield(0,Ws.resolveProperties)(this.checkTransaction(t));return yield this.provider.estimateGas(r)})}call(t,r){return Hs(this,void 0,void 0,function*(){this._checkProvider("call");let n=yield(0,Ws.resolveProperties)(this.checkTransaction(t));return yield this.provider.call(n,r)})}sendTransaction(t){return Hs(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");let r=yield this.populateTransaction(t),n=yield this.signTransaction(r);return yield this.provider.sendTransaction(n)})}getChainId(){return Hs(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return Hs(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return Hs(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(t){return Hs(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(t)})}checkTransaction(t){for(let n in t)Bie.indexOf(n)===-1&&jo.throwArgumentError("invalid transaction key: "+n,"transaction",t);let r=(0,Ws.shallowCopy)(t);return r.from==null?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&jo.throwArgumentError("from address mismatch","transaction",t),n[0])),r}populateTransaction(t){return Hs(this,void 0,void 0,function*(){let r=yield(0,Ws.resolveProperties)(this.checkTransaction(t));r.to!=null&&(r.to=Promise.resolve(r.to).then(i=>Hs(this,void 0,void 0,function*(){if(i==null)return null;let o=yield this.resolveName(i);return o==null&&jo.throwArgumentError("provided ENS name resolves to null","tx.to",i),o})),r.to.catch(i=>{}));let n=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||n)?jo.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",t):(r.type===0||r.type===1)&&n&&jo.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",t),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1)r.gasPrice==null&&(r.gasPrice=this.getGasPrice());else{let i=yield this.getFeeData();if(r.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){let o=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=o,r.maxPriorityFeePerGas=o}else r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&jo.throwError("network does not support EIP-1559",Ba.Logger.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=i.gasPrice),r.type=0):jo.throwError("failed to get consistent fee data",Ba.Logger.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else r.type===2&&(r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return r.nonce==null&&(r.nonce=this.getTransactionCount("pending")),r.gasLimit==null&&(r.gasLimit=this.estimateGas(r).catch(i=>{if(Cie.indexOf(i.code)>=0)throw i;return jo.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Ba.Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:r})})),r.chainId==null?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&jo.throwArgumentError("chainId address mismatch","transaction",t),i[0])),yield(0,Ws.resolveProperties)(r)})}_checkProvider(t){this.provider||jo.throwError("missing provider",Ba.Logger.errors.UNSUPPORTED_OPERATION,{operation:t||"_checkProvider"})}static isSigner(t){return!!(t&&t._isSigner)}},OM=class e extends km{constructor(t,r){super(),(0,Ws.defineReadOnly)(this,"address",t),(0,Ws.defineReadOnly)(this,"provider",r||null)}getAddress(){return Promise.resolve(this.address)}_fail(t,r){return Promise.resolve().then(()=>{jo.throwError(t,Ba.Logger.errors.UNSUPPORTED_OPERATION,{operation:r})})}signMessage(t){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(t){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(t,r,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(t){return new e(this.address,t)}};var js=X(fn()),Um=X(i8());p();y();p();y();var o8=X(fn()),Pm=X(zo()),A1=class{constructor(t){(0,Pm.defineReadOnly)(this,"alphabet",t),(0,Pm.defineReadOnly)(this,"base",t.length),(0,Pm.defineReadOnly)(this,"_alphabetMap",{}),(0,Pm.defineReadOnly)(this,"_leader",t.charAt(0));for(let r=0;r<t.length;r++)this._alphabetMap[t.charAt(r)]=r}encode(t){let r=(0,o8.arrayify)(t);if(r.length===0)return"";let n=[0];for(let o=0;o<r.length;++o){let s=r[o];for(let a=0;a<n.length;++a)s+=n[a]<<8,n[a]=s%this.base,s=s/this.base|0;for(;s>0;)n.push(s%this.base),s=s/this.base|0}let i="";for(let o=0;r[o]===0&&o<r.length-1;++o)i+=this._leader;for(let o=n.length-1;o>=0;--o)i+=this.alphabet[n[o]];return i}decode(t){if(typeof t!="string")throw new TypeError("Expected String");let r=[];if(t.length===0)return new Uint8Array(r);r.push(0);for(let n=0;n<t.length;n++){let i=this._alphabetMap[t[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let o=i;for(let s=0;s<r.length;++s)o+=r[s]*this.base,r[s]=o&255,o>>=8;for(;o>0;)r.push(o&255),o>>=8}for(let n=0;t[n]===this._leader&&n<t.length-1;++n)r.push(0);return(0,o8.arrayify)(new Uint8Array(r.reverse()))}},SPe=new A1("abcdefghijklmnopqrstuvwxyz234567"),s8=new A1("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var Ot=X(fn()),T8=X(sh()),zl=X(sf());p();y();p();y();var cf=X(fn()),u8=X(c8());function ql(e,t,r,n,i){e=(0,cf.arrayify)(e),t=(0,cf.arrayify)(t);let o,s=1,a=new Uint8Array(n),c=new Uint8Array(t.length+4);c.set(t);let u,h;for(let l=1;l<=s;l++){c[t.length]=l>>24&255,c[t.length+1]=l>>16&255,c[t.length+2]=l>>8&255,c[t.length+3]=l&255;let g=(0,cf.arrayify)((0,u8.computeHmac)(i,e,c));o||(o=g.length,h=new Uint8Array(o),s=Math.ceil(n/o),u=n-(s-1)*o),h.set(g);for(let E=1;E<r;E++){g=(0,cf.arrayify)((0,u8.computeHmac)(i,e,g));for(let B=0;B<o;B++)h[B]^=g[B]}let x=(l-1)*o,A=l===s?u:o;a.set((0,cf.arrayify)(h).slice(0,A),x)}return(0,cf.hexlify)(a)}var Yn=X(zo());p();y();p();y();var at=X(Hb()),Ra=X(Y_());function t0(e,t,r){return r={path:t,exports:{},require:function(n,i){return bse(n,i??r.path)}},e(r,r.exports),r.exports}function bse(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var h8=OR;function OR(e,t){if(!e)throw new Error(t||"Assertion failed")}OR.equal=function(t,r,n){if(t!=r)throw new Error(n||"Assertion failed: "+t+" != "+r)};var zs=t0(function(e,t){"use strict";var r=t;function n(s,a){if(Array.isArray(s))return s.slice();if(!s)return[];var c=[];if(typeof s!="string"){for(var u=0;u<s.length;u++)c[u]=s[u]|0;return c}if(a==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var u=0;u<s.length;u+=2)c.push(parseInt(s[u]+s[u+1],16))}else for(var u=0;u<s.length;u++){var h=s.charCodeAt(u),l=h>>8,g=h&255;l?c.push(l,g):c.push(g)}return c}r.toArray=n;function i(s){return s.length===1?"0"+s:s}r.zero2=i;function o(s){for(var a="",c=0;c<s.length;c++)a+=i(s[c].toString(16));return a}r.toHex=o,r.encode=function(a,c){return c==="hex"?o(a):a}}),wo=t0(function(e,t){"use strict";var r=t;r.assert=h8,r.toArray=zs.toArray,r.zero2=zs.zero2,r.toHex=zs.toHex,r.encode=zs.encode;function n(c,u,h){var l=new Array(Math.max(c.bitLength(),h)+1);l.fill(0);for(var g=1<<u+1,x=c.clone(),A=0;A<l.length;A++){var E,B=x.andln(g-1);x.isOdd()?(B>(g>>1)-1?E=(g>>1)-B:E=B,x.isubn(E)):E=0,l[A]=E,x.iushrn(1)}return l}r.getNAF=n;function i(c,u){var h=[[],[]];c=c.clone(),u=u.clone();for(var l=0,g=0,x;c.cmpn(-l)>0||u.cmpn(-g)>0;){var A=c.andln(3)+l&3,E=u.andln(3)+g&3;A===3&&(A=-1),E===3&&(E=-1);var B;A&1?(x=c.andln(7)+l&7,(x===3||x===5)&&E===2?B=-A:B=A):B=0,h[0].push(B);var M;E&1?(x=u.andln(7)+g&7,(x===3||x===5)&&A===2?M=-E:M=E):M=0,h[1].push(M),2*l===B+1&&(l=1-l),2*g===M+1&&(g=1-g),c.iushrn(1),u.iushrn(1)}return h}r.getJSF=i;function o(c,u,h){var l="_"+u;c.prototype[u]=function(){return this[l]!==void 0?this[l]:this[l]=h.call(this)}}r.cachedProperty=o;function s(c){return typeof c=="string"?r.toArray(c,"hex"):c}r.parseBytes=s;function a(c){return new at.default(c,"hex","le")}r.intFromLE=a}),T1=wo.getNAF,xse=wo.getJSF,P1=wo.assert;function ff(e,t){this.type=e,this.p=new at.default(t.p,16),this.red=t.prime?at.default.red(t.prime):at.default.mont(this.p),this.zero=new at.default(0).toRed(this.red),this.one=new at.default(1).toRed(this.red),this.two=new at.default(2).toRed(this.red),this.n=t.n&&new at.default(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Hl=ff;ff.prototype.point=function(){throw new Error("Not implemented")};ff.prototype.validate=function(){throw new Error("Not implemented")};ff.prototype._fixedNafMul=function(t,r){P1(t.precomputed);var n=t._getDoubles(),i=T1(r,1,this._bitLength),o=(1<<n.step+1)-(n.step%2===0?2:1);o/=3;var s=[],a,c;for(a=0;a<i.length;a+=n.step){c=0;for(var u=a+n.step-1;u>=a;u--)c=(c<<1)+i[u];s.push(c)}for(var h=this.jpoint(null,null,null),l=this.jpoint(null,null,null),g=o;g>0;g--){for(a=0;a<s.length;a++)c=s[a],c===g?l=l.mixedAdd(n.points[a]):c===-g&&(l=l.mixedAdd(n.points[a].neg()));h=h.add(l)}return h.toP()};ff.prototype._wnafMul=function(t,r){var n=4,i=t._getNAFPoints(n);n=i.wnd;for(var o=i.points,s=T1(r,n,this._bitLength),a=this.jpoint(null,null,null),c=s.length-1;c>=0;c--){for(var u=0;c>=0&&s[c]===0;c--)u++;if(c>=0&&u++,a=a.dblp(u),c<0)break;var h=s[c];P1(h!==0),t.type==="affine"?h>0?a=a.mixedAdd(o[h-1>>1]):a=a.mixedAdd(o[-h-1>>1].neg()):h>0?a=a.add(o[h-1>>1]):a=a.add(o[-h-1>>1].neg())}return t.type==="affine"?a.toP():a};ff.prototype._wnafMulAdd=function(t,r,n,i,o){var s=this._wnafT1,a=this._wnafT2,c=this._wnafT3,u=0,h,l,g;for(h=0;h<i;h++){g=r[h];var x=g._getNAFPoints(t);s[h]=x.wnd,a[h]=x.points}for(h=i-1;h>=1;h-=2){var A=h-1,E=h;if(s[A]!==1||s[E]!==1){c[A]=T1(n[A],s[A],this._bitLength),c[E]=T1(n[E],s[E],this._bitLength),u=Math.max(c[A].length,u),u=Math.max(c[E].length,u);continue}var B=[r[A],null,null,r[E]];r[A].y.cmp(r[E].y)===0?(B[1]=r[A].add(r[E]),B[2]=r[A].toJ().mixedAdd(r[E].neg())):r[A].y.cmp(r[E].y.redNeg())===0?(B[1]=r[A].toJ().mixedAdd(r[E]),B[2]=r[A].add(r[E].neg())):(B[1]=r[A].toJ().mixedAdd(r[E]),B[2]=r[A].toJ().mixedAdd(r[E].neg()));var M=[-3,-1,-5,-7,0,7,5,1,3],N=xse(n[A],n[E]);for(u=Math.max(N[0].length,u),c[A]=new Array(u),c[E]=new Array(u),l=0;l<u;l++){var R=N[0][l]|0,V=N[1][l]|0;c[A][l]=M[(R+1)*3+(V+1)],c[E][l]=0,a[A]=B}}var q=this.jpoint(null,null,null),W=this._wnafT4;for(h=u;h>=0;h--){for(var G=0;h>=0;){var z=!0;for(l=0;l<i;l++)W[l]=c[l][h]|0,W[l]!==0&&(z=!1);if(!z)break;G++,h--}if(h>=0&&G++,q=q.dblp(G),h<0)break;for(l=0;l<i;l++){var te=W[l];te!==0&&(te>0?g=a[l][te-1>>1]:te<0&&(g=a[l][-te-1>>1].neg()),g.type==="affine"?q=q.mixedAdd(g):q=q.add(g))}}for(h=0;h<i;h++)a[h]=null;return o?q:q.toP()};function Zo(e,t){this.curve=e,this.type=t,this.precomputed=null}ff.BasePoint=Zo;Zo.prototype.eq=function(){throw new Error("Not implemented")};Zo.prototype.validate=function(){return this.curve.validate(this)};ff.prototype.decodePoint=function(t,r){t=wo.toArray(t,r);var n=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*n){t[0]===6?P1(t[t.length-1]%2===0):t[0]===7&&P1(t[t.length-1]%2===1);var i=this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));return i}else if((t[0]===2||t[0]===3)&&t.length-1===n)return this.pointFromX(t.slice(1,1+n),t[0]===3);throw new Error("Unknown point format")};Zo.prototype.encodeCompressed=function(t){return this.encode(t,!0)};Zo.prototype._encode=function(t){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return t?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};Zo.prototype.encode=function(t,r){return wo.encode(this._encode(r),t)};Zo.prototype.precompute=function(t){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,t),r.beta=this._getBeta(),this.precomputed=r,this};Zo.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((t.bitLength()+1)/r.step):!1};Zo.prototype._getDoubles=function(t,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,o=0;o<r;o+=t){for(var s=0;s<t;s++)i=i.dbl();n.push(i)}return{step:t,points:n}};Zo.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<t)-1,i=n===1?null:this.dbl(),o=1;o<n;o++)r[o]=r[o-1].add(i);return{wnd:t,points:r}};Zo.prototype._getBeta=function(){return null};Zo.prototype.dblp=function(t){for(var r=this,n=0;n<t;n++)r=r.dbl();return r};var p8=t0(function(e){typeof Object.create=="function"?e.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),wse=wo.assert;function Qo(e){Hl.call(this,"short",e),this.a=new at.default(e.a,16).toRed(this.red),this.b=new at.default(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}p8(Qo,Hl);var vse=Qo;Qo.prototype._getEndomorphism=function(t){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(t.beta)r=new at.default(t.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(t.lambda)n=new at.default(t.lambda,16);else{var o=this._getEndoRoots(this.n);this.g.mul(o[0]).x.cmp(this.g.x.redMul(r))===0?n=o[0]:(n=o[1],wse(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var s;return t.basis?s=t.basis.map(function(a){return{a:new at.default(a.a,16),b:new at.default(a.b,16)}}):s=this._getEndoBasis(n),{beta:r,lambda:n,basis:s}}};Qo.prototype._getEndoRoots=function(t){var r=t===this.p?this.red:at.default.mont(t),n=new at.default(2).toRed(r).redInvm(),i=n.redNeg(),o=new at.default(3).toRed(r).redNeg().redSqrt().redMul(n),s=i.redAdd(o).fromRed(),a=i.redSub(o).fromRed();return[s,a]};Qo.prototype._getEndoBasis=function(t){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=t,i=this.n.clone(),o=new at.default(1),s=new at.default(0),a=new at.default(0),c=new at.default(1),u,h,l,g,x,A,E,B=0,M,N;n.cmpn(0)!==0;){var R=i.div(n);M=i.sub(R.mul(n)),N=a.sub(R.mul(o));var V=c.sub(R.mul(s));if(!l&&M.cmp(r)<0)u=E.neg(),h=o,l=M.neg(),g=N;else if(l&&++B===2)break;E=M,i=n,n=M,a=o,o=N,c=s,s=V}x=M.neg(),A=N;var q=l.sqr().add(g.sqr()),W=x.sqr().add(A.sqr());return W.cmp(q)>=0&&(x=u,A=h),l.negative&&(l=l.neg(),g=g.neg()),x.negative&&(x=x.neg(),A=A.neg()),[{a:l,b:g},{a:x,b:A}]};Qo.prototype._endoSplit=function(t){var r=this.endo.basis,n=r[0],i=r[1],o=i.b.mul(t).divRound(this.n),s=n.b.neg().mul(t).divRound(this.n),a=o.mul(n.a),c=s.mul(i.a),u=o.mul(n.b),h=s.mul(i.b),l=t.sub(a).sub(c),g=u.add(h).neg();return{k1:l,k2:g}};Qo.prototype.pointFromX=function(t,r){t=new at.default(t,16),t.red||(t=t.toRed(this.red));var n=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var o=i.fromRed().isOdd();return(r&&!o||!r&&o)&&(i=i.redNeg()),this.point(t,i)};Qo.prototype.validate=function(t){if(t.inf)return!0;var r=t.x,n=t.y,i=this.a.redMul(r),o=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(o).cmpn(0)===0};Qo.prototype._endoWnafMulAdd=function(t,r,n){for(var i=this._endoWnafT1,o=this._endoWnafT2,s=0;s<t.length;s++){var a=this._endoSplit(r[s]),c=t[s],u=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),i[s*2]=c,i[s*2+1]=u,o[s*2]=a.k1,o[s*2+1]=a.k2}for(var h=this._wnafMulAdd(1,i,o,s*2,n),l=0;l<s*2;l++)i[l]=null,o[l]=null;return h};function Rn(e,t,r,n){Hl.BasePoint.call(this,e,"affine"),t===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new at.default(t,16),this.y=new at.default(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}p8(Rn,Hl.BasePoint);Qo.prototype.point=function(t,r,n){return new Rn(this,t,r,n)};Qo.prototype.pointFromJSON=function(t,r){return Rn.fromJSON(this,t,r)};Rn.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var n=this.curve,i=function(o){return n.point(o.x.redMul(n.endo.beta),o.y)};t.beta=r,r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return r}};Rn.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Rn.fromJSON=function(t,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=t.point(r[0],r[1],n);if(!r[2])return i;function o(a){return t.point(a[0],a[1],n)}var s=r[2];return i.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[i].concat(s.doubles.points.map(o))},naf:s.naf&&{wnd:s.naf.wnd,points:[i].concat(s.naf.points.map(o))}},i};Rn.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Rn.prototype.isInfinity=function(){return this.inf};Rn.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var r=this.y.redSub(t.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(t.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(t.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};Rn.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=t.redInvm(),o=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),s=o.redSqr().redISub(this.x.redAdd(this.x)),a=o.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,a)};Rn.prototype.getX=function(){return this.x.fromRed()};Rn.prototype.getY=function(){return this.y.fromRed()};Rn.prototype.mul=function(t){return t=new at.default(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)};Rn.prototype.mulAdd=function(t,r,n){var i=[this,r],o=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o):this.curve._wnafMulAdd(1,i,o,2)};Rn.prototype.jmulAdd=function(t,r,n){var i=[this,r],o=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o,!0):this.curve._wnafMulAdd(1,i,o,2,!0)};Rn.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)};Rn.prototype.neg=function(t){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var n=this.precomputed,i=function(o){return o.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};Rn.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function $n(e,t,r,n){Hl.BasePoint.call(this,e,"jacobian"),t===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new at.default(0)):(this.x=new at.default(t,16),this.y=new at.default(r,16),this.z=new at.default(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}p8($n,Hl.BasePoint);Qo.prototype.jpoint=function(t,r,n){return new $n(this,t,r,n)};$n.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),r=t.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(t);return this.curve.point(n,i)};$n.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};$n.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var r=t.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),o=t.x.redMul(n),s=this.y.redMul(r.redMul(t.z)),a=t.y.redMul(n.redMul(this.z)),c=i.redSub(o),u=s.redSub(a);if(c.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var h=c.redSqr(),l=h.redMul(c),g=i.redMul(h),x=u.redSqr().redIAdd(l).redISub(g).redISub(g),A=u.redMul(g.redISub(x)).redISub(s.redMul(l)),E=this.z.redMul(t.z).redMul(c);return this.curve.jpoint(x,A,E)};$n.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=t.x.redMul(r),o=this.y,s=t.y.redMul(r).redMul(this.z),a=n.redSub(i),c=o.redSub(s);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),h=u.redMul(a),l=n.redMul(u),g=c.redSqr().redIAdd(h).redISub(l).redISub(l),x=c.redMul(l.redISub(g)).redISub(o.redMul(h)),A=this.z.redMul(a);return this.curve.jpoint(g,x,A)};$n.prototype.dblp=function(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<t;r++)n=n.dbl();return n}var i=this.curve.a,o=this.curve.tinv,s=this.x,a=this.y,c=this.z,u=c.redSqr().redSqr(),h=a.redAdd(a);for(r=0;r<t;r++){var l=s.redSqr(),g=h.redSqr(),x=g.redSqr(),A=l.redAdd(l).redIAdd(l).redIAdd(i.redMul(u)),E=s.redMul(g),B=A.redSqr().redISub(E.redAdd(E)),M=E.redISub(B),N=A.redMul(M);N=N.redIAdd(N).redISub(x);var R=h.redMul(c);r+1<t&&(u=u.redMul(x)),s=B,c=R,h=N}return this.curve.jpoint(s,h.redMul(o),c)};$n.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};$n.prototype._zeroDbl=function(){var t,r,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),s=o.redSqr(),a=this.x.redAdd(o).redSqr().redISub(i).redISub(s);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i),u=c.redSqr().redISub(a).redISub(a),h=s.redIAdd(s);h=h.redIAdd(h),h=h.redIAdd(h),t=u,r=c.redMul(a.redISub(u)).redISub(h),n=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),g=this.y.redSqr(),x=g.redSqr(),A=this.x.redAdd(g).redSqr().redISub(l).redISub(x);A=A.redIAdd(A);var E=l.redAdd(l).redIAdd(l),B=E.redSqr(),M=x.redIAdd(x);M=M.redIAdd(M),M=M.redIAdd(M),t=B.redISub(A).redISub(A),r=E.redMul(A.redISub(t)).redISub(M),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(t,r,n)};$n.prototype._threeDbl=function(){var t,r,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),s=o.redSqr(),a=this.x.redAdd(o).redSqr().redISub(i).redISub(s);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),u=c.redSqr().redISub(a).redISub(a);t=u;var h=s.redIAdd(s);h=h.redIAdd(h),h=h.redIAdd(h),r=c.redMul(a.redISub(u)).redISub(h),n=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),g=this.y.redSqr(),x=this.x.redMul(g),A=this.x.redSub(l).redMul(this.x.redAdd(l));A=A.redAdd(A).redIAdd(A);var E=x.redIAdd(x);E=E.redIAdd(E);var B=E.redAdd(E);t=A.redSqr().redISub(B),n=this.y.redAdd(this.z).redSqr().redISub(g).redISub(l);var M=g.redSqr();M=M.redIAdd(M),M=M.redIAdd(M),M=M.redIAdd(M),r=A.redMul(E.redISub(t)).redISub(M)}return this.curve.jpoint(t,r,n)};$n.prototype._dbl=function(){var t=this.curve.a,r=this.x,n=this.y,i=this.z,o=i.redSqr().redSqr(),s=r.redSqr(),a=n.redSqr(),c=s.redAdd(s).redIAdd(s).redIAdd(t.redMul(o)),u=r.redAdd(r);u=u.redIAdd(u);var h=u.redMul(a),l=c.redSqr().redISub(h.redAdd(h)),g=h.redISub(l),x=a.redSqr();x=x.redIAdd(x),x=x.redIAdd(x),x=x.redIAdd(x);var A=c.redMul(g).redISub(x),E=n.redAdd(n).redMul(i);return this.curve.jpoint(l,A,E)};$n.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),o=t.redAdd(t).redIAdd(t),s=o.redSqr(),a=this.x.redAdd(r).redSqr().redISub(t).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(s);var c=a.redSqr(),u=i.redIAdd(i);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var h=o.redIAdd(a).redSqr().redISub(s).redISub(c).redISub(u),l=r.redMul(h);l=l.redIAdd(l),l=l.redIAdd(l);var g=this.x.redMul(c).redISub(l);g=g.redIAdd(g),g=g.redIAdd(g);var x=this.y.redMul(h.redMul(u.redISub(h)).redISub(a.redMul(c)));x=x.redIAdd(x),x=x.redIAdd(x),x=x.redIAdd(x);var A=this.z.redAdd(a).redSqr().redISub(n).redISub(c);return this.curve.jpoint(g,x,A)};$n.prototype.mul=function(t,r){return t=new at.default(t,r),this.curve._wnafMul(this,t)};$n.prototype.eq=function(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return!0;var r=this.z.redSqr(),n=t.z.redSqr();if(this.x.redMul(n).redISub(t.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),o=n.redMul(t.z);return this.y.redMul(o).redISub(t.y.redMul(i)).cmpn(0)===0};$n.prototype.eqXToP=function(t){var r=this.z.redSqr(),n=t.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=t.clone(),o=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(o),this.x.cmp(n)===0)return!0}};$n.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};$n.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var I1=t0(function(e,t){"use strict";var r=t;r.base=Hl,r.short=vse,r.mont=null,r.edwards=null}),k1=t0(function(e,t){"use strict";var r=t,n=wo.assert;function i(a){a.type==="short"?this.curve=new I1.short(a):a.type==="edwards"?this.curve=new I1.edwards(a):this.curve=new I1.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function o(a,c){Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){var u=new i(c);return Object.defineProperty(r,a,{configurable:!0,enumerable:!0,value:u}),u}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Ra.default.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Ra.default.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Ra.default.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Ra.default.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Ra.default.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ra.default.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ra.default.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var s;try{s=null.crash()}catch{s=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Ra.default.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",s]})});function uf(e){if(!(this instanceof uf))return new uf(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=zs.toArray(e.entropy,e.entropyEnc||"hex"),r=zs.toArray(e.nonce,e.nonceEnc||"hex"),n=zs.toArray(e.pers,e.persEnc||"hex");h8(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var NR=uf;uf.prototype._init=function(t,r,n){var i=t.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var o=0;o<this.V.length;o++)this.K[o]=0,this.V[o]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};uf.prototype._hmac=function(){return new Ra.default.hmac(this.hash,this.K)};uf.prototype._update=function(t){var r=this._hmac().update(this.V).update([0]);t&&(r=r.update(t)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())};uf.prototype.reseed=function(t,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),t=zs.toArray(t,r),n=zs.toArray(n,i),h8(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(n||[])),this._reseed=1};uf.prototype.generate=function(t,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=zs.toArray(n,i||"hex"),this._update(n));for(var o=[];o.length<t;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var s=o.slice(0,t);return this._update(n),this._reseed++,zs.encode(s,r)};var d8=wo.assert;function gi(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var y8=gi;gi.fromPublic=function(t,r,n){return r instanceof gi?r:new gi(t,{pub:r,pubEnc:n})};gi.fromPrivate=function(t,r,n){return r instanceof gi?r:new gi(t,{priv:r,privEnc:n})};gi.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};gi.prototype.getPublic=function(t,r){return typeof t=="string"&&(r=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,t):this.pub};gi.prototype.getPrivate=function(t){return t==="hex"?this.priv.toString(16,2):this.priv};gi.prototype._importPrivate=function(t,r){this.priv=new at.default(t,r||16),this.priv=this.priv.umod(this.ec.curve.n)};gi.prototype._importPublic=function(t,r){if(t.x||t.y){this.ec.curve.type==="mont"?d8(t.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&d8(t.x&&t.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,r)};gi.prototype.derive=function(t){return t.validate()||d8(t.validate(),"public point not validated"),t.mul(this.priv).getX()};gi.prototype.sign=function(t,r,n){return this.ec.sign(t,this,r,n)};gi.prototype.verify=function(t,r){return this.ec.verify(t,r,this)};gi.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Ase=wo.assert;function _1(e,t){if(e instanceof _1)return e;this._importDER(e,t)||(Ase(e.r&&e.s,"Signature without r or s"),this.r=new at.default(e.r,16),this.s=new at.default(e.s,16),e.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var B1=_1;function Sse(){this.place=0}function f8(e,t){var r=e[t.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,o=0,s=t.place;o<n;o++,s++)i<<=8,i|=e[s],i>>>=0;return i<=127?!1:(t.place=s,i)}function RR(e){for(var t=0,r=e.length-1;!e[t]&&!(e[t+1]&128)&&t<r;)t++;return t===0?e:e.slice(t)}_1.prototype._importDER=function(t,r){t=wo.toArray(t,r);var n=new Sse;if(t[n.place++]!==48)return!1;var i=f8(t,n);if(i===!1||i+n.place!==t.length||t[n.place++]!==2)return!1;var o=f8(t,n);if(o===!1)return!1;var s=t.slice(n.place,o+n.place);if(n.place+=o,t[n.place++]!==2)return!1;var a=f8(t,n);if(a===!1||t.length!==a+n.place)return!1;var c=t.slice(n.place,a+n.place);if(s[0]===0)if(s[1]&128)s=s.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new at.default(s),this.s=new at.default(c),this.recoveryParam=null,!0};function l8(e,t){if(t<128){e.push(t);return}var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(r|128);--r;)e.push(t>>>(r<<3)&255);e.push(t)}_1.prototype.toDER=function(t){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=RR(r),n=RR(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];l8(i,r.length),i=i.concat(r),i.push(2),l8(i,n.length);var o=i.concat(n),s=[48];return l8(s,o.length),s=s.concat(o),wo.encode(s,t)};var Ese=function(){throw new Error("unsupported")},UR=wo.assert;function Jo(e){if(!(this instanceof Jo))return new Jo(e);typeof e=="string"&&(UR(Object.prototype.hasOwnProperty.call(k1,e),"Unknown curve "+e),e=k1[e]),e instanceof k1.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var Ise=Jo;Jo.prototype.keyPair=function(t){return new y8(this,t)};Jo.prototype.keyFromPrivate=function(t,r){return y8.fromPrivate(this,t,r)};Jo.prototype.keyFromPublic=function(t,r){return y8.fromPublic(this,t,r)};Jo.prototype.genKeyPair=function(t){t||(t={});for(var r=new NR({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||Ese(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new at.default(2));;){var o=new at.default(r.generate(n));if(!(o.cmp(i)>0))return o.iaddn(1),this.keyFromPrivate(o)}};Jo.prototype._truncateToN=function(t,r){var n=t.byteLength()*8-this.n.bitLength();return n>0&&(t=t.ushrn(n)),!r&&t.cmp(this.n)>=0?t.sub(this.n):t};Jo.prototype.sign=function(t,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),t=this._truncateToN(new at.default(t,16));for(var o=this.n.byteLength(),s=r.getPrivate().toArray("be",o),a=t.toArray("be",o),c=new NR({hash:this.hash,entropy:s,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),u=this.n.sub(new at.default(1)),h=0;;h++){var l=i.k?i.k(h):new at.default(c.generate(this.n.byteLength()));if(l=this._truncateToN(l,!0),!(l.cmpn(1)<=0||l.cmp(u)>=0)){var g=this.g.mul(l);if(!g.isInfinity()){var x=g.getX(),A=x.umod(this.n);if(A.cmpn(0)!==0){var E=l.invm(this.n).mul(A.mul(r.getPrivate()).iadd(t));if(E=E.umod(this.n),E.cmpn(0)!==0){var B=(g.getY().isOdd()?1:0)|(x.cmp(A)!==0?2:0);return i.canonical&&E.cmp(this.nh)>0&&(E=this.n.sub(E),B^=1),new B1({r:A,s:E,recoveryParam:B})}}}}}};Jo.prototype.verify=function(t,r,n,i){t=this._truncateToN(new at.default(t,16)),n=this.keyFromPublic(n,i),r=new B1(r,"hex");var o=r.r,s=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a=s.invm(this.n),c=a.mul(t).umod(this.n),u=a.mul(o).umod(this.n),h;return this.curve._maxwellTrick?(h=this.g.jmulAdd(c,n.getPublic(),u),h.isInfinity()?!1:h.eqXToP(o)):(h=this.g.mulAdd(c,n.getPublic(),u),h.isInfinity()?!1:h.getX().umod(this.n).cmp(o)===0)};Jo.prototype.recoverPubKey=function(e,t,r,n){UR((3&r)===r,"The recovery param is more than two bits"),t=new B1(t,n);var i=this.n,o=new at.default(e),s=t.r,a=t.s,c=r&1,u=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?s=this.curve.pointFromX(s.add(this.curve.n),c):s=this.curve.pointFromX(s,c);var h=t.r.invm(i),l=i.sub(o).mul(h).umod(i),g=a.mul(h).umod(i);return this.g.mulAdd(l,s,g)};Jo.prototype.getKeyRecoveryParam=function(e,t,r,n){if(t=new B1(t,n),t.recoveryParam!==null)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch{continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var kse=t0(function(e,t){"use strict";var r=t;r.version="6.5.4",r.utils=wo,r.rand=function(){throw new Error("unsupported")},r.curve=I1,r.curves=k1,r.ec=Ise,r.eddsa=null}),DR=kse.ec;var lr=X(fn()),r0=X(zo()),KR=X(Ti());p();y();var LR="signing-key/5.7.0";var g8=new KR.Logger(LR),m8=null;function Oa(){return m8||(m8=new DR("secp256k1")),m8}var Xo=class{constructor(t){(0,r0.defineReadOnly)(this,"curve","secp256k1"),(0,r0.defineReadOnly)(this,"privateKey",(0,lr.hexlify)(t)),(0,lr.hexDataLength)(this.privateKey)!==32&&g8.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");let r=Oa().keyFromPrivate((0,lr.arrayify)(this.privateKey));(0,r0.defineReadOnly)(this,"publicKey","0x"+r.getPublic(!1,"hex")),(0,r0.defineReadOnly)(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),(0,r0.defineReadOnly)(this,"_isSigningKey",!0)}_addPoint(t){let r=Oa().keyFromPublic((0,lr.arrayify)(this.publicKey)),n=Oa().keyFromPublic((0,lr.arrayify)(t));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(t){let r=Oa().keyFromPrivate((0,lr.arrayify)(this.privateKey)),n=(0,lr.arrayify)(t);n.length!==32&&g8.throwArgumentError("bad digest length","digest",t);let i=r.sign(n,{canonical:!0});return(0,lr.splitSignature)({recoveryParam:i.recoveryParam,r:(0,lr.hexZeroPad)("0x"+i.r.toString(16),32),s:(0,lr.hexZeroPad)("0x"+i.s.toString(16),32)})}computeSharedSecret(t){let r=Oa().keyFromPrivate((0,lr.arrayify)(this.privateKey)),n=Oa().keyFromPublic((0,lr.arrayify)(b8(t)));return(0,lr.hexZeroPad)("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(t){return!!(t&&t._isSigningKey)}};function FR(e,t){let r=(0,lr.splitSignature)(t),n={r:(0,lr.arrayify)(r.r),s:(0,lr.arrayify)(r.s)};return"0x"+Oa().recoverPubKey((0,lr.arrayify)(e),n,r.recoveryParam).encode("hex",!1)}function b8(e,t){let r=(0,lr.arrayify)(e);if(r.length===32){let n=new Xo(r);return t?"0x"+Oa().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}else{if(r.length===33)return t?(0,lr.hexlify)(r):"0x"+Oa().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return t?"0x"+Oa().keyFromPublic(r).getPublic(!0,"hex"):(0,lr.hexlify)(r)}return g8.throwArgumentError("invalid public or private key","key","[REDACTED]")}var Qi=X(c8());p();y();var n0=X(cy()),lf=X(sh()),st=X(fn()),HR=X(q6()),Wl=X(bu()),WR=X(zo()),Na=X(TY());var C1=X(Ti());p();y();var VR="transactions/5.7.0";var xi=new C1.Logger(VR),qR;(function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"})(qR||(qR={}));function w8(e){return e==="0x"?null:(0,n0.getAddress)(e)}function bi(e){return e==="0x"?HR.Zero:lf.BigNumber.from(e)}var Tse=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],Pse={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function Ua(e){let t=b8(e);return(0,n0.getAddress)((0,st.hexDataSlice)((0,Wl.keccak256)((0,st.hexDataSlice)(t,1)),12))}function v8(e,t){return Ua(FR((0,st.arrayify)(e),t))}function vo(e,t){let r=(0,st.stripZeros)(lf.BigNumber.from(e).toHexString());return r.length>32&&xi.throwArgumentError("invalid length for "+t,"transaction:"+t,e),r}function x8(e,t){return{address:(0,n0.getAddress)(e),storageKeys:(t||[]).map((r,n)=>((0,st.hexDataLength)(r)!==32&&xi.throwArgumentError("invalid access list storageKey",`accessList[${e}:${n}]`,r),r.toLowerCase()))}}function A8(e){if(Array.isArray(e))return e.map((r,n)=>Array.isArray(r)?(r.length>2&&xi.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,r),x8(r[0],r[1])):x8(r.address,r.storageKeys));let t=Object.keys(e).map(r=>{let n=e[r].reduce((i,o)=>(i[o]=!0,i),{});return x8(r,Object.keys(n).sort())});return t.sort((r,n)=>r.address.localeCompare(n.address)),t}function zR(e){return A8(e).map(t=>[t.address,t.storageKeys])}function jR(e,t){if(e.gasPrice!=null){let n=lf.BigNumber.from(e.gasPrice),i=lf.BigNumber.from(e.maxFeePerGas||0);n.eq(i)||xi.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}let r=[vo(e.chainId||0,"chainId"),vo(e.nonce||0,"nonce"),vo(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),vo(e.maxFeePerGas||0,"maxFeePerGas"),vo(e.gasLimit||0,"gasLimit"),e.to!=null?(0,n0.getAddress)(e.to):"0x",vo(e.value||0,"value"),e.data||"0x",zR(e.accessList||[])];if(t){let n=(0,st.splitSignature)(t);r.push(vo(n.recoveryParam,"recoveryParam")),r.push((0,st.stripZeros)(n.r)),r.push((0,st.stripZeros)(n.s))}return(0,st.hexConcat)(["0x02",Na.encode(r)])}function GR(e,t){let r=[vo(e.chainId||0,"chainId"),vo(e.nonce||0,"nonce"),vo(e.gasPrice||0,"gasPrice"),vo(e.gasLimit||0,"gasLimit"),e.to!=null?(0,n0.getAddress)(e.to):"0x",vo(e.value||0,"value"),e.data||"0x",zR(e.accessList||[])];if(t){let n=(0,st.splitSignature)(t);r.push(vo(n.recoveryParam,"recoveryParam")),r.push((0,st.stripZeros)(n.r)),r.push((0,st.stripZeros)(n.s))}return(0,st.hexConcat)(["0x01",Na.encode(r)])}function _se(e,t){(0,WR.checkProperties)(e,Pse);let r=[];Tse.forEach(function(s){let a=e[s.name]||[],c={};s.numeric&&(c.hexPad="left"),a=(0,st.arrayify)((0,st.hexlify)(a,c)),s.length&&a.length!==s.length&&a.length>0&&xi.throwArgumentError("invalid length for "+s.name,"transaction:"+s.name,a),s.maxLength&&(a=(0,st.stripZeros)(a),a.length>s.maxLength&&xi.throwArgumentError("invalid length for "+s.name,"transaction:"+s.name,a)),r.push((0,st.hexlify)(a))});let n=0;if(e.chainId!=null?(n=e.chainId,typeof n!="number"&&xi.throwArgumentError("invalid transaction.chainId","transaction",e)):t&&!(0,st.isBytesLike)(t)&&t.v>28&&(n=Math.floor((t.v-35)/2)),n!==0&&(r.push((0,st.hexlify)(n)),r.push("0x"),r.push("0x")),!t)return Na.encode(r);let i=(0,st.splitSignature)(t),o=27+i.recoveryParam;return n!==0?(r.pop(),r.pop(),r.pop(),o+=n*2+8,i.v>28&&i.v!==o&&xi.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t)):i.v!==o&&xi.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t),r.push((0,st.hexlify)(o)),r.push((0,st.stripZeros)((0,st.arrayify)(i.r))),r.push((0,st.stripZeros)((0,st.arrayify)(i.s))),Na.encode(r)}function S8(e,t){if(e.type==null||e.type===0)return e.accessList!=null&&xi.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",e),_se(e,t);switch(e.type){case 1:return GR(e,t);case 2:return jR(e,t);default:break}return xi.throwError(`unsupported transaction type: ${e.type}`,C1.Logger.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:e.type})}function $R(e,t,r){try{let n=bi(t[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");e.v=n}catch{xi.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=(0,st.hexZeroPad)(t[1],32),e.s=(0,st.hexZeroPad)(t[2],32);try{let n=(0,Wl.keccak256)(r(e));e.from=v8(n,{r:e.r,s:e.s,recoveryParam:e.v})}catch{}}function Bse(e){let t=Na.decode(e.slice(1));t.length!==9&&t.length!==12&&xi.throwArgumentError("invalid component count for transaction type: 2","payload",(0,st.hexlify)(e));let r=bi(t[2]),n=bi(t[3]),i={type:2,chainId:bi(t[0]).toNumber(),nonce:bi(t[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:bi(t[4]),to:w8(t[5]),value:bi(t[6]),data:t[7],accessList:A8(t[8])};return t.length===9||(i.hash=(0,Wl.keccak256)(e),$R(i,t.slice(9),jR)),i}function Cse(e){let t=Na.decode(e.slice(1));t.length!==8&&t.length!==11&&xi.throwArgumentError("invalid component count for transaction type: 1","payload",(0,st.hexlify)(e));let r={type:1,chainId:bi(t[0]).toNumber(),nonce:bi(t[1]).toNumber(),gasPrice:bi(t[2]),gasLimit:bi(t[3]),to:w8(t[4]),value:bi(t[5]),data:t[6],accessList:A8(t[7])};return t.length===8||(r.hash=(0,Wl.keccak256)(e),$R(r,t.slice(8),GR)),r}function Mse(e){let t=Na.decode(e);t.length!==9&&t.length!==6&&xi.throwArgumentError("invalid raw transaction","rawTransaction",e);let r={nonce:bi(t[0]).toNumber(),gasPrice:bi(t[1]),gasLimit:bi(t[2]),to:w8(t[3]),value:bi(t[4]),data:t[5],chainId:0};if(t.length===6)return r;try{r.v=lf.BigNumber.from(t[6]).toNumber()}catch{return r}if(r.r=(0,st.hexZeroPad)(t[7],32),r.s=(0,st.hexZeroPad)(t[8],32),lf.BigNumber.from(r.r).isZero()&&lf.BigNumber.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27,i=t.slice(0,6);r.chainId!==0&&(i.push((0,st.hexlify)(r.chainId)),i.push("0x"),i.push("0x"),n-=r.chainId*2+8);let o=(0,Wl.keccak256)(Na.encode(i));try{r.from=v8(o,{r:(0,st.hexlify)(r.r),s:(0,st.hexlify)(r.s),recoveryParam:n})}catch{}r.hash=(0,Wl.keccak256)(e)}return r.type=null,r}function c5e(e){let t=(0,st.arrayify)(e);if(t[0]>127)return Mse(t);switch(t[0]){case 1:return Cse(t);case 2:return Bse(t);default:break}return xi.throwError(`unsupported transaction type: ${t[0]}`,C1.Logger.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}p();y();p();y();var JR=X(i8()),E8=X(zo()),ZR=X(Ti());p();y();var YR="wordlists/5.7.0";var Rse=!1,Ose=new ZR.Logger(YR),i0=class e{constructor(t){Ose.checkAbstract(new.target,e),(0,E8.defineReadOnly)(this,"locale",t)}split(t){return t.toLowerCase().split(/ +/g)}join(t){return t.join(" ")}static check(t){let r=[];for(let n=0;n<2048;n++){let i=t.getWord(n);if(n!==t.getWordIndex(i))return"0x";r.push(i)}return(0,JR.id)(r.join(`
`)+`
`)}static register(t,r){if(r||(r=t.locale),Rse)try{let n=self;n._ethers&&n._ethers.wordlists&&(n._ethers.wordlists[r]||(0,E8.defineReadOnly)(n._ethers.wordlists,r,t))}catch{}}};p();y();p();y();var Nse="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo",Mm=null;function QR(e){if(Mm==null&&(Mm=Nse.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),i0.check(e)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw Mm=null,new Error("BIP39 Wordlist for en (English) FAILED")}var I8=class extends i0{constructor(){super("en")}getWord(t){return QR(this),Mm[t]}getWordIndex(t){return QR(this),Mm.indexOf(t)}},k8=new I8;i0.register(k8);var M1={en:k8};var tO=X(Ti());p();y();var XR="hdnode/5.7.0";var O1=new tO.Logger(XR),Use=T8.BigNumber.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Dse=(0,zl.toUtf8Bytes)("Bitcoin seed"),Rm=2147483648;function rO(e){return(1<<e)-1<<8-e}function Lse(e){return(1<<e)-1}function R1(e){return(0,Ot.hexZeroPad)((0,Ot.hexlify)(e),32)}function eO(e){return s8.encode((0,Ot.concat)([e,(0,Ot.hexDataSlice)((0,Qi.sha256)((0,Qi.sha256)(e)),0,4)]))}function P8(e){if(e==null)return M1.en;if(typeof e=="string"){let t=M1[e];return t==null&&O1.throwArgumentError("unknown locale","wordlist",e),t}return e}var o0={},jl="m/44'/60'/0'/0/0",df=class e{constructor(t,r,n,i,o,s,a,c){if(t!==o0)throw new Error("HDNode constructor cannot be called directly");if(r){let u=new Xo(r);(0,Yn.defineReadOnly)(this,"privateKey",u.privateKey),(0,Yn.defineReadOnly)(this,"publicKey",u.compressedPublicKey)}else(0,Yn.defineReadOnly)(this,"privateKey",null),(0,Yn.defineReadOnly)(this,"publicKey",(0,Ot.hexlify)(n));(0,Yn.defineReadOnly)(this,"parentFingerprint",i),(0,Yn.defineReadOnly)(this,"fingerprint",(0,Ot.hexDataSlice)((0,Qi.ripemd160)((0,Qi.sha256)(this.publicKey)),0,4)),(0,Yn.defineReadOnly)(this,"address",Ua(this.publicKey)),(0,Yn.defineReadOnly)(this,"chainCode",o),(0,Yn.defineReadOnly)(this,"index",s),(0,Yn.defineReadOnly)(this,"depth",a),c==null?((0,Yn.defineReadOnly)(this,"mnemonic",null),(0,Yn.defineReadOnly)(this,"path",null)):typeof c=="string"?((0,Yn.defineReadOnly)(this,"mnemonic",null),(0,Yn.defineReadOnly)(this,"path",c)):((0,Yn.defineReadOnly)(this,"mnemonic",c),(0,Yn.defineReadOnly)(this,"path",c.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return eO((0,Ot.concat)([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",(0,Ot.hexlify)(this.depth),this.parentFingerprint,(0,Ot.hexZeroPad)((0,Ot.hexlify)(this.index),4),this.chainCode,this.privateKey!=null?(0,Ot.concat)(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new e(o0,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(t){if(t>4294967295)throw new Error("invalid index - "+String(t));let r=this.path;r&&(r+="/"+(t&~Rm));let n=new Uint8Array(37);if(t&Rm){if(!this.privateKey)throw new Error("cannot derive child of neutered node");n.set((0,Ot.arrayify)(this.privateKey),1),r&&(r+="'")}else n.set((0,Ot.arrayify)(this.publicKey));for(let l=24;l>=0;l-=8)n[33+(l>>3)]=t>>24-l&255;let i=(0,Ot.arrayify)((0,Qi.computeHmac)(Qi.SupportedAlgorithm.sha512,this.chainCode,n)),o=i.slice(0,32),s=i.slice(32),a=null,c=null;this.privateKey?a=R1(T8.BigNumber.from(o).add(this.privateKey).mod(Use)):c=new Xo((0,Ot.hexlify)(o))._addPoint(this.publicKey);let u=r,h=this.mnemonic;return h&&(u=Object.freeze({phrase:h.phrase,path:r,locale:h.locale||"en"})),new e(o0,a,c,this.fingerprint,R1(s),t,this.depth+1,u)}derivePath(t){let r=t.split("/");if(r.length===0||r[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+t);r[0]==="m"&&r.shift();let n=this;for(let i=0;i<r.length;i++){let o=r[i];if(o.match(/^[0-9]+'$/)){let s=parseInt(o.substring(0,o.length-1));if(s>=Rm)throw new Error("invalid path index - "+o);n=n._derive(Rm+s)}else if(o.match(/^[0-9]+$/)){let s=parseInt(o);if(s>=Rm)throw new Error("invalid path index - "+o);n=n._derive(s)}else throw new Error("invalid path component - "+o)}return n}static _fromSeed(t,r){let n=(0,Ot.arrayify)(t);if(n.length<16||n.length>64)throw new Error("invalid seed");let i=(0,Ot.arrayify)((0,Qi.computeHmac)(Qi.SupportedAlgorithm.sha512,Dse,n));return new e(o0,R1(i.slice(0,32)),null,"0x00000000",R1(i.slice(32)),0,0,r)}static fromMnemonic(t,r,n){return n=P8(n),t=Om(_8(t,n),n),e._fromSeed(Kse(t,r),{phrase:t,path:"m",locale:n.locale})}static fromSeed(t){return e._fromSeed(t,null)}static fromExtendedKey(t){let r=s8.decode(t);(r.length!==82||eO(r.slice(0,78))!==t)&&O1.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");let n=r[4],i=(0,Ot.hexlify)(r.slice(5,9)),o=parseInt((0,Ot.hexlify)(r.slice(9,13)).substring(2),16),s=(0,Ot.hexlify)(r.slice(13,45)),a=r.slice(45,78);switch((0,Ot.hexlify)(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new e(o0,null,(0,Ot.hexlify)(a),i,s,o,n,null);case"0x0488ade4":case"0x04358394 ":if(a[0]!==0)break;return new e(o0,(0,Ot.hexlify)(a.slice(1)),null,i,s,o,n,null)}return O1.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}};function Kse(e,t){t||(t="");let r=(0,zl.toUtf8Bytes)("mnemonic"+t,zl.UnicodeNormalizationForm.NFKD);return ql((0,zl.toUtf8Bytes)(e,zl.UnicodeNormalizationForm.NFKD),r,2048,64,"sha512")}function _8(e,t){t=P8(t),O1.checkNormalize();let r=t.split(e);if(r.length%3!==0)throw new Error("invalid mnemonic");let n=(0,Ot.arrayify)(new Uint8Array(Math.ceil(11*r.length/8))),i=0;for(let u=0;u<r.length;u++){let h=t.getWordIndex(r[u].normalize("NFKD"));if(h===-1)throw new Error("invalid mnemonic");for(let l=0;l<11;l++)h&1<<10-l&&(n[i>>3]|=1<<7-i%8),i++}let o=32*r.length/3,s=r.length/3,a=rO(s);if(((0,Ot.arrayify)((0,Qi.sha256)(n.slice(0,o/8)))[0]&a)!==(n[n.length-1]&a))throw new Error("invalid checksum");return(0,Ot.hexlify)(n.slice(0,o/8))}function Om(e,t){if(t=P8(t),e=(0,Ot.arrayify)(e),e.length%4!==0||e.length<16||e.length>32)throw new Error("invalid entropy");let r=[0],n=11;for(let s=0;s<e.length;s++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=e[s],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=e[s]>>8-n,r.push(e[s]&Lse(8-n)),n+=3);let i=e.length/4,o=(0,Ot.arrayify)((0,Qi.sha256)(e))[0]&rO(i);return r[r.length-1]<<=i,r[r.length-1]|=o>>8-i,t.join(r.map(s=>t.getWord(s)))}var G8=X(bu()),es=X(zo());p();y();p();y();var oO=X(fn()),C8=X(Ti());p();y();var nO="random/5.7.0";var B8=new C8.Logger(nO);function Fse(){if(typeof self<"u"||typeof self<"u"||typeof self<"u")return self;throw new Error("unable to locate global object")}var iO=Fse(),N1=iO.crypto||iO.msCrypto;(!N1||!N1.getRandomValues)&&(B8.warn("WARNING: Missing strong random number source"),N1={getRandomValues:function(e){return B8.throwError("no secure random source avaialble",C8.Logger.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function hf(e){(e<=0||e>1024||e%1||e!=e)&&B8.throwArgumentError("invalid length","length",e);let t=new Uint8Array(e);return N1.getRandomValues(t),(0,oO.arrayify)(t)}p();y();p();y();var O8=X(R8()),cO=X(cy()),N8=X(fn()),uO=X(bu());var fO=X(sf()),lO=X(zo()),dO=X(Ti());p();y();var U1="json-wallets/5.7.0";p();y();var s0=X(fn()),D1=X(sf());function Kc(e){return typeof e=="string"&&e.substring(0,2)!=="0x"&&(e="0x"+e),(0,s0.arrayify)(e)}function a0(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}function Nm(e){return typeof e=="string"?(0,D1.toUtf8Bytes)(e,D1.UnicodeNormalizationForm.NFKC):(0,s0.arrayify)(e)}function Or(e,t){let r=e,n=t.toLowerCase().split("/");for(let i=0;i<n.length;i++){let o=null;for(let s in r)if(s.toLowerCase()===n[i]){o=r[s];break}if(o===null)return null;r=o}return r}function aO(e){let t=(0,s0.arrayify)(e);t[6]=t[6]&15|64,t[8]=t[8]&63|128;let r=(0,s0.hexlify)(t);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}var Vse=new dO.Logger(U1),U8=class extends lO.Description{isCrowdsaleAccount(t){return!!(t&&t._isCrowdsaleAccount)}};function D8(e,t){let r=JSON.parse(e);t=Nm(t);let n=(0,cO.getAddress)(Or(r,"ethaddr")),i=Kc(Or(r,"encseed"));(!i||i.length%16!==0)&&Vse.throwArgumentError("invalid encseed","json",e);let o=(0,N8.arrayify)(ql(t,t,2e3,32,"sha256")).slice(0,16),s=i.slice(0,16),a=i.slice(16),c=new O8.default.ModeOfOperation.cbc(o,s),u=O8.default.padding.pkcs7.strip((0,N8.arrayify)(c.decrypt(a))),h="";for(let x=0;x<u.length;x++)h+=String.fromCharCode(u[x]);let l=(0,fO.toUtf8Bytes)(h),g=(0,uO.keccak256)(l);return new U8({_isCrowdsaleAccount:!0,address:n,privateKey:g})}p();y();function L8(e){let t=null;try{t=JSON.parse(e)}catch{return!1}return t.encseed&&t.ethaddr}function K8(e){let t=null;try{t=JSON.parse(e)}catch{return!1}return!(!t.version||parseInt(t.version)!==t.version||parseInt(t.version)!==3)}p();y();var Fc=X(R8()),K1=X(pO()),H8=X(cy()),Nr=X(fn());var W8=X(bu());var mO=X(zo());var L1=X(Ti());var qse=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},V8=new L1.Logger(U1);function yO(e){return e!=null&&e.mnemonic&&e.mnemonic.phrase}var q8=class extends mO.Description{isKeystoreAccount(t){return!!(t&&t._isKeystoreAccount)}};function Hse(e,t,r){if(Or(e,"crypto/cipher")==="aes-128-ctr"){let i=Kc(Or(e,"crypto/cipherparams/iv")),o=new Fc.default.Counter(i),s=new Fc.default.ModeOfOperation.ctr(t,o);return(0,Nr.arrayify)(s.decrypt(r))}return null}function gO(e,t){let r=Kc(Or(e,"crypto/ciphertext"));if((0,Nr.hexlify)((0,W8.keccak256)((0,Nr.concat)([t.slice(16,32),r]))).substring(2)!==Or(e,"crypto/mac").toLowerCase())throw new Error("invalid password");let i=Hse(e,t.slice(0,16),r);i||V8.throwError("unsupported cipher",L1.Logger.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});let o=t.slice(32,64),s=Ua(i);if(e.address){let c=e.address.toLowerCase();if(c.substring(0,2)!=="0x"&&(c="0x"+c),(0,H8.getAddress)(c)!==s)throw new Error("address mismatch")}let a={_isKeystoreAccount:!0,address:s,privateKey:(0,Nr.hexlify)(i)};if(Or(e,"x-ethers/version")==="0.1"){let c=Kc(Or(e,"x-ethers/mnemonicCiphertext")),u=Kc(Or(e,"x-ethers/mnemonicCounter")),h=new Fc.default.Counter(u),l=new Fc.default.ModeOfOperation.ctr(o,h),g=Or(e,"x-ethers/path")||jl,x=Or(e,"x-ethers/locale")||"en",A=(0,Nr.arrayify)(l.decrypt(c));try{let E=Om(A,x),B=df.fromMnemonic(E,null,x).derivePath(g);if(B.privateKey!=a.privateKey)throw new Error("mnemonic mismatch");a.mnemonic=B.mnemonic}catch(E){if(E.code!==L1.Logger.errors.INVALID_ARGUMENT||E.argument!=="wordlist")throw E}}return new q8(a)}function bO(e,t,r,n,i){return(0,Nr.arrayify)(ql(e,t,r,n,i))}function Wse(e,t,r,n,i){return Promise.resolve(bO(e,t,r,n,i))}function xO(e,t,r,n,i){let o=Nm(t),s=Or(e,"crypto/kdf");if(s&&typeof s=="string"){let a=function(c,u){return V8.throwArgumentError("invalid key-derivation function parameters",c,u)};if(s.toLowerCase()==="scrypt"){let c=Kc(Or(e,"crypto/kdfparams/salt")),u=parseInt(Or(e,"crypto/kdfparams/n")),h=parseInt(Or(e,"crypto/kdfparams/r")),l=parseInt(Or(e,"crypto/kdfparams/p"));(!u||!h||!l)&&a("kdf",s),u&u-1&&a("N",u);let g=parseInt(Or(e,"crypto/kdfparams/dklen"));return g!==32&&a("dklen",g),n(o,c,u,h,l,64,i)}else if(s.toLowerCase()==="pbkdf2"){let c=Kc(Or(e,"crypto/kdfparams/salt")),u=null,h=Or(e,"crypto/kdfparams/prf");h==="hmac-sha256"?u="sha256":h==="hmac-sha512"?u="sha512":a("prf",h);let l=parseInt(Or(e,"crypto/kdfparams/c")),g=parseInt(Or(e,"crypto/kdfparams/dklen"));return g!==32&&a("dklen",g),r(o,c,l,g,u)}}return V8.throwArgumentError("unsupported key-derivation function","kdf",s)}function wO(e,t){let r=JSON.parse(e),n=xO(r,t,bO,K1.default.syncScrypt);return gO(r,n)}function vO(e,t,r){return qse(this,void 0,void 0,function*(){let n=JSON.parse(e),i=yield xO(n,t,Wse,K1.default.scrypt,r);return gO(n,i)})}function z8(e,t,r,n){try{if((0,H8.getAddress)(e.address)!==Ua(e.privateKey))throw new Error("address/privateKey mismatch");if(yO(e)){let B=e.mnemonic;if(df.fromMnemonic(B.phrase,null,B.locale).derivePath(B.path||jl).privateKey!=e.privateKey)throw new Error("mnemonic mismatch")}}catch(B){return Promise.reject(B)}typeof r=="function"&&!n&&(n=r,r={}),r||(r={});let i=(0,Nr.arrayify)(e.privateKey),o=Nm(t),s=null,a=null,c=null;if(yO(e)){let B=e.mnemonic;s=(0,Nr.arrayify)(_8(B.phrase,B.locale||"en")),a=B.path||jl,c=B.locale||"en"}let u=r.client;u||(u="ethers.js");let h=null;r.salt?h=(0,Nr.arrayify)(r.salt):h=hf(32);let l=null;if(r.iv){if(l=(0,Nr.arrayify)(r.iv),l.length!==16)throw new Error("invalid iv")}else l=hf(16);let g=null;if(r.uuid){if(g=(0,Nr.arrayify)(r.uuid),g.length!==16)throw new Error("invalid uuid")}else g=hf(16);let x=1<<17,A=8,E=1;return r.scrypt&&(r.scrypt.N&&(x=r.scrypt.N),r.scrypt.r&&(A=r.scrypt.r),r.scrypt.p&&(E=r.scrypt.p)),K1.default.scrypt(o,h,x,A,E,64,n).then(B=>{B=(0,Nr.arrayify)(B);let M=B.slice(0,16),N=B.slice(16,32),R=B.slice(32,64),V=new Fc.default.Counter(l),q=new Fc.default.ModeOfOperation.ctr(M,V),W=(0,Nr.arrayify)(q.encrypt(i)),G=(0,W8.keccak256)((0,Nr.concat)([N,W])),z={address:e.address.substring(2).toLowerCase(),id:aO(g),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:(0,Nr.hexlify)(l).substring(2)},ciphertext:(0,Nr.hexlify)(W).substring(2),kdf:"scrypt",kdfparams:{salt:(0,Nr.hexlify)(h).substring(2),n:x,dklen:32,p:E,r:A},mac:G.substring(2)}};if(s){let te=hf(16),_=new Fc.default.Counter(te),f=new Fc.default.ModeOfOperation.ctr(R,_),m=(0,Nr.arrayify)(f.encrypt(s)),b=new Date,v=b.getUTCFullYear()+"-"+a0(b.getUTCMonth()+1,2)+"-"+a0(b.getUTCDate(),2)+"T"+a0(b.getUTCHours(),2)+"-"+a0(b.getUTCMinutes(),2)+"-"+a0(b.getUTCSeconds(),2)+".0Z";z["x-ethers"]={client:u,gethFilename:"UTC--"+v+"--"+z.address,mnemonicCounter:(0,Nr.hexlify)(te).substring(2),mnemonicCiphertext:(0,Nr.hexlify)(m).substring(2),path:a,locale:c,version:"0.1"}}return JSON.stringify(z)})}function AO(e,t,r){if(L8(e)){r&&r(0);let n=D8(e,t);return r&&r(1),Promise.resolve(n)}return K8(e)?vO(e,t,r):Promise.reject(new Error("invalid JSON wallet"))}function SO(e,t){if(L8(e))return D8(e,t);if(K8(e))return wO(e,t);throw new Error("invalid JSON wallet")}var $8=X(Ti());p();y();var EO="wallet/5.7.0";var IO=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},c0=new $8.Logger(EO);function zse(e){return e!=null&&(0,js.isHexString)(e.privateKey,32)&&e.address!=null}function jse(e){let t=e.mnemonic;return t&&t.phrase}var u0=class e extends km{constructor(t,r){if(super(),zse(t)){let n=new Xo(t.privateKey);if((0,es.defineReadOnly)(this,"_signingKey",()=>n),(0,es.defineReadOnly)(this,"address",Ua(this.publicKey)),this.address!==(0,j8.getAddress)(t.address)&&c0.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),jse(t)){let i=t.mnemonic;(0,es.defineReadOnly)(this,"_mnemonic",()=>({phrase:i.phrase,path:i.path||jl,locale:i.locale||"en"}));let o=this.mnemonic,s=df.fromMnemonic(o.phrase,null,o.locale).derivePath(o.path);Ua(s.privateKey)!==this.address&&c0.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else(0,es.defineReadOnly)(this,"_mnemonic",()=>null)}else{if(Xo.isSigningKey(t))t.curve!=="secp256k1"&&c0.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),(0,es.defineReadOnly)(this,"_signingKey",()=>t);else{typeof t=="string"&&t.match(/^[0-9a-f]*$/i)&&t.length===64&&(t="0x"+t);let n=new Xo(t);(0,es.defineReadOnly)(this,"_signingKey",()=>n)}(0,es.defineReadOnly)(this,"_mnemonic",()=>null),(0,es.defineReadOnly)(this,"address",Ua(this.publicKey))}r&&!c1.isProvider(r)&&c0.throwArgumentError("invalid provider","provider",r),(0,es.defineReadOnly)(this,"provider",r||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(t){return new e(this,t)}signTransaction(t){return(0,es.resolveProperties)(t).then(r=>{r.from!=null&&((0,j8.getAddress)(r.from)!==this.address&&c0.throwArgumentError("transaction from address mismatch","transaction.from",t.from),delete r.from);let n=this._signingKey().signDigest((0,G8.keccak256)(S8(r)));return S8(r,n)})}signMessage(t){return IO(this,void 0,void 0,function*(){return(0,js.joinSignature)(this._signingKey().signDigest((0,Um.hashMessage)(t)))})}_signTypedData(t,r,n){return IO(this,void 0,void 0,function*(){let i=yield Um._TypedDataEncoder.resolveNames(t,r,n,o=>(this.provider==null&&c0.throwError("cannot resolve ENS names without a provider",$8.Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:o}),this.provider.resolveName(o)));return(0,js.joinSignature)(this._signingKey().signDigest(Um._TypedDataEncoder.hash(i.domain,r,i.value)))})}encrypt(t,r,n){if(typeof r=="function"&&!n&&(n=r,r={}),n&&typeof n!="function")throw new Error("invalid callback");return r||(r={}),z8(this,t,r,n)}static createRandom(t){let r=hf(16);t||(t={}),t.extraEntropy&&(r=(0,js.arrayify)((0,js.hexDataSlice)((0,G8.keccak256)((0,js.concat)([r,t.extraEntropy])),0,16)));let n=Om(r,t.locale);return e.fromMnemonic(n,t.path,t.locale)}static fromEncryptedJson(t,r,n){return AO(t,r,n).then(i=>new e(i))}static fromEncryptedJsonSync(t,r){return new e(SO(t,r))}static fromMnemonic(t,r,n){return r||(r=jl),new e(df.fromMnemonic(t,null,n).derivePath(r))}};var F1=class{constructor(){this.addressTypes=["eip155"]}generateKeypairFromPrivateKey(t){let r=t.fold(n=>new u0(new Uint8Array(n)));return{publicKey:new Uint8Array(Buffer.from(r.publicKey.slice(2),"hex")),privateKey:new Uint8Array(Buffer.from(r.privateKey.slice(2),"hex"))}}generateKeypairFromSeed(t,r,n){let i=t.fold(o=>new qs(o));try{let o=i.derivePathType(n,r);return{publicKey:o.publicKey,privateKey:o.secretKey}}finally{i.cleanup()}}};p();y();p();y();Uc.sha512Sync=(...e)=>bo(Uc.concatBytes(...e));var{getPublicKey:Gse}=Lw,Y8=e=>{let t=Gse(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}};var V1=class{constructor(){this.addressTypes=["solana"]}generateKeypairFromPrivateKey(t){let r=t.fold(n=>new go.Account(new Uint8Array(n)));return{publicKey:r.publicKey.toBytes(),privateKey:r.secretKey}}generateKeypairFromSeed(t,r,n){let i=t.fold(o=>new qs(o));try{let o=i.derivePathType(n,r);switch(n){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":case"bip44Root":case"bip44":case"bip44Change":case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":return{publicKey:o.publicKey,privateKey:o.secretKey};case"deprecated":{let s=Y8(o.secretKey);return{publicKey:s.publicKey,privateKey:s.secretKey}}}}finally{i.cleanup()}}};var Dm=class{constructor(){this.cryptoChainPlugins=new Map;this.registerChainPlugin(new i1),this.registerChainPlugin(new F1),this.registerChainPlugin(new V1)}registerChainPlugin(t){for(let r of t.addressTypes)this.cryptoChainPlugins.set(r,t)}generateKeypairFromPrivateKey(t,r){let n=this.cryptoChainPlugins.get(r);if(!n)throw new Error(`No plugin found for address type ${r}, please register the plugin first.`);return n.generateKeypairFromPrivateKey(t)}generateKeypairFromSeed(t,r,n){let i=mi.getAddressType(n),o=this.cryptoChainPlugins.get(i);if(!o)throw new Error(`No plugin found for address type ${i}, please register the plugin first.`);return o.generateKeypairFromSeed(t,r,n)}};p();y();function J8(e){return mi.getAll().includes(e)}p();y();var VO=X(Os()),qO=X(f0()),W1=X(uh()),HO=X(q1());var tI=e=>{let{privateKey:t,addressType:r}=e;switch(r){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":try{return{key:iae(t,e.networkIDValue),encoding:"hex"}}catch{throw new Error("Could not find encoding for Bitcoin private key")}case"eip155":try{return{key:oae(t),encoding:"hex"}}catch{throw new Error("Could not find encoding for EVM private key")}case"solana":try{return sae(t)}catch{throw new Error("Could not find encoding for Solana private key")}default:return be(r)}},iae=(e,t)=>{try{let{privateKey:r}=HO.decodeRaw(qO.default.decode(e),t);return r}catch{throw new Error("Provided Bitcoin private key is invalid!")}},oae=e=>{let t=Buffer.from(e.replace("0x",""),"hex");try{return new u0(new Uint8Array(t)),t}catch{throw new Error("Provided Ethereum private key is invalid!")}},H1=e=>{let t=W1.default.sign.keyPair.fromSecretKey(e),r=Buffer.from("phantom-secret-key-validation"),n=W1.default.sign.detached(r,e);if(!W1.default.sign.detached.verify(r,n,t.publicKey))throw new Error("Provided Solana private key is invalid!")},sae=e=>{try{let t=JSON.parse(e);return H1(Uint8Array.from(t)),{key:t,encoding:"uint8array"}}catch{}try{let t=VO.default.decode(e);return H1(t),{key:t,encoding:"base58"}}catch{}try{let t=Buffer.from(e,"hex");return H1(t),{key:t,encoding:"hex"}}catch{}try{let t=Buffer.from(e,"base64");return H1(t),{key:t,encoding:"base64"}}catch{}throw new Error("Provided Solana private key is invalid!")};p();y();var WO=X(Os()),zO=X(f0()),jO=X(q1());var aae=e=>{let{privateKey:t,addressType:r}=e;switch(r){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return zO.default.encode(jO.encodeRaw(e.networkIDValue,Buffer.from(t),!0));case"eip155":return"0x"+Buffer.from(t).toString("hex");case"solana":return WO.default.encode(t);default:return be(r)}};p();y();var Lm=e=>{try{return fo.from(tI(e).key)}catch(t){return console.error(t),fo.from(Buffer.from(""))}};p();y();var Bhe=X(X1());p();y();var[hN,pN,yN]=[[],[],[]],tce=BigInt(0),Hm=BigInt(1),rce=BigInt(2),nce=BigInt(7),ice=BigInt(256),oce=BigInt(113);for(let e=0,t=Hm,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],hN.push(2*(5*n+r)),pN.push((e+1)*(e+2)/2%64);let i=tce;for(let o=0;o<7;o++)t=(t<<Hm^(t>>nce)*oce)%ice,t&rce&&(i^=Hm<<(Hm<<BigInt(o))-Hm);yN.push(i)}var[sce,ace]=Me.split(yN,!0),lN=(e,t,r)=>r>32?Me.rotlBH(e,t,r):Me.rotlSH(e,t,r),dN=(e,t,r)=>r>32?Me.rotlBL(e,t,r):Me.rotlSL(e,t,r);function cce(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let s=0;s<10;s++)r[s]=e[s]^e[s+10]^e[s+20]^e[s+30]^e[s+40];for(let s=0;s<10;s+=2){let a=(s+8)%10,c=(s+2)%10,u=r[c],h=r[c+1],l=lN(u,h,1)^r[a],g=dN(u,h,1)^r[a+1];for(let x=0;x<50;x+=10)e[s+x]^=l,e[s+x+1]^=g}let i=e[2],o=e[3];for(let s=0;s<24;s++){let a=pN[s],c=lN(i,o,a),u=dN(i,o,a),h=hN[s];i=e[h],o=e[h+1],e[h]=c,e[h+1]=u}for(let s=0;s<50;s+=10){for(let a=0;a<10;a++)r[a]=e[s+a];for(let a=0;a<10;a++)e[s+a]^=~r[(a+2)%10]&r[(a+4)%10]}e[0]^=sce[n],e[1]^=ace[n]}r.fill(0)}var ev=class e extends hB{constructor(t,r,n,i=!1,o=24){if(super(),this.blockLen=t,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ml.number(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=lB(this.state)}keccak(){cce(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){ml.exists(this);let{blockLen:r,state:n}=this;t=dB(t);let i=t.length;for(let o=0;o<i;){let s=Math.min(r-this.pos,i-o);for(let a=0;a<s;a++)n[this.pos++]^=t[o++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:r,pos:n,blockLen:i}=this;t[n]^=r,r&128&&n===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){ml.exists(this,!1),ml.bytes(t),this.finish();let r=this.state,{blockLen:n}=this;for(let i=0,o=t.length;i<o;){this.posOut>=n&&this.keccak();let s=Math.min(n-this.posOut,o-i);t.set(r.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return ml.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(ml.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:r,suffix:n,outputLen:i,rounds:o,enableXOF:s}=this;return t||(t=new e(r,n,i,s,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=n,t.outputLen=i,t.enableXOF=s,t.destroyed=this.destroyed,t}},bf=(e,t,r)=>gl(()=>new ev(t,e,r)),CCe=bf(6,144,224/8),MCe=bf(6,136,256/8),RCe=bf(6,104,384/8),OCe=bf(6,72,512/8),NCe=bf(1,144,224/8),mI=bf(1,136,256/8),UCe=bf(1,104,384/8),DCe=bf(1,72,512/8),mN=(e,t,r)=>pB((n={})=>new ev(t,e,n.dkLen===void 0?r:n.dkLen,!0)),LCe=mN(31,168,128/8),KCe=mN(31,136,256/8);var Ys=X(fg()),OL=X(Os());function ro(e){let{publicKey:t,addressType:r}=e;switch(r){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return Che(t,r,e.networkID);case"eip155":return Mhe(t);case"solana":return OL.default.encode(t);default:return be(r)}}var Che=(e,t,r)=>{let n=r==="bip122:000000000933ea01ad0ee984209779ba"?Ys.networks.testnet:Ys.networks.bitcoin,i;switch(t){case"bip122_p2tr":Ys.initEccLib(Bhe),i=Ys.payments.p2tr({internalPubkey:Buffer.from(e.slice(1,33)),network:n},{validate:!1})?.address;break;case"bip122_p2wpkh":i=Ys.payments.p2wpkh({pubkey:Buffer.from(e),network:n},{validate:!1})?.address;break;case"bip122_p2sh":{let o=Buffer.from(e),s=Ys.payments.p2wpkh({pubkey:o,network:n},{validate:!1});i=Ys.payments.p2sh({pubkey:o,network:n,redeem:s},{validate:!1})?.address;break}case"bip122_p2pkh":{i=Ys.payments.p2pkh({pubkey:Buffer.from(e),network:n},{validate:!1})?.address;break}default:be(t)}if(!i)throw new Error("Could not derive Bitcoin address from public key");return i},Mhe=e=>{let t=e.slice(1),n=mI(t).slice(12);return Rhe(`0x${Buffer.from(n).toString("hex")}`)},Rhe=e=>{if(!ch.safeParse(e).success)throw new Error("toChecksumAddress: Input address is not a valid hex string.");let t=e.toLowerCase().replace("0x",""),r=Buffer.from(mI(Buffer.from(t,"utf-8"))).toString("hex"),n="0x";for(let i=0;i<t.length;i++)parseInt(r[i],16)>=8?n+=t[i].toUpperCase():n+=t[i];return n};p();y();function hd(e){return rf.safeParse(e).success}p();y();function M4(e){switch(e){case"bip44Root":case"bip44Change":case"bip44":case"deprecated":return"solana";case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":return"eip155";case"bitcoinLegacy":return"bip122_p2pkh";case"bitcoinNativeSegwit":return"bip122_p2wpkh";case"bitcoinNestedSegwit":return"bip122_p2sh";case"bitcoinTaproot":return"bip122_p2tr"}}p();y();p();y();p();y();var ti=(s=>(s.Solana="solana",s.Monad="monad",s.Ethereum="ethereum",s.Base="base",s.Polygon="polygon",s.Bitcoin="bitcoin",s))(ti||{}),ss=(s=>(s.Ethereum="60",s.Monad="143",s.Polygon="966",s.Base="8453",s.Solana="501",s.Bitcoin="0",s))(ss||{});var nA=(r=>(r.Mainnet="eip155:8453",r.Sepolia="eip155:84532",r))(nA||{}),NL=O.union([O.literal("eip155:8453"),O.literal("eip155:84532")]),R4={id:"base",addressTypes:["eip155"],iconUrl:"https://static.phantom.app/assets/base.png",name:"Base",networks:{"eip155:8453":{id:"eip155:8453",name:"Base",rpcProxyUrl:"https://base-mainnet.phantom.app",value:8453},"eip155:84532":{id:"eip155:84532",name:"Base Sepolia",rpcProxyUrl:"https://base-sepolia.phantom.app",value:84532}},mainnetID:"eip155:8453",tokenDecimals:18,tokenSymbol:"ETH",slip44:"8453"};p();y();var Ohe=X(X1());var iA=X(fg());var an=(r=>(r.Mainnet="bip122:000000000019d6689c085ae165831e93",r.Testnet="bip122:000000000933ea01ad0ee984209779ba",r))(an||{}),Mf=O.union([O.literal("bip122:000000000019d6689c085ae165831e93"),O.literal("bip122:000000000933ea01ad0ee984209779ba")]),Rf=O.string().refine(e=>{try{return iA.initEccLib(Ohe),iA.address.toOutputScript(e),!0}catch{return!1}},{message:"Invalid Bitcoin address."}),lg=O.object({networkID:Mf,addressType:O.nativeEnum(Ie),address:Rf,publicKey:O.instanceof(Uint8Array).optional()}),O4={id:"bitcoin",addressTypes:["bip122_p2tr","bip122_p2wpkh"],iconUrl:"https://static.phantom.app/assets/bitcoin.png",name:"Bitcoin",networks:{"bip122:000000000019d6689c085ae165831e93":{id:"bip122:000000000019d6689c085ae165831e93",name:"Bitcoin",value:128},"bip122:000000000933ea01ad0ee984209779ba":{id:"bip122:000000000933ea01ad0ee984209779ba",name:"Bitcoin Testnet",shortName:"Testnet",value:239}},mainnetID:"bip122:000000000019d6689c085ae165831e93",tokenDecimals:8,tokenSymbol:"BTC",slip44:"0"};p();y();p();y();var dg=(n=>(n.Mainnet="eip155:143",n.Testnet="eip155:10143",n.Devnet="eip155:41454",n))(dg||{}),N4=O.union([O.literal("eip155:143"),O.literal("eip155:10143"),O.literal("eip155:41454")]),U4={id:"monad",addressTypes:["eip155"],iconUrl:"https://static.phantom.app/assets/monad.png",name:"Monad",networks:{"eip155:143":{id:"eip155:143",name:"Monad",rpcProxyUrl:"https://monad-mainnet.phantom.app",value:143},"eip155:10143":{id:"eip155:10143",name:"Monad Testnet",shortName:"Testnet",rpcProxyUrl:"https://monad-testnet.phantom.app",value:10143},"eip155:41454":{id:"eip155:41454",name:"Monad Devnet",shortName:"Devnet",rpcProxyUrl:"https://devnet1.monad.xyz/rpc/YbJtaztqsm4SugWbf5h9byUSMh09sOWnpOo7vJneGE6k",value:41454}},mainnetID:"eip155:41454",tokenDecimals:18,tokenSymbol:"MON",slip44:"143"};p();y();var oA=(r=>(r.Mainnet="eip155:137",r.Amoy="eip155:80002",r))(oA||{}),D4=O.union([O.literal("eip155:137"),O.literal("eip155:80002")]),L4={id:"polygon",addressTypes:["eip155"],iconUrl:"https://static.phantom.app/assets/polygon.png",name:"Polygon",networks:{"eip155:137":{id:"eip155:137",name:"Polygon",rpcProxyUrl:"https://polygon-mainnet.phantom.app",value:137},"eip155:80002":{id:"eip155:80002",name:"Polygon Amoy",shortName:"Amoy",rpcProxyUrl:"https://polygon-amoy.phantom.app",value:80002}},mainnetID:"eip155:137",tokenDecimals:18,tokenSymbol:"POL",slip44:"966"};var sA=(r=>(r.Mainnet="eip155:1",r.Sepolia="eip155:11155111",r))(sA||{}),UL=O.union([O.literal("eip155:1"),O.literal("eip155:11155111")]),Of=O.union([UL,D4,NL,N4]),aA=O.object({networkID:Of,addressType:O.nativeEnum(Ie),address:ba}),K4={id:"ethereum",addressTypes:["eip155"],iconUrl:"https://static.phantom.app/assets/ethereum.png",name:"Ethereum",networks:{"eip155:1":{id:"eip155:1",name:"Ethereum",rpcProxyUrl:"https://eth-mainnet.phantom.app",value:1},"eip155:11155111":{id:"eip155:11155111",name:"Ethereum Sepolia",shortName:"Sepolia",rpcProxyUrl:"https://eth-sepolia.phantom.app",value:11155111}},mainnetID:"eip155:1",tokenDecimals:18,tokenSymbol:"ETH",slip44:"60"};p();y();var cA=(i=>(i.Mainnet="solana:101",i.Testnet="solana:102",i.Devnet="solana:103",i.Localnet="solana:localnet",i))(cA||{}),Nf=O.union([O.literal("solana:101"),O.literal("solana:102"),O.literal("solana:103"),O.literal("solana:localnet")]),hg=O.object({networkID:Nf,addressType:O.nativeEnum(Ie),address:xu}),F4={id:"solana",addressTypes:["solana"],iconUrl:"https://static.phantom.app/assets/solana.png",name:"Solana",networks:{"solana:101":{id:"solana:101",name:"Solana",rpcProxyUrl:"https://solana-mainnet.phantom.app/YBPpkkN4g91xDiAnTE9r0RcMkjg0sKUIWvAfoFVJ?advancedTxSubmission=true",value:"mainnet"},"solana:102":{id:"solana:102",name:"Solana Testnet",shortName:"Testnet",value:"testnet"},"solana:103":{id:"solana:103",name:"Solana Devnet",shortName:"Devnet",value:"devnet"},"solana:localnet":{id:"solana:localnet",name:"Solana Localnet",shortName:"Localnet",value:"localnet"}},localnetID:"solana:localnet",mainnetID:"solana:101",tokenDecimals:9,tokenSymbol:"SOL",slip44:"501"};p();y();function uA(e){return Object.values(ti).includes(e)}var no={bitcoin:O4,ethereum:K4,polygon:L4,monad:U4,solana:F4,base:R4},fA={solana:1,ethereum:2,monad:3,base:4,polygon:5,bitcoin:6},Nhe={solana:!0,ethereum:!0,monad:!1,base:!0,polygon:!0,bitcoin:!0},V4=(e,t)=>{let r=fA[e]-fA[t];return r===0?0:r>0?1:-1},Uhe=()=>{let e=Object.values(ti).sort(V4),t=e.map(j=>no[j]),r={},n=[],i={},o={},s={};t.forEach(j=>{let ee=Object.keys(j.networks);n.push(...ee),ee.forEach(fe=>{r[fe]=j});let le=Object.values(j.networks);i[j.id]=le.map(fe=>fe.id),le.forEach(fe=>{o[fe.id]=fe});for(let fe of j.addressTypes){let K=s[fe];K?K.push(j.id):s[fe]=[j.id]}});let a=new Set(n);function c(j){return j?.evmOnly?e.filter(ee=>no[ee].addressTypes.includes("eip155")):e}function u(j){return nB()&&j==="monad"?!0:Nhe[j]}function h(j){return i[j]}function l(j){if(j){let ee=t;return j.evmOnly&&(ee=ee.filter(le=>le.addressTypes.includes("eip155"))),j.mainnetOnly?ee.map(le=>le.mainnetID):ee.flatMap(le=>Object.keys(le.networks))}else return n}function g(j){return r[j]}function x(j){return o[j].rpcProxyUrl}function A(j){return r[j].addressTypes[0]}function E(j){let ee=r[j];if(ee.addressTypes.length===1){let[le]=ee.addressTypes;return le}else throw`The chain ${ee.id} has multiple address types`}function B(j){return r[j].addressTypes}function M(j){return r[j].id}function N(j){return no[Y(j)].name}function R(j){return r[j].tokenDecimals}function V(j){return(te(j)?r[j]:no[j]).tokenSymbol}function q(j){return(te(j)?r[j]:no[j]).iconUrl}function W(j){return r[j].slip44}function G(j){return no[Y(j)].mainnetID}function z(j){let ee;if(w(j)&&(ee=o[j].value),typeof ee=="number")return ee;throw new Error(`Invalid NetworkID: ${j}. Must be an EVM NetworkID.`)}function te(j){return a.has(j)}function _(j){return Object.keys(no.bitcoin.networks).includes(j)}function f(j){return Object.keys(no.ethereum.networks).includes(j)}function m(j){return Object.keys(no.polygon.networks).includes(j)}function b(j){return Object.keys(no.base.networks).includes(j)}function v(j){return Object.keys(no.monad.networks).includes(j)}function w(j){return f(j)||m(j)||b(j)||v(j)}function P(j){return Object.keys(no.solana.networks).includes(j)}function C(j){if(!P(j))throw new Error(`Invalid NetworkID: ${j}. Must be a Solana NetworkID.`);return no.solana.networks[j].value}function k(j){return r[j].localnetID===j}function d(j){return r[j].mainnetID===j}function S(j){return o[j]}function F(j,ee=!1){let le=o[j];return ee&&le.shortName?le.shortName:le.name}function U(j){return s[j]}function D(j,ee){let le=r[j].id,fe=r[ee].id;return V4(le,fe)}function Y(j){return uA(j)?j:te(j)?ae.getChainID(j):be(j)}return{...no,getAllChainIDs:c,getDefaultChainEnablement:u,getNetworkIDs:h,getAllNetworkIDs:l,getChainDefinition:g,getAddressType:E,getAddressTypes:B,getChainID:M,getChainName:N,getTokenDecimals:R,getTokenSymbol:V,getChainIconUrl:q,getSlip44:W,getMainnetNetworkID:G,getEVMNetworkIDValue:z,getSolanaNetworkIDValue:C,_DO_NOT_USE_getAddressType:A,isNetworkID:te,isBitcoinNetworkID:_,isEVMNetworkID:w,isSolanaNetworkID:P,isEthereumNetworkID:f,isPolygonNetworkID:m,isBaseNetworkID:b,isLocalNetworkID:k,isMainnetNetworkID:d,getNetworkDefinition:S,getNetworkName:F,getChainIDs:U,compareChain:V4,compareNetworkID:D,getRpcProxyUrl:x}},ae=Uhe();p();y();var Kt={Bitcoin:an,Ethereum:sA,Polygon:oA,Solana:cA,Base:nA,Monad:dg},Qc=O.union([Mf,Of,Nf]),Dhe=O.union([lg,aA,hg]);p();y();p();y();var za=(n=>(n.address="address",n.tx="tx",n.nativeToken="nativeToken",n))(za||{}),DL=O.string(),LL=O.object({chainId:Qc,resourceType:O.nativeEnum(za)}),q4=LL.extend({resourceType:O.literal("nativeToken"),slip44:O.nativeEnum(ss)}),M0=LL.extend({resourceType:O.literal("address"),address:O.string()}),H4=M0.extend({chainId:Nf,address:xu}),W4=M0.extend({chainId:Of,address:ba,tokenId:O.string().optional()}),z4=M0.extend({chainId:Mf,address:Rf.or(O.string())}),KL=O.union([q4,M0,H4,W4,z4]);var FL=e=>{if(e.resourceType==="nativeToken")return`${e.chainId}/nativeToken:${e.slip44}`;if(ae.isEVMNetworkID(e.chainId))return e.address=e.address.toLowerCase(),"tokenId"in e&&typeof e.tokenId=="string"&&e.tokenId?`${e.chainId}/address:${e.address}/${e.tokenId}`:`${e.chainId}/address:${e.address}`;if(ae.isSolanaNetworkID(e.chainId))return`${e.chainId}/address:${e.address}`;if(ae.isBitcoinNetworkID(e.chainId)){let t=e;return`${t.chainId}/address:${t.address}`}return be(e.chainId)};p();y();p();y();var VL=O.string().refine(e=>{let t=e.split("/");if(t.length<2)return!1;let r=t[0],i=t[1].split(":");if(i.length<2)return!1;let o=i[0],s=i[1];return typeof e=="string"&&ae.isNetworkID(r)&&o.match(/^[-a-z0-9]{2,8}/)&&s.match(/^[-a-zA-Z0-9]{1,64}/)},{message:"Value is not a valid BRI string."});p();y();var qL=e=>{let t=e.split("/");if(t.length>3||t.length<2)throw new Error(`Cannot decode malformed caip19 string '${e}'`);let r=t[0];if(!(ae.isEVMNetworkID(r)||ae.isSolanaNetworkID(r)||ae.isBitcoinNetworkID(r)))throw new Error(`Cannot decode unsupported chain '${r}'`);let n=t[1].split(":");if(n.length!==2)throw new Error(`Invalid resource specification '${t[1]}'`);let[i,o]=n;if(!Object.values(za).includes(i))throw new Error(`Unsupported resource type '${i}'`);if(i==="nativeToken"){if(!Object.values(ss).includes(o))throw new Error(`Unsupported slip44 '${o}'`);return{chainId:r,resourceType:i,slip44:o}}else if(ae.isEVMNetworkID(r)){if(i==="address")return t.length===3?{chainId:r,address:o,resourceType:i,tokenId:t[2]}:{chainId:r,address:o,resourceType:i};throw new Error(`Unsupported resource type ${i} for chain ${r}`)}else if(ae.isSolanaNetworkID(r)){if(i==="address")return{chainId:r,address:o,resourceType:i};throw new Error(`Unsupported resource type ${i} for chain ${r}`)}else if(ae.isBitcoinNetworkID(r)){if(i==="address")return{chainId:r,address:o,resourceType:i};throw new Error(`Unsupported resource type ${i} for chain ${r}`)}throw new Error(`Cannot decode malformed caip19 string '${e}'`)};p();y();function HL(e){return!e||e.resourceType!=="address"?!1:!!ae.isEVMNetworkID(e.chainId)}p();y();function lA(e,t){return ae.isBitcoinNetworkID(t)?Rf.safeParse(e).success:ae.isEVMNetworkID(t)?ba.safeParse(e).success:ae.isSolanaNetworkID(t)?xu.safeParse(e).success:be(t)}p();y();var WL=e=>{let t=ae.getNetworkIDs(e),r=ae.getMainnetNetworkID(t[0]),n=ae[e].slip44;return{chainId:r,resourceType:"nativeToken",slip44:n}};p();y();p();y();p();y();function zL(e){return lg.safeParse(e).success}function jL(e){return hg.safeParse(e).success}var GL=O.object({networkID:Qc,addressType:O.nativeEnum(Ie),address:O.string()}),Lhe=e=>`${e.networkID}-${e.address}`,$L={toKey:Lhe},YL=e=>{let t={chainId:e.networkID,address:e.address,resourceType:"address"};return ae.isEVMNetworkID(e.networkID)&&(t.address=t.address.toLowerCase()),t};p();y();function JL(e){return[Kt.Solana.Devnet,Kt.Solana.Testnet,Kt.Solana.Mainnet].map(r=>parseInt(r.replace("solana:",""))).includes(parseInt(e,16))?`solana:${parseInt(e,16)}`:`eip155:${parseInt(e,16)}`}p();y();var ZL=O.object({id:Qc,name:O.string(),symbol:O.string(),imageUrl:O.string()});function QL(e){let{name:t,tokenSymbol:r,iconUrl:n}=ae.getChainDefinition(e);return{id:e,name:t,symbol:r,imageUrl:n}}p();y();function XL(e){switch(e){case"devnet":return Kt.Solana.Devnet;case"mainnet":return Kt.Solana.Mainnet;case"testnet":return Kt.Solana.Testnet;case"localnet":return Kt.Solana.Localnet}}function eK(e){switch(e){case"mainnet":return"mainnet-beta";case"localnet":return"localhost";default:return e}}p();y();var Js=(e,t)=>{if(ae.isBitcoinNetworkID(e)){switch(!0){case(t.startsWith("bc1p")||t.startsWith("bcrt1p")||t.startsWith("tb1p")):return"bip122_p2tr";case(t.startsWith("bc1q")||t.startsWith("tb1q")):return"bip122_p2wpkh";case(t.startsWith("3")||t.startsWith("2")):return"bip122_p2sh";case(t.startsWith("1")||t.startsWith("m")):return"bip122_p2pkh"}throw new Error(`Unable to get address type from invalid Bitcoin address: ${t}`)}else return ae.isEVMNetworkID(e)?"eip155":ae.isSolanaNetworkID(e)?"solana":be(e)};p();y();var Khe=ae.getAllNetworkIDs().filter(e=>ae.isEVMNetworkID(e)),tK=e=>Khe.find(t=>ae.getNetworkDefinition(t).value===e);p();y();var rK=(e,t)=>ae.getAllNetworkIDs({evmOnly:!0}).filter(r=>{if(ae.getChainID(r)==="monad"&&!e)return!1;if(t){if(t==="mainnets_only")return ae.isMainnetNetworkID(r);if(t==="testnets_only")return!ae.isMainnetNetworkID(r)}else return!0}).map(Fhe),Fhe=e=>`0x${ae.getNetworkDefinition(e).value.toString(16)}`;p();y();var zhe={[Kt.Monad.Mainnet]:1,[Kt.Monad.Devnet]:1,[Kt.Monad.Testnet]:1,[Kt.Ethereum.Mainnet]:6,[Kt.Ethereum.Sepolia]:6,[Kt.Polygon.Mainnet]:128,[Kt.Polygon.Amoy]:128,[Kt.Base.Mainnet]:3,[Kt.Base.Sepolia]:3},jhe={[Kt.Bitcoin.Mainnet]:1,[Kt.Bitcoin.Testnet]:1};var Ghe="TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb";p();y();p();y();function $he(e,t){return t.getSupportedChains().includes(e)}function nK(e,t){if(uA(e))return t.get(e);if(ae.isNetworkID(e)){let r=ae.getChainID(e);if($he(r,t))return t.get(r)}throw new Error("Invalid input type for chain config get method")}function j4(e){return{get:t=>nK(t,e),supportedChains:e.getSupportedChains()}}p();y();var pg=class{constructor(t){this.chainConfigMap=new Map;Object.entries(t).forEach(([r,n])=>{this.register(r,n)})}register(t,r){this.chainConfigMap.set(t,r)}getSupportedChains(){return Array.from(this.chainConfigMap.keys())}get(t){let r=this.chainConfigMap.get(t);if(!r)throw new Error(`No chain config found for chain: ${t}`);return r}};p();y();var iK=".phantom-labs.internal.enabledChainsOverrideSettings",oK=async e=>{try{return(await e.get(iK))?.settings}catch{return null}},sK=async(e,t,r)=>{let n=await oK(r);return r.set(iK,{version:1,settings:{...n!=null&&n,[e]:t}})},aK=async e=>{let t=[],r;try{r=await oK(e),r&&Object.entries(r).forEach(([n,i])=>{i||t.push(n)})}catch{}try{let n=await e.get(Yhe);!n||n.version===1||n.chains.forEach(i=>{r&&r[i]||t.push(i)})}catch{}try{ae.getAllChainIDs().forEach(n=>{r&&r[n]||ae.getDefaultChainEnablement(n)||t.push(n)})}catch{}return[...new Set(t)]},cK=async(e,t)=>sK(e,!1,t),G4=async(e,t)=>sK(e,!0,t),R0=".phantom-labs.internal.disabledAddressTypes",uK=async e=>{let t;try{t=await e.get(R0)!==null}catch{t=!1}return t},fK=async e=>{let t;try{t=(await e.get(R0))?.addressTypes??[]}catch{t=[]}return[...new Set([...t,"bip122_p2sh","bip122_p2pkh"])]},lK=async(e,t)=>{let r=await t.get(R0),n=new Set(r?.addressTypes??[]);return n.delete(e),t.set(R0,{version:1,addressTypes:Array.from(n)})},dK=async(e,t)=>{let r=await t.get(R0),n=new Set(r?.addressTypes??[]);return n.add(e),t.set(R0,{version:1,addressTypes:Array.from(n)})},Yhe=".phantom-labs.internal.disabledChains";p();y();var pd=async e=>{let t=Ec.isFeatureEnabled("enable-monad"),r=ae.getAllChainIDs().filter(B=>B!=="monad"||t),n=await aK(e),i=new Set(n),o=r.filter(B=>!i.has(B)),s=B=>{let M=ae.getChainID(B);return o.includes(M)},a=ae.getAllNetworkIDs({mainnetOnly:!1}).filter(s),c=ae.getAllNetworkIDs({mainnetOnly:!0}).filter(s),u=new Set(n.flatMap(B=>ae.getNetworkIDs(B))),h=a.filter(B=>!u.has(B)),l=c.filter(B=>!u.has(B)),g=mi.getAll(),x=await fK(e),A=new Set(x);for(let B of g){let M=ae.getChainIDs(B);if(!M){A.add(B);continue}M.every(R=>i.has(R))&&A.add(B)}let E=g.filter(B=>!A.has(B));return{supportedChainIDs:r,supportedAddressTypes:g,disabledChainIDs:n,enabledChainIDs:o,enabledAddressTypes:E,enabledNetworkIDs:h,enabledMainnetOnlyNetworkIDs:l}};p();y();p();y();var dA="@phantom/chains",hA={enabledChains:[`${dA}:enabled-chains`],enabledAddressTypes:[`${dA}:enabled-address-types`],enabledNetworkIDs(e){return[`${dA}:enabled-network-ids`,{mainnetOnly:e}]},chainAvailability(e){return[`${dA}:chain-availability`,e]}};var hK=[],$4=e=>{hK.push(e)},Xc=async e=>{let t=Ec.isFeatureEnabled("enable-monad");await e.invalidateQueries({queryKey:hA.chainAvailability({isMonadEnabled:t})}),await Promise.all(hK.map(r=>r(e)))};p();y();p();y();var yg=(i=>(i.Image="image",i.Emoji="emoji",i.ReadOnlyDefault="read-only-default",i.Default="default",i))(yg||{}),Jhe=O.object({type:O.nativeEnum(yg),imageUrl:O.string().optional(),unicode:O.string().optional()}),pA=(t=>(t.Ledger="ledger",t))(pA||{}),yA=(t=>(t.BLE="ble",t))(yA||{}),Zhe=O.object({version:O.literal(1),connectionType:O.nativeEnum(yA),deviceType:O.nativeEnum(pA),id:O.string().min(1),name:O.string().optional(),model:O.string().optional()}),Qhe=O.object({value:O.number(),timestamp:O.number()}),Xhe=O.object({name:O.string(),icon:Jhe.optional(),connectedDevices:Zhe.array().optional(),balance:Qhe.optional()});var e0e=100,t0e={unicode:void 0,imageUrl:void 0,type:"default"},Y4={version:1,isDeveloperMode:!1};var mA=Kt.Solana.Devnet,gA=Kt.Ethereum.Sepolia,yd={version:1,setting:{solana:mA,eip155:gA}};function Zs(e){return e.map(t=>mi[t].defaultDerivationPathType)}var r0e={bip44Root:"bip44RootEthereum",bip44Change:"bip44Ethereum",bip44:"bip44EthereumSecondary",deprecated:"bip44EthereumTertiary",bip44RootEthereum:null,bip44Ethereum:null,bip44EthereumSecondary:null,bip44EthereumTertiary:null,bitcoinTaproot:null,bitcoinNativeSegwit:null,bitcoinNestedSegwit:null,bitcoinLegacy:null},eu={bip44Root:-1,bip44RootEthereum:-1,bitcoinTaproot:0,bitcoinNativeSegwit:0,bitcoinNestedSegwit:0,bitcoinLegacy:0,bip44Change:0,bip44Ethereum:0,bip44:1,bip44EthereumSecondary:1,deprecated:2,bip44EthereumTertiary:2},n0e="https://help.phantom.app/hc/en-us/articles/4406563212819";var i0e="https://help.phantom.app/hc/en-us/articles/21872962238355";p();y();var mg=(e,t=5)=>{let r=e.length,n=e.startsWith("0x")?t+2:t;return`${e.substring(0,n)}...${e.substring(r-t,r)}`};p();y();p();y();var o0e=e=>e.includes(".")||e.includes("@")?!1:xu.safeParse(e).success||ba.safeParse(e).success||Rf.safeParse(e).success,J4=(e,t=5)=>o0e(e)?mg(e,t):e;var s0e=(e,t,r,n=4)=>{let i=t?t.name:r,o=J4(e,n);return i?`${i} (${o})`:o};p();y();var a0e=e=>`${e.substring(0,5)}...`;p();y();var O0=X(Br()),pK=(0,O0.createContext)(null);function c0e({children:e,authRepository:t}){return O0.default.createElement(pK.Provider,{value:t},e)}function Ki(){let e=(0,O0.useContext)(pK);if(!e)throw new Error("useAuthRepository must be used within an AuthProvider");return e}p();y();p();y();var Q4=X(Qr());p();y();var gg="https://phantom.app",bg="https://api.phantom.app/oauth2/auth",bA={prod:"a61bc25e-0c4f-4ab3-aa54-b50ec746eea2",staging:"fe26708b-7db7-4146-9fbb-9a9736acfb2b"},Z4={prod:"https://auth.phantom.app",staging:"https://staging-auth.phantom.app"},yK="/login/start",mK="/oauth2/token";var u0e="https://help.phantom.app/hc/en-us/articles/32367778944403";var xA=Ns({minutes:60})-Ns({minutes:15});p();y();var ri=e=>Buffer.from(e).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");var f0e=60;function xg(){let e={alg:"ES256",type:"JWT"},t=Math.floor(Date.now()/1e3),r={iss:gg,aud:bg,nbf:t,exp:t+f0e,iat:t};return{header:e,payload:r}}function N0(e){let t=ri(Q4.Buffer.from(JSON.stringify(e.header))),r=ri(Q4.Buffer.from(JSON.stringify(e.payload)));return[t,r,e.signature].join(".")}p();y();var gK=O.object({alg:O.string(),type:O.string(),kid:O.string()}),bK=O.object({sub:O.string(),iss:O.string(),aud:O.string(),nbf:O.number(),exp:O.number(),iat:O.number()}),X4=O.object({header:gK,payload:bK,signature:O.string()}),xK=O.object({alg:O.string(),type:O.string()}),wK=O.object({iss:O.string(),aud:O.string(),nbf:O.number(),exp:O.number(),iat:O.number()}),ek=O.object({header:xK,payload:wK}),vK=O.object({id_token:O.string(),access_token:O.string(),refresh_token:O.string(),scope:O.string(),token_type:O.string(),expires_in:O.number().gte(0)}),l0e=O.object({redirectTo:O.string()}),AK=O.object({at_hash:O.string(),aud:O.array(O.string()),auth_time:O.number(),exp:O.number(),iat:O.number(),iss:O.string(),jti:O.string(),rat:O.number(),sid:O.string(),sub:O.string(),email:O.string().optional()}),tk=O.object({authenticationKeys:O.array(O.object({createdAt:O.string().datetime().nullish().default(null),updatedAt:O.string().datetime().nullish().default(null),id:O.string().uuid(),publicKey:O.string(),userId:O.string().uuid()})).optional()});p();y();var md=X(mk());p();y();p();y();p();y();p();y();function VK(...e){let t=new AbortController;for(let r of e){let n=r instanceof AbortController?r.signal:r;if(n?.aborted)return t.abort(n.reason),t.signal;n?.addEventListener("abort",()=>{t.abort(n.reason)},{once:!0})}return t.signal}var spe=2*60*1e3,ape=[];function qK(e,t){let{fetchTimeout:r,retryDelays:n,...i}=t||{},o=t?.fetchTimeout??spe,s=t?.retryDelays??ape,a=0,c=0;return new Promise((u,h)=>{function l(){a++,c=Date.now();let A=!0,E=new AbortController,B=fetch(e,{...i,signal:VK(...i.signal?[i.signal,E.signal]:[E.signal])}),M=setTimeout(()=>{E.abort(),A=!1,x(a)?g():h(new Error(`fetchWithTimeoutAndRetry(): Failed to get response from server due to timeout of ${o} ms, tried ${a} times.`))},o);B.then(N=>{clearTimeout(M),A&&(N.status>=200&&N.status<300?u(N):x(a,N.status)?g():u(N))}).catch(N=>{clearTimeout(M),x(a)?g():h(N)})}function g(){let A=s[a-1],E=c+A;setTimeout(l,Math.max(E-Date.now(),0))}function x(A,E){let B=E?E>=400&&E<=499:!1;return A<=s.length&&!B}l()})}p();y();var gk=(e={},t={})=>{let r=new Headers(e),n=new Headers(t);for(let[i,o]of n.entries())o===void 0||o==="undefined"?r.delete(i):r.set(i,o);return r};p();y();var V0=X(Qr());p();y();p();y();function HK(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function bk(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function WK(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");HK(e.outputLen),HK(e.blockLen)}function K0(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function zK(e,t){bk(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}p();y();var cpe=e=>e instanceof Uint8Array;var MA=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Qs=(e,t)=>e<<32-t|e>>>t,upe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!upe)throw new Error("Non little-endian hardware is not supported");function fpe(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function vg(e){if(typeof e=="string"&&(e=fpe(e)),!cpe(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}var F0=class{clone(){return this._cloneInto()}},KFe={}.toString;function jK(e){let t=n=>e().update(vg(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}var RA=class extends F0{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,WK(t);let n=vg(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return K0(this),this.iHash.update(t),this}digestInto(t){K0(this),bk(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},xk=(e,t,r)=>new RA(e,t).update(r).digest();xk.create=(e,t)=>new RA(e,t);p();y();p();y();function lpe(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var OA=class extends F0{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=MA(this.buffer)}update(t){K0(this);let{view:r,buffer:n,blockLen:i}=this;t=vg(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=MA(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){K0(this),zK(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let l=s;l<i;l++)r[l]=0;lpe(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=MA(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,h[l],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};var dpe=(e,t,r)=>e&t^~e&r,hpe=(e,t,r)=>e&t^e&r^t&r,ppe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Kf=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ff=new Uint32Array(64),wk=class extends OA{constructor(){super(64,32,8,!1),this.A=Kf[0]|0,this.B=Kf[1]|0,this.C=Kf[2]|0,this.D=Kf[3]|0,this.E=Kf[4]|0,this.F=Kf[5]|0,this.G=Kf[6]|0,this.H=Kf[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let l=0;l<16;l++,r+=4)Ff[l]=t.getUint32(r,!1);for(let l=16;l<64;l++){let g=Ff[l-15],x=Ff[l-2],A=Qs(g,7)^Qs(g,18)^g>>>3,E=Qs(x,17)^Qs(x,19)^x>>>10;Ff[l]=E+Ff[l-7]+A+Ff[l-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:h}=this;for(let l=0;l<64;l++){let g=Qs(a,6)^Qs(a,11)^Qs(a,25),x=h+g+dpe(a,c,u)+ppe[l]+Ff[l]|0,E=(Qs(n,2)^Qs(n,13)^Qs(n,22))+hpe(n,i,o)|0;h=u,u=c,c=a,a=s+x|0,s=o,o=i,i=n,n=x+E|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,o,s,a,c,u,h)}roundClean(){Ff.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var GK=jK(()=>new wk);var ype=[86,120,48,81,89,86,110,49,100,114,111,113,49,70,56,84,77,115,80,81,66,75,72,51,90,83,110,100,110,116,68,88,107,118,83,53,102,80,114,89,111,88,85,75,57,43,67,57,97,103,74,113,68,76,112,112,100,48,102,101,80,122,83,111,108,113,75,90,56,114,66,70,119,87,84,104,98,57,110,119,43,79,70,51,51,65,61,61],mpe=[87,67,49,81,97,71,70,117,100,71,57,116,81,88,86,48,97,70,82,118,97,50,86,117],gpe=[87,67,49,81,97,71,70,117,100,71,57,116,84,109,57,117,89,50,85,61];function bpe(e){let t=new URL(e);return t.pathname+t.search}function $K(e,t){let r=bpe(e),n=JSON.stringify(Math.floor(Date.now()/1e3)),i=r+n,o=xk(GK,V0.Buffer.from(String.fromCharCode(...ype)),V0.Buffer.from(i)),s=new Headers(t);return s.set(V0.Buffer.from(String.fromCharCode(...mpe),"base64").toString(),encodeURIComponent(V0.Buffer.from(o).toString("base64"))),s.set(V0.Buffer.from(String.fromCharCode(...gpe),"base64").toString(),n),s}var H0=class extends Error{constructor(t,r){super(t),this.response=r}},xpe={"Content-Type":"application/json","X-Phantom-Version":oB},q0=async e=>{let t,r;try{r=await e.clone().blob()}catch{}try{t=await e.clone().json()}catch{}let{status:n,statusText:i}=e;return{blob:r,data:t,status:n,statusText:i}},vk=class e{constructor(t={}){this.fetch=async(t,r={})=>{try{if(typeof t=="function"){let c=yl()==="https://api.phantom.app"?"prod":"staging";t=t({apiEnv:c})}let n="";this.config.withApiEnvironment==="prod"?n="https://api.phantom.app":this.config.withApiEnvironment==="staging"?n="https://staging-api.phantom.app":this.config.withApiEnvironment==="default"&&(n=yl());let i=new URL(`${n}${t}`),o=r;r.headers=gk(this.config.headers,r.headers),this.config.withClientAuth&&(r.headers=$K(i.toString(),r.headers)),r?.params&&(i.search=new URLSearchParams(r.params).toString());let s=this.config.validateStatus;r?.validateStatus&&(s=r?.validateStatus),o.body&&typeof o.body!="string"&&(o.body=JSON.stringify(o.body)),this.config.timeoutMs&&(o.fetchTimeout=this.config.timeoutMs),this.config.numRetries&&(o.retryDelays=Array(this.config.numRetries).fill(this.config.delayBetweenEachRetryMs));let a=await qK(i.toString(),o);if(s&&!a.ok)throw new H0(`Request failed with status code ${a.status}`,await q0(a));return a}catch(n){throw n instanceof H0?n:new H0(n?.message,n?.response)}};this.config={withClientAuth:!0,numRetries:0,delayBetweenEachRetryMs:0,timeoutMs:null,validateStatus:!1,headers:xpe,withApiEnvironment:"none",...t}}auth(t){return new e({...this.config,withClientAuth:t})}bearer(t){return t?this.headers({authorization:`Bearer ${t}`}):this}headers(t,r){let n=r?.mergeHeaders===!1?t:gk(this.config.headers,t);return new e({...this.config,headers:n})}timeout(t){return new e({...this.config,timeoutMs:t})}retry(t,r){return new e({...this.config,numRetries:t,delayBetweenEachRetryMs:r})}validateStatus(t){return new e({...this.config,validateStatus:t})}api(t="default"){return new e({...this.config,withApiEnvironment:t})}async get(t,r={}){r.method="GET";let n=await this.fetch(t,r);return q0(n)}async post(t,r,n={}){n.method="POST";let i=await this.fetch(t,{...n,body:r});return q0(i)}async put(t,r,n={}){n.method="PUT";let i=await this.fetch(t,{...n,body:r});return q0(i)}async patch(t,r,n={}){n.method="PATCH";let i=await this.fetch(t,{...n,body:r});return q0(i)}async delete(t,r,n={}){n.method="DELETE";let i=await this.fetch(t,{...n,body:r});return q0(i)}},er=new vk;function wpe(e){if(e===void 0)throw new Error("rpcUrl undefined");return async(t,r)=>{let n={jsonrpc:"2.0",id:+new Date,method:t,params:r},o=(await er.post(e,n)).data;if("error"in o)throw new Error(JSON.stringify(o.error));return o.result}}async function vpe(e,t={}){return er.fetch(e,t)}function Ape(e){return e.status>199&&e.status<300}function Spe(e){return e instanceof H0}p();y();var W0=X(mk()),JK=X(uh()),Ak={generateRandom:e=>{let t=(0,JK.randomBytes)(e);return(0,W0.bufferToString)(t)},async deriveChallenge(e){let t=ly((0,W0.textEncodeLite)(e));return(0,W0.urlSafe)(t)}};p();y();var Xs=()=>yl()==="https://api.phantom.app"?Z4.prod:T.BASE_AUTH_ENDPOINT||Z4.staging,Sk=()=>`${Xs()}${yK}`,NA=()=>`${Xs()}${mK}`;var ZK=new md.BasicQueryStringUtils;async function Ag(e,t){let{url:r,codeVerifier:n}=await QK(e.getClientID(),e.redirectURL,t),i=t.type==="email",o=await e.fetchAuthorizationCode(e.redirectURL,r,i);return await Ek({grantType:"authorization_code",clientID:e.getClientID(),redirectURI:e.redirectURL,tokenEndpoint:NA(),code:o,codeVerifier:n})}async function QK(e,t,r){let n=Sk(),i,o=["openid","offline_access","user","incognito","seedless"],s;switch(r.type){case"key":{i={type:"key",jwt:N0(r.clientJWT)};break}case"email":{i={type:"email",provider:r.provider,existingAccessToken:r.existingAccessToken},s=r.prompt,o.push("email");break}case"session":{i={type:"session",existingAccessToken:r.existingAccessToken};break}}let c=await new md.AuthorizationRequest({client_id:e,redirect_uri:t,scope:o.join(" "),response_type:"code"},Ak).toJson(),u;switch(i.type){case"key":u=`jwt:${ri(Buffer.from(i.jwt,"utf8"))}`;break;case"email":u=`sso:${i.provider}`,i.existingAccessToken&&(u=`${u}:${i.existingAccessToken}`);break;case"session":u=`session:${i.existingAccessToken}`;break}let h={redirect_uri:c.redirect_uri,client_id:c.client_id,response_type:c.response_type,state:c.state??"",scope:c.scope,login_hint:u};s&&(h.prompt=s);let l=c.extras?.code_challenge,g=c.extras?.code_challenge_method,x=c.internal?.code_verifier;if(l&&g&&(h.code_challenge=l,h.code_challenge_method=g),!l||!g||!x)throw new Error("Missing code challenge or code verifier for PKCE.");let A=ZK.stringify(h);return{url:`${n}?${A}`,codeVerifier:x}}async function Ek(e){let{grantType:t,tokenEndpoint:r,clientID:n,redirectURI:i}=e,o;t==="authorization_code"?o=new md.TokenRequest({client_id:n,redirect_uri:i,grant_type:t,code:e.code,extras:{code_verifier:e.codeVerifier}}):o=new md.TokenRequest({client_id:n,redirect_uri:i,grant_type:t,refresh_token:e.refreshToken});let s=await er.headers({"Content-Type":"application/x-www-form-urlencoded"},{mergeHeaders:!1}).auth(iB()).post(r,ZK.stringify(o.toStringMap()));if(s.status===401)throw t==="refresh_token"?new Error("Token request unauthorized. Refresh token is expired or invalid."):new Error("Token request unauthorized. Authorization code is expired or invalid.");if(s.status===400)throw new Error("Bad Token request. Request is malformed or incorrect clientID / redirectURI.");let a=vK.safeParse(s.data);if(!a.success)throw new Error("Invalid OAuth2Token response.");let{data:c}=a;return{idToken:c.id_token,accessToken:c.access_token,refreshToken:c.refresh_token,scope:c.scope,tokenType:c.token_type,expiresAt:Date.now()+c.expires_in*1e3}}async function XK(e,t){return await Ek({clientID:e.getClientID(),redirectURI:e.redirectURL,grantType:"refresh_token",tokenEndpoint:NA(),refreshToken:t})}p();y();p();y();var VVe=new Error("timeout while waiting for mutex to become available"),qVe=new Error("mutex already locked"),Epe=new Error("request for lock canceled"),Ipe=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},Ik=class{constructor(t,r=Epe){this._value=t,this._cancelError=r,this._weightedQueues=[],this._weightedWaiters=[]}acquire(t=1){if(t<=0)throw new Error(`invalid weight ${t}: must be positive`);return new Promise((r,n)=>{this._weightedQueues[t-1]||(this._weightedQueues[t-1]=[]),this._weightedQueues[t-1].push({resolve:r,reject:n}),this._dispatch()})}runExclusive(t,r=1){return Ipe(this,void 0,void 0,function*(){let[n,i]=yield this.acquire(r);try{return yield t(n)}finally{i()}})}waitForUnlock(t=1){if(t<=0)throw new Error(`invalid weight ${t}: must be positive`);return new Promise(r=>{this._weightedWaiters[t-1]||(this._weightedWaiters[t-1]=[]),this._weightedWaiters[t-1].push(r),this._dispatch()})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(t){this._value=t,this._dispatch()}release(t=1){if(t<=0)throw new Error(`invalid weight ${t}: must be positive`);this._value+=t,this._dispatch()}cancel(){this._weightedQueues.forEach(t=>t.forEach(r=>r.reject(this._cancelError))),this._weightedQueues=[]}_dispatch(){var t;for(let r=this._value;r>0;r--){let n=(t=this._weightedQueues[r-1])===null||t===void 0?void 0:t.shift();if(!n)continue;let i=this._value,o=r;this._value-=r,r=this._value+1,n.resolve([i,this._newReleaser(o)])}this._drainUnlockWaiters()}_newReleaser(t){let r=!1;return()=>{r||(r=!0,this.release(t))}}_drainUnlockWaiters(){for(let t=this._value;t>0;t--)this._weightedWaiters[t-1]&&(this._weightedWaiters[t-1].forEach(r=>r()),this._weightedWaiters[t-1]=[])}},kpe=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},UA=class{constructor(t){this._semaphore=new Ik(1,t)}acquire(){return kpe(this,void 0,void 0,function*(){let[,t]=yield this._semaphore.acquire();return t})}runExclusive(t){return this._semaphore.runExclusive(()=>t())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}};p();y();var eF=e=>Buffer.from(e.replace("-","+").replace("_","/").replace(/=+$/,""),"base64");p();y();var DA=new Map;function Tpe(){DA.clear()}function tF(e){Tpe();let t=Date.now();DA.set(e,t)}var rF=async e=>{let t=Date.now(),r=DA.get(e)??0;if(t-r<xA)return!0;try{let o=(await er.headers({"Content-Type":"application/x-www-form-urlencoded"},{mergeHeaders:!1}).bearer(e).get(`${Xs()}/userinfo`)).status===200;return o&&DA.set(e,t),o}catch{return!1}};p();y();function z0(e,t="expected value not found"){if(e==null)throw new Error(t);return e}var nF=".phantom.auth",LA=`${nF}.tokens`,Ppe=`${nF}.authentication-factors`,Sg="/v1/authentication-keys",_pe=e=>({getUser:()=>j0(e),autoLogIn:()=>Rpe(e),logIn:t=>oF(e,t),isExistingAuthFactor:t=>iF(e,t),getAuthenticationKeys:()=>Ope(e),getLocalAuthenticationPublicKeys:()=>Npe(e),addAuthFactor:t=>Upe(e,t),deleteAuthFactor:t=>Dpe(e,t),deleteAllAuthFactors:()=>Lpe(e),logOut:()=>Kpe(e)}),Bpe=new UA,Cpe=(e,t)=>e.runExclusive?.(t)??Bpe.runExclusive(t),kk=e=>{let t=e.idToken.split(".");if(t.length!==3)throw new Error("Malformed ID token. Expected 3 period-delimited parts to ID token.");let r;try{let n=eF(t[1]).toString("utf-8"),i=JSON.parse(n);r=AK.parse(i)}catch{throw new Error("Unable to parse ID token payload.")}return{accessToken:e.accessToken,userID:r.sub,email:r.email}},j0=e=>Cpe(e,async()=>{let{storage:t,authConfig:r}=e,n=await t.get(LA);if(!n)return null;if(await rF(n.accessToken))return kk(n);if(n.refreshToken)try{let i=await XK(r,n.refreshToken);return await t.set(LA,i),tF(i.accessToken),kk(i)}catch(i){return se.addBreadcrumb("Failed to refresh access token using refreshToken","Auth","error"),se.captureError(i,"Auth"),null}return null}),iF=async(e,t)=>{let r=Xs(),n=z0(e.signer,"Signer is required for key-based auth.");try{let i=await n.getAuthenticationPublicKey(t),o=xg(),s=await n.sign(o,t),{data:a}=await er.get(`${r}${Sg}`,{params:{token:N0(s)}}),c=tk.safeParse(a);return c.success?(c.data.authenticationKeys??[]).some(l=>l.publicKey===i):!1}catch{return!1}},Mpe=async(e,t)=>{if(t.secretIdentifier)return t.secretIdentifier;let r=await z0(e.signer).getAllSecretIdentifiers();for(let n of r)if(await iF(e,n))return n;throw new Error("Unable to log in with key-based auth. No auth factor found for login.")},oF=async(e,t)=>{let{storage:r,authConfig:n}=e,i,{type:o}=t;switch(o){case"key":{let s=await Mpe(e,t),a=z0(e.signer,"Signer is required for key-based auth."),c=xg(),u=await a.sign(c,s);i=await Ag(n,{type:o,clientJWT:u});break}case"email":{i=await Ag(n,{type:o,prompt:t.prompt,provider:t.provider});break}case"session":{i=await Ag(n,{type:o,existingAccessToken:t.accessToken});break}}return await r.set(LA,i),kk(i)},Rpe=async e=>{let t=await j0(e);if(!t)se.addBreadcrumb("account","Unable to get user from storage or refresh, continuing with full auth flow.","info");else return t;try{return e.signer?await oF(e,{type:"key"}):null}catch(r){return se.captureError(r,"account"),null}},Ope=async e=>({authenticationPublicKeys:(await sF(e)).map(r=>r.publicKey)}),sF=async e=>{let t=Xs(),r=await j0(e);if(!r)throw new Error("User not authenticated.");let{data:n}=await er.bearer(r.accessToken).get(`${t}${Sg}`),i=tk.safeParse(n);if(!i.success)throw new Error("Unable to parse auth factors response.");return i.data.authenticationKeys??[]},Npe=async e=>{try{let t=z0(e.signer,"Signer is required for key-based auth."),r=await t.getAllSecretIdentifiers(),n={};for(let i of r)n[i]=await t.getAuthenticationPublicKey(i);return n}catch(t){return se.captureError(t,"account"),{}}},Upe=async(e,{secretIdentifier:t})=>{let r=Xs(),n=z0(e.signer,"Signer is required for key-based auth."),i=await j0(e);if(!i)throw new Error("User not authenticated.");let o=xg(),s=await n.sign(o,t);await er.bearer(i.accessToken).post(`${r}${Sg}`,{jwt:N0(s)})},Dpe=async(e,{authenticationPublicKey:t})=>{let r=Xs(),n=await j0(e);if(!n)throw new Error("User not authenticated.");await er.bearer(n.accessToken).delete(`${r}${Sg}/${encodeURIComponent(t)}`)},Lpe=async e=>{let t=Xs(),r=e.storage,n=await j0(e);if(!n)throw new Error("User not authenticated.");let i=await sF(e);await Promise.all(i.map(o=>er.bearer(n.accessToken).delete(`${t}${Sg}/${o.id}`))),await r.remove(Ppe)},Kpe=async({storage:e})=>{await e.remove(LA)};p();y();var Fpe=(e,t)=>{let r=new URL(t);if(!r.toString().startsWith(e))throw new Error("Unexpected redirectURL. RedirectURL from auth flow must match local redirect URL.");let n=r.searchParams.get("code");if(!n)throw new Error("No authorization code");return n};p();y();var Vpe=(e,t)=>{let r=new URL(t);if(!r.toString().startsWith(e))throw new Error("Unexpected redirectURL. RedirectURL from auth flow must match local redirect URL.");let n=r.searchParams.get("error"),i=r.searchParams.get("error_description");if(n)throw new Error(`${n}: ${i}`,{cause:n});return!1};p();y();var qpe=()=>yl()==="https://api.phantom.app"?bA.prod:bA.staging;p();y();p();y();var aF="@phantom/auth",ru={user:["auth",`${aF}:user`],authFactors:["auth",`${aF}:user-auth-factors`]};var Hpe=Ns({minutes:5}),gd=()=>{let e=Ki(),t=ru.user;return Bt({queryKey:t,queryFn:async()=>{let n=await e.autoLogIn();if(!n)throw new Error("Unable to automatically log in with key-based auth.");return n},retryOnMount:!1,gcTime:xA,staleTime:Hpe})};p();y();var Tk=()=>{let e=Ki(),t=ru.authFactors;return Bt({queryKey:t,queryFn:async()=>{let n=await e.getLocalAuthenticationPublicKeys();if(!n)throw new Error("Unable to build local AuthFactors!");let i=[];try{let{authenticationPublicKeys:s=[]}=await e.getAuthenticationKeys();i=s}catch(s){s instanceof Error&&se.addBreadcrumb("Auth",`Unable to fetch AuthFactors: ${s.message}`,"error")}let o={};for(let[s,a]of Object.entries(n)){let c=i.includes(a);!c&&await e.isExistingAuthFactor(s)||(o[s]={authenticationPublicKey:a,isExistingAuthFactor:c})}return o},retryOnMount:!1})};p();y();p();y();var Pk=async e=>{await e.removeQueries({queryKey:ru.user})},_k=async e=>{await e.resetQueries({queryKey:ru.user})},Eg=async e=>{await e.invalidateQueries({queryKey:ru.user})},KA=async e=>{await e.invalidateQueries({queryKey:ru.authFactors})};var Wpe=()=>{let e=ve(),t=Ki(),r=async({secretIdentifier:n})=>{await t.addAuthFactor({secretIdentifier:n}),await KA(e)};return Ae({mutationFn:async n=>{try{return await r(n)}catch(i){se.addBreadcrumb("Auth",`Could not add auth factor: ${n.secretIdentifier}`,"error");let o;throw i instanceof Error?o=i:o=new Error(`Could not add auth factor: ${n.secretIdentifier}`),se.captureError(o,"Auth"),o}}})};p();y();var zpe=()=>{let e=ve(),t=Ki(),r=async({authenticationPublicKey:n})=>{await t.deleteAuthFactor({authenticationPublicKey:n}),await KA(e)};return Ae({mutationFn:async n=>{try{return await r(n)}catch(i){se.addBreadcrumb("Auth","Could not remove auth factor!","error");let o;throw i instanceof Error?o=i:o=new Error("Could not remove auth factor!"),se.captureError(o,"Auth"),o}}})};p();y();var bd=()=>{let{data:e}=gd();return!!e};p();y();var jpe=()=>{let{data:e}=gd();return e?.accessToken};p();y();p();y();p();y();var G0=X(Br()),cF=(0,G0.createContext)(null);function Gpe({children:e,analytics:t}){return G0.default.createElement(cF.Provider,{value:t},e)}function ii(){let e=(0,G0.useContext)(cF);if(!e)throw new Error("useAnalytics must be used within a AnalyticsProvider");return e}p();y();p();y();var Ig=wu(ii,e=>new FA(e)),FA=class{#e;constructor(t){this.#e=t}onClaimFlowStart(){this.#e.capture("userUsernameClaimFlowStart")}onCheckAvailability(t,r){this.#e.capture("userUsernameCheckAvailability",{data:{username:t,isAvailable:r}})}onAvatarSaved(t){this.#e.capture("userUsernameClaimFlowAvatarSaved",{data:{avatarType:t}})}onAnonymousAuthSaved(t,r){this.#e.capture("userUsernameClaimFlowAnonymousAuthSaved",{data:{numAuthFactorsSaved:t,numAuthFactorsShown:r}})}onLinkWalletsSaved(t,r){this.#e.capture("userUsernameClaimFlowLinkWalletsSaved",{data:{numWalletsSaved:t,numWalletsShown:r}})}onPublicAddressesSaved(){this.#e.capture("userUsernameClaimFlowPublicAddressesSaved")}onClaimFlowComplete(t,r){this.#e.capture("userUsernameClaimComplete",{data:{username:t,authUserID:r}})}};p();y();var $0=X(Br()),uF=(0,$0.createContext)(null);function $pe({children:e,userRepository:t,claimUsernameSigner:r}){return $0.default.createElement(uF.Provider,{value:{userRepository:t,claimUsernameSigner:r}},e)}function fF(){let e=(0,$0.useContext)(uF);if(!e)throw new Error("useUserContext must be used within a UserProvider");return e}function zt(){return fF().userRepository}function lF(){return fF().claimUsernameSigner}p();y();p();y();var kg="@phantom/users",Un={checkUsernameAvailability(e){return["user",`${kg}:check-username-availability`,{username:e}]},userProfile(){return["user",`${kg}:user-profile`]},userProfileAttributeEffect(e){return["user",`${kg}:user-profile-attribute-effect`,{username:e}]},userSyncedAccounts(){return["user",`${kg}:user-synced-accounts`]}};var Ype=Ns({days:1}),Jpe=Ns({minutes:1});function nu(){let e=zt(),t=bd(),r=Un.userProfile();return Bt({enabled:t,queryKey:r,queryFn:async()=>{let i=await e.getUserProfile();if(!i)throw new Error("No user profile.");return i},gcTime:Ype,staleTime:Jpe})}p();y();p();y();p();y();var Y0=(e,t)=>t?`/user/v1/users/${e}/wallet-accounts/${t}`:`/user/v1/users/${e}/wallet-accounts`,Tg=e=>`/user/v1/users/${e}/profile`,Bk=e=>`/user/v1/profiles/${e}`,dF=()=>"/user/v1/profiles/creation-check",hF=e=>`/v1/actors-search?query=${encodeURIComponent(e)}`,pF=["seed","seedless","privateKey"],Zpe=(e,t)=>{let r=e[0],n=t[0],i=ae.isNetworkID(r),o=ae.isNetworkID(n);return i&&o?ae.compareNetworkID(r,n):i?-1:o?1:0},Ck=10,yF=500,Pg={seedless:1,seed:2,privateKey:3};p();y();var Mk=async e=>{await e.removeQueries({queryKey:Un.userProfile()})},Rk=async e=>{await e.resetQueries({queryKey:Un.userProfile()})},xd=async e=>{await e.invalidateQueries({queryKey:Un.userProfile()})},Ok=async e=>{await e.removeQueries({queryKey:Un.userSyncedAccounts()})},Qpe=async e=>{await e.resetQueries({queryKey:Un.userSyncedAccounts()})},ea=async e=>{await e.invalidateQueries({queryKey:Un.userSyncedAccounts()})};p();y();var VA=O.string().regex(/^https?:\/\/.+$/),qA=O.string(),Nk=O.literal("privateKey"),Xpe=O.object({networkId:Nf,publicKey:ch,address:rB,pathType:Em.or(Nk)}),eye=O.object({networkId:Of,publicKey:ch,address:ba,pathType:Sm.or(Nk)}),tye=O.object({networkId:Mf,publicKey:ch,address:O.string(),pathType:Am.or(Nk)}),rye=O.union([Xpe,eye,tye]),mF=O.object({accountHash:O.string(),accountOrigin:O.string().regex(/^(seed|privateKey|seedless):(.+)/).catch("readOnly"),name:O.string().nullish().default(null).catch(null),icon:O.union([VA,qA]).nullish().default(null).catch(null),derivationIndex:O.number().nullish().default(null).catch(null),addresses:O.array(rye).min(1)}),nye=mF.and(O.object({id:O.string()})),HA=O.object({walletAccounts:O.array(nye)}),DWe=O.record(O.string(),mF);p();y();var J0=e=>{for(let t of pF)if(e.accountOrigin?.split(":")[0]===t)return t;return null},Vf=e=>e.accountOrigin?.replace("seed:","")?.replace("privateKey:","")?.replace("seedless:",""),gF=(e=[])=>e.sort((t,r)=>{let n=J0(t),i=J0(r);if(n===null&&i===null)return 0;if(n===null)return 1;if(i===null)return-1;if(Pg[n]-Pg[i]!==0)return Pg[n]-Pg[i];let o=Vf(t),s=Vf(r);if(o===null&&s===null)return 0;if(o===null)return 1;if(s===null)return-1;let a=o.localeCompare(s);return a!==0?a:t.derivationIndex===null&&r.derivationIndex===null?0:t.derivationIndex===null?1:r.derivationIndex===null?-1:t.derivationIndex-r.derivationIndex});p();y();var Z0=(i=>(i.PUBLIC="public",i.PRIVATE="private",i.INVISIBLE="invisible",i.HIDDEN="hidden",i))(Z0||{}),iye=Object.values(Z0),wF=O.string().brand("ProfileId"),Uk=O.object({id:wF,username:O.string(),icon:O.string().nullish(),addresses:O.record(O.string(),O.string()),privacyState:O.nativeEnum(Z0).optional().default("public"),biography:O.string().nullish(),phantomJoinDate:O.string().nullish()}),Dk=O.string().url().brand("ActorId"),oye=O.object({id:O.string().optional(),orderedItems:Dk.array(),next:O.string().optional()}),bF=O.object({id:O.string().url(),current:oye.optional(),totalItems:O.number().optional()}),xF=O.object({type:O.string(),value:O.string(),name:O.string()}),sye=O.object({id:O.string().url().optional(),name:O.string().optional(),type:O.string()}),vF=O.object({id:Dk,name:O.string(),preferredUsername:O.string(),manuallyApprovesFollowers:O.boolean(),followers:O.union([bF,O.string().url()]),following:O.union([bF,O.string().url()]),icon:sye,attachment:O.union([xF,O.array(xF)]).optional(),summary:O.string().nullish(),published:O.string().nullish()}).transform(e=>{let{attachment:t,...r}=e,n={},i=!1,o=!1,s=!1,a=!1;if(t){let c=Array.isArray(t)?t:[t];for(let u of c){if(u.name.endsWith(":address")){let h=Qc.safeParse(u.name.replace(":address",""));if(h.success){let l=h.data;n[l]=u.value}}u.name==="requesting"&&(i=u.value==="true"),u.name==="requestedBy"&&(o=u.value==="true"),u.name==="blocking"&&(s=u.value==="true"),u.name==="following"&&(a=u.value==="true")}}return{...r,addresses:n,isSentFollowRequestPending:i,hasPendingFollowRequest:o,isBlocking:s,isFollowing:a}}),AF=O.object({actors:vF.array()}),_g={Image:"image",Emoji:"emoji",ReadOnlyDefault:"read-only-default",Default:"default"},GWe=O.object({type:O.nativeEnum(_g),imageUrl:O.string().optional(),unicode:O.string().optional()}),Lk=O.object({error:O.object({message:O.string()})});var aye=e=>({getUsernameAvailability:t=>cye(t),getUserProfile:()=>uye(e),getUserProfileByUsername:t=>SF(t),getUserProfileByUsernameOrUserProfileId:t=>SF(t),searchForActor:(t,r)=>xye(t,r),setUserProfile:({username:t,addresses:r,icon:n,signedMessages:i,privacyState:o})=>fye(e,{username:t,addresses:r,signedMessages:i,icon:n,privacyState:o}),patchUserProfile:t=>lye(e,t),deleteUserProfile:()=>dye(e),isEligibleToClaim:t=>hye(t),getSyncedAccounts:()=>Kk(e),downloadSyncedAccounts:()=>pye(e),uploadSyncedAccounts:t=>yye(e,t),uploadSyncedAccount:t=>mye(e,t),deleteSyncedAccounts:()=>gye(e),deleteSyncedAccount:t=>bye(e,t)}),cye=async e=>{switch((await er.api().get(Bk(e))).status){case 200:return!1;case 403:return!1;case 404:return!0;default:throw new Error("Failed to check for username availability.")}},uye=async({authRepository:e})=>{let t=await e.getUser();if(!t)throw new Error("User is not logged in, unable to get user profile.");let{userID:r,accessToken:n}=t,i=await er.api().bearer(n).get(Tg(r)),o=Uk.safeParse(i.data);return o.success?o.data:null},SF=async e=>{let t=await er.api().get(Bk(e)),r=Uk.safeParse(t.data);return r.success?r.data:null},fye=async({authRepository:e},{username:t,addresses:r,icon:n,signedMessages:i,privacyState:o})=>{let s=await e.getUser();if(!s)throw new Error("User is not logged in, unable to claim username.");let{userID:a,accessToken:c}=s,u=await er.api().bearer(c).post(Tg(a),{username:t,signedMessages:i,icon:n,addresses:r,privacyState:o});if(u.status===201)return;let h=Lk.safeParse(u.data);throw h.success?new Error(h.data.error.message):new Error("Unknown error")},lye=async({authRepository:e},{addresses:t,icon:r,privacyState:n,biography:i})=>{let o=await e.getUser();if(!o)throw new Error("User is not logged in, unable to claim username.");let{userID:s,accessToken:a}=o,c=await er.api().bearer(a).patch(Tg(s),{addresses:t,icon:r,privacyState:n,biography:i});if(c.status===200)return;se.captureMessage(`Failed to patch user profile: ${c.status} ${JSON.stringify(c.data)}`,"Auth");let u=Lk.safeParse(c.data);throw u.success?new Error(u.data.error.message):new Error("Unknown error")},dye=async({authRepository:e})=>{let t=await e.getUser();if(!t)throw new Error("User is not logged in, unable to sync down accounts.");let{userID:r,accessToken:n}=t,i=await er.api().bearer(n).delete(Tg(r));return 200<=i.status&&i.status<300},hye=async e=>{try{return(await er.api().post(dF(),{addresses:e})).status===200}catch{return!1}},Kk=async({authRepository:e})=>{let t=await e.getUser();if(!t)throw new Error("User is not logged in, unable to sync down accounts.");let{userID:r,accessToken:n}=t,i=await er.api().bearer(n).get(Y0(r)),o=HA.safeParse(i.data);if(!o.success)throw new Error("Unable to get synced accounts: unable to parse GET /wallet-accounts response.");return{walletAccounts:gF(o.data.walletAccounts)}},pye=async e=>{let{walletAccounts:t}=await Kk(e),r=t.reduce((n,i)=>(n[i.accountHash]=i,n),{});return await e.claimUsernameSigner.storeSyncedAccounts(r),!0},EF=(e,t,r)=>er.api().bearer(e).post(Y0(t),r),yye=async(e,t)=>{let{authRepository:r,claimUsernameSigner:n,queryClient:i}=e,o=await r.getUser();if(!o)return se.addBreadcrumb("Auth","User is not logged in, unable to sync up accounts.","info"),!1;try{let s=t;s||(se.addBreadcrumb("Auth","Uploading all currently synced accounts...","info"),s=[...(await Kk(e)).walletAccounts.reduce((x,A)=>(x.add(A.accountHash),x),new Set)]);let a=await n.getBatchAccountMetadata(s),{userID:c,accessToken:u}=o,h=IE(Object.values(a),Ck);for(let l of h)await Promise.all(l.map(g=>EF(u,c,g))),await bB(yF);return await ea(i),se.addBreadcrumb("Auth",`\u2705 Uploaded synced accounts: ${t?t?.join(" "):"all currently synced accounts"}`,"info"),!0}catch(s){throw se.addBreadcrumb("Auth",`Unable to sync up accounts: ${t?t?.join(" "):"all currently synced accounts"}`,"info"),se.captureError(s,"Auth"),s}},mye=async({authRepository:e,claimUsernameSigner:t,queryClient:r},n)=>{let i=await e.getUser();if(!i)return se.addBreadcrumb("Auth",`User is not logged in, unable to sync up account: ${n}`,"info"),!1;try{se.addBreadcrumb("Auth",`Syncing account... : ${n}`,"info");let o=await t.getAccountMetadata(n),{userID:s,accessToken:a}=i;return await EF(a,s,o),await ea(r),se.addBreadcrumb("Auth",`\u2705 Synced account: ${n}`,"info"),!0}catch(o){throw se.addBreadcrumb("Auth",`Unable to sync up account: ${n}`,"info"),se.captureError(o,"Auth"),o}},IF=(e,t,r)=>er.api().bearer(e).delete(Y0(t,r.id),r),gye=async({authRepository:e})=>{let t=await e.getUser();if(!t)throw new Error("User is not logged in, unable to delete all synced accounts.");let{userID:r,accessToken:n}=t,i=await er.api().bearer(n).get(Y0(r)),o=HA.safeParse(i.data);if(!o.success)throw new Error("Unable to delete all synced accounts => unable to parse GET /wallet-accounts response.");let s=IE(o.data.walletAccounts,Ck);for(let a of s)await Promise.all(a.map(c=>IF(n,r,c)));return!0},bye=async({authRepository:e},t)=>{let r=await e.getUser();if(!r)throw new Error(`User is not logged in, unable to remove synced account: ${t}`);let{userID:n,accessToken:i}=r,o=await er.api().bearer(i).get(Y0(n)),s=HA.safeParse(o.data);if(!s.success)throw new Error(`Unable to delete synced account [${t}] => unable to parse GET /wallet-accounts response`);let a=s.data.walletAccounts.find(c=>c.accountHash===t);if(!a)return se.addBreadcrumb("Auth",`Calling deleteSyncedAccount on account that is not synced to begin with: ${t}`,"info"),!1;try{await IF(i,n,a)}catch(c){throw se.addBreadcrumb("Auth",`Unable to delete synced account: ${t}`,"info"),se.captureError(c,"Auth"),c}return!0},xye=async(e,t)=>{se.addBreadcrumb("network","User is searching for actors.","info",{query:e});let r=await er.api().bearer(t).get(hF(e)),n=AF.safeParse(r.data);return n.success?{actors:n.data.actors}:{actors:[]}};p();y();var wye=new Set([Un.userProfile()[1],Un.userSyncedAccounts()[1]]),vye=e=>{let t=e.queryKey[1];return typeof t!="string"||!t?!1:wye.has(t)};p();y();function Aye(){let e=Ig(),t=Ki(),r=zt(),n=lF(),i=ve(),o=async({username:s,addresses:a,icon:c,secretIdentifiers:u,accountIdentifiers:h})=>{if(se.addBreadcrumb("Auth",`Claiming Username: ${s}.`,"info"),u.length===0)throw new Error("Unable to log in to claim a username. Select a secret identifier to use as an auth factor.");se.addBreadcrumb("Auth","Logging in with first auth factor","info");let l=await t.logIn({type:"key",secretIdentifier:u[0]});for(let x of u.slice(1))se.addBreadcrumb("Auth","Adding additional auth factor","info"),await t.addAuthFactor({secretIdentifier:x});se.addBreadcrumb("Auth","Signing over messages","info");let g=await n.signMessages(s);se.addBreadcrumb("Auth","Creating user profile to claim username","info"),await r.setUserProfile({username:s,addresses:a,icon:c,signedMessages:g,privacyState:"public"}),se.addBreadcrumb("Auth","Uploading Synced Accounts","info"),await r.uploadSyncedAccounts(h),se.addBreadcrumb("Auth","\u2705 Username Claimed!","info"),await _k(i),await Rk(i),await Eg(i),await xd(i),e.onClaimFlowComplete(s,l.userID)};return Ae({mutationFn:async s=>{try{return await o(s)}catch(a){se.addBreadcrumb("Auth","Could not claim username","error");let c;throw a instanceof Error?c=a:c=new Error("Unable to claim username"),se.captureError(c,"Auth"),c}}})}p();y();function Sye(e){let t=Ig(),r=zt(),n=Un.checkUsernameAvailability(e);return Bt({enabled:!!e,queryKey:n,queryFn:async()=>{let s=await r.getUsernameAvailability(e);return t.onCheckAvailability(e,s),s}})}p();y();var Eye=Ns({days:1}),Iye=Ns({minutes:1}),kF=e=>{let t=zt(),r=bd();return Bt({enabled:r,queryKey:Un.userSyncedAccounts(),queryFn:async()=>(await t.getSyncedAccounts()).walletAccounts,gcTime:Eye,staleTime:Iye,select:e})};p();y();var kye=()=>{let e=ve(),t=Ki(),r=zt();return Ae({mutationFn:async()=>{await r.deleteSyncedAccounts(),await r.deleteUserProfile(),await t.deleteAllAuthFactors(),await t.logOut(),await Ok(e),await Mk(e),await Pk(e),await ea(e),await xd(e),await Eg(e)}})};p();y();var Tye=()=>{let e=ve(),t=zt(),r=async n=>{await t.patchUserProfile(n),await xd(e)};return Ae({mutationFn:async n=>{try{return await r(n)}catch(i){se.addBreadcrumb("Auth",`Could not update user profile: ${JSON.stringify(n)}`,"error");let o;throw i instanceof Error?o=i:o=new Error("Could not update user profile!"),se.captureError(o,"Auth"),o}}})};p();y();p();y();var Pye=()=>{let e=ve(),t=zt(),r=async n=>{Array.isArray(n)?await t.uploadSyncedAccounts(n):await t.uploadSyncedAccount(n),await ea(e)};return Ae({mutationFn:async n=>{try{return await r(n)}catch(i){let o=Array.isArray(n)?n.join(" "):n;se.addBreadcrumb("Auth",`Could not add synced account: ${o}`,"error");let s;throw i instanceof Error?s=i:s=new Error("Could not add synced account!"),se.captureError(s,"Auth"),s}}})};p();y();var _ye=()=>{let e=ve(),t=zt(),r=async n=>{Array.isArray(n)?await Promise.all(n.map(i=>t.deleteSyncedAccount(i))):await t.deleteSyncedAccount(n),await ea(e)};return Ae({mutationFn:async n=>{try{return await r(n)}catch(i){let o=Array.isArray(n)?n.join(" "):n;se.addBreadcrumb("Auth",`Could not remove synced account: ${o}`,"error");let s;throw i instanceof Error?s=i:s=new Error("Could not remove synced account!"),se.captureError(s,"Auth"),s}}})};p();y();var Bye=()=>{let{data:e}=nu(),t=Gb(),r=e?.username;return Bt({queryKey:Un.userProfileAttributeEffect(r),queryFn:async()=>(r&&(Ec.setSubjectAttributes({username:r}),await t()),!0)}),r};p();y();var TF=X(Br());var Cye=/^https?:\/\/.+$/,Mye=()=>{let{data:e}=nu();return(0,TF.useMemo)(()=>PF(e),[e])},PF=e=>{if(!e?.icon)return{type:_g.Default};let t=e.icon;return t.match(Cye)?{type:_g.Image,imageUrl:t}:{type:_g.Emoji,unicode:t}};p();y();var _F=X(Br());var Rye=()=>{let{data:e}=nu();return(0,_F.useMemo)(()=>e?.privacyState??"public",[e?.privacyState])};p();y();var BF=X(Br());var Oye=()=>{let{data:e}=nu();return(0,BF.useMemo)(()=>e?.addresses,[e?.addresses])};p();y();p();y();var CF=X(Br());var Nye=0,Uye=e=>e!==null?e.split("@")[Nye]:null,Dye=async(e,t)=>{let r=await e.getUser();if(!r)throw new Error("no user");let n=await t.getUserProfile();return{userID:r.userID,username:n?.username??null,email:Uye(r.email??null)}},Lye=()=>{let e=Ki(),t=zt(),{data:r={}}=Tk();return(0,CF.useCallback)(async()=>{try{return{...await Dye(e,t),authFactors:r}}catch{return{userID:null,username:null,email:null,authFactors:r}}},[r,e,t])};p();y();var Kye=wu(ii,e=>new WA(e)),WA=class{#e;constructor(t){this.#e=t}onAvatarUpdated(t){this.#e.capture("userManageProfileAvatarUpdated",{data:{avatarType:t}})}onAuthFactorsUpdated(t,r){this.#e.capture("userManageProfileAuthFactorsUpdated",{data:{numAuthFactorsSaved:t,numAuthFactorsShown:r}})}onLinkedWalletsUpdated(t,r){this.#e.capture("userManageProfileLinkedWalletsUpdated",{data:{numWalletsSaved:t,numWalletsShown:r}})}onPrivacyStateUpdated(t){this.#e.capture("userManageProfilePrivacyStateUpdated",{data:{privacyState:t}})}onBiographyUpdated(){this.#e.capture("userManageProfileBiographyUpdated")}onPublicAddressesUpdated(t){this.#e.capture("userManageProfilePublicAddressesUpdated",{data:{networkIdsSaved:t}})}};p();y();p();y();p();y();p();y();var Fk=(e,t)=>{let r=Js(e,t);switch(r){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return mi.getDisplayName(r);default:return}};var MF={badge:(e,t,r)=>t.filter(hd).length<=1?"":Fk(e,r)??"",showAddressTypeExplainer:e=>e.filter(hd).length>1};p();y();var RF={badge:(e,t)=>{switch(e){case"eip155:41454":case"eip155:10143":return ae.getNetworkDefinition(e).shortName;case"eip155:143":return}},networkNameOverride:()=>"Monad"};var Vye=new pg({solana:{},ethereum:{},polygon:{isAdditionalNetwork:!0},base:{isAdditionalNetwork:!0},monad:RF,bitcoin:MF}),Vk=j4(Vye);p();y();var ZGe=O.string().regex(/^(root-derivation-path-group|(recommended|secondary|tertiary)-group:index-[0-9]+)$/,{message:"Invalid derivation path group."});p();y();p();y();var wt=(s=>(s.Seed="seed",s.PrivateKey="privateKey",s.Ledger="ledger",s.SeedVault="seedVault",s.ReadOnly="readOnly",s.Seedless="seedless",s))(wt||{}),qye=O.object({derivationIndex:O.number(),addresses:O.array(O.object({pathType:O.union([Sm,Em]),value:O.string()})),publicKeys:O.array(O.object({pathType:Am,value:O.string()}))}),$a=class extends Error{constructor(){super(...arguments);this.message="No account exists in storage for identifier"}},wd=class extends Error{constructor(){super(...arguments);this.message="No account exists in storage for identifier"}},qf=class extends Error{constructor(){super(...arguments);this.message="Address type not found or incompatible with account"}},Bg=class extends Error{constructor(){super(...arguments);this.message="Hardware wallet account does not have known secr*ts"}},Cg=class extends Error{constructor(){super(...arguments);this.message="Read only account does not have known secr*ts"}},Mg=class extends Error{constructor(){super(...arguments);this.message="Invalid configuration for read only account"}},vd=class extends Error{constructor(){super(...arguments);this.message="Seed already exists in storage"}},iu=class extends Error{constructor(){super(...arguments);this.message="No seed exists in storage for identifier"}},Rg=class extends Error{constructor(){super(...arguments);this.message="The derivation index is missing or invalid"}},Og=class extends Error{constructor(){super(...arguments);this.message="Private key already exists in storage"}},Ad=class extends Error{constructor(){super(...arguments);this.message="No private key exists in storage for identifier"}};var Ya=class extends Error{constructor(t,r){super(),this.message=`Account of type ${t} found in Vault, while trying to add ${r} account`}},zA=class extends Error{constructor(){super(...arguments);this.message="Vault already stores a seedless account"}},Hye=O.union([O.literal("unonboarded"),O.literal("unable-to-load-accounts")]),Wye=O.union([O.literal("invalid-identifier"),O.literal("fetch-integrity-storage-error"),O.literal("fetch-entropy-storage-error"),O.literal("fetch-pk-storage-error"),O.literal("invalid-entropy"),O.literal("invalid-pk-address-type"),O.literal("invalid-pk-identifier"),O.literal("invalid-pk"),O.literal("internal-error")]),zye=O.literal("safely-onboarded"),jye=O.union([O.object({status:Hye,isOnboarded:O.literal(!1),reonboardingNeeded:O.literal(!1)}),O.object({status:Wye,isOnboarded:O.literal(!0),reonboardingNeeded:O.literal(!0)}),O.object({status:zye,isOnboarded:O.literal(!0),reonboardingNeeded:O.literal(!1)})]);var Gye=(e,t,r,n)=>{let i=[];for(let o of t){let s=ae.getChainID(o);if(n.includes(s))for(let a of ae[s].addressTypes){if(!r.includes(a))continue;let c=e.chains[a];if(c)switch(c.chainType){case"eip155":case"solana":{i.push({networkID:o,addressType:a,address:c.address});break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{i.push({networkID:o,addressType:a,publicKey:c.publicKey,address:c.addresses[o]});break}default:be(c)}}}return i},$ye=(e,t,r,n)=>{let i=[];for(let o of t){let s=ae.getChainID(o);if(n.includes(s))for(let a of ae[s].addressTypes){if(!r.includes(a))continue;let c=e.chains[a];if(c)switch(c.chainType){case"eip155":case"solana":{i.push({networkID:o,addressType:a,address:c.address});break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{i.push({networkID:o,addressType:a,publicKey:c.publicKey,address:c.addresses[o]});break}default:be(c)}}}return i},Yye=(e,t,r,n)=>{let i=[];for(let o of t){let s=ae.getChainID(o);if(n.includes(s))for(let a of ae[s].addressTypes)r.includes(a)&&e.chainType===a&&i.push({networkID:o,addressType:a,address:e.address})}return i},Jye=(e,t,r,n)=>{let i=[];for(let o of t){let s=ae.getChainID(o);if(n.includes(s)){for(let a of ae[s].addressTypes)if(r.includes(a)&&e.chainType===a)switch(e.chainType){case"eip155":case"solana":{i.push({networkID:o,addressType:a,address:e.address});break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{i.push({networkID:o,addressType:a,publicKey:e.publicKey,address:e.addresses[o]});break}default:be(e)}}}return i},Zye=(e,t,r,n)=>{let i=[];for(let o of t){let s=ae.getChainID(o);if(n.includes(s)){for(let a of ae[s].addressTypes)if(r.includes(a))for(let[c,u]of Object.entries(e.addresses))c===a&&i.push({networkID:o,addressType:a,address:u})}}return i},Ng=(e,t,r,n,i,o)=>{let s;switch(o?s=Object.values(i.setting):s=t,s=s.sort((a,c)=>ae.compareNetworkID(a,c)),e.type){case"seedless":case"seed":return Gye(e,s,r,n);case"ledger":return $ye(e,s,r,n);case"seedVault":return Yye(e,s,r,n);case"privateKey":return Jye(e,s,r,n);case"readOnly":return Zye(e,s,r,n)}};p();y();p();y();var Q0="Trying to find a selected account, but there no accounts in the vault.",Ug="Missing ChainAvailability.",OF=(e,t)=>`No account found! Num accounts: ${e} | Identifier used: ${t}`,qk=new Error("The current account group has no valid bitcoin address"),Hk=new Error("The current account group has no valid EIP-155 address"),Wk=new Error("The current account group has no valid solana address"),NF=new Error("The current account group has no valid address or the the chain type was unsupported"),h$e=new Error("[Legacy Mn*monic Fetch] no legacy mn*monic in storage"),p$e=new Error("[Legacy Mn*monic Fetch] internal error fetching legacy mn*monic");p();y();var Qye=[".phantom-labs.account.accountMetadata","developerMode","networkSetting",".phantom-labs.account.selectedAccount","termsHaveBeenAcknowledged2"];var b$e=new Error("Failed to clear selected account index");async function zk(e){try{let t=await e.get(".phantom-labs.account.selectedAccount");return t?.version===2?t.identifier:null}catch{throw Xye}}var Xye=new Error("Failed to get selected account identifier");async function Fi(e,t){try{let r={version:2,identifier:t};return await e.set(".phantom-labs.account.selectedAccount",r)}catch{throw eme}}var eme=new Error("Failed to set selected account identifier");var ou=async(e,t)=>{if(e.length===0)throw new Error(Q0);let r=await zk(t),n=e.find(i=>i.identifier===r);return n||(await Fi(t,e[0].identifier),e[0])};p();y();var jk=e=>{switch(e){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":case"bip44Change":case"bip44Ethereum":return!0;case"bip44":case"deprecated":case"bip44Root":case"bip44RootEthereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":return!1}};p();y();var tme=({pathType:e,index:t})=>{switch(e){case"bip44RootEthereum":case"bip44Root":return"root-derivation-path-group";case"bip44Change":case"bip44Ethereum":case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":return`recommended-group:index-${t}`;case"bip44EthereumSecondary":case"bip44":return`secondary-group:index-${t}`;case"bip44EthereumTertiary":case"deprecated":return`tertiary-group:index-${t}`}};p();y();p();y();var rme=e=>e==null?!1:["ledger","seedVault"].includes(e);p();y();function UF(e,t){let n=(e?.addresses??[]).find(({addressType:i})=>i===t);if(!e?.addresses||!n)switch(t){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":throw qk;case"eip155":throw Hk;case"solana":throw Wk;default:throw NF}return n}function nme(e,t){return UF(e,t)?.address}var jA=e=>{switch(e.type){case"seedless":case"seed":case"privateKey":return!0;case"ledger":case"seedVault":case"readOnly":return!1;default:be(e)}};p();y();var ime=e=>{let t=e.toString();return mg(t)};p();y();function ome(e){let t=e.endsWith(".sol"),r=e==="@",n=e.startsWith("@")&&e.length>1;return[t,r,n]}p();y();function sme(e){return[e.endsWith(".eth")]}p();y();var ame=async(e,t,r)=>{let i=(await e.fetchAllAccounts()).find(s=>{switch(s.type){case"seed":case"seedless":return s.seedIdentifier===r;case"privateKey":return s.privateKeyIdentifier===r;case"ledger":case"seedVault":case"readOnly":return!1;default:be(s)}});if(!i)throw new Error("Unable to find account to sign client JWT with.");let o=await e.sign(i.identifier,{isJWT:!0,data:t});if(o.status==="error")throw new Error("Error signing over clientJWT.");if(!("signedJWT"in o)||!o.signedJWT)throw new Error("No JWT from vault signing.");return o.signedJWT};p();y();var cme=async e=>[...(await e.fetchAllAccounts()).reduce((i,o)=>{switch(o.type){case"seed":case"seedless":{i.add(o.seedIdentifier);break}case"privateKey":{i.add(o.privateKeyIdentifier);break}case"ledger":case"seedVault":case"readOnly":break;default:be(o);break}return i},new Set)];p();y();var pT=X(Os());p();y();p();y();function oi(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(T.NODE_ENV!=="production"){var i=mme[e],o=i?typeof i=="function"?i.apply(null,r):i:"unknown error nr: "+e;throw Error("[Immer] "+o)}throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function X0(e){return!!e&&!!e[Io]}function Ed(e){return!!e&&(function(t){if(!t||typeof t!="object")return!1;var r=Object.getPrototypeOf(t);if(r===null)return!0;var n=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===gme}(e)||Array.isArray(e)||!!e[WF]||!!e.constructor[WF]||rT(e)||nT(e))}function Lg(e,t,r){r===void 0&&(r=!1),tp(e)===0?(r?Object.keys:cT)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,i){return t(i,n,e)})}function tp(e){var t=e[Io];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:rT(e)?2:nT(e)?3:0}function Zk(e,t){return tp(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ume(e,t){return tp(e)===2?e.get(t):e[t]}function zF(e,t,r){var n=tp(e);n===2?e.set(t,r):n===3?(e.delete(t),e.add(r)):e[t]=r}function fme(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function rT(e){return pme&&e instanceof Map}function nT(e){return yme&&e instanceof Set}function Sd(e){return e.o||e.t}function iT(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=bme(e);delete t[Io];for(var r=cT(t),n=0;n<r.length;n++){var i=r[n],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function oT(e,t){return t===void 0&&(t=!1),sT(e)||X0(e)||!Ed(e)||(tp(e)>1&&(e.set=e.add=e.clear=e.delete=lme),Object.freeze(e),t&&Lg(e,function(r,n){return oT(n,!0)},!0)),e}function lme(){oi(2)}function sT(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Ja(e){var t=xme[e];return t||oi(18,e),t}function DF(){return T.NODE_ENV==="production"||ep||oi(0),ep}function Gk(e,t){t&&(Ja("Patches"),e.u=[],e.s=[],e.v=t)}function GA(e){Qk(e),e.p.forEach(dme),e.p=null}function Qk(e){e===ep&&(ep=e.l)}function LF(e){return ep={p:[],l:ep,h:e,m:!0,_:0}}function dme(e){var t=e[Io];t.i===0||t.i===1?t.j():t.O=!0}function $k(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.g||Ja("ES5").S(t,e,n),n?(r[Io].P&&(GA(t),oi(4)),Ed(e)&&(e=$A(t,e),t.l||YA(t,e)),t.u&&Ja("Patches").M(r[Io].t,e,t.u,t.s)):e=$A(t,r,[]),GA(t),t.u&&t.v(t.u,t.s),e!==jF?e:void 0}function $A(e,t,r){if(sT(t))return t;var n=t[Io];if(!n)return Lg(t,function(o,s){return KF(e,n,t,o,s,r)},!0),t;if(n.A!==e)return t;if(!n.P)return YA(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=iT(n.k):n.o;Lg(n.i===3?new Set(i):i,function(o,s){return KF(e,n,i,o,s,r)}),YA(e,i,!1),r&&e.u&&Ja("Patches").R(n,r,e.u,e.s)}return n.o}function KF(e,t,r,n,i,o){if(T.NODE_ENV!=="production"&&i===r&&oi(5),X0(i)){var s=$A(e,i,o&&t&&t.i!==3&&!Zk(t.D,n)?o.concat(n):void 0);if(zF(r,n,s),!X0(s))return;e.m=!1}if(Ed(i)&&!sT(i)){if(!e.h.F&&e._<1)return;$A(e,i),t&&t.A.l||YA(e,i)}}function YA(e,t,r){r===void 0&&(r=!1),e.h.F&&e.m&&oT(t,r)}function Yk(e,t){var r=e[Io];return(r?Sd(r):e)[t]}function FF(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function Xk(e){e.P||(e.P=!0,e.l&&Xk(e.l))}function Jk(e){e.o||(e.o=iT(e.t))}function eT(e,t,r){var n=rT(t)?Ja("MapSet").N(t,r):nT(t)?Ja("MapSet").T(t,r):e.g?function(i,o){var s=Array.isArray(i),a={i:s?1:0,A:o?o.A:DF(),P:!1,I:!1,D:{},l:o,t:i,k:null,o:null,j:null,C:!1},c=a,u=tT;s&&(c=[a],u=Dg);var h=Proxy.revocable(c,u),l=h.revoke,g=h.proxy;return a.k=g,a.j=l,g}(t,r):Ja("ES5").J(t,r);return(r?r.A:DF()).p.push(n),n}function hme(e){return X0(e)||oi(22,e),function t(r){if(!Ed(r))return r;var n,i=r[Io],o=tp(r);if(i){if(!i.P&&(i.i<4||!Ja("ES5").K(i)))return i.t;i.I=!0,n=VF(r,o),i.I=!1}else n=VF(r,o);return Lg(n,function(s,a){i&&ume(i.t,s)===a||zF(n,s,t(a))}),o===3?new Set(n):n}(e)}function VF(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return iT(e)}var qF,ep,aT=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",pme=typeof Map<"u",yme=typeof Set<"u",HF=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",jF=aT?Symbol.for("immer-nothing"):((qF={})["immer-nothing"]=!0,qF),WF=aT?Symbol.for("immer-draftable"):"__$immer_draftable",Io=aT?Symbol.for("immer-state"):"__$immer_state";var mme={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},gme=""+Object.prototype.constructor,cT=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,bme=Object.getOwnPropertyDescriptors||function(e){var t={};return cT(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},xme={},tT={get:function(e,t){if(t===Io)return e;var r=Sd(e);if(!Zk(r,t))return function(i,o,s){var a,c=FF(o,s);return c?"value"in c?c.value:(a=c.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,r,t);var n=r[t];return e.I||!Ed(n)?n:n===Yk(e.t,t)?(Jk(e),e.o[t]=eT(e.A.h,n,e)):n},has:function(e,t){return t in Sd(e)},ownKeys:function(e){return Reflect.ownKeys(Sd(e))},set:function(e,t,r){var n=FF(Sd(e),t);if(n?.set)return n.set.call(e.k,r),!0;if(!e.P){var i=Yk(Sd(e),t),o=i?.[Io];if(o&&o.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(fme(r,i)&&(r!==void 0||Zk(e.t,t)))return!0;Jk(e),Xk(e)}return e.o[t]===r&&typeof r!="number"&&(r!==void 0||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},deleteProperty:function(e,t){return Yk(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,Jk(e),Xk(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Sd(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){oi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){oi(12)}},Dg={};Lg(tT,function(e,t){Dg[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Dg.deleteProperty=function(e,t){return T.NODE_ENV!=="production"&&isNaN(parseInt(t))&&oi(13),Dg.set.call(this,e,t,void 0)},Dg.set=function(e,t,r){return T.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&oi(14),tT.set.call(this,e[0],t,r,e[0])};var wme=function(){function e(r){var n=this;this.g=HF,this.F=!0,this.produce=function(i,o,s){if(typeof i=="function"&&typeof o!="function"){var a=o;o=i;var c=n;return function(E){var B=this;E===void 0&&(E=a);for(var M=arguments.length,N=Array(M>1?M-1:0),R=1;R<M;R++)N[R-1]=arguments[R];return c.produce(E,function(V){var q;return(q=o).call.apply(q,[B,V].concat(N))})}}var u;if(typeof o!="function"&&oi(6),s!==void 0&&typeof s!="function"&&oi(7),Ed(i)){var h=LF(n),l=eT(n,i,void 0),g=!0;try{u=o(l),g=!1}finally{g?GA(h):Qk(h)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(E){return Gk(h,s),$k(E,h)},function(E){throw GA(h),E}):(Gk(h,s),$k(u,h))}if(!i||typeof i!="object"){if((u=o(i))===void 0&&(u=i),u===jF&&(u=void 0),n.F&&oT(u,!0),s){var x=[],A=[];Ja("Patches").M(i,u,x,A),s(x,A)}return u}oi(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(u){for(var h=arguments.length,l=Array(h>1?h-1:0),g=1;g<h;g++)l[g-1]=arguments[g];return n.produceWithPatches(u,function(x){return i.apply(void 0,[x].concat(l))})};var s,a,c=n.produce(i,o,function(u,h){s=u,a=h});return typeof Promise<"u"&&c instanceof Promise?c.then(function(u){return[u,s,a]}):[c,s,a]},typeof r?.useProxies=="boolean"&&this.setUseProxies(r.useProxies),typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){Ed(r)||oi(8),X0(r)&&(r=hme(r));var n=LF(this),i=eT(this,r,void 0);return i[Io].C=!0,Qk(n),i},t.finishDraft=function(r,n){var i=r&&r[Io];T.NODE_ENV!=="production"&&(i&&i.C||oi(9),i.I&&oi(10));var o=i.A;return Gk(o,n),$k(void 0,o)},t.setAutoFreeze=function(r){this.F=r},t.setUseProxies=function(r){r&&!HF&&oi(20),this.g=r},t.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var o=n[i];if(o.path.length===0&&o.op==="replace"){r=o.value;break}}i>-1&&(n=n.slice(i+1));var s=Ja("Patches").$;return X0(r)?s(r,n):this.produce(r,function(a){return s(a,n)})},e}(),ko=new wme,uT=ko.produce,yYe=ko.produceWithPatches.bind(ko),mYe=ko.setAutoFreeze.bind(ko),gYe=ko.setUseProxies.bind(ko),bYe=ko.applyPatches.bind(ko),xYe=ko.createDraft.bind(ko),wYe=ko.finishDraft.bind(ko),vYe=uT;var fT=new Error("Failed to add user account metadata to storage"),Kg=new Error("Could not find account metadata in storage");async function lT(e,t,r){let n=await e.get(".phantom-labs.account.accountMetadata");if(!n)throw Kg;let i=n.accounts[t];i?i.name=r:(i={name:r},n.accounts[t]=i),await e.set(".phantom-labs.account.accountMetadata",n)}async function dT(e,t,r){let n=await e.get(".phantom-labs.account.accountMetadata");if(!n)throw Kg;let i=n.accounts[t];i?i.icon=r:(i={icon:r,name:vu.t("onboardingImportAccountsAccountName",{walletIndex:""})},n.accounts[t]=i),await e.set(".phantom-labs.account.accountMetadata",n)}async function hT(e,t,r){let n=await e.get(".phantom-labs.account.accountMetadata");if(!n)throw Kg;let i=n.accounts[t];i?i.balance=r:(i={balance:r,name:vu.t("onboardingImportAccountsAccountName",{walletIndex:""})},n.accounts[t]=i),await e.set(".phantom-labs.account.accountMetadata",n)}async function Za(e,t,r){try{let n=await e.get(".phantom-labs.account.accountMetadata");n?n.accounts[t]=r:n={version:1,accounts:{[t]:r}},await e.set(".phantom-labs.account.accountMetadata",n)}catch{throw fT}}async function Fg(e,t){try{let r=await e.get(".phantom-labs.account.accountMetadata");r?r.accounts=uT(r.accounts,n=>{for(let[i,o]of Object.entries(t))n[i]||(n[i]={name:""}),n[i].name=o.name,n[i].icon=o.icon??n[i].icon,n[i].balance=o.balance??n[i].balance,n[i].connectedDevices=o.connectedDevices??n[i].connectedDevices}):r={version:1,accounts:{...t}},await e.set(".phantom-labs.account.accountMetadata",r)}catch{throw fT}}async function Vg(e,t){let r=await e.get(".phantom-labs.account.accountMetadata");r||(r={version:1,accounts:{}});let n=r.accounts[t];return n||(n={name:vu.t("onboardingImportAccountsAccountName",{walletIndex:""})}),n}async function qg(e){let t=await e.get(".phantom-labs.account.accountMetadata");return t?t.accounts:{}}async function Hg(e,t){let r=await e.get(".phantom-labs.account.accountMetadata");if(!r)throw Kg;delete r.accounts[t],await e.set(".phantom-labs.account.accountMetadata",r)}p();y();p();y();var rp=async e=>{let t=await e.get("networkSetting");return t?vme(e,t):yd},vme=async(e,t)=>{let r=!1;Ame(t)&&(r=!0);let n=t.setting.solana;n&&ae.isMainnetNetworkID(n)&&(t.setting.solana=mA,r=!0);let i=t.setting.eip155;return i&&ae.isMainnetNetworkID(i)&&(t.setting.eip155=gA,r=!0),r&&await e.set("networkSetting",t),t},Ame=e=>{let t=!1,r=e.setting.eip155;return r&&(r.toString()==="eip155:5"&&(e.setting.eip155=Kt.Ethereum.Sepolia,t=!0),r.toString()==="eip155:80001"&&(e.setting.eip155=Kt.Polygon.Amoy,t=!0)),t};var Id=async(e,t,r)=>{let n=await e.fetchAllAccounts();if(n.length===0)return[];let i=t.get("developerMode"),o=rp(t),s=qg(t),[a,c,u]=await Promise.all([i,o,s]);return n.map(h=>{let l=u[h.identifier];l||(l={name:vu.t("onboardingImportAccountsAccountName",{walletIndex:""})});let g={name:l.name,icon:l.icon,identifier:h.identifier,addresses:Ng(h,r.enabledMainnetOnlyNetworkIDs,r.enabledAddressTypes,r.enabledChainIDs,c??yd,a?.isDeveloperMode??!1)};return h.type==="seed"?{...g,type:"seed",seedIdentifier:h.seedIdentifier,isReadOnly:!1}:h.type==="seedless"?{...g,type:"seedless",seedIdentifier:h.seedIdentifier,isReadOnly:!1}:h.type==="readOnly"?{...g,type:"readOnly",isReadOnly:!0}:h.type==="privateKey"?{...g,privateKeyIdentifier:h.privateKeyIdentifier,type:"privateKey",isReadOnly:!1}:{...g,type:h.type,isReadOnly:!1}})};var GF=(e,t)=>{let r=Math.floor(Date.now()/1e3);return`Signing this message to claim username ${e} | Public Key: ${t} | Time: ${r}`},$F=(e,t)=>{let r=e.addresses.map(n=>{let i;switch(t.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":i=`0x${Buffer.from(t.publicKey).toString("hex")}`;break;case"solana":i=`0x${Buffer.from(pT.default.decode(t.address)).toString("hex")}`;break;case"eip155":i=t.address;break}return{networkId:n.networkID,pathType:"privateKey",publicKey:i,address:n.address}});return r.length===0?null:{accountHash:e.identifier,accountOrigin:`privateKey:${e.privateKeyIdentifier}`,derivationIndex:-1,name:e.name,icon:e.icon?.imageUrl??e.icon?.unicode??null,addresses:r}},YF=(e,t)=>{let r=[];for(let n of e.addresses){let i=t.chains[n.addressType];if(!i)continue;let o,s;switch(i.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{o=`0x${Buffer.from(i.publicKey).toString("hex")}`,s=i.addresses["bip122:000000000019d6689c085ae165831e93"];break}case"solana":o=`0x${Buffer.from(pT.default.decode(i.address)).toString("hex")}`,s=i.address;break;case"eip155":o=i.address,s=i.address;break}let a=null;switch(!0){case(F6(i.pathType)&&ae.isSolanaNetworkID(n.networkID)):a={publicKey:o,address:s,pathType:i.pathType,networkId:n.networkID};break;case(K6(i.pathType)&&ae.isEVMNetworkID(n.networkID)):a={publicKey:o,address:s,pathType:i.pathType,networkId:n.networkID};break;case(L6(i.pathType)&&ae.isBitcoinNetworkID(n.networkID)):a={publicKey:o,address:s,pathType:i.pathType,networkId:n.networkID};break}a&&r.push(a)}return{accountHash:e.identifier,accountOrigin:e.type==="seed"?`seed:${e.seedIdentifier}`:`seedless:${e.seedIdentifier}`,name:e.name,icon:e.icon?.imageUrl??e.icon?.unicode??null,derivationIndex:t.derivationIndex,addresses:r}},Sme=e=>{let t=VA.safeParse(e);if(t.success)return{type:"image",imageUrl:t.data};let r=qA.safeParse(e);return r.success?{type:"emoji",unicode:r.data}:{type:"default"}},Eme=async(e,t)=>{let r=Object.entries(t).reduce((n,[i,o])=>(n[i]={name:o.name??"",icon:Sme(o.icon)},n),{});await Fg(e,r)},Ime=(e,t)=>({signMessages:async r=>{let n=[],i=await pd(t),o=await Id(e,t,i);for(let s of o){if(!(s.type==="seed"||s.type==="privateKey"||s.type==="seedless"))continue;let a=s.identifier,c=s.addresses.find(l=>l.addressType==="solana");if(!c||c.addressType!=="solana")continue;let u=GF(r,c.address),h=await e.sign(a,{signingType:"message",chainType:c.addressType,message:GF(r,c.address)});h.status!=="error"&&n.push({networkID:c.networkID,address:c.address,message:u,signature:h.signature})}return n},getBatchAccountMetadata:async r=>{let n=new Set(r),i=await pd(t),o=await Id(e,t,i),s=(await e.fetchAllAccounts()).reduce((c,u)=>(c[u.identifier]=u,c),{}),a={};for(let c of o){if(!jA(c))continue;let u=s?.[c.identifier]??null,h=null;switch(c.type){case"seedless":case"seed":n.has(c.identifier)&&u.type===c.type&&(h=YF(c,u));break;case"privateKey":n.has(c.identifier)&&u.type===c.type&&(h=$F(c,u));break}h&&(a[c.identifier]=h)}return a},getAccountMetadata:async r=>{let n=await pd(t),i=await Id(e,t,n),o=(await e.fetchAllAccounts()).reduce((u,h)=>(u[h.identifier]=h,u),{}),s=i.find(u=>u.identifier===r)??null;if(!s)throw new Error(`Unable to get account metadata for account: ${r}`);if(!jA(s))throw new Error(`Syncing is not supported for account type: ${s.type}`);let a=o?.[s.identifier]??null,c=null;switch(s.type){case"seedless":case"seed":a.type===s.type&&(c=YF(s,a));break;case"privateKey":a.type===s.type&&(c=$F(s,a));break}if(!c)throw new Error(`Unable to construct metadata to sync for account: ${s.identifier}`);return c},storeSyncedAccounts:async r=>(se.addBreadcrumb("Auth",`Storing ${Object.entries(r).length} synced accounts`,"info"),await Eme(t,r),se.addBreadcrumb("Auth","\u2705 Stored Synced Account metadata","info"),await e.syncAccounts(r),se.addBreadcrumb("Auth","\u2705 Stored Sync Accounts in Vault","info"),!0)});p();y();var kme=(e,t)=>e.filter(r=>{switch(r.type){case"seed":case"seedless":return r.seedIdentifier===t;case"privateKey":return r.privateKeyIdentifier===t;case"ledger":case"seedVault":case"readOnly":return!1;default:be(r);return}});p();y();function Tme(e){return Vk.get(e).networkNameOverride?.(e)??ae.getNetworkName(e,!0)}p();y();p();y();function np(e,t){return typeof e=="string"?e===t:e.length===t.length&&e.every((r,n)=>r===t[n])}p();y();var Gg=X(DV());function tbe(e){return e=(0,Gg.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{switch(t.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{_d(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}default:be(t)}break}case"readOnly":break;case"ledger":case"seedless":case"seed":for(let r of Object.keys(t.chains)){let n=t.chains[r];if(n)switch(n.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{_d(n.publicKey)&&(n.publicKey=new Uint8Array(Buffer.from(n.publicKey)));break}default:be(n)}}break;case"seedVault":break;default:be(t)}}),e}function rbe(e){return e=(0,Gg.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{switch(t.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}default:be(t)}break}case"readOnly":break;case"ledger":case"seedless":case"seed":for(let r of Object.keys(t.chains)){let n=t.chains[r];if(n)switch(n.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{n.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(n.publicKey).toJSON());break}default:be(n)}}break;case"seedVault":break;default:be(t)}}),e}function LV(e){return e=(0,Gg.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{t.version===1&&_d(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}case"readOnly":break;case"ledger":case"seed":case"seedless":for(let r of Object.keys(t.chains))if(t.version===1&&_d(t.chains[r]?.publicKey)){let n=t.chains[r];n&&(n.publicKey=new Uint8Array(Buffer.from(n.publicKey)))}break;case"seedVault":break;default:be(t)}}),e}function KV(e){return e=(0,Gg.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{t.version===1&&t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}case"readOnly":break;case"ledger":case"seed":case"seedless":for(let r of Object.keys(t.chains))t.version===1&&t.chains[r]?.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(t.chains[r]?.publicKey).toJSON());break;case"seedVault":break;default:be(t)}}),e}function _d(e){return!!e&&typeof e=="object"&&kE("type",e)&&typeof e.type=="string"&&kE("data",e)&&Array.isArray(e.data)&&e.data.every(t=>!Number.isNaN(parseInt(t)))}p();y();var ta=".phantom-labs.vault";var o2=`${ta}.accounts`,cp=`${ta}.secrets`,s2=e=>`${ta}.privateKey.${e}`,a2=e=>`${ta}.seed.${e}`,c2=e=>`${ta}.seedless.${e}`,i2=`${ta}.integrityCheck`;async function pr(e){return(await $V(e))?.accounts??[]}async function qV(e){let t=await To(e),r=new Set(t.seedIdentifiers),n=await pr(e);for(let o of n)o.type==="seed"&&r.add(o.seedIdentifier);let i=[];for(let o of r)i.push({identifier:o});return i}async function u2(e){let t=await To(e),r=new Set(t.seedlessIdentifiers),n=await pr(e);for(let o of n)o.type==="seedless"&&r.add(o.seedIdentifier);let i=[];for(let o of r)i.push({identifier:o});return i}async function To(e){let t=await e.generalStorage.get(cp);return{privateKeyIdentifiers:t?.privateKeyIdentifiers??[],seedIdentifiers:t?.seedIdentifiers??[],seedlessIdentifiers:t?.seedlessIdentifiers??[]}}async function HV(e,t){let r=a2(t),n=await e.secretsStorage.getSecureValue(r);if(n===null){let i=c2(t);n=await e.secretsStorage.getSecureValue(i)}if(n==null)throw new iu;return _d(n.entropy)?n.entropy=new Uint8Array(Buffer.from(n.entropy)):n.entropy=new Uint8Array(Object.values(n.entropy)),n}async function up(e,t){let r=s2(t),n=await e.secretsStorage.getSecureValue(r);if(n==null)throw new Ad;return _d(n.privateKey)?n.privateKey=new Uint8Array(Buffer.from(n.privateKey)):n.privateKey=new Uint8Array(Object.values(n.privateKey)),n}async function Si(e,t,r=!0){let n=await $V(e);if(!n)n={version:1,accounts:[t]};else{let i=n.accounts,o=ibe(i,t);if(o.length>0){if(!r)throw new Ya(o[0].type,t.type);let s=VV(t.type);for(let c of o)if(VV(c.type)>=s)throw new Ya(c.type,t.type);let a=o.map(c=>c.identifier);return i=i.filter(c=>!a.includes(c.identifier)),i.push(t),await ra(e,i),await _T(e)}else i.push(t);n.accounts=i}return ra(e,n.accounts)}async function ra(e,t){let r={version:1,accounts:t};return e.generalStorage.set(o2,KV(r))}async function WV(e,t){let r=s2(t.identifier);await e.secretsStorage.setSecureValue(r,t),await abe(e,t.identifier)}async function zV(e,t){let r=a2(t.identifier);await e.secretsStorage.setSecureValue(r,t),await obe(e,t.identifier)}async function jV(e,t){let r=c2(t.identifier);await e.secretsStorage.setSecureValue(r,t),await sbe(e,t.identifier)}async function _T(e){let t=await pr(e),r=new Set,n=new Set;for(let a of t)switch(a.type){case"seed":case"seedless":r.add(a.seedIdentifier);break;case"privateKey":n.add(a.privateKeyIdentifier);break;case"ledger":case"readOnly":case"seedVault":break;default:be(a)}let i=await To(e),o={seedIdentifiers:i.seedIdentifiers.filter(a=>r.has(a)),seedlessIdentifiers:i.seedlessIdentifiers.filter(a=>r.has(a)),privateKeyIdentifiers:i.privateKeyIdentifiers.filter(a=>n.has(a))},s={seedIdentifiers:i.seedIdentifiers.filter(a=>!r.has(a)),seedlessIdentifiers:i.seedlessIdentifiers.filter(a=>!r.has(a)),privateKeyIdentifiers:i.privateKeyIdentifiers.filter(a=>!n.has(a))};await e.generalStorage.set(cp,{version:1,...o}),await e.secretsStorage.removeSecureValue([...s.seedIdentifiers.map(a=>a2(a)),...s.seedlessIdentifiers.map(a=>c2(a)),...s.privateKeyIdentifiers.map(a=>s2(a))])}async function BT(e,t){t?await e.secretsStorage.setSecureValue(i2,t):await e.secretsStorage.removeSecureValue(i2)}async function CT(e){return e.secretsStorage.getSecureValue(i2)}async function GV(e){await e.generalStorage.remove(o2);let t=await To(e),r=t.privateKeyIdentifiers.map(o=>s2(o)),n=t.seedIdentifiers.map(o=>a2(o)),i=t.seedlessIdentifiers.map(o=>c2(o));await e.secretsStorage.removeSecureValue([...r,...i,...n]),await e.generalStorage.remove(cp),await e.secretsStorage.removeSecureValue(i2),await e.secureCache.clear()}async function $V(e){let t=await e.generalStorage.get(o2);return t?(t=LV(t),t=await nbe(e,t),t):null}async function nbe(e,t){let r=!1;return t.accounts.forEach(n=>{switch(n.type){case"privateKey":{r=FV(n)||r;break}case"readOnly":break;case"ledger":case"seed":case"seedless":Object.values(n.chains).forEach(i=>{r=FV(i)||r});break;case"seedVault":break;default:be(n)}}),r&&await ra(e,t.accounts),t}function FV(e){let t=!1;switch(e.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{Object.values(an).forEach(r=>{if(e.addresses&&e.addresses[r])return;let n=ro({publicKey:e.publicKey,addressType:e.chainType,networkID:r});e.addresses={...e.addresses,[r]:n},t=!0});break}default:}return t}function ibe(e,t){let r=[],n=[];switch(t.type){case"seed":case"seedless":case"ledger":{Object.values(t.chains).forEach(o=>{switch(o.chainType){case"eip155":case"solana":{n.push(o.publicKey);break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{r.push(o.publicKey);break}default:be(o)}});break}case"readOnly":{Object.values(t.addresses).forEach(o=>{n.push(o)});break}case"privateKey":{switch(t.chainType){case"eip155":case"solana":{n.push(t.publicKey);break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{r.push(t.publicKey);break}default:be(t)}break}case"seedVault":{n.push(t.publicKey);break}default:(o=>{throw new Error("unknown account type")})(t)}let i=[];for(let o of e){let s;switch(o.type){case"seed":case"seedless":case"ledger":{s=Object.values(o.chains).some(a=>{switch(a.chainType){case"eip155":case"solana":return!!n.find(c=>np(c,a.publicKey));case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return!!r.find(c=>np(c,a.publicKey));default:be(a)}});break}case"readOnly":{s=Object.values(o.addresses).some(a=>!!n.find(c=>np(c,a)));break}case"privateKey":{s=!!n.find(a=>np(a,o.publicKey));break}case"seedVault":{s=!!n.find(a=>np(a,o.publicKey));break}default:(a=>{throw new Error("unknown account type")})(o)}s&&i.push(o)}return i}async function obe(e,t){let r=await To(e);return r.seedIdentifiers=[...new Set([...r.seedIdentifiers,t])],e.generalStorage.set(cp,{version:1,...r})}async function sbe(e,t){let r=await To(e);return r.seedlessIdentifiers=[...new Set([...r.seedlessIdentifiers,t])],e.generalStorage.set(cp,{version:1,...r})}async function abe(e,t){let r=await To(e);return r.privateKeyIdentifiers=[...new Set([...r.privateKeyIdentifiers,t])],e.generalStorage.set(cp,{version:1,...r})}function VV(e){switch(e){case"readOnly":return 1;case"privateKey":return 2;case"seedless":case"seed":return 3;case"ledger":return 4;case"seedVault":return 5;default:return 0}}p();y();p();y();var io=X(Qr());p();y();p();y();p();y();p();y();p();y();function YV(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function MT(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function JV(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");YV(e.outputLen),YV(e.blockLen)}function fp(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ZV(e,t){MT(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}p();y();p();y();var f2=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var QV=e=>e instanceof Uint8Array;var l2=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),na=(e,t)=>e<<32-t|e>>>t,cbe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!cbe)throw new Error("Non little-endian hardware is not supported");function ube(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function $g(e){if(typeof e=="string"&&(e=ube(e)),!QV(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function XV(...e){let t=new Uint8Array(e.reduce((n,i)=>n+i.length,0)),r=0;return e.forEach(n=>{if(!QV(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}var lp=class{clone(){return this._cloneInto()}},$Je={}.toString;function d2(e){let t=n=>e().update($g(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function h2(e=32){if(f2&&typeof f2.getRandomValues=="function")return f2.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function fbe(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var dp=class extends lp{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=l2(this.buffer)}update(t){fp(this);let{view:r,buffer:n,blockLen:i}=this;t=$g(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=l2(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){fp(this),ZV(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let l=s;l<i;l++)r[l]=0;fbe(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=l2(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,h[l],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};var lbe=(e,t,r)=>e&t^~e&r,dbe=(e,t,r)=>e&t^e&r^t&r,hbe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),zf=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),jf=new Uint32Array(64),RT=class extends dp{constructor(){super(64,32,8,!1),this.A=zf[0]|0,this.B=zf[1]|0,this.C=zf[2]|0,this.D=zf[3]|0,this.E=zf[4]|0,this.F=zf[5]|0,this.G=zf[6]|0,this.H=zf[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let l=0;l<16;l++,r+=4)jf[l]=t.getUint32(r,!1);for(let l=16;l<64;l++){let g=jf[l-15],x=jf[l-2],A=na(g,7)^na(g,18)^g>>>3,E=na(x,17)^na(x,19)^x>>>10;jf[l]=E+jf[l-7]+A+jf[l-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:h}=this;for(let l=0;l<64;l++){let g=na(a,6)^na(a,11)^na(a,25),x=h+g+lbe(a,c,u)+hbe[l]+jf[l]|0,E=(na(n,2)^na(n,13)^na(n,22))+dbe(n,i,o)|0;h=u,u=c,c=a,a=s+x|0,s=o,o=i,i=n,n=x+E|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,o,s,a,c,u,h)}roundClean(){jf.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Ei=d2(()=>new RT);p();y();var DT={};SE(DT,{bitGet:()=>wbe,bitLen:()=>xbe,bitMask:()=>Yg,bitSet:()=>vbe,bytesToHex:()=>Bd,bytesToNumberBE:()=>si,bytesToNumberLE:()=>m2,concatBytes:()=>cu,createHmacDrbg:()=>UT,ensureBytes:()=>gn,equalBytes:()=>gbe,hexToBytes:()=>Cd,hexToNumber:()=>NT,numberToBytesBE:()=>ia,numberToBytesLE:()=>g2,numberToHexUnpadded:()=>rq,numberToVarBytesBE:()=>mbe,utf8ToBytes:()=>bbe,validateObject:()=>Gf});p();y();var tq=BigInt(0),p2=BigInt(1),pbe=BigInt(2),y2=e=>e instanceof Uint8Array,ybe=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Bd(e){if(!y2(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=ybe[e[r]];return t}function rq(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function NT(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Cd(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let n=0;n<r.length;n++){let i=n*2,o=e.slice(i,i+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[n]=s}return r}function si(e){return NT(Bd(e))}function m2(e){if(!y2(e))throw new Error("Uint8Array expected");return NT(Bd(Uint8Array.from(e).reverse()))}function ia(e,t){return Cd(e.toString(16).padStart(t*2,"0"))}function g2(e,t){return ia(e,t).reverse()}function mbe(e){return Cd(rq(e))}function gn(e,t,r){let n;if(typeof t=="string")try{n=Cd(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else if(y2(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function cu(...e){let t=new Uint8Array(e.reduce((n,i)=>n+i.length,0)),r=0;return e.forEach(n=>{if(!y2(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}function gbe(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function bbe(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function xbe(e){let t;for(t=0;e>tq;e>>=p2,t+=1);return t}function wbe(e,t){return e>>BigInt(t)&p2}var vbe=(e,t,r)=>e|(r?p2:tq)<<BigInt(t),Yg=e=>(pbe<<BigInt(e-1))-p2,OT=e=>new Uint8Array(e),eq=e=>Uint8Array.from(e);function UT(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=OT(e),i=OT(e),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...l)=>r(i,n,...l),c=(l=OT())=>{i=a(eq([0]),l),n=a(),l.length!==0&&(i=a(eq([1]),l),n=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let l=0,g=[];for(;l<t;){n=a();let x=n.slice();g.push(x),l+=n.length}return cu(...g)};return(l,g)=>{s(),c(l);let x;for(;!(x=g(u()));)c();return s(),x}}var Abe={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Gf(e,t,r={}){let n=(i,o,s)=>{let a=Abe[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);let c=e[i];if(!(s&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${o}`)};for(let[i,o]of Object.entries(t))n(i,o,!1);for(let[i,o]of Object.entries(r))n(i,o,!0);return e}var xn=BigInt(0),Hr=BigInt(1),Md=BigInt(2),Sbe=BigInt(3),LT=BigInt(4),nq=BigInt(5),iq=BigInt(8),Ebe=BigInt(9),Ibe=BigInt(16);function bn(e,t){let r=e%t;return r>=xn?r:t+r}function kbe(e,t,r){if(r<=xn||t<xn)throw new Error("Expected power/modulo > 0");if(r===Hr)return xn;let n=Hr;for(;t>xn;)t&Hr&&(n=n*e%r),e=e*e%r,t>>=Hr;return n}function Po(e,t,r){let n=e;for(;t-- >xn;)n*=n,n%=r;return n}function b2(e,t){if(e===xn||t<=xn)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=bn(e,t),n=t,i=xn,o=Hr,s=Hr,a=xn;for(;r!==xn;){let u=n/r,h=n%r,l=i-s*u,g=o-a*u;n=r,r=h,i=s,o=a,s=l,a=g}if(n!==Hr)throw new Error("invert: does not exist");return bn(i,t)}function Tbe(e){let t=(e-Hr)/Md,r,n,i;for(r=e-Hr,n=0;r%Md===xn;r/=Md,n++);for(i=Md;i<e&&kbe(i,t,e)!==e-Hr;i++);if(n===1){let s=(e+Hr)/LT;return function(c,u){let h=c.pow(u,s);if(!c.eql(c.sqr(h),u))throw new Error("Cannot find square root");return h}}let o=(r+Hr)/Md;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,h=a.pow(a.mul(a.ONE,i),r),l=a.pow(c,o),g=a.pow(c,r);for(;!a.eql(g,a.ONE);){if(a.eql(g,a.ZERO))return a.ZERO;let x=1;for(let E=a.sqr(g);x<u&&!a.eql(E,a.ONE);x++)E=a.sqr(E);let A=a.pow(h,Hr<<BigInt(u-x-1));h=a.sqr(A),l=a.mul(l,A),g=a.mul(g,h),u=x}return l}}function Pbe(e){if(e%LT===Sbe){let t=(e+Hr)/LT;return function(n,i){let o=n.pow(i,t);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(e%iq===nq){let t=(e-nq)/iq;return function(n,i){let o=n.mul(i,Md),s=n.pow(o,t),a=n.mul(i,s),c=n.mul(n.mul(a,Md),s),u=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return e%Ibe,Tbe(e)}var _be=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function KT(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=_be.reduce((n,i)=>(n[i]="function",n),t);return Gf(e,r)}function Bbe(e,t,r){if(r<xn)throw new Error("Expected power > 0");if(r===xn)return e.ONE;if(r===Hr)return t;let n=e.ONE,i=t;for(;r>xn;)r&Hr&&(n=e.mul(n,i)),i=e.sqr(i),r>>=Hr;return n}function Cbe(e,t){let r=new Array(t.length),n=t.reduce((o,s,a)=>e.is0(s)?o:(r[a]=o,e.mul(o,s)),e.ONE),i=e.inv(n);return t.reduceRight((o,s,a)=>e.is0(s)?o:(r[a]=e.mul(o,r[a]),e.mul(o,s)),i),r}function FT(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function oq(e,t,r=!1,n={}){if(e<=xn)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:i,nByteLength:o}=FT(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=Pbe(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:Yg(i),ZERO:xn,ONE:Hr,create:c=>bn(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return xn<=c&&c<e},is0:c=>c===xn,isOdd:c=>(c&Hr)===Hr,neg:c=>bn(-c,e),eql:(c,u)=>c===u,sqr:c=>bn(c*c,e),add:(c,u)=>bn(c+u,e),sub:(c,u)=>bn(c-u,e),mul:(c,u)=>bn(c*u,e),pow:(c,u)=>Bbe(a,c,u),div:(c,u)=>bn(c*b2(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>b2(c,e),sqrt:n.sqrt||(c=>s(a,c)),invertBatch:c=>Cbe(a,c),cmov:(c,u,h)=>h?u:c,toBytes:c=>r?g2(c,o):ia(c,o),fromBytes:c=>{if(c.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${c.length}`);return r?m2(c):si(c)}});return Object.freeze(a)}function sq(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function VT(e){let t=sq(e);return t+Math.ceil(t/2)}function aq(e,t,r=!1){let n=e.length,i=sq(t),o=VT(t);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let s=r?si(e):m2(e),a=bn(s,t-Hr)+Hr;return r?g2(a,i):ia(a,i)}p();y();p();y();var Rbe=BigInt(0),qT=BigInt(1);function cq(e,t){let r=(i,o)=>{let s=o.negate();return i?s:o},n=i=>{let o=Math.ceil(t/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:r,unsafeLadder(i,o){let s=e.ZERO,a=i;for(;o>Rbe;)o&qT&&(s=s.add(a)),a=a.double(),o>>=qT;return s},precomputeWindow(i,o){let{windows:s,windowSize:a}=n(o),c=[],u=i,h=u;for(let l=0;l<s;l++){h=u,c.push(h);for(let g=1;g<a;g++)h=h.add(u),c.push(h);u=h.double()}return c},wNAF(i,o,s){let{windows:a,windowSize:c}=n(i),u=e.ZERO,h=e.BASE,l=BigInt(2**i-1),g=2**i,x=BigInt(i);for(let A=0;A<a;A++){let E=A*c,B=Number(s&l);s>>=x,B>c&&(B-=g,s+=qT);let M=E,N=E+Math.abs(B)-1,R=A%2!==0,V=B<0;B===0?h=h.add(r(R,o[M])):u=u.add(r(V,o[N]))}return{p:u,f:h}},wNAFCached(i,o,s,a){let c=i._WINDOW_SIZE||1,u=o.get(i);return u||(u=this.precomputeWindow(i,c),c!==1&&o.set(i,a(u))),this.wNAF(c,u,s)}}}function HT(e){return KT(e.Fp),Gf(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...FT(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function Obe(e){let t=HT(e);Gf(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}var{bytesToNumberBE:Nbe,hexToBytes:Ube}=DT,Rd={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=Rd;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Nbe(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=Rd,r=typeof e=="string"?Ube(e):e;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:i,l:o}=Rd._parseInt(r.subarray(2)),{d:s,l:a}=Rd._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(e){let t=u=>Number.parseInt(u[0],16)&8?"00"+u:u,r=u=>{let h=u.toString(16);return h.length&1?`0${h}`:h},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,s=i.length/2,a=r(o),c=r(s);return`30${r(s+o+4)}02${c}${i}02${a}${n}`}},uu=BigInt(0),cs=BigInt(1),vZe=BigInt(2),uq=BigInt(3),AZe=BigInt(4);function Dbe(e){let t=Obe(e),{Fp:r}=t,n=t.toBytes||((A,E,B)=>{let M=E.toAffine();return cu(Uint8Array.from([4]),r.toBytes(M.x),r.toBytes(M.y))}),i=t.fromBytes||(A=>{let E=A.subarray(1),B=r.fromBytes(E.subarray(0,r.BYTES)),M=r.fromBytes(E.subarray(r.BYTES,2*r.BYTES));return{x:B,y:M}});function o(A){let{a:E,b:B}=t,M=r.sqr(A),N=r.mul(M,A);return r.add(r.add(N,r.mul(A,E)),B)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(A){return typeof A=="bigint"&&uu<A&&A<t.n}function a(A){if(!s(A))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(A){let{allowedPrivateKeyLengths:E,nByteLength:B,wrapPrivateKey:M,n:N}=t;if(E&&typeof A!="bigint"){if(A instanceof Uint8Array&&(A=Bd(A)),typeof A!="string"||!E.includes(A.length))throw new Error("Invalid key");A=A.padStart(B*2,"0")}let R;try{R=typeof A=="bigint"?A:si(gn("private key",A,B))}catch{throw new Error(`private key must be ${B} bytes, hex or bigint, not ${typeof A}`)}return M&&(R=bn(R,N)),a(R),R}let u=new Map;function h(A){if(!(A instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(E,B,M){if(this.px=E,this.py=B,this.pz=M,E==null||!r.isValid(E))throw new Error("x required");if(B==null||!r.isValid(B))throw new Error("y required");if(M==null||!r.isValid(M))throw new Error("z required")}static fromAffine(E){let{x:B,y:M}=E||{};if(!E||!r.isValid(B)||!r.isValid(M))throw new Error("invalid affine point");if(E instanceof l)throw new Error("projective point not allowed");let N=R=>r.eql(R,r.ZERO);return N(B)&&N(M)?l.ZERO:new l(B,M,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(E){let B=r.invertBatch(E.map(M=>M.pz));return E.map((M,N)=>M.toAffine(B[N])).map(l.fromAffine)}static fromHex(E){let B=l.fromAffine(i(gn("pointHex",E)));return B.assertValidity(),B}static fromPrivateKey(E){return l.BASE.multiply(c(E))}_setWindowSize(E){this._WINDOW_SIZE=E,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:E,y:B}=this.toAffine();if(!r.isValid(E)||!r.isValid(B))throw new Error("bad point: x or y not FE");let M=r.sqr(B),N=o(E);if(!r.eql(M,N))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:E}=this.toAffine();if(r.isOdd)return!r.isOdd(E);throw new Error("Field doesn't support isOdd")}equals(E){h(E);let{px:B,py:M,pz:N}=this,{px:R,py:V,pz:q}=E,W=r.eql(r.mul(B,q),r.mul(R,N)),G=r.eql(r.mul(M,q),r.mul(V,N));return W&&G}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){let{a:E,b:B}=t,M=r.mul(B,uq),{px:N,py:R,pz:V}=this,q=r.ZERO,W=r.ZERO,G=r.ZERO,z=r.mul(N,N),te=r.mul(R,R),_=r.mul(V,V),f=r.mul(N,R);return f=r.add(f,f),G=r.mul(N,V),G=r.add(G,G),q=r.mul(E,G),W=r.mul(M,_),W=r.add(q,W),q=r.sub(te,W),W=r.add(te,W),W=r.mul(q,W),q=r.mul(f,q),G=r.mul(M,G),_=r.mul(E,_),f=r.sub(z,_),f=r.mul(E,f),f=r.add(f,G),G=r.add(z,z),z=r.add(G,z),z=r.add(z,_),z=r.mul(z,f),W=r.add(W,z),_=r.mul(R,V),_=r.add(_,_),z=r.mul(_,f),q=r.sub(q,z),G=r.mul(_,te),G=r.add(G,G),G=r.add(G,G),new l(q,W,G)}add(E){h(E);let{px:B,py:M,pz:N}=this,{px:R,py:V,pz:q}=E,W=r.ZERO,G=r.ZERO,z=r.ZERO,te=t.a,_=r.mul(t.b,uq),f=r.mul(B,R),m=r.mul(M,V),b=r.mul(N,q),v=r.add(B,M),w=r.add(R,V);v=r.mul(v,w),w=r.add(f,m),v=r.sub(v,w),w=r.add(B,N);let P=r.add(R,q);return w=r.mul(w,P),P=r.add(f,b),w=r.sub(w,P),P=r.add(M,N),W=r.add(V,q),P=r.mul(P,W),W=r.add(m,b),P=r.sub(P,W),z=r.mul(te,w),W=r.mul(_,b),z=r.add(W,z),W=r.sub(m,z),z=r.add(m,z),G=r.mul(W,z),m=r.add(f,f),m=r.add(m,f),b=r.mul(te,b),w=r.mul(_,w),m=r.add(m,b),b=r.sub(f,b),b=r.mul(te,b),w=r.add(w,b),f=r.mul(m,w),G=r.add(G,f),f=r.mul(P,w),W=r.mul(v,W),W=r.sub(W,f),f=r.mul(v,m),z=r.mul(P,z),z=r.add(z,f),new l(W,G,z)}subtract(E){return this.add(E.negate())}is0(){return this.equals(l.ZERO)}wNAF(E){return x.wNAFCached(this,u,E,B=>{let M=r.invertBatch(B.map(N=>N.pz));return B.map((N,R)=>N.toAffine(M[R])).map(l.fromAffine)})}multiplyUnsafe(E){let B=l.ZERO;if(E===uu)return B;if(a(E),E===cs)return this;let{endo:M}=t;if(!M)return x.unsafeLadder(this,E);let{k1neg:N,k1:R,k2neg:V,k2:q}=M.splitScalar(E),W=B,G=B,z=this;for(;R>uu||q>uu;)R&cs&&(W=W.add(z)),q&cs&&(G=G.add(z)),z=z.double(),R>>=cs,q>>=cs;return N&&(W=W.negate()),V&&(G=G.negate()),G=new l(r.mul(G.px,M.beta),G.py,G.pz),W.add(G)}multiply(E){a(E);let B=E,M,N,{endo:R}=t;if(R){let{k1neg:V,k1:q,k2neg:W,k2:G}=R.splitScalar(B),{p:z,f:te}=this.wNAF(q),{p:_,f}=this.wNAF(G);z=x.constTimeNegate(V,z),_=x.constTimeNegate(W,_),_=new l(r.mul(_.px,R.beta),_.py,_.pz),M=z.add(_),N=te.add(f)}else{let{p:V,f:q}=this.wNAF(B);M=V,N=q}return l.normalizeZ([M,N])[0]}multiplyAndAddUnsafe(E,B,M){let N=l.BASE,R=(q,W)=>W===uu||W===cs||!q.equals(N)?q.multiplyUnsafe(W):q.multiply(W),V=R(this,B).add(R(E,M));return V.is0()?void 0:V}toAffine(E){let{px:B,py:M,pz:N}=this,R=this.is0();E==null&&(E=R?r.ONE:r.inv(N));let V=r.mul(B,E),q=r.mul(M,E),W=r.mul(N,E);if(R)return{x:r.ZERO,y:r.ZERO};if(!r.eql(W,r.ONE))throw new Error("invZ was invalid");return{x:V,y:q}}isTorsionFree(){let{h:E,isTorsionFree:B}=t;if(E===cs)return!0;if(B)return B(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:E,clearCofactor:B}=t;return E===cs?this:B?B(l,this):this.multiplyUnsafe(t.h)}toRawBytes(E=!0){return this.assertValidity(),n(l,this,E)}toHex(E=!0){return Bd(this.toRawBytes(E))}}l.BASE=new l(t.Gx,t.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);let g=t.nBitLength,x=cq(l,t.endo?Math.ceil(g/2):g);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}function Lbe(e){let t=HT(e);return Gf(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function fq(e){let t=Lbe(e),{Fp:r,n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(w){return uu<w&&w<r.ORDER}function a(w){return bn(w,n)}function c(w){return b2(w,n)}let{ProjectivePoint:u,normPrivateKeyToScalar:h,weierstrassEquation:l,isWithinCurveOrder:g}=Dbe({...t,toBytes(w,P,C){let k=P.toAffine(),d=r.toBytes(k.x),S=cu;return C?S(Uint8Array.from([P.hasEvenY()?2:3]),d):S(Uint8Array.from([4]),d,r.toBytes(k.y))},fromBytes(w){let P=w.length,C=w[0],k=w.subarray(1);if(P===i&&(C===2||C===3)){let d=si(k);if(!s(d))throw new Error("Point is not on curve");let S=l(d),F=r.sqrt(S),U=(F&cs)===cs;return(C&1)===1!==U&&(F=r.neg(F)),{x:d,y:F}}else if(P===o&&C===4){let d=r.fromBytes(k.subarray(0,r.BYTES)),S=r.fromBytes(k.subarray(r.BYTES,2*r.BYTES));return{x:d,y:S}}else throw new Error(`Point of length ${P} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),x=w=>Bd(ia(w,t.nByteLength));function A(w){let P=n>>cs;return w>P}function E(w){return A(w)?a(-w):w}let B=(w,P,C)=>si(w.slice(P,C));class M{constructor(P,C,k){this.r=P,this.s=C,this.recovery=k,this.assertValidity()}static fromCompact(P){let C=t.nByteLength;return P=gn("compactSignature",P,C*2),new M(B(P,0,C),B(P,C,2*C))}static fromDER(P){let{r:C,s:k}=Rd.toSig(gn("DER",P));return new M(C,k)}assertValidity(){if(!g(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!g(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(P){return new M(this.r,this.s,P)}recoverPublicKey(P){let{r:C,s:k,recovery:d}=this,S=G(gn("msgHash",P));if(d==null||![0,1,2,3].includes(d))throw new Error("recovery id invalid");let F=d===2||d===3?C+t.n:C;if(F>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let U=d&1?"03":"02",D=u.fromHex(U+x(F)),Y=c(F),j=a(-S*Y),ee=a(k*Y),le=u.BASE.multiplyAndAddUnsafe(D,j,ee);if(!le)throw new Error("point at infinify");return le.assertValidity(),le}hasHighS(){return A(this.s)}normalizeS(){return this.hasHighS()?new M(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Cd(this.toDERHex())}toDERHex(){return Rd.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Cd(this.toCompactHex())}toCompactHex(){return x(this.r)+x(this.s)}}let N={isValidPrivateKey(w){try{return h(w),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{let w=VT(t.n);return aq(t.randomBytes(w),t.n)},precompute(w=8,P=u.BASE){return P._setWindowSize(w),P.multiply(BigInt(3)),P}};function R(w,P=!0){return u.fromPrivateKey(w).toRawBytes(P)}function V(w){let P=w instanceof Uint8Array,C=typeof w=="string",k=(P||C)&&w.length;return P?k===i||k===o:C?k===2*i||k===2*o:w instanceof u}function q(w,P,C=!0){if(V(w))throw new Error("first arg must be private key");if(!V(P))throw new Error("second arg must be public key");return u.fromHex(P).multiply(h(w)).toRawBytes(C)}let W=t.bits2int||function(w){let P=si(w),C=w.length*8-t.nBitLength;return C>0?P>>BigInt(C):P},G=t.bits2int_modN||function(w){return a(W(w))},z=Yg(t.nBitLength);function te(w){if(typeof w!="bigint")throw new Error("bigint expected");if(!(uu<=w&&w<z))throw new Error(`bigint expected < 2^${t.nBitLength}`);return ia(w,t.nByteLength)}function _(w,P,C=f){if(["recovered","canonical"].some(K=>K in C))throw new Error("sign() legacy options not supported");let{hash:k,randomBytes:d}=t,{lowS:S,prehash:F,extraEntropy:U}=C;S==null&&(S=!0),w=gn("msgHash",w),F&&(w=gn("prehashed msgHash",k(w)));let D=G(w),Y=h(P),j=[te(Y),te(D)];if(U!=null){let K=U===!0?d(r.BYTES):U;j.push(gn("extraEntropy",K))}let ee=cu(...j),le=D;function fe(K){let Z=W(K);if(!g(Z))return;let J=c(Z),ne=u.BASE.multiply(Z).toAffine(),pe=a(ne.x);if(pe===uu)return;let re=a(J*a(le+pe*Y));if(re===uu)return;let ce=(ne.x===pe?0:2)|Number(ne.y&cs),ut=re;return S&&A(re)&&(ut=E(re),ce^=1),new M(pe,ut,ce)}return{seed:ee,k2sig:fe}}let f={lowS:t.lowS,prehash:!1},m={lowS:t.lowS,prehash:!1};function b(w,P,C=f){let{seed:k,k2sig:d}=_(w,P,C),S=t;return UT(S.hash.outputLen,S.nByteLength,S.hmac)(k,d)}u.BASE._setWindowSize(8);function v(w,P,C,k=m){let d=w;if(P=gn("msgHash",P),C=gn("publicKey",C),"strict"in k)throw new Error("options.strict was renamed to lowS");let{lowS:S,prehash:F}=k,U,D;try{if(typeof d=="string"||d instanceof Uint8Array)try{U=M.fromDER(d)}catch(ne){if(!(ne instanceof Rd.Err))throw ne;U=M.fromCompact(d)}else if(typeof d=="object"&&typeof d.r=="bigint"&&typeof d.s=="bigint"){let{r:ne,s:pe}=d;U=new M(ne,pe)}else throw new Error("PARSE");D=u.fromHex(C)}catch(ne){if(ne.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(S&&U.hasHighS())return!1;F&&(P=t.hash(P));let{r:Y,s:j}=U,ee=G(P),le=c(j),fe=a(ee*le),K=a(Y*le),Z=u.BASE.multiplyAndAddUnsafe(D,fe,K)?.toAffine();return Z?a(Z.x)===Y:!1}return{CURVE:t,getPublicKey:R,getSharedSecret:q,sign:b,verify:v,ProjectivePoint:u,Signature:M,utils:N}}p();y();p();y();var x2=class extends lp{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,JV(t);let n=$g(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return fp(this),this.iHash.update(t),this}digestInto(t){fp(this),MT(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},WT=(e,t,r)=>new x2(e,t).update(r).digest();WT.create=(e,t)=>new x2(e,t);function Kbe(e){return{hash:e,hmac:(t,...r)=>WT(e,t,XV(...r)),randomBytes:h2}}function lq(e,t){let r=n=>fq({...e,...Kbe(n)});return Object.freeze({...r(t),create:r})}var S2=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),w2=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),pq=BigInt(1),v2=BigInt(2),dq=(e,t)=>(e+t/v2)/t;function yq(e){let t=S2,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,h=u*u*e%t,l=Po(h,r,t)*h%t,g=Po(l,r,t)*h%t,x=Po(g,v2,t)*u%t,A=Po(x,i,t)*x%t,E=Po(A,o,t)*A%t,B=Po(E,a,t)*E%t,M=Po(B,c,t)*B%t,N=Po(M,a,t)*E%t,R=Po(N,r,t)*h%t,V=Po(R,s,t)*A%t,q=Po(V,n,t)*u%t,W=Po(q,v2,t);if(!jT.eql(jT.sqr(W),e))throw new Error("Cannot find square root");return W}var jT=oq(S2,void 0,void 0,{sqrt:yq}),hp=lq({a:BigInt(0),b:BigInt(7),Fp:jT,n:w2,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=w2,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-pq*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=dq(o*e,t),c=dq(-n*e,t),u=bn(e-a*r-c*i,t),h=bn(-a*n-c*o,t),l=u>s,g=h>s;if(l&&(u=t-u),g&&(h=t-h),u>s||h>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:g,k2:h}}}},Ei),E2=BigInt(0),mq=e=>typeof e=="bigint"&&E2<e&&e<S2,Fbe=e=>typeof e=="bigint"&&E2<e&&e<w2,hq={};function A2(e,...t){let r=hq[e];if(r===void 0){let n=Ei(Uint8Array.from(e,i=>i.charCodeAt(0)));r=cu(n,n),hq[e]=r}return Ei(cu(r,...t))}var YT=e=>e.toRawBytes(!0).slice(1),GT=e=>ia(e,32),zT=e=>bn(e,S2),Jg=e=>bn(e,w2),JT=hp.ProjectivePoint,Vbe=(e,t,r)=>JT.BASE.multiplyAndAddUnsafe(e,t,r);function $T(e){let t=hp.utils.normPrivateKeyToScalar(e),r=JT.fromPrivateKey(t);return{scalar:r.hasEvenY()?t:Jg(-t),bytes:YT(r)}}function gq(e){if(!mq(e))throw new Error("bad x: need 0 < x < p");let t=zT(e*e),r=zT(t*e+BigInt(7)),n=yq(r);n%v2!==E2&&(n=zT(-n));let i=new JT(e,n,pq);return i.assertValidity(),i}function bq(...e){return Jg(si(A2("BIP0340/challenge",...e)))}function qbe(e){return $T(e).bytes}function Hbe(e,t,r=h2(32)){let n=gn("message",e),{bytes:i,scalar:o}=$T(t),s=gn("auxRand",r,32),a=GT(o^si(A2("BIP0340/aux",s))),c=A2("BIP0340/nonce",a,i,n),u=Jg(si(c));if(u===E2)throw new Error("sign failed: k is zero");let{bytes:h,scalar:l}=$T(u),g=bq(h,i,n),x=new Uint8Array(64);if(x.set(h,0),x.set(GT(Jg(l+g*o)),32),!xq(x,n,i))throw new Error("sign: Invalid signature produced");return x}function xq(e,t,r){let n=gn("signature",e,64),i=gn("message",t),o=gn("publicKey",r,32);try{let s=gq(si(o)),a=si(n.subarray(0,32));if(!mq(a))return!1;let c=si(n.subarray(32,64));if(!Fbe(c))return!1;let u=bq(GT(a),YT(s),i),h=Vbe(s,c,Jg(-u));return!(!h||!h.hasEvenY()||h.toAffine().x!==a)}catch{return!1}}var _o={getPublicKey:qbe,sign:Hbe,verify:xq,utils:{randomPrivateKey:hp.utils.randomPrivateKey,lift_x:gq,pointToBytes:YT,numberToBytesBE:ia,bytesToNumberBE:si,taggedHash:A2,mod:bn}};p();y();var Wbe=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),vq=Uint8Array.from({length:16},(e,t)=>t),zbe=vq.map(e=>(9*e+5)%16),QT=[vq],XT=[zbe];for(let e=0;e<4;e++)for(let t of[QT,XT])t.push(t[e].map(r=>Wbe[r]));var Aq=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),jbe=QT.map((e,t)=>e.map(r=>Aq[t][r])),Gbe=XT.map((e,t)=>e.map(r=>Aq[t][r])),$be=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Ybe=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),I2=(e,t)=>e<<t|e>>>32-t;function wq(e,t,r,n){return e===0?t^r^n:e===1?t&r|~t&n:e===2?(t|~r)^n:e===3?t&n|r&~n:t^(r|~n)}var k2=new Uint32Array(16),ZT=class extends dp{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:t,h1:r,h2:n,h3:i,h4:o}=this;return[t,r,n,i,o]}set(t,r,n,i,o){this.h0=t|0,this.h1=r|0,this.h2=n|0,this.h3=i|0,this.h4=o|0}process(t,r){for(let x=0;x<16;x++,r+=4)k2[x]=t.getUint32(r,!0);let n=this.h0|0,i=n,o=this.h1|0,s=o,a=this.h2|0,c=a,u=this.h3|0,h=u,l=this.h4|0,g=l;for(let x=0;x<5;x++){let A=4-x,E=$be[x],B=Ybe[x],M=QT[x],N=XT[x],R=jbe[x],V=Gbe[x];for(let q=0;q<16;q++){let W=I2(n+wq(x,o,a,u)+k2[M[q]]+E,R[q])+l|0;n=l,l=u,u=I2(a,10)|0,a=o,o=W}for(let q=0;q<16;q++){let W=I2(i+wq(A,s,c,h)+k2[N[q]]+B,V[q])+g|0;i=g,g=h,h=I2(c,10)|0,c=s,s=W}}this.set(this.h1+a+h|0,this.h2+u+g|0,this.h3+l+i|0,this.h4+n+s|0,this.h0+o+c|0)}roundClean(){k2.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}},Sq=d2(()=>new ZT);p();y();function pp(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function P2(...e){let t=(i,o)=>s=>i(o(s)),r=Array.from(e).reverse().reduce((i,o)=>i?t(i,o.encode):o.encode,void 0),n=e.reduce((i,o)=>i?t(i,o.decode):o.decode,void 0);return{encode:r,decode:n}}function rP(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(r=>{if(r<0||r>=e.length)throw new Error(`Digit index outside alphabet: ${r} (alphabet: ${e.length})`);return e[r]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(r=>{if(typeof r!="string")throw new Error(`alphabet.decode: not string element=${r}`);let n=e.indexOf(r);if(n===-1)throw new Error(`Unknown letter: "${r}". Allowed: ${e}`);return n})}}}function nP(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let r of t)if(typeof r!="string")throw new Error(`join.encode: non-string input=${r}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function Jbe(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function Eq(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let n=0,i=[],o=Array.from(e);for(o.forEach(s=>{if(s<0||s>=t)throw new Error(`Wrong integer: ${s}`)});;){let s=0,a=!0;for(let c=n;c<o.length;c++){let u=o[c],h=t*s+u;if(!Number.isSafeInteger(h)||t*s/t!==s||h-u!==t*s)throw new Error("convertRadix: carry overflow");s=h%r;let l=Math.floor(h/r);if(o[c]=l,!Number.isSafeInteger(l)||l*r+s!==h)throw new Error("convertRadix: carry overflow");if(a)l?a=!1:n=c;else continue}if(i.push(s),a)break}for(let s=0;s<e.length-1&&e[s]===0;s++)i.push(0);return i.reverse()}var Pq=(e,t)=>t?Pq(t,e%t):e,T2=(e,t)=>e+(t-Pq(e,t));function eP(e,t,r,n){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(T2(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${T2(t,r)}`);let i=0,o=0,s=2**r-1,a=[];for(let c of e){if(c>=2**t)throw new Error(`convertRadix2: invalid data word=${c} from=${t}`);if(i=i<<t|c,o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=r;o-=r)a.push((i>>o-r&s)>>>0);i&=2**o-1}if(i=i<<r-o&s,!n&&o>=t)throw new Error("Excess padding");if(!n&&i)throw new Error(`Non-zero padding: ${i}`);return n&&o>0&&a.push(i>>>0),a}function Zbe(e){return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return Eq(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(Eq(t,e,2**8))}}}function _q(e,t=!1){if(e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(T2(8,e)>32||T2(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return eP(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(eP(r,e,8,t))}}}function Iq(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}function Qbe(e,t){if(typeof t!="function")throw new Error("checksum fn should be function");return{encode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");let n=t(r).slice(0,e),i=new Uint8Array(r.length+e);return i.set(r),i.set(n,r.length),i},decode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");let n=r.slice(0,-e),i=t(n).slice(0,e),o=r.slice(-e);for(let s=0;s<e;s++)if(i[s]!==o[s])throw new Error("Invalid checksum");return n}}}var Xbe=e=>P2(Zbe(58),rP(e),nP("")),exe=Xbe("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var Bq=e=>P2(Qbe(4,t=>e(e(t))),exe),tP=P2(rP("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),nP("")),kq=[996825010,642813549,513874426,1027748829,705979059];function Zg(e){let t=e>>25,r=(e&33554431)<<5;for(let n=0;n<kq.length;n++)(t>>n&1)===1&&(r^=kq[n]);return r}function Tq(e,t,r=1){let n=e.length,i=1;for(let o=0;o<n;o++){let s=e.charCodeAt(o);if(s<33||s>126)throw new Error(`Invalid prefix (${e})`);i=Zg(i)^s>>5}i=Zg(i);for(let o=0;o<n;o++)i=Zg(i)^e.charCodeAt(o)&31;for(let o of t)i=Zg(i)^o;for(let o=0;o<6;o++)i=Zg(i);return i^=r,tP.encode(eP([i%2**30],30,5,!1))}function Cq(e){let t=e==="bech32"?1:734539939,r=_q(5),n=r.decode,i=r.encode,o=Iq(n);function s(h,l,g=90){if(typeof h!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof h}`);if(!Array.isArray(l)||l.length&&typeof l[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof l}`);let x=h.length+7+l.length;if(g!==!1&&x>g)throw new TypeError(`Length ${x} exceeds limit ${g}`);let A=h.toLowerCase(),E=Tq(A,l,t);return`${A}1${tP.encode(l)}${E}`}function a(h,l=90){if(typeof h!="string")throw new Error(`bech32.decode input should be string, not ${typeof h}`);if(h.length<8||l!==!1&&h.length>l)throw new TypeError(`Wrong string length: ${h.length} (${h}). Expected (8..${l})`);let g=h.toLowerCase();if(h!==g&&h!==h.toUpperCase())throw new Error("String must be lowercase or uppercase");h=g;let x=h.lastIndexOf("1");if(x===0||x===-1)throw new Error('Letter "1" must be present between prefix and data only');let A=h.slice(0,x),E=h.slice(x+1);if(E.length<6)throw new Error("Data must be at least 6 characters long");let B=tP.decode(E).slice(0,-6),M=Tq(A,B,t);if(!E.endsWith(M))throw new Error(`Invalid checksum in ${h}: expected "${M}"`);return{prefix:A,words:B}}let c=Iq(a);function u(h){let{prefix:l,words:g}=a(h,!1);return{prefix:l,words:g,bytes:n(g)}}return{encode:s,decode:a,decodeToBytes:u,decodeUnsafe:c,fromWords:n,fromWordsUnsafe:o,toWords:i}}var _2=Cq("bech32"),iP=Cq("bech32m"),oP={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},Lr=P2(_q(4),rP("0123456789abcdef"),nP(""),Jbe(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));p();y();var Kr=new Uint8Array,N2=new Uint8Array([0]);function yr(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function B2(...e){if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var Bo=e=>e instanceof Uint8Array,C2=class{constructor(t,r=[],n=[]){this.data=t,this.path=r,this.fieldPath=n,this.pos=0,this.hasPtr=!1,this.bitBuf=0,this.bitPos=0}err(t){return new Error(`Reader(${this.fieldPath.join("/")}): ${t}`)}absBytes(t){if(t>this.data.length)throw new Error("absBytes: Unexpected end of buffer");return this.data.subarray(t)}bytes(t,r=!1){if(this.bitPos)throw this.err("readBytes: bitPos not empty");if(!Number.isFinite(t))throw this.err(`readBytes: wrong length=${t}`);if(this.pos+t>this.data.length)throw this.err("readBytes: Unexpected end of buffer");let n=this.data.subarray(this.pos,this.pos+t);return r||(this.pos+=t),n}byte(t=!1){if(this.bitPos)throw this.err("readByte: bitPos not empty");return this.data[t?this.pos:this.pos++]}get leftBytes(){return this.data.length-this.pos}isEnd(){return this.pos>=this.data.length&&!this.bitPos}length(t){let r;if($f(t)?r=Number(t.decodeStream(this)):typeof t=="number"?r=t:typeof t=="string"&&(r=O2(this.path,t.split("/"))),typeof r=="bigint"&&(r=Number(r)),typeof r!="number")throw this.err(`Wrong length: ${r}`);return r}bits(t){if(t>32)throw this.err("BitReader: cannot read more than 32 bits in single call");let r=0;for(;t;){this.bitPos||(this.bitBuf=this.data[this.pos++],this.bitPos=8);let n=Math.min(t,this.bitPos);this.bitPos-=n,r=r<<n|this.bitBuf>>this.bitPos&2**n-1,this.bitBuf&=2**this.bitPos-1,t-=n}return r>>>0}find(t,r=this.pos){if(!Bo(t))throw this.err(`find: needle is not bytes! ${t}`);if(this.bitPos)throw this.err("findByte: bitPos not empty");if(!t.length)throw this.err("find: needle is empty");for(let n=r;(n=this.data.indexOf(t[0],n))!==-1;n++){if(n===-1||this.data.length-n<t.length)return;if(yr(t,this.data.subarray(n,n+t.length)))return n}}finish(){if(!(this.isEnd()||this.hasPtr))throw this.err(`${this.leftBytes} bytes ${this.bitPos} bits left after unpack: ${Lr.encode(this.data.slice(this.pos))}`)}fieldPathPush(t){this.fieldPath.push(t)}fieldPathPop(){this.fieldPath.pop()}},M2=class{constructor(t=[],r=[]){this.path=t,this.fieldPath=r,this.buffers=[],this.pos=0,this.ptrs=[],this.bitBuf=0,this.bitPos=0}err(t){return new Error(`Writer(${this.fieldPath.join("/")}): ${t}`)}bytes(t){if(this.bitPos)throw this.err("writeBytes: ends with non-empty bit buffer");this.buffers.push(t),this.pos+=t.length}byte(t){if(this.bitPos)throw this.err("writeByte: ends with non-empty bit buffer");this.buffers.push(new Uint8Array([t])),this.pos++}get buffer(){if(this.bitPos)throw this.err("buffer: ends with non-empty bit buffer");let t=B2(...this.buffers);for(let r of this.ptrs){let n=t.length;t=B2(t,r.buffer);let i=r.ptr.encode(n);for(let o=0;o<i.length;o++)t[r.pos+o]=i[o]}return t}length(t,r){if(t===null)return;if($f(t))return t.encodeStream(this,r);let n;if(typeof t=="number"?n=t:typeof t=="string"&&(n=O2(this.path,t.split("/"))),typeof n=="bigint"&&(n=Number(n)),n===void 0||n!==r)throw this.err(`Wrong length: ${n} len=${t} exp=${r}`)}bits(t,r){if(r>32)throw this.err("writeBits: cannot write more than 32 bits in single call");if(t>=2**r)throw this.err(`writeBits: value (${t}) >= 2**bits (${r})`);for(;r;){let n=Math.min(r,8-this.bitPos);this.bitBuf=this.bitBuf<<n|t>>r-n,this.bitPos+=n,r-=n,t&=2**r-1,this.bitPos===8&&(this.bitPos=0,this.buffers.push(new Uint8Array([this.bitBuf])),this.pos++)}}fieldPathPush(t){this.fieldPath.push(t)}fieldPathPop(){this.fieldPath.pop()}},R2=e=>Uint8Array.from(e).reverse();function Mq(e,t,r,n){if(n){let i=2n**(r-1n);if(t<-i||t>=i)throw e.err("sInt: value out of bounds")}else if(0n>t||t>=2n**r)throw e.err("uInt: value out of bounds")}function wn(e){return{...e,encode:t=>{let r=new M2;return e.encodeStream(r,t),r.buffer},decode:t=>{let r=new C2(t),n=e.decodeStream(r);return r.finish(),n}}}function O2(e,t){e=Array.from(e);let r=0;for(;r<t.length&&t[r]==="..";r++)e.pop();let n=e.pop();for(;r<t.length;r++){if(!n||n[t[r]]===void 0)return;n=n[t[r]]}return n}function $f(e){return typeof e.encode=="function"&&typeof e.encodeStream=="function"&&typeof e.decode=="function"&&typeof e.decodeStream=="function"}function rxe(){return{encode:e=>{let t={};for(let[r,n]of e){if(t[r]!==void 0)throw new Error(`coders.dict: same key(${r}) appears twice in struct`);t[r]=n}return t},decode:e=>Object.entries(e)}}var nxe={encode:e=>{if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error(`coders.number: element bigger than MAX_SAFE_INTEGER=${e}`);return Number(e)},decode:e=>BigInt(e)};function ixe(e){return{encode:t=>e[t],decode:t=>e[t]}}function oxe(e){let t=10n**BigInt(e);return{encode:r=>{let n=(r<0n?-r:r).toString(10),i=n.length-e;i<0&&(n=n.padStart(n.length-i,"0"),i=0);let o=n.length-1;for(;o>=i&&n[o]==="0";o--);let[s,a]=[n.slice(0,i),n.slice(i,o+1)];return s||(s="0"),r<0n&&(s="-"+s),a?`${s}.${a}`:s},decode:r=>{let n=!1;r.startsWith("-")&&(n=!0,r=r.slice(1));let i=r.indexOf(".");i=i===-1?r.length:i;let[o,s]=[r.slice(0,i),r.slice(i+1)],a=BigInt(o)*t,c=Math.min(s.length,e),u=BigInt(s.slice(0,c))*10n**BigInt(e-c),h=a+u;return n?-h:h}}}function sxe(e){return{encode:t=>{for(let r of e){let n=r.encode(t);if(n!==void 0)return n}throw new Error(`match/encode: cannot find match in ${t}`)},decode:t=>{for(let r of e){let n=r.decode(t);if(n!==void 0)return n}throw new Error(`match/decode: cannot find match in ${t}`)}}}var yp={dict:rxe,number:nxe,tsEnum:ixe,decimal:oxe,match:sxe};var Co=(e,t=!1,r=!1)=>wn({size:e,encodeStream:(n,i)=>{if(typeof i!="number"&&typeof i!="bigint")throw n.err(`bigint: invalid value: ${i}`);let o=BigInt(i),s=BigInt(e);Mq(n,o,8n*s,!!r);let a=2n**(8n*s-1n);r&&o<0&&(o=o|a);let c=[];for(let h=0;h<e;h++)c.push(Number(o&255n)),o>>=8n;let u=new Uint8Array(c).reverse();n.bytes(t?u.reverse():u)},decodeStream:n=>{let i=BigInt(e),o=n.bytes(e);t&&(o=R2(o));let s=R2(o),a=2n**(8n*i-1n),c=0n;for(let u=0;u<s.length;u++)c|=BigInt(s[u])<<8n*BigInt(u);return r&&c&a&&(c=(c^a)-a),Mq(n,c,8n*i,!!r),c}}),tQe=Co(32,!0),Rq=Co(32,!1),rQe=Co(32,!0,!0),nQe=Co(32,!1,!0),iQe=Co(16,!0),oQe=Co(16,!1),sQe=Co(16,!0,!0),aQe=Co(16,!1,!0),Qg=Co(8,!0),cQe=Co(8,!1),Oq=Co(8,!0,!0),uQe=Co(8,!1,!0),Qa=(e,t=!1,r=!1)=>{if(e>6)throw new Error("int supports size up to 6 bytes (48 bits), for other use bigint");return eb(Co(e,t,r),yp.number)},tr=Qa(4,!0),Nq=Qa(4,!1),mp=Qa(4,!0,!0),fQe=Qa(4,!1,!0),sP=Qa(2,!0),lQe=Qa(2,!1),dQe=Qa(2,!0,!0),hQe=Qa(2,!1,!0),fu=Qa(1,!1),pQe=Qa(1,!1,!0),yQe=wn({size:1,encodeStream:(e,t)=>e.byte(t?1:0),decodeStream:e=>{let t=e.byte();if(t!==0&&t!==1)throw e.err(`bool: invalid value ${t}`);return t===1}}),Er=(e,t=!1)=>wn({size:typeof e=="number"?e:void 0,encodeStream:(r,n)=>{if(!Bo(n))throw r.err(`bytes: invalid value ${n}`);Bo(e)||r.length(e,n.length),r.bytes(t?R2(n):n),Bo(e)&&r.bytes(e)},decodeStream:r=>{let n;if(Bo(e)){let i=r.find(e);if(!i)throw r.err("bytes: cannot find terminator");n=r.bytes(i-r.pos),r.bytes(e.length)}else n=r.bytes(e===null?r.leftBytes:r.length(e));return t?R2(n):n}}),Xg=(e,t=!1)=>{let r=Er(e,t);return wn({size:r.size,encodeStream:(n,i)=>r.encodeStream(n,oP.decode(i)),decodeStream:n=>oP.encode(r.decodeStream(n))})},mQe=Xg(N2),Uq=(e,t=!1,r=!1)=>{let n=Er(e,t);return wn({size:n.size,encodeStream:(i,o)=>{if(r&&!o.startsWith("0x"))throw new Error("hex(withZero=true).encode input should start with 0x");let s=Lr.decode(r?o.slice(2):o);return n.encodeStream(i,s)},decodeStream:i=>(r?"0x":"")+Lr.encode(n.decodeStream(i))})};function eb(e,t){if(!$f(e))throw new Error(`apply: invalid inner value ${e}`);return wn({size:e.size,encodeStream:(r,n)=>{let i;try{i=t.decode(n)}catch(o){throw r.err(""+o)}return e.encodeStream(r,i)},decodeStream:r=>{let n=e.decodeStream(r);try{return t.encode(n)}catch(i){throw r.err(""+i)}}})}function us(e,t){if(!$f(e))throw new Error(`validate: invalid inner value ${e}`);return wn({size:e.size,encodeStream:(r,n)=>e.encodeStream(r,t(n)),decodeStream:r=>t(e.decodeStream(r))})}var Dq=(e,t=!1)=>wn({size:e.length,encodeStream:(r,n)=>{!!n!==t&&r.bytes(e)},decodeStream:r=>{let n=r.leftBytes>=e.length;return n&&(n=yr(r.bytes(e.length,!0),e),n&&r.bytes(e.length)),n!==t}});function Lq(e,t,r){if(!$f(t))throw new Error(`flagged: invalid inner value ${t}`);return wn({encodeStream:(n,i)=>{typeof e=="string"?O2(n.path,e.split("/"))?t.encodeStream(n,i):r&&t.encodeStream(n,r):(e.encodeStream(n,!!i),i?t.encodeStream(n,i):r&&t.encodeStream(n,r))},decodeStream:n=>{let i=!1;if(typeof e=="string"?i=O2(n.path,e.split("/")):i=e.decodeStream(n),i)return t.decodeStream(n);r&&t.decodeStream(n)}})}function tb(e,t,r=!0){if(!$f(e))throw new Error(`flagged: invalid inner value ${e}`);return wn({size:e.size,encodeStream:(n,i)=>e.encodeStream(n,t),decodeStream:n=>{let i=e.decodeStream(n);if(r&&typeof i!="object"&&i!==t||Bo(t)&&!yr(t,i))throw n.err(`magic: invalid value: ${i} !== ${t}`)}})}function Kq(e){let t=0;for(let r of e){if(!r.size)return;t+=r.size}return t}function Ii(e){if(Array.isArray(e))throw new Error("Packed.Struct: got array instead of object");return wn({size:Kq(Object.values(e)),encodeStream:(t,r)=>{if(typeof r!="object"||r===null)throw t.err(`struct: invalid value ${r}`);t.path.push(r);for(let n in e)t.fieldPathPush(n),e[n].encodeStream(t,r[n]),t.fieldPathPop();t.path.pop()},decodeStream:t=>{let r={};t.path.push(r);for(let n in e)t.fieldPathPush(n),r[n]=e[n].decodeStream(t),t.fieldPathPop();return t.path.pop(),r}})}function Fq(e){if(!Array.isArray(e))throw new Error(`Packed.Tuple: got ${typeof e} instead of array`);return wn({size:Kq(e),encodeStream:(t,r)=>{if(!Array.isArray(r))throw t.err(`tuple: invalid value ${r}`);t.path.push(r);for(let n=0;n<e.length;n++)t.fieldPathPush(""+n),e[n].encodeStream(t,r[n]),t.fieldPathPop();t.path.pop()},decodeStream:t=>{let r=[];t.path.push(r);for(let n=0;n<e.length;n++)t.fieldPathPush(""+n),r.push(e[n].decodeStream(t)),t.fieldPathPop();return t.path.pop(),r}})}function Vq(e,t){if(!$f(t))throw new Error(`prefix: invalid inner value ${t}`);if(Bo(e))throw new Error("prefix: len cannot be Uint8Array");let r=Er(e);return wn({size:typeof e=="number"?e:void 0,encodeStream:(n,i)=>{let o=new M2(n.path,n.fieldPath);t.encodeStream(o,i),r.encodeStream(n,o.buffer)},decodeStream:n=>{let i=r.decodeStream(n);return t.decodeStream(new C2(i,n.path,n.fieldPath))}})}function Vi(e,t){if(!$f(t))throw new Error(`array: invalid inner value ${t}`);return wn({size:typeof e=="number"&&t.size?e*t.size:void 0,encodeStream:(r,n)=>{if(!Array.isArray(n))throw r.err(`array: invalid value ${n}`);Bo(e)||r.length(e,n.length),r.path.push(n);for(let i=0;i<n.length;i++){r.fieldPathPush(""+i);let o=n[i],s=r.pos;if(t.encodeStream(r,o),Bo(e)){if(e.length>r.pos-s)continue;let a=r.buffer.subarray(s,r.pos);if(yr(a.subarray(0,e.length),e))throw r.err(`array: inner element encoding same as separator. elm=${o} data=${a}`)}r.fieldPathPop()}r.path.pop(),Bo(e)&&r.bytes(e)},decodeStream:r=>{let n=[];if(e===null){let i=0;for(r.path.push(n);!r.isEnd()&&(r.fieldPathPush(""+i++),n.push(t.decodeStream(r)),r.fieldPathPop(),!(t.size&&r.leftBytes<t.size)););r.path.pop()}else if(Bo(e)){let i=0;for(r.path.push(n);;){if(yr(r.bytes(e.length,!0),e)){r.bytes(e.length);break}r.fieldPathPush(""+i++),n.push(t.decodeStream(r)),r.fieldPathPop()}r.path.pop()}else{r.fieldPathPush("arrayLen");let i=r.length(e);r.fieldPathPop(),r.path.push(n);for(let o=0;o<i;o++)r.fieldPathPush(""+o),n.push(t.decodeStream(r)),r.fieldPathPop();r.path.pop()}return n}})}var gQe=tb(Er(0),Kr);var{ProjectivePoint:W2,sign:qq,getPublicKey:cxe}=hp,K2=hp.CURVE.n,nb=(e,t)=>e===void 0?t:e,kr=Bo,z2=e=>Sq(Ei(e)),Yf=(...e)=>Ei(Ei(Jf(...e))),Jf=B2,rH=Bq(Ei);function F2(e){if(Array.isArray(e))return e.map(t=>F2(t));if(e instanceof Uint8Array)return Uint8Array.from(e);if(["number","bigint","boolean","string","undefined"].includes(typeof e))return e;if(e===null)return e;if(typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,r])=>[t,F2(r)]));throw new Error(`cloneDeep: unknown type=${e} (${typeof e})`)}var ki;(function(e){e[e.ecdsa=0]="ecdsa",e[e.schnorr=1]="schnorr"})(ki||(ki={}));function wp(e,t){let r=e.length;if(t===ki.ecdsa){if(r===32)throw new Error("Expected non-Schnorr key");return W2.fromHex(e),e}else if(t===ki.schnorr){if(r!==32)throw new Error("Expected 32-byte Schnorr key");return _o.utils.lift_x(_o.utils.bytesToNumberBE(e)),e}else throw new Error("Unknown key type")}function Nd(e,t){try{return wp(e,t),!0}catch{return!1}}var Hq=e=>e.r<K2/2n;function uxe(e,t,r=!1){let n=qq(e,t);if(r&&!Hq(n)){let i=new Uint8Array(32);for(let o=0;o<Number.MAX_SAFE_INTEGER&&(i.set(tr.encode(o)),n=qq(e,t,{extraEntropy:i}),!Hq(n));o++);}return n.toDERRawBytes()}function nH(e,t){let r=_o.utils,n=r.taggedHash("TapTweak",e,t),i=r.bytesToNumberBE(n);if(i>=K2)throw new Error("tweak higher than curve order");return i}function fxe(e,t=new Uint8Array){let r=_o.utils,n=r.bytesToNumberBE(e),i=W2.fromPrivateKey(n),o=i.hasEvenY()?n:r.mod(-n,K2),s=r.pointToBytes(i),a=nH(s,t);return r.numberToBytesBE(r.mod(o+a,K2),32)}function iH(e,t){let r=_o.utils,n=nH(e,t),o=r.lift_x(r.bytesToNumberBE(e)).add(W2.fromPrivateKey(n)),s=o.hasEvenY()?0:1;return[r.pointToBytes(o),s]}var lP=us(Er(null),e=>wp(e,ki.ecdsa)),V2=us(Er(32),e=>wp(e,ki.schnorr)),Wq=us(Er(null),e=>{if(e.length!==64&&e.length!==65)throw new Error("Schnorr signature should be 64 or 65 bytes long");return e});var Zf={bech32:"bc",pubKeyHash:0,scriptHash:5,wif:128};var lxe=8,dxe=2,Od=0,oH=4294967295,U2=new Uint8Array(32),EQe=yp.decimal(lxe);function dP(e,t){if(!kr(e)||!kr(t))throw new Error(`cmp: wrong type a=${typeof e} b=${typeof t}`);let r=Math.min(e.length,t.length);for(let n=0;n<r;n++)if(e[n]!=t[n])return Math.sign(e[n]-t[n]);return Math.sign(e.length-t.length)}var vn;(function(e){e[e.OP_0=0]="OP_0",e[e.PUSHDATA1=76]="PUSHDATA1",e[e.PUSHDATA2=77]="PUSHDATA2",e[e.PUSHDATA4=78]="PUSHDATA4",e[e["1NEGATE"]=79]="1NEGATE",e[e.RESERVED=80]="RESERVED",e[e.OP_1=81]="OP_1",e[e.OP_2=82]="OP_2",e[e.OP_3=83]="OP_3",e[e.OP_4=84]="OP_4",e[e.OP_5=85]="OP_5",e[e.OP_6=86]="OP_6",e[e.OP_7=87]="OP_7",e[e.OP_8=88]="OP_8",e[e.OP_9=89]="OP_9",e[e.OP_10=90]="OP_10",e[e.OP_11=91]="OP_11",e[e.OP_12=92]="OP_12",e[e.OP_13=93]="OP_13",e[e.OP_14=94]="OP_14",e[e.OP_15=95]="OP_15",e[e.OP_16=96]="OP_16",e[e.NOP=97]="NOP",e[e.VER=98]="VER",e[e.IF=99]="IF",e[e.NOTIF=100]="NOTIF",e[e.VERIF=101]="VERIF",e[e.VERNOTIF=102]="VERNOTIF",e[e.ELSE=103]="ELSE",e[e.ENDIF=104]="ENDIF",e[e.VERIFY=105]="VERIFY",e[e.RETURN=106]="RETURN",e[e.TOALTSTACK=107]="TOALTSTACK",e[e.FROMALTSTACK=108]="FROMALTSTACK",e[e["2DROP"]=109]="2DROP",e[e["2DUP"]=110]="2DUP",e[e["3DUP"]=111]="3DUP",e[e["2OVER"]=112]="2OVER",e[e["2ROT"]=113]="2ROT",e[e["2SWAP"]=114]="2SWAP",e[e.IFDUP=115]="IFDUP",e[e.DEPTH=116]="DEPTH",e[e.DROP=117]="DROP",e[e.DUP=118]="DUP",e[e.NIP=119]="NIP",e[e.OVER=120]="OVER",e[e.PICK=121]="PICK",e[e.ROLL=122]="ROLL",e[e.ROT=123]="ROT",e[e.SWAP=124]="SWAP",e[e.TUCK=125]="TUCK",e[e.CAT=126]="CAT",e[e.SUBSTR=127]="SUBSTR",e[e.LEFT=128]="LEFT",e[e.RIGHT=129]="RIGHT",e[e.SIZE=130]="SIZE",e[e.INVERT=131]="INVERT",e[e.AND=132]="AND",e[e.OR=133]="OR",e[e.XOR=134]="XOR",e[e.EQUAL=135]="EQUAL",e[e.EQUALVERIFY=136]="EQUALVERIFY",e[e.RESERVED1=137]="RESERVED1",e[e.RESERVED2=138]="RESERVED2",e[e["1ADD"]=139]="1ADD",e[e["1SUB"]=140]="1SUB",e[e["2MUL"]=141]="2MUL",e[e["2DIV"]=142]="2DIV",e[e.NEGATE=143]="NEGATE",e[e.ABS=144]="ABS",e[e.NOT=145]="NOT",e[e["0NOTEQUAL"]=146]="0NOTEQUAL",e[e.ADD=147]="ADD",e[e.SUB=148]="SUB",e[e.MUL=149]="MUL",e[e.DIV=150]="DIV",e[e.MOD=151]="MOD",e[e.LSHIFT=152]="LSHIFT",e[e.RSHIFT=153]="RSHIFT",e[e.BOOLAND=154]="BOOLAND",e[e.BOOLOR=155]="BOOLOR",e[e.NUMEQUAL=156]="NUMEQUAL",e[e.NUMEQUALVERIFY=157]="NUMEQUALVERIFY",e[e.NUMNOTEQUAL=158]="NUMNOTEQUAL",e[e.LESSTHAN=159]="LESSTHAN",e[e.GREATERTHAN=160]="GREATERTHAN",e[e.LESSTHANOREQUAL=161]="LESSTHANOREQUAL",e[e.GREATERTHANOREQUAL=162]="GREATERTHANOREQUAL",e[e.MIN=163]="MIN",e[e.MAX=164]="MAX",e[e.WITHIN=165]="WITHIN",e[e.RIPEMD160=166]="RIPEMD160",e[e.SHA1=167]="SHA1",e[e.SHA256=168]="SHA256",e[e.HASH160=169]="HASH160",e[e.HASH256=170]="HASH256",e[e.CODESEPARATOR=171]="CODESEPARATOR",e[e.CHECKSIG=172]="CHECKSIG",e[e.CHECKSIGVERIFY=173]="CHECKSIGVERIFY",e[e.CHECKMULTISIG=174]="CHECKMULTISIG",e[e.CHECKMULTISIGVERIFY=175]="CHECKMULTISIGVERIFY",e[e.NOP1=176]="NOP1",e[e.CHECKLOCKTIMEVERIFY=177]="CHECKLOCKTIMEVERIFY",e[e.CHECKSEQUENCEVERIFY=178]="CHECKSEQUENCEVERIFY",e[e.NOP4=179]="NOP4",e[e.NOP5=180]="NOP5",e[e.NOP6=181]="NOP6",e[e.NOP7=182]="NOP7",e[e.NOP8=183]="NOP8",e[e.NOP9=184]="NOP9",e[e.NOP10=185]="NOP10",e[e.CHECKSIGADD=186]="CHECKSIGADD",e[e.INVALID=255]="INVALID"})(vn||(vn={}));var An=wn({encodeStream:(e,t)=>{for(let r of t){if(typeof r=="string"){if(vn[r]===void 0)throw new Error(`Unknown opcode=${r}`);e.byte(vn[r]);continue}else if(typeof r=="number"){if(r===0){e.byte(0);continue}else if(1<=r&&r<=16){e.byte(vn.OP_1-1+r);continue}}if(typeof r=="number"&&(r=sH().encode(BigInt(r))),!kr(r))throw new Error(`Wrong Script OP=${r} (${typeof r})`);let n=r.length;n<vn.PUSHDATA1?e.byte(n):n<=255?(e.byte(vn.PUSHDATA1),e.byte(n)):n<=65535?(e.byte(vn.PUSHDATA2),e.bytes(sP.encode(n))):(e.byte(vn.PUSHDATA4),e.bytes(tr.encode(n))),e.bytes(r)}},decodeStream:e=>{let t=[];for(;!e.isEnd();){let r=e.byte();if(vn.OP_0<r&&r<=vn.PUSHDATA4){let n;if(r<vn.PUSHDATA1)n=r;else if(r===vn.PUSHDATA1)n=fu.decodeStream(e);else if(r===vn.PUSHDATA2)n=sP.decodeStream(e);else if(r===vn.PUSHDATA4)n=tr.decodeStream(e);else throw new Error("Should be not possible");t.push(e.bytes(n))}else if(r===0)t.push(0);else if(vn.OP_1<=r&&r<=vn.OP_16)t.push(r-(vn.OP_1-1));else{let n=vn[r];if(n===void 0)throw new Error(`Unknown opcode=${r.toString(16)}`);t.push(n)}}return t}});function sH(e=6,t=!1){return wn({encodeStream:(r,n)=>{if(n===0n)return;let i=n<0,o=BigInt(n),s=[];for(let a=i?-o:o;a;a>>=8n)s.push(Number(a&0xffn));s[s.length-1]>=128?s.push(i?128:0):i&&(s[s.length-1]|=128),r.bytes(new Uint8Array(s))},decodeStream:r=>{let n=r.leftBytes;if(n>e)throw new Error(`ScriptNum: number (${n}) bigger than limit=${e}`);if(n===0)return 0n;if(t&&!(r.data[n-1]&127)&&(n<=1||!(r.data[n-2]&128)))throw new Error("Non-minimally encoded ScriptNum");let i=0,o=0n;for(let s=0;s<n;++s)i=r.byte(),o|=BigInt(i)<<8n*BigInt(s);return i>=128&&(o&=2n**BigInt(n*8)-1n>>1n,o=-o),o}})}function hxe(e,t=4,r=!0){if(typeof e=="number")return e;if(kr(e))try{let n=sH(t,r).decode(e);return n>Number.MAX_SAFE_INTEGER?void 0:Number(n)}catch{return}}var zq={253:[253,2,253n,65535n],254:[254,4,65536n,4294967295n],255:[255,8,4294967296n,18446744073709551615n]},j2=wn({encodeStream:(e,t)=>{if(typeof t=="number"&&(t=BigInt(t)),0n<=t&&t<=252n)return e.byte(Number(t));for(let[r,n,i,o]of Object.values(zq))if(!(i>t||t>o)){e.byte(r);for(let s=0;s<n;s++)e.byte(Number(t>>8n*BigInt(s)&0xffn));return}throw e.err(`VarInt too big: ${t}`)},decodeStream:e=>{let t=e.byte();if(t<=252)return BigInt(t);let[r,n,i]=zq[t],o=0n;for(let s=0;s<n;s++)o|=BigInt(e.byte())<<8n*BigInt(s);if(o<i)throw e.err(`Wrong CompactSize(${8*n})`);return o}}),sa=eb(j2,yp.number),jq=e=>Vi(j2,e),oa=Er(j2),pxe=Ii({txid:Er(32,!0),index:tr,finalScriptSig:oa,sequence:tr}),bp=Ii({amount:Qg,script:oa}),yxe={amount:0xffffffffffffffffn,script:Kr},wP=Vi(sa,oa),mxe=Ii({version:mp,segwitFlag:Dq(new Uint8Array([0,1])),inputs:jq(pxe),outputs:jq(bp),witnesses:Lq("segwitFlag",Vi("inputs/length",wP)),lockTime:tr});function gxe(e){if(e.segwitFlag&&e.witnesses&&!e.witnesses.length)throw new Error("Segwit flag with empty witnesses array");return e}var Xa=us(mxe,gxe);function hP(e){let[t,r,n,i,o,s]=e;return{type:t,kc:r,vc:n,reqInc:i,allowInc:o,silentIgnore:s}}var G2=Ii({fingerprint:Nq,path:Vi(null,tr)}),bxe=Ii({version:fu,internalKey:Er(32),merklePath:Vi(null,Er(32))}),xp=us(bxe,e=>{if(e.merklePath.length>128)throw new Error("TaprootControlBlock: merklePath should be of length 0..128 (inclusive)");return e}),aH=Ii({hashes:Vi(sa,Er(32)),der:G2}),xxe=Er(78),wxe=Ii({pubKey:V2,leafHash:Er(32)}),vxe=Vi(null,Ii({depth:fu,version:fu,script:oa})),Sn=Er(null),Gq=Er(20),rb=Er(32),vP={unsignedTx:[0,!1,Xa,[0],[0],!1],xpub:[1,xxe,G2,[],[0,2],!1],txVersion:[2,!1,tr,[2],[2],!1],fallbackLocktime:[3,!1,tr,[],[2],!1],inputCount:[4,!1,sa,[2],[2],!1],outputCount:[5,!1,sa,[2],[2],!1],txModifiable:[6,!1,fu,[],[2],!1],version:[251,!1,tr,[],[0,2],!1],proprietary:[252,Sn,Sn,[],[0,2],!1]},q2={nonWitnessUtxo:[0,!1,Xa,[],[0,2],!1],witnessUtxo:[1,!1,bp,[],[0,2],!1],partialSig:[2,lP,Sn,[],[0,2],!1],sighashType:[3,!1,tr,[],[0,2],!1],redeemScript:[4,!1,Sn,[],[0,2],!1],witnessScript:[5,!1,Sn,[],[0,2],!1],bip32Derivation:[6,lP,G2,[],[0,2],!1],finalScriptSig:[7,!1,Sn,[],[0,2],!1],finalScriptWitness:[8,!1,wP,[],[0,2],!1],porCommitment:[9,!1,Sn,[],[0,2],!1],ripemd160:[10,Gq,Sn,[],[0,2],!1],sha256:[11,rb,Sn,[],[0,2],!1],hash160:[12,Gq,Sn,[],[0,2],!1],hash256:[13,rb,Sn,[],[0,2],!1],txid:[14,!1,rb,[2],[2],!0],index:[15,!1,tr,[2],[2],!0],sequence:[16,!1,tr,[],[2],!0],requiredTimeLocktime:[17,!1,tr,[],[2],!1],requiredHeightLocktime:[18,!1,tr,[],[2],!1],tapKeySig:[19,!1,Wq,[],[0,2],!1],tapScriptSig:[20,wxe,Wq,[],[0,2],!1],tapLeafScript:[21,xp,Sn,[],[0,2],!1],tapBip32Derivation:[22,rb,aH,[],[0,2],!1],tapInternalKey:[23,!1,V2,[],[0,2],!1],tapMerkleRoot:[24,!1,rb,[],[0,2],!1],proprietary:[252,Sn,Sn,[],[0,2],!1]},Axe=["txid","sequence","index","witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknown"],Sxe=["partialSig","finalScriptSig","finalScriptWitness","tapKeySig","tapScriptSig"],H2={redeemScript:[0,!1,Sn,[],[0,2],!1],witnessScript:[1,!1,Sn,[],[0,2],!1],bip32Derivation:[2,lP,G2,[],[0,2],!1],amount:[3,!1,Oq,[2],[2],!0],script:[4,!1,Sn,[2],[2],!0],tapInternalKey:[5,!1,V2,[],[0,2],!1],tapTree:[6,!1,vxe,[],[0,2],!1],tapBip32Derivation:[7,V2,aH,[],[0,2],!1],proprietary:[252,Sn,Sn,[],[0,2],!1]},Exe=[],$q=Vi(N2,Ii({key:Vq(sa,Ii({type:sa,key:Er(null)})),value:Er(sa)})),IQe=Ii({type:sa,key:Er(null)});function AP(e){let t={};for(let r in e){let[n,i,o]=e[r];t[n]=[r,i,o]}return wn({encodeStream:(r,n)=>{let i=[];for(let o in e){let s=n[o];if(s===void 0)continue;let[a,c,u]=e[o];if(!c)i.push({key:{type:a,key:Kr},value:u.encode(s)});else{let h=s.map(([l,g])=>[c.encode(l),u.encode(g)]);h.sort((l,g)=>dP(l[0],g[0]));for(let[l,g]of h)i.push({key:{key:l,type:a},value:g})}}if(n.unknown){n.unknown.sort((o,s)=>dP(o[0].key,s[0].key));for(let[o,s]of n.unknown)i.push({key:o,value:s})}$q.encodeStream(r,i)},decodeStream:r=>{let n=$q.decodeStream(r),i={},o={};for(let s of n){let a="unknown",c=s.key.key,u=s.value;if(t[s.key.type]){let[h,l,g]=t[s.key.type];if(a=h,!l&&c.length)throw new Error(`PSBT: Non-empty key for ${a} (key=${Lr.encode(c)} value=${Lr.encode(u)}`);if(c=l?l.decode(c):void 0,u=g.decode(u),!l){if(i[a])throw new Error(`PSBT: Same keys: ${a} (key=${c} value=${u})`);i[a]=u,o[a]=!0;continue}}else c={type:s.key.type,key:s.key.key};if(o[a])throw new Error(`PSBT: Key type with empty key and no key=${a} val=${u}`);i[a]||(i[a]=[]),i[a].push([c,u])}return i}})}function Yq(e,t){if(!yr(e.hash,Ei(t)))throw new Error("checkScript: wsh wrong witnessScript hash");let r=En.decode(t);if(r.type==="tr"||r.type==="tr_ns"||r.type==="tr_ms")throw new Error(`checkScript: P2${r.type} cannot be wrapped in P2SH`);if(r.type==="wpkh"||r.type==="sh")throw new Error(`checkScript: P2${r.type} cannot be wrapped in P2WSH`)}function pP(e,t,r){if(e){let n=En.decode(e);if(n.type==="tr_ns"||n.type==="tr_ms"||n.type==="ms"||n.type=="pk")throw new Error(`checkScript: non-wrapped ${n.type}`);if(n.type==="sh"&&t){if(!yr(n.hash,z2(t)))throw new Error("checkScript: sh wrong redeemScript hash");let i=En.decode(t);if(i.type==="tr"||i.type==="tr_ns"||i.type==="tr_ms")throw new Error(`checkScript: P2${i.type} cannot be wrapped in P2SH`);if(i.type==="sh")throw new Error("checkScript: P2SH cannot be wrapped in P2SH")}n.type==="wsh"&&r&&Yq(n,r)}if(t){let n=En.decode(t);n.type==="wsh"&&r&&Yq(n,r)}}var SP=us(AP(q2),e=>{if(e.finalScriptWitness&&!e.finalScriptWitness.length)throw new Error("validateInput: wmpty finalScriptWitness");if(e.partialSig&&!e.partialSig.length)throw new Error("Empty partialSig");if(e.partialSig)for(let[t]of e.partialSig)wp(t,ki.ecdsa);if(e.bip32Derivation)for(let[t]of e.bip32Derivation)wp(t,ki.ecdsa);if(e.requiredTimeLocktime!==void 0&&e.requiredTimeLocktime<5e8)throw new Error(`validateInput: wrong timeLocktime=${e.requiredTimeLocktime}`);if(e.requiredHeightLocktime!==void 0&&(e.requiredHeightLocktime<=0||e.requiredHeightLocktime>=5e8))throw new Error(`validateInput: wrong heighLocktime=${e.requiredHeightLocktime}`);if(e.nonWitnessUtxo&&e.index!==void 0){let t=e.nonWitnessUtxo.outputs.length-1;if(e.index>t)throw new Error(`validateInput: index(${e.index}) not in nonWitnessUtxo`);let r=e.nonWitnessUtxo.outputs[e.index];if(e.witnessUtxo&&(!yr(e.witnessUtxo.script,r.script)||e.witnessUtxo.amount!==r.amount))throw new Error("validateInput: witnessUtxo different from nonWitnessUtxo")}if(e.tapLeafScript)for(let[t,r]of e.tapLeafScript){if((t.version&254)!==r[r.length-1])throw new Error("validateInput: tapLeafScript version mimatch");if(r[r.length-1]&1)throw new Error("validateInput: tapLeafScript version has parity bit!")}if(e.nonWitnessUtxo&&e.index&&e.txid){if(e.nonWitnessUtxo.outputs.length-1<e.index)throw new Error("nonWitnessUtxo: incorect output index");let r=Ud.fromRaw(Xa.encode(e.nonWitnessUtxo)),n=Lr.encode(e.txid);if(r.id!==n)throw new Error(`nonWitnessUtxo: wrong txid, exp=${n} got=${r.id}`)}return e}),EP=us(AP(H2),e=>{if(e.bip32Derivation)for(let[t]of e.bip32Derivation)wp(t,ki.ecdsa);return e}),cH=us(AP(vP),e=>{if((e.version||0)===0){if(!e.unsignedTx)throw new Error("PSBTv0: missing unsignedTx");if(e.unsignedTx.segwitFlag||e.unsignedTx.witnesses)throw new Error("PSBTv0: witness in unsingedTx");for(let r of e.unsignedTx.inputs)if(r.finalScriptSig&&r.finalScriptSig.length)throw new Error("PSBTv0: input scriptSig found in unsignedTx")}return e}),Ixe=Ii({magic:tb(Xg(new Uint8Array([255])),"psbt"),global:cH,inputs:Vi("global/unsignedTx/inputs/length",SP),outputs:Vi(null,EP)}),kxe=Ii({magic:tb(Xg(new Uint8Array([255])),"psbt"),global:cH,inputs:Vi("global/inputCount",SP),outputs:Vi("global/outputCount",EP)}),kQe=Ii({magic:tb(Xg(new Uint8Array([255])),"psbt"),items:Vi(null,eb(Vi(N2,Fq([Uq(sa),Er(j2)])),yp.dict()))});function aP(e,t,r){for(let n in r){if(n==="unknown"||!t[n])continue;let{allowInc:i}=hP(t[n]);if(!i.includes(e))throw new Error(`PSBTv${e}: field ${n} is not allowed`)}for(let n in t){let{reqInc:i}=hP(t[n]);if(i.includes(e)&&r[n]===void 0)throw new Error(`PSBTv${e}: missing required field ${n}`)}}function Jq(e,t,r){let n={};for(let i in r){let o=i;if(o!=="unknown"){if(!t[o])continue;let{allowInc:s,silentIgnore:a}=hP(t[o]);if(!s.includes(e)){if(a)continue;throw new Error(`Failed to serialize in PSBTv${e}: ${o} but versions allows inclusion=${s}`)}}n[o]=r[o]}return n}function uH(e){let t=e&&e.global&&e.global.version||0;aP(t,vP,e.global);for(let s of e.inputs)aP(t,q2,s);for(let s of e.outputs)aP(t,H2,s);let r=t?e.global.inputCount:e.global.unsignedTx.inputs.length;if(e.inputs.length<r)throw new Error("Not enough inputs");let n=e.inputs.slice(r);if(n.length>1||n.length&&Object.keys(n[0]).length)throw new Error(`Unexpected inputs left in tx=${n}`);let i=t?e.global.outputCount:e.global.unsignedTx.outputs.length;if(e.outputs.length<i)throw new Error("Not outputs inputs");let o=e.outputs.slice(i);if(o.length>1||o.length&&Object.keys(o[0]).length)throw new Error(`Unexpected outputs left in tx=${o}`);return e}function cP(e,t,r,n){let i={...r,...t};for(let o in e){let s=o,[a,c,u]=e[s],h=n&&!n.includes(o);if(t[o]===void 0&&o in t){if(h)throw new Error(`Cannot remove signed field=${o}`);delete i[o]}else if(c){let l=r&&r[o]?r[o]:[],g=t[s];if(g){if(!Array.isArray(g))throw new Error(`keyMap(${o}): KV pairs should be [k, v][]`);g=g.map(E=>{if(E.length!==2)throw new Error(`keyMap(${o}): KV pairs should be [k, v][]`);return[typeof E[0]=="string"?c.decode(Lr.decode(E[0])):E[0],typeof E[1]=="string"?u.decode(Lr.decode(E[1])):E[1]]});let x={},A=(E,B,M)=>{if(x[E]===void 0){x[E]=[B,M];return}let N=Lr.encode(u.encode(x[E][1])),R=Lr.encode(u.encode(M));if(N!==R)throw new Error(`keyMap(${s}): same key=${E} oldVal=${N} newVal=${R}`)};for(let[E,B]of l){let M=Lr.encode(c.encode(E));A(M,E,B)}for(let[E,B]of g){let M=Lr.encode(c.encode(E));if(B===void 0){if(h)throw new Error(`Cannot remove signed field=${s}/${E}`);delete x[M]}else A(M,E,B)}i[s]=Object.values(x)}}else if(typeof i[o]=="string")i[o]=u.decode(Lr.decode(i[o]));else if(h&&o in t&&r&&r[o]!==void 0&&!yr(u.encode(t[o]),u.encode(r[o])))throw new Error(`Cannot change signed field=${o}`)}for(let o in i)e[o]||delete i[o];return i}var Zq=us(Ixe,uH),Qq=us(kxe,uH),uP=Ii({txid:Er(32,!0),index:tr}),Txe={encode(e){if(!(e.length!==2||!kr(e[0])||!Nd(e[0],ki.ecdsa)||e[1]!=="CHECKSIG"))return{type:"pk",pubkey:e[0]}},decode:e=>e.type==="pk"?[e.pubkey,"CHECKSIG"]:void 0};var Pxe={encode(e){if(!(e.length!==5||e[0]!=="DUP"||e[1]!=="HASH160"||!kr(e[2]))&&!(e[3]!=="EQUALVERIFY"||e[4]!=="CHECKSIG"))return{type:"pkh",hash:e[2]}},decode:e=>e.type==="pkh"?["DUP","HASH160",e.hash,"EQUALVERIFY","CHECKSIG"]:void 0};var _xe={encode(e){if(!(e.length!==3||e[0]!=="HASH160"||!kr(e[1])||e[2]!=="EQUAL"))return{type:"sh",hash:e[1]}},decode:e=>e.type==="sh"?["HASH160",e.hash,"EQUAL"]:void 0},fH=(e,t=Zf)=>{let r=e.script;if(!kr(r))throw new Error(`Wrong script: ${typeof e.script}, expected Uint8Array`);let n=z2(r),i=En.encode({type:"sh",hash:n});pP(i,r,e.witnessScript);let o={type:"sh",redeemScript:r,script:En.encode({type:"sh",hash:n}),address:$2(t).encode({type:"sh",hash:n})};return e.witnessScript&&(o.witnessScript=e.witnessScript),o},Bxe={encode(e){if(!(e.length!==2||e[0]!==0||!kr(e[1]))&&e[1].length===32)return{type:"wsh",hash:e[1]}},decode:e=>e.type==="wsh"?[0,e.hash]:void 0};var Cxe={encode(e){if(!(e.length!==2||e[0]!==0||!kr(e[1]))&&e[1].length===20)return{type:"wpkh",hash:e[1]}},decode:e=>e.type==="wpkh"?[0,e.hash]:void 0},IP=(e,t=Zf)=>{if(!Nd(e,ki.ecdsa))throw new Error("P2WPKH: invalid publicKey");if(e.length===65)throw new Error("P2WPKH: uncompressed public key");let r=z2(e);return{type:"wpkh",script:En.encode({type:"wpkh",hash:r}),address:$2(t).encode({type:"wpkh",hash:r})}},Mxe={encode(e){let t=e.length-1;if(e[t]!=="CHECKMULTISIG")return;let r=e[0],n=e[t-1];if(typeof r!="number"||typeof n!="number")return;let i=e.slice(1,-2);if(n===i.length){for(let o of i)if(!kr(o))return;return{type:"ms",m:r,pubkeys:i}}},decode:e=>e.type==="ms"?[e.m,...e.pubkeys,e.pubkeys.length,"CHECKMULTISIG"]:void 0};var Rxe={encode(e){if(!(e.length!==2||e[0]!==1||!kr(e[1])))return{type:"tr",pubkey:e[1]}},decode:e=>e.type==="tr"?[1,e.pubkey]:void 0};function Oxe(e){let t=Array.from(e);for(;t.length>=2;){t.sort((s,a)=>(a.weight||1)-(s.weight||1));let n=t.pop(),i=t.pop(),o=(i?.weight||1)+(n?.weight||1);t.push({weight:o,childs:[i?.childs||i,n?.childs||n]})}let r=t[0];return r?.childs||r}function Nxe(e,t,r=!1){let n=En.decode(e);if(n.type==="unknown"&&r)return;if(!["tr_ns","tr_ms"].includes(n.type))throw new Error(`P2TR: invalid leaf script=${n.type}`);let i=n;if(!r&&i.pubkeys)for(let o of i.pubkeys){if(yr(o,lH))throw new Error("Unspendable taproot key in leaf script");if(yr(o,t))throw new Error("Using P2TR with leaf script with same key as internal key is not supported")}}function yP(e,t,r=!1){if(!e)throw new Error("taprootHashTree: empty tree");if(Array.isArray(e)&&e.length===1&&(e=e[0]),!Array.isArray(e)){let{leafVersion:a,script:c}=e;if(e.tapLeafScript||e.tapMerkleRoot&&!yr(e.tapMerkleRoot,Kr))throw new Error("P2TR: tapRoot leafScript cannot have tree");let u=typeof c=="string"?Lr.decode(c):c;if(!kr(u))throw new Error(`checkScript: wrong script type=${u}`);return Nxe(u,t,r),{type:"leaf",version:a,script:u,hash:L2(u,a)}}if(e.length!==2&&(e=Oxe(e)),e.length!==2)throw new Error("hashTree: non binary tree!");let n=yP(e[0],t,r),i=yP(e[1],t,r),[o,s]=[n.hash,i.hash];return dP(s,o)===-1&&([o,s]=[s,o]),{type:"branch",left:n,right:i,hash:_o.utils.taggedHash("TapBranch",o,s)}}function mP(e,t=[]){if(!e)throw new Error("taprootAddPath: empty tree");if(e.type==="leaf")return{...e,path:t};if(e.type!=="branch")throw new Error(`taprootAddPath: wrong type=${e}`);return{...e,path:t,left:mP(e.left,[e.right.hash,...t]),right:mP(e.right,[e.left.hash,...t])}}function gP(e){if(!e)throw new Error("taprootAddPath: empty tree");if(e.type==="leaf")return[e];if(e.type!=="branch")throw new Error(`taprootWalkTree: wrong type=${e}`);return[...gP(e.left),...gP(e.right)]}var lH=Ei(W2.BASE.toRawBytes(!1));function dH(e,t,r=Zf,n=!1){if(!e&&!t)throw new Error("p2tr: should have pubKey or scriptTree (or both)");let i=typeof e=="string"?Lr.decode(e):e||lH;if(!Nd(i,ki.schnorr))throw new Error("p2tr: non-schnorr pubkey");let o=t?mP(yP(t,i,n)):void 0,s=o?o.hash:void 0,[a,c]=iH(i,s||Kr),u;o&&(u=gP(o).map(g=>({...g,controlBlock:xp.encode({version:(g.version||xP)+c,internalKey:i,merklePath:g.path})})));let h;u&&(h=u.map(g=>[xp.decode(g.controlBlock),Jf(g.script,new Uint8Array([g.version||xP]))]));let l={type:"tr",script:En.encode({type:"tr",pubkey:a}),address:$2(r).encode({type:"tr",pubkey:a}),tweakedPubkey:a,tapInternalKey:i};return u&&(l.leaves=u),h&&(l.tapLeafScript=h),s&&(l.tapMerkleRoot=s),l}var Uxe={encode(e){let t=e.length-1;if(e[t]!=="CHECKSIG")return;let r=[];for(let n=0;n<t;n++){let i=e[n];if(n&1){if(i!=="CHECKSIGVERIFY"||n===t-1)return;continue}if(!kr(i))return;r.push(i)}return{type:"tr_ns",pubkeys:r}},decode:e=>{if(e.type!=="tr_ns")return;let t=[];for(let r=0;r<e.pubkeys.length-1;r++)t.push(e.pubkeys[r],"CHECKSIGVERIFY");return t.push(e.pubkeys[e.pubkeys.length-1],"CHECKSIG"),t}};var Dxe={encode(e){let t=e.length-1;if(e[t]!=="NUMEQUAL"||e[1]!=="CHECKSIG")return;let r=[],n=hxe(e[t-1]);if(typeof n=="number"){for(let i=0;i<t-1;i++){let o=e[i];if(i&1){if(o!==(i===1?"CHECKSIG":"CHECKSIGADD"))throw new Error("OutScript.encode/tr_ms: wrong element");continue}if(!kr(o))throw new Error("OutScript.encode/tr_ms: wrong key element");r.push(o)}return{type:"tr_ms",pubkeys:r,m:n}}},decode:e=>{if(e.type!=="tr_ms")return;let t=[e.pubkeys[0],"CHECKSIG"];for(let r=1;r<e.pubkeys.length;r++)t.push(e.pubkeys[r],"CHECKSIGADD");return t.push(e.m,"NUMEQUAL"),t}};var Lxe={encode(e){return{type:"unknown",script:An.encode(e)}},decode:e=>e.type==="unknown"?An.decode(e.script):void 0},Kxe=[Txe,Pxe,_xe,Bxe,Cxe,Mxe,Rxe,Uxe,Dxe,Lxe],Fxe=eb(An,yp.match(Kxe)),En=us(Fxe,e=>{if(e.type==="pk"&&!Nd(e.pubkey,ki.ecdsa))throw new Error("OutScript/pk: wrong key");if((e.type==="pkh"||e.type==="sh"||e.type==="wpkh")&&(!kr(e.hash)||e.hash.length!==20))throw new Error(`OutScript/${e.type}: wrong hash`);if(e.type==="wsh"&&(!kr(e.hash)||e.hash.length!==32))throw new Error("OutScript/wsh: wrong hash");if(e.type==="tr"&&(!kr(e.pubkey)||!Nd(e.pubkey,ki.schnorr)))throw new Error("OutScript/tr: wrong taproot public key");if((e.type==="ms"||e.type==="tr_ns"||e.type==="tr_ms")&&!Array.isArray(e.pubkeys))throw new Error("OutScript/multisig: wrong pubkeys array");if(e.type==="ms"){let t=e.pubkeys.length;for(let r of e.pubkeys)if(!Nd(r,ki.ecdsa))throw new Error("OutScript/multisig: wrong pubkey");if(e.m<=0||t>16||e.m>t)throw new Error("OutScript/multisig: invalid params")}if(e.type==="tr_ns"||e.type==="tr_ms"){for(let t of e.pubkeys)if(!Nd(t,ki.schnorr))throw new Error(`OutScript/${e.type}: wrong pubkey`)}if(e.type==="tr_ms"){let t=e.pubkeys.length;if(e.m<=0||t>999||e.m>t)throw new Error("OutScript/tr_ms: invalid params")}return e});function hH(e,t){if(t.length<2||t.length>40)throw new Error("Witness: invalid length");if(e>16)throw new Error("Witness: invalid version");if(e===0&&!(t.length===20||t.length===32))throw new Error("Witness: invalid length for version")}function fP(e,t,r=Zf){hH(e,t);let n=e===0?_2:iP;return n.encode(r.bech32,[e].concat(n.toWords(t)))}function Xq(e,t){return rH.encode(Jf(Uint8Array.from(t),e))}function $2(e=Zf){return{encode(t){let{type:r}=t;if(r==="wpkh")return fP(0,t.hash,e);if(r==="wsh")return fP(0,t.hash,e);if(r==="tr")return fP(1,t.pubkey,e);if(r==="pkh")return Xq(t.hash,[e.pubKeyHash]);if(r==="sh")return Xq(t.hash,[e.scriptHash]);throw new Error(`Unknown address type=${r}`)},decode(t){if(t.length<14||t.length>74)throw new Error("Invalid address length");if(e.bech32&&t.toLowerCase().startsWith(e.bech32)){let n;try{if(n=_2.decode(t),n.words[0]!==0)throw new Error(`bech32: wrong version=${n.words[0]}`)}catch{if(n=iP.decode(t),n.words[0]===0)throw new Error(`bech32m: wrong version=${n.words[0]}`)}if(n.prefix!==e.bech32)throw new Error(`wrong bech32 prefix=${n.prefix}`);let[i,...o]=n.words,s=_2.fromWords(o);if(hH(i,s),i===0&&s.length===32)return{type:"wsh",hash:s};if(i===0&&s.length===20)return{type:"wpkh",hash:s};if(i===1&&s.length===32)return{type:"tr",pubkey:s};throw new Error("Unknown witness program")}let r=rH.decode(t);if(r.length!==21)throw new Error("Invalid base58 address");if(r[0]===e.pubKeyHash)return{type:"pkh",hash:r.slice(1)};if(r[0]===e.scriptHash)return{type:"sh",hash:r.slice(1)};throw new Error(`Invalid address prefix=${r[0]}`)}}}var Ir;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.ANYONECANPAY=128]="ANYONECANPAY"})(Ir||(Ir={}));var bP;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.DEFAULT_ANYONECANPAY=128]="DEFAULT_ANYONECANPAY",e[e.ALL_ANYONECANPAY=129]="ALL_ANYONECANPAY",e[e.NONE_ANYONECANPAY=130]="NONE_ANYONECANPAY",e[e.SINGLE_ANYONECANPAY=131]="SINGLE_ANYONECANPAY"})(bP||(bP={}));function Vxe(e){if(typeof e!="number"||typeof bP[e]!="string")throw new Error(`Invalid SigHash=${e}`);return e}function eH(e){let t=e&31;return{isAny:!!(e&Ir.ANYONECANPAY),isNone:t===Ir.NONE,isSingle:t===Ir.SINGLE}}function D2(e){if(e.txid===void 0||e.index===void 0)throw new Error("Transaction/input: txid and index required");return{txid:e.txid,index:e.index,sequence:nb(e.sequence,oH),finalScriptSig:nb(e.finalScriptSig,Kr)}}function tH(e){for(let t in e){let r=t;Axe.includes(r)||delete e[r]}}function gp(e){if(e.script===void 0||e.amount===void 0)throw new Error("Transaction/output: script and amount required");return{script:e.script,amount:e.amount}}var xP=192,L2=(e,t=xP)=>_o.utils.taggedHash("TapLeaf",new Uint8Array([t]),oa.encode(e));function qxe(e,t,r,n=Kr){return yr(r,t)&&(e=fxe(e,n),t=_o.getPublicKey(e)),{privKey:e,pubKey:t}}var Hxe={}.toString;function Wxe(e){if(e!==void 0&&Hxe.call(e)!=="[object Object]")throw new Error(`Wrong object type for transaction options: ${e}`);let t={...e,version:nb(e.version,dxe),lockTime:nb(e.lockTime,0),PSBTVersion:nb(e.PSBTVersion,0)};if(typeof t.allowUnknowInput<"u"&&(e.allowUnknownInputs=t.allowUnknowInput),typeof t.allowUnknowOutput<"u"&&(e.allowUnknownOutputs=t.allowUnknowOutput),![-1,0,1,2].includes(t.version))throw new Error(`Unknown version: ${t.version}`);if(typeof t.lockTime!="number")throw new Error("Transaction lock time should be number");if(tr.encode(t.lockTime),t.PSBTVersion!==0&&t.PSBTVersion!==2)throw new Error(`Unknown PSBT version ${t.PSBTVersion}`);for(let r of["allowUnknownOutputs","allowUnknownInputs","disableScriptCheck","bip174jsCompat","allowLegacyWitnessUtxo","lowR"]){let n=t[r];if(n!==void 0&&typeof n!="boolean")throw new Error(`Transation options wrong type: ${r}=${n} (${typeof n})`)}return Object.freeze(t)}var Ud=class e{constructor(t={}){this.global={},this.inputs=[],this.outputs=[];let r=this.opts=Wxe(t);r.lockTime!==Od&&(this.global.fallbackLocktime=r.lockTime),this.global.txVersion=r.version}static fromRaw(t,r={}){let n=Xa.decode(t),i=new e({...r,version:n.version,lockTime:n.lockTime});for(let o of n.outputs)i.addOutput(o);if(i.outputs=n.outputs,i.inputs=n.inputs,n.witnesses)for(let o=0;o<n.witnesses.length;o++)i.inputs[o].finalScriptWitness=n.witnesses[o];return i}static fromPSBT(t,r={}){let n;try{n=Zq.decode(t)}catch(l){try{n=Qq.decode(t)}catch{throw l}}let i=n.global.version||0;if(i!==0&&i!==2)throw new Error(`Wrong PSBT version=${i}`);let o=n.global.unsignedTx,s=i===0?o?.version:n.global.txVersion,a=i===0?o?.lockTime:n.global.fallbackLocktime,c=new e({...r,version:s,lockTime:a,PSBTVersion:i}),u=i===0?o?.inputs.length:n.global.inputCount;c.inputs=n.inputs.slice(0,u).map((l,g)=>({finalScriptSig:Kr,...n.global.unsignedTx?.inputs[g],...l}));let h=i===0?o?.outputs.length:n.global.outputCount;return c.outputs=n.outputs.slice(0,h).map((l,g)=>({...l,...n.global.unsignedTx?.outputs[g]})),c.global={...n.global,txVersion:s},a!==Od&&(c.global.fallbackLocktime=a),c}toPSBT(t=this.opts.PSBTVersion){if(t!==0&&t!==2)throw new Error(`Wrong PSBT version=${t}`);let r=this.inputs.map(o=>Jq(t,q2,o));for(let o of r)o.partialSig&&!o.partialSig.length&&delete o.partialSig,o.finalScriptSig&&!o.finalScriptSig.length&&delete o.finalScriptSig,o.finalScriptWitness&&!o.finalScriptWitness.length&&delete o.finalScriptWitness;let n=this.outputs.map(o=>Jq(t,H2,o)),i={...this.global};return t===0?(i.unsignedTx=Xa.decode(this.unsignedTx),delete i.fallbackLocktime,delete i.txVersion):(i.version=t,i.txVersion=this.version,i.inputCount=this.inputs.length,i.outputCount=this.outputs.length,i.fallbackLocktime&&i.fallbackLocktime===Od&&delete i.fallbackLocktime),this.opts.bip174jsCompat&&(r.length||r.push({}),n.length||n.push({})),(t===0?Zq:Qq).encode({global:i,inputs:r,outputs:n})}get lockTime(){let t=Od,r=0,n=Od,i=0;for(let o of this.inputs)o.requiredHeightLocktime&&(t=Math.max(t,o.requiredHeightLocktime),r++),o.requiredTimeLocktime&&(n=Math.max(n,o.requiredTimeLocktime),i++);return r&&r>=i?t:n!==Od?n:this.global.fallbackLocktime||Od}get version(){if(this.global.txVersion===void 0)throw new Error("No global.txVersion");return this.global.txVersion}inputStatus(t){this.checkInputIdx(t);let r=this.inputs[t];return r.finalScriptSig&&r.finalScriptSig.length||r.finalScriptWitness&&r.finalScriptWitness.length?"finalized":r.tapKeySig||r.tapScriptSig&&r.tapScriptSig.length||r.partialSig&&r.partialSig.length?"signed":"unsigned"}inputSighash(t){this.checkInputIdx(t);let r=this.inputType(this.inputs[t]).sighash,n=r===Ir.DEFAULT?Ir.ALL:r&3;return{sigInputs:r&Ir.ANYONECANPAY,sigOutputs:n}}signStatus(){let t=!0,r=!0,n=[],i=[];for(let o=0;o<this.inputs.length;o++){if(this.inputStatus(o)==="unsigned")continue;let{sigInputs:a,sigOutputs:c}=this.inputSighash(o);if(a===Ir.ANYONECANPAY?n.push(o):t=!1,c===Ir.ALL)r=!1;else if(c===Ir.SINGLE)i.push(o);else if(c!==Ir.NONE)throw new Error(`Wrong signature hash output type: ${c}`)}return{addInput:t,addOutput:r,inputs:n,outputs:i}}get isFinal(){for(let t=0;t<this.inputs.length;t++)if(this.inputStatus(t)!=="finalized")return!1;return!0}get hasWitnesses(){let t=!1;for(let r of this.inputs)r.finalScriptWitness&&r.finalScriptWitness.length&&(t=!0);return t}get weight(){if(!this.isFinal)throw new Error("Transaction is not finalized");let t=32,r=this.outputs.map(gp);this.hasWitnesses&&(t+=2),t+=4*sa.encode(this.inputs.length).length,t+=4*sa.encode(this.outputs.length).length;for(let n of this.inputs)t+=160+4*oa.encode(n.finalScriptSig||Kr).length;for(let n of r)t+=32+4*oa.encode(n.script).length;if(this.hasWitnesses)for(let n of this.inputs)n.finalScriptWitness&&(t+=wP.encode(n.finalScriptWitness).length);return t}get vsize(){return Math.ceil(this.weight/4)}toBytes(t=!1,r=!1){return Xa.encode({version:this.version,lockTime:this.lockTime,inputs:this.inputs.map(D2).map(n=>({...n,finalScriptSig:t&&n.finalScriptSig||Kr})),outputs:this.outputs.map(gp),witnesses:this.inputs.map(n=>n.finalScriptWitness||[]),segwitFlag:r&&this.hasWitnesses})}get unsignedTx(){return this.toBytes(!1,!1)}get hex(){return Lr.encode(this.toBytes(!0,this.hasWitnesses))}get hash(){if(!this.isFinal)throw new Error("Transaction is not finalized");return Lr.encode(Yf(this.toBytes(!0)))}get id(){if(!this.isFinal)throw new Error("Transaction is not finalized");return Lr.encode(Yf(this.toBytes(!0)).reverse())}checkInputIdx(t){if(!Number.isSafeInteger(t)||0>t||t>=this.inputs.length)throw new Error(`Wrong input index=${t}`)}getInput(t){return this.checkInputIdx(t),F2(this.inputs[t])}get inputsLength(){return this.inputs.length}normalizeInput(t,r,n){let{nonWitnessUtxo:i,txid:o}=t;typeof i=="string"&&(i=Lr.decode(i)),kr(i)&&(i=Xa.decode(i)),i===void 0&&(i=r?.nonWitnessUtxo),typeof o=="string"&&(o=Lr.decode(o)),o===void 0&&(o=r?.txid);let s={...r,...t,nonWitnessUtxo:i,txid:o};s.nonWitnessUtxo===void 0&&delete s.nonWitnessUtxo,s.sequence===void 0&&(s.sequence=oH),s.tapMerkleRoot===null&&delete s.tapMerkleRoot,s=cP(q2,s,r,n),SP.encode(s);let a;return s.nonWitnessUtxo&&s.index!==void 0?a=s.nonWitnessUtxo.outputs[s.index]:s.witnessUtxo&&(a=s.witnessUtxo),a&&!this.opts.disableScriptCheck&&pP(a&&a.script,s.redeemScript,s.witnessScript),s}addInput(t,r=!1){if(!r&&!this.signStatus().addInput)throw new Error("Tx has signed inputs, cannot add new one");return this.inputs.push(this.normalizeInput(t)),this.inputs.length-1}updateInput(t,r,n=!1){this.checkInputIdx(t);let i;if(!n){let o=this.signStatus();(!o.addInput||o.inputs.includes(t))&&(i=Sxe)}this.inputs[t]=this.normalizeInput(r,this.inputs[t],i)}checkOutputIdx(t){if(!Number.isSafeInteger(t)||0>t||t>=this.outputs.length)throw new Error(`Wrong output index=${t}`)}getOutput(t){return this.checkOutputIdx(t),F2(this.outputs[t])}get outputsLength(){return this.outputs.length}normalizeOutput(t,r,n){let{amount:i,script:o}=t;if(i===void 0&&(i=r?.amount),typeof i!="bigint")throw new Error("amount must be bigint sats");typeof o=="string"&&(o=Lr.decode(o)),o===void 0&&(o=r?.script);let s={...r,...t,amount:i,script:o};if(s.amount===void 0&&delete s.amount,s=cP(H2,s,r,n),EP.encode(s),s.script&&!this.opts.allowUnknownOutputs&&En.decode(s.script).type==="unknown")throw new Error("Transaction/output: unknown output script type, there is a chance that input is unspendable. Pass allowUnknownScript=true, if you sure");return this.opts.disableScriptCheck||pP(s.script,s.redeemScript,s.witnessScript),s}addOutput(t,r=!1){if(!r&&!this.signStatus().addOutput)throw new Error("Tx has signed outputs, cannot add new one");return this.outputs.push(this.normalizeOutput(t)),this.outputs.length-1}updateOutput(t,r,n=!1){this.checkOutputIdx(t);let i;if(!n){let o=this.signStatus();(!o.addOutput||o.outputs.includes(t))&&(i=Exe)}this.outputs[t]=this.normalizeOutput(r,this.outputs[t],i)}addOutputAddress(t,r,n=Zf){return this.addOutput({script:En.encode($2(n).decode(t)),amount:r})}get fee(){let t=0n;for(let n of this.inputs){let i=this.prevOut(n);if(!i)throw new Error("Empty input amount");t+=i.amount}let r=this.outputs.map(gp);for(let n of r)t-=n.amount;return t}preimageLegacy(t,r,n){let{isAny:i,isNone:o,isSingle:s}=eH(n);if(t<0||!Number.isSafeInteger(t))throw new Error(`Invalid input idx=${t}`);if(s&&t>=this.outputs.length||t>=this.inputs.length)return Rq.encode(1n);r=An.encode(An.decode(r).filter(h=>h!=="CODESEPARATOR"));let a=this.inputs.map(D2).map((h,l)=>({...h,finalScriptSig:l===t?r:Kr}));i?a=[a[t]]:(o||s)&&(a=a.map((h,l)=>({...h,sequence:l===t?h.sequence:0})));let c=this.outputs.map(gp);o?c=[]:s&&(c=c.slice(0,t).fill(yxe).concat([c[t]]));let u=Xa.encode({lockTime:this.lockTime,version:this.version,segwitFlag:!1,inputs:a,outputs:c});return Yf(u,mp.encode(n))}preimageWitnessV0(t,r,n,i){let{isAny:o,isNone:s,isSingle:a}=eH(n),c=U2,u=U2,h=U2,l=this.inputs.map(D2),g=this.outputs.map(gp);o||(c=Yf(...l.map(uP.encode))),!o&&!a&&!s&&(u=Yf(...l.map(A=>tr.encode(A.sequence)))),!a&&!s?h=Yf(...g.map(bp.encode)):a&&t<g.length&&(h=Yf(bp.encode(g[t])));let x=l[t];return Yf(mp.encode(this.version),c,u,Er(32,!0).encode(x.txid),tr.encode(x.index),oa.encode(r),Qg.encode(i),tr.encode(x.sequence),h,tr.encode(this.lockTime),tr.encode(n))}preimageWitnessV1(t,r,n,i,o=-1,s,a=192,c){if(!Array.isArray(i)||this.inputs.length!==i.length)throw new Error(`Invalid amounts array=${i}`);if(!Array.isArray(r)||this.inputs.length!==r.length)throw new Error(`Invalid prevOutScript array=${r}`);let u=[fu.encode(0),fu.encode(n),mp.encode(this.version),tr.encode(this.lockTime)],h=n===Ir.DEFAULT?Ir.ALL:n&3,l=n&Ir.ANYONECANPAY,g=this.inputs.map(D2),x=this.outputs.map(gp);l!==Ir.ANYONECANPAY&&u.push(...[g.map(uP.encode),i.map(Qg.encode),r.map(oa.encode),g.map(E=>tr.encode(E.sequence))].map(E=>Ei(Jf(...E)))),h===Ir.ALL&&u.push(Ei(Jf(...x.map(bp.encode))));let A=(c?1:0)|(s?2:0);if(u.push(new Uint8Array([A])),l===Ir.ANYONECANPAY){let E=g[t];u.push(uP.encode(E),Qg.encode(i[t]),oa.encode(r[t]),tr.encode(E.sequence))}else u.push(tr.encode(t));return A&1&&u.push(Ei(oa.encode(c||Kr))),h===Ir.SINGLE&&u.push(t<x.length?Ei(bp.encode(x[t])):U2),s&&u.push(L2(s,a),fu.encode(0),mp.encode(o)),_o.utils.taggedHash("TapSighash",...u)}prevOut(t){if(t.nonWitnessUtxo){if(t.index===void 0)throw new Error("Unknown input index");return t.nonWitnessUtxo.outputs[t.index]}else{if(t.witnessUtxo)return t.witnessUtxo;throw new Error("Cannot find previous output info")}}inputType(t){let r="legacy",n=Ir.ALL,i=this.prevOut(t),o=En.decode(i.script),s=o.type,a=o,c=[o];if(o.type==="tr")return n=Ir.DEFAULT,{txType:"taproot",type:"tr",last:o,lastScript:i.script,defaultSighash:n,sighash:t.sighashType||n};{if((o.type==="wpkh"||o.type==="wsh")&&(r="segwit"),o.type==="sh"){if(!t.redeemScript)throw new Error("inputType: sh without redeemScript");let g=En.decode(t.redeemScript);(g.type==="wpkh"||g.type==="wsh")&&(r="segwit"),c.push(g),a=g,s+=`-${g.type}`}if(a.type==="wsh"){if(!t.witnessScript)throw new Error("inputType: wsh without witnessScript");let g=En.decode(t.witnessScript);g.type==="wsh"&&(r="segwit"),c.push(g),a=g,s+=`-${g.type}`}let u=c[c.length-1];if(u.type==="sh"||u.type==="wsh")throw new Error("inputType: sh/wsh cannot be terminal type");let h=En.encode(u),l={type:s,txType:r,last:u,lastScript:h,defaultSighash:n,sighash:t.sighashType||n};if(r==="legacy"&&!this.opts.allowLegacyWitnessUtxo&&!t.nonWitnessUtxo)throw new Error("Transaction/sign: legacy input without nonWitnessUtxo, can result in attack that forces paying higher fees. Pass allowLegacyWitnessUtxo=true, if you sure");return l}}signIdx(t,r,n,i){this.checkInputIdx(r);let o=this.inputs[r],s=this.inputType(o);if(!kr(t)){if(!o.bip32Derivation||!o.bip32Derivation.length)throw new Error("bip32Derivation: empty");let h=o.bip32Derivation.filter(g=>g[1].fingerprint==t.fingerprint).map(([g,{path:x}])=>{let A=t;for(let E of x)A=A.deriveChild(E);if(!yr(A.publicKey,g))throw new Error("bip32Derivation: wrong pubKey");if(!A.privateKey)throw new Error("bip32Derivation: no privateKey");return A});if(!h.length)throw new Error(`bip32Derivation: no items with fingerprint=${t.fingerprint}`);let l=!1;for(let g of h)this.signIdx(g.privateKey,r)&&(l=!0);return l}n?n.forEach(Vxe):n=[s.defaultSighash];let a=s.sighash;if(!n.includes(a))throw new Error(`Input with not allowed sigHash=${a}. Allowed: ${n.join(", ")}`);let{sigOutputs:c}=this.inputSighash(r);if(c===Ir.SINGLE&&r>=this.outputs.length)throw new Error(`Input with sighash SINGLE, but there is no output with corresponding index=${r}`);let u=this.prevOut(o);if(s.txType==="taproot"){if(o.tapBip32Derivation)throw new Error("tapBip32Derivation unsupported");let h=this.inputs.map(this.prevOut),l=h.map(B=>B.script),g=h.map(B=>B.amount),x=!1,A=_o.getPublicKey(t),E=o.tapMerkleRoot||Kr;if(o.tapInternalKey){let{pubKey:B,privKey:M}=qxe(t,A,o.tapInternalKey,E),[N,R]=iH(o.tapInternalKey,E);if(yr(N,B)){let V=this.preimageWitnessV1(r,l,a,g),q=Jf(_o.sign(V,M,i),a!==Ir.DEFAULT?new Uint8Array([a]):Kr);this.updateInput(r,{tapKeySig:q},!0),x=!0}}if(o.tapLeafScript){o.tapScriptSig=o.tapScriptSig||[];for(let[B,M]of o.tapLeafScript){let N=M.subarray(0,-1),R=An.decode(N),V=M[M.length-1],q=L2(N,V);if(R.findIndex(te=>kr(te)&&yr(te,A))===-1)continue;let G=this.preimageWitnessV1(r,l,a,g,void 0,N,V),z=Jf(_o.sign(G,t,i),a!==Ir.DEFAULT?new Uint8Array([a]):Kr);this.updateInput(r,{tapScriptSig:[[{pubKey:A,leafHash:q},z]]},!0),x=!0}}if(!x)throw new Error("No taproot scripts signed");return!0}else{let h=cxe(t),l=!1,g=z2(h);for(let E of An.decode(s.lastScript))kr(E)&&(yr(E,h)||yr(E,g))&&(l=!0);if(!l)throw new Error(`Input script doesn't have pubKey: ${s.lastScript}`);let x;if(s.txType==="legacy")x=this.preimageLegacy(r,s.lastScript,a);else if(s.txType==="segwit"){let E=s.lastScript;s.last.type==="wpkh"&&(E=En.encode({type:"pkh",hash:s.last.hash})),x=this.preimageWitnessV0(r,E,a,u.amount)}else throw new Error(`Transaction/sign: unknown tx type: ${s.txType}`);let A=uxe(x,t,this.opts.lowR);this.updateInput(r,{partialSig:[[h,Jf(A,new Uint8Array([a]))]]},!0)}return!0}sign(t,r,n){let i=0;for(let o=0;o<this.inputs.length;o++)try{this.signIdx(t,o,r,n)&&i++}catch{}if(!i)throw new Error("No inputs signed");return i}finalizeIdx(t){if(this.checkInputIdx(t),this.fee<0n)throw new Error("Outputs spends more than inputs amount");let r=this.inputs[t],n=this.inputType(r);if(n.txType==="taproot"){if(r.tapKeySig)r.finalScriptWitness=[r.tapKeySig];else if(r.tapLeafScript&&r.tapScriptSig){let c=r.tapLeafScript.sort((u,h)=>xp.encode(u[0]).length-xp.encode(h[0]).length);for(let[u,h]of c){let l=h.slice(0,-1),g=h[h.length-1],x=En.decode(l),A=L2(l,g),E=r.tapScriptSig.filter(M=>yr(M[0].leafHash,A)),B=[];if(x.type==="tr_ms"){let M=x.m,N=x.pubkeys,R=0;for(let V of N){let q=E.findIndex(W=>yr(W[0].pubKey,V));if(R===M||q===-1){B.push(Kr);continue}B.push(E[q][1]),R++}if(R!==M)continue}else if(x.type==="tr_ns"){for(let M of x.pubkeys){let N=E.findIndex(R=>yr(R[0].pubKey,M));N!==-1&&B.push(E[N][1])}if(B.length!==x.pubkeys.length)continue}else if(x.type==="unknown"&&this.opts.allowUnknownInputs){let M=An.decode(l);if(B=E.map(([{pubKey:N},R])=>{let V=M.findIndex(q=>kr(q)&&yr(q,N));if(V===-1)throw new Error("finalize/taproot: cannot find position of pubkey in script");return{signature:R,pos:V}}).sort((N,R)=>N.pos-R.pos).map(N=>N.signature),!B.length)continue}else throw new Error("Finalize: Unknown tapLeafScript");r.finalScriptWitness=B.reverse().concat([l,xp.encode(u)]);break}if(!r.finalScriptWitness)throw new Error("finalize/taproot: empty witness")}else throw new Error("finalize/taproot: unknown input");r.finalScriptSig=Kr,tH(r);return}if(!r.partialSig||!r.partialSig.length)throw new Error("Not enough partial sign");let i=Kr,o=[];if(n.last.type==="ms"){let c=n.last.m,u=n.last.pubkeys,h=[];for(let l of u){let g=r.partialSig.find(x=>yr(l,x[0]));g&&h.push(g[1])}if(h=h.slice(0,c),h.length!==c)throw new Error(`Multisig: wrong signatures count, m=${c} n=${u.length} signatures=${h.length}`);i=An.encode([0,...h])}else if(n.last.type==="pk")i=An.encode([r.partialSig[0][1]]);else if(n.last.type==="pkh")i=An.encode([r.partialSig[0][1],r.partialSig[0][0]]);else if(n.last.type==="wpkh")i=Kr,o=[r.partialSig[0][1],r.partialSig[0][0]];else if(n.last.type==="unknown"&&!this.opts.allowUnknownInputs)throw new Error("Unknown inputs not allowed");let s,a;if(n.type.includes("wsh-")&&(i.length&&n.lastScript.length&&(o=An.decode(i).map(c=>{if(c===0)return Kr;if(kr(c))return c;throw new Error(`Wrong witness op=${c}`)})),o=o.concat(n.lastScript)),n.txType==="segwit"&&(a=o),n.type.startsWith("sh-wsh-")?s=An.encode([An.encode([0,Ei(n.lastScript)])]):n.type.startsWith("sh-")?s=An.encode([...An.decode(i),n.lastScript]):n.type.startsWith("wsh-")||n.txType!=="segwit"&&(s=i),!s&&!a)throw new Error("Unknown error finalizing input");s&&(r.finalScriptSig=s),a&&(r.finalScriptWitness=a),tH(r)}finalize(){for(let t=0;t<this.inputs.length;t++)this.finalizeIdx(t)}extract(){if(!this.isFinal)throw new Error("Transaction has unfinalized inputs");if(!this.outputs.length)throw new Error("Transaction has no outputs");if(this.fee<0n)throw new Error("Outputs spends more than inputs amount");return this.toBytes(!0,!0)}combine(t){for(let i of["PSBTVersion","version","lockTime"])if(this.opts[i]!==t.opts[i])throw new Error(`Transaction/combine: different ${i} this=${this.opts[i]} other=${t.opts[i]}`);for(let i of["inputs","outputs"])if(this[i].length!==t[i].length)throw new Error(`Transaction/combine: different ${i} length this=${this[i].length} other=${t[i].length}`);let r=this.global.unsignedTx?Xa.encode(this.global.unsignedTx):Kr,n=t.global.unsignedTx?Xa.encode(t.global.unsignedTx):Kr;if(!yr(r,n))throw new Error("Transaction/combine: different unsigned tx");this.global=cP(vP,this.global,t.global);for(let i=0;i<this.inputs.length;i++)this.updateInput(i,t.inputs[i],!0);for(let i=0;i<this.outputs.length;i++)this.updateOutput(i,t.outputs[i],!0);return this}clone(){return e.fromPSBT(this.toPSBT(2),this.opts)}};var pH=X(fg()),TP=X(qI());p();y();p();y();var jxe=O.array(O.object({address:O.string(),signingIndexes:O.array(O.number()),sigHash:O.number().optional(),isScriptSpend:O.boolean().optional()})),Gxe=O.object({chainType:rf,signingType:O.literal("transaction"),message:O.string().min(1),inputsToSign:jxe.optional(),finalize:O.boolean()}),$xe=O.object({chainType:rf,signingType:O.literal("message"),message:O.instanceof(Uint8Array)}),Yxe=Gxe.or($xe),Jxe=O.object({chainType:O.literal("solana"),signingType:O.literal("transaction"),message:O.union([O.string().min(1),O.instanceof(Uint8Array)])}),Zxe=O.object({chainType:O.literal("solana"),signingType:O.literal("message"),message:O.string().min(1)}),Qxe=Jxe.or(Zxe),Xxe=O.object({chainType:O.literal("eip155"),signingType:O.literal("transaction"),message:O.string().min(1)}),ewe=O.object({chainType:O.literal("eip155"),signingType:O.literal("message"),message:O.string().min(1)}),twe=O.object({chainType:O.literal("eip155"),signingType:O.literal("typedData"),version:O.literal(1),data:X_}),rwe=O.object({chainType:O.literal("eip155"),signingType:O.literal("typedData"),version:O.literal(3),data:eB}),nwe=O.object({chainType:O.literal("eip155"),signingType:O.literal("typedData"),version:O.literal(4),data:tB}),iwe=Xxe.or(ewe).or(twe).or(rwe).or(nwe),owe=O.object({isJWT:O.literal(!0),data:ek}),swe=O.object({status:O.literal("success"),signature:O.string()}),awe=O.object({status:O.literal("success"),signature:O.string()}),cwe=O.object({status:O.literal("success"),signature:O.string(),message:O.instanceof(Uint8Array).optional()}),uwe=O.object({status:O.literal("success"),signature:O.string(),signedJWT:X4.optional()}),kP=Qxe.or(iwe).or(Yxe).or(owe),lu=(E=>(E.InvalidInput="invalidInput",E.InvalidAccountId="invalidAccountId",E.InvalidAddressType="invalidAddressType",E.InvalidMessageEncoding="invalidMessageEncoding",E.InvalidDerivationPath="invalidDerivationPath",E.LedgerAppNotOpen="ledgerAppNotOpen",E.LedgerNotConnected="ledgerNotConnected",E.LedgerNeedPermission="ledgerNeedPermission",E.LedgerRejectAction="ledgerRejectAction",E.LedgerUnknownSignError="ledgerUnknownSignError",E.UnsupportedOperation="unsupportedOperation",E.InternalError="internalError",E.ExpiredTokenError="expiredToken",E.BeforeIATError="beforeTimeOfIssuance",E.InvalidClaimError="invalidClaim",E))(lu||{}),fwe=O.object({status:O.literal("error"),type:O.nativeEnum(lu),message:O.string()}),lwe=O.union([uwe,cwe,swe,awe,fwe]);var dwe={invalidInput:{message:"Invalid input"},invalidAccountId:{message:"Invalid account identifier."},invalidAddressType:{message:"Invalid chain type."},invalidMessageEncoding:{message:"Invalid message encoding."},invalidDerivationPath:{message:"Invalid derivation path."},ledgerAppNotOpen:{message:"Ledger App not open."},ledgerNotConnected:{message:"Ledger not connected."},ledgerNeedPermission:{message:"Need permission to connect to Ledger."},ledgerRejectAction:{message:"Ledger user rejected action."},ledgerUnknownSignError:{message:"Ledger unknown sign error."},unsupportedOperation:{message:"Unsupported operation."},internalError:{message:"Internal error."},expiredToken:{message:"Token is expired"},beforeTimeOfIssuance:{message:"Received token before issuance time"},invalidClaim:{message:"Claim is invalid"}},Tr=(e,t)=>({status:"error",type:e,message:t??dwe[e].message});var PP=e=>e.length===32?e:e.slice(1,33);function hwe(e){return io.Buffer.concat([(0,TP.encode)(e.byteLength),e])}function pwe(e){let{sha256:t}=pH.crypto,n=t(io.Buffer.from("BIP0322-signed-message"));return t(io.Buffer.concat([n,n,io.Buffer.from(e)])).toString("hex")}var ywe=(e,t)=>{switch(e){case"bip122_p2tr":return fM.getPublicKey(t);case"bip122_p2sh":return Dc(t,!0);case"bip122_p2wpkh":return Dc(t,!0);default:throw new Error("Unsupported Address Type")}},mwe=(e,t)=>{let r=Zf;switch(e){case"bip122_p2tr":return dH(t,void 0,r);case"bip122_p2wpkh":return IP(t,r);case"bip122_p2sh":{let n=IP(t,r);return fH(n,r)}default:throw new Error("Unsupported Address Type")}};function gwe(e,t,r,n){let i=Ud.fromPSBT(r,{allowUnknownInputs:!0});try{t.forEach(o=>{let s=Js("bip122:000000000019d6689c085ae165831e93",o.address),a=e[s];if(!a)throw new Error("missing private key for ("+s+")");let{publicKey:c,privateKey:u}=a;o.signingIndexes.forEach(h=>{let l=i.getInput(h),g=l.witnessUtxo?.script&&En.decode(l.witnessUtxo.script);if(!o.isScriptSpend&&!l.tapInternalKey&&g?.type==="tr"&&i.updateInput(h,{tapInternalKey:PP(io.Buffer.from(c))}),o.sigHash)try{i.signIdx(u,h,[o.sigHash],fy(32))}catch{i.signIdx(u,h,void 0,fy(32))}else i.signIdx(u,h,void 0,fy(32));if(n)try{i.finalizeIdx(h)}catch{}})})}catch(o){throw console.error(o),new Error(`Error signing PSBT ${o.toString()}`)}return Promise.resolve(i.toPSBT(0))}var yH=()=>({type:"keyPair",sign:async(e,t)=>{try{switch(t.signingType){case"message":{let r=t.chainType,n=io.Buffer.from(t.message).toString("utf8"),i=e[t.chainType]?.privateKey;if(!i)throw new Error("missing private key for ("+t.chainType+")");let o=io.Buffer.from(i).toString("hex"),s=ywe(r,o),a=mwe(r,s),c=io.Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),u=0,h=4294967295,l=0,g=An.encode(["OP_0",io.Buffer.from(pwe(n),"hex")]),x=new Ud({allowUnknownOutputs:!0,version:u});x.addOutput({amount:BigInt(0),script:a.script}),x.addInput({txid:c,index:h,sequence:l,finalScriptSig:g});let A=new Ud({allowUnknownOutputs:!0,version:u});A.addInput({txid:x.id,index:0,sequence:l,tapInternalKey:r==="bip122_p2tr"?s:void 0,witnessUtxo:{script:a.script,amount:BigInt(0)},redeemScript:a.redeemScript}),A.addOutput({script:An.encode(["RETURN"]),amount:BigInt(0)}),A.sign(io.Buffer.from(o,"hex"),void 0,fy(32)),A.finalize();let E=null,B=A.getInput(0);if(B.finalScriptWitness?.length){let M=(0,TP.encode)(B.finalScriptWitness?.length);E=io.Buffer.concat([M,...B.finalScriptWitness.map(N=>hwe(N))])}else throw new Error("couldnt produce a signature");return{status:"success",signature:E.toString("hex"),message:A.toBytes()}}case"transaction":{let r=await gwe(e,t.inputsToSign??[],io.Buffer.from(t.message??"","hex"),t.finalize??!1);return{status:"success",signature:io.Buffer.from(r).toString("hex")}}}}catch{return Tr("internalError")}}});p();y();var Yp=X(Qr()),vG=X(fn());var ac=X(wG()),AG=X(ah());var SG=()=>({type:"keyPair",sign:(e,t)=>{try{switch(t.signingType){case"typedData":{switch(t.version){case 1:{let r=Yp.Buffer.from(e.privateKey.slice()),n=ac.SignTypedDataVersion.V1,{data:i}=t,o=(0,ac.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:o})}case 3:{let r=Yp.Buffer.from(e.privateKey.slice()),n=ac.SignTypedDataVersion.V3,i=t.data,o=(0,ac.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:o})}case 4:{let r=Yp.Buffer.from(e.privateKey.slice()),n=ac.SignTypedDataVersion.V4,i=t.data,o=(0,ac.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:o})}}break}case"message":{let r=t.message,n=(0,ac.personalSign)({privateKey:Yp.Buffer.from(e.privateKey),data:r});return Promise.resolve({status:"success",signature:n})}case"transaction":{let r=Yp.Buffer.from(t.message.replace("0x",""),"hex"),n=new Xo(e.privateKey),i=`0x${(0,AG.keccak256)(r)}`,o=(0,vG.joinSignature)(n.signDigest(i));return Promise.resolve({status:"success",signature:o})}}}catch(r){return console.error(r),Promise.resolve(Tr("invalidMessageEncoding"))}}});p();y();var ih=X(Qr());p();y();p();y();p();y();p();y();function EG(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function nSe(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function j5(e,...t){if(!nSe(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function IG(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");EG(e.outputLen),EG(e.blockLen)}function Jp(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function kG(e,t){j5(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}p();y();p();y();var HS=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function TG(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}var WS=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),pa=(e,t)=>e<<32-t|e>>>t,iSe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!iSe)throw new Error("Non little-endian hardware is not supported");function oSe(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Cb(e){if(typeof e=="string"&&(e=oSe(e)),!TG(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function PG(...e){let t=0;for(let n=0;n<e.length;n++){let i=e[n];if(!TG(i))throw new Error("Uint8Array expected");t+=i.length}let r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var Zp=class{clone(){return this._cloneInto()}},unt={}.toString;function _G(e){let t=n=>e().update(Cb(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function BG(e=32){if(HS&&typeof HS.getRandomValues=="function")return HS.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}var zS=class extends Zp{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,IG(t);let n=Cb(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return Jp(this),this.iHash.update(t),this}digestInto(t){Jp(this),j5(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},G5=(e,t,r)=>new zS(e,t).update(r).digest();G5.create=(e,t)=>new zS(e,t);p();y();p();y();var Z5={};SE(Z5,{bitGet:()=>dSe,bitLen:()=>lSe,bitMask:()=>Mb,bitSet:()=>hSe,bytesToHex:()=>eh,bytesToNumberBE:()=>hu,bytesToNumberLE:()=>GS,concatBytes:()=>Qp,createHmacDrbg:()=>J5,ensureBytes:()=>Oo,equalBytes:()=>uSe,hexToBytes:()=>th,hexToNumber:()=>Y5,isBytes:()=>ya,numberToBytesBE:()=>sl,numberToBytesLE:()=>$S,numberToHexUnpadded:()=>OG,numberToVarBytesBE:()=>cSe,utf8ToBytes:()=>fSe,validateObject:()=>al});p();y();var RG=BigInt(0),jS=BigInt(1),sSe=BigInt(2);function ya(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}var aSe=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function eh(e){if(!ya(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=aSe[e[r]];return t}function OG(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function Y5(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}var du={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function CG(e){if(e>=du._0&&e<=du._9)return e-du._0;if(e>=du._A&&e<=du._F)return e-(du._A-10);if(e>=du._a&&e<=du._f)return e-(du._a-10)}function th(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let s=CG(e.charCodeAt(o)),a=CG(e.charCodeAt(o+1));if(s===void 0||a===void 0){let c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}n[i]=s*16+a}return n}function hu(e){return Y5(eh(e))}function GS(e){if(!ya(e))throw new Error("Uint8Array expected");return Y5(eh(Uint8Array.from(e).reverse()))}function sl(e,t){return th(e.toString(16).padStart(t*2,"0"))}function $S(e,t){return sl(e,t).reverse()}function cSe(e){return th(OG(e))}function Oo(e,t,r){let n;if(typeof t=="string")try{n=th(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else if(ya(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function Qp(...e){let t=0;for(let i=0;i<e.length;i++){let o=e[i];if(!ya(o))throw new Error("Uint8Array expected");t+=o.length}let r=new Uint8Array(t),n=0;for(let i=0;i<e.length;i++){let o=e[i];r.set(o,n),n+=o.length}return r}function uSe(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}function fSe(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function lSe(e){let t;for(t=0;e>RG;e>>=jS,t+=1);return t}function dSe(e,t){return e>>BigInt(t)&jS}var hSe=(e,t,r)=>e|(r?jS:RG)<<BigInt(t),Mb=e=>(sSe<<BigInt(e-1))-jS,$5=e=>new Uint8Array(e),MG=e=>Uint8Array.from(e);function J5(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=$5(e),i=$5(e),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...l)=>r(i,n,...l),c=(l=$5())=>{i=a(MG([0]),l),n=a(),l.length!==0&&(i=a(MG([1]),l),n=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let l=0,g=[];for(;l<t;){n=a();let x=n.slice();g.push(x),l+=n.length}return Qp(...g)};return(l,g)=>{s(),c(l);let x;for(;!(x=g(u()));)c();return s(),x}}var pSe={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||ya(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function al(e,t,r={}){let n=(i,o,s)=>{let a=pSe[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);let c=e[i];if(!(s&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${o}`)};for(let[i,o]of Object.entries(t))n(i,o,!1);for(let[i,o]of Object.entries(r))n(i,o,!0);return e}var Vn=BigInt(0),Wr=BigInt(1),rh=BigInt(2),ySe=BigInt(3),Q5=BigInt(4),NG=BigInt(5),UG=BigInt(8),mSe=BigInt(9),gSe=BigInt(16);function No(e,t){let r=e%t;return r>=Vn?r:t+r}function bSe(e,t,r){if(r<=Vn||t<Vn)throw new Error("Expected power/modulo > 0");if(r===Wr)return Vn;let n=Wr;for(;t>Vn;)t&Wr&&(n=n*e%r),e=e*e%r,t>>=Wr;return n}function YS(e,t){if(e===Vn||t<=Vn)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=No(e,t),n=t,i=Vn,o=Wr,s=Wr,a=Vn;for(;r!==Vn;){let u=n/r,h=n%r,l=i-s*u,g=o-a*u;n=r,r=h,i=s,o=a,s=l,a=g}if(n!==Wr)throw new Error("invert: does not exist");return No(i,t)}function xSe(e){let t=(e-Wr)/rh,r,n,i;for(r=e-Wr,n=0;r%rh===Vn;r/=rh,n++);for(i=rh;i<e&&bSe(i,t,e)!==e-Wr;i++);if(n===1){let s=(e+Wr)/Q5;return function(c,u){let h=c.pow(u,s);if(!c.eql(c.sqr(h),u))throw new Error("Cannot find square root");return h}}let o=(r+Wr)/rh;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,h=a.pow(a.mul(a.ONE,i),r),l=a.pow(c,o),g=a.pow(c,r);for(;!a.eql(g,a.ONE);){if(a.eql(g,a.ZERO))return a.ZERO;let x=1;for(let E=a.sqr(g);x<u&&!a.eql(E,a.ONE);x++)E=a.sqr(E);let A=a.pow(h,Wr<<BigInt(u-x-1));h=a.sqr(A),l=a.mul(l,A),g=a.mul(g,h),u=x}return l}}function wSe(e){if(e%Q5===ySe){let t=(e+Wr)/Q5;return function(n,i){let o=n.pow(i,t);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(e%UG===NG){let t=(e-NG)/UG;return function(n,i){let o=n.mul(i,rh),s=n.pow(o,t),a=n.mul(i,s),c=n.mul(n.mul(a,rh),s),u=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return e%gSe,xSe(e)}var vSe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function X5(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=vSe.reduce((n,i)=>(n[i]="function",n),t);return al(e,r)}function ASe(e,t,r){if(r<Vn)throw new Error("Expected power > 0");if(r===Vn)return e.ONE;if(r===Wr)return t;let n=e.ONE,i=t;for(;r>Vn;)r&Wr&&(n=e.mul(n,i)),i=e.sqr(i),r>>=Wr;return n}function SSe(e,t){let r=new Array(t.length),n=t.reduce((o,s,a)=>e.is0(s)?o:(r[a]=o,e.mul(o,s)),e.ONE),i=e.inv(n);return t.reduceRight((o,s,a)=>e.is0(s)?o:(r[a]=e.mul(o,r[a]),e.mul(o,s)),i),r}function e_(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function DG(e,t,r=!1,n={}){if(e<=Vn)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:i,nByteLength:o}=e_(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=wSe(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:Mb(i),ZERO:Vn,ONE:Wr,create:c=>No(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Vn<=c&&c<e},is0:c=>c===Vn,isOdd:c=>(c&Wr)===Wr,neg:c=>No(-c,e),eql:(c,u)=>c===u,sqr:c=>No(c*c,e),add:(c,u)=>No(c+u,e),sub:(c,u)=>No(c-u,e),mul:(c,u)=>No(c*u,e),pow:(c,u)=>ASe(a,c,u),div:(c,u)=>No(c*YS(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>YS(c,e),sqrt:n.sqrt||(c=>s(a,c)),invertBatch:c=>SSe(a,c),cmov:(c,u,h)=>h?u:c,toBytes:c=>r?$S(c,o):sl(c,o),fromBytes:c=>{if(c.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${c.length}`);return r?GS(c):hu(c)}});return Object.freeze(a)}function LG(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function t_(e){let t=LG(e);return t+Math.ceil(t/2)}function JS(e,t,r=!1){let n=e.length,i=LG(t),o=t_(t);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let s=r?hu(e):GS(e),a=No(s,t-Wr)+Wr;return r?$S(a,i):sl(a,i)}p();y();var ESe=BigInt(0),r_=BigInt(1);function FG(e,t){let r=(i,o)=>{let s=o.negate();return i?s:o},n=i=>{let o=Math.ceil(t/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:r,unsafeLadder(i,o){let s=e.ZERO,a=i;for(;o>ESe;)o&r_&&(s=s.add(a)),a=a.double(),o>>=r_;return s},precomputeWindow(i,o){let{windows:s,windowSize:a}=n(o),c=[],u=i,h=u;for(let l=0;l<s;l++){h=u,c.push(h);for(let g=1;g<a;g++)h=h.add(u),c.push(h);u=h.double()}return c},wNAF(i,o,s){let{windows:a,windowSize:c}=n(i),u=e.ZERO,h=e.BASE,l=BigInt(2**i-1),g=2**i,x=BigInt(i);for(let A=0;A<a;A++){let E=A*c,B=Number(s&l);s>>=x,B>c&&(B-=g,s+=r_);let M=E,N=E+Math.abs(B)-1,R=A%2!==0,V=B<0;B===0?h=h.add(r(R,o[M])):u=u.add(r(V,o[N]))}return{p:u,f:h}},wNAFCached(i,o,s,a){let c=i._WINDOW_SIZE||1,u=o.get(i);return u||(u=this.precomputeWindow(i,c),c!==1&&o.set(i,a(u))),this.wNAF(c,u,s)}}}function n_(e){return X5(e.Fp),al(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...e_(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function ISe(e){let t=n_(e);al(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}var{bytesToNumberBE:kSe,hexToBytes:TSe}=Z5,nh={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=nh;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:kSe(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=nh,r=typeof e=="string"?TSe(e):e;if(!ya(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:i,l:o}=nh._parseInt(r.subarray(2)),{d:s,l:a}=nh._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(e){let t=u=>Number.parseInt(u[0],16)&8?"00"+u:u,r=u=>{let h=u.toString(16);return h.length&1?`0${h}`:h},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,s=i.length/2,a=r(o),c=r(s);return`30${r(s+o+4)}02${c}${i}02${a}${n}`}},pu=BigInt(0),ms=BigInt(1),Cnt=BigInt(2),VG=BigInt(3),Mnt=BigInt(4);function PSe(e){let t=ISe(e),{Fp:r}=t,n=t.toBytes||((A,E,B)=>{let M=E.toAffine();return Qp(Uint8Array.from([4]),r.toBytes(M.x),r.toBytes(M.y))}),i=t.fromBytes||(A=>{let E=A.subarray(1),B=r.fromBytes(E.subarray(0,r.BYTES)),M=r.fromBytes(E.subarray(r.BYTES,2*r.BYTES));return{x:B,y:M}});function o(A){let{a:E,b:B}=t,M=r.sqr(A),N=r.mul(M,A);return r.add(r.add(N,r.mul(A,E)),B)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(A){return typeof A=="bigint"&&pu<A&&A<t.n}function a(A){if(!s(A))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(A){let{allowedPrivateKeyLengths:E,nByteLength:B,wrapPrivateKey:M,n:N}=t;if(E&&typeof A!="bigint"){if(ya(A)&&(A=eh(A)),typeof A!="string"||!E.includes(A.length))throw new Error("Invalid key");A=A.padStart(B*2,"0")}let R;try{R=typeof A=="bigint"?A:hu(Oo("private key",A,B))}catch{throw new Error(`private key must be ${B} bytes, hex or bigint, not ${typeof A}`)}return M&&(R=No(R,N)),a(R),R}let u=new Map;function h(A){if(!(A instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(E,B,M){if(this.px=E,this.py=B,this.pz=M,E==null||!r.isValid(E))throw new Error("x required");if(B==null||!r.isValid(B))throw new Error("y required");if(M==null||!r.isValid(M))throw new Error("z required")}static fromAffine(E){let{x:B,y:M}=E||{};if(!E||!r.isValid(B)||!r.isValid(M))throw new Error("invalid affine point");if(E instanceof l)throw new Error("projective point not allowed");let N=R=>r.eql(R,r.ZERO);return N(B)&&N(M)?l.ZERO:new l(B,M,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(E){let B=r.invertBatch(E.map(M=>M.pz));return E.map((M,N)=>M.toAffine(B[N])).map(l.fromAffine)}static fromHex(E){let B=l.fromAffine(i(Oo("pointHex",E)));return B.assertValidity(),B}static fromPrivateKey(E){return l.BASE.multiply(c(E))}_setWindowSize(E){this._WINDOW_SIZE=E,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:E,y:B}=this.toAffine();if(!r.isValid(E)||!r.isValid(B))throw new Error("bad point: x or y not FE");let M=r.sqr(B),N=o(E);if(!r.eql(M,N))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:E}=this.toAffine();if(r.isOdd)return!r.isOdd(E);throw new Error("Field doesn't support isOdd")}equals(E){h(E);let{px:B,py:M,pz:N}=this,{px:R,py:V,pz:q}=E,W=r.eql(r.mul(B,q),r.mul(R,N)),G=r.eql(r.mul(M,q),r.mul(V,N));return W&&G}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){let{a:E,b:B}=t,M=r.mul(B,VG),{px:N,py:R,pz:V}=this,q=r.ZERO,W=r.ZERO,G=r.ZERO,z=r.mul(N,N),te=r.mul(R,R),_=r.mul(V,V),f=r.mul(N,R);return f=r.add(f,f),G=r.mul(N,V),G=r.add(G,G),q=r.mul(E,G),W=r.mul(M,_),W=r.add(q,W),q=r.sub(te,W),W=r.add(te,W),W=r.mul(q,W),q=r.mul(f,q),G=r.mul(M,G),_=r.mul(E,_),f=r.sub(z,_),f=r.mul(E,f),f=r.add(f,G),G=r.add(z,z),z=r.add(G,z),z=r.add(z,_),z=r.mul(z,f),W=r.add(W,z),_=r.mul(R,V),_=r.add(_,_),z=r.mul(_,f),q=r.sub(q,z),G=r.mul(_,te),G=r.add(G,G),G=r.add(G,G),new l(q,W,G)}add(E){h(E);let{px:B,py:M,pz:N}=this,{px:R,py:V,pz:q}=E,W=r.ZERO,G=r.ZERO,z=r.ZERO,te=t.a,_=r.mul(t.b,VG),f=r.mul(B,R),m=r.mul(M,V),b=r.mul(N,q),v=r.add(B,M),w=r.add(R,V);v=r.mul(v,w),w=r.add(f,m),v=r.sub(v,w),w=r.add(B,N);let P=r.add(R,q);return w=r.mul(w,P),P=r.add(f,b),w=r.sub(w,P),P=r.add(M,N),W=r.add(V,q),P=r.mul(P,W),W=r.add(m,b),P=r.sub(P,W),z=r.mul(te,w),W=r.mul(_,b),z=r.add(W,z),W=r.sub(m,z),z=r.add(m,z),G=r.mul(W,z),m=r.add(f,f),m=r.add(m,f),b=r.mul(te,b),w=r.mul(_,w),m=r.add(m,b),b=r.sub(f,b),b=r.mul(te,b),w=r.add(w,b),f=r.mul(m,w),G=r.add(G,f),f=r.mul(P,w),W=r.mul(v,W),W=r.sub(W,f),f=r.mul(v,m),z=r.mul(P,z),z=r.add(z,f),new l(W,G,z)}subtract(E){return this.add(E.negate())}is0(){return this.equals(l.ZERO)}wNAF(E){return x.wNAFCached(this,u,E,B=>{let M=r.invertBatch(B.map(N=>N.pz));return B.map((N,R)=>N.toAffine(M[R])).map(l.fromAffine)})}multiplyUnsafe(E){let B=l.ZERO;if(E===pu)return B;if(a(E),E===ms)return this;let{endo:M}=t;if(!M)return x.unsafeLadder(this,E);let{k1neg:N,k1:R,k2neg:V,k2:q}=M.splitScalar(E),W=B,G=B,z=this;for(;R>pu||q>pu;)R&ms&&(W=W.add(z)),q&ms&&(G=G.add(z)),z=z.double(),R>>=ms,q>>=ms;return N&&(W=W.negate()),V&&(G=G.negate()),G=new l(r.mul(G.px,M.beta),G.py,G.pz),W.add(G)}multiply(E){a(E);let B=E,M,N,{endo:R}=t;if(R){let{k1neg:V,k1:q,k2neg:W,k2:G}=R.splitScalar(B),{p:z,f:te}=this.wNAF(q),{p:_,f}=this.wNAF(G);z=x.constTimeNegate(V,z),_=x.constTimeNegate(W,_),_=new l(r.mul(_.px,R.beta),_.py,_.pz),M=z.add(_),N=te.add(f)}else{let{p:V,f:q}=this.wNAF(B);M=V,N=q}return l.normalizeZ([M,N])[0]}multiplyAndAddUnsafe(E,B,M){let N=l.BASE,R=(q,W)=>W===pu||W===ms||!q.equals(N)?q.multiplyUnsafe(W):q.multiply(W),V=R(this,B).add(R(E,M));return V.is0()?void 0:V}toAffine(E){let{px:B,py:M,pz:N}=this,R=this.is0();E==null&&(E=R?r.ONE:r.inv(N));let V=r.mul(B,E),q=r.mul(M,E),W=r.mul(N,E);if(R)return{x:r.ZERO,y:r.ZERO};if(!r.eql(W,r.ONE))throw new Error("invZ was invalid");return{x:V,y:q}}isTorsionFree(){let{h:E,isTorsionFree:B}=t;if(E===ms)return!0;if(B)return B(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:E,clearCofactor:B}=t;return E===ms?this:B?B(l,this):this.multiplyUnsafe(t.h)}toRawBytes(E=!0){return this.assertValidity(),n(l,this,E)}toHex(E=!0){return eh(this.toRawBytes(E))}}l.BASE=new l(t.Gx,t.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);let g=t.nBitLength,x=FG(l,t.endo?Math.ceil(g/2):g);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}function _Se(e){let t=n_(e);return al(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function qG(e){let t=_Se(e),{Fp:r,n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(w){return pu<w&&w<r.ORDER}function a(w){return No(w,n)}function c(w){return YS(w,n)}let{ProjectivePoint:u,normPrivateKeyToScalar:h,weierstrassEquation:l,isWithinCurveOrder:g}=PSe({...t,toBytes(w,P,C){let k=P.toAffine(),d=r.toBytes(k.x),S=Qp;return C?S(Uint8Array.from([P.hasEvenY()?2:3]),d):S(Uint8Array.from([4]),d,r.toBytes(k.y))},fromBytes(w){let P=w.length,C=w[0],k=w.subarray(1);if(P===i&&(C===2||C===3)){let d=hu(k);if(!s(d))throw new Error("Point is not on curve");let S=l(d),F=r.sqrt(S),U=(F&ms)===ms;return(C&1)===1!==U&&(F=r.neg(F)),{x:d,y:F}}else if(P===o&&C===4){let d=r.fromBytes(k.subarray(0,r.BYTES)),S=r.fromBytes(k.subarray(r.BYTES,2*r.BYTES));return{x:d,y:S}}else throw new Error(`Point of length ${P} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),x=w=>eh(sl(w,t.nByteLength));function A(w){let P=n>>ms;return w>P}function E(w){return A(w)?a(-w):w}let B=(w,P,C)=>hu(w.slice(P,C));class M{constructor(P,C,k){this.r=P,this.s=C,this.recovery=k,this.assertValidity()}static fromCompact(P){let C=t.nByteLength;return P=Oo("compactSignature",P,C*2),new M(B(P,0,C),B(P,C,2*C))}static fromDER(P){let{r:C,s:k}=nh.toSig(Oo("DER",P));return new M(C,k)}assertValidity(){if(!g(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!g(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(P){return new M(this.r,this.s,P)}recoverPublicKey(P){let{r:C,s:k,recovery:d}=this,S=G(Oo("msgHash",P));if(d==null||![0,1,2,3].includes(d))throw new Error("recovery id invalid");let F=d===2||d===3?C+t.n:C;if(F>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let U=d&1?"03":"02",D=u.fromHex(U+x(F)),Y=c(F),j=a(-S*Y),ee=a(k*Y),le=u.BASE.multiplyAndAddUnsafe(D,j,ee);if(!le)throw new Error("point at infinify");return le.assertValidity(),le}hasHighS(){return A(this.s)}normalizeS(){return this.hasHighS()?new M(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return th(this.toDERHex())}toDERHex(){return nh.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return th(this.toCompactHex())}toCompactHex(){return x(this.r)+x(this.s)}}let N={isValidPrivateKey(w){try{return h(w),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{let w=t_(t.n);return JS(t.randomBytes(w),t.n)},precompute(w=8,P=u.BASE){return P._setWindowSize(w),P.multiply(BigInt(3)),P}};function R(w,P=!0){return u.fromPrivateKey(w).toRawBytes(P)}function V(w){let P=ya(w),C=typeof w=="string",k=(P||C)&&w.length;return P?k===i||k===o:C?k===2*i||k===2*o:w instanceof u}function q(w,P,C=!0){if(V(w))throw new Error("first arg must be private key");if(!V(P))throw new Error("second arg must be public key");return u.fromHex(P).multiply(h(w)).toRawBytes(C)}let W=t.bits2int||function(w){let P=hu(w),C=w.length*8-t.nBitLength;return C>0?P>>BigInt(C):P},G=t.bits2int_modN||function(w){return a(W(w))},z=Mb(t.nBitLength);function te(w){if(typeof w!="bigint")throw new Error("bigint expected");if(!(pu<=w&&w<z))throw new Error(`bigint expected < 2^${t.nBitLength}`);return sl(w,t.nByteLength)}function _(w,P,C=f){if(["recovered","canonical"].some(K=>K in C))throw new Error("sign() legacy options not supported");let{hash:k,randomBytes:d}=t,{lowS:S,prehash:F,extraEntropy:U}=C;S==null&&(S=!0),w=Oo("msgHash",w),F&&(w=Oo("prehashed msgHash",k(w)));let D=G(w),Y=h(P),j=[te(Y),te(D)];if(U!=null){let K=U===!0?d(r.BYTES):U;j.push(Oo("extraEntropy",K))}let ee=Qp(...j),le=D;function fe(K){let Z=W(K);if(!g(Z))return;let J=c(Z),ne=u.BASE.multiply(Z).toAffine(),pe=a(ne.x);if(pe===pu)return;let re=a(J*a(le+pe*Y));if(re===pu)return;let ce=(ne.x===pe?0:2)|Number(ne.y&ms),ut=re;return S&&A(re)&&(ut=E(re),ce^=1),new M(pe,ut,ce)}return{seed:ee,k2sig:fe}}let f={lowS:t.lowS,prehash:!1},m={lowS:t.lowS,prehash:!1};function b(w,P,C=f){let{seed:k,k2sig:d}=_(w,P,C),S=t;return J5(S.hash.outputLen,S.nByteLength,S.hmac)(k,d)}u.BASE._setWindowSize(8);function v(w,P,C,k=m){let d=w;if(P=Oo("msgHash",P),C=Oo("publicKey",C),"strict"in k)throw new Error("options.strict was renamed to lowS");let{lowS:S,prehash:F}=k,U,D;try{if(typeof d=="string"||ya(d))try{U=M.fromDER(d)}catch(ne){if(!(ne instanceof nh.Err))throw ne;U=M.fromCompact(d)}else if(typeof d=="object"&&typeof d.r=="bigint"&&typeof d.s=="bigint"){let{r:ne,s:pe}=d;U=new M(ne,pe)}else throw new Error("PARSE");D=u.fromHex(C)}catch(ne){if(ne.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(S&&U.hasHighS())return!1;F&&(P=t.hash(P));let{r:Y,s:j}=U,ee=G(P),le=c(j),fe=a(ee*le),K=a(Y*le),Z=u.BASE.multiplyAndAddUnsafe(D,fe,K)?.toAffine();return Z?a(Z.x)===Y:!1}return{CURVE:t,getPublicKey:R,getSharedSecret:q,sign:b,verify:v,ProjectivePoint:u,Signature:M,utils:N}}function BSe(e){return{hash:e,hmac:(t,...r)=>G5(e,t,PG(...r)),randomBytes:BG}}function HG(e,t){let r=n=>qG({...e,...BSe(n)});return Object.freeze({...r(t),create:r})}p();y();p();y();function CSe(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var ZS=class extends Zp{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=WS(this.buffer)}update(t){Jp(this);let{view:r,buffer:n,blockLen:i}=this;t=Cb(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=WS(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Jp(this),kG(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let l=s;l<i;l++)r[l]=0;CSe(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=WS(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,h[l],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};var MSe=(e,t,r)=>e&t^~e&r,RSe=(e,t,r)=>e&t^e&r^t&r,OSe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),cl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ul=new Uint32Array(64),i_=class extends ZS{constructor(){super(64,32,8,!1),this.A=cl[0]|0,this.B=cl[1]|0,this.C=cl[2]|0,this.D=cl[3]|0,this.E=cl[4]|0,this.F=cl[5]|0,this.G=cl[6]|0,this.H=cl[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let l=0;l<16;l++,r+=4)ul[l]=t.getUint32(r,!1);for(let l=16;l<64;l++){let g=ul[l-15],x=ul[l-2],A=pa(g,7)^pa(g,18)^g>>>3,E=pa(x,17)^pa(x,19)^x>>>10;ul[l]=E+ul[l-7]+A+ul[l-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:h}=this;for(let l=0;l<64;l++){let g=pa(a,6)^pa(a,11)^pa(a,25),x=h+g+MSe(a,c,u)+OSe[l]+ul[l]|0,E=(pa(n,2)^pa(n,13)^pa(n,22))+RSe(n,i,o)|0;h=u,u=c,c=a,a=s+x|0,s=o,o=i,i=n,n=x+E|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,o,s,a,c,u,h)}roundClean(){ul.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var WG=_G(()=>new i_);var zG=DG(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),NSe=zG.create(BigInt("-3")),USe=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Rb=HG({a:NSe,b:USe,Fp:zG,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},WG);var jG=()=>({type:"keyPair",sign:(e,t)=>{if(!t.isJWT)return Promise.resolve(Tr("invalidAddressType"));let r=Math.floor(Date.now()/1e3);if(t.data.payload.iat>r)return Promise.resolve(Tr("beforeTimeOfIssuance"));if(t.data.payload.exp<r)return Promise.resolve(Tr("expiredToken"));if(t.data.payload.iss!==gg)return Promise.resolve(Tr("invalidClaim"));if(t.data.payload.aud!==bg)return Promise.resolve(Tr("invalidClaim"));let n={...t.data.header,kid:ri(ih.Buffer.from(e.publicKey))},i={...t.data.payload,sub:ri(ih.Buffer.from(e.publicKey))},o=ri(ih.Buffer.from(JSON.stringify(n)))+"."+ri(ih.Buffer.from(JSON.stringify(i))),a=Rb.sign(ih.Buffer.from(o).toString("hex"),e.privateKey,{prehash:!0}).toCompactRawBytes(),c=ri(ih.Buffer.from(a)),u={header:n,payload:i,signature:c};return Promise.resolve({status:"success",signature:c,signedJWT:u})}});p();y();var GG=X(Qr());var o_=X(Os()),$G=X(uh());var YG=()=>({type:"keyPair",sign:(e,t)=>{if(t.chainType!=="solana")return Promise.resolve(Tr("invalidAddressType"));let r;try{typeof t.message=="string"?t.signingType==="transaction"?r=o_.default.decode(t.message):r=GG.Buffer.from(t.message,"utf8"):r=t.message}catch{return Promise.resolve(Tr("invalidMessageEncoding"))}let n=o_.default.encode($G.default.sign.detached(r,e.privateKey));return Promise.resolve({status:"success",signature:n})}});p();y();var QS=class{#e;constructor(t){this.#e=t}async signWithKeypair(t,r){if("isJWT"in r)return this.#e.keyPair.JWT.sign(t,r);switch(r.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return this.#e.keyPair[r.chainType].sign(t,r);case"eip155":return this.#e.keyPair[r.chainType].sign(t,r);case"solana":return this.#e.keyPair[r.chainType].sign(t,r)}}async signWithHardware(t,r,n){return this.#e.ledger.sign(t,r,n)}async signWithSolanaSeedVault(t,r,n){return this.#e.seedVault.sign(t,r,n)}};p();y();var JG=e=>kP.safeParse(e).success;p();y();var DSe=e=>({getSeed:t=>LSe(e,t),setSeed:(t,r)=>KSe(e,t,r),getClientJWTSigner:(t,r)=>FSe(e,t,r),setClientJWTSigner:(t,r,n)=>VSe(e,t,r,n),removeSeeds:t=>ZG(e,t),removeClientJWTKeypairs:t=>QG(e,t),clear:async()=>{await ZG(e,"all"),await QG(e,"all")}}),fl=`${ta}.cache.secrets`,s_=e=>`${ta}.cache.seed.${e}`,a_=e=>`${ta}.cache.client-jwt.${e}`,LSe=async({isEnabled:e,secretsStorage:t},r)=>{if(!e())return null;let n=s_(r),i=null;try{i=await t.getSecureValue(n)}catch{}if(!i)return null;let{bytes:o,encoding:s}=i.seed;return new Uint8Array(Buffer.from(o,s))},KSe=async({isEnabled:e,generalStorage:t,secretsStorage:r},n,i)=>{if(!e())return;let o=s_(n);await r.setSecureValue(o,{version:1,identifier:n,seed:{bytes:Buffer.from(i).toString("base64"),encoding:"base64"}});let s=await t.get(fl);if(!s)s={version:1,seedIdentifiers:[n],clientJWTKeypairIdentifiers:[]};else{let a=new Set(s.seedIdentifiers);a.add(n),s.seedIdentifiers=Array.from(a)}await t.set(fl,s)},ZG=async({generalStorage:e,secretsStorage:t},r)=>{let n=await e.get(fl);if(!n)return;let i=r==="all"?n.seedIdentifiers:r,o=new Set(i),s=n.seedIdentifiers.filter(a=>o.has(a));await t.removeSecureValue(s.map(s_)),await e.set(fl,{version:1,seedIdentifiers:n.seedIdentifiers.filter(a=>!o.has(a)),clientJWTKeypairIdentifiers:n.clientJWTKeypairIdentifiers??[]})},FSe=async({isEnabled:e,secretsStorage:t},r,n)=>{if(!e())return null;let i=a_(r),o=null;try{o=await t.getSecureValue(i)}catch{}if(!o||!o.keyPairs[n])return null;let s=o.keyPairs[n],a=new Uint8Array(Buffer.from(s.p256pubkey.bytes,s.p256pubkey.encoding)),c=new Uint8Array(Buffer.from(s.p256privkey.bytes,s.p256privkey.encoding));return{p256pubkey:a,p256privkey:c}},VSe=async({isEnabled:e,generalStorage:t,secretsStorage:r},n,i,o)=>{if(!e())return;let s=a_(n),a=await r.getSecureValue(s)??{version:1,identifier:n,keyPairs:{}};a.keyPairs[i]={p256pubkey:{bytes:ri(Buffer.from(o.p256pubkey)),encoding:"base64"},p256privkey:{bytes:ri(Buffer.from(o.p256privkey)),encoding:"base64"}},await r.setSecureValue(s,a);let c=await t.get(fl);if(!c)c={version:1,seedIdentifiers:[],clientJWTKeypairIdentifiers:[n]};else{let u=new Set(c.clientJWTKeypairIdentifiers??[]);u.add(n),c.clientJWTKeypairIdentifiers=Array.from(u)}await t.set(fl,c)},QG=async({generalStorage:e,secretsStorage:t},r)=>{let n=await e.get(fl);if(!n||!n.clientJWTKeypairIdentifiers||n.clientJWTKeypairIdentifiers.length===0)return;let i=r==="all"?n.clientJWTKeypairIdentifiers:r,o=new Set(i);await t.removeSecureValue(i.map(a_)),await e.set(fl,{version:1,seedIdentifiers:n.seedIdentifiers,clientJWTKeypairIdentifiers:n.clientJWTKeypairIdentifiers.filter(s=>!o.has(s))})};p();y();p();y();p();y();p();y();p();y();async function c_(e){let t=new Uint8Array(Array.from("mnemonic"+(e.passphrase??"")).map(r=>r.charCodeAt(0)));return e.pbkdf2(e.mnemonic,t,2048,64,"sha512")}p();y();var XG=X(Qr());var HSe=X(uh());p();y();var u_=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"],Wit=new Set(u_);var WSe=(e,t,r,n,i)=>{let o;switch(i){case"rmd160":case"md5":case"sha":throw new Error(`${i} is unsupported by noble`);case"ripemd160":case"sha1":case"sha224":case"sha384":throw new Error(`${i} is supported by noble, but we don't need it for bip39`);case"sha256":o=ly;break;case"sha512":o=bo;break}return mB(o,e,t,{c:r,dkLen:n})},zSe=(e,t,r)=>{for(;e.length<r;)e=t+e;return e},e$=e=>e.map(t=>zSe(t.toString(2),"0",8)).join(""),jSe=e=>parseInt(e,2),GSe=e=>{let r=e.length*8/32,n=ly(e);return e$(Array.from(n)).slice(0,r)};var f_=async e=>{let t=u_;if(e.length<16)throw new Error("InvalidEntropy");if(e.length>32)throw new Error("InvalidEntropy");if(e.length%4!==0)throw new Error("InvalidEntropy");let r=e$(Array.from(e)),n=GSe(e),o=(r+n).match(/(.{1,11})/g);if(!o)throw new Error("InvalidEntropy");let s=o.map(u=>{let h=jSe(u);return t[h]}),a=XG.Buffer.from(s.join(" "));return{seed:await c_({mnemonic:a,pbkdf2:WSe}),mnemonic:a}};p();y();var $Se=X(uh()),iot=new RegExp("^m(\\/[0-9]+')+$");p();y();async function Xp(e,t){let r=await HV(e,t);if(!r)throw new iu;let n=fo.from(r.entropy);return r.entropy.fill(0),n}async function qn(e,t){let r,n=await e.secureCache.getSeed(t);if(n)r=n;else{let o=await Xp(e,t),{seed:s}=await o.foldAsync(f_);r=s,await e.secureCache.setSeed(t,r)}let i=fo.from(r);return r.fill(0),i}p();y();var l_=X(ah());function oh(e){return e.fold(l_.keccak256)}function ll(e,t,r){let n=eu[r];return l_.keccak256(`${e}:${t}:${n}`)}function cc(e,t,r,n){let i={};for(let o of n){let{publicKey:s}=e.keypairGenerator.generateKeypairFromSeed(t,r,o),a=mi.getAddressType(o);switch(o){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":{i[a]={chainType:a,pathType:o,publicKey:s,addresses:Object.values(an).reduce((c,u)=>({...c,[u]:ro({publicKey:s,addressType:a,networkID:u})}),{})};break}case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Root":case"bip44Change":case"bip44":case"deprecated":{i[a]={chainType:a,pathType:o,publicKey:ro({publicKey:s,addressType:a})};break}default:be(o)}}return i}async function t$(e,t){let r=new Set,n=await pr(e);for(let o of n)o.type==="seed"&&o.seedIdentifier===t&&eu[Object.values(o.chains)[0].pathType]===0&&r.add(o.derivationIndex);let i=0;for(let o=0;o<=r.size;o++)if(!r.has(o)){i=o;break}return r$(e,t,i)}async function r$(e,t,r){try{return await YSe(e,t,r)}catch(n){if(n instanceof Ya)return await r$(e,t,r+1);throw n}}async function YSe(e,t,r){let n=await qn(e,t),i=(await e.fetchChainAvailability()).enabledAddressTypes,o=Zs(i),s=await ll(t,r,o[0]),a={version:1,type:"seed",identifier:s,seedIdentifier:t,derivationIndex:r,chains:cc(e,n,r,o)};return await Si(e,a,!1),a}p();y();var u$=X(X1());var f$=X(fg()),l$=X(c$()),d$=X(ah());function tEe(e,t,r){let n=eu[r];return d$.keccak256(`${e}:${t}:${n}`)}async function h$(e,t,r){let n=[];for(let i of r){if(i.addresses.length===0&&i.publicKeys.length===0)throw new Error("Must have at least 1 address or public key in account to add Ledger account.");let o=i.addresses[0]?.pathType||i.publicKeys[0]?.pathType,s=tEe(t,i.derivationIndex,o);f$.initEccLib(u$);let a=(0,l$.ECPairFactory)(u$),c={...i.addresses.reduce((h,l)=>{let g=mi.getAddressType(l.pathType);switch(g){case"eip155":case"solana":{h[g]={chainType:g,pathType:l.pathType,publicKey:l.value};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":throw new Error("Bitcoin accounts should be using public key not computed addresses");default:be(g)}return h},{}),...i.publicKeys.reduce((h,l)=>{let g=mi.getAddressType(l.pathType);switch(g){case"eip155":case"solana":throw new Error("EVM or Solana accounts should be using addreses directly, not public keys");case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let x=a.fromPublicKey(Buffer.from(l.value,"hex")),A=new Uint8Array(x.publicKey);h[g]={chainType:g,pathType:l.pathType,publicKey:A,addresses:Object.values(an).reduce((E,B)=>({...E,[B]:ro({publicKey:A,addressType:g,networkID:B})}),{})};break}default:be(g)}return h},{})},u={version:1,type:"ledger",identifier:s,ledgerGroupIdentifier:t,derivationIndex:i.derivationIndex,chains:c};n.push(u),await Si(e,u)}return n}p();y();var p$=X(ah());function rEe(e){return p$.keccak256(e)}async function y$(e,t,r,n){let i=await e.keypairGenerator.generateKeypairFromPrivateKey(r,t),o=await To(e),s=rEe(i.publicKey);if((o?.privateKeyIdentifiers??[]).includes(s))throw new Og;let u={version:1,identifier:s,name:n,chainType:t,privateKey:Buffer.from(i.privateKey)},h=s,l;switch(t){case"eip155":case"solana":{l={version:1,type:"privateKey",identifier:h,privateKeyIdentifier:s,publicKey:ro({publicKey:i.publicKey,addressType:t}),chainType:t};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{l={version:1,type:"privateKey",identifier:h,privateKeyIdentifier:s,publicKey:i.publicKey,addresses:Object.values(an).reduce((g,x)=>({...g,[x]:ro({publicKey:i.publicKey,addressType:t,networkID:x})}),{}),chainType:t};break}default:be(t)}if(!l)throw new Error("unable to create a private key account based on the address type");return await Si(e,l),await WV(e,u),l}p();y();var m$=X(ah());function nEe(e){return m$.keccak256(e)}async function g$(e,t){let r=Object.values(t).find(Boolean);if(!r)throw new Mg;let n=nEe(r),i={version:1,type:"readOnly",identifier:n,addresses:t};return await Si(e,i),i}p();y();async function b$(e,t){let r=new Set,n=await pr(e);for(let o of n)o.type==="seedless"&&o.seedIdentifier===t&&eu[Object.values(o.chains)[0].pathType]===0&&r.add(o.derivationIndex);let i=0;for(let o=0;o<=r.size;o++)if(!r.has(o)){i=o;break}return x$(e,t,i)}async function x$(e,t,r){try{return await iEe(e,t,r)}catch(n){if(n instanceof Ya)return await x$(e,t,r+1);throw n}}async function iEe(e,t,r){let n=await qn(e,t),i=(await e.fetchChainAvailability()).enabledAddressTypes,o=Zs(i),s=await ll(t,r,o[0]),a={version:1,type:"seedless",identifier:s,seedIdentifier:t,derivationIndex:r,chains:cc(e,n,r,o)};return await Si(e,a,!1),a}p();y();p();y();p();y();async function ry(e,t){let r=await To(e),n=oh(t),i=r?.seedIdentifiers??[],o=r?.seedlessIdentifiers??[];return i.concat(o).includes(n)}async function eE(e,t,r,n){if((await u2(e)).length>0)throw new zA;if(n.length===0)throw new Rg;if(await ry(e,t))throw new vd;let s=oh(t),a=t.fold(h=>({version:1,identifier:s,name:r,entropy:new Uint8Array(h)}));await jV(e,a);let c=[],u=await qn(e,s);for(let h of n){let l=ll(s,h.derivationIndex,h.derivationPathTypes[0]),g=cc(e,u,h.derivationIndex,h.derivationPathTypes),x={version:1,type:"seedless",identifier:l,seedIdentifier:s,derivationIndex:h.derivationIndex,chains:g};await Si(e,x),c.push(x)}return c}async function w$(e,t,r){let n=(await e.fetchChainAvailability()).enabledAddressTypes,i=0,o=Zs(n);return(await eE(e,t,r,[{name:r,derivationIndex:i,derivationPathTypes:o}]))[0]}p();y();p();y();async function tE(e,t,r,n,i=!1){let o=await ry(e,t);if(!i&&o)throw new vd;let s=oh(t),a=t.fold(h=>({version:1,identifier:s,name:r,entropy:new Uint8Array(h)}));await zV(e,a);let c=[],u=await qn(e,s);for(let h of n){let l=await ll(s,h.derivationIndex,h.derivationPathTypes[0]),g=cc(e,u,h.derivationIndex,h.derivationPathTypes),x={version:1,type:"seed",identifier:l,seedIdentifier:s,derivationIndex:h.derivationIndex,chains:g};await Si(e,x),c.push(x)}return c}async function v$(e,t,r){let n=(await e.fetchChainAvailability()).enabledAddressTypes,i=0,o=Zs(n);return(await tE(e,t,r,[{name:r,derivationIndex:i,derivationPathTypes:o}]))[0]}p();y();var A$=X(ah());function oEe(e){return A$.keccak256(e)}async function S$(e,t){let r=[];for(let{publicKey:n,derivationPath:i,authToken:o}of t){let s=oEe(n),a={version:1,type:"seedVault",identifier:s,derivationPath:i,authToken:o,publicKey:n,chainType:"solana"};r.push(a),await Si(e,a)}return r}p();y();p();y();async function rE(e,t,r){let i=(await pr(e)).find(o=>o.identifier===t);if(!i)throw new $a;switch(i.type){case"seed":case"seedless":{let o=i.chains[r]?.pathType;if(!o)throw new qf;let s=await qn(e,i.seedIdentifier),a=e.keypairGenerator.generateKeypairFromSeed(s,i.derivationIndex,o);return fo.from(a.privateKey)}case"privateKey":{let o=await up(e,i.privateKeyIdentifier);if(o.chainType!==r)throw new qf;let s=e.keypairGenerator.generateKeypairFromPrivateKey(fo.from(o.privateKey),r);return fo.from(s.privateKey)}case"ledger":case"seedVault":throw new Bg;case"readOnly":throw new Cg;default:(o=>{throw new Error("invalid account type")})(i)}}var sEe=new iu,aEe=new qf,cEe=new Ad,cn={unableToLoadAccounts:{status:"unable-to-load-accounts",isOnboarded:!1,reonboardingNeeded:!1},unonboarded:{status:"unonboarded",isOnboarded:!1,reonboardingNeeded:!1},invalidIdentifier:{status:"invalid-identifier",isOnboarded:!0,reonboardingNeeded:!0},fetchIntegrityStorageError:{status:"fetch-integrity-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchEntropyStorageError:{status:"fetch-entropy-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchPkStorageError:{status:"fetch-pk-storage-error",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropy:{status:"invalid-entropy",isOnboarded:!0,reonboardingNeeded:!0},invalidPkAddressType:{status:"invalid-pk-address-type",isOnboarded:!0,reonboardingNeeded:!0},invalidPkIdentifier:{status:"invalid-pk-identifier",isOnboarded:!0,reonboardingNeeded:!0},invalidPk:{status:"invalid-pk",isOnboarded:!0,reonboardingNeeded:!0},internalError:{status:"internal-error",isOnboarded:!0,reonboardingNeeded:!0},safelyOnboarded:{status:"safely-onboarded",isOnboarded:!0,reonboardingNeeded:!1}};async function k$(e,t=!1){let r;try{if(r=await pr(e),r.length===0)return cn.unonboarded}catch{return cn.unableToLoadAccounts}return t?uEe(e,r):T$(e,r)}var uEe=async(e,t)=>{let r=await T$(e,t);if(r.status!=="safely-onboarded")return r;try{let s=await CT(e);if(s?.version===3&&s?.isSafelyOnboarded)return cn.safelyOnboarded}catch{return cn.fetchIntegrityStorageError}let n=await I$(e,t,"seed"),i=await I$(e,t,"seedless"),o=await fEe(e,t);return n.status!=="safely-onboarded"?n:i.status!=="safely-onboarded"?i:o.status!=="safely-onboarded"?o:(await BT(e,{version:3,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()}),cn.safelyOnboarded)},T$=async(e,t)=>{try{if((await CT(e))?.isSafelyOnboarded)return cn.safelyOnboarded}catch{return cn.fetchIntegrityStorageError}let r=await E$(e,t,"seed"),n=await E$(e,t,"seedless");return r.status!=="safely-onboarded"?r:n.status!=="safely-onboarded"?n:(await BT(e,{version:1,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()}),cn.safelyOnboarded)},E$=async(e,t,r)=>{let n=new Set;for(let i of t)i.type===r&&n.add(i.seedIdentifier);for(let i of n)try{await Xp(e,i)}catch(o){if(o instanceof Error){if(o.message===sEe.message)return cn.invalidIdentifier;if(o.message.match(/ExpoSecureStorage/))return cn.fetchEntropyStorageError}return cn.internalError}return cn.safelyOnboarded},I$=async(e,t,r)=>{let n=new Set;for(let i of t)i.type===r&&n.add(i.seedIdentifier);for(let i of n)try{await qn(e,i)}catch(o){return o instanceof Error&&o.message.match(/ExpoSecureStorage/)?cn.fetchEntropyStorageError:cn.invalidEntropy}return cn.safelyOnboarded},fEe=async(e,t)=>{for(let r of t)if(r.type==="privateKey")try{await rE(e,r.identifier,r.chainType)}catch(n){if(n instanceof Error){if(n.message===aEe.message)return cn.invalidPkAddressType;if(n.message===cEe.message)return cn.invalidPkIdentifier;if(n.message.match(/ExpoSecureStorage/))return cn.fetchPkStorageError}return cn.invalidPk}return cn.safelyOnboarded};p();y();async function P$(e){let t=(await e.fetchChainAvailability()).enabledAddressTypes,r=!1,n=await pr(e);if(n.length===0)return r;let i=new Map;for(let o of n){if(o.type!=="seed")continue;let s=i.get(o.seedIdentifier);s?s.push(o):i.set(o.seedIdentifier,[o])}for(let[o,s]of i){let a;for(let c of s)if(!(c.chains&&!jk(Object.values(c.chains)[0].pathType)))for(let u of t){if(c.chains[u])continue;a||(a=await qn(e,o));let l=Zs([u]),g=cc(e,a,c.derivationIndex,l);c.chains={...c.chains,...g},r=!0}}return r&&await ra(e,n),r}p();y();p();y();var y_="m/23001'/0'";async function nE(e,t){let r;switch(t.type){case"seedless":case"seed":r=t.seedIdentifier;break;case"privateKey":r=t.privateKeyIdentifier;break}let n=await e.secureCache.getClientJWTSigner(r,y_);if(n)return{publicKey:n.p256pubkey,privateKey:n.p256privkey};let i;switch(t.type){case"seedless":case"seed":{i=(await qn(e,t.seedIdentifier)).fold(s=>new qs(s));break}case"privateKey":{let o=await up(e,t.privateKeyIdentifier);i=new qs(o.privateKey);break}}try{let o=i.derivePath({ellipticCurve:"ed25519",derivationPath:y_}),s=JS(o.secretKey,Rb.CURVE.n),a=Rb.getPublicKey(s);return await e.secureCache.setClientJWTSigner(r,y_,{p256pubkey:a,p256privkey:s}),{publicKey:a,privateKey:s}}finally{i.cleanup()}}var _$=async(e,t)=>{let r=await pr(e);if(r.length===0)throw new Error("No accounts, unable to get authentication public key.");let n=r.find(i=>{switch(i.type){case"seed":case"seedless":return i.seedIdentifier===t;case"privateKey":return i.privateKeyIdentifier===t;case"ledger":case"seedVault":case"readOnly":return!1;default:be(i)}});if(!n)throw new Error("Unable to derive authentication public key for given secret identifier.");switch(n.type){case"seed":case"seedless":case"privateKey":{let i=await nE(e,n);return ri(Buffer.from(i.publicKey))}case"ledger":case"seedVault":case"readOnly":throw new Error(`Authentication public keys are currently unsupported for accounts of type ${n.type}.`);default:return be(n)}};p();y();async function B$(e,t){let r=await pr(e);if(r.length===0)throw new $a;let n=r.filter(i=>i.identifier!==t);await ra(e,n),await _T(e)}p();y();async function C$(e,t,r){let n=await pr(e);if(r<0||r>=n.length)throw new $a;let i=n.map(s=>s.identifier).indexOf(t);if(i<0)throw new $a;if(i===r)return;let o=n[i];n.splice(i,1),n.splice(r,0,o),await ra(e,n)}p();y();async function m_(e,t,r){let n=t.chains[r]?.pathType;if(!n)return Tr("invalidAddressType",`Seed Account does not contain a chain address for the chain type ${r}.`);let i=await qn(e,t.seedIdentifier);return e.keypairGenerator.generateKeypairFromSeed(i,t.derivationIndex,n)}async function M$(e,t,r){let n=await pr(e),i=n.find(o=>o.identifier===t);if(!i)return Tr("invalidAccountId",`Vault (${n.length} account(s) found) does not contain an account for the given identifier: ${t}`);if("isJWT"in r)switch(i.type){case"seedless":case"seed":case"privateKey":{let o=await nE(e,i);return e.vaultSigner.signWithKeypair(o,r)}default:return Tr("unsupportedOperation","Invalid signingAccount type provided for paramType")}switch(i.type){case"seedless":case"seed":{switch(r.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{enabledAddressTypes:o}=await e.fetchChainAvailability(),s={},a=Object.keys(i.chains).filter(c=>rf.safeParse(c).success).filter(c=>o.includes(c));for(let c of a){let u=await m_(e,i,c);if("status"in u&&u.status==="error")return u;s[c]=u}return e.vaultSigner.signWithKeypair(s,r)}case"eip155":{let o=await m_(e,i,r.chainType);return"status"in o&&o.status==="error"?o:e.vaultSigner.signWithKeypair(o,r)}case"solana":{let o=await m_(e,i,r.chainType);return"status"in o&&o.status==="error"?o:e.vaultSigner.signWithKeypair(o,r)}}break}case"privateKey":{let o=await up(e,i.privateKeyIdentifier);if(o.chainType!==r.chainType)return Tr("invalidAddressType",`Private Key account from accountID is a different chain type from params. Expected ${o.chainType}, got ${r.chainType}`);let s=e.keypairGenerator.generateKeypairFromPrivateKey(fo.from(o.privateKey),r.chainType);switch(r.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return e.vaultSigner.signWithKeypair({[r.chainType]:s},r);case"eip155":return e.vaultSigner.signWithKeypair(s,r);case"solana":return e.vaultSigner.signWithKeypair(s,r)}break}case"ledger":{let o=i.chains[r.chainType];if(!o)return Tr("invalidAddressType",`Ledger Account does not contain a chain address for the chain type ${r.chainType}.`);let s=Zw.safeParse({pathType:o.pathType,index:i.derivationIndex});if(!s.success)return Tr("invalidDerivationPath","Unsupported Derivation Path. Ledger account derivation path type is incompatible with ChainType in signing params.");let a=D6(s.data);return e.vaultSigner.signWithHardware(t,a,r)}case"seedVault":{let{authToken:o,derivationPath:s,chainType:a}=i;return a!==r.chainType?Tr("invalidAddressType",`Solana Seed Vault account from accountID is a different chain type from params. Expected ${a}, got ${r.chainType}`):e.vaultSigner.signWithSolanaSeedVault(o,s,r)}case"readOnly":return Tr("unsupportedOperation","Read Only Accounts cannot sign transactions.");default:(o=>{throw new Error("invalid account type")})(i)}}p();y();function g_(e){switch(e.type){case"seed":return Ob(e);case"seedless":return Nb(e);case"privateKey":return x_(e);case"ledger":return b_(e);case"seedVault":return w_(e);case"readOnly":return e}}function b_(e){let{chains:t,version:r,...n}=e,i={};for(let o of Object.keys(t)){let s=t[o];if(!s)continue;let a;switch(s.chainType){case"solana":case"eip155":{let{publicKey:c,...u}=s;a={...u,address:c};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:c,...u}=s,h=Object.values(an).reduce((l,g)=>{let x=c?c[g]:void 0;if(!x)throw new wd;return{...l,[g]:x}},{});a={...u,addresses:h};break}}i[o]=a}return{...n,chains:i}}function x_(e){switch(e.chainType){case"solana":case"eip155":{let{publicKey:t,version:r,...n}=e;return{...n,address:t}}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:t,version:r,...n}=e,i=Object.values(an).reduce((o,s)=>{let a=t?t[s]:void 0;if(!a)throw new wd;return{...o,[s]:a}},{});return{...n,addresses:i}}}}function w_(e){let{publicKey:t,version:r,...n}=e;return{...n,address:t}}function Ob(e){let{chains:t,version:r,...n}=e,i={};for(let o of Object.keys(t)){let s=t[o];if(!s)continue;let a;switch(s.chainType){case"solana":case"eip155":{let{publicKey:c,...u}=s;a={...u,address:c};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:c,...u}=s,h=Object.values(an).reduce((l,g)=>{let x=c?c[g]:void 0;if(!x)throw new wd;return{...l,[g]:x}},{});a={...u,addresses:h};break}}i[o]=a}return{...n,chains:i}}function Nb(e){let{chains:t,version:r,...n}=e,i={};for(let o of Object.keys(t)){let s=t[o];if(!s)continue;let a;switch(s.chainType){case"solana":case"eip155":{let{publicKey:c,...u}=s;a={...u,address:c};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:c,...u}=s,h=Object.values(an).reduce((l,g)=>{let x=c?c[g]:void 0;if(!x)throw new wd;return{...l,[g]:x}},{});a={...u,addresses:h};break}}i[o]=a}return{...n,chains:i}}p();y();var S_=X(Os());var lEe=new Set(Object.values(wt)),R$=e=>e!==null&&lEe.has(e),A_=e=>{},iE=e=>{let t=e.addresses.reduce((r,n)=>{try{let i=Js(n.networkId,n.address);r[i]=n.address}catch{se.addBreadcrumb("Auth","Unable to derive AddressType from networkID and address.","error",{networkID:n.networkId,address:n.address})}return r},{});return Object.entries(t).length===0?(se.captureError(new Error("Unable to convert synced account to read-only account. No addresses found."),"Auth"),null):{version:1,type:"readOnly",identifier:e.accountHash,addresses:t}},v_=(e,t)=>{let r=t==="seed"?"se*d":"se*dless";if(e.derivationIndex===null||e.derivationIndex<0)return se.addBreadcrumb("Auth",`Invalid derivation index for ${r} account: ${e.derivationIndex}`,"error"),null;let n=e.addresses.reduce((o,s)=>{if(s.pathType==="privateKey")return se.addBreadcrumb("Auth",`Invalid path type when converting synced account to ${r} account: ${s.pathType}`,"error"),o;let a=M4(s.pathType);switch(s.pathType){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":hd(a)?o[a]={chainType:a,publicKey:Buffer.from(s.publicKey.replace("0x",""),"hex"),addresses:{"bip122:000000000019d6689c085ae165831e93":s.address},pathType:s.pathType}:se.addBreadcrumb("Auth",`Invalid address type used when converting synced account to ${r} account.`,"error",{addressType:a,pathType:s.pathType});break;case"bip44Root":case"bip44":case"bip44Change":case"deprecated":a==="solana"?o[a]={chainType:a,publicKey:S_.default.encode(Buffer.from(s.publicKey.replace("0x",""),"hex")),pathType:s.pathType}:se.addBreadcrumb("Auth",`Invalid address type used when converting synced account to ${r} account.`,"error",{addressType:a,pathType:s.pathType});break;case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":a==="eip155"?o[a]={chainType:a,publicKey:s.address,pathType:s.pathType}:se.addBreadcrumb("Auth",`Invalid address type used when converting synced account to ${r} account.`,"error",{addressType:a,pathType:s.pathType});break;default:A_(s.pathType)}return o},{});if(Object.entries(n).length===0)return se.captureError(new Error(`Unable to convert synced account to ${r} account. No addresses found.`),"Auth"),null;let i=Vf(e);return i?{version:1,type:t,identifier:e.accountHash,seedIdentifier:i,derivationIndex:e.derivationIndex,chains:n}:(se.captureError(new Error(`Unable to convert synced account to ${r} account. Missing account origin.`),"Auth"),null)},O$=e=>{let t=Vf(e);if(!t)return se.captureError(new Error("Unable to convert synced account to pk account. Missing account origin."),"Auth"),null;let r=e.addresses[0];if(!r)return se.captureError(new Error("Unable to convert synced account to pk account. No address."),"Auth"),null;let n;try{n=Js(r.networkId,r.address)}catch{return se.captureError(new Error("Unable to convert synced account to pk account. Unable to determine address type."),"Auth"),null}return hd(n)?{version:1,type:"privateKey",identifier:e.accountHash,privateKeyIdentifier:t,publicKey:Buffer.from(r.publicKey.replace("0x",""),"hex"),addresses:{"bip122:000000000019d6689c085ae165831e93":r.address},chainType:n}:n==="solana"?{version:1,type:"privateKey",identifier:e.accountHash,privateKeyIdentifier:t,publicKey:S_.default.encode(Buffer.from(r.publicKey.replace("0x",""),"hex")),chainType:n}:n==="eip155"?{version:1,type:"privateKey",identifier:e.accountHash,privateKeyIdentifier:t,publicKey:r.address,chainType:n}:(be(n),null)},N$=async(e,t)=>{let r=await pr(e),n=await To(e),i=new Set(n.seedIdentifiers),o=new Set(n.seedlessIdentifiers),s=new Set(n.privateKeyIdentifiers);for(let c=0;c<r.length;++c){let u=r[c],h=t[u.identifier];if(delete t[u.identifier],!h||u.type!=="readOnly")continue;let l=J0(h),g=Vf(h);if(!R$(l)||!g)continue;let x=null;switch(l){case"seed":case"seedless":try{(i.has(g)||o.has(g))&&(x=v_(h,l))}catch{}break;case"privateKey":try{s.has(g)&&(x=O$(h))}catch{}break;default:A_(l)}x&&(r[c]=x)}let a=[...r];for(let c of Object.values(t)){if(c.addresses.length===0)continue;let u=J0(c),h=Vf(c);if(!R$(u)||!h){let l=iE(c);l&&a.push(l);continue}switch(u){case"seed":if(i.has(h)){let l=v_(c,u);l&&a.push(l)}else{let l=iE(c);l&&a.push(l)}break;case"seedless":if(o.has(h)){let l=v_(c,u);l&&a.push(l)}else{let l=iE(c);l&&a.push(l)}break;case"privateKey":if(s.has(h)){let l=O$(c);l&&a.push(l)}else{let l=iE(c);l&&a.push(l)}break;default:A_(u)}}return await ra(e,a),!1};function dEe(e){return{addSeedWithDefaultAccount:(t,r)=>v$(e,t,r).then(Ob),addAccountForExistingSeed:t=>t$(e,t).then(Ob),addSeedWithMultipleAccounts:(t,r,n,i)=>tE(e,t,r,n,i).then(o=>o.map(Ob)),addPrivateKeyAccount:(t,r,n)=>y$(e,t,r,n).then(x_),addLedgerAccounts:(t,r)=>h$(e,t,r).then(n=>n.map(b_)),addSolanaSeedVaultAccounts:t=>S$(e,t).then(r=>r.map(w_)),addReadonlyAccount:t=>g$(e,t),deriveAddresses:()=>P$(e),removeAccount:t=>B$(e,t),reorderAccount:(t,r)=>C$(e,t,r),exportEntropy:t=>Xp(e,t),exportPrivateKey:(t,r)=>rE(e,t,r),fetchAllAccounts:()=>pr(e).then(t=>t.map(g_)),fetchAllSeedMetas:()=>qV(e),fetchAllSeedlessMetas:()=>u2(e),sign:(t,r)=>M$(e,t,r),isExistingSeed:t=>ry(e,t),checkVaultIntegrity:t=>k$(e,t),clearVault:()=>GV(e),addSeedlessWithMultipleAccounts:(t,r,n)=>eE(e,t,r,n).then(i=>i.map(Nb)),addSeedlessWithDefaultAccount:(t,r)=>w$(e,t,r).then(Nb),addAccountForExistingSeedless:t=>b$(e,t).then(Nb),getAuthenticationPublicKey:t=>_$(e,t),syncAccounts:t=>N$(e,t)}}p();y();p();y();var Rut=wu(ii,e=>new oE(e)),oE=class{#e;constructor(t){this.#e=t}onMigrateInvalidChecksum(){this.#e.capture("migrationMultichainMigrateInvalidChecksum")}onAccountsOnlyMigrationStarted(){this.#e.capture("migrationMultichainAccountOnlyMigrationStarted")}onAccountsOnlyMigrationSettled(t){this.#e.capture("migrationMultichainAccountOnlyMigrationSettled",{data:{isSuccess:t}})}onMigrationFailureFlowOpened(){this.#e.capture("migrationFailureOpen")}onMigrationFailureUnableToFetchLegacyMnemonic(t){this.#e.capture("migrationFailureUnableToFetchLegacyMnemonic",{data:{reason:t}})}onCanStartMigrationResult(t){t.result||this.#e.capture("migrationMultichainCannotStart",{data:{reason:t.reason}})}onMigrationStarted(){this.#e.capture("migrationMultichainStarted")}onMigrationSettled(t,r){this.#e.capture("migrationMultichain",{data:{isGTM:t,isSuccess:r}})}onMigrationSecureStore(){this.#e.capture("migrationSecureStore")}};p();y();var U$=e=>wu(ii,t=>new sE(t,e))(),sE=class{constructor(t,r){this.identifyAccount=async(t,r,n)=>{let i=!!r.addresses.find(g=>ae.isSolanaNetworkID(g.networkID)),o=!!r.addresses.find(g=>ae.isEthereumNetworkID(g.networkID)),s=!!r.addresses.find(g=>ae.isBitcoinNetworkID(g.networkID)),a={hasSolanaAddress:i,hasEthereumAddress:o,hasBitcoinAddress:s},c=n.enabledChainIDs.map(g=>ae[g].name).join(", "),u;this.#t&&(u=(await this.#t.getUser())?.userID);let h=new Set,l=new Set;for(let g of t)switch(g.type){case"seed":case"seedless":h.add(g.seedIdentifier);break;case"readOnly":break;case"privateKey":case"ledger":case"seedVault":l.add(g.identifier);break;default:be(g);break}switch(r.type){case"seed":case"seedless":this.#e.identify(r.identifier,{...a,authUserId:u,accountType:r.type,rootID:r.seedIdentifier,rootIds:Array.from(h),accountIds:Array.from(l),isReadOnly:!1,enabledChains:c});break;case"readOnly":this.#e.identify(r.identifier,{...a,authUserId:u,accountType:r.type,isReadOnly:!0,enabledChains:c});break;case"privateKey":case"ledger":case"seedVault":this.#e.identify(r.identifier,{...a,authUserId:u,accountType:r.type,rootIds:Array.from(h),accountIds:Array.from(l),isReadOnly:!1,enabledChains:c});break;default:be(r)}};this.onAppSessionStart=t=>{let r=new Map;for(let n of t){if(n.type==="readOnly")continue;let{addresses:i,identifier:o}=n;for(let s of i){let a=ae.getChainName(s.networkID),c={type:n.type,accountId:o,id:s.address};if(!r.get(a))r.set(a,[c]);else{let u=r.get(a)??[];r.set(a,[...u,c])}}}this.#e.capture("appSessionStart",{data:{ids:Object.fromEntries(r)}})};this.#e=t,this.#t=r}#e;#t};p();y();p();y();var hEe=e=>{let t=[];for(let r of e)r.type!=="readOnly"&&t.push(r);return t};p();y();p();y();var aE=X(Br());p();y();p();y();p();y();var ny=X(Br()),D$=(0,ny.createContext)(null);function pEe({children:e,storage:t}){return ny.default.createElement(D$.Provider,{value:t},e)}function Se(){let e=(0,ny.useContext)(D$);if(!e)throw new Error("useStorage must be used within a StorageProvider");return e}var yu=()=>{let e=Se(),{data:[t],isLoading:r}=gB(["enable-monad"]);return Bt({enabled:!r,queryKey:hA.chainAvailability({isMonadEnabled:t}),queryFn:()=>pd(e)})};p();y();var E_=()=>{let e=ve(),t=Se();return Ae({mutationFn:async({addressTypes:n})=>{for(let i of n)await dK(i,t);Xc(e)}})};p();y();var yEe=()=>{let e=Se(),t=ve();return Ae({mutationFn:async({chainIDs:n})=>{for(let i of n)await cK(i,e);Xc(t)}})};p();y();p();y();p();y();var iy=X(Br()),L$=(0,iy.createContext)(null);function mEe({children:e,vault:t}){return iy.default.createElement(L$.Provider,{value:t},e)}function Xt(){let e=(0,iy.useContext)(L$);if(!e)throw new Error("useVaultProxy must be used within a VaultProxyProvider");return e}var I_=()=>{let e=ve(),t=Se(),r=Xt();return Ae({mutationFn:async({addressTypes:i})=>{for(let o of i)await lK(o,t);await r.deriveAddresses(),await Xc(e)}})};p();y();var gEe=()=>{let e=Se(),t=ve(),r=Xt();return Ae({mutationFn:async({chainIDs:i})=>{for(let o of i)await G4(o,e);await r.deriveAddresses(),await Xc(t)}})};p();y();var bEe=()=>{let e=Se(),{mutateAsync:t}=E_(),{mutateAsync:r}=I_();return Ae({mutationFn:async({addressTypes:i})=>{if(await uK(e))await r({addressTypes:i});else{let s=new Set(ae.bitcoin.addressTypes);for(let a of i)s.delete(a);if(s.size===ae.bitcoin.addressTypes.length&&s.delete("bip122_p2wpkh"),s.size>0){let a=Array.from(s);await t({addressTypes:a})}}}})};var k_=ae.getAllChainIDs().filter(e=>ae.getDefaultChainEnablement(e)),K$=k_.map(e=>ae.getMainnetNetworkID(e)),xEe=K$.flatMap(e=>ae.getAddressTypes(e)),Adt=()=>yu().data?.enabledAddressTypes??xEe,cE=()=>yu().data?.enabledChainIDs??k_,Sdt=()=>yu().data?.supportedChainIDs??k_,Edt=e=>{let t=yu().data;return t?e?t.enabledNetworkIDs:t.enabledMainnetOnlyNetworkIDs:K$},Idt=()=>cE().length===1,kdt=()=>{let e=cE();return(0,aE.useMemo)(()=>ae.getChainIDs("eip155").some(t=>e.includes(t)),[e])},Tdt=()=>{let e=cE();return(0,aE.useMemo)(()=>e.length===1&&e.includes("solana"),[e])},Pdt=e=>{let t=cE();return(0,aE.useMemo)(()=>e.map(r=>t.includes(r)),[t,e])};p();y();p();y();p();y();var F$=async(e,t)=>(await Vg(e,t))?.balance,V$=async e=>await qg(e);p();y();var kn="@phantom/accounts",T_=`${kn}:account-identifier`,P_=`${kn}:all-multi-chain-seeds`,Fdt=`${kn}:account-balance`,ct={accountBalance(e){return[`${kn}:account-balance`,{identifier:e}]},allAccountBalances(){return[`${kn}:all-account-balances`]},allMultiChainAccounts(e){let t=e?{chainAvailability:{enabledChainIDs:e.enabledChainIDs,enabledAddressTypes:e.enabledAddressTypes}}:{};return[`${kn}:all-multi-chain-accounts`,{chainAvailabilityQueryObject:t}]},allMultiChainSeeds(e){return[P_,e]},developerMode(){return[`${kn}:developer-mode`]},accountIdentifier(e){return[T_,{identifier:e}]},selectedMultiChainAccount(e){let t=e?{chainAvailability:{enabledChainIDs:e.enabledChainIDs,enabledAddressTypes:e.enabledAddressTypes}}:{};return[`${kn}:selected-multi-chain-account`,t]},selectedAccountIdentifier(){return[`${kn}:selected-account-identifier`]},selectedAccountIndex(){return[`${kn}:selected-account-index`]},selectedMultiChainNetworkSetting(){return[`${kn}:selected-multi-chain-network-setting`]},trustedApps(){return[`${kn}:multi-chain-trusted-apps`]},migratedWithInvalidChecksum(){return[`${kn}:migrated-with-invalid-checksum`]},syncUserAccounts(){return[`${kn}:sync-user-accounts`]},accountsEligibleToClaim(e,t,r){return[`${kn}:are-accounts-eligible-to-claim`,{username:e,selectedAccountIdentifier:t,solanaAddresses:r}]}};var wEe=(e,t=!0)=>{let r=Se(),n=t&&!!e,i=ct.accountBalance(e||"");return Bt({queryKey:i,queryFn:async()=>{try{return e&&await F$(r,e)||null}catch(s){throw s instanceof Error&&se.captureError(s,"account"),s}},enabled:n})},vEe=(e=!0)=>{let t=Se(),r=ct.allAccountBalances();return Bt({queryKey:r,queryFn:async()=>{try{return await V$(t)}catch(i){throw i instanceof Error&&se.captureError(i,"account"),i}},enabled:e})};p();y();function Ub(e){let{isSuccess:t,data:r}=yu(),n=Xt(),i=ct.allMultiChainAccounts(r),o=Se();return Bt({enabled:t,queryKey:i,queryFn:async()=>{try{if(!r)throw new Error(Ug);let a=await Id(n,o,r);return se.addBreadcrumb("account",`Finished fetching all accounts. Num accounts: ${a.length}`,"info"),a}catch(a){throw a instanceof Error&&se.captureError(a,"account"),a}},select:e})}var uE=()=>{let{isSuccess:e,isFetching:t,data:r=[]}=Ub(),n=e&&!t&&!!r.length;return n?{enabled:n,accounts:r}:{enabled:n}};p();y();var Vt=async e=>{await e.invalidateQueries({queryKey:[P_]}),await e.invalidateQueries({queryKey:[`${kn}:all-multi-chain-accounts`],predicate:t=>t.queryKey[0]===`${kn}:all-multi-chain-accounts`}),await e.invalidateQueries({queryKey:[T_]}),await fE(e)},fE=async e=>{await e.invalidateQueries({predicate:t=>typeof t.queryKey[0]=="string"&&t.queryKey[0]===`${kn}:selected-multi-chain-account`}),await e.invalidateQueries({queryKey:ct.selectedAccountIndex()}),await e.invalidateQueries({queryKey:ct.selectedAccountIdentifier()})};$4(Vt);p();y();p();y();function lE(){let e=Se(),t=ve();return Ae({mutationFn:async({metadataBatch:o})=>{se.addBreadcrumb("account",`Adding Account Metadata Batch: ${Object.entries(o).length} entries`,"info"),await Fg(e,o)},onSuccess:async()=>{await Vt(t)},onError:o=>{se.captureError(o,"account")}})}function AEe(){let{mutateAsync:e}=lE(),t=Se(),r=ve(),n=Xt(),{t:i}=Us();return Ae({mutationFn:async({accounts:c,pairedBLEDevice:u})=>{let h=sB(),l=await n.connectLedgerAccounts(h,c),g=l.reduce((A,E,B)=>{let{name:M,accountIndex:N}=c[B],R;!M||M.length===0?R=i("onboardingImportAccountsLedgerAccountName",{walletIndex:1+N}):R=M;let V;u&&(V=[{...u,version:1,connectionType:"ble",deviceType:"ledger"}]);let q={name:R,icon:void 0,connectedDevices:V};return A[E.identifier]=q,A},{});await e({metadataBatch:g});let x=l[0]?.identifier;return x||(x=(await n.fetchAllAccounts())[0].identifier),await Fi(t,x),r.setQueryData(ct.selectedAccountIdentifier(),x),l},onSettled:async()=>{await Vt(r)},onError:c=>se.captureError(c,"account")})}p();y();var q$=X(Br());var SEe=e=>{if(e){switch(e.type){case"seed":case"seedless":return e.seedIdentifier;case"privateKey":case"ledger":case"seedVault":case"readOnly":return}be(e)}};function uc({select:e,updateESPUserProperties:t,authRepository:r}={}){let n=(0,q$.useMemo)(()=>Ec.isFeatureEnabled("frontend-enable-esp-user-properties-update"),[]),{isSuccess:i,data:o}=yu(),s=uE(),a=s.enabled&&i,c=Gb(),u=Se(),h=U$(r),l=ct.selectedMultiChainAccount(o);return Bt({queryKey:l,queryFn:async()=>{try{if(!o)throw new Error(Ug);if(!s.enabled)throw new Error(Q0);let x=await ou(s.accounts,u);if(se.addBreadcrumb("account",`Finished fetching selected account: ${x.identifier}`,"info"),n&&t){let A=x.addresses.map(E=>E.address)??[];Promise.all(A.map(E=>t(E,vu.language)))}return Ec.setSubjectAttributes({rootID:SEe(x)}),c(),h.identifyAccount(s.accounts,x,o),x}catch(x){throw x instanceof Error&&se.captureError(x,"account"),x}},enabled:a,select:e})}p();y();function EEe(){let e=Se(),t=ve();return Ae({mutationFn:async({identifier:i,balance:o})=>(await hT(e,i,o),{identifier:i,balance:o}),onSuccess:({identifier:i,balance:o})=>{i&&t.invalidateQueries({queryKey:ct.accountBalance(i)}),o&&t.invalidateQueries({queryKey:ct.allAccountBalances()})}})}p();y();var H$=X(Br());var Db=()=>{let{data:e}=uc();return(0,H$.useMemo)(()=>{let t=e?.addresses??[];return[...new Set(t.map(r=>r.networkID))]},[e])};p();y();p();y();function __(){let e=ct.developerMode(),t=Se();return Bt({queryKey:e,queryFn:async()=>await t.get("developerMode")||Y4})}var IEe=()=>{let{data:e}=__();return!!e?.isDeveloperMode},kEe=()=>Db().some(t=>ae.isLocalNetworkID(t));p();y();var W$=X(Br());var TEe=e=>{let t=(0,W$.useMemo)(()=>{if(e){if(PEe(e))return n=>n.address===e.address&&n.networkID===e.networkID;if(ae.isNetworkID(e))return n=>n.networkID===e;if(J8(e))return n=>n.addressType===e;throw new Error(`Unrecognized filter type: ${e}`)}else return()=>!1},[e]);return uc({select:n=>{let i=n.addresses.filter(t);if(i.length>1)throw new Error(`Multiple addresses match filter: ${e}`);return i[0]}})};function PEe(e){return typeof e=="object"&&"address"in e&&(typeof e.address=="string"||e.address===void 0)&&"networkID"in e}p();y();var z$=X(Br()),_Ee=({accountBalance:e,accountId:t,enabled:r,value:n,setAccountBalance:i})=>{(0,z$.useEffect)(()=>{if(r&&t&&n!==void 0&&n!==e){let o=Date.now();i({identifier:t,balance:{timestamp:o,value:n}})}},[e,t,r,n,i])};p();y();p();y();var zi=X(Br());function BEe(e){let t,r=new Set,n=(u,h)=>{let l=typeof u=="function"?u(t):u;if(l!==t){let g=t;t=h?l:Object.assign({},t,l),r.forEach(x=>x(t,g))}},i=()=>t,o=(u,h=i,l=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let g=h(t);function x(){let A=h(t);if(!l(g,A)){let E=g;u(g=A,E)}}return r.add(x),()=>r.delete(x)},c={setState:n,getState:i,subscribe:(u,h,l)=>h||l?o(u,h,l):(r.add(u),()=>r.delete(u)),destroy:()=>r.clear()};return t=e(n,i,c),c}var CEe=typeof self>"u"||!self.navigator||/ServerSideRendering|^Deno\//.test(self.navigator.userAgent),j$=CEe?zi.useEffect:zi.useLayoutEffect;function dE(e){let t=typeof e=="function"?BEe(e):e,r=(n=t.getState,i=Object.is)=>{let[,o]=(0,zi.useReducer)(B=>B+1,0),s=t.getState(),a=(0,zi.useRef)(s),c=(0,zi.useRef)(n),u=(0,zi.useRef)(i),h=(0,zi.useRef)(!1),l=(0,zi.useRef)();l.current===void 0&&(l.current=n(s));let g,x=!1;(a.current!==s||c.current!==n||u.current!==i||h.current)&&(g=n(s),x=!i(l.current,g)),j$(()=>{x&&(l.current=g),a.current=s,c.current=n,u.current=i,h.current=!1});let A=(0,zi.useRef)(s);j$(()=>{let B=()=>{try{let N=t.getState(),R=c.current(N);u.current(l.current,R)||(a.current=N,l.current=R,o())}catch{h.current=!0,o()}},M=t.subscribe(B);return t.getState()!==A.current&&B(),M},[]);let E=x?g:l.current;return(0,zi.useDebugValue)(E),E};return Object.assign(r,t),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");let n=[r,t];return{next(){let i=n.length<=0;return{value:n.shift(),done:i}}}},r}var G$={username:"",icon:null,secretIdentifiers:[],accountIdentifiersToSync:[],addresses:{}},$$=dE((e,t)=>({...G$,setUsername:r=>e({username:r}),setIcon:r=>e({icon:r}),addSecretIdentifier:r=>{let n=[...t().secretIdentifiers];n.includes(r)||n.push(r),e({secretIdentifiers:n})},removeSecretIdentifier:r=>{e({secretIdentifiers:t().secretIdentifiers.filter(n=>n!==r)})},addAccountIdentifierToSync:r=>{let n=[...t().accountIdentifiersToSync];n.includes(r)||n.push(r),e({accountIdentifiersToSync:n})},removeAccountIdentifierToSync:r=>{e({accountIdentifiersToSync:t().accountIdentifiersToSync.filter(n=>n!==r)})},clearAccountIdentifiersToSync:()=>e({accountIdentifiersToSync:[]}),setAccountIdentifiersToSync:r=>e({accountIdentifiersToSync:r}),addAddress:(r,n)=>{let i={...t().addresses};i[r]=n,e({addresses:i})},removeAddress:(r,n)=>{let i={...t().addresses};i[r]===n&&delete i[r],e({addresses:i})},clearAddresses:()=>{e({addresses:{}})},reset:()=>{e(G$)}}));p();y();p();y();var MEe={editableAccountMetadata:void 0,setEditableAccountMetadata:()=>{}},hE=dE(e=>({...MEe,setEditableAccountMetadata:t=>{e({editableAccountMetadata:t})}}));p();y();p();y();function REe(e){let t=uE(),r=t.enabled&&e.length>0,n=ct.accountIdentifier(e);return Bt({enabled:r,queryKey:n,queryFn:async()=>{try{if(se.addBreadcrumb("account",`Fetching Account: ${e}`,"info"),!t.enabled)throw new Error(Q0);let{accounts:o}=t,s=o.find(a=>a.identifier===e);if(!s)throw new Error(OF(o.length,e));return s}catch(o){throw o instanceof Error&&se.captureError(o,"account"),o}}})}p();y();p();y();function OEe(){let e=Se(),t=ve(),r=Xt(),{t:n}=Us();return Ae({mutationFn:async({name:c,icon:u,seedIdentifier:h})=>{se.addBreadcrumb("account","Generating new multi-chain account","info");let l=await r.addAccountForSeed(h),g;if(!c||c.length===0){let A=await r.fetchAllAccounts();g=n("onboardingImportAccountsAccountName",{walletIndex:A.length})}else g=c;let x={name:g,icon:u};return await Za(e,l.identifier,x),await Fi(e,l.identifier),l},onSettled:async()=>{await Vt(t)},onSuccess:c=>{t.setQueryData(ct.selectedAccountIdentifier(),c.identifier)},onError:c=>se.captureError(c,"account")})}p();y();function NEe(){let e=Se(),t=ve(),r=Xt();return Ae({mutationFn:async({name:a,addresses:c,icon:u})=>{let h=await r.addReadonlyAccount(c),l={name:a,icon:u};return await Za(e,h.identifier,l),await Fi(e,h.identifier),h},onSettled:async()=>{await Vt(t)},onSuccess:a=>{t.setQueryData(ct.selectedAccountIdentifier(),a.identifier)},onError:a=>se.captureError(a,"account")})}p();y();function UEe(){let e=Se(),t=ve(),r=Xt(),{t:n}=Us();return Ae({mutationFn:async({name:c,icon:u,socialSeedIdentifier:h})=>{se.addBreadcrumb("account","Generating new social seed account","info");let l=await r.addAccountForSeedless(h),g;if(!c||c.length===0){let A=await r.fetchAllAccounts();g=n("onboardingImportAccountsAccountName",{walletIndex:A.length})}else g=c;let x={name:g,icon:u};return await Za(e,l.identifier,x),await Fi(e,l.identifier),l},onSettled:async()=>{await Vt(t)},onSuccess:c=>{t.setQueryData(ct.selectedAccountIdentifier(),c.identifier)},onError:c=>se.captureError(c,"account")})}p();y();function Lb(e){let t=Xt(),r=ct.allMultiChainSeeds(e);return Bt({queryKey:r,queryFn:async()=>{try{let i;switch(e){case"all":{let o=await t.fetchAllSeedMetas();i=[...await t.fetchAllSeedlessMetas(),...o];break}case"seeds-only":{i=[...await t.fetchAllSeedMetas()];break}case"seedless-seeds-only":{i=[...await t.fetchAllSeedlessMetas()];break}}return i}catch(i){throw i instanceof Error&&se.captureError(i,"account"),i}}})}p();y();p();y();function DEe(){let e=Se(),t=ve(),r=Xt();return Ae({mutationFn:async({chainType:s,privateKey:a,name:c,icon:u})=>{se.addBreadcrumb("account","Importing Private Key Account... \u23F3","info");let h=await r.importPrivateKeyAccount(s,a),l={name:c,icon:u};return await Za(e,h.identifier,l),await Fi(e,h.identifier),se.addBreadcrumb("account",`Imported Private Key Account \u2705: ${h.identifier}`,"info"),h},onSettled:async()=>{await Vt(t)},onSuccess:s=>{t.setQueryData(ct.selectedAccountIdentifier(),s.identifier)}})}p();y();p();y();function LEe(){let e=ct.selectedMultiChainNetworkSetting(),t=Se();return Bt({queryKey:e,queryFn:()=>rp(t)})}p();y();function KEe(){let e=Se(),t=ii(),r=Xt(),n=ve(),i=zt();return Ae({mutationFn:async({identifier:a})=>{se.addBreadcrumb("account",`Removing Account... \u23F3: ${a}`,"info"),await Promise.all([r.removeAccount(a),Hg(e,a)]),await ou(await r.fetchAllAccounts(),e),t.capture("removeAccount"),i.deleteSyncedAccount(a),se.addBreadcrumb("account",`Removed Account \u2705: ${a}`,"info")},onSuccess:async()=>{await Vt(n)}})}p();y();function FEe(){let e=Se(),t=ii(),r=ve(),n=Xt();return Ae({mutationFn:async({seedIdentifier:a})=>{let c=await n.fetchAllAccounts(),u=[];for(let h of c)switch(h.type){case"privateKey":case"ledger":case"seedVault":case"readOnly":continue;case"seed":case"seedless":h.seedIdentifier===a&&u.push(h.identifier);break;default:be(h)}for(let h of u)await Promise.all([n.removeAccount(h),Hg(e,h)]);t.capture("removeSeed",{data:{numOfAccounts:u.length}})},onSuccess:()=>{Vt(r)},onError:a=>{se.captureError(a,"account")}})}p();y();function VEe(){let e=Se(),t=ve(),r=zt();return Ae({mutationFn:async({identifier:s,name:a})=>{se.addBreadcrumb("account","Renaming Multichain Account","info"),await lT(e,s,a),r.uploadSyncedAccounts()},onSuccess:async()=>{await Vt(t)},onError:s=>se.captureError(s,"account")})}p();y();function qEe(){let e=ve(),t=Xt();return Ae({mutationFn:async({identifier:i,toIndex:o})=>{await t.reorderAccount(i,o)},onSuccess:()=>{Vt(e)}})}p();y();function HEe(){let e=ct.selectedAccountIdentifier(),t=Se(),r=Xt();return Bt({queryKey:e,queryFn:async()=>{try{let i=await r.fetchAllAccounts(),s=(await ou(i,t)).identifier;if(!s)throw new Error("Unable to resolve selected account identifier => no available accounts or identifier!");return s}catch(i){throw i instanceof Error&&se.captureError(i,"account"),i}}})}p();y();function WEe(){let e=Se(),t=ve();return Ae({mutationFn:async({developerMode:i})=>{t.setQueryData(ct.developerMode(),i),await e.set("developerMode",i)},onSuccess:()=>{Vt(t)}})}p();y();function zEe(){let e=Se(),t=ve(),r=zt();return Ae({mutationFn:async({identifier:o,icon:s})=>{se.addBreadcrumb("account","Setting Multichain Account Icon","info"),await dT(e,o,s),r.uploadSyncedAccounts()},onSuccess:async()=>{await Vt(t)}})}p();y();function jEe(){let e=Se(),t=ve();return Ae({mutationFn:async({networkSetting:i})=>{t.setQueryData(ct.selectedMultiChainNetworkSetting(),i),await e.set("networkSetting",i)},onSuccess:()=>{Vt(t)}})}p();y();function GEe(){let e=Se(),t=ii(),r=ve();return Ae({mutationFn:async({identifier:s})=>(await Fi(e,s),t.capture("changeAccount",{data:{identifier:s}}),s),onSuccess:s=>{fE(r),r.setQueryData(ct.selectedAccountIdentifier(),s)},onError:s=>se.captureError(s,"account")})}p();y();var $Ee=()=>{let e=ve(),t=zt(),r=bd(),n=ct.syncUserAccounts();return Bt({enabled:r,queryKey:n,queryFn:async()=>{let o=!1;try{o=await t.downloadSyncedAccounts()}catch{return!1}return o&&await Vt(e),o},gcTime:1/0,staleTime:1/0})};p();y();var Y$=X(Br());var YEe=()=>{let{data:e,isFetching:t}=Ub(),{data:r,isFetching:n}=uc(),i=Db();return(0,Y$.useMemo)(()=>({data:{"All Accounts":e,"Selected Account":r??null,"Selected Networks":i.map(o=>ae.getNetworkName(o))},isFetching:t||n}),[e,t,n,r,i])};p();y();var AE=X(Br());p();y();var gr=X(Br(),1),qb=e=>e.type==="checkbox",sy=e=>e instanceof Date,uo=e=>e==null,sY=e=>typeof e=="object",Hn=e=>!uo(e)&&!Array.isArray(e)&&sY(e)&&!sy(e),aY=e=>Hn(e)&&e.target?qb(e.target)?e.target.checked:e.target.value:e,JEe=e=>e.substring(0,e.search(/.\d/))||e,cY=(e,t)=>[...e].some(r=>JEe(t)===r),xE=e=>e.filter(Boolean),Zr=e=>e===void 0,xe=(e,t,r)=>{if(!t||!Hn(e))return r;let n=xE(t.split(/[,[\].]+?/)).reduce((i,o)=>uo(i)?i:i[o],e);return Zr(n)||n===e?Zr(e[t])?r:e[t]:n},R_={BLUR:"blur",CHANGE:"change"},ma={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},mu={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},U_=(e,t)=>{let r=Object.assign({},e);return delete r[t],r},ZEe=gr.default.createContext(null),D_=()=>gr.default.useContext(ZEe);var uY=(e,t,r,n=!0)=>{function i(s){return()=>{if(s in e)return t[s]!==ma.all&&(t[s]=!n||ma.all),r&&(r[s]=!0),e[s]}}let o={};for(let s in e)Object.defineProperty(o,s,{get:i(s)});return o},Uo=e=>Hn(e)&&!Object.keys(e).length,fY=(e,t,r)=>{let n=U_(e,"name");return Uo(n)||Object.keys(n).length>=Object.keys(t).length||Object.keys(n).find(i=>t[i]===(!r||ma.all))},pE=e=>Array.isArray(e)?e:[e],lY=(e,t,r)=>r&&t?e===t:!e||!t||e===t||pE(e).some(n=>n&&(n.startsWith(t)||t.startsWith(n)));function L_(e){let t=gr.default.useRef(e);t.current=e,gr.default.useEffect(()=>{let r=i=>{i&&i.unsubscribe()},n=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>r(n)},[e.disabled])}function QEe(e){let t=D_(),{control:r=t.control,disabled:n,name:i,exact:o}=e||{},[s,a]=gr.default.useState(r._formState),c=gr.default.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=gr.default.useRef(i),h=gr.default.useRef(!0);u.current=i;let l=gr.default.useCallback(g=>h.current&&lY(u.current,g.name,o)&&fY(g,c.current)&&a(Object.assign(Object.assign({},r._formState),g)),[r,o]);return L_({disabled:n,callback:l,subject:r._subjects.state}),gr.default.useEffect(()=>()=>{h.current=!1},[]),uY(s,r._proxyFormState,c.current,!1)}var fc=e=>typeof e=="string",dY=(e,t,r,n)=>{let i=Array.isArray(e);return fc(e)?(n&&t.watch.add(e),xe(r,e)):i?e.map(o=>(n&&t.watch.add(o),xe(r,o))):(n&&(t.watchAll=!0),r)},wE=e=>typeof e=="function",K_=e=>{for(let t in e)if(wE(e[t]))return!0;return!1};function XEe(e){let t=D_(),{control:r=t.control,name:n,defaultValue:i,disabled:o,exact:s}=e||{},a=gr.default.useRef(n);a.current=n;let c=gr.default.useCallback(l=>{if(lY(a.current,l.name,s)){let g=dY(a.current,r._names,l.values||r._formValues);h(Zr(a.current)||Hn(g)&&!K_(g)?Object.assign({},g):Array.isArray(g)?[...g]:Zr(g)?i:g)}},[r,s,i]);L_({disabled:o,subject:r._subjects.watch,callback:c});let[u,h]=gr.default.useState(Zr(i)?r._getWatch(n):i);return gr.default.useEffect(()=>{r._removeUnmounted()}),u}function e3e(e){let t=D_(),{name:r,control:n=t.control,shouldUnregister:i}=e,o=cY(n._names.array,r),s=XEe({control:n,name:r,defaultValue:xe(n._formValues,r,xe(n._defaultValues,r,e.defaultValue)),exact:!o}),a=QEe({control:n,name:r}),c=gr.default.useRef(n.register(r,Object.assign(Object.assign({},e.rules),{value:s})));return gr.default.useEffect(()=>{let u=(h,l)=>{let g=xe(n._fields,h);g&&(g._f.mount=l)};return u(r,!0),()=>{let h=n._options.shouldUnregister||i;o?h&&n._stateFlags.action:h?n.unregister(r):u(r,!1)}},[r,n,o,i]),{field:{name:r,value:s,onChange:gr.default.useCallback(u=>{c.current.onChange({target:{value:aY(u),name:r},type:R_.CHANGE})},[r]),onBlur:gr.default.useCallback(()=>{c.current.onBlur({target:{value:xe(n._formValues,r),name:r},type:R_.BLUR})},[r,n]),ref:gr.default.useCallback(u=>{let h=xe(n._fields,r);u&&h&&u.focus&&(h._f.ref={focus:()=>u.focus(),setCustomValidity:l=>u.setCustomValidity(l),reportValidity:()=>u.reportValidity()})},[r,n])},formState:a,fieldState:{invalid:!!xe(a.errors,r),isDirty:!!xe(a.dirtyFields,r),isTouched:!!xe(a.touchedFields,r),error:xe(a.errors,r)}}}var hY=e=>e.render(e3e(e)),t3e=(e,t,r,n,i)=>t?Object.assign(Object.assign({},r[e]),{types:Object.assign(Object.assign({},r[e]&&r[e].types?r[e].types:{}),{[n]:i||!0})}):{},F_=e=>/^\w*$/.test(e),pY=e=>xE(e.replace(/["|']|\]/g,"").split(/\.|\[/));function un(e,t,r){let n=-1,i=F_(t)?[t]:pY(t),o=i.length,s=o-1;for(;++n<o;){let a=i[n],c=r;if(n!==s){let u=e[a];c=Hn(u)||Array.isArray(u)?u:isNaN(+i[n+1])?{}:[]}e[a]=c,e=e[a]}return e}var O_=(e,t,r)=>{for(let n of r||Object.keys(e)){let i=xe(e,n);if(i){let o=i._f,s=U_(i,"_f");if(o&&t(o.name)){if(o.ref.focus&&Zr(o.ref.focus()))break;if(o.refs){o.refs[0].focus();break}}else Hn(s)&&O_(s,t)}}};var J$=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));function Fb(e){let t,r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(r||Hn(e)){t=r?[]:{};for(let n in e){if(wE(e[n])){t=e;break}t[n]=Fb(e[n])}}else return e;return t}function B_(){let e=[];return{get observers(){return e},next:i=>{for(let o of e)o.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(o=>o!==i)}}),unsubscribe:()=>{e=[]}}}var mE=e=>uo(e)||!sY(e);function ay(e,t){if(mE(e)||mE(t))return e===t;if(sy(e)&&sy(t))return e.getTime()===t.getTime();let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i of r){let o=e[i];if(!n.includes(i))return!1;if(i!=="ref"){let s=t[i];if(sy(o)&&sy(s)||Hn(o)&&Hn(s)||Array.isArray(o)&&Array.isArray(s)?!ay(o,s):o!==s)return!1}}return!0}var Z$=e=>({isOnSubmit:!e||e===ma.onSubmit,isOnBlur:e===ma.onBlur,isOnChange:e===ma.onChange,isOnAll:e===ma.all,isOnTouch:e===ma.onTouched}),Vb=e=>typeof e=="boolean",V_=e=>e.type==="file",N_=e=>e instanceof HTMLElement,yY=e=>e.type==="select-multiple",q_=e=>e.type==="radio",r3e=e=>q_(e)||qb(e),Q$=typeof self<"u"&&typeof self.HTMLElement<"u"&&typeof document<"u",C_=e=>N_(e)&&e.isConnected;function n3e(e,t){let r=t.slice(0,-1).length,n=0;for(;n<r;)e=Zr(e)?n++:e[t[n++]];return e}function ji(e,t){let r=F_(t)?[t]:pY(t),n=r.length==1?e:n3e(e,r),i=r[r.length-1],o;n&&delete n[i];for(let s=0;s<r.slice(0,-1).length;s++){let a=-1,c,u=r.slice(0,-(s+1)),h=u.length-1;for(s>0&&(o=e);++a<u.length;){let l=u[a];c=c?c[l]:e[l],h===a&&(Hn(c)&&Uo(c)||Array.isArray(c)&&!c.filter(g=>Hn(g)&&!Uo(g)||Vb(g)).length)&&(o?delete o[l]:delete e[l]),o=c}}return e}function gE(e,t={}){let r=Array.isArray(e);if(Hn(e)||r)for(let n in e)Array.isArray(e[n])||Hn(e[n])&&!K_(e[n])?(t[n]=Array.isArray(e[n])?[]:{},gE(e[n],t[n])):uo(e[n])||(t[n]=!0);return t}function mY(e,t,r){let n=Array.isArray(e);if(Hn(e)||n)for(let i in e)Array.isArray(e[i])||Hn(e[i])&&!K_(e[i])?Zr(t)||mE(r[i])?r[i]=Array.isArray(e[i])?gE(e[i],[]):Object.assign({},gE(e[i])):mY(e[i],uo(t)?{}:t[i],r[i]):r[i]=!ay(e[i],t[i]);return r}var X$=(e,t)=>mY(e,t,gE(t)),eY={value:!1,isValid:!1},tY={value:!0,isValid:!0},gY=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Zr(e[0].attributes.value)?Zr(e[0].value)||e[0].value===""?tY:{value:e[0].value,isValid:!0}:tY:eY}return eY},bY=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Zr(e)?e:t?e===""?NaN:+e:r&&fc(e)?new Date(e):n?n(e):e,rY={isValid:!1,value:null},xY=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,rY):rY;function M_(e){let t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return V_(t)?t.files:q_(t)?xY(e.refs).value:yY(t)?[...t.selectedOptions].map(({value:r})=>r):qb(t)?gY(e.refs).value:bY(Zr(t.value)?e.ref.value:t.value,e)}var i3e=(e,t,r,n)=>{let i={};for(let o of e){let s=xe(t,o);s&&un(i,o,s._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:n}},bE=e=>e instanceof RegExp,Kb=e=>Zr(e)?void 0:bE(e)?e.source:Hn(e)?bE(e.value)?e.value.source:e.value:e,o3e=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function nY(e,t,r){let n=xe(e,r);if(n||F_(r))return{error:n,name:r};let i=r.split(".");for(;i.length;){let o=i.join("."),s=xe(t,o),a=xe(e,o);if(s&&!Array.isArray(s)&&r!==o)return{name:r};if(a&&a.type)return{name:o,error:a};i.pop()}return{name:r}}var s3e=(e,t,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(t||e):(r?n.isOnBlur:i.isOnBlur)?!e:(r?n.isOnChange:i.isOnChange)?e:!0,a3e=(e,t)=>!xE(xe(e,t)).length&&ji(e,t),yE=e=>fc(e)||gr.default.isValidElement(e);function iY(e,t,r="validate"){if(yE(e)||Array.isArray(e)&&e.every(yE)||Vb(e)&&!e)return{type:r,message:yE(e)?e:"",ref:t}}var oy=e=>Hn(e)&&!bE(e)?e:{value:e,message:""},oY=async(e,t,r,n)=>{let{ref:i,refs:o,required:s,maxLength:a,minLength:c,min:u,max:h,pattern:l,validate:g,name:x,valueAsNumber:A,mount:E,disabled:B}=e._f;if(!E||B)return{};let M=o?o[0]:i,N=_=>{n&&M.reportValidity&&(M.setCustomValidity(Vb(_)?"":_||" "),M.reportValidity())},R={},V=q_(i),q=qb(i),W=V||q,G=(A||V_(i))&&!i.value||t===""||Array.isArray(t)&&!t.length,z=t3e.bind(null,x,r,R),te=(_,f,m,b=mu.maxLength,v=mu.minLength)=>{let w=_?f:m;R[x]=Object.assign({type:_?b:v,message:w,ref:i},z(_?b:v,w))};if(s&&(!W&&(G||uo(t))||Vb(t)&&!t||q&&!gY(o).isValid||V&&!xY(o).isValid)){let{value:_,message:f}=yE(s)?{value:!!s,message:s}:oy(s);if(_&&(R[x]=Object.assign({type:mu.required,message:f,ref:M},z(mu.required,f)),!r))return N(f),R}if(!G&&(!uo(u)||!uo(h))){let _,f,m=oy(h),b=oy(u);if(isNaN(t)){let v=i.valueAsDate||new Date(t);fc(m.value)&&(_=v>new Date(m.value)),fc(b.value)&&(f=v<new Date(b.value))}else{let v=i.valueAsNumber||parseFloat(t);uo(m.value)||(_=v>m.value),uo(b.value)||(f=v<b.value)}if((_||f)&&(te(!!_,m.message,b.message,mu.max,mu.min),!r))return N(R[x].message),R}if((a||c)&&!G&&fc(t)){let _=oy(a),f=oy(c),m=!uo(_.value)&&t.length>_.value,b=!uo(f.value)&&t.length<f.value;if((m||b)&&(te(m,_.message,f.message),!r))return N(R[x].message),R}if(l&&!G&&fc(t)){let{value:_,message:f}=oy(l);if(bE(_)&&!t.match(_)&&(R[x]=Object.assign({type:mu.pattern,message:f,ref:i},z(mu.pattern,f)),!r))return N(f),R}if(g){if(wE(g)){let _=await g(t),f=iY(_,M);if(f&&(R[x]=Object.assign(Object.assign({},f),z(mu.validate,f.message)),!r))return N(f.message),R}else if(Hn(g)){let _={};for(let f in g){if(!Uo(_)&&!r)break;let m=iY(await g[f](t),M,f);m&&(_=Object.assign(Object.assign({},m),z(f,m.message)),N(m.message),r&&(R[x]=_))}if(!Uo(_)&&(R[x]=Object.assign({ref:M},_),!r))return R}}return N(!0),R},c3e={mode:ma.onSubmit,reValidateMode:ma.onChange,shouldFocusError:!0};function u3e(e={}){let t=Object.assign(Object.assign({},c3e),e),r={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},n={},i=t.defaultValues||{},o=t.shouldUnregister?{}:Fb(i),s={action:!1,mount:!1,watch:!1},a={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0,h={},l={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},g={watch:B_(),array:B_(),state:B_()},x=Z$(t.mode),A=Z$(t.reValidateMode),E=t.criteriaMode===ma.all,B=(K,Z)=>(...J)=>{clearTimeout(u),u=self.setTimeout(()=>K(...J),Z)},M=async K=>{let Z=!1;return l.isValid&&(Z=t.resolver?Uo((await G()).errors):await te(n,!0),!K&&Z!==r.isValid&&(r.isValid=Z,g.state.next({isValid:Z}))),Z},N=(K,Z,J,ne=[],pe=!0,re=!0)=>{if(s.action=!0,re&&Array.isArray(xe(n,K))){let ce=Z(xe(n,K),J.argA,J.argB);pe&&un(n,K,ce)}if(l.errors&&re&&Array.isArray(xe(r.errors,K))){let ce=Z(xe(r.errors,K),J.argA,J.argB);pe&&un(r.errors,K,ce),a3e(r.errors,K)}if(l.touchedFields&&Array.isArray(xe(r.touchedFields,K))){let ce=Z(xe(r.touchedFields,K),J.argA,J.argB);pe&&un(r.touchedFields,K,ce)}l.dirtyFields&&(r.dirtyFields=X$(i,o)),g.state.next({isDirty:f(K,ne),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})},R=(K,Z)=>(un(r.errors,K,Z),g.state.next({errors:r.errors})),V=(K,Z,J,ne)=>{let pe=xe(n,K);if(pe){let re=xe(o,K,Zr(J)?xe(i,K):J);Zr(re)||ne&&ne.defaultChecked||Z?un(o,K,Z?re:M_(pe._f)):v(K,re),s.mount&&M()}},q=(K,Z,J,ne,pe)=>{let re=!1,ce={name:K},ut=xe(r.touchedFields,K);if(l.isDirty){let Ee=r.isDirty;r.isDirty=ce.isDirty=f(),re=Ee!==ce.isDirty}if(l.dirtyFields&&(!J||ne)){let Ee=xe(r.dirtyFields,K);ay(xe(i,K),Z)?ji(r.dirtyFields,K):un(r.dirtyFields,K,!0),ce.dirtyFields=r.dirtyFields,re=re||Ee!==xe(r.dirtyFields,K)}return J&&!ut&&(un(r.touchedFields,K,J),ce.touchedFields=r.touchedFields,re=re||l.touchedFields&&ut!==J),re&&pe&&g.state.next(ce),re?ce:{}},W=async(K,Z,J,ne,pe)=>{let re=xe(r.errors,Z),ce=l.isValid&&r.isValid!==J;if(e.delayError&&ne?(c=c||B(R,e.delayError),c(Z,ne)):(clearTimeout(u),ne?un(r.errors,Z,ne):ji(r.errors,Z)),((ne?!ay(re,ne):re)||!Uo(pe)||ce)&&!K){let ut=Object.assign(Object.assign(Object.assign({},pe),ce?{isValid:J}:{}),{errors:r.errors,name:Z});r=Object.assign(Object.assign({},r),ut),g.state.next(ut)}h[Z]--,l.isValidating&&!h[Z]&&(g.state.next({isValidating:!1}),h={})},G=async K=>t.resolver?await t.resolver(Object.assign({},o),t.context,i3e(K||a.mount,n,t.criteriaMode,t.shouldUseNativeValidation)):{},z=async K=>{let{errors:Z}=await G();if(K)for(let J of K){let ne=xe(Z,J);ne?un(r.errors,J,ne):ji(r.errors,J)}else r.errors=Z;return Z},te=async(K,Z,J={valid:!0})=>{for(let ne in K){let pe=K[ne];if(pe){let re=pe._f,ce=U_(pe,"_f");if(re){let ut=await oY(pe,xe(o,re.name),E,t.shouldUseNativeValidation);if(ut[re.name]&&(J.valid=!1,Z))break;Z||(ut[re.name]?un(r.errors,re.name,ut[re.name]):ji(r.errors,re.name))}ce&&await te(ce,Z,J)}}return J.valid},_=()=>{for(let K of a.unMount){let Z=xe(n,K);Z&&(Z._f.refs?Z._f.refs.every(J=>!C_(J)):!C_(Z._f.ref))&&D(K)}a.unMount=new Set},f=(K,Z)=>(K&&Z&&un(o,K,Z),!ay(d(),i)),m=(K,Z,J)=>{let ne=Object.assign({},s.mount?o:Zr(Z)?i:fc(K)?{[K]:Z}:Z);return dY(K,a,ne,J)},b=K=>xE(xe(s.mount?o:i,K,e.shouldUnregister?xe(i,K,[]):[])),v=(K,Z,J={})=>{let ne=xe(n,K),pe=Z;if(ne){let re=ne._f;re&&(!re.disabled&&un(o,K,bY(Z,re)),pe=Q$&&N_(re.ref)&&uo(Z)?"":Z,yY(re.ref)?[...re.ref.options].forEach(ce=>ce.selected=pe.includes(ce.value)):re.refs?qb(re.ref)?re.refs.length>1?re.refs.forEach(ce=>ce.checked=Array.isArray(pe)?!!pe.find(ut=>ut===ce.value):pe===ce.value):re.refs[0]&&(re.refs[0].checked=!!pe):re.refs.forEach(ce=>ce.checked=ce.value===pe):V_(re.ref)||(re.ref.value=pe,re.ref.type||g.watch.next({name:K})))}(J.shouldDirty||J.shouldTouch)&&q(K,pe,J.shouldTouch,J.shouldDirty,!0),J.shouldValidate&&k(K)},w=(K,Z,J)=>{for(let ne in Z){let pe=Z[ne],re=`${K}.${ne}`,ce=xe(n,re);(a.array.has(K)||!mE(pe)||ce&&!ce._f)&&!sy(pe)?w(re,pe,J):v(re,pe,J)}},P=(K,Z,J={})=>{let ne=xe(n,K),pe=a.array.has(K);un(o,K,Z),pe?(g.array.next({name:K,values:o}),(l.isDirty||l.dirtyFields)&&J.shouldDirty&&(r.dirtyFields=X$(i,o),g.state.next({name:K,dirtyFields:r.dirtyFields,isDirty:f(K,Z)}))):ne&&!ne._f&&!uo(Z)?w(K,Z,J):v(K,Z,J),J$(K,a)&&g.state.next({}),g.watch.next({name:K})},C=async K=>{let Z=K.target,J=Z.name,ne=xe(n,J);if(ne){let pe,re,ce=Z.type?M_(ne._f):aY(K),ut=K.type===R_.BLUR,Ee=!o3e(ne._f)&&!t.resolver&&!xe(r.errors,J)&&!ne._f.deps||s3e(ut,xe(r.touchedFields,J),r.isSubmitted,A,x),_e=J$(J,a,ut);un(o,J,ce),ut?ne._f.onBlur&&ne._f.onBlur(K):ne._f.onChange&&ne._f.onChange(K);let Do=q(J,ce,ut,!1),Oe=!Uo(Do)||_e;if(!ut&&g.watch.next({name:J,type:K.type}),Ee)return Oe&&g.state.next(Object.assign({name:J},_e?{}:Do));if(!ut&&_e&&g.state.next({}),h[J]=(h[J],1),l.isValidating&&g.state.next({isValidating:!0}),t.resolver){let{errors:Be}=await G([J]),ga=nY(r.errors,n,J),Ce=nY(Be,n,ga.name||J);pe=Ce.error,J=Ce.name,re=Uo(Be)}else pe=(await oY(ne,xe(o,J),E,t.shouldUseNativeValidation))[J],re=await M(!0);ne._f.deps&&k(ne._f.deps),W(!1,J,re,pe,Do)}},k=async(K,Z={})=>{let J,ne,pe=pE(K);if(g.state.next({isValidating:!0}),t.resolver){let re=await z(Zr(K)?K:pe);J=Uo(re),ne=K?!pe.some(ce=>xe(re,ce)):J}else K?(ne=(await Promise.all(pe.map(async re=>{let ce=xe(n,re);return await te(ce&&ce._f?{[re]:ce}:ce)}))).every(Boolean),!(!ne&&!r.isValid)&&M()):ne=J=await te(n);return g.state.next(Object.assign(Object.assign(Object.assign({},!fc(K)||l.isValid&&J!==r.isValid?{}:{name:K}),t.resolver?{isValid:J}:{}),{errors:r.errors,isValidating:!1})),Z.shouldFocus&&!ne&&O_(n,re=>xe(r.errors,re),K?pe:a.mount),ne},d=K=>{let Z=Object.assign(Object.assign({},i),s.mount?o:{});return Zr(K)?Z:fc(K)?xe(Z,K):K.map(J=>xe(Z,J))},S=K=>{K?pE(K).forEach(Z=>ji(r.errors,Z)):r.errors={},g.state.next({errors:r.errors})},F=(K,Z,J)=>{let ne=(xe(n,K,{_f:{}})._f||{}).ref;un(r.errors,K,Object.assign(Object.assign({},Z),{ref:ne})),g.state.next({name:K,errors:r.errors,isValid:!1}),J&&J.shouldFocus&&ne&&ne.focus&&ne.focus()},U=(K,Z)=>wE(K)?g.watch.subscribe({next:J=>K(m(void 0,Z),J)}):m(K,Z,!0),D=(K,Z={})=>{for(let J of K?pE(K):a.mount)a.mount.delete(J),a.array.delete(J),xe(n,J)&&(Z.keepValue||(ji(n,J),ji(o,J)),!Z.keepError&&ji(r.errors,J),!Z.keepDirty&&ji(r.dirtyFields,J),!Z.keepTouched&&ji(r.touchedFields,J),!t.shouldUnregister&&!Z.keepDefaultValue&&ji(i,J));g.watch.next({}),g.state.next(Object.assign(Object.assign({},r),Z.keepDirty?{isDirty:f()}:{})),!Z.keepIsValid&&M()},Y=(K,Z={})=>{let J=xe(n,K),ne=Vb(Z.disabled);return un(n,K,{_f:Object.assign(Object.assign(Object.assign({},J&&J._f?J._f:{ref:{name:K}}),{name:K,mount:!0}),Z)}),a.mount.add(K),J?ne&&un(o,K,Z.disabled?void 0:xe(o,K,M_(J._f))):V(K,!0,Z.value),Object.assign(Object.assign(Object.assign({},ne?{disabled:Z.disabled}:{}),t.shouldUseNativeValidation?{required:!!Z.required,min:Kb(Z.min),max:Kb(Z.max),minLength:Kb(Z.minLength),maxLength:Kb(Z.maxLength),pattern:Kb(Z.pattern)}:{}),{name:K,onChange:C,onBlur:C,ref:pe=>{if(pe){Y(K,Z),J=xe(n,K);let re=Zr(pe.value)&&pe.querySelectorAll&&pe.querySelectorAll("input,select,textarea")[0]||pe,ce=r3e(re),ut=J._f.refs||[];if(ce?ut.find(Ee=>Ee===re):re===J._f.ref)return;un(n,K,{_f:Object.assign(Object.assign({},J._f),ce?{refs:ut.concat(re).filter(C_),ref:{type:re.type,name:K}}:{ref:re})}),V(K,!1,void 0,re)}else J=xe(n,K,{}),J._f&&(J._f.mount=!1),(t.shouldUnregister||Z.shouldUnregister)&&!(cY(a.array,K)&&s.action)&&a.unMount.add(K)}})};return{control:{register:Y,unregister:D,_executeSchema:G,_getWatch:m,_getDirty:f,_updateValid:M,_removeUnmounted:_,_updateFieldArray:N,_getFieldArray:b,_subjects:g,_proxyFormState:l,get _fields(){return n},set _fields(K){n=K},get _formValues(){return o},set _formValues(K){o=K},get _stateFlags(){return s},set _stateFlags(K){s=K},get _defaultValues(){return i},set _defaultValues(K){i=K},get _names(){return a},set _names(K){a=K},get _formState(){return r},set _formState(K){r=K},get _options(){return t},set _options(K){t=Object.assign(Object.assign({},t),K)}},trigger:k,register:Y,handleSubmit:(K,Z)=>async J=>{J&&(J.preventDefault&&J.preventDefault(),J.persist&&J.persist());let ne=!0,pe=t.shouldUnregister?Fb(o):Object.assign({},o);g.state.next({isSubmitting:!0});try{if(t.resolver){let{errors:re,values:ce}=await G();r.errors=re,pe=ce}else await te(n);Uo(r.errors)&&Object.keys(r.errors).every(re=>xe(pe,re))?(g.state.next({errors:{},isSubmitting:!0}),await K(pe,J)):(Z&&await Z(r.errors,J),t.shouldFocusError&&O_(n,re=>xe(r.errors,re),a.mount))}catch(re){throw ne=!1,re}finally{r.isSubmitted=!0,g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Uo(r.errors)&&ne,submitCount:r.submitCount+1,errors:r.errors})}},watch:U,setValue:P,getValues:d,reset:(K,Z={})=>{let J=K||i,ne=Fb(J),pe=K&&!Uo(K)?ne:i;if(Z.keepDefaultValues||(i=J),!Z.keepValues){if(Q$&&Zr(K))for(let re of a.mount){let ce=xe(n,re);if(ce&&ce._f){let ut=Array.isArray(ce._f.refs)?ce._f.refs[0]:ce._f.ref;try{N_(ut)&&ut.closest("form").reset();break}catch{}}}o=e.shouldUnregister?Z.keepDefaultValues?Fb(i):{}:ne,n={},g.array.next({values:pe}),g.watch.next({values:pe})}a={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},s.mount=!l.isValid||!!Z.keepIsValid,s.watch=!!e.shouldUnregister,g.state.next({submitCount:Z.keepSubmitCount?r.submitCount:0,isDirty:Z.keepDirty?r.isDirty:Z.keepDefaultValues?!ay(K,i):!1,isSubmitted:Z.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Z.keepDirty?r.dirtyFields:Z.keepDefaultValues&&K?Object.entries(K).reduce((re,[ce,ut])=>Object.assign(Object.assign({},re),{[ce]:ut!==xe(i,ce)}),{}):{},touchedFields:Z.keepTouched?r.touchedFields:{},errors:Z.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},resetField:(K,Z={})=>{xe(n,K)&&(Zr(Z.defaultValue)?P(K,xe(i,K)):(P(K,Z.defaultValue),un(i,K,Z.defaultValue)),Z.keepTouched||ji(r.touchedFields,K),Z.keepDirty||(ji(r.dirtyFields,K),r.isDirty=Z.defaultValue?f(K,xe(i,K)):f()),Z.keepError||(ji(r.errors,K),l.isValid&&M()),g.state.next(Object.assign({},r)))},clearErrors:S,unregister:D,setError:F,setFocus:K=>{let Z=xe(n,K)._f;(Z.ref.focus?Z.ref:Z.refs[0]).focus()}}}function vE(e={}){let t=gr.default.useRef(),[r,n]=gr.default.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});t.current?t.current.control._options=e:t.current=Object.assign(Object.assign({},u3e(e)),{formState:r});let i=t.current.control,o=gr.default.useCallback(s=>{fY(s,i._proxyFormState,!0)&&(i._formState=Object.assign(Object.assign({},i._formState),s),n(Object.assign({},i._formState)))},[i]);return L_({subject:i._subjects.state,callback:o}),gr.default.useEffect(()=>{i._stateFlags.mount||(i._proxyFormState.isValid&&i._updateValid(),i._stateFlags.mount=!0),i._stateFlags.watch&&(i._stateFlags.watch=!1,i._subjects.state.next({})),i._removeUnmounted()}),t.current.formState=uY(r,i._proxyFormState),t.current}var f3e=({accounts:e,enabledAddressTypes:t,enableAddressTypes:r,editableAccountMetadata:n,addReadOnlyAccount:i,fetchDomainOwner:o})=>{let s=zt(),{t:a}=Us(),c=ii(),u=n?.networkID||Kt.Solana.Mainnet,{formState:{errors:h},control:l,clearErrors:g,getValues:x,setValue:A,register:E,handleSubmit:B,watch:M,trigger:N}=vE({mode:"all"}),{networkID:R,name:V,address:q,resolvedAddress:W}=M(),G={required:!0},z=(0,AE.useMemo)(()=>({required:{value:!0,message:a("addAccountImportAccountPublicKeyRequired")},validate:async f=>{if(f==="")return!0;if(!lA(f,R||u))try{let w=(await o(f,R,s))?.owner;return w?(A("resolvedAddress",w),e.find(C=>C.addresses.map(k=>k.address).includes(w))?a("addAccountImportAccountDuplicateAddress"):!0):a("addAccountImportAccountIncorrectFormat")}catch{return a("sendFormErrorInvalidDomain")}return A("resolvedAddress",f),e.find(v=>v.addresses.map(w=>w.address).includes(f))?a("addAccountImportAccountDuplicateAddress"):!0}}),[a,R,u,A,e,o,s]),te=V&&W&&!h.name&&!h.address,_=(0,AE.useCallback)(async({networkID:f,name:m,resolvedAddress:b},v)=>{let w=Js(f,b);t.includes(w)||await r({addressTypes:[w]});let P={};P[w]=b,i({name:m,addresses:P,icon:n?.icon}),v(),c.capture("addReadOnlyAccount",{data:{networkID:f,chainType:w}})},[i,n?.icon,r,t,c]);return{Controller:hY,canSubmit:te,control:l,errors:h,nameValidations:G,address:q,addressValidations:z,clearErrors:g,getValues:x,handleSubmit:B,onSubmit:_,register:E,setValue:A,trigger:N}};p();y();var l3e=X(Br());p();y();p();y();var wY=X(Br());var d3e=e=>{let t=(0,wY.useCallback)(r=>r.addresses.find(n=>e===ae.getChainID(n.networkID))?.networkID,[e]);return uc({select:t})};p();y();var vY=X(Br());var h3e=()=>{let{data:e=[]}=Lb("seeds-only"),{data:t=[]}=Lb("seedless-seeds-only");return(0,vY.useMemo)(()=>e.length+t.length>1,[e.length,t.length])};p();y();var SY=X(Br()),AY=/(\p{Emoji_Presentation}|\p{Extended_Pictographic})/giu,p3e=/[\p{Script=Latin}\p{Script=Cyrillic}]+/giu,y3e=(e="",t)=>(0,SY.useMemo)(()=>{let r=e.split(" "),n=r[0]??"",i=new RegExp(AY).test(n),o=new RegExp(p3e).test(n),s=!i&&!o,a=t!==void 0?t+1:"";if(i){let c=Array.from(n);if(c.length>1){let u="";for(let h of c)if(h.match(AY))u+=h;else break;n=u}}else o&&(n=xB(n).charAt(0));if(r.length>1){let c=Number(r[1]);if(Number.isInteger(c)&&c>=0)return s?a:`${n}${c}`}return s?a:n},[e,t]);p();y();var EY=X(Os()),lc=X(Br());var m3e=({importPrivateKeyCallback:e,existingAccounts:t,editableAccountMetadata:r,analytics:n})=>{let{t:i}=Us(),{formState:{errors:o},control:s,clearErrors:a,getValues:c,setValue:u,register:h,handleSubmit:l,watch:g,trigger:x}=vE({mode:"all",defaultValues:{addressType:r?.addressType||"solana",networkID:r?.networkID||Kt.Solana.Mainnet}}),[A,E]=(0,lc.useState)(null),B=hE(m=>m.setEditableAccountMetadata),{name:M}=g(),N=r?.secrets,R=c("networkID"),V=c("addressType"),q=c("privateKey"),W=(0,lc.useMemo)(()=>new Dm,[]),G={required:!0},z=(0,lc.useMemo)(()=>({required:{value:!0,message:i("addAccountImportAccountPrivateKeyRequired")},onChange:m=>{m.target.value||E(null)},validate:m=>{try{let b=c("networkID"),v=c("addressType");if(/\s/.test(m)||!v)return i("addAccountImportAccountIncorrectFormat");let w=ae.getNetworkDefinition(b).value,P=Lm({privateKey:m,addressType:v,networkIDValue:w});B({...r,secrets:P});let C=W.generateKeypairFromPrivateKey(P,v);return t.find(d=>!d.isReadOnly&&(d.addresses.map(S=>S.address).includes(ro({publicKey:C.publicKey,addressType:v,networkID:b}))||d.addresses.filter(S=>"publicKey"in S).map(S=>S.publicKey).find(S=>S?Buffer.from(S).equals(Buffer.from(C.publicKey)):!1)))?i("addAccountImportAccountDuplicatePrivateKey"):!0}catch{return i("addAccountImportAccountIncorrectFormat")}}}),[i,W,t,r,B,c]);(0,lc.useEffect)(()=>{if(o.privateKey){E(null);return}if(q||N)try{let m=ae.getNetworkDefinition(R).value,b=N||Lm({privateKey:q,addressType:V,networkIDValue:m}),v=W.generateKeypairFromPrivateKey(b,V);if(!q){let w="";switch(V){case"solana":{w=EY.default.encode(v.privateKey);break}case"eip155":{w="0x"+Buffer.from(v.privateKey).toString("hex");break}}u("privateKey",w)}E(ro({publicKey:v.publicKey,addressType:V,networkID:R}))}catch{E(null)}},[o.privateKey,V,W,q,N,u,R]);let te=(0,lc.useMemo)(()=>!!(M&&q&&!o.name&&!o.privateKey),[o.name,o.privateKey,M,q]),_=(0,lc.useCallback)(async({networkID:m,name:b,privateKey:v,addressType:w})=>{let P=ae.getNetworkDefinition(m).value,C=Lm({privateKey:v,addressType:w,networkIDValue:P});await e({chainType:w,name:b,icon:r?.icon,privateKey:C}),n.capture("addPrivateKeyAccount",{data:{networkID:m,chainType:w}})},[e,r?.icon,n]);return{formOnSubmitHandler:l(m=>_(m)),canSubmit:te,control:s,getValues:c,register:h,setValue:u,trigger:x,errors:o,clearErrors:a,nameValidations:G,privateKey:q,privateKeyValidations:z,addressPreview:A}};p();y();var g3e=async(e,t,r)=>{let{enabledAddressTypes:n,enabledChainIDs:i,enabledMainnetOnlyNetworkIDs:o}=r,[s,a]=await Promise.all([t.get("developerMode"),rp(t)]),c=await e.fetchAllAccounts(),u=await ou(c,t),h=await Vg(t,u.identifier),l={name:h.name,icon:h.icon,identifier:u.identifier,addresses:Ng(u,o,n,i,a??yd,s?.isDeveloperMode??!1)};return u.type==="seed"?{...l,type:"seed",seedIdentifier:u.seedIdentifier,isReadOnly:!1}:u.type==="seedless"?{...l,type:"seedless",seedIdentifier:u.seedIdentifier,isReadOnly:!1}:u.type==="readOnly"?{...l,type:"readOnly",isReadOnly:!0}:u.type==="privateKey"?{...l,privateKeyIdentifier:u.privateKeyIdentifier,type:"privateKey",isReadOnly:!1}:{...l,type:u.type,isReadOnly:!1}};p();y();export{WB as a,iC as b,ax as c,oC as d,Iy as e,c3 as f,bC as g,VC as h,Ih as i,E3 as j,JC as k,I3 as l,T3 as m,XC as n,P3 as o,B3 as p,t7 as q,n7 as r,l7 as s,h7 as t,N3 as u,_w as v,D9 as w,K9 as x,p6 as y,b9 as z,qo as A,y6 as B,Fh as C,m6 as D,g6 as E,k9 as F,T9 as G,P9 as H,_9 as I,C9 as J,M9 as K,R9 as L,O9 as M,rne as N,Zi as O,go as P,er as Q,wpe as R,vpe as S,Ape as T,Spe as U,D6 as V,yie as W,L6 as X,K6 as Y,F6 as Z,qs as _,Ie as $,xM as aa,rf as ba,mi as ca,zo as da,BM as ea,c1 as fa,km as ga,OM as ha,q6 as ia,sf as ja,rR as ka,i8 as la,s8 as ma,c8 as na,b8 as oa,A8 as pa,S8 as qa,c5e as ra,df as sa,Y8 as ta,Dm as ua,f0 as va,q1 as wa,aae as xa,Lm as ya,X1 as za,TI as Aa,sU as Ba,qI as Ca,JI as Da,uL as Ea,fg as Fa,ro as Ga,hd as Ha,M4 as Ia,Mf as Ja,Rf as Ka,Of as La,Nf as Ma,ae as Na,VL as Oa,Kt as Pa,Qc as Qa,DL as Ra,M0 as Sa,KL as Ta,qL as Ua,FL as Va,HL as Wa,zL as Xa,jL as Ya,GL as Za,$L as _a,YL as $a,JL as ab,ZL as bb,QL as cb,XL as db,eK as eb,lA as fb,Js as gb,WL as hb,tK as ib,rK as jb,j4 as kb,pg as lb,iK as mb,zhe as nb,jhe as ob,Ghe as pb,pd as qb,$4 as rb,Xc as sb,e0e as tb,t0e as ub,Y4 as vb,yd as wb,Zs as xb,n0e as yb,i0e as zb,Fk as Ab,Vk as Bb,qye as Cb,Ug as Db,qk as Eb,Qye as Fb,jk as Gb,tme as Hb,rme as Ib,UF as Jb,nme as Kb,jA as Lb,mg as Mb,ime as Nb,s0e as Ob,a0e as Pb,ome as Qb,sme as Rb,ame as Sb,cme as Tb,Zpe as Ub,Rk as Vb,xd as Wb,Qpe as Xb,ea as Yb,wF as Zb,Dk as _b,vF as $b,aye as ac,vye as bc,u0e as cc,Xs as dc,UA as ec,_pe as fc,Fpe as gc,Vpe as hc,c0e as ic,Ki as jc,qpe as kc,gd as lc,Tk as mc,_k as nc,Eg as oc,Wpe as pc,zpe as qc,bd as rc,jpe as sc,Gpe as tc,ii as uc,Ig as vc,$pe as wc,zt as xc,Aye as yc,Sye as zc,nu as Ac,kF as Bc,kye as Cc,Tye as Dc,Pye as Ec,_ye as Fc,Bye as Gc,Mye as Hc,Rye as Ic,Oye as Jc,Lye as Kc,Kye as Lc,vYe as Mc,Id as Nc,Ime as Oc,kme as Pc,Tme as Qc,DV as Rc,tbe as Sc,rbe as Tc,o2 as Uc,Ud as Vc,kP as Wc,Tr as Xc,PP as Yc,yH as Zc,mb as _c,wG as $c,SG as ad,jG as bd,YG as cd,QS as dd,JG as ed,DSe as fd,oh as gd,c$ as hd,dEe as id,sE as jd,hEe as kd,pEe as ld,Se as md,yu as nd,E_ as od,yEe as pd,mEe as qd,Xt as rd,I_ as sd,gEe as td,bEe as ud,Adt as vd,cE as wd,Sdt as xd,Edt as yd,Idt as zd,kdt as Ad,Tdt as Bd,Pdt as Cd,wEe as Dd,vEe as Ed,Ub as Fd,REe as Gd,Vt as Hd,lE as Id,OEe as Jd,NEe as Kd,UEe as Ld,Lb as Md,AEe as Nd,__ as Od,DEe as Pd,LEe as Qd,KEe as Rd,FEe as Sd,VEe as Td,qEe as Ud,HEe as Vd,uc as Wd,EEe as Xd,WEe as Yd,zEe as Zd,jEe as _d,GEe as $d,$Ee as ae,Db as be,YEe as ce,e3e as de,hY as ee,vE as fe,f3e as ge,IEe as he,kEe as ie,TEe as je,d3e as ke,_Ee as le,h3e as me,dE as ne,hE as oe,$$ as pe,y3e as qe,m3e as re,g3e as se};
/*! Bundled license information:

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/ed25519/lib/index.js:
  (*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@solana/buffer-layout/lib/Layout.js:
  (**
   * Support for translating between Uint8Array instances and JavaScript
   * native types.
   *
   * {@link module:Layout~Layout|Layout} is the basis of a class
   * hierarchy that associates property names with sequences of encoded
   * bytes.
   *
   * Layouts are supported for these scalar (numeric) types:
   * * {@link module:Layout~UInt|Unsigned integers in little-endian
   *   format} with {@link module:Layout.u8|8-bit}, {@link
   *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},
   *   {@link module:Layout.u32|32-bit}, {@link
   *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~UIntBE|Unsigned integers in big-endian
   *   format} with {@link module:Layout.u16be|16-bit}, {@link
   *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},
   *   {@link module:Layout.u40be|40-bit}, and {@link
   *   module:Layout.u48be|48-bit} representation ranges;
   * * {@link module:Layout~Int|Signed integers in little-endian
   *   format} with {@link module:Layout.s8|8-bit}, {@link
   *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},
   *   {@link module:Layout.s32|32-bit}, {@link
   *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~IntBE|Signed integers in big-endian format}
   *   with {@link module:Layout.s16be|16-bit}, {@link
   *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},
   *   {@link module:Layout.s40be|40-bit}, and {@link
   *   module:Layout.s48be|48-bit} representation ranges;
   * * 64-bit integral values that decode to an exact (if magnitude is
   *   less than 2^53) or nearby integral Number in {@link
   *   module:Layout.nu64|unsigned little-endian}, {@link
   *   module:Layout.nu64be|unsigned big-endian}, {@link
   *   module:Layout.ns64|signed little-endian}, and {@link
   *   module:Layout.ns64be|unsigned big-endian} encodings;
   * * 32-bit floating point values with {@link
   *   module:Layout.f32|little-endian} and {@link
   *   module:Layout.f32be|big-endian} representations;
   * * 64-bit floating point values with {@link
   *   module:Layout.f64|little-endian} and {@link
   *   module:Layout.f64be|big-endian} representations;
   * * {@link module:Layout.const|Constants} that take no space in the
   *   encoded expression.
   *
   * and for these aggregate types:
   * * {@link module:Layout.seq|Sequence}s of instances of a {@link
   *   module:Layout~Layout|Layout}, with JavaScript representation as
   *   an Array and constant or data-dependent {@link
   *   module:Layout~Sequence#count|length};
   * * {@link module:Layout.struct|Structure}s that aggregate a
   *   heterogeneous sequence of {@link module:Layout~Layout|Layout}
   *   instances, with JavaScript representation as an Object;
   * * {@link module:Layout.union|Union}s that support multiple {@link
   *   module:Layout~VariantLayout|variant layouts} over a fixed
   *   (padded) or variable (not padded) span of bytes, using an
   *   unsigned integer at the start of the data or a separate {@link
   *   module:Layout.unionLayoutDiscriminator|layout element} to
   *   determine which layout to use when interpreting the buffer
   *   contents;
   * * {@link module:Layout.bits|BitStructure}s that contain a sequence
   *   of individual {@link
   *   module:Layout~BitStructure#addField|BitField}s packed into an 8,
   *   16, 24, or 32-bit unsigned integer starting at the least- or
   *   most-significant bit;
   * * {@link module:Layout.cstr|C strings} of varying length;
   * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link
   *   module:Layout~Blob#length|length} raw data.
   *
   * All {@link module:Layout~Layout|Layout} instances are immutable
   * after construction, to prevent internal state from becoming
   * inconsistent.
   *
   * @local Layout
   * @local ExternalLayout
   * @local GreedyCount
   * @local OffsetLayout
   * @local UInt
   * @local UIntBE
   * @local Int
   * @local IntBE
   * @local NearUInt64
   * @local NearUInt64BE
   * @local NearInt64
   * @local NearInt64BE
   * @local Float
   * @local FloatBE
   * @local Double
   * @local DoubleBE
   * @local Sequence
   * @local Structure
   * @local UnionDiscriminator
   * @local UnionLayoutDiscriminator
   * @local Union
   * @local VariantLayout
   * @local BitStructure
   * @local BitField
   * @local Boolean
   * @local Blob
   * @local CString
   * @local Constant
   * @local bindConstructorLayout
   * @module Layout
   * @license MIT
   * @author Peter A. Bigot
   * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}
   *)

@babel/runtime/helpers/regeneratorRuntime.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE *)

@noble/secp256k1/lib/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

assert/build/internal/util/comparisons.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
   * @license  MIT
   *)

@noble/ed25519/lib/esm/index.js:
  (*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/secp256k1/lib/esm/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@scure/base/lib/esm/index.js:
  (*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@scure/btc-signer/index.js:
  (*! scure-btc-signer - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-MHD4HNLY.js.map
