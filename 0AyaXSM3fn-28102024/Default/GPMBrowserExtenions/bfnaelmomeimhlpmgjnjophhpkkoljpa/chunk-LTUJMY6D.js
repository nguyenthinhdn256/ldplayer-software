import{p as xu}from"./chunk-PN7XAO7F.js";import{t as Du}from"./chunk-TZKYPSN2.js";import{e as xi}from"./chunk-36Y64SHT.js";import{p as Cu,u as Ru}from"./chunk-2MSBWT3V.js";import{a as Pu,d as ku}from"./chunk-AKPGU3DO.js";import{a as Au,b as xS}from"./chunk-IS26EKBL.js";import{F as ou,m as Zc,s as eu}from"./chunk-KXAUXXVB.js";import{Aa as fu,B as pu,Bb as Kr,Ca as gu,Fa as yu,Ga as or,Ha as Su,Hb as rr,Ia as wu,T as cu,Ua as be,Va as Ze,Wb as Eu,Y as Ci,Ya as bu,Z as uu,ab as ho,bb as bo,cb as De,db as Tu,e as ES,eb as To,f as ru,fa as lu,g as ct,ga as mu,i as nu,ia as du,j as su,lc as G,mc as bt,nc as lt,ob as Fu,rb as _n,sb as On,tb as Iu,vc as nr,wb as ut,xb as Le,xc as Ri,y as iu,yc as zt,z as au,zb as vu}from"./chunk-TYXPKGSM.js";import{d as hu,h as Vr}from"./chunk-EDLKLLZ5.js";import{o as Jc,u as he}from"./chunk-OX7Q6J2U.js";import{$a as ht,$b as tr,Ac as pt,C as Wo,Fd as tu,G as Fc,Ga as Dn,Hb as Nn,Mb as Bn,Na as v,Oa as At,Ob as Ei,P as qr,Pa as $,Pb as Gr,Q as M,Qa as $t,T as ae,Ta as Ve,Ua as Hc,Va as se,Wa as wo,Wd as oe,Zb as He,_b as zc,ba as Vc,bc as jc,be as Ln,ca as So,hb as Ke,je as Ao,kb as Zo,kd as Yc,lb as er,lc as Me,md as ee,ne as Ue,rb as $c,rd as Xc,ta as Kc,uc as K,xc as Wc,yd as Un}from"./chunk-MHD4HNLY.js";import{K as Ec,p as jo,v as Tc}from"./chunk-G3SOTMUM.js";import{a as B,m as Ht,n as xe}from"./chunk-56SJOU6P.js";import{$ as Mc,U as Xo,V as _c,Y as Oc,Z as Jo,_ as vS,a as Z,aa as Kt,b as D,ba as at,ca as Qc,da as J,ea as qc,fa as Gc,ga as Ee,ha as kn,ia as yo,o as Bc,p as Uc,q as Rn,t as Lc,v as Pn,w as wt,x as U}from"./chunk-6E74REJW.js";import{Ba as kc,Da as Dc,G as me,I as Ae,J as vc,K as Gt,Ka as Nc,Za as pe,aa as Be,ca as xc,da as Cc,ea as Cn,fa as Rc,ha as q,ja as N,ka as ne,la as Vt,ma as Pc,ra as Yo,sa as O,t as xn,v as go,z as Ic}from"./chunk-66TF6S77.js";import{a as l}from"./chunk-4P36KWOF.js";import{a as R}from"./chunk-7X4NV6OJ.js";import{c as Je,f as C,h as i,l as IS,m as Buffer,n as a}from"./chunk-3KENBVE7.js";var Lu=Je((gx,Uu)=>{i();a();(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(o,r){return o<<r|o>>>32-r},rotr:function(o,r){return o<<32-r|o>>>r},endian:function(o){if(o.constructor==Number)return t.rotl(o,8)&16711935|t.rotl(o,24)&4278255360;for(var r=0;r<o.length;r++)o[r]=t.endian(o[r]);return o},randomBytes:function(o){for(var r=[];o>0;o--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(o){for(var r=[],n=0,s=0;n<o.length;n++,s+=8)r[s>>>5]|=o[n]<<24-s%32;return r},wordsToBytes:function(o){for(var r=[],n=0;n<o.length*32;n+=8)r.push(o[n>>>5]>>>24-n%32&255);return r},bytesToHex:function(o){for(var r=[],n=0;n<o.length;n++)r.push((o[n]>>>4).toString(16)),r.push((o[n]&15).toString(16));return r.join("")},hexToBytes:function(o){for(var r=[],n=0;n<o.length;n+=2)r.push(parseInt(o.substr(n,2),16));return r},bytesToBase64:function(o){for(var r=[],n=0;n<o.length;n+=3)for(var s=o[n]<<16|o[n+1]<<8|o[n+2],p=0;p<4;p++)n*8+p*6<=o.length*8?r.push(e.charAt(s>>>6*(3-p)&63)):r.push("=");return r.join("")},base64ToBytes:function(o){o=o.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],n=0,s=0;n<o.length;s=++n%4)s!=0&&r.push((e.indexOf(o.charAt(n-1))&Math.pow(2,-2*s+8)-1)<<s*2|e.indexOf(o.charAt(n))>>>6-s*2);return r}};Uu.exports=t})()});var Ni=Je((wx,_u)=>{i();a();var Di={utf8:{stringToBytes:function(e){return Di.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(Di.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],o=0;o<e.length;o++)t.push(e.charCodeAt(o)&255);return t},bytesToString:function(e){for(var t=[],o=0;o<e.length;o++)t.push(String.fromCharCode(e[o]));return t.join("")}}};_u.exports=Di});var Mu=Je((bx,Ou)=>{i();a();(function(){var e=Lu(),t=Ni().utf8,o=Ni().bin,r=function(s){s.constructor==String?s=t.stringToBytes(s):typeof Buffer<"u"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(s)?s=Array.prototype.slice.call(s,0):Array.isArray(s)||(s=s.toString());var p=e.bytesToWords(s),u=s.length*8,c=[],m=1732584193,g=-271733879,f=-1732584194,S=271733878,w=-1009589776;p[u>>5]|=128<<24-u%32,p[(u+64>>>9<<4)+15]=u;for(var y=0;y<p.length;y+=16){for(var A=m,b=g,T=f,F=S,E=w,I=0;I<80;I++){if(I<16)c[I]=p[y+I];else{var x=c[I-3]^c[I-8]^c[I-14]^c[I-16];c[I]=x<<1|x>>>31}var k=(m<<5|m>>>27)+w+(c[I]>>>0)+(I<20?(g&f|~g&S)+1518500249:I<40?(g^f^S)+1859775393:I<60?(g&f|g&S|f&S)-1894007588:(g^f^S)-899497514);w=S,S=f,f=g<<30|g>>>2,g=m,m=k}m+=A,g+=b,f+=T,S+=F,w+=E}return[m,g,f,S,w]},n=function(s,p){var u=e.wordsToBytes(r(s));return p&&p.asBytes?u:p&&p.asString?o.bytesToString(u):e.bytesToHex(u)};n._blocksize=16,n._digestsize=20,Ou.exports=n})()});var Gu=Je((Cx,kS)=>{kS.exports={name:"@phantom-labs/blocklist",version:"0.13.0",main:"index.js",types:"index.d.ts",repository:"git@github.com:phantom-labs/blocklist.git",author:"Jordan Leigh <AlwaysBCoding@gmail.com>",license:"MIT",scripts:{build:"node build.js"},dependencies:{"js-yaml":"^4.1.0",sha3:"^2.1.4"}}});var Vu=Je((Rx,DS)=>{DS.exports={blocklist:["phantomweb.app","aurory.app","solvision.io","staratlas.art","starsatlas.com","sollet.cc","raydlum.io","aurorynft.com","sneks.gg","solletweb.io","i-sollet.com","fancyfrenchienft.art","solanawebwallet.online","phahtom.com","server-syncwallet.com","staratias.app","raydium.network","grapesnetwork.me","staratias.art","soistarter.org","audius-nft.top","aurory.me","degenapes.app","phantom-app.online","phantomwallet.net","dapps-node.com","phantom-app.link","solanaoutage.com","walletconnectdapps.net","staratlas.cx","web-phantom.app","0120tt.com"],whitelist:[],fuzzylist:[],contentHash:"830ea1c9a833213eabc17990adf053081f503b1203ca9a2c711db7199e657293"}});var Ku=Je(Li=>{i();a();var{version:NS}=Gu(),BS=Vu(),US=()=>NS,LS=()=>BS;Li.getVersion=US;Li.getBlocklist=LS});var $u=Je(ir=>{"use strict";i();a();ir.__esModule=!0;ir.distance=ir.closest=void 0;var Tt=new Uint32Array(65536),_S=function(e,t){for(var o=e.length,r=t.length,n=1<<o-1,s=-1,p=0,u=o,c=o;c--;)Tt[e.charCodeAt(c)]|=1<<c;for(c=0;c<r;c++){var m=Tt[t.charCodeAt(c)],g=m|p;m|=(m&s)+s^s,p|=~(m|s),s&=m,p&n&&u++,s&n&&u--,p=p<<1|1,s=s<<1|~(g|p),p&=g}for(c=o;c--;)Tt[e.charCodeAt(c)]=0;return u},OS=function(e,t){for(var o=t.length,r=e.length,n=[],s=[],p=Math.ceil(o/32),u=Math.ceil(r/32),c=0;c<p;c++)s[c]=-1,n[c]=0;for(var m=0;m<u-1;m++){for(var g=0,f=-1,S=m*32,w=Math.min(32,r)+S,y=S;y<w;y++)Tt[e.charCodeAt(y)]|=1<<y;for(var c=0;c<o;c++){var A=Tt[t.charCodeAt(c)],b=s[c/32|0]>>>c&1,T=n[c/32|0]>>>c&1,F=A|g,E=((A|T)&f)+f^f|A|T,I=g|~(E|f),x=f&E;I>>>31^b&&(s[c/32|0]^=1<<c),x>>>31^T&&(n[c/32|0]^=1<<c),I=I<<1|b,x=x<<1|T,f=x|~(F|I),g=I&F}for(var y=S;y<w;y++)Tt[e.charCodeAt(y)]=0}for(var k=0,P=-1,z=m*32,j=Math.min(32,r-z)+z,y=z;y<j;y++)Tt[e.charCodeAt(y)]|=1<<y;for(var L=r,c=0;c<o;c++){var A=Tt[t.charCodeAt(c)],b=s[c/32|0]>>>c&1,T=n[c/32|0]>>>c&1,F=A|k,E=((A|T)&P)+P^P|A|T,I=k|~(E|P),x=P&E;L+=I>>>r-1&1,L-=x>>>r-1&1,I>>>31^b&&(s[c/32|0]^=1<<c),x>>>31^T&&(n[c/32|0]^=1<<c),I=I<<1|b,x=x<<1|T,P=x|~(F|I),k=I&F}for(var y=z;y<j;y++)Tt[e.charCodeAt(y)]=0;return L},Hu=function(e,t){if(e.length<t.length){var o=t;t=e,e=o}return t.length===0?e.length:e.length<=32?_S(e,t):OS(e,t)};ir.distance=Hu;var MS=function(e,t){for(var o=1/0,r=0,n=0;n<t.length;n++){var s=Hu(e,t[n]);s<o&&(o=s,r=n)}return t[r]};ir.closest=MS});var zu=Je((_i,Hr)=>{i();a();(function(){"use strict";var e;try{e=typeof Intl<"u"&&typeof Intl.Collator<"u"?Intl.Collator("generic",{sensitivity:"base"}):null}catch{console.log("Collator could not be initialized and wouldn't be used")}var t=$u(),o=[],r=[],n={get:function(s,p,u){var c=u&&e&&u.useCollator;if(c){var m=s.length,g=p.length;if(m===0)return g;if(g===0)return m;var f,S,w,y,A;for(w=0;w<g;++w)o[w]=w,r[w]=p.charCodeAt(w);o[g]=g;var b;for(w=0;w<m;++w){for(S=w+1,y=0;y<g;++y)f=S,b=e.compare(s.charAt(w),String.fromCharCode(r[y]))===0,S=o[y]+(b?0:1),A=f+1,S>A&&(S=A),A=o[y+1]+1,S>A&&(S=A),o[y]=f;o[y]=S}return S}return t.distance(s,p)}};typeof define<"u"&&define!==null&&define.amd?define(function(){return n}):typeof Hr<"u"&&Hr!==null&&typeof _i<"u"&&Hr.exports===_i?Hr.exports=n:(typeof self<"u"&&typeof self.postMessage=="function"&&typeof self.importScripts=="function"||typeof self<"u"&&self!==null)&&(self.Levenshtein=n)})()});var Sm=Je((Yr,ur)=>{i();a();var zl=200,uw="Expected a function",va="__lodash_hash_undefined__",es=1,mr=2,Ea=1/0,jl=9007199254740991,Wn="[object Arguments]",wa="[object Array]",Wl="[object Boolean]",Yl="[object Date]",Xl="[object Error]",Jl="[object Function]",lw="[object GeneratorFunction]",Yn="[object Map]",Zl="[object Number]",cr="[object Object]",Ol="[object Promise]",em="[object RegExp]",Xn="[object Set]",tm="[object String]",om="[object Symbol]",Aa="[object WeakMap]",rm="[object ArrayBuffer]",Jn="[object DataView]",mw="[object Float32Array]",dw="[object Float64Array]",fw="[object Int8Array]",gw="[object Int16Array]",yw="[object Int32Array]",Sw="[object Uint8Array]",ww="[object Uint8ClampedArray]",Aw="[object Uint16Array]",hw="[object Uint32Array]",bw=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tw=/^\w*$/,Fw=/^\./,Iw=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vw=/[\\^$.*+?()[\]{}|]/g,Ew=/\\(\\)?/g,xw=/^\[object .+?Constructor\]$/,Cw=/^(?:0|[1-9]\d*)$/,de={};de[mw]=de[dw]=de[fw]=de[gw]=de[yw]=de[Sw]=de[ww]=de[Aw]=de[hw]=!0;de[Wn]=de[wa]=de[rm]=de[Wl]=de[Jn]=de[Yl]=de[Xl]=de[Jl]=de[Yn]=de[Zl]=de[cr]=de[em]=de[Xn]=de[tm]=de[Aa]=!1;var nm=typeof self=="object"&&self&&self.Object===Object&&self,Rw=typeof self=="object"&&self&&self.Object===Object&&self,Xt=nm||Rw||Function("return this")(),sm=typeof Yr=="object"&&Yr&&!Yr.nodeType&&Yr,Ml=sm&&typeof ur=="object"&&ur&&!ur.nodeType&&ur,Pw=Ml&&Ml.exports===sm,Ql=Pw&&nm.process,ql=function(){try{return Ql&&Ql.binding("util")}catch{}}(),Gl=ql&&ql.isTypedArray;function kw(e,t){var o=e?e.length:0;return!!o&&Uw(e,t,0)>-1}function Dw(e,t,o){for(var r=-1,n=e?e.length:0;++r<n;)if(o(t,e[r]))return!0;return!1}function Nw(e,t){for(var o=-1,r=e?e.length:0;++o<r;)if(t(e[o],o,e))return!0;return!1}function Bw(e,t,o,r){for(var n=e.length,s=o+(r?1:-1);r?s--:++s<n;)if(t(e[s],s,e))return s;return-1}function Uw(e,t,o){if(t!==t)return Bw(e,Lw,o);for(var r=o-1,n=e.length;++r<n;)if(e[r]===t)return r;return-1}function Lw(e){return e!==e}function _w(e){return function(t){return t?.[e]}}function Ow(e,t){for(var o=-1,r=Array(e);++o<e;)r[o]=t(o);return r}function Mw(e){return function(t){return e(t)}}function Qw(e,t){return e.has(t)}function qw(e,t){return e?.[t]}function ha(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function Gw(e){var t=-1,o=Array(e.size);return e.forEach(function(r,n){o[++t]=[n,r]}),o}function Vw(e,t){return function(o){return e(t(o))}}function xa(e){var t=-1,o=Array(e.size);return e.forEach(function(r){o[++t]=r}),o}var Kw=Array.prototype,Hw=Function.prototype,ts=Object.prototype,ya=Xt["__core-js_shared__"],Vl=function(){var e=/[^.]+$/.exec(ya&&ya.keys&&ya.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),im=Hw.toString,Et=ts.hasOwnProperty,dr=ts.toString,$w=RegExp("^"+im.call(Et).replace(vw,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kl=Xt.Symbol,Hl=Xt.Uint8Array,zw=ts.propertyIsEnumerable,jw=Kw.splice,Ww=Vw(Object.keys,Object),ba=fr(Xt,"DataView"),Xr=fr(Xt,"Map"),Ta=fr(Xt,"Promise"),lr=fr(Xt,"Set"),Fa=fr(Xt,"WeakMap"),Jr=fr(Object,"create"),Yw=vo(ba),Xw=vo(Xr),Jw=vo(Ta),Zw=vo(lr),eA=vo(Fa),Zn=Kl?Kl.prototype:void 0,Sa=Zn?Zn.valueOf:void 0,$l=Zn?Zn.toString:void 0;function Fo(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}function tA(){this.__data__=Jr?Jr(null):{}}function oA(e){return this.has(e)&&delete this.__data__[e]}function rA(e){var t=this.__data__;if(Jr){var o=t[e];return o===va?void 0:o}return Et.call(t,e)?t[e]:void 0}function nA(e){var t=this.__data__;return Jr?t[e]!==void 0:Et.call(t,e)}function sA(e,t){var o=this.__data__;return o[e]=Jr&&t===void 0?va:t,this}Fo.prototype.clear=tA;Fo.prototype.delete=oA;Fo.prototype.get=rA;Fo.prototype.has=nA;Fo.prototype.set=sA;function xt(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}function iA(){this.__data__=[]}function aA(e){var t=this.__data__,o=os(t,e);if(o<0)return!1;var r=t.length-1;return o==r?t.pop():jw.call(t,o,1),!0}function pA(e){var t=this.__data__,o=os(t,e);return o<0?void 0:t[o][1]}function cA(e){return os(this.__data__,e)>-1}function uA(e,t){var o=this.__data__,r=os(o,e);return r<0?o.push([e,t]):o[r][1]=t,this}xt.prototype.clear=iA;xt.prototype.delete=aA;xt.prototype.get=pA;xt.prototype.has=cA;xt.prototype.set=uA;function Ct(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}function lA(){this.__data__={hash:new Fo,map:new(Xr||xt),string:new Fo}}function mA(e){return rs(this,e).delete(e)}function dA(e){return rs(this,e).get(e)}function fA(e){return rs(this,e).has(e)}function gA(e,t){return rs(this,e).set(e,t),this}Ct.prototype.clear=lA;Ct.prototype.delete=mA;Ct.prototype.get=dA;Ct.prototype.has=fA;Ct.prototype.set=gA;function Zr(e){var t=-1,o=e?e.length:0;for(this.__data__=new Ct;++t<o;)this.add(e[t])}function yA(e){return this.__data__.set(e,va),this}function SA(e){return this.__data__.has(e)}Zr.prototype.add=Zr.prototype.push=yA;Zr.prototype.has=SA;function vt(e){this.__data__=new xt(e)}function wA(){this.__data__=new xt}function AA(e){return this.__data__.delete(e)}function hA(e){return this.__data__.get(e)}function bA(e){return this.__data__.has(e)}function TA(e,t){var o=this.__data__;if(o instanceof xt){var r=o.__data__;if(!Xr||r.length<zl-1)return r.push([e,t]),this;o=this.__data__=new Ct(r)}return o.set(e,t),this}vt.prototype.clear=wA;vt.prototype.delete=AA;vt.prototype.get=hA;vt.prototype.has=bA;vt.prototype.set=TA;function FA(e,t){var o=Io(e)||fm(e)?Ow(e.length,String):[],r=o.length,n=!!r;for(var s in e)(t||Et.call(e,s))&&!(n&&(s=="length"||um(s,r)))&&o.push(s);return o}function os(e,t){for(var o=e.length;o--;)if(dm(e[o][0],t))return o;return-1}function am(e,t){t=ns(t,e)?[t]:pm(t);for(var o=0,r=t.length;e!=null&&o<r;)e=e[ss(t[o++])];return o&&o==r?e:void 0}function IA(e){return dr.call(e)}function vA(e,t){return e!=null&&t in Object(e)}function Ca(e,t,o,r,n){return e===t?!0:e==null||t==null||!is(e)&&!as(t)?e!==e&&t!==t:EA(e,t,Ca,o,r,n)}function EA(e,t,o,r,n,s){var p=Io(e),u=Io(t),c=wa,m=wa;p||(c=Yt(e),c=c==Wn?cr:c),u||(m=Yt(t),m=m==Wn?cr:m);var g=c==cr&&!ha(e),f=m==cr&&!ha(t),S=c==m;if(S&&!g)return s||(s=new vt),p||jA(e)?cm(e,t,o,r,n,s):OA(e,t,c,o,r,n,s);if(!(n&mr)){var w=g&&Et.call(e,"__wrapped__"),y=f&&Et.call(t,"__wrapped__");if(w||y){var A=w?e.value():e,b=y?t.value():t;return s||(s=new vt),o(A,b,r,n,s)}}return S?(s||(s=new vt),MA(e,t,o,r,n,s)):!1}function xA(e,t,o,r){var n=o.length,s=n,p=!r;if(e==null)return!s;for(e=Object(e);n--;){var u=o[n];if(p&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++n<s;){u=o[n];var c=u[0],m=e[c],g=u[1];if(p&&u[2]){if(m===void 0&&!(c in e))return!1}else{var f=new vt;if(r)var S=r(m,g,c,e,t,f);if(!(S===void 0?Ca(g,m,r,es|mr,f):S))return!1}}return!0}function CA(e){if(!is(e)||VA(e))return!1;var t=ym(e)||ha(e)?$w:xw;return t.test(vo(e))}function RA(e){return as(e)&&Pa(e.length)&&!!de[dr.call(e)]}function PA(e){return typeof e=="function"?e:e==null?JA:typeof e=="object"?Io(e)?NA(e[0],e[1]):DA(e):eh(e)}function kA(e){if(!KA(e))return Ww(e);var t=[];for(var o in Object(e))Et.call(e,o)&&o!="constructor"&&t.push(o);return t}function DA(e){var t=QA(e);return t.length==1&&t[0][2]?mm(t[0][0],t[0][1]):function(o){return o===e||xA(o,e,t)}}function NA(e,t){return ns(e)&&lm(t)?mm(ss(e),t):function(o){var r=YA(o,e);return r===void 0&&r===t?XA(o,e):Ca(t,r,void 0,es|mr)}}function BA(e){return function(t){return am(t,e)}}function UA(e){if(typeof e=="string")return e;if(ka(e))return $l?$l.call(e):"";var t=e+"";return t=="0"&&1/e==-Ea?"-0":t}function LA(e,t,o){var r=-1,n=kw,s=e.length,p=!0,u=[],c=u;if(o)p=!1,n=Dw;else if(s>=zl){var m=t?null:_A(e);if(m)return xa(m);p=!1,n=Qw,c=new Zr}else c=t?[]:u;e:for(;++r<s;){var g=e[r],f=t?t(g):g;if(g=o||g!==0?g:0,p&&f===f){for(var S=c.length;S--;)if(c[S]===f)continue e;t&&c.push(f),u.push(g)}else n(c,f,o)||(c!==u&&c.push(f),u.push(g))}return u}function pm(e){return Io(e)?e:HA(e)}var _A=lr&&1/xa(new lr([,-0]))[1]==Ea?function(e){return new lr(e)}:ZA;function cm(e,t,o,r,n,s){var p=n&mr,u=e.length,c=t.length;if(u!=c&&!(p&&c>u))return!1;var m=s.get(e);if(m&&s.get(t))return m==t;var g=-1,f=!0,S=n&es?new Zr:void 0;for(s.set(e,t),s.set(t,e);++g<u;){var w=e[g],y=t[g];if(r)var A=p?r(y,w,g,t,e,s):r(w,y,g,e,t,s);if(A!==void 0){if(A)continue;f=!1;break}if(S){if(!Nw(t,function(b,T){if(!S.has(T)&&(w===b||o(w,b,r,n,s)))return S.add(T)})){f=!1;break}}else if(!(w===y||o(w,y,r,n,s))){f=!1;break}}return s.delete(e),s.delete(t),f}function OA(e,t,o,r,n,s,p){switch(o){case Jn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case rm:return!(e.byteLength!=t.byteLength||!r(new Hl(e),new Hl(t)));case Wl:case Yl:case Zl:return dm(+e,+t);case Xl:return e.name==t.name&&e.message==t.message;case em:case tm:return e==t+"";case Yn:var u=Gw;case Xn:var c=s&mr;if(u||(u=xa),e.size!=t.size&&!c)return!1;var m=p.get(e);if(m)return m==t;s|=es,p.set(e,t);var g=cm(u(e),u(t),r,n,s,p);return p.delete(e),g;case om:if(Sa)return Sa.call(e)==Sa.call(t)}return!1}function MA(e,t,o,r,n,s){var p=n&mr,u=Ia(e),c=u.length,m=Ia(t),g=m.length;if(c!=g&&!p)return!1;for(var f=c;f--;){var S=u[f];if(!(p?S in t:Et.call(t,S)))return!1}var w=s.get(e);if(w&&s.get(t))return w==t;var y=!0;s.set(e,t),s.set(t,e);for(var A=p;++f<c;){S=u[f];var b=e[S],T=t[S];if(r)var F=p?r(T,b,S,t,e,s):r(b,T,S,e,t,s);if(!(F===void 0?b===T||o(b,T,r,n,s):F)){y=!1;break}A||(A=S=="constructor")}if(y&&!A){var E=e.constructor,I=t.constructor;E!=I&&"constructor"in e&&"constructor"in t&&!(typeof E=="function"&&E instanceof E&&typeof I=="function"&&I instanceof I)&&(y=!1)}return s.delete(e),s.delete(t),y}function rs(e,t){var o=e.__data__;return GA(t)?o[typeof t=="string"?"string":"hash"]:o.map}function QA(e){for(var t=Ia(e),o=t.length;o--;){var r=t[o],n=e[r];t[o]=[r,n,lm(n)]}return t}function fr(e,t){var o=qw(e,t);return CA(o)?o:void 0}var Yt=IA;(ba&&Yt(new ba(new ArrayBuffer(1)))!=Jn||Xr&&Yt(new Xr)!=Yn||Ta&&Yt(Ta.resolve())!=Ol||lr&&Yt(new lr)!=Xn||Fa&&Yt(new Fa)!=Aa)&&(Yt=function(e){var t=dr.call(e),o=t==cr?e.constructor:void 0,r=o?vo(o):void 0;if(r)switch(r){case Yw:return Jn;case Xw:return Yn;case Jw:return Ol;case Zw:return Xn;case eA:return Aa}return t});function qA(e,t,o){t=ns(t,e)?[t]:pm(t);for(var r,n=-1,p=t.length;++n<p;){var s=ss(t[n]);if(!(r=e!=null&&o(e,s)))break;e=e[s]}if(r)return r;var p=e?e.length:0;return!!p&&Pa(p)&&um(s,p)&&(Io(e)||fm(e))}function um(e,t){return t=t??jl,!!t&&(typeof e=="number"||Cw.test(e))&&e>-1&&e%1==0&&e<t}function ns(e,t){if(Io(e))return!1;var o=typeof e;return o=="number"||o=="symbol"||o=="boolean"||e==null||ka(e)?!0:Tw.test(e)||!bw.test(e)||t!=null&&e in Object(t)}function GA(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function VA(e){return!!Vl&&Vl in e}function KA(e){var t=e&&e.constructor,o=typeof t=="function"&&t.prototype||ts;return e===o}function lm(e){return e===e&&!is(e)}function mm(e,t){return function(o){return o==null?!1:o[e]===t&&(t!==void 0||e in Object(o))}}var HA=Ra(function(e){e=WA(e);var t=[];return Fw.test(e)&&t.push(""),e.replace(Iw,function(o,r,n,s){t.push(n?s.replace(Ew,"$1"):r||o)}),t});function ss(e){if(typeof e=="string"||ka(e))return e;var t=e+"";return t=="0"&&1/e==-Ea?"-0":t}function vo(e){if(e!=null){try{return im.call(e)}catch{}try{return e+""}catch{}}return""}function $A(e,t){return e&&e.length?LA(e,PA(t,2)):[]}function Ra(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new TypeError(uw);var o=function(){var r=arguments,n=t?t.apply(this,r):r[0],s=o.cache;if(s.has(n))return s.get(n);var p=e.apply(this,r);return o.cache=s.set(n,p),p};return o.cache=new(Ra.Cache||Ct),o}Ra.Cache=Ct;function dm(e,t){return e===t||e!==e&&t!==t}function fm(e){return zA(e)&&Et.call(e,"callee")&&(!zw.call(e,"callee")||dr.call(e)==Wn)}var Io=Array.isArray;function gm(e){return e!=null&&Pa(e.length)&&!ym(e)}function zA(e){return as(e)&&gm(e)}function ym(e){var t=is(e)?dr.call(e):"";return t==Jl||t==lw}function Pa(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=jl}function is(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function as(e){return!!e&&typeof e=="object"}function ka(e){return typeof e=="symbol"||as(e)&&dr.call(e)==om}var jA=Gl?Mw(Gl):RA;function WA(e){return e==null?"":UA(e)}function YA(e,t,o){var r=e==null?void 0:am(e,t);return r===void 0?o:r}function XA(e,t){return e!=null&&qA(e,t,vA)}function Ia(e){return gm(e)?FA(e):kA(e)}function JA(e){return e}function ZA(){}function eh(e){return ns(e)?_w(ss(e)):BA(e)}ur.exports=$A});var dd=Je((on,Ar)=>{i();a();var Bh=200,Uh="Expected a function",Xa="__lodash_hash_undefined__",gs=1,hr=2,Km=1/0,Hm=9007199254740991,ps="[object Arguments]",Ka="[object Array]",$m="[object Boolean]",zm="[object Date]",jm="[object Error]",Wm="[object Function]",Lh="[object GeneratorFunction]",cs="[object Map]",Ym="[object Number]",wr="[object Object]",Um="[object Promise]",Xm="[object RegExp]",us="[object Set]",Jm="[object String]",Zm="[object Symbol]",Ha="[object WeakMap]",ed="[object ArrayBuffer]",ls="[object DataView]",_h="[object Float32Array]",Oh="[object Float64Array]",Mh="[object Int8Array]",Qh="[object Int16Array]",qh="[object Int32Array]",Gh="[object Uint8Array]",Vh="[object Uint8ClampedArray]",Kh="[object Uint16Array]",Hh="[object Uint32Array]",$h=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zh=/^\w*$/,jh=/^\./,Wh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Yh=/[\\^$.*+?()[\]{}|]/g,Xh=/\\(\\)?/g,Jh=/^\[object .+?Constructor\]$/,Zh=/^(?:0|[1-9]\d*)$/,fe={};fe[_h]=fe[Oh]=fe[Mh]=fe[Qh]=fe[qh]=fe[Gh]=fe[Vh]=fe[Kh]=fe[Hh]=!0;fe[ps]=fe[Ka]=fe[ed]=fe[$m]=fe[ls]=fe[zm]=fe[jm]=fe[Wm]=fe[cs]=fe[Ym]=fe[wr]=fe[Xm]=fe[us]=fe[Jm]=fe[Ha]=!1;var td=typeof self=="object"&&self&&self.Object===Object&&self,eb=typeof self=="object"&&self&&self.Object===Object&&self,eo=td||eb||Function("return this")(),od=typeof on=="object"&&on&&!on.nodeType&&on,Lm=od&&typeof Ar=="object"&&Ar&&!Ar.nodeType&&Ar,tb=Lm&&Lm.exports===od,_m=tb&&td.process,Om=function(){try{return _m&&_m.binding("util")}catch{}}(),Mm=Om&&Om.isTypedArray;function ob(e,t,o,r){for(var n=-1,s=e?e.length:0;++n<s;){var p=e[n];t(r,p,o(p),e)}return r}function rb(e,t){for(var o=-1,r=e?e.length:0;++o<r;)if(t(e[o],o,e))return!0;return!1}function nb(e){return function(t){return t?.[e]}}function sb(e,t){for(var o=-1,r=Array(e);++o<e;)r[o]=t(o);return r}function ib(e){return function(t){return e(t)}}function ab(e,t){return e?.[t]}function $a(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function pb(e){var t=-1,o=Array(e.size);return e.forEach(function(r,n){o[++t]=[n,r]}),o}function cb(e,t){return function(o){return e(t(o))}}function ub(e){var t=-1,o=Array(e.size);return e.forEach(function(r){o[++t]=r}),o}var lb=Array.prototype,mb=Function.prototype,ys=Object.prototype,Ga=eo["__core-js_shared__"],Qm=function(){var e=/[^.]+$/.exec(Ga&&Ga.keys&&Ga.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),rd=mb.toString,Dt=ys.hasOwnProperty,br=ys.toString,db=RegExp("^"+rd.call(Dt).replace(Yh,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qm=eo.Symbol,Gm=eo.Uint8Array,fb=ys.propertyIsEnumerable,gb=lb.splice,yb=cb(Object.keys,Object),za=Tr(eo,"DataView"),rn=Tr(eo,"Map"),ja=Tr(eo,"Promise"),Wa=Tr(eo,"Set"),Ya=Tr(eo,"WeakMap"),nn=Tr(Object,"create"),Sb=Po(za),wb=Po(rn),Ab=Po(ja),hb=Po(Wa),bb=Po(Ya),ms=qm?qm.prototype:void 0,Va=ms?ms.valueOf:void 0,Vm=ms?ms.toString:void 0;function Ro(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}function Tb(){this.__data__=nn?nn(null):{}}function Fb(e){return this.has(e)&&delete this.__data__[e]}function Ib(e){var t=this.__data__;if(nn){var o=t[e];return o===Xa?void 0:o}return Dt.call(t,e)?t[e]:void 0}function vb(e){var t=this.__data__;return nn?t[e]!==void 0:Dt.call(t,e)}function Eb(e,t){var o=this.__data__;return o[e]=nn&&t===void 0?Xa:t,this}Ro.prototype.clear=Tb;Ro.prototype.delete=Fb;Ro.prototype.get=Ib;Ro.prototype.has=vb;Ro.prototype.set=Eb;function Nt(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}function xb(){this.__data__=[]}function Cb(e){var t=this.__data__,o=Ss(t,e);if(o<0)return!1;var r=t.length-1;return o==r?t.pop():gb.call(t,o,1),!0}function Rb(e){var t=this.__data__,o=Ss(t,e);return o<0?void 0:t[o][1]}function Pb(e){return Ss(this.__data__,e)>-1}function kb(e,t){var o=this.__data__,r=Ss(o,e);return r<0?o.push([e,t]):o[r][1]=t,this}Nt.prototype.clear=xb;Nt.prototype.delete=Cb;Nt.prototype.get=Rb;Nt.prototype.has=Pb;Nt.prototype.set=kb;function Bt(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}function Db(){this.__data__={hash:new Ro,map:new(rn||Nt),string:new Ro}}function Nb(e){return ws(this,e).delete(e)}function Bb(e){return ws(this,e).get(e)}function Ub(e){return ws(this,e).has(e)}function Lb(e,t){return ws(this,e).set(e,t),this}Bt.prototype.clear=Db;Bt.prototype.delete=Nb;Bt.prototype.get=Bb;Bt.prototype.has=Ub;Bt.prototype.set=Lb;function ds(e){var t=-1,o=e?e.length:0;for(this.__data__=new Bt;++t<o;)this.add(e[t])}function _b(e){return this.__data__.set(e,Xa),this}function Ob(e){return this.__data__.has(e)}ds.prototype.add=ds.prototype.push=_b;ds.prototype.has=Ob;function kt(e){this.__data__=new Nt(e)}function Mb(){this.__data__=new Nt}function Qb(e){return this.__data__.delete(e)}function qb(e){return this.__data__.get(e)}function Gb(e){return this.__data__.has(e)}function Vb(e,t){var o=this.__data__;if(o instanceof Nt){var r=o.__data__;if(!rn||r.length<Bh-1)return r.push([e,t]),this;o=this.__data__=new Bt(r)}return o.set(e,t),this}kt.prototype.clear=Mb;kt.prototype.delete=Qb;kt.prototype.get=qb;kt.prototype.has=Gb;kt.prototype.set=Vb;function Kb(e,t){var o=Zt(e)||ld(e)?sb(e.length,String):[],r=o.length,n=!!r;for(var s in e)(t||Dt.call(e,s))&&!(n&&(s=="length"||ad(s,r)))&&o.push(s);return o}function Ss(e,t){for(var o=e.length;o--;)if(ud(e[o][0],t))return o;return-1}function Hb(e,t,o,r){return $b(e,function(n,s,p){t(r,n,o(n),p)}),r}var $b=pT(jb),zb=cT();function jb(e,t){return e&&zb(e,t,fs)}function nd(e,t){t=As(t,e)?[t]:sd(t);for(var o=0,r=t.length;e!=null&&o<r;)e=e[hs(t[o++])];return o&&o==r?e:void 0}function Wb(e){return br.call(e)}function Yb(e,t){return e!=null&&t in Object(e)}function Ja(e,t,o,r,n){return e===t?!0:e==null||t==null||!bs(e)&&!Ts(t)?e!==e&&t!==t:Xb(e,t,Ja,o,r,n)}function Xb(e,t,o,r,n,s){var p=Zt(e),u=Zt(t),c=Ka,m=Ka;p||(c=Jt(e),c=c==ps?wr:c),u||(m=Jt(t),m=m==ps?wr:m);var g=c==wr&&!$a(e),f=m==wr&&!$a(t),S=c==m;if(S&&!g)return s||(s=new kt),p||hT(e)?id(e,t,o,r,n,s):uT(e,t,c,o,r,n,s);if(!(n&hr)){var w=g&&Dt.call(e,"__wrapped__"),y=f&&Dt.call(t,"__wrapped__");if(w||y){var A=w?e.value():e,b=y?t.value():t;return s||(s=new kt),o(A,b,r,n,s)}}return S?(s||(s=new kt),lT(e,t,o,r,n,s)):!1}function Jb(e,t,o,r){var n=o.length,s=n,p=!r;if(e==null)return!s;for(e=Object(e);n--;){var u=o[n];if(p&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++n<s;){u=o[n];var c=u[0],m=e[c],g=u[1];if(p&&u[2]){if(m===void 0&&!(c in e))return!1}else{var f=new kt;if(r)var S=r(m,g,c,e,t,f);if(!(S===void 0?Ja(g,m,r,gs|hr,f):S))return!1}}return!0}function Zb(e){if(!bs(e)||gT(e))return!1;var t=md(e)||$a(e)?db:Jh;return t.test(Po(e))}function eT(e){return Ts(e)&&tp(e.length)&&!!fe[br.call(e)]}function tT(e){return typeof e=="function"?e:e==null?IT:typeof e=="object"?Zt(e)?nT(e[0],e[1]):rT(e):vT(e)}function oT(e){if(!yT(e))return yb(e);var t=[];for(var o in Object(e))Dt.call(e,o)&&o!="constructor"&&t.push(o);return t}function rT(e){var t=mT(e);return t.length==1&&t[0][2]?cd(t[0][0],t[0][1]):function(o){return o===e||Jb(o,e,t)}}function nT(e,t){return As(e)&&pd(t)?cd(hs(e),t):function(o){var r=TT(o,e);return r===void 0&&r===t?FT(o,e):Ja(t,r,void 0,gs|hr)}}function sT(e){return function(t){return nd(t,e)}}function iT(e){if(typeof e=="string")return e;if(op(e))return Vm?Vm.call(e):"";var t=e+"";return t=="0"&&1/e==-Km?"-0":t}function sd(e){return Zt(e)?e:ST(e)}function aT(e,t){return function(o,r){var n=Zt(o)?ob:Hb,s=t?t():{};return n(o,e,tT(r,2),s)}}function pT(e,t){return function(o,r){if(o==null)return o;if(!ep(o))return e(o,r);for(var n=o.length,s=t?n:-1,p=Object(o);(t?s--:++s<n)&&r(p[s],s,p)!==!1;);return o}}function cT(e){return function(t,o,r){for(var n=-1,s=Object(t),p=r(t),u=p.length;u--;){var c=p[e?u:++n];if(o(s[c],c,s)===!1)break}return t}}function id(e,t,o,r,n,s){var p=n&hr,u=e.length,c=t.length;if(u!=c&&!(p&&c>u))return!1;var m=s.get(e);if(m&&s.get(t))return m==t;var g=-1,f=!0,S=n&gs?new ds:void 0;for(s.set(e,t),s.set(t,e);++g<u;){var w=e[g],y=t[g];if(r)var A=p?r(y,w,g,t,e,s):r(w,y,g,e,t,s);if(A!==void 0){if(A)continue;f=!1;break}if(S){if(!rb(t,function(b,T){if(!S.has(T)&&(w===b||o(w,b,r,n,s)))return S.add(T)})){f=!1;break}}else if(!(w===y||o(w,y,r,n,s))){f=!1;break}}return s.delete(e),s.delete(t),f}function uT(e,t,o,r,n,s,p){switch(o){case ls:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ed:return!(e.byteLength!=t.byteLength||!r(new Gm(e),new Gm(t)));case $m:case zm:case Ym:return ud(+e,+t);case jm:return e.name==t.name&&e.message==t.message;case Xm:case Jm:return e==t+"";case cs:var u=pb;case us:var c=s&hr;if(u||(u=ub),e.size!=t.size&&!c)return!1;var m=p.get(e);if(m)return m==t;s|=gs,p.set(e,t);var g=id(u(e),u(t),r,n,s,p);return p.delete(e),g;case Zm:if(Va)return Va.call(e)==Va.call(t)}return!1}function lT(e,t,o,r,n,s){var p=n&hr,u=fs(e),c=u.length,m=fs(t),g=m.length;if(c!=g&&!p)return!1;for(var f=c;f--;){var S=u[f];if(!(p?S in t:Dt.call(t,S)))return!1}var w=s.get(e);if(w&&s.get(t))return w==t;var y=!0;s.set(e,t),s.set(t,e);for(var A=p;++f<c;){S=u[f];var b=e[S],T=t[S];if(r)var F=p?r(T,b,S,t,e,s):r(b,T,S,e,t,s);if(!(F===void 0?b===T||o(b,T,r,n,s):F)){y=!1;break}A||(A=S=="constructor")}if(y&&!A){var E=e.constructor,I=t.constructor;E!=I&&"constructor"in e&&"constructor"in t&&!(typeof E=="function"&&E instanceof E&&typeof I=="function"&&I instanceof I)&&(y=!1)}return s.delete(e),s.delete(t),y}function ws(e,t){var o=e.__data__;return fT(t)?o[typeof t=="string"?"string":"hash"]:o.map}function mT(e){for(var t=fs(e),o=t.length;o--;){var r=t[o],n=e[r];t[o]=[r,n,pd(n)]}return t}function Tr(e,t){var o=ab(e,t);return Zb(o)?o:void 0}var Jt=Wb;(za&&Jt(new za(new ArrayBuffer(1)))!=ls||rn&&Jt(new rn)!=cs||ja&&Jt(ja.resolve())!=Um||Wa&&Jt(new Wa)!=us||Ya&&Jt(new Ya)!=Ha)&&(Jt=function(e){var t=br.call(e),o=t==wr?e.constructor:void 0,r=o?Po(o):void 0;if(r)switch(r){case Sb:return ls;case wb:return cs;case Ab:return Um;case hb:return us;case bb:return Ha}return t});function dT(e,t,o){t=As(t,e)?[t]:sd(t);for(var r,n=-1,p=t.length;++n<p;){var s=hs(t[n]);if(!(r=e!=null&&o(e,s)))break;e=e[s]}if(r)return r;var p=e?e.length:0;return!!p&&tp(p)&&ad(s,p)&&(Zt(e)||ld(e))}function ad(e,t){return t=t??Hm,!!t&&(typeof e=="number"||Zh.test(e))&&e>-1&&e%1==0&&e<t}function As(e,t){if(Zt(e))return!1;var o=typeof e;return o=="number"||o=="symbol"||o=="boolean"||e==null||op(e)?!0:zh.test(e)||!$h.test(e)||t!=null&&e in Object(t)}function fT(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function gT(e){return!!Qm&&Qm in e}function yT(e){var t=e&&e.constructor,o=typeof t=="function"&&t.prototype||ys;return e===o}function pd(e){return e===e&&!bs(e)}function cd(e,t){return function(o){return o==null?!1:o[e]===t&&(t!==void 0||e in Object(o))}}var ST=Za(function(e){e=bT(e);var t=[];return jh.test(e)&&t.push(""),e.replace(Wh,function(o,r,n,s){t.push(n?s.replace(Xh,"$1"):r||o)}),t});function hs(e){if(typeof e=="string"||op(e))return e;var t=e+"";return t=="0"&&1/e==-Km?"-0":t}function Po(e){if(e!=null){try{return rd.call(e)}catch{}try{return e+""}catch{}}return""}var wT=aT(function(e,t,o){e[o]=t});function Za(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new TypeError(Uh);var o=function(){var r=arguments,n=t?t.apply(this,r):r[0],s=o.cache;if(s.has(n))return s.get(n);var p=e.apply(this,r);return o.cache=s.set(n,p),p};return o.cache=new(Za.Cache||Bt),o}Za.Cache=Bt;function ud(e,t){return e===t||e!==e&&t!==t}function ld(e){return AT(e)&&Dt.call(e,"callee")&&(!fb.call(e,"callee")||br.call(e)==ps)}var Zt=Array.isArray;function ep(e){return e!=null&&tp(e.length)&&!md(e)}function AT(e){return Ts(e)&&ep(e)}function md(e){var t=bs(e)?br.call(e):"";return t==Wm||t==Lh}function tp(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Hm}function bs(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Ts(e){return!!e&&typeof e=="object"}function op(e){return typeof e=="symbol"||Ts(e)&&br.call(e)==Zm}var hT=Mm?ib(Mm):eT;function bT(e){return e==null?"":iT(e)}function TT(e,t,o){var r=e==null?void 0:nd(e,t);return r===void 0?o:r}function FT(e,t){return e!=null&&dT(e,t,Yb)}function fs(e){return ep(e)?Kb(e):oT(e)}function IT(e){return e}function vT(e){return As(e)?nb(hs(e)):sT(e)}Ar.exports=wT});var Qp=Je(Mp=>{"use strict";i();a();Object.defineProperty(Mp,"__esModule",{value:!0});var rg=R();function FI(e){var t=rg.useRef();return rg.useEffect(function(){t.current=e}),t.current}Mp.default=FI});i();a();i();a();i();a();var CS=l.object({balance:l.boolean(),history:l.boolean()}),ox=l.record(l.string(),CS),Mn=class extends Error{constructor(t){super(t),this.name="SetTermsAcknowledgementError"}};var Nu=async(e,t)=>{try{return await e.set("termsHaveBeenAcknowledged2",t)}catch{throw new Mn("Error Setting Terms Acknowledgement")}};async function RS(e){return(await e.get("onboardedAt"))?.onboardedAt}async function Bu(e,t=Date.now()){t&&!await RS(e)?await e.set("onboardedAt",{onboardedAt:t}):t||await e.remove("onboardedAt")}i();a();i();a();var Qu=C(ES(),1),qu=C(Mu(),1),Bi=C(IS(),1),sr=(e=>(e.BLOCK="BLOCK",e.NONE="NONE",e))(sr||{});function PS(e,t){for(let o=0;o<e.k;o++){let r=(0,qu.default)(`${e.salt}_${t}_${o}`,{asBytes:!0}),s=Bi.Buffer.from(r).subarray(0,4).readUInt32BE(0)%e.bits,p=Math.floor(s/24),u=Bi.Buffer.from(e.bitVector.slice(p*4,p*4+4),"base64"),c=s%24,m=Math.floor(c/8),g=c%8;if(!(u[m]&1<<7-g))return!1}return!0}var Ix=typeof self<"u"&&self.fetch?self.fetch:Qu.default;function Ui(e,t,o,r){let s=new URL(r).hostname.toLowerCase().split(".");for(let p=0;p<s.length-1;p++){let u=s.slice(p).join(".");if(t.includes(u)||PS(e,u)&&!o.includes(u))return"BLOCK"}return"NONE"}var Qn=C(Ku());var Ju=C(zu());i();a();var ju="https://blocklist.phantom.app/multichain.json",Oi="https://blowfish-blocklist-proxy.phantom.app",QS="https://github.com/phantom-labs/blocklist",Mi=(e=3)=>({retry:e,retryDelay:t=>Math.min(1e3*2**t,3e4)}),mt={SLIPPAGE_EXCEEDED:"SLIPPAGE_EXCEEDED",INSUFFICIENT_FUNDS:"INSUFFICIENT_FUNDS",INSUFFICIENT_GAS:"INSUFFICIENT_GAS",UNKNOWN_ERROR:"UNKNOWN_ERROR",SIMULATION_FAILED:"SIMULATION_FAILED",TRANSACTION_EXPIRED:"TRANSACTION_EXPIRED",ACCOUNT_FROZEN:"ACCOUNT_FROZEN",SIMULATION_TIMEOUT:"SIMULATION_TIMEOUT",STALE_QUOTA:"STALE_QUOTA"};function qS(e){return{1:"1-critical-alert",2:"2-alert",3:"3-critical-error",4:"4-error",5:"5-information"}[e]}var VS=3,Vi=6e5,KS=6e4,jx=l.object({type:l.union([l.literal("all"),l.literal("blocklist"),l.literal("whitelist"),l.literal("error"),l.literal("fuzzy"),l.literal("blowfishBloomFilter")]),result:l.boolean(),source:l.optional(l.string()),match:l.string().optional(),isSubdomainDomainWhitelisted:l.boolean().optional()}),Wx=l.object({localHash:l.any(),cursor:l.any()}),Ki=l.object({bitVector:l.string(),k:l.number(),hash:l.string(),bits:l.number(),salt:l.string()}),Zu=l.union([l.object({bloomFilter:Ki,bloomFilterHash:l.string(),recentlyAdded:l.array(l.string()),recentlyRemoved:l.array(l.string()),nextCursor:l.string()}),l.object({bloomFilter:Ki.optional(),bloomFilterHash:l.optional(l.string()),recentlyAdded:l.array(l.string()),recentlyRemoved:l.array(l.string()),nextCursor:l.string()})]),el=l.object({bloomFilter:Ki,lastUpdated:l.number()}).nullish(),tl=l.object({recentlyAdded:l.array(l.string()),recentlyRemoved:l.array(l.string()),lastUpdated:l.number().optional()}).nullish(),$r=class{constructor(t,o,r,n){this.blocklist=Qi(t),this.whitelist=Qi(o),this.fuzzylist=Qi(r),this.tolerance=n||VS}check(t,o){if(!t)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let r=qn(t),n=Hi(r);if($S(n,this.whitelist)){let c=new URL(t).hostname;if(qi(Hi(c),this.blocklist)){let g={type:"blocklist",result:!0,source:c,isSubdomainDomainWhitelisted:!0};return o.capture("blockedDomain",{data:g}),g}else return{type:"whitelist",result:!1,source:c,isSubdomainDomainWhitelisted:!0}}if(qi(n,this.whitelist))return{type:"whitelist",result:!1,source:r,isSubdomainDomainWhitelisted:!1};if(qi(n,this.blocklist)){let c={type:"blocklist",result:!0,source:r,isSubdomainDomainWhitelisted:!1};return o.capture("blockedDomain",{data:c}),c}if(this.tolerance>0){let c=Wu(n);c=c.replace("www.","");let m=this.fuzzylist.find(g=>{let f=Wu(g);return Ju.default.get(c,f)<=this.tolerance});if(m)return{type:"fuzzy",result:!0,match:HS(m),source:r,isSubdomainDomainWhitelisted:!1}}return{type:"all",result:!1,source:r,isSubdomainDomainWhitelisted:!1}}},qn=e=>{let t=new URL(e).hostname.split(".");return t.slice(0).slice(-(t.length===4?3:2)).join(".")},Qi=e=>e.map(Hi),Hi=e=>e.split(".").reverse(),HS=e=>e.slice().reverse().join("."),Wu=e=>e.slice(1).reverse().join("."),qi=(e,t)=>t.some(o=>o.length>e.length?!1:o.every((r,n)=>e[n]===r)),$S=(e,t)=>t.some(o=>o[0]===e[0]&&o[1]===e[1]&&o[2]==="*"),zS=async e=>{let t=(0,Qn.getBlocklist)(),o=await e.get("cachedBlocklistDiff"),r=null;try{r=JSON.parse(`${o}`)}catch(n){O.captureError(new Error(`Error parsing blocklist diff: ${n?.message}`),"generic")}if(r&&r.expiresAt&&r.expiresAt>Date.now())return new $r(t.blocklist.concat(r.blocklist),t.whitelist.concat(r.whitelist),t.fuzzylist.concat(r.fuzzylist));{let n={},s=(0,Qn.getVersion)();r&&(n.lastContentHash=`${r.contentHash}`),s&&(n.localBlocklistVersion=`${s}`);let p=await M.headers(n).get(ju);if(p.status===200){let u=p.data;return u.expiresAt=Date.now()+Vi,e.set("cachedBlocklistDiff",JSON.stringify(u)),new $r(t.blocklist.concat(u.blocklist),t.whitelist.concat(u.whitelist),t.fuzzylist.concat(u.fuzzylist))}else{if(p.status===304)return r.expiresAt=Date.now()+Vi,e.set("cachedBlocklistDiff",JSON.stringify(r)),new $r(t.blocklist.concat(r.blocklist),t.whitelist.concat(r.whitelist),t.fuzzylist.concat(r.fuzzylist));throw new Error("Invalid response from blocklist")}}},$i=async(e,t,o)=>{let r,n;try{let p=await Rn(t.getFeatureFlags(),1e3);r=!!p["kill-blowfish-blocklist-cursor"],n=!!p["kill-previous-blocklist"]}catch{r=!1,n=!1}let s;try{if(n)return r?Xu(o,e,t):Yu(o,e,t);{s=await zS(e);let p=s.check(o,t);return p.type==="all"?r?Xu(o,e,t):Yu(o,e,t):p}}catch{return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1}}},Yu=async(e,t,o)=>{if(!e)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let r=qn(e),n=await t.getAll(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents","cachedScanDataCursor"]),s=n.cachedBloomFilter??null,p=n.cachedBloomFilterHash??null,u=n.cachedScanDataCursor??null,c=n.cachedScanDataRecents??null,m=null,g={recentlyAdded:[],recentlyRemoved:[],lastUpdated:0},f=null;if(s){let w=el.safeParse(s);w.success?m=w.data:await Gi(t)}if(c){let w=tl.safeParse(c);w.success?g=w.data:await Gi(t)}if(u){let y=l.string().safeParse(u);y.success?f=y.data:await Gi(t)}if(!g||g.lastUpdated==null||Date.now()>g.lastUpdated+KS){let w={localHash:p,cursor:f},y=await M.post(Oi,w);if(y.status!==200)return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1};let A=y.data,b,T=Zu.safeParse(A);if(T.success)b=T.data;else return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1};let F=[],E=[];g!=null&&(F=g.recentlyAdded,E=g.recentlyRemoved),F=F.concat(b.recentlyAdded),E=E.concat(b.recentlyRemoved),F=F.filter(x=>b.recentlyRemoved.indexOf(x)<0),E=E.filter(x=>b.recentlyAdded.indexOf(x)<0);let I={recentlyAdded:F,recentlyRemoved:E,lastUpdated:Date.now()};if(await t.set("cachedScanDataRecents",I),g=I,b.nextCursor!==f&&await t.set("cachedScanDataCursor",b.nextCursor),b.bloomFilter!=null){let x={bloomFilter:b.bloomFilter,lastUpdated:Date.now()};await Promise.all([t.set("cachedBloomFilter",x),t.set("cachedBloomFilterHash",b.bloomFilterHash)]),m=x}}if(!m)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let S=Ui(m.bloomFilter,g.recentlyAdded,g.recentlyRemoved,e);if(S===sr.BLOCK){let w={result:!0,source:r,type:"blowfishBloomFilter"};return o.capture("blockedDomain",{data:w}),w}else if(S===sr.NONE)return{result:!1,type:"all",isSubdomainDomainWhitelisted:!1};return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1}};async function Gi(e){await e.remove(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents","cachedScanDataCursor"])}var Xu=async(e,t,o)=>{if(!e)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let r=qn(e),n=await t.getAll(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents"]),s=n.cachedBloomFilter??null,p=n.cachedBloomFilterHash??null,u=n.cachedScanDataRecents??null,c=null,m={recentlyAdded:[],recentlyRemoved:[],lastUpdated:0};if(s){let f=el.safeParse(s);f.success?c=f.data:await t.remove(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents"])}if(u){let f=tl.safeParse(u);f.success?m=f.data:await t.remove(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents"])}if(!m||m.lastUpdated==null||Date.now()>m.lastUpdated+Vi){let f={localHash:p},S=await M.post(Oi,f);if(S.status!==200)return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1};let w=S.data,y,A=Zu.safeParse(w);if(A.success)y=A.data;else return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1};let b={recentlyAdded:y.recentlyAdded,recentlyRemoved:y.recentlyRemoved,lastUpdated:Date.now()};if(await t.set("cachedScanDataRecents",b),m=b,y.bloomFilter!=null){let T={bloomFilter:y.bloomFilter,lastUpdated:Date.now()};await Promise.all([t.set("cachedBloomFilter",T),t.set("cachedBloomFilterHash",y.bloomFilterHash)]),c=T}}if(!c)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let g=Ui(c.bloomFilter,m.recentlyAdded,m.recentlyRemoved,e);if(g===sr.BLOCK){let f={result:!0,source:r,type:"blowfishBloomFilter"};return o.capture("blockedDomain",{data:f}),f}else if(g===sr.NONE)return{result:!1,type:"all",isSubdomainDomainWhitelisted:!1};return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1}};i();a();i();a();var jS=e=>e/1e8;i();a();i();a();var Gn={GREEN:"accentSuccess",RED:"accentAlert",WHITE:"textPrimary"};function YS(e){switch(e){case"PLUS":return Gn.GREEN;case"MINUS":return Gn.RED;case"EQUAL":return Gn.WHITE;default:return Gn.WHITE}}function XS(e){let t=e?.advancedDetails&&"safeguard"in e.advancedDetails?e?.advancedDetails?.safeguard:void 0;if(t?.recommended&&!t?.shouldBundle&&!t.error&&!t.verifyError&&t?.transactions&&t.transactions.length>0)return t.transactions}function ol(e,t){if(e.params&&"safeguard"in e.params&&e.params.safeguard&&t?.advancedDetails&&"safeguard"in t.advancedDetails&&t.advancedDetails.safeguard?.transactions){if(t.advancedDetails.safeguard.error)return t.advancedDetails.safeguard.error;let o=e.params.transactions,r=t.advancedDetails.safeguard.transactions;if(r){let n;try{wu(o,r)}catch(s){s instanceof or?n=s:s instanceof Error?n=or.createUnknownError(s.message):n=or.createUnknownError("Non error type",s)}if(n)return t.advancedDetails.safeguard.verifyError=n,n}}}i();a();i();a();var zi=async(e,t,o)=>{let r=`/simulation/v1?language=${e}`,n=await M.api().post(r,{...o,chainId:o.networkID,appVersion:me,platform:Ae,deviceId:t});if(!ae(n))throw new Error("Failed to scan message");return n.data},ji=async(e,t,o)=>{let r=`/simulation/v1?language=${e}`,n={...o.params,...o.params&&"safeguard"in o.params?{safeguard:{...o.params.safeguard,lighthouseProgramId:Su}}:{}},s=await M.api().post(r,{...o,chainId:o.networkID,params:n,appVersion:me,platform:Ae,deviceId:t});if(!ae(s))throw new Error("Failed to scan transaction");let p=s.data,u=ol(o,p);return u instanceof or?O.captureMessage(`Verify error: ${u.message}`,"safeguard","error"):u&&O.captureMessage(`Safeguard API error: ${u}`,"safeguard"),p};var xC=l.union([l.literal("signTransaction"),l.literal("signAllTransactions"),l.literal("signAndSendTransaction"),l.literal("signAndSendAllTransactions")]);i();a();var rl=l.enum(["Native","Fungible","SemiFungible","NonFungible","Unknown"]),It=l.object({id:l.string(),displayName:l.string().optional(),logoURI:l.union([l.string(),l.null()]).optional(),tokenType:rl,decimals:l.number().optional(),symbol:l.string().optional(),isSpam:l.boolean().optional()}),nl=l.object({id:At,displayName:l.string(),logoURI:l.union([l.string(),l.null()]).optional()}),Vn=l.object({token:It,amount:l.string(),to:At,from:At}),Wi=l.literal("UNCLASSIFIED_APP_INTERACTION"),Yi=l.literal("TOKEN_SEND"),Xi=l.literal("TOKEN_BURN"),Ji=l.literal("TOKEN_SWAP"),Zi=l.literal("TOKEN_UNWRAP"),ea=l.literal("WITHDRAW_STAKE"),ta=l.literal("DEACTIVATE_STAKE"),oa=l.literal("STAKE"),ra=l.literal("COLLECTIBLE_LIST"),na=l.literal("COLLECTIBLE_BUY_ITEM"),sa=l.literal("COLLECTIBLE_CANCEL_BID"),ia=l.literal("COLLECTIBLE_BID_ITEM"),aa=l.literal("COLLECTIBLE_UNLIST"),pa=l.literal("COLLECTIBLE_SELL_ITEM"),ca=l.literal("CANCEL_TX"),ua=l.literal("TOKEN_APPROVAL"),la=l.literal("CANCEL_ORDER"),ma=l.literal("COLLECTION_APPROVAL"),da=l.literal("BRIDGE_INIT"),JS=l.union([Wi,Yi,Xi,Ji,Zi,ea,ta,oa,ra,na,sa,ia,aa,pa,ca,ua,la,ma,da]),sl=l.object({transactionType:Wi,balanceChanges:l.array(Vn),dapp:l.union([ct,l.null()]).optional()}),il=l.object({transactionType:Yi,balanceChanges:l.array(Vn).nonempty(),dapp:l.union([ct,l.null()]).optional()}),al=l.object({transactionType:Xi,dapp:l.union([ct,l.null()]).optional(),token:It,amount:l.string()}),pl=l.object({transactionType:Ji,dapp:l.union([ct,l.null()]).optional(),receiveToken:It,sendToken:It,receiveAmount:l.string(),sendAmount:l.string()}),cl=l.object({transactionType:Zi,token:It,amount:l.string()}),ul=l.object({transactionType:ea,stakeAccount:At,amount:l.string()}),ll=l.object({transactionType:ta,stakeAccount:At,amount:l.string()}),ml=l.object({transactionType:oa,stakeAccount:At,amount:l.string(),validatorName:l.string().optional(),validatorWebsite:l.string().optional(),keybaseUsername:l.string().optional()}),dl=l.object({transactionType:ca}),ar=l.object({dapp:l.union([ct,l.null()]),itemAmount:l.string().optional(),item:It,forAmount:l.string(),forAsset:It,listingUrl:l.string().optional()}),fl=ar.merge(l.object({transactionType:ra})),gl=ar.merge(l.object({transactionType:na})),yl=ar.merge(l.object({transactionType:sa})),Sl=ar.merge(l.object({transactionType:ia})),wl=ar.merge(l.object({transactionType:aa})),Al=ar.merge(l.object({transactionType:pa})),hl=l.object({transactionType:ua,dapp:l.union([ct,l.null()]).optional(),token:It,value:l.string().optional(),isApproved:l.boolean()}),bl=l.object({transactionType:la,dapp:l.union([ct,l.null()]).optional(),orderId:l.string()}),Tl=l.object({transactionType:ma,collection:nl,dapp:l.union([ct,l.null()]).optional(),isApproved:l.boolean()}),Fl=l.object({transactionType:da,dapp:l.union([ct,l.null()]).optional(),balanceChanges:l.array(Vn).nonempty(),explorerUrl:l.string().optional()}),Il=l.enum(["success","failed"]),vl=l.object({networkFee:l.string().optional(),networkFeePayer:l.string().optional(),status:Il,errorMessage:l.union([l.string(),l.null()]),blockNumber:l.string(),chainId:$t,transactionId:l.string()}),Kn=l.object({timestamp:l.number(),owner:At,id:At,interactionData:l.union([sl,il,al,pl,cl,ul,ll,ml,fl,gl,yl,Sl,wl,Al,dl,hl,bl,Tl,Fl]),chainMeta:vl}),_e=e=>{let r=e.split("/")[1]?.split(":");return r&&r[1]};i();a();var fa=C(R());var ZS=["So11111111111111111111111111111111111111112","501"],ew=(e,t,o,r,n)=>{let{interactionData:s,chainMeta:p}=e,{transactionType:u}=s,c=p.status==="failed",m=p.chainId,g=v.getTokenSymbol(m),f=v.getTokenDecimals(m),S=t("historyUnknownDappName"),w=fa.default.createElement(o,{activityItem:e,size:"small",isDetailViewOrSvg:!1});switch(u){case"TOKEN_SEND":{let A=s.balanceChanges[0],{token:{symbol:b,displayName:T,tokenType:F,decimals:E},amount:I}=A,x=El(A,n),k=zr(F),P=F==="NonFungible",z="";if(!c&&E!==void 0&&!P){let j=x?"+":"-";k?z=`${j}${Ee(I,E)}`:z=`${j}${Ee(I,E)}${b?` ${wt(b,6)}`:""}`}if(x){let j=_e(A.from),L=Ei(j,void 0,r(j,m));return{topLeft:{text:`${t("transactionsReceived")} ${k?T||t("richTransactionDetailUnknownNFT"):""}`},topRight:{text:`${z}`,color:"accentSuccess"},bottomLeft:{text:t("transactionsFromParagraphInterpolated",{from:L,defaultValue:`From ${L}`})},start:w}}else{let j=_e(A.to),L=Ei(j,void 0,r(j,m));return{topLeft:{text:c?t("transactionsSendFailed"):`${t("transactionsSent")} ${k?T||t("richTransactionDetailUnknownNFT"):""}`},topRight:{text:`${z}`,color:"textPrimary"},bottomLeft:{text:t("transactionsToParagraphInterpolated",{to:L,defaultValue:`To ${L}`})},start:w}}}case"TOKEN_BURN":{let{amount:y,token:A}=s,b="";return A.displayName?y==="1"?b=A.displayName:b=`${A.displayName} (${y})`:b=t("richTransactionDetailUnknownNFT"),{topLeft:{text:c?`${t("transactionsFailedBurn")}`:`${t("transactionsBurned")}`},bottomLeft:{text:b},start:w}}case"TOKEN_UNWRAP":{let{amount:y,token:A}=s;return{topLeft:{text:c?`${t("transactionsUnwrappedFailed")}`:`${t("transactionsUnwrapped")}`},topRight:{text:c?"":`${Ee(y,A.decimals??0)} ${A.symbol}`,color:"textPrimary"},start:w}}case"TOKEN_SWAP":{let{receiveAmount:y,receiveToken:A,sendAmount:b,sendToken:T,dapp:F}=s,E=F?F.displayName:t("historyUnknownDappName"),I=Gr(_e(T.id)||""),x=Gr(_e(A.id)||""),k="";!c&&A.decimals!==void 0&&(k=`+${Ee(y,A.decimals)} ${wt(A.symbol||x,6)}`);let P="";return!c&&T.decimals!==void 0&&(P=`-${Ee(b,T.decimals)} ${wt(T.symbol||I,6)}`),{topLeft:{text:t(c?"transactionsFailedSwap":"transactionsSwapped")},topRight:{text:k,color:"accentSuccess"},bottomLeft:{text:E},bottomRight:{text:P,color:"textPrimary"},start:w}}case"BRIDGE_INIT":{let y=s.dapp?s.dapp.displayName:S,b=s.balanceChanges[0],{token:{symbol:T,decimals:F},amount:E}=b,I=T?` ${wt(T,6)}`:"";if(!c&&F!==void 0){let x=`-${Ee(E,F)}${I}`;return{topLeft:{text:c?t("transactionBridgeInitiatedFailed"):`${t("transactionBridgeInitiated")}`},bottomLeft:{text:y},topRight:{text:`${x}`,color:"textPrimary"},start:w}}return{topLeft:{text:c?t("transactionBridgeInitiatedFailed"):`${t("transactionBridgeInitiated")}`},bottomLeft:{text:y},start:w}}case"WITHDRAW_STAKE":{let{amount:y,stakeAccount:A}=s,b=_e(A),T=v.getTokenSymbol(m);return{topLeft:{text:t(c?"transactionsWithdrawStakeFailed":"transactionsWithdrawStake")},topRight:{text:c?"":`${Ee(y,f)} ${wt(T,6)}`,color:"textPrimary"},bottomLeft:{text:Bn(b,4)},start:w}}case"DEACTIVATE_STAKE":{let{stakeAccount:y}=s,A=_e(y);return{topLeft:{text:t(c?"transactionsDeactivateStakeFailed":"transactionsDeactivateStake")},bottomLeft:{text:Bn(A,4)},start:w}}case"STAKE":{let{amount:y,stakeAccount:A,validatorName:b}=s,T=_e(A);return{topLeft:{text:t(c?"transactionsStakedFailed":"transactionsStaked")},topRight:{text:c?"":`${Ee(y,f)} ${wt(g,6)}`,color:"textPrimary"},bottomLeft:{text:b||Bn(T,4)},start:w}}case"COLLECTIBLE_LIST":{let{dapp:y,item:A}=s,b=y?y.displayName:t("historyUnknownDappName"),T=A.displayName||t("richTransactionDetailUnknownNFT");return{topLeft:{text:c?t("transactionsListedFailed"):t("transactionsListedInterpolated",{name:T})},bottomLeft:{text:b},start:w}}case"COLLECTIBLE_BUY_ITEM":{let{dapp:y,itemAmount:A,item:b,forAsset:T,forAmount:F}=s,E=y?y.displayName:t("historyUnknownDappName"),I=T.decimals!==void 0?`-${Ee(F,T.decimals)} ${wt(T.symbol||"",6)}`:t("transactionsUnknownAmount"),x=b.symbol||Gr(_e(b.id)),k=A&&b.tokenType==="SemiFungible"?`+${A} ${x}`:`+${x}`;return{topLeft:{text:t(c?"transactionsBuyFailed":"transactionsBoughtCollectible")},topRight:{text:c?"":k,color:"accentSuccess"},bottomRight:{text:c?"":`${I}`,color:"textPrimary"},bottomLeft:{text:E},start:w}}case"COLLECTIBLE_CANCEL_BID":{let{dapp:y,item:A}=s,b=y?y.displayName:t("historyUnknownDappName"),T=A.displayName||t("richTransactionDetailUnknownNFT");return{topLeft:{text:c?t("transactionsCancelBidOnFailed"):t("transactionsCancelBidOnInterpolated",{name:T})},bottomLeft:{text:b},start:w}}case"COLLECTIBLE_BID_ITEM":{let{dapp:y,item:A}=s,b=y?y.displayName:t("historyUnknownDappName"),T=A.displayName||t("richTransactionDetailUnknownNFT");return{topLeft:{text:c?t("transactionsBidFailed"):t("transactionsBidOnInterpolated",{name:T})},bottomLeft:{text:b},start:w}}case"COLLECTIBLE_UNLIST":{let{dapp:y,item:A}=s,b=y?y.displayName:t("historyUnknownDappName"),T=A.displayName||t("richTransactionDetailUnknownNFT");return{topLeft:{text:c?t("transactionsUnlistedFailed"):t("transactionsUnlistedInterpolated",{name:T})},bottomLeft:{text:b},start:w}}case"COLLECTIBLE_SELL_ITEM":{let{dapp:y,itemAmount:A,item:b,forAsset:T,forAmount:F}=s,E=y?y.displayName:t("historyUnknownDappName"),I=T.decimals!==void 0?`+${Ee(F,T.decimals)} ${wt(T.symbol||"",6)}`:t("transactionsUnknownAmount"),x=b.symbol||Gr(_e(b.id)),k=A&&b.tokenType==="SemiFungible"?`-${A} ${x}`:`-${x}`;return{topLeft:{text:t(c?"transactionsSoldFailed":"transactionsSoldCollectible")},topRight:{text:c?"":`${I}`,color:"accentSuccess"},bottomRight:{text:c?"":k,color:"textPrimary"},bottomLeft:{text:E},start:w}}case"CANCEL_TX":return{topLeft:{text:t(c?"transactionCancelledFailed":"transactionCancelled")},start:w};case"TOKEN_APPROVAL":{let{dapp:y,token:A,isApproved:b}=s,T=zr(A.tokenType)?A.displayName:A.symbol,F;return c?b?zr(A.tokenType)?F=t("transactionApproveTokenFailed",{tokenSymbol:T}):F=t("transactionApprovalFailed"):zr(A.tokenType)?F=t("transactionRevokeApproveTokenFailed",{tokenSymbol:T}):F=t("transactionRevokeFailed"):b?F=t("transactionApproveToken",{tokenSymbol:T}):F=t("transactionRevokeApproveToken",{tokenSymbol:T}),{topLeft:{text:F},bottomLeft:{text:y?y.displayName:S,color:"textTertiary"},start:w}}case"COLLECTION_APPROVAL":{let{collection:y,isApproved:A,dapp:b}=s,T=y.displayName,F;return c?A?F=t("transactionApproveTokenFailed",{tokenSymbol:T}):F=t("transactionRevokeApproveTokenFailed",{tokenSymbol:T}):A?F=t("transactionApproveToken",{tokenSymbol:T}):F=t("transactionRevokeApproveToken",{tokenSymbol:T}),{topLeft:{text:F},bottomLeft:{text:b?b.displayName:S,color:"textTertiary"},start:w}}case"CANCEL_ORDER":{let{dapp:y}=s;return{topLeft:{text:t(c?"transactionCancelOrderFailed":"transactionCancelOrder")},bottomLeft:{text:y?.displayName||t("historyUnknownDappName"),color:"textTertiary"},start:w}}case"UNCLASSIFIED_APP_INTERACTION":{let{dapp:y}=s,A=y?y.displayName:S;return{topLeft:{text:t(c?"transactionsFailedAppInteraction":"transactionsAppInteraction")},bottomLeft:{text:A},start:w}}}},tw=(e,t)=>{let{display:o,type:r}=e,{topLeft:n,topRight:s,bottomLeft:p,bottomRight:u}=o.summary,c=fa.default.createElement(t,{logoUri:o.summary.logoUri,pendingTransactionType:r,size:"small"});return{topLeft:n,topRight:s,bottomLeft:p,bottomRight:u,start:c}},ow=(e,t,o)=>{let r=(e??[]).map(uu);if(t){let n=r.find(s=>s.chainId===t)?.address;if(n){let s={chainId:t,address:n};o&&(s.filters=[{type:"token",value:o}]),r=[s]}}return r},zr=e=>{switch(e){case"SemiFungible":case"NonFungible":return!0;default:return!1}},El=(e,t)=>{let o=_e(e.to),r=_e(e.from),n=t.some(p=>p.address.toLowerCase()===o.toLowerCase()),s=t.some(p=>p.address.toLowerCase()===r.toLowerCase());return n&&!s},rw=e=>{switch(e?.type){case"BRC20":return e.data.firstCreatedInscriptionId;case"ERC20":return e.data.contractAddress;case"SPL":return e.data.splTokenAccountPubkey;default:return}},nw=(e,t)=>{let o=_e(e.id);return ZS.includes(o)&&(e.tokenType="Native"),e.tokenType==="Native"?{chainId:t,slip44:v.getSlip44(t),resourceType:"nativeToken"}:{chainId:t,address:o,resourceType:"address"}};i();a();i();a();i();a();var Wt={showTimeToMineRowInPendingTransactionDetail:!1,showFeeRowInPendingTransactionDetail:!0};var xl={...Wt};i();a();var Cl={showTimeToMineRowInPendingTransactionDetail:!1,showFeeRowInPendingTransactionDetail:!1};i();a();var Rl={...Wt,showTimeToMineRowInPendingTransactionDetail:!0};i();a();var Pl={...Wt};i();a();var kl={...Wt};i();a();var Dl={showTimeToMineRowInPendingTransactionDetail:!1,showFeeRowInPendingTransactionDetail:!1};var sw=new er({solana:Dl,ethereum:Rl,polygon:kl,monad:Pl,base:xl,bitcoin:Cl}),Nl=Zo(sw);i();a();i();a();i();a();var iw=10,aw="/history/v2",pr=class extends Error{constructor(){super(...arguments);this.message="406: Cache bust!"}},jr=class extends Error{constructor(){super(...arguments);this.message="Server response malformed."}},$n=class extends Error{},zn=class extends Error{},ga=l.object({next:l.union([l.null(),l.string()]),results:l.array(Kn)}),Bl=async e=>{let t=await M.api().retry(3,2e3).post(`${aw}`,e);if(t.status===406)throw new pr;if(t.status>=400&&t.status<500)throw new zn(`FetchActivityItem: Status code: ${t.status}`);if(t.status>=500)throw new $n(`FetchActivityItem: Status code: ${t.status}`);return t.data},Ul=e=>!Array.isArray(e.results)||typeof e.next!="string"&&e.next!==null,jn=async e=>{let t=await Bl(e);if(Ul(t))throw new jr;for(;t.results?.length<iw&&t.next;){if(Ul(t))throw new jr;let o=await Bl({next:t.next,isSpam:e.isSpam});t.next=o.next,t.results=[...t.results,...o.results]}try{return ga.parse(t)}catch(o){let r=o,n=[],s=r.issues;for(let c=0;c<s.length;++c){let m=s[c].path;if(m[0]!=="results")throw O.captureError(r,"history"),r;let g=m[1];if(typeof g!="number")throw O.captureError(r,"history"),r;n.push(g)}n.sort(function(c,m){return m-c});let p=n.map(c=>t.results[c]).map(c=>c.interactionData?.transactionType||""),u=[];for(let c=0;c<n.length;++c){let m=n[c],g=t.results[m],f={timestamp:g?.timestamp,owner:g?.owner,id:g?.id,chainMeta:g?.chainMeta,interactionData:{transactionType:"UNCLASSIFIED_APP_INTERACTION",balanceChanges:[]}};try{Kn.parse(f),t.results[m]=f,u.push(m)}catch{}}for(let c=0;c<n.length;++c){let m=n[c];u.indexOf(m)===-1&&t.results.splice(m,1)}n.length&&console.error(`Removed history items, ${p.join(",")}`);try{return ga.parse(t)}catch(c){let m=c;throw O.captureError(m,"history"),m}}};i();a();var Ll=C(R());var Wr="fetch-infinite-activity-items",_l=({accounts:e,isSpam:t})=>[Wr,e,t],pw=(e,t)=>{e.removeQueries({queryKey:t})},cw=({accounts:e,isSpam:t})=>{let o=q();(0,Ll.useEffect)(()=>()=>{o.cancelQueries({queryKey:[Wr],exact:!1})},[o]);let r=_l({accounts:e,isSpam:t});return Vt({queryKey:r,queryFn:async({pageParam:p})=>{try{let u;return p&&p!==""?u=await jn({next:p,isSpam:t}):u=await jn({accounts:e||[],isSpam:t}),u}catch(u){u instanceof pr&&pw(o,r),O.captureError(u,"history")}},getNextPageParam:p=>p?.next,staleTime:1/0,retry:!1,enabled:!!e?.length&&e.every(p=>!v.isLocalNetworkID(p.chainId)),initialPageParam:""})};i();a();var Na=C(R());i();a();var Im=C(xS()),vm=C(Sm());var th=l.object({domain:l.string(),url:l.string(),name:l.string(),category:l.string(),imageUrl:l.string()}),Em=l.object({uuid:l.string(),data:l.array(th)}),oh=l.object({chainId:$t,address:l.string(),name:l.string(),symbol:l.string(),logoUrl:l.string(),marketCap:l.number(),price:l.number(),priceChange:l.number(),volume:l.number(),volumeChange:l.number()}),xm=l.object({items:l.array(oh)}),rh=l.object({paymentTokenId:l.string(),name:l.string(),symbol:l.string(),decimals:l.number()}),nh=l.object({verified:l.boolean(),collectionUrl:l.string(),marketplaceId:l.string(),marketplaceName:l.string(),marketplaceCollectionId:l.string()}),sh=l.object({marketplaceId:l.string(),paymentToken:rh,value:l.string()}),ih=l.object({id:l.string(),name:l.string(),volume:l.string().optional(),volumePercentChange:l.number(),marketplacePages:l.array(nh),floorPrices:l.array(sh),imageUrl:l.string()}),Cm=l.object({uuid:l.string(),data:l.array(ih)}),ah=["tokens","sites","collections","quests","learn"],Eo=l.enum(["shortcuts","carousel",...ah]),ph=l.object({type:l.literal(Eo.enum.shortcuts)}),ch=l.object({type:l.literal(Eo.enum.carousel)}),en="all_networks",gr=l.union([$t,l.literal(en)]),uh=["asc","desc"],lh=l.enum(uh),mh=["rank","volume","price","price-change","market-cap"],wm=l.enum(mh),dh=["1h","24h","7d","30d"],Am=l.enum(dh),fh=l.object({type:l.literal(Eo.enum.tokens),sortBy:l.array(wm).refine(e=>new Set(e).size===e.length),sortByDefault:wm,sortDirectionDefault:lh,network:l.array(gr).refine(e=>new Set(e).size===e.length),networkDefault:gr,timeFrame:l.array(Am).refine(e=>new Set(e).size===e.length),timeFrameDefault:Am,rankAlgo:l.string(),limit:l.number(),listLimit:l.number()}),gh=["top","rank"],hm=l.enum(gh),yh=["24h","7d","30d"],bm=l.enum(yh),Sh=l.object({type:l.literal(Eo.enum.sites),sortBy:l.array(hm).refine(e=>new Set(e).size===e.length),sortByDefault:hm,network:l.array(gr).refine(e=>new Set(e).size===e.length),networkDefault:gr,timeFrame:l.array(bm).refine(e=>new Set(e).size===e.length),timeFrameDefault:bm,rankAlgo:l.string(),limit:l.number(),listLimit:l.number()}),wh=["top","rank"],Tm=l.enum(wh),Ah=["24h","7d","30d"],Fm=l.enum(Ah),hh=l.object({type:l.literal(Eo.enum.collections),sortBy:l.array(Tm).refine(e=>new Set(e).size===e.length),sortByDefault:Tm,network:l.array(gr).refine(e=>new Set(e).size===e.length),networkDefault:gr,timeFrame:l.array(Fm).refine(e=>new Set(e).size===e.length),timeFrameDefault:Fm,rankAlgo:l.string(),limit:l.number(),listLimit:l.number()}),bh=l.object({type:l.literal(Eo.enum.learn),limit:l.number()}),Th=l.object({type:l.literal(Eo.enum.quests),limit:l.number()}),Fh=l.discriminatedUnion("type",[ph,ch,fh,Sh,hh,bh,Th]),Da=l.object({sections:l.array(Fh).refine(e=>(0,Im.default)(e,(0,vm.default)(e,"type")))}),mP=l.object({uuid:l.string(),data:l.array(Tc)});var Ih=Da.parse({sections:[{type:"shortcuts"},{type:"carousel"},{type:"tokens",sortBy:["rank","volume","price","price-change","market-cap"],sortByDefault:"rank",sortDirectionDefault:"asc",network:["solana:101","eip155:1","eip155:137","all_networks"],networkDefault:"solana:101",timeFrame:["1h","24h","7d","30d"],timeFrameDefault:"24h",rankAlgo:"default",limit:3,listLimit:100},{type:"sites",sortBy:["top","rank"],sortByDefault:"top",network:["solana:101","eip155:1","eip155:137","bip122:000000000019d6689c085ae165831e93","all_networks"],networkDefault:"solana:101",timeFrame:["24h","7d","30d"],timeFrameDefault:"24h",rankAlgo:"default",limit:3,listLimit:50},{type:"collections",sortBy:["rank","top"],sortByDefault:"rank",network:["solana:101","eip155:1","eip155:137","bip122:000000000019d6689c085ae165831e93","all_networks"],networkDefault:"solana:101",timeFrame:["24h","7d","30d"],timeFrameDefault:"24h",rankAlgo:"default",limit:3,listLimit:50},{type:"learn",limit:3},{type:"quests",limit:3}]}),Rm=()=>{let e=Be.getMultivariateAssignment("explore-config"),{data:t}=ku();return(0,Na.useMemo)(()=>{let o;try{o=Da.parse(JSON.parse(e??""))}catch{o=Ih}return t?o:{...o,sections:o.sections.filter(r=>r.type!=="quests")}},[e,t])},Ba=()=>{let e=Rm();return(0,Na.useMemo)(()=>{let t=[];for(let o of e.sections)(o.type==="collections"||o.type==="tokens"||o.type==="sites"||o.type==="learn"||o.type==="quests")&&t.push(o);return t},[e.sections])};i();a();i();a();i();a();i();a();var Rt=U({days:1}),Pt=U({seconds:5});i();a();i();a();var et="@phantom/phantom-network",Re={actor(e){return["actor",`${et}:actor`,{profileId:e}]},actorAndFollowers(e){return["user",`${et}:actor-and-followers`,{profileId:e}]},actorAndFollowing(e){return["user",`${et}:actor-and-following`,{profileId:e}]},userProfileByUsernameOrUserProfileId(e){return["user",`${et}:user-profile-by-username-or-user-profile-id`,{usernameOrUserProfileId:e}]},followUser(e,t){return["user",`${et}:follow-user`,{currentId:e,targetId:t}]},inbox(e){return["user",`${et}:inbox`,{profileId:e}]},searchForActorBase(){return["actor",`${et}:search`]},searchForActor(e,t){return["actor",`${et}:search`,{query:e,enableSorting:t}]},followRequests(e){return["user",`${et}:follow-requests`,{profileId:e}]},blocking(e){return["user",`${et}:blocking`,{profileId:e}]},pendingFollowRequest(e,t){return["user",`${et}:pending-follow-request`,{profileId:e,targetId:t}]}};i();a();i();a();var tt=e=>{let t=go();return zc.parse(`${t}/v1/actors/${e}`)};function tn(e){let t=e.match(/\/v1\/actors\/([^/]+)/)?.[1];return t?He.parse(t):void 0}function ye(e){return tn(e)??He.parse(e)}i();a();var yr=(e,t)=>{let o=ye(t.id);o&&e.setQueryData(Re.actor(o),t)};function Ua({query:e,enabled:t,enableSorting:o=!1}){let r=q(),{data:n}=Me(),{data:s}=pt(),p=n?.accessToken,u=s?.id?tt(s.id):void 0,c=e?.startsWith("@")?e.slice(1).trim():e.trim(),m=Wc(),g=Re.searchForActor(c,o);return N({enabled:t,queryKey:g,queryFn:async()=>{if(!c)return{actors:[]};let{actors:S}=await m.searchForActor(c,p);for(let y of S)yr(r,y);let w=S.map(y=>{let A=!1,b=!1;return u&&(typeof y.followers=="string"?b=!1:b=(y.followers.current?.orderedItems||[]).find(F=>F.includes(u))!==void 0,typeof y.following=="string"?A=!1:A=(y.following.current?.orderedItems||[]).find(F=>F.includes(u))!==void 0),{followsYou:A,followedByYou:b,...y}});return o&&w.sort((y,A)=>y.followedByYou?-1:A.followedByYou?1:0),{actors:w}},gcTime:Rt,staleTime:Pt})}i();a();i();a();i();a();i();a();var vh=l.object({orderedItems:tr.array(),next:l.string().optional()}),Eh=l.object({orderedItems:tr.array(),next:l.string().optional()});var xh=l.object({orderedItems:tr.array(),next:l.string().optional()}),Ch=l.object({orderedItems:tr.array(),next:l.string().optional()});i();a();i();a();i();a();i();a();i();a();i();a();i();a();var xo=Jo(K,e=>new La(e)),La=class{#e;constructor(t){this.#e=t}profileFollowRequestAcceptedByUser(t,o){let r=ye(t),n=ye(o);this.#e.capture("profileFollowRequestAcceptedByUser",{data:{targetId:t,targetProfileId:r,actorId:o,actorProfileId:n,type:"followRequestAccepted"}})}profileFollowRequestDeniedByUser(t,o){let r=ye(t),n=ye(o);this.#e.capture("profileFollowRequestDeniedByUser",{data:{targetId:t,targetProfileId:r,actorId:o,actorProfileId:n,type:"followRequestDenied"}})}profileUnfollowedByUser(t,o){let r=ye(t),n=ye(o);this.#e.capture("profileUnfollowedByUser",{data:{targetId:t,targetProfileId:r,actorId:o,actorProfileId:n,type:"unfollow"}})}profileFollowedByUser(t,o,r){let n=ye(t),s=ye(o);this.#e.capture("profileFollowedByUser",{data:{targetId:t,targetProfileId:n,actorId:o,actorProfileId:s,type:r?"followRequest":"follow"}})}profileReportedByUser(t,o,r){let n=ye(t),s=ye(o);this.#e.capture("profileReportedByUser",{data:{targetId:t,targetProfileId:n,actorId:o,actorProfileId:s,type:"report",...r}})}profileUnblockedByUser(t,o){let r=ye(t),n=ye(o);this.#e.capture("profileUnblockedByUser",{data:{targetId:t,targetProfileId:r,actorId:o,actorProfileId:n,type:"unblock"}})}profileBlockedByUser(t,o){let r=ye(t),n=ye(o);this.#e.capture("profileBlockedByUser",{data:{targetId:t,targetProfileId:r,actorId:o,actorProfileId:n,type:"block"}})}profileViewedByUser(t,o,r){let n=ye(t),s=ye(o);this.#e.capture("profileViewedByUser",{data:{targetId:o,targetProfileId:s,actorId:t,actorProfileId:n,isFollowing:r,type:"view"}})}profileFollowersViewedByUser(t,o){let r=ye(t),n=ye(o);this.#e.capture("profileFollowersViewedByUser",{data:{targetId:o,targetProfileId:n,actorId:t,actorProfileId:r,type:"viewFollowers"}})}profileFollowingViewedByUser(t,o){let r=ye(t),n=ye(o);this.#e.capture("profileFollowingViewedByUser",{data:{targetId:o,targetProfileId:n,actorId:t,actorProfileId:r,type:"viewFollowing"}})}};i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();var kh=l.object({type:l.literal("fungible"),data:bu}),Dm=l.object({results:l.array(l.any()).transform(e=>e.reduce((t,o)=>{let r=kh.safeParse(o);return r.success&&t.push(r.data),t},[])),prevCursor:l.string().nullish().default(null),nextCursor:l.string().nullish().default(null),hasMore:l.boolean()});async function Nm(e){let{query:t,networkIds:o,searchContext:r,supportedNetworkIds:n}=e,s=await M.api().headers({"Content-Type":"application/json"}).get("/search/v1",{params:{query:t.trim(),chainIds:o.join(","),platform:Ae,pageSize:"50",searchTypes:"fungible",searchContext:r,...n&&{supportedNetworkIds:n.join(",")}}});if(!ae(s))throw new xe({key:"UnknownError"});let p=Dm.safeParse(s.data);if(p.success)return p.data;throw new xe({key:"UnknownError"})}i();a();var Ma=e=>{let t=e.data,o=Ri(t)??void 0;return{type:t.type,data:{...t.data,tokenAddress:Ri(t)??void 0,key:o}}};i();a();var Dh="search",Bm={searchResults:(e,t,o,r)=>[Dh,{query:e,networkIds:t,supportedNetworkIds:r,chainAddresses:o}]};i();a();var Qa=(s=>(s[s.Always=1/0]="Always",s[s.Short=U({minutes:5})]="Short",s[s.Medium=U({minutes:30})]="Medium",s[s.Long=U({hours:1})]="Long",s[s.Never=0]="Never",s))(Qa||{}),qa=(n=>(n[n.Immediate=0]="Immediate",n[n.Short=U({minutes:5})]="Short",n[n.Medium=U({minutes:30})]="Medium",n[n.Long=U({hours:1})]="Long",n))(qa||{});var Nh=async({query:e,networkIds:t,searchContext:o,supportedNetworkIds:r})=>(await Nm({query:e,networkIds:t,searchContext:o,supportedNetworkIds:r})).results.map(s=>Ma(s)),Co=({query:e,networkIds:t,enableQuery:o=!0,keepPreviousData:r=!1,searchContext:n,supportedNetworkIds:s,chainAddresses:p})=>{let u=Bm.searchResults(e,t,p,s);return N({queryKey:u,gcTime:Qa.Short,staleTime:qa.Short,enabled:o,placeholderData:r?Cc:void 0,queryFn:()=>Nh({query:e,networkIds:t,searchContext:n,supportedNetworkIds:s})})};var cp=C(dd()),Fe=C(R());i();a();i();a();i();a();var fd={filterEnabled:e=>e,tokenSearchEnabled:e=>e};i();a();var gd={filterEnabled:()=>!0,tokenSearchEnabled:()=>!0};i();a();var yd={filterEnabled:()=>!0,tokenSearchEnabled:()=>!0};i();a();var Sd={filterEnabled:()=>!0,tokenSearchEnabled:()=>!0};i();a();var wd={filterEnabled:()=>!0,tokenSearchEnabled:()=>!0};i();a();var Ad={filterEnabled:()=>!0,tokenSearchEnabled:()=>!0};var ET=new er({solana:Ad,ethereum:yd,polygon:wd,base:fd,bitcoin:gd,monad:Sd}),rp=Zo(ET);i();a();var hd={fields:["domain","name","category","tags"],storeFields:["domain","name","category","tags","imageUrl"],searchOptions:{boost:{name:2},prefix:!0,fuzzy:e=>e.length>3?.2:!1}};i();a();var Fs=e=>["explore-dapp",e];var np=e=>e.addresses.map(t=>v.getMainnetNetworkID(t.networkID))??[];function bd(e){try{return ho.get(e).nonNativeFungibleTokenType}catch{return"SolanaNative"}}i();a();i();a();var dt="@phantom/explore",Te={RecentlyViewedSearchItems:[dt,"RecentlyViewedSearchItems"],sitesV2({sortBy:e,timeFrame:t,networkIDs:o,limit:r,locale:n,rankAlgo:s}){return[dt,"sitesV2",me,n,{sortBy:e,timeFrame:t,networkIDs:o,rankAlgo:s,limit:r}]},recommendedSites(e,t){return[dt,"sites","recommended",me,t,e]},tokensV2({sortBy:e,sortDirection:t,timeFrame:o,networkIDs:r,locale:n,limit:s,rankAlgo:p}){return[dt,"tokensV2",n,{sortBy:e,sortDirection:t,timeFrame:o,networkIDs:r,rankAlgo:p,limit:s}]},collectionsV2({sortBy:e,timeFrame:t,networkIDs:o,limit:r,locale:n,rankAlgo:s}){return[dt,"collectionsV2",me,n,{sortBy:e,timeFrame:t,networkIDs:o,rankAlgo:s,limit:r}]},featuredTransactions(e,t){return[dt,"transactions","featured",me,t,e]},learn(e,t){return[dt,"learn",me,t,e]}};var xT=10,Fd="RecentlyViewedSearchItems";async function CT(e){return await e.get(Fd)??[]}async function Id(e,t){await e.set(Fd,t)}function sp(e){return N({queryKey:Te.RecentlyViewedSearchItems,queryFn:async()=>CT(e),staleTime:0,enabled:!0})}function RT(e){let t=q();return ne({mutationFn:async r=>{let n=Td(r),p=(t.getQueryData(Te.RecentlyViewedSearchItems)??[]).filter(u=>Td(u)!==n);p.unshift(r),p=p.slice(0,xT),await Id(e,p),t.setQueryData(Te.RecentlyViewedSearchItems,p),await t.refetchQueries({queryKey:Te.RecentlyViewedSearchItems})}})}function PT(e){let t=q();return ne({mutationFn:async()=>{await Id(e,[]),t.setQueryData(Te.RecentlyViewedSearchItems,[]),await t.refetchQueries({queryKey:Te.RecentlyViewedSearchItems})}})}function Td(e){return e.type==="token"?se(G(e.data)):e.data.id}i();a();var kT=e=>{let t={isRecommended:"true"};return e.networkIds&&(t.chainIds=e.networkIds.join(",")),`/dapps/v1?${new URLSearchParams(t).toString()}`},DT=async e=>{let t=await M.api().get(kT(e));if(t.status===500)throw new Error("Error fetching recommended dapps from registry");return(await t.data).data},ip=e=>{let t=q();return N({queryKey:["dapps","recommended",e],queryFn:async()=>{try{let r=await DT(e);return Cn.batch(()=>{for(let n of r??[]){let s=Fs(n.domain),p=t.getQueryState(s);t.setQueryData(s,()=>n??p?.data??null)}}),r}catch(r){throw O.captureError(r,"dappRegistry"),r}},gcTime:U({days:1}),staleTime:U({days:1})})};i();a();i();a();var vd=async({sortBy:e,sortDirection:t,timeFrame:o,networkIDs:r,locale:n,limit:s,rankAlgo:p})=>{let u=new URLSearchParams({timeFrame:o,sortBy:e,sortDirection:t,limit:s.toString(),rankAlgo:p,platform:Ae,locale:n,appVersion:me});r.forEach(g=>{u.append("chainIds[]",g)});let c=await M.api().get("/explore/v2/trending-tokens",{params:u});if(!ae(c))throw new Error("Failed to fetch tokens");let m=xm.safeParse(c.data);if(!m.success)throw new Error("Failed to parse tokens");return m.data};i();a();var Fr=(e,t)=>{let o=Un(),n=Ba().find(p=>p.type===t),s=[];return n&&n?.type!=="learn"&&n?.type!=="quests"?n.network.forEach(p=>{p!==en&&o.includes(p)&&s.push(p)}):s=o,e!==en&&!s.includes(e)?[]:e===en?s:[e]};var NT=U({minutes:1}),BT=U({minutes:1}),ap=({sortBy:e,sortDirection:t,timeFrame:o,network:r,limit:n,rankAlgo:s,enableQuery:p=!0})=>{let{data:u}=oe(),c=Fr(r,"tokens"),m=he(B.language)??"en";return N({queryKey:Te.tokensV2({sortBy:e,sortDirection:t,timeFrame:o,networkIDs:c,locale:m,limit:n,rankAlgo:s}),enabled:!!u&&p,async queryFn(){if(!u)throw new Error("No account found");return vd({sortBy:e,sortDirection:t,timeFrame:o,networkIDs:c,locale:m,limit:n,rankAlgo:s})},gcTime:BT,staleTime:NT,retry:3})};var sn=3,UT=15,pp=50,Ed={VERIFIED:1,NOT_VERIFIED:2,POSSIBLE_SPAM:3,SPAM:4},LT=(e,t=100)=>{let[o,r]=(0,Fe.useState)(!1);return(0,Fe.useEffect)(()=>{let n;return e?n=setTimeout(()=>r(!0),t):r(!1),()=>clearTimeout(n)},[e,t]),o},_T=e=>{let t=bd(e.chainId),o=v.getChainDefinition(e.chainId),r={name:e.name,symbol:e.symbol,logoUri:e.logoUrl,chain:{id:e.chainId,symbol:o.tokenSymbol,name:o.name,imageUrl:o.iconUrl}};switch(t){case"SPL":return{type:t,data:{...r,mintAddress:e.address}};case"ERC20":return{type:t,data:{...r,contractAddress:e.address}};case"BRC20":return{type:t,data:{...r,firstCreatedInscriptionId:e.address}};default:return null}},OT=e=>e.reduce((t,o)=>{let r=_T(o);return r&&t.push(r),t},[]),MT=({searchQuery:e,networkIds:t,minSearchResults:o,extraDapps:r=[]})=>{let{data:[n,s]}=pe(["enable-social-profiles","kill-base-explore-search"]),[p,u]=(0,Fe.useState)(!1),[c,m]=(0,Fe.useState)(!1),[g,f]=(0,Fe.useState)(!1),S=t.filter(Ne=>rp.get(Ne).tokenSearchEnabled(!s));(0,Fe.useEffect)(()=>{u(!1),m(!1),f(!1)},[e]);let{data:w=[],isLoading:y}=Co({query:e,networkIds:S,searchContext:"explore",enableQuery:!!e}),{data:A}=ap({sortBy:"rank",sortDirection:"asc",timeFrame:"24h",network:"all_networks",limit:10,rankAlgo:"default",enableQuery:!e}),b=(0,Fe.useMemo)(()=>w.sort((Ne,Qr)=>Ed[Ne.data.spamStatus??"NOT_VERIFIED"]-Ed[Qr.data.spamStatus??"NOT_VERIFIED"]),[w]),T=(0,Fe.useMemo)(()=>A?.items?OT(A.items):[],[A?.items]),F=o??(e.length===0?UT:sn),E=(0,Fe.useMemo)(()=>b.slice(0,c?pp:F),[c,b,F]),I=(0,Fe.useMemo)(()=>[...b.map(Ne=>se(G(Ne))),...T.map(Ne=>se(G(Ne)))],[b,T]),{data:x={},isPending:k}=ut({query:{data:I},enabled:I.length>0}),{data:P=[],isPending:z}=ip({networkIds:S}),j=(0,Fe.useMemo)(()=>{let Ne=[...P,...r],Qr=(0,cp.default)(Ne,FS=>Pn(FS.domain));return Object.values(Qr)},[P,r]),L=Pn(e),Y=Oc(j,L,hd),W=(0,cp.default)(Y,Ne=>Pn(Ne.domain)),Se=Object.values(W),V=Se.slice(0,p?pp:sn),{data:X,isPending:_}=Ua({query:e,enabled:n}),ke=n?_:!1,ie=!!e,le=z||y||ke,H=ie&&!le,qt=ee(),{data:En}=sp(qt),{actorsAll:te,actors:Ge}=(0,Fe.useMemo)(()=>{let Ne=X?.actors??[],Qr=Ne.slice(0,g?pp:sn);return{actorsAll:Ne,actors:Qr}},[g,X?.actors]),Oe=(0,Fe.useMemo)(()=>({actors:Ge,dapps:P,searchedDapps:V,renderShowMoreDappsButton:ie&&Se.length>sn,isLoading:le,tokens:E,trendingTokens:T,renderShowMoreTokensButton:ie&&b.length>F,renderShowMoreUsersButton:ie&&te.length>sn,priceMap:x,isPriceMapLoading:k,showSearchResults:H,showMoreTokens:c,setShowMoreTokens:m,showMoreDapps:p,setShowMoreDapps:u,showMoreUsers:g,setShowMoreUsers:f,recentlyViewedSearchItems:En}),[Ge,P,V,ie,Se.length,le,E,T,b.length,F,te.length,x,k,H,c,p,g,En]),[zo,bS]=(0,Fe.useState)(null),TS=LT(le);return(0,Fe.useEffect)(()=>{Oe.isLoading||bS(e?Oe:null)},[Oe.isLoading,e]),{...Oe.isLoading&&zo?zo:Oe,showSpinner:TS&&ie}};i();a();i();a();var QT=e=>`/dapps/v1?domains=${e.join(",")}`,qT=async e=>{let t=await M.api().get(QT(e));if(t.status===500)throw new Error("Error fetching recommended dapps from registry");return(await t.data).data},GT=e=>{let t=q();return N({queryKey:["dapps",e],queryFn:async()=>{try{let r=await qT(e);return Cn.batch(()=>{for(let n of r??[]){let s=Fs(n.domain),p=t.getQueryState(s);t.setQueryData(s,()=>n??p?.data??null)}}),r}catch(r){throw O.captureError(r,"dappRegistry"),r}},gcTime:U({days:1}),staleTime:U({days:1})})};i();a();var Cd=C(R());i();a();var xd=async(e,t,o,r)=>{let n=o?.addresses.map(ht)??[],s=o?.type==="seed"?o.seedIdentifier:null,p=o?.identifier??"",u=new URLSearchParams({accountId:p,appVersion:me,deviceId:r,limit:"6",locale:t,platform:Ae,timeframe:"24h"});e.forEach(g=>{u.append("chainIds[]",g)}),s&&u.append("rootId",s),n.forEach(g=>{u.append("selectedAccountAddresses[]",g.toString())});let c=await M.api().get("/explore/v1/featured-dapps",{params:u});if(!ae(c))throw new Error("Failed to fetch sites");return await c.data};var VT=U({minutes:10}),KT=U({minutes:10}),HT=()=>{let{data:e}=oe(),t=(0,Cd.useMemo)(()=>e?np(e):[],[e]),o=he(B.language)??"en",r=K(),n=async()=>{if(!e)throw new Error("No account found");let s=await r.getDeviceId();return xd(t,o,e,s)};return N({queryKey:Te.recommendedSites(t,o),enabled:!!e,queryFn:n,gcTime:VT,staleTime:KT})};i();a();var $T=C(R());i();a();var O1=U({minutes:10}),M1=U({minutes:10});i();a();i();a();var zT={rank:"trending",top:"top"},Rd=async({sortBy:e,timeFrame:t,networkIDs:o,limit:r,locale:n,account:s,deviceId:p,rankAlgo:u})=>{let c=s?.addresses.map(ht)??[],m=s?.type==="seed"?s.seedIdentifier:null,g=s?.identifier??"",f=new URLSearchParams({accountId:g,appVersion:me,deviceId:p,limit:r.toString(),locale:n,platform:Ae,rankAlgo:u,rankBy:zT[e],timeframe:t});o.forEach(y=>{f.append("chainIds[]",y)}),m&&f.append("rootId",m),c.forEach(y=>{f.append("selectedAccountAddresses[]",y.toString())});let S=await M.api().get("/explore/v1/trending-dapps",{params:f});if(!ae(S))throw new Error("Failed to fetch sites");let w=Em.safeParse(S.data);if(!w.success)throw new Error("Failed to parse sites");return w.data};var jT=U({minutes:10}),WT=U({minutes:10}),YT=({sortBy:e,timeFrame:t,network:o,limit:r,rankAlgo:n})=>{let{data:s}=oe(),p=Fr(o,"sites"),u=he(B.language)??"en",c=K();return N({queryKey:Te.sitesV2({sortBy:e,timeFrame:t,networkIDs:p,locale:u,limit:r,rankAlgo:n}),enabled:!!s,async queryFn(){if(!s)throw new Error("No account found");let m=await c.getDeviceId();return Rd({sortBy:e,timeFrame:t,networkIDs:p,locale:u,account:s,deviceId:m,limit:r,rankAlgo:n})},gcTime:WT,staleTime:jT,retry:3})};i();a();i();a();var XT={rank:"trending",top:"volume"},JT=e=>e.floorPrices.length>0&&e.marketplacePages.length>0,Pd=async({sortBy:e,timeFrame:t,networkIDs:o,limit:r,locale:n,account:s,deviceId:p,rankAlgo:u})=>{let c=s?.addresses.map(ht)??[],m=s?.type==="seed"?s.seedIdentifier:null,g=s?.identifier??"",f=new URLSearchParams({accountId:g,appVersion:me,deviceId:p,limit:r.toString(),locale:n,platform:Ae,rankAlgo:u,rankBy:XT[e],timeframe:t});o.forEach(y=>{f.append("chainIds[]",y.toString())}),m&&f.append("rootId",m),c.forEach(y=>{f.append("selectedAccountAddresses[]",y.toString())});let S=await M.api().get("/explore/v1/trending-collections",{params:f});if(!ae(S))throw new Error("Failed to fetch collections");let w=Cm.safeParse(S.data);if(!w.success)throw new Error("Failed to parse collections");return{...w.data,data:w.data.data.filter(JT)}};var ZT=U({minutes:10}),eF=U({minutes:10}),tF=({sortBy:e,timeFrame:t,network:o,limit:r,rankAlgo:n})=>{let{data:s}=oe(),p=Fr(o,"collections"),u=he(B.language)??"en",c=K();return N({queryKey:Te.collectionsV2({sortBy:e,timeFrame:t,networkIDs:p,locale:u,limit:r,rankAlgo:n}),enabled:!!s,async queryFn(){if(!s)throw new Error("No account found");let m=await c.getDeviceId();return Pd({sortBy:e,timeFrame:t,networkIDs:p,locale:u,account:s,deviceId:m,limit:r,rankAlgo:n})},gcTime:eF,staleTime:ZT,retry:3})};i();a();i();a();var kd=async(e,t)=>{let o=new URLSearchParams({appVersion:me,locale:t,platform:Ae});e.forEach(s=>{o.append("chainIds[]",s)});let r=await M.api().get("/explore/v1/learn-grid",{params:o});if(!ae(r))throw new Error("Failed to fetch learn grid");return r.data};var oF=U({minutes:10}),rF=U({minutes:10}),nF=()=>{let e=Un(),t=he(B.language)??"en";return N({queryKey:Te.learn(e,t),enabled:e.length>0,async queryFn(){return kd(e,t)},gcTime:rF,staleTime:oF})};i();a();i();a();var u0={location:0,distance:50,threshold:.2,shouldSort:!0,keys:[{name:"token.name",weight:.4},{name:"token.symbol",weight:.4},{name:"token.caip19.chainId",weight:.2}]};var Dd=30,l0=6,m0=29850,d0=5,Nd=["100","500","1000"];i();a();i();a();i();a();var sF=l.object({name:l.string().nullish().default(null),symbol:l.string().nullish().default(null),decimals:l.number(),caip19:Ve,logoURI:l.string().nullish().default(null)}),iF=l.object({token:sF,quickSelectDenominations:l.array(l.string()).optional(),addressType:Vc.optional()}),h0=l.object({groups:l.array(l.object({groupName:l.string(),tokens:l.array(iF)}))}),Bd=(s=>(s.CARD="CARD",s.MOBILE_WALLET="MOBILE_WALLET",s.BANK_TRANSFER="BANK_TRANSFER",s.EXCHANGE="EXCHANGE",s.LOCAL="LOCAL",s))(Bd||{}),up=l.object({id:l.string(),type:l.nativeEnum(Bd),name:l.string(),estimatedArrival:l.string(),assets:l.object({icon:l.string(),roundIcon:l.string()}),description:l.string().optional()}),b0=l.object({paymentMethods:l.array(up)}),Ud=l.object({id:l.string(),name:l.string(),tag:l.string(),logo:l.string(),quote:l.object({displaySourceAmount:l.string(),displayDestinationAmount:l.string(),displayFee:l.string()}).optional()}),T0=l.object({providers:l.array(Ud),paymentMethod:up,token:Ve}),F0=l.object({provider:Ud,paymentMethod:up}),I0=l.object({url:l.string()}),ft=class extends Error{constructor(t){super(t),this.name="FiatRampError"}};var Ld=new ft("Failed to get FiatRampTokens"),_d=async(e,t,o)=>{try{let r=await M.api().headers(e).bearer(o).post("/fiat_ramp/v2/onramp/tokens",t);if(!ae(r))throw Ld;return r.data}catch{throw Ld}};i();a();var vs=e=>e.sort((t,o)=>v.compareNetworkID(t.token.caip19.chainId,o.token.caip19.chainId));i();a();var Es="@phantom/fiat-ramp",xs=`${Es}:fungibles`,aF=`${Es}:payment-methods`,pF=`${Es}:providers`,cF=`${Es}:recommended-quote`,to={fiatRampTokens(e,t,o){return[xs,e,t,o]},fiatRampPaymentMethods(e,t,o){return[aF,e,t,o]},fiatRampProviders(e,t,o){return[pF,e,t,o]},fiatRampRecommendedQuote(e,t,o){return[cF,e,t,o]}};var uF=U({days:7}),lF=U({hours:1}),lp=(e,t,o,r=!0,n)=>{let{data:s}=oe(),p=Array.from(new Set(s?.addresses?.map(w=>w.networkID))),u=Array.from(new Set(s?.addresses?.map(w=>w.addressType))),c={chainIDs:p},m={"x-client-platform":e,"x-client-app-version":t,"x-client-locale":o},{data:g}=Me(),f=g?.userID,S=g?.accessToken;return N({queryKey:to.fiatRampTokens(m,c,f),queryFn:()=>_d(m,c,S),gcTime:uF,staleTime:lF,enabled:r&&p.length>0,select:w=>{let y={...w,groups:w.groups.map(A=>({...A,tokens:vs(A.tokens.filter(b=>b.addressType?u.includes(b.addressType):!0))}))};return n?n(y):y}})};i();a();i();a();var Od=e=>{let t=e?.groups.flatMap(o=>o.tokens)??[];return vs(t)};var mp=(e,t,o,r=!0)=>lp(e,t,o,r,Od);i();a();i();a();i();a();var Md=new ft("Failed to get FiatRampPaymentMethods"),Qd=async(e,t,o)=>{try{let r=await M.api().headers(e).bearer(o).post("/fiat_ramp/v2/onramp/payment_methods",t);if(!ae(r))throw Md;return r.data}catch{throw Md}};var mF=U({days:7}),dF=U({hours:1}),fF=(e,t,o,r)=>{let n={"x-client-platform":e,"x-client-app-version":t,"x-client-locale":o},{data:s}=Me(),p=s?.userID,u=s?.accessToken;return N({queryKey:to.fiatRampPaymentMethods(n,r,p),queryFn:()=>Qd(n,r,u),gcTime:mF,staleTime:dF})};i();a();i();a();var qd=new ft("Failed to get FiatRampProviders"),Gd=async(e,t,o)=>{try{let r=await M.api().headers(e).bearer(o).post("/fiat_ramp/v2/onramp/providers",t);if(!ae(r))throw qd;return r.data}catch{throw qd}};var gF=U({seconds:Dd}),yF=U({hours:1}),SF=(e,t,o,r)=>{let n={"x-client-platform":e,"x-client-app-version":t,"x-client-locale":o},{data:s}=Me(),p=s?.userID,u=s?.accessToken;return N({queryKey:to.fiatRampProviders(n,r,p),queryFn:()=>Gd(n,r,u),gcTime:yF,staleTime:gF})};i();a();i();a();var Vd=new ft("Failed to get FiatRampRecommendedQuote"),Kd=async(e,t,o)=>{try{let r=await M.api().headers(e).bearer(o).post("/fiat_ramp/v2/onramp/recommended_quote",t);if(!ae(r))throw Vd;return r.data}catch{throw Vd}};var wF=U({days:7}),AF=U({hours:1}),hF=(e,t,o,r,n=!0)=>{let s={"x-client-platform":e,"x-client-app-version":t,"x-client-locale":o},{data:p}=Me(),u=p?.userID,c=p?.accessToken;return N({queryKey:to.fiatRampRecommendedQuote(s,r,u),queryFn:()=>Kd(s,r,c),gcTime:wF,staleTime:AF,enabled:n})};i();a();var bF=(e,t,o,r)=>{let{data:n}=oe(),{data:s=[]}=mp(e,t,o),p=s.find(c=>se(c.token.caip19)===r),u=n?.addresses.find(c=>p?.addressType?c.addressType===p.addressType&&c.networkID===p?.token.caip19.chainId:c.networkID===p?.token.caip19.chainId)?.address??"";return p?.token.caip19.chainId&&v.isEVMNetworkID(p.token.caip19.chainId)&&(u=u.toLowerCase()),{tokenToBuy:p,destinationAddress:u,quickSelectDenominations:p?.quickSelectDenominations||Nd}};i();a();i();a();i();a();i();a();i();a();var Cs=e=>{let t=[];for(let o in e.errors)Array.isArray(e.errors[o])&&t.push(e.errors[o].join(", "));return t.join(", ")};var $d=async({locale:e})=>{let t;try{let o=JSON.stringify({platform:Ae,appVersion:me,locale:e}),r=await M.api().headers({"Content-Type":"application/json"}).post(({apiEnv:s})=>`/banners/force_upgrade/${s}/v1`,o);if(r.status===400){let s=await r.data,p=Cs(s);throw new Error(p)}else if(r.status<200||r.status>299)throw new Error(`status code: ${r.status}, body: ${r.statusText}`);let n=r.data;return n?{...n}:Hd}catch(o){return t===400&&o instanceof Error&&O.captureError(o,"actionBanner"),Hd}},Hd={forceUpgradeStatus:"noop"};var zd=async({locale:e})=>({...await $d({locale:e})});i();a();var pn="@phantom/interstitials",oo=`${pn}:action-banners`,jd=`${pn}:force-upgrade`,je={actionBanners:(e,t)=>[oo,{accountIdentifier:e,accessToken:t}],hasSeenInterstitial:e=>[`${pn}:has-seen-interstitial`,{feature:e}],appLaunchTimes:()=>[`${pn}:app-launch-times`],lastOnboardedAt:()=>[`${pn}:last-onboarded-at`]};var TF=()=>N({queryKey:[jd],queryFn:async()=>{let t=he(B.language)??"en";return zd({locale:t})},enabled:!!me,staleTime:U({minutes:5})});i();a();i();a();i();a();i();a();var dp=(y=>(y.Buy="Buy",y.Collectibles="Collectibles",y.ConnectHardwareWallet="Connect Hardware Wallet",y.ConvertToJito="Convert to Jito",y.Explore="Explore",y.Quests="Quests",y.MintCollectible="Mint Collectible",y.SocialLogin="Social Login",y.SettingsClaimUsername="Settings: Claim Username",y.SettingsImportSeedPhrase="Settings: Import Seed Phrase",y.SettingsNotificationPreferences="Settings: Notification Preferences",y.SettingsSecurityAndPrivacy="Settings: Security & Privacy",y.Swapper="Swapper",y.ExternalLink="External Link",y))(dp||{}),Rs=class extends Error{constructor(){super(...arguments);this.message="Failed to set dismissed action banners to storage"}};var FF={Multichain:2,MultichainSwapper:1,InvalidChecksum:1,AdditionalPermissions:1},IF={Multichain:3,MultichainSwapper:1,InvalidChecksum:1,AdditionalPermissions:1},fp=e=>Gt?FF[e]:vc?IF[e]:-1;var gp=1,ko=".phantom-labs.settings.interstitials",Ir=class{static async hasSeen(t,o){let r=await o.get(ko);if(!r)return!1;let n=fp(t);return(r.interstitialsSeen[t]??0)>=n}static async setHasSeen(t,o){let r=await o.get(ko),n=fp(t);await o.set(ko,{version:gp,interstitialsSeen:{...!!r&&r.interstitialsSeen,[t]:n}})}static async resetHasSeen(t,o){let r=await o.get(ko);if(r)return o.set(ko,{version:gp,interstitialsSeen:{...r.interstitialsSeen,[t]:void 0}})}static async resetAllHasSeen(t){if(await t.get(ko))return t.set(ko,{version:gp,interstitialsSeen:{}})}};var vF=e=>{let t=ee(),o=je.hasSeenInterstitial(e);return N({queryKey:o,queryFn:async()=>await Ir.hasSeen(e,t)})};i();a();i();a();var Wd=async e=>{await e.invalidateQueries({queryKey:[oo]})};$c(Wd);var Yd=async(e,t,o)=>{await e.setQueryData(je.hasSeenInterstitial(t),o)};var EF=e=>{let t=ee(),o=q();return ne({mutationFn:async()=>{await Ir.setHasSeen(e,t),await Yd(o,e,!0)}})};i();a();i();a();i();a();var yp=async e=>await e.get("dismissedActionBanners")??[],Xd=async(e,t)=>{try{let o=await yp(e);return o.includes(t)?void 0:e.set("dismissedActionBanners",[...o,t])}catch{throw new Rs}};i();a();i();a();var Zd=async({accountID:e,deviceId:t,locale:o,rootId:r,selectedAccountAddresses:n,addresses:s,accessToken:p})=>{let u;try{let c={accountID:e,deviceId:t,locale:o,platform:Ae,rootId:r,selectedAccountAddresses:n,version:me,addresses:s},m=await M.api().headers({"Content-Type":"application/json"}).bearer(p).post(({apiEnv:f})=>`/banners/get_banners/${f}/v2`,c);if(m.status===400){let f=await m.data,S=Cs(f);throw new Error(S)}else if(m.status<200||m.status>299)throw new Error(`status code: ${m.status}, body: ${await m.statusText}`);let g=m.data;return g?{...g,banners:g.banners??[]}:Jd}catch(c){return u===400&&c instanceof Error&&O.captureError(c,"actionBanner"),Jd}},Jd={id:void 0,banners:[]};i();a();i();a();var Sp=e=>e?Object.values(dp).includes(e):!1;i();a();var ef=e=>{switch(e){case"Bottom Sheet":return Gt;case"Modal":return!0;default:return!1}};var tf=e=>{let{bannerType:t,destinationType:o}=e;switch(t){case"Deep Link":return Sp(o);case"Bottom Sheet":case"Modal":return ef(t)&&Sp(o);default:return!1}};var of=async({accountID:e,deviceId:t,dismissedBanners:o,locale:r,rootId:n,selectedAccountAddresses:s,addresses:p,accessToken:u})=>{let c=await Zd({accountID:e,deviceId:t,locale:r,rootId:n,selectedAccountAddresses:s,addresses:p,accessToken:u});return{...c,banners:c.banners.filter(m=>tf(m)&&!o.includes(m.id))}};var CF=U({minutes:1}),RF=()=>{let e=K(),t=ee(),{data:o,isLoading:r}=Me(),{data:n}=tu(Yc),{data:s}=oe(),p=async()=>{let u=n?.flatMap(w=>w.addresses.map(ht))??[],c=s?.type!=="readOnly"?s?.addresses.map(ht)??[]:[],m=s?.type==="seed"?s.seedIdentifier:null,g=await yp(t),f=he(B.language)??"en",S=await e.getDeviceId();return of({accountID:s?.identifier??"",deviceId:S,dismissedBanners:g,locale:f,rootId:m,selectedAccountAddresses:c,addresses:u,accessToken:o?.accessToken})};return N({queryKey:je.actionBanners(s?.identifier,o?.accessToken),queryFn:p,enabled:!r&&!!s?.identifier,staleTime:CF})};i();a();i();a();var PF=()=>{let e=ee(),t=q();return ne({mutationFn:async({actionBannerId:r})=>{Xd(e,r),t.setQueriesData({queryKey:[oo]},n=>{if(!n)return;let s=n.banners.filter(p=>p.id!==r);return{...n,banners:s}})}})};i();a();i();a();var kF=()=>{let e=ee(),t=q();return ne({mutationFn:async()=>{let o=Date.now(),n=[...(await e.get("appLaunchTimes")||[]).slice(-1),o];return e.set("appLaunchTimes",n)},onSuccess:()=>{t.invalidateQueries({queryKey:je.appLaunchTimes()})}})};i();a();var DF=()=>{let e=ee(),t=q();return ne({mutationFn:()=>{let o=Date.now();return e.set("lastOnboardedAt",o)},onSuccess:()=>{t.invalidateQueries({queryKey:je.lastOnboardedAt()})}})};i();a();i();a();var ge={buyFungible:void 0,buyUsdValue:void 0,sellFungible:void 0,sellUsdValue:void 0,sellAmount:"",uiSellAmountCryptoInput:"",amountType:"sell",quoteResponse:void 0,selectedProviderIndex:0,gasEstimation:void 0,isFetchingGasEstimation:!1,maxGasEstimation:void 0,refuelEnabled:!1,hasNoRoutes:!1,isFetchingQuote:!1,error:null,searchQuery:"",numSearchResults:0,primaryCurrency:"crypto",uiSellAmountFiatInput:"",uiBuyAmountCryptoInput:"",uiBuyAmountFiatInput:"",canInputFiatSellAmount:!1,swapFilter:void 0},h=Ue(e=>({...ge,resetQuote:()=>e({quoteResponse:ge.quoteResponse,isFetchingQuote:ge.isFetchingQuote,hasNoRoutes:ge.hasNoRoutes,selectedProviderIndex:ge.selectedProviderIndex,error:ge.error,uiSellAmountFiatInput:ge.uiSellAmountFiatInput}),resetSwapper:()=>e({quoteResponse:ge.quoteResponse,gasEstimation:ge.gasEstimation,isFetchingGasEstimation:ge.isFetchingGasEstimation,maxGasEstimation:ge.maxGasEstimation,error:ge.error,sellAmount:"",uiSellAmountCryptoInput:"",uiBuyAmountCryptoInput:ge.uiBuyAmountCryptoInput,swapFilter:ge.swapFilter}),setBuyFungible:t=>e({buyFungible:t}),setBuyUsdValue:t=>e({buyUsdValue:t}),setHasNoRoutes:t=>e({hasNoRoutes:t}),setIsFetchingQuote:t=>e({isFetchingQuote:t}),setQuoteResponse:t=>e({quoteResponse:t,hasNoRoutes:!1}),setSelectedProviderIndex:t=>e({selectedProviderIndex:t}),setGasEstimation:t=>e({gasEstimation:t}),setIsFetchingGasEstimation:t=>e({isFetchingGasEstimation:t}),setMaxGasEstimation:t=>e({maxGasEstimation:t}),setRefuelEnabled:t=>e({refuelEnabled:t}),setSellAmount:t=>e({sellAmount:t}),setAmountType:t=>e({amountType:t}),setSellUsdValue:t=>e({sellUsdValue:t}),setSellFungible:t=>e({sellFungible:t}),setUiSellAmountCryptoInput:t=>e({uiSellAmountCryptoInput:t}),setError:t=>e({error:t}),setSearchQuery:t=>e({searchQuery:t}),setNumSearchResults:t=>e({numSearchResults:t}),setPrimaryCurrency:t=>e({primaryCurrency:t}),setUiSellAmountFiatInput:t=>e({uiSellAmountFiatInput:t}),setUiBuyAmountCryptoInput:t=>e({uiBuyAmountCryptoInput:t}),setUiBuyAmountFiatInput:t=>e({uiBuyAmountFiatInput:t}),setCanInputFiatSellAmount:t=>e({canInputFiatSellAmount:t}),setSwapFilter:t=>e({swapFilter:t}),switchTokensForSell:()=>{e(t=>{let o=t.sellFungible??t.buyFungible,r=t.buyFungible??t.sellFungible,n=t.uiBuyAmountCryptoInput,s=t.uiBuyAmountFiatInput;return{sellFungible:r,buyFungible:o,uiSellAmountCryptoInput:n,uiSellAmountFiatInput:s,uiBuyAmountCryptoInput:ge.uiBuyAmountCryptoInput,uiBuyAmountFiatInput:ge.uiBuyAmountFiatInput,sellAmount:n,swapFilter:void 0}})},switchTokensForBuy:()=>{e(t=>{let o=t.sellFungible??t.buyFungible,r=t.buyFungible??t.sellFungible,n=t.uiSellAmountCryptoInput,s=t.uiSellAmountFiatInput;return{sellFungible:r,buyFungible:o,uiSellAmountCryptoInput:ge.uiSellAmountCryptoInput,uiSellAmountFiatInput:ge.uiSellAmountFiatInput,uiBuyAmountCryptoInput:n,uiBuyAmountFiatInput:s,sellAmount:n,swapFilter:void 0}})},resetUiAmounts:()=>e({uiSellAmountCryptoInput:ge.uiSellAmountCryptoInput,uiSellAmountFiatInput:ge.uiSellAmountFiatInput,uiBuyAmountCryptoInput:ge.uiBuyAmountCryptoInput,uiBuyAmountFiatInput:ge.uiBuyAmountFiatInput,sellAmount:ge.sellAmount})}));i();a();var rf=C(R());function Q(){let e=h(u=>u.quoteResponse),t=h(u=>u.hasNoRoutes),o=h(u=>u.selectedProviderIndex),r=h(u=>u.isFetchingQuote),n=(0,rf.useMemo)(()=>e?e.quotes:[],[e]),s=n.length>0?n[o]:void 0;return{bestBuyAmount:n[0]?.buyAmount??"",currentQuote:s,hasNoRoutes:t,quoteResponse:e,quotes:n,selectedProviderIndex:o,isFetchingQuote:r}}i();a();var sf=C(R());i();a();i();a();var Ap=(n=>(n[n.Always=1/0]="Always",n[n.Short=U({days:1})]="Short",n[n.Medium=U({days:3})]="Medium",n[n.Long=U({days:7})]="Long",n))(Ap||{}),nf=(s=>(s[s.Immediate=0]="Immediate",s[s.Short=U({minutes:1})]="Short",s[s.Medium=U({minutes:2.5})]="Medium",s[s.Long=U({minutes:60})]="Long",s[s.Never=1/0]="Never",s))(nf||{}),cn=(r=>(r[r.Short=U({seconds:20})]="Short",r[r.Medium=U({minutes:2.5})]="Medium",r[r.Long=U({minutes:5})]="Long",r))(cn||{});var NF=l.object({swapper:l.number(),review:l.number().nullish().default(null)}),Ps={swapper:cn.Short,review:null},ro=()=>{let e=Be.getMultivariateAssignment("swapper-poll-interval-json");if(!e)return Ps;try{let t=JSON.parse(e);return NF.parse(t)}catch{return Ps}};var ot=()=>{let e=un(n=>n.intervalMs),t=un(n=>n.state),o=un(n=>n.setState),r=(0,sf.useCallback)(n=>{o("resumed",n??af())},[o]);return{state:t,pause:()=>o("paused"),resume:r,intervalMs:e}},Do=e=>{un.getState().setState("resumed",e??af())},ln=()=>{un.getState().setState("paused")},af=()=>ro().swapper,un=Ue(e=>({state:"resumed",intervalMs:Ps.swapper,setState(t,o){e(o?{state:t,intervalMs:o}:{state:t})}}));i();a();var xf=C(R());i();a();i();a();i();a();i();a();var BF=e=>{let t=ee(),o=K(),{data:r,isPending:n}=N({gcTime:0,queryKey:["originIsBlocklisted",e],queryFn:async()=>{let{result:s}=await $i(t,o,e);return s}});return e===void 0?{isLoading:!1,originIsBlocklisted:!1}:{isLoading:n,originIsBlocklisted:r??!1}};i();a();var hp=C(R());i();a();var mn=class{constructor(t){this.onScannedMessageByUser=t=>{this.#e.capture("simulation",{data:{simulation:{...t,type:"message",status:"success"}}})};this.onFailedScannedMessageByUser=t=>{this.#e.capture("simulation",{data:{simulation:{...t,type:"message",status:"error"}}})};this.onScannedTransactionByUser=t=>{this.#e.capture("simulation",{data:{simulation:{...t,type:"transaction",status:"success"}}})};this.onFailedScannedTransactionByUser=t=>{this.#e.capture("simulation",{data:{simulation:{...t,type:"transaction",status:"error"}}})};this.#e=t}#e};function UF(e,t){let{data:o}=oe(),{params:r,networkID:n}=e,[s,p]=(0,hp.useState)(null),u=["scan-message",{url:e.url,message:r.message}],c=o?.addresses.find(y=>y.networkID===n)?.address,m=he(B.language)??"en",g=K(),f=new mn(g),S=cf(),w=N({queryKey:u,queryFn:async()=>{try{let y=await zi(m,await g.getDeviceId(),{...e,userAccount:c});return p(null),f.onScannedMessageByUser({networkId:n,warnings:y.warnings.map(A=>A.severity),shouldBlock:!!y.block,errorCode:y.error??""}),y}catch(y){p(y),f.onFailedScannedMessageByUser({networkId:n,url:e.url}),O.addBreadcrumb("simulation",`networkID: ${n}, url: ${e.url}, type: message`,"info"),O.captureError(w.error,"simulation")}},enabled:!!c&&!!e.url&&!!r.message&&!t?.disabled,refetchInterval:t?.disableRefetch?!1:S,staleTime:1e3*10,...Mi()});return{isFetched:w.isFetched,isFetching:w.isFetching,data:w.data,isLoading:w.isPending&&!t?.disabled,isError:w.isError||!!s,error:w.error||s}}function dn(e,t){let{params:o}=e,[r,n]=(0,hp.useState)(null),s=K(),p=["scan-transaction",e.networkID,e.url,o?o.transactions??o.transaction:""],u=cf(),c=!1;v.isEVMNetworkID(e.networkID)||v.isSolanaNetworkID(e.networkID)?c=!!o&&o.transactions.length>0&&!!e.userAccount:v.isBitcoinNetworkID(e.networkID)&&(c=!!o&&!!o.transaction&&!!o.userAddresses&&o.userAddresses.length>0);let m=he(B.language)??"en",g=new mn(s),f=N({queryKey:p,queryFn:async()=>{try{let S=await ji(m,await s.getDeviceId(),e);return g.onScannedTransactionByUser({networkId:e.networkID,warnings:S.warnings.map(w=>w.severity),shouldBlock:!!S.block,errorCode:S.error??""}),n(null),t?.onSettled?.(S,void 0),S}catch(S){g.onFailedScannedTransactionByUser({networkId:e.networkID,url:e.url}),O.addBreadcrumb("simulation",`networkID: ${e.networkID}, url: ${e.url}, type: transaction`,"info"),n(S),t?.onSettled?.(void 0,S),O.captureError(S,"simulation")}},enabled:c&&!t?.disabled,refetchInterval:t?.disableRefetch?!1:u,staleTime:1e3*10,...Mi()});return{isFetched:f.isFetched,isFetching:f.isFetching,data:f.data,isLoading:f.isPending&&!t?.disabled,isError:f.isError||!!r,error:f.error||r}}var pf=5e3;function cf(){let e=Be.getMultivariateAssignment("transactions-simulation-interval-ms");if(!e)return pf;let t=parseInt(e,10);return Number.isNaN(t)?pf:t}var gn=C(R());i();a();i();a();i();a();var mf=l.object({name:l.string(),message:l.string()}),df=l.object({chainId:$t,name:l.string(),symbol:l.string(),decimals:l.number(),logoURI:l.optional(l.string()),includesBridge:l.optional(l.boolean())}),LF=df.extend({address:l.string(),resourceType:l.literal("address")}),_F=df.extend({slip44:l.string(),resourceType:l.literal("nativeToken")}),OF=l.union([LF,_F]),MF=l.enum(["network","phantom"]),QF=l.object({name:l.string(),percentage:l.number(),amount:l.number(),type:MF}),qF=l.object({name:l.string(),proportion:l.string()}),ff=l.object({sellAmount:l.string(),buyAmount:l.string()}),gf=ff.extend({priceImpact:l.number(),sources:l.array(qF),fees:l.array(QF)}),bp=gf.extend({transactionData:l.array(l.string()),slippageTolerance:l.optional(l.number())}),Tp=gf.extend({allowanceTarget:l.string(),exchangeAddress:l.string(),gas:l.number(),value:l.string(),transactionData:l.string(),slippageTolerance:l.optional(l.number())}),uf=l.object({name:l.string(),amount:l.string(),token:Ve,percentage:l.string(),included:l.boolean(),amountUSD:l.optional(l.string())}),GF=l.object({name:l.string(),key:l.string(),logoURI:l.string()}),yf=l.object({name:l.string(),symbol:l.string()}),VF=l.object({transactionData:l.string(),buyToken:Ve,sellToken:Ve,nonIncludedNonGasFees:l.string(),feeCosts:l.array(uf),chainId:$t,tool:GF,value:l.optional(l.string()),allowanceTarget:l.optional(l.string()),approvalMetadata:l.optional(yf),approvalExactAmount:l.optional(l.string()),exchangeAddress:l.optional(l.string()),gasCosts:l.optional(l.array(l.number())),includedFeeCosts:l.optional(l.array(uf))}),Fp=ff.extend({executionDuration:l.number(),tags:l.array(l.string()),steps:l.array(VF),refuelAmount:l.optional(l.string())}),KF=l.union([bp,Tp,Fp]),Ip=l.enum(["solana","eip155","xchain"]),vp=l.object({type:Ip,taker:Ve,buyToken:Ve,sellToken:Ve,slippageTolerance:l.number(),simulationTolerance:l.optional(l.number()),gasBuffer:l.optional(l.number()),quotes:l.array(KF)}),HF=l.enum(["swap-approval","swap","bridge-approval","bridge"]),$F=l.enum(["swap","bridge"]),Sf=l.object({sellToken:Ve,buyToken:Ve,approvalMetadata:l.optional(yf)}),zF=l.object({type:l.literal("solana"),transactions:l.array(l.string()),transactionTypes:l.array($F),transactionPairs:l.optional(l.array(Sf))}),jF=l.object({type:l.literal("evm"),transactions:l.array(jo),transactionTypes:l.array(HF),transactionPairs:l.optional(l.array(Sf))}),yK=l.union([zF,jF]);var Ep=l.object({name:l.string(),amount:l.string()}).strict(),ks=l.object({name:l.string(),fee:l.string(),amount:l.string(),time:l.object({text:l.string(),isFast:l.boolean()}),logoURI:l.string()}),SK=l.union([Ep,ks]);var lf=l.object({token:OF,owner:l.string()}),wf=l.object({sell:lf,buy:lf});function ce(e){return Fp.safeParse(e).success}function xp(e){return bp.safeParse(e).success}function No(e){return Tp.safeParse(e).success}function no(e){return xp(e)||No(e)}i();a();var so="swapper";var Af=[so,"quotes"],ue={quotesScope:()=>Af,quotes:({sellTokenCaip19:e,buyTokenCaip19:t,taker:o,amountValue:r,amountType:n,slippageTolerance:s,refuelEnabled:p,takerDestination:u,enableAutoSlippage:c})=>[...Af,{sellToken:e,buyToken:t,taker:o,takerDestination:u,amountValue:r,amountType:n,slippageTolerance:s,refuelEnabled:p,enableAutoSlippage:c}],transactions:e=>[so,"transactions",e],slippageTolerance:()=>[so,"slippageTolerance"],lastSubmittedPairs:()=>[so,"lastSubmittedPairs"],lastSelectedTokens:()=>[so,"lastSelectedTokens"],slippageSettings:()=>[so,"slippageSettings"],hasViewedAutoSlippageOptIn:()=>[so,"hasViewedAutoSlippageOptIn"],optimisticUpdates:()=>[so,"optimisticUpdates"]};var hf=async({callerAddress:e,contractAddress:t,networkId:o,sellAmount:r,allowanceTarget:n,approvalExactAmount:s,exchangeAddress:p,value:u,transactionData:c,type:m})=>{let g=[],f=[];if(t&&(await lu({callerAddress:e,spender:n,networkId:o,contractAddress:t})).lt(s??r.toString())){let y=await mu({callerAddress:e,spender:n,networkId:o,contractAddress:t,exactAmount:s});g.push(y),f.push(`${m}-approval`)}let S=jo.parse({type:"0x2",from:e,data:c,chainId:v.getEVMNetworkIDValue(o),to:p,...u==="0"?{}:{value:`0x${new D(u).toString(16)}`}});return g.push(S),f.push(m),{transactions:g,transactionTypes:f}},WF=async({networkId:e,callerAddress:t,quote:o})=>{let{sellAmount:r,steps:n}=o,s=[],p=[],u=[];for(let c of n){let{allowanceTarget:m,exchangeAddress:g,value:f,transactionData:S,sellToken:w,buyToken:y,approvalMetadata:A}=c,b=w.resourceType==="address"?w.address:null,T=v.compareNetworkID(w.chainId,y.chainId)===0?"swap":"bridge";if(!m||!g||!S||!f)throw new Error("Missing bridge step data for EVM bridge quote.");let F=await hf({callerAddress:t,contractAddress:b,networkId:e,sellAmount:r,allowanceTarget:m,approvalExactAmount:c.approvalExactAmount,exchangeAddress:g,value:f,transactionData:S,type:T});s.push(...F.transactions),p.push(...F.transactionTypes),u.push({sellToken:w,buyToken:y,approvalMetadata:A}),F.transactionTypes.length==2&&F.transactionTypes.find(E=>E.includes("approval"))&&u.push({sellToken:w,buyToken:y,approvalMetadata:A})}return{type:"evm",transactions:s,transactionTypes:p,transactionPairs:u}},YF=async({quote:e,connection:t})=>{let o=[],r=[],n=[];for(let s of e.steps){let{transactionData:p,sellToken:u,buyToken:c}=s,m=v.compareNetworkID(u.chainId,c.chainId)===0?"swap":"bridge",g=await bf(p,t);o.push(Ci.serialize(g).transaction),r.push(m),n.push({sellToken:u,buyToken:c})}return{type:"solana",transactions:o,transactionTypes:r,transactionPairs:n}},XF=async({networkId:e,callerAddress:t,quote:o,sellFungible:r})=>{let n=r?.data.tokenAddress??"",{allowanceTarget:s,exchangeAddress:p,sellAmount:u,value:c}=o;return{type:"evm",...await hf({callerAddress:t,contractAddress:n,networkId:e,sellAmount:u,allowanceTarget:s,exchangeAddress:p,value:c,transactionData:o.transactionData,type:"swap"})}},bf=async(e,t)=>{let o=Wo(e,"bs58");return await cu(o,{connection:t,transactionType:"Swap"})},JF=async({quote:e,connection:t})=>{let o=e.transactionData.map(p=>bf(p,t)),n=(await Promise.all(o)).map(p=>Ci.serialize(p).transaction);return{type:"solana",transactionTypes:n.map(()=>"swap"),transactions:n}},io=({callerAddress:e,sellFungible:t,quote:o})=>{let{connection:r}=rr(),n=ue.transactions(o);return N({queryKey:n,enabled:!!o&&!!t,gcTime:0,staleTime:0,refetchInterval:cn.Short,async queryFn(){try{if(!o)throw new Error("Missing quote");if(!t)throw new Error("Missing sell token");let s=t.data.chain.id;if(no(o)){if(v.isEVMNetworkID(s)&&No(o))return await XF({networkId:s,callerAddress:e,quote:o,sellFungible:t});if(v.isSolanaNetworkID(s)&&xp(o))return JF({quote:o,connection:r});throw new Error(`Single network swap quote not supported for network ID ${s}`)}if(ce(o)){if(v.isEVMNetworkID(s))return await WF({networkId:s,callerAddress:e,quote:o});if(v.isSolanaNetworkID(s))return await YF({quote:o,connection:r});throw new Error(`Bridge quote not supported for network ID ${s}`)}throw new Error("Swap quote type not supported")}catch(s){throw s instanceof Error&&O.captureError(s,"swapper"),s}}})};i();a();i();a();i();a();i();a();i();a();i();a();i();a();var Ds=e=>e.steps.map(t=>t.tool);var gt=e=>e?ce(e)?Ds(e):e?.sources??[]:[];i();a();function Qe(e){let t=e.reduce((o,r)=>o.add(r.name),new Set);return Array.from(t).join(" + ")}var ZF=10,eI=Ue(e=>({transitions:[],addTransition:(t,o)=>e(r=>{let n=tI(o,t);return n?{transitions:[n,...r.transitions].slice(0,ZF)}:r})}));function Tf(e,t,o){eI.getState().addTransition(t,o)}function tI(e,t){switch(t.type){case"idle":return;case"fetchingQuote":return;case"quote":return{sell:yt(t.response,t.sell,"sell"),buy:yt(t.response,t.buy,"buy"),sellAmount:t.quote.sellAmount,buyAmount:t.quote.buyAmount,provider:fn(t.quote),slippage:t.response.slippageTolerance,stateType:t.type,eventType:e.type,timestamp:Date.now()};case"simulationRequestErrored":return{sell:yt(t.response,t.sell,"sell"),buy:yt(t.response,t.buy,"buy"),sellAmount:t.quote.sellAmount,buyAmount:t.quote.buyAmount,provider:fn(t.quote),slippage:t.response.slippageTolerance,stateType:t.type,eventType:e.type,error:t.error,quoteTransactionData:Ns(t.quote),timestamp:Date.now()};case"simulated":return;case"simulationFailed":return{sell:yt(t.response,t.sell,"sell"),buy:yt(t.response,t.buy,"buy"),sellAmount:t.quote.sellAmount,buyAmount:t.quote.buyAmount,provider:fn(t.quote),slippage:t.response.slippageTolerance,simulationError:t.simulationError,stateType:t.type,eventType:e.type,simulationWarning:t.scannedTransactionResult.warnings,quoteTransactionData:Ns(t.quote),simulationHumanReadableError:t.scannedTransactionResult.simulationError?.humanReadableError,timestamp:Date.now()};case"transactionSubmissionFailed":return{sell:yt(t.response,t.sell,"sell"),buy:yt(t.response,t.buy,"buy"),sellAmount:t.quote.sellAmount,buyAmount:t.quote.buyAmount,provider:fn(t.quote),slippage:t.response.slippageTolerance,error:t.error,stateType:t.type,eventType:e.type,quoteTransactionData:Ns(t.quote),timestamp:Date.now()};case"transactionNotConfirmed":return{sell:yt(t.response,t.sell,"sell"),buy:yt(t.response,t.buy,"buy"),sellAmount:t.quote.sellAmount,buyAmount:t.quote.buyAmount,provider:fn(t.quote),slippage:t.response.slippageTolerance,stateType:t.type,eventType:e.type,quoteTransactionData:Ns(t.quote),timestamp:Date.now()};default:return}}var fn=e=>{let t=gt(e);return Qe(t)},yt=(e,t,o)=>{switch(o){case"sell":return{caip19:e.sellToken,symbol:t.data.symbol??void 0};case"buy":return{caip19:e.buyToken,symbol:t.data.symbol??void 0}}},Ns=e=>{if(!ce(e))return e.transactionData};var Us=class{onStateChange(t,o,r){Tf(o,r,t)}};i();a();var Ls=class{constructor(t){this.listeners=t}transition(t,o){try{let r=this.detectNextState(t,o);return this.listeners.forEach(n=>n.onStateChange(o,t,r)),r}catch{return t}}detectNextState(t,o){switch(o.type){case"quoteRequestStarted":return{type:"fetchingQuote",buy:o.buy,sell:o.sell,amount:o.amount};case"quoteResponseReceived":switch(t.type){case"fetchingQuote":case"quote":case"simulated":case"simulationRequestErrored":case"transactionSubmissionFailed":case"transactionNotConfirmed":let r=o.response.quotes[o.quoteIndex];if(!r)throw new Error("Quote index out of bounds");return{type:"quote",response:o.response,buy:t.buy,sell:t.sell,quote:r};default:throw new Error("Can't transition from this state")}case"quoteSelected":switch(t.type){case"quote":let r=t.response.quotes[o.quoteIndex];if(!r)throw new Error("Quote index out of bounds");return{type:"quote",quote:r,buy:t.buy,sell:t.sell,response:t.response};default:throw new Error("Can only transition to QuoteChanged from Quote")}case"simulationResponseReceived":switch(t.type){case"quote":return o.scannedTransactionResult.error?{type:"simulationFailed",quote:t.quote,buy:t.buy,sell:t.sell,response:t.response,scannedTransactionResult:o.scannedTransactionResult,simulationError:o.scannedTransactionResult.error}:{type:"simulated",quote:t.quote,buy:t.buy,sell:t.sell,response:t.response,scannedTransactionResult:o.scannedTransactionResult};default:throw new Error("Can only transition to Simulated from Simulating")}case"simulationRequestError":switch(t.type){case"quote":return{type:"simulationRequestErrored",buy:t.buy,sell:t.sell,quote:t.quote,response:t.response,error:o.error};default:throw new Error("Can only transition to SimulationRequestErrored from Simulating")}case"transactionSubmissionFailed":switch(t.type){case"simulated":case"simulationFailed":return{type:"transactionSubmissionFailed",quote:t.quote,buy:t.buy,sell:t.sell,response:t.response,scannedTransactionResult:t.scannedTransactionResult,error:o.error};default:throw new Error("Can only transition to SwapSubmitFailed from SubmittingSwap")}case"transactionConfirmationFailed":switch(t.type){case"simulated":return{type:"transactionNotConfirmed",quote:t.quote,buy:t.buy,sell:t.sell,txReceipt:o.txReceipt,response:t.response,scannedTransactionResult:t.scannedTransactionResult,error:o.error};default:throw new Error("Can only transition to TransactionNotConfirmed from ConfirmingTransaction")}}}};var oI=new Ls(new Set([new Us])),Ff=Ue(e=>({state:{type:"idle"},transition:t=>{e(o=>{let r=o.state;return{state:oI.transition(r,t)}})}}));var rt=()=>{let e=Ff(o=>o.state),t=Ff(o=>o.transition);return{state:e,transition:t}};i();a();var rI="swap-priority-fee",nI=async(e,t,o)=>{let r=Wo(e,"bs58");return await Fc(r,o),{networkFeeEstimation:await fu(t,[r.message])}};function If({swapTransactions:e,chainId:t,solanaConnection:o}){let r=[rI,e],n=async()=>{if(!e)throw new Error("No swap transactions");if(e.type!=="solana")throw new Error("Trying estimate network fee for non-solana txs");if(!t)throw new Error("Trying to execute swap with no chain id.");try{let p=e.transactions.map(m=>nI(m,t,o));return(await Promise.all(p)).map(m=>m.networkFeeEstimation.value)}catch{return[0]}},s=!!e&&e.transactions.length>0&&e.type==="solana"&&!!t;return N({queryKey:r,queryFn:n,enabled:s})}i();a();var sI=e=>{switch(e){case $.Ethereum.Mainnet:case $.Ethereum.Sepolia:return 8e5;case $.Polygon.Mainnet:case $.Polygon.Amoy:return 5e5;case $.Base.Mainnet:case $.Base.Sepolia:return 5e5;default:return 0}},iI=(e,t)=>e.steps.flatMap(r=>r.gasCosts??[sI(t)]),aI=1.3,vf={estimateGas:({evmGasEstimation:e,currentQuote:t,scanResult:o,networkID:r,includeGasBuffer:n,gasBuffer:s})=>{let{maxFeePerGas:p,maxPriorityFeePerGas:u}=e,c=No(t)?[t.gas]:iI(t,r),m=o?.advancedDetails?.gas;return o?.advancedDetails?.gasLimit>0&&(c=m),c.map(f=>({maxFeePerGas:p,maxPriorityFeePerGas:u,networkID:r,gasLimit:new Z(f).multipliedBy(n?s??aI:1).integerValue(Z.ROUND_CEIL)}))}};i();a();var Ef={estimateGas:({solanaNetworkFees:e,networkID:t})=>e.map(o=>({networkID:t,value:o}))};var cI=2e4,Cp=({includeGasBuffer:e=!1}={})=>{let{currentQuote:t,quoteResponse:o}=Q(),r=h(x=>x.sellFungible),n=r?.data.chain.id??$.Solana.Mainnet,{data:s}=Ao(r?{address:r.data.walletAddress,networkID:r.data.chain.id}:void 0),p=s?.address??"",{data:u}=Iu({networkID:v.isEVMNetworkID(n)?n:$.Ethereum.Mainnet,transactionSpeed:"standard",gasLimit:new D(1),refetchInterval:cI}),{data:c,isFetching:m}=io({callerAddress:p,sellFungible:r,quote:t}),g={type:"transaction",userAccount:p,params:void 0,url:"https://phantom.app",networkID:n};c?.type==="evm"&&v.isEVMNetworkID(n)&&(g.params={transactions:c.transactions});let{transition:f}=rt(),S=(0,gn.useCallback)((x,k)=>{k&&f({type:"simulationRequestError",error:k}),x&&f({type:"simulationResponseReceived",scannedTransactionResult:x})},[f]),{data:w,isFetching:y}=dn(g,{disabled:v.isSolanaNetworkID(n),onSettled:S}),{connection:A}=rr(),{data:b,isFetching:T}=If({swapTransactions:c,chainId:v.isSolanaNetworkID(n)?n:$.Solana.Mainnet,solanaConnection:A}),F=h(x=>x.isFetchingQuote),E=(0,gn.useMemo)(()=>{if(!(F||!t)){if(v.isEVMNetworkID(n)&&(No(t)||ce(t))&&u)return vf.estimateGas({evmGasEstimation:u,currentQuote:t,scanResult:w,includeGasBuffer:e,networkID:n,gasBuffer:o?.gasBuffer});if(v.isSolanaNetworkID(n)&&b!==void 0)return Ef.estimateGas({solanaNetworkFees:b,networkID:n})}},[F,t,n,u,b,w,e,o?.gasBuffer]),I=T||m||y;return(0,gn.useMemo)(()=>({gasEstimation:E,isFetching:I,isError:u===void 0}),[E,I,u])};function uI(){let e=h(u=>u.setGasEstimation),t=h(u=>u.setIsFetchingGasEstimation),o=h(u=>u.setMaxGasEstimation),{state:r}=ot(),{gasEstimation:n,isFetching:s}=Cp(),{gasEstimation:p}=Cp({includeGasBuffer:!0});(0,xf.useEffect)(()=>{if(r==="paused"){t(!1);return}t(s),e(n),o(p)},[r,e,o,t,n,p,s])}i();a();i();a();var Vf=C(R());i();a();var Cf=(e,t,o)=>!(!e||t&&!o);i();a();var Ms=C(R());i();a();i();a();i();a();i();a();var Rp=5,Pp=5,Rf={id:v.solana.mainnetID,imageUrl:v.solana.iconUrl,name:v.solana.name,symbol:v.solana.tokenSymbol},_s={type:"SolanaNative",data:{amount:"0",balance:new D(0),chain:Rf,decimals:9,key:"SolanaNative",logoUri:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",name:"Solana",symbol:"SOL",tokenAddress:void 0,walletAddress:"",spamStatus:"VERIFIED"}},kp={type:"SPL",data:{amount:"0",balance:new D(0),chain:Rf,decimals:6,key:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",logoUri:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png",mintAddress:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",name:"USD Coin",splTokenAccountPubkey:"EAF7dH8Jy43Xgp68PhyybKhfKxk46NFRkWN4PMCLqMfS",symbol:"USDC",tokenAddress:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",walletAddress:"",programId:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",spamStatus:"VERIFIED"}},Pf={type:"PolygonNative",data:{chain:{id:v.polygon.mainnetID,name:v.polygon.name,symbol:v.polygon.tokenSymbol,imageUrl:v.polygon.iconUrl},walletAddress:"",decimals:18,amount:"72172806352057410682",logoUri:"https://wallet-asset.matic.network/img/tokens/matic.svg",name:"Polygon",symbol:v.polygon.tokenSymbol,balance:new D(0),key:"PolygonNative",usd:79.02922295550286,price:1.095,usd_24h_change:-.19903579005681138,tokenAddress:void 0,spamStatus:"VERIFIED"}},kf={type:"BaseNative",data:{chain:{id:v.base.mainnetID,name:v.base.name,symbol:v.base.tokenSymbol,imageUrl:v.base.iconUrl},walletAddress:"",decimals:18,amount:"72172806352057410682",logoUri:"https://cdn.jsdelivr.net/gh/trustwallet/assets@master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png",name:"Base",symbol:v.base.tokenSymbol,balance:new D(0),key:"BaseNative",usd:79.02922295550286,price:1.095,usd_24h_change:-.19903579005681138,tokenAddress:void 0,spamStatus:"VERIFIED"}},Df={type:"ERC20",data:{amount:"0",balance:new D(0),decimals:6,key:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",logoUri:"https://wallet-asset.matic.network/img/tokens/usdc.svg",name:"USD Coin",symbol:"USDC",tokenAddress:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",walletAddress:"",chain:{id:v.polygon.mainnetID,imageUrl:v.polygon.iconUrl,name:v.polygon.name,symbol:v.polygon.tokenSymbol},contractAddress:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",spamStatus:"VERIFIED"}},Nf={type:"ERC20",data:{amount:"0",balance:new D(0),decimals:6,key:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",logoUri:"https://wallet-asset.matic.network/img/tokens/usdc.svg",name:"USD Coin",symbol:"USDC",tokenAddress:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",walletAddress:"",chain:{id:v.base.mainnetID,imageUrl:v.base.iconUrl,name:v.base.name,symbol:v.base.tokenSymbol},contractAddress:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",spamStatus:"VERIFIED"}},Bf={type:"EthereumNative",data:{chain:{id:v.ethereum.mainnetID,name:v.ethereum.name,symbol:v.ethereum.tokenSymbol,imageUrl:v.ethereum.iconUrl},walletAddress:"",decimals:18,amount:"45824381294194610",logoUri:"https://cdn.jsdelivr.net/gh/trustwallet/assets@master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png",name:"Ethereum",symbol:"ETH",balance:new D(0),key:"EthereumNative",usd:85.14215868842653,price:1858.01,usd_24h_change:.0009391170983548136,tokenAddress:void 0,spamStatus:"VERIFIED"}},Uf={type:"ERC20",data:{chain:{id:v.ethereum.mainnetID,name:v.ethereum.name,symbol:v.ethereum.tokenSymbol,imageUrl:v.ethereum.iconUrl},walletAddress:"",contractAddress:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",decimals:6,amount:"1881092",logoUri:"https://assets.coingecko.com/coins/images/6319/large/USD_Coin_icon.png?1547042389",name:"USD Coin",symbol:"USDC",balance:new D(0),key:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",tokenAddress:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",usd:1.8807026139560001,price:.999793,usd_24h_change:-.0005475429199477411,spamStatus:"VERIFIED"}},yn=kp,Sn=_s;var Os="https://help.phantom.app/hc/en-us/articles/5985106844435",Lf="https://help.phantom.app/hc/en-us/articles/29763090277139";var Bo=18;var Er=500,ao={amount:new D(0),uiAmount:"",pct:0};i();a();var xr={};var _f={...xr,bridgeMinimumUsdAmounts:0,swapDefaultFee:new D(6*10**16),bridgeDefaultFee:new D(6*10**16),averageNetworkFee:new D(15e-5*10**18),nativeFungible:kf,usdcFungible:Nf};i();a();var Of={...xr,bridgeMinimumUsdAmounts:20,swapDefaultFee:new D(2.5*10**16),bridgeDefaultFee:new D(3.75*10**16),averageNetworkFee:new D(0),nativeFungible:Bf,usdcFungible:Uf};i();a();var Mf={...xr,bridgeMinimumUsdAmounts:2,swapDefaultFee:new D(6*10**16),bridgeDefaultFee:new D(6*10**16),averageNetworkFee:new D(.0015*10**18),nativeFungible:Pf,usdcFungible:Df};i();a();var Qf={bridgeMinimumUsdAmounts:1,swapDefaultFee:new D(3*10**6),bridgeDefaultFee:new D(30*10**6),averageNetworkFee:new D(15e3),nativeFungible:_s,usdcFungible:kp};var rH=["solana","ethereum","polygon","base"],lI=new er({solana:Qf,ethereum:Of,polygon:Mf,base:_f}),we=Zo(lI);i();a();var Ie=(e,t)=>!!e&&!!t&&v.compareNetworkID(e,t)!==0;i();a();var Gf=C(R());i();a();var qf=C(R());function po(){let{data:[e]}=pe(["enable-base-swapper"]);return(0,qf.useMemo)(()=>we.supportedChains.filter(t=>t!=="base"||e),[e])}var Ut=()=>{let{data:e}=oe(),t=po().map(o=>v.getMainnetNetworkID(o));return(0,Gf.useMemo)(()=>mI(e,t),[e,t])},mI=(e,t)=>[...new Set((e?.addresses??[]).map(o=>o.networkID).filter(o=>t.includes(o)))];var Qs=()=>{let[e,t]=(0,Ms.useState)(!1),o=h(c=>c.sellFungible),r=h(c=>c.buyFungible),n=r?.data.chain.id,s=Ie(o?.data.chain.id,r?.data.chain.id),p=Ut(),{fungible:u}=lt({key:n?nr(n,void 0):void 0});return(0,Ms.useEffect)(()=>{if(!u){t(!1);return}if(p.includes(u.data.chain.id)){let c=we.get(u.data.chain.id),m=s?c.bridgeDefaultFee:c.swapDefaultFee,g=new D(u.data.amount??0).gte(m);t(s&&!g)}},[u,s,t,p]),e};var Uo=()=>{let{currentQuote:e}=Q(),t=K(),o=Qs(),n=h(b=>b.buyFungible)?.data.chain.id,{fungible:s}=lt({key:n?nr(n,void 0):void 0}),p=n?v.getTokenSymbol(n):"",u=s?.data.decimals??0,c=n?v.getChainID(n):void 0,m=h(b=>b.refuelEnabled),g=h(b=>b.setRefuelEnabled),f=(0,Vf.useCallback)(b=>{t.capture("swapperRefuelToggle",{data:{value:b}}),g(b)},[g,t]),S=ce(e)?e.refuelAmount:void 0,w=S?`${Ee(S??0,u)} ${p}`:void 0,y=Ee(s?.data.amount??0,u),A=Cf(o,m,S);return{label:B.t("bridgeRefuelTitle"),refuelSupported:o,refuelEnabled:m,setRefuelEnabled:f,refuelAmount:S,uiRefuelAmount:w,showRefuelOption:A,buyNativeToken:{chain:c,symbol:p,balance:y,decimals:u}}};var dI=()=>{let{isFetchingQuote:e}=Q(),{refuelEnabled:t,setRefuelEnabled:o,refuelAmount:r,uiRefuelAmount:n,buyNativeToken:{symbol:s,balance:p,decimals:u,chain:c}}=Uo(),m=c?Ke(c):void 0,{data:g}=Le({query:m?{data:m}:void 0}),f="";if(g?.usd&&r&&u){let S=be(J(new D(r),u).toNumber(),g.usd);f=yo(S)}return{symbol:s,balance:p,refuelAmount:r,uiRefuelAmount:n,estimatedCost:f,refuelEnabled:t,setRefuelEnabled:o,isFetchingQuote:e}};i();a();var jf=C(R());i();a();var fI="swap",Kf=e=>new hu(e,fI),qs=Jo(K,e=>Kf(e));i();a();i();a();var Hf=C(R());i();a();function nt({key:e,queryKey:t,defaultValue:o=null}){let r=ee();return N({enabled:!0,queryKey:t,gcTime:Ap.Long,staleTime:1/0,async queryFn(){try{return await r.get(e)}catch(n){return n instanceof Error&&O.captureError(n,"swapper"),o}}})}function St({key:e,queryKey:t}){let o=ee(),r=q();return ne({async mutationFn(n){try{return await o.set(e,n)}catch(s){s instanceof Error&&O.captureError(s,"swapper");return}},async onMutate(n){await r.cancelQueries({queryKey:t});let s=r.getQueryData(t);return r.setQueryData(t,n),{previousValue:s}},onError(n,s,p){r.setQueryData(t,p?.previousValue)}})}var gI={type:"fixed"},Pe=()=>{let{slippageSetting:e,isFetched:t,save:o}=yI();return{isFetched:t,selectedSetting:e,setSlippageSetting:o}},yI=()=>{let{data:e,isFetched:t}=nt({key:"slippageSettings",queryKey:ue.slippageSettings()}),{mutateAsync:o}=St({key:"slippageSettings",queryKey:ue.slippageSettings()}),r=(0,Hf.useCallback)(async n=>{await o(n)},[o]);return{isFetched:t,slippageSetting:e??gI,save:r}};function co(e,t,o){if(!o)return;if(t==="fixed")return o.slippageTolerance;let r=o.quotes[e];if(r)return ce(r)?o.slippageTolerance:no(r)?r.slippageTolerance:o.slippageTolerance}i();a();var Gs=(e,t,o)=>{if(o)return J(e,t).times(Z(o)).toNumber()},$f=(e,t)=>t&&e?t>e?t:e:t??e;function zf({buyAssetUsdValue:e,buyToken:t,sellAssetUsdValue:o,sellToken:r,buyAmount:n,sellAmount:s,phantomFeeUiAmount:p,priceImpact:u,provider:c,slippageTolerance:m,slippageType:g,sellSwapFilter:f}){if(t&&r){let S=Gs(n,t.data.decimals,e),w=Gs(s,r.data.decimals,o),y=$f(S,w);return{networkId:r.data.chain.id,chainId:v.getChainID(r.data.chain.id),toNetworkId:t.data.chain.id,toChainId:v.getChainID(t.data.chain.id),isBridge:r.data.chain.id!==t.data.chain.id,marketName:`${r.data.symbol}/${t.data.symbol}`,tradeDirection:"sell",swapSource:c,priceImpact:u,fromAssetSymbol:r.data.symbol??"",fromAssetAddress:r.data.tokenAddress,fromAssetAmount:J(s,r.data.decimals),fromAssetUsdPrice:o,fromAssetUsdVolume:w,toAssetSymbol:t.data.symbol??"",toAssetAddress:t.data.tokenAddress,toAssetAmount:J(n,t.data.decimals),toAssetUsdPrice:e,toAssetUsdVolume:S,totalUsdVolume:y,feeUsd:p,slippageTolerance:m,slippageType:g,sellSwapFilter:f}}return null}function Dp({buyAssetUsdValue:e,buyToken:t,sellAssetUsdValue:o,sellToken:r,quote:n,slippageTolerance:s,slippageType:p,sellSwapFilter:u}){if(t&&r){let{buyAmount:c,sellAmount:m}=n,g="priceImpact"in n?n.priceImpact:0,f="sources"in n?Qe(n.sources):"",S=("fees"in n?n.fees.find(b=>b.type==="phantom")?.amount.toString():"")??"",w=Gs(c,t.data.decimals,e),y=Gs(m,r.data.decimals,o),A=$f(w,y);return{chainId:r.data.chain.id??t.data.chain.id,swap:{marketName:`${r.data.symbol}/${t.data.symbol}`,tradeDirection:"sell",swapSource:f,priceImpact:g,fromAssetSymbol:r.data.symbol??"",fromAssetAddress:r.data.tokenAddress??"",fromAssetAmount:J(m,r.data.decimals),fromAssetUsdPrice:o??0,fromAssetUsdVolume:y??0,toAssetSymbol:t.data.symbol??"",toAssetAddress:t.data.tokenAddress??"",toAssetAmount:J(c,t.data.decimals),toAssetUsdPrice:e,toAssetUsdVolume:w,totalUsdVolume:A??0,feeUsd:Number(S),slippageTolerance:s,slippageType:p,sellSwapFilter:u}}}return null}i();a();var Vs=C(R());i();a();var Np=e=>{let o={chainId:e.data.chain.id,name:e.data.name??"",symbol:e.data.symbol??"",decimals:e.data.decimals,logoURI:e.data.logoUri??""};return De(e.type)?{resourceType:"nativeToken",slip44:e.data.key,...o}:{resourceType:"address",address:e.data.key,...o}};i();a();function SI(e){let{mainnetID:t,iconUrl:o,name:r,tokenSymbol:n}=v[e];return{id:t,imageUrl:o,name:r,symbol:n}}var Bp=e=>e.resourceType==="address"?e.address:e.slip44,Up=(e,t)=>{let o={amount:"0",balance:new D(0),decimals:e.decimals,key:Bp(e),logoUri:e.logoURI,mintAddress:Bp(e),name:e.name,splTokenAccountPubkey:"",symbol:e.symbol,tokenAddress:Bp(e),walletAddress:t,spamStatus:"NOT_VERIFIED"},r=SI(v.getChainID(e.chainId)),{nativeFungibleTokenType:n,nonNativeFungibleTokenType:s}=ho.get(e.chainId),p=e.resourceType==="nativeToken"?n:s,u=wI(e);return{type:p,data:{chain:r,...o,...u}}};function wI(e){if(e.resourceType==="address"){if(v.isEVMNetworkID(e.chainId))return{contractAddress:e.address};if(v.isSolanaNetworkID(e.chainId))return{mintAddress:e.address}}return{}}function AI(e){let t=wf.safeParse(JSON.parse(e));if(!t.success)return null;let{sell:o,buy:r}=t.data,n=Up(o.token,o.owner),s=Up(r.token,r.owner);return!n||!s?null:{sellFungible:n,buyFungible:s}}function hI(e,t){let o=Np(e),r=Np(t);return!o||!r?"":JSON.stringify({sell:{token:o,owner:e.data.walletAddress},buy:{token:r,owner:t.data.walletAddress}})}var uo=()=>{let{data:e,isFetching:t}=nt({key:"lastSubmittedPairs",queryKey:ue.lastSubmittedPairs()}),o=(0,Vs.useMemo)(()=>e?AI(e):null,[e]),{mutateAsync:r}=St({key:"lastSubmittedPairs",queryKey:ue.lastSubmittedPairs()}),n=(0,Vs.useCallback)(async(s,p)=>{await r(hI(s,p))},[r]);return{pairs:o,isLoading:t,storePairs:n}};var An=({goToConfirmation:e})=>{let t=h(A=>A.selectedProviderIndex),o=h(A=>A.sellUsdValue),r=h(A=>A.buyUsdValue),{currentQuote:n,quoteResponse:s}=Q(),p=h(A=>A.sellFungible),u=h(A=>A.buyFungible),c=h(A=>A.swapFilter),{selectedSetting:m}=Pe(),{storePairs:g}=uo(),f=K(),S=qs(),{pause:w}=ot();return(0,jf.useCallback)(()=>{if(!n||!p||!u)return;let A=co(t,m.type,s);f.capture("swapperSwap");let b=Dp({buyToken:u,sellToken:p,sellAssetUsdValue:o,buyAssetUsdValue:r,quote:n,slippageTolerance:A,slippageType:m.type,sellSwapFilter:c});b&&(O.addBreadcrumb("swapper","approved","info",Yo(b.swap)),S.approved(b)),w(),e(),v.compareNetworkID(p.data.chain.id,u.data.chain.id)===0&&g(p,u)},[n,p,u,t,m.type,s,f,o,r,w,e,S,g,c])};i();a();var Lp=C(R());i();a();var Ks=(e,t)=>{if(t===void 0)return;let o=G(e),r=se(o);return t[r]};i();a();var Wf=C(vS()),Hs=(e,t)=>{let o=(0,Wf.default)(e),r=o.value();return Math.abs(r)>0&&Math.abs(r)<1e-5?`< ${r<0?"-":""}0.00001`:t>=12?o.format("0,0.[0]"):t>=9?o.format("0,0.[000]"):o.format("0,0.[00000]")};var $s={network:{id:v.solana.mainnetID,name:v.solana.name,symbol:v.solana.tokenSymbol,imageUrl:v.solana.iconUrl},tokenType:"SolanaNative",symbol:"",logoUri:"",tokenAddress:"",amount:"",amountUsd:0};function bI({goToConfirmation:e}){let t=h(g=>g.buyFungible),o=h(g=>g.sellFungible),r=h(g=>g.setBuyUsdValue),n=h(g=>g.setSellUsdValue),s=(0,Lp.useMemo)(()=>{let g=[];return t&&o&&(g.push(G(t)),g.push(G(o))),{query:{data:g}}},[t,o]),{data:p}=ut(s),{currentQuote:u,quoteResponse:c}=Q(),m=An({goToConfirmation:e});return(0,Lp.useMemo)(()=>{if(!c||!u||!t||!o)return{buyToken:$s,sellToken:$s,onSwap:m};let g=t?.data,f=o?.data;if(!g||!f)return{buyToken:$s,sellToken:$s,onSwap:m};let S="",w=null,y="",A=null,{sellAmount:b,buyAmount:T}=u,F=J(T,g.decimals),E=J(b,f.decimals),I=D(E),x=String(F).split(".")[0].length,k=E.toString().split(".")[0].length,P=g.symbol?.length,z=f.symbol?.length,j=x&&P?x+P:0,L=k&&z?k+z:0;y=`${Hs(I,L)} ${f.symbol}`,S=`${Hs(F,j)} ${g.symbol}`;let Y=Ks(t,p),W=Ks(o,p);return Y?.usd&&(w=F.multipliedBy(Y.usd).toNumber(),r(Y.usd)),W?.usd&&(A=I.multipliedBy(W.usd).toNumber(),n(W.usd)),{buyToken:{network:g.chain,tokenType:t.type,symbol:g.symbol,logoUri:g.logoUri,tokenAddress:g.tokenAddress,amount:S,amountUsd:w},sellToken:{network:f.chain,tokenType:o.type,symbol:f.symbol,logoUri:f.logoUri,tokenAddress:f.tokenAddress,amount:y,amountUsd:A},onSwap:m}},[c,u,t,o,p,m,r,n])}i();a();var We=C(R());i();a();var Yf=(e,t)=>e.length===0?Sn:t.includes(e[0])?we.get(e[0]).nativeFungible??Sn:Sn,Xf=e=>we.get(e).usdcFungible,hn=(e,t)=>{let o=bo(t);return e.find(r=>{if(De(o)&&o===r.type)return!0;if(t.resourceType==="address"){let n=Tu(r);return wo(t)?Lc(t.address,n):t.address===n}})},zs=(e,t,o)=>{let r=hn(o,e);if(!r){if(De(bo(e)))r=we.get(e.chainId).nativeFungible;else if(t&&t.chainId===e.chainId){let n=De(bo(t)),{usdcFungible:s,nativeFungible:p}=we.get(t.chainId);r=n?s:p}}return r};i();a();var Zf=C(R());i();a();var Op=C(R());i();a();function Lo(e,t){return e.data.key===t.data.key}i();a();var Jf=C(R());var _p=()=>{let e=Ut();return(0,Jf.useCallback)(t=>!!t&&e.includes(t),[e])};function _o({enablePrices:e,enableSorting:t}){let{fungibles:o,isLoadingTokens:r,tokensError:n,refetch:s}=bt({enablePrices:e,enableSorting:t}),p=_p(),u=o.filter(g=>p(g.data.chain.id)),c=h(g=>g.sellFungible),m=(0,Op.useMemo)(()=>{if(c){let g=u.findIndex(S=>Lo(S,c)),f=u[g];f&&f.data.amount!==c.data.amount&&(u[g]=c)}return u.filter(g=>g.data.amount!=="0")},[u,c]);return(0,Op.useMemo)(()=>({assets:m,isLoading:r,error:n,refetchTokens:s}),[m,r,n,s])}var js=()=>{let e=Ln(),t=h(s=>s.sellFungible),{pairs:o}=uo(),{data:[r]}=pe(["enable-swapper-token-fetching-optimization"]),{assets:n}=_o({enablePrices:!r,enableSorting:!r});return(0,Zf.useMemo)(()=>{let s=t?Xf(t.data.chain.id):yn,c=((o?e.includes(o.buyFungible.data.chain.id):!1)?o?.buyFungible:void 0)??s;return c?hn(n,G(c))??c:void 0},[t,o,e,n])};i();a();var eg=C(R());var lo=()=>{let e=Ln(),t=Ut(),{pairs:o}=uo(),{data:[r]}=pe(["enable-swapper-token-fetching-optimization"]),{assets:n}=_o({enablePrices:!r,enableSorting:!r});return(0,eg.useMemo)(()=>{let s=Yf(e,t),p=o?G(o?.sellFungible):void 0,u=o?G(o?.buyFungible):void 0;return((p?e.includes(p.chainId):!1)&&p&&u?zs(p,u,n):void 0)??s},[e,o,n,t])};var tg=e=>{if(e)try{return Hc(e)}catch{return}},og=e=>To(e)??[];function TI({paramsSellFungible:e,paramsSellAmount:t,paramsBuyFungible:o,navRef:r}){let{isLoading:n}=uo(),s=(0,We.useMemo)(()=>tg(e),[e]),p=(0,We.useMemo)(()=>tg(o),[o]),u=t,[c,m]=(0,We.useState)(!1),[g,f]=(0,We.useState)(!1),{data:S}=oe(),{data:[w]}=pe(["enable-swapper-token-fetching-optimization"]),{assets:y,isLoading:A}=_o({enablePrices:!w,enableSorting:!w}),{data:b,isPending:T}=Co({query:p?.resourceType==="address"?p.address:p?.slip44??"",enableQuery:!!p,networkIds:[p?.chainId??v.solana.mainnetID],searchContext:"swapper"}),F=(0,We.useMemo)(()=>{let V=[];return s&&V.push(...og(s)),p&&V.push(...og(p)),V},[s,p]),{fungibles:E,isLoadingTokens:I,isRefetchingTokens:x,tokensError:k}=bt({keys:F,enablePrices:!w,enableSorting:!w}),P=lo(),z=js(),j=h(V=>V.setBuyFungible),L=h(V=>V.setSellFungible),Y=h(V=>V.setUiSellAmountCryptoInput),W=h(V=>V.setSellAmount);return(0,We.useEffect)(()=>{L(void 0),m(!1),j(void 0),f(!1)},[s,p,L,j,S?.identifier,n,r]),(0,We.useEffect)(()=>{if(c)return;let V;if(s){if(A)return;V=zs(s,p,y)}else if(!s&&p){let{usdcFungible:X,nativeFungible:_}=we.get(p.chainId);V=De(bo(p))?X:_}else V=P;m(!0),L(V)},[s,p,P,y,L,A,c]),(0,We.useEffect)(()=>{if(g)return;let V;if(p){if(T)return;if(V=hn(b??[],p),!V){let{usdcFungible:X,nativeFungible:_}=we.get(p.chainId);V=De(bo(p))?_:X}}else V=z;if(!I&&!x&&!k&&E&&V){let X=se(G(V)),_=E.find(ke=>se(G(ke))===X);_&&(V=_)}f(!0),j(V)},[p,b,T,j,g,z,E,I,x,k]),(0,We.useEffect)(()=>{u?(W(u),Y(u)):(W(""),Y(""))},[u,r,Y,W]),{isLoading:(!!s||!!p)&&(!g||!c)||n}}i();a();var Ye=C(R()),ug=C(Qp());i();a();i();a();i();a();var II=["SwapperNoQuotes","UnsupportedCountry","UnknownError"],ng=(e,t,o,r)=>{e instanceof xe&&II.includes(e.code)||(!t||t>=400&&t<500)&&(O.addBreadcrumb(o,JSON.stringify(r),"info"),O.captureError(e,"swapper"))};i();a();var sg=async(e,t,o=void 0)=>{if(ae(e))return Promise.resolve();let r;try{r=e.data}catch{throw new xe({key:o})}let n=mf.safeParse(r);throw n.success?(O.addBreadcrumb(t,JSON.stringify(n.data),"info"),new xe({key:n.data.name})):new xe({key:o})};i();a();var ig=(e,t)=>{let o=new xe({key:"SwapperNoQuotes"});if(Ip.safeParse(e?.type).success===!1)throw new Error("Invalid input");let r=vp.safeParse(e);if(!r.success)throw o;if(r.data.quotes.length===0)throw t?new xe({key:"SwapperRefuelNoQuotes"}):o;return r.data};var ag="swap-quotes";async function pg({sellTokenCaip19:e,buyTokenCaip19:t,taker:o,takerDestination:r,exactOut:n,sellAmount:s,slippageTolerance:p,refuelEnabled:u,signal:c,enableAutoSlippage:m}){let g;try{wo(o)&&(o.address=o.address.toLowerCase()),r&&wo(r)&&(r.address=r.address.toLowerCase()),wo(t)&&(t.address=t.address.toLowerCase()),wo(e)&&(e.address=e.address.toLowerCase());let f="/swap/v2/quotes",S={sellToken:e,buyToken:t,taker:o,takerDestination:r,exactOut:n,sellAmount:s,slippageTolerance:p,autoSlippage:m,...u?{refuel:1,ignoreRefuelFailures:!0}:{}},w=await M.api().post(f,S,{signal:c});return g=w.status,await sg(w,ag,"SwapperNoQuotes"),ig(w.data,u)}catch(f){let S=f instanceof xe?f:new xe;throw ng(S,g,ag,{sellToken:e,buyToken:t,sellAmount:s,slippageTolerance:p}),S}}var cg=({sellToken:e,buyToken:t,taker:o,takerDestination:r,amount:n,slippageTolerance:s,refuelEnabled:p,pollInterval:u,pollerState:c,enableAutoSlippage:m})=>{let g=K(),f=e?G(e):void 0,S=t?G(t):void 0,w=e?Fu(e,n.value).toString():n.value,y=h(F=>F.selectedProviderIndex),{transition:A}=rt(),b=!!n.value&&!!t&&!!e&&c==="resumed",T=ue.quotes({sellTokenCaip19:f,buyTokenCaip19:S,taker:o,amountValue:w,amountType:n.type,refuelEnabled:p,takerDestination:r,slippageTolerance:s,enableAutoSlippage:m});return N({queryKey:T,enabled:b,gcTime:0,staleTime:0,refetchInterval:u,async queryFn({signal:F}){if(!n||!S||!f)throw new Error("missing necessary args");e&&t&&A({type:"quoteRequestStarted",buy:t,sell:e,amount:w});let E=await pg({sellTokenCaip19:f,buyTokenCaip19:S,taker:o,takerDestination:r,sellAmount:w,exactOut:n.type==="buy",slippageTolerance:s,refuelEnabled:p,signal:F,enableAutoSlippage:m});return A({type:"quoteResponseReceived",response:E,quoteIndex:y}),g.capture("swapperQuotesResult",{data:{numQuotes:E.quotes.length,sellToken:e,fromNetworkId:f.chainId,toNetworkId:S.chainId}}),E}})};i();a();var Ws=()=>{let e=h(f=>f.sellFungible),t=h(f=>f.buyFungible),o=h(f=>f.sellAmount),r=e?G(e):null,{data:n}=Le({query:r?{data:r}:void 0}),s=e?.data.chain.id,p=t?.data.chain.id,u=n?.usd;if(!s||!p||!o||!u||v.compareNetworkID(s,p)===0)return!0;let c=be(Number(o),u),m=we.get(s).bridgeMinimumUsdAmounts,g=we.get(p).bridgeMinimumUsdAmounts;return m<=c&&g<=c};i();a();var Oo=()=>nt({key:"slippageTolerance",queryKey:ue.slippageTolerance()}),Ys=()=>St({key:"slippageTolerance",queryKey:ue.slippageTolerance()});function vI({skipInitialBuyFungible:e}){let t=K(),o=h(H=>H.sellAmount),r=h(H=>H.amountType),s=h(H=>H.buyFungible)??(e?void 0:yn),p=h(H=>H.sellFungible),u=h(H=>H.refuelEnabled),c=h(H=>H.setRefuelEnabled),{state:m,intervalMs:g}=ot(),f=h(H=>H.resetQuote),S=h(H=>H.setHasNoRoutes),w=h(H=>H.setError),y=h(H=>H.setIsFetchingQuote),A=h(H=>H.setQuoteResponse),b=h(H=>H.setSelectedProviderIndex),{data:[T]}=pe(["enable-auto-slippage"]),{data:F}=Oo(),{mutateAsync:E}=Ys(),{selectedSetting:I}=Pe(),x=T&&I.type==="auto",k=Qs();(0,Ye.useEffect)(()=>c(k),[k,s,c]);let P=Ws(),z=(0,ug.default)(P),j=(0,Ye.useMemo)(()=>{let H=r==="sell"?{amount:o,fungible:p}:{amount:o,fungible:s};return new D(H.amount).isGreaterThan(0)&&H.fungible?Qc(H.amount,H.fungible.data.decimals).toString():(f(),"")},[r,s,f,o,p]),L=Ie(p?.data?.chain.id,s?.data.chain.id);(0,Ye.useEffect)(()=>{L&&t.capture("swapperRefuelDefault",{data:{default:k}})},[k,t,L]);let{data:Y}=Ao(p?.data?.chain.id),{data:W}=Ao(s?.data.chain.id),Se=(0,Ye.useMemo)(()=>Y?{chainId:Y.networkID,address:Y.address,resourceType:"address"}:{},[Y]),V=(0,Ye.useMemo)(()=>{if(L)return{chainId:W?.networkID,address:W?.address,resourceType:"address"}},[L,W?.address,W?.networkID]),{data:X,error:_,isLoading:ke}=cg({sellToken:p,buyToken:s,taker:Se,takerDestination:V,amount:{value:P?j:"",type:r},slippageTolerance:x?void 0:F??void 0,refuelEnabled:u,enableAutoSlippage:x,pollInterval:g,pollerState:m}),ie=(0,Ye.useCallback)(H=>{w(null),b(0),y(!1),S(!1),A(H);let qt=co(0,I.type,H);qt&&F!==qt&&E(qt)},[w,S,y,A,b,E,F,I.type]),le=(0,Ye.useCallback)(H=>{f(),y(!1),S(!0),w(H)},[f,w,S,y]);(0,Ye.useEffect)(()=>{m!=="paused"&&(ke?y(!0):X?ie(X):_&&le(_))},[_,X,ke,ie,le,y,m,P]),(0,Ye.useEffect)(()=>{P?z===!1&&P&&(w(null),S(!1)):(w(new xe({key:"InsufficientSellAmount"})),S(!0))},[P,z,w,S])}i();a();var Xs=C(R());i();a();i();a();i();a();var EI=e=>e.isGreaterThanOrEqualTo(1)?"0,0.[00]":"0,0.[00000]",Rr=e=>{let t=D(e);return Gc(e,EI(t))};function Lt(e,t,o){if(t.lte(0))return"";let r=se({chainId:e,resourceType:"nativeToken",slip44:v.getSlip44(e)}),n=v.getTokenDecimals(e),s=v.getTokenSymbol(e);if(!r||!n||!s)return"";let p=t.div(new D(10).pow(n)),u=o[r];if(!u?.usd)return`${Rr(p.toString())} ${s}`;let c=p.times(u.usd).toNumber(),m=yo(c,{minimumAmount:1e-6,decimalFormatSmallNumbers:"0.[00000]"});return m!=="$NaN"?m:""}i();a();var Mo=e=>{let t=Math.floor(e/3600),o=Math.floor((e-t*3600)/60),r=e%60;if(t>0)return B.t("swapProviderEstimatedTimeHM",{hours:t,minutes:o});if(o>0){let n=r>0?o+1:o;return B.t("swapProviderEstimatedTimeM",{minutes:n})}return B.t("swapProviderEstimatedTimeS",{seconds:r})};i();a();var Pr=e=>e.steps.reduce((t,o)=>t.plus(new D(o.nonIncludedNonGasFees)),new D(0));var xI=5*60,lg=e=>{if(ce(e))return Qe(Ds(e));let{sources:t}=e;return Qe(t)},mg=({quotes:e,buyTokenNetworkId:t,buyTokenDecimals:o,buyTokenSymbol:r})=>e.map(n=>{let{buyAmount:s}=n,p=ho.get(t).formDisplayPrecision;return{name:lg(n),amount:`${zt(J(s,o),p)} ${r}`}}),dg=({quotes:e,buyTokenNetworkId:t,buyTokenDecimals:o,buyTokenSymbol:r,networkIDForFees:n,networkFee:s,priceMap:p,t:u})=>e.filter(ce).map(c=>{let{buyAmount:m,executionDuration:g,steps:f}=c,w=Pr(c).plus(s),y=f.find(b=>!!b.tool.logoURI),A=ho.get(t).formDisplayPrecision;return{name:lg(c),fee:n&&p?u("swapProvidersFee",{fee:Lt(n,w,p)}):"",amount:`${zt(J(m,o),A)} ${r}`,time:{text:Mo(g),isFast:g<=xI},logoURI:y?.tool.logoURI??""}});i();a();var CI={aggregate(e){return e.reduce((t,o)=>({...t,gasLimit:t.gasLimit.plus(o.gasLimit)}),{networkID:v.ethereum.mainnetID,gasLimit:new D(0),maxFeePerGas:e[0].maxFeePerGas,maxPriorityFeePerGas:e[0].maxPriorityFeePerGas})}},RI={aggregate(e){return e.reduce((t,o)=>({...t,value:t.value+o.value}),{networkID:v.solana.mainnetID,value:0})}},bn=e=>{if(!(!e||e.length===0)){if(au(e[0]))return CI.aggregate(e);if(iu(e[0]))return RI.aggregate(e)}};function PI(){let{t:e}=Ht(),{quoteResponse:t,isFetchingQuote:o,quotes:r,selectedProviderIndex:n}=Q(),s=h(E=>E.setSelectedProviderIndex),p=h(E=>E.maxGasEstimation),u=h(E=>E.sellFungible),c=h(E=>E.buyFungible),m=u?.data.chain.id,{data:g}=Kr(m,bn(p)),S=po().map(E=>Ke(E)),{data:w={}}=ut({query:{data:S}}),y=t?.type==="xchain",A=(0,Xs.useMemo)(()=>c?y?dg({quotes:r,buyTokenNetworkId:c.data.chain.id,buyTokenDecimals:c.data.decimals,buyTokenSymbol:c.data.symbol,networkIDForFees:m,networkFee:g?.gasEstimationAmount??new D(0),priceMap:w,t:e}):mg({quotes:r,buyTokenNetworkId:c.data.chain.id,buyTokenDecimals:c.data.decimals,buyTokenSymbol:c.data.symbol}):[],[c,y,r,e,m,g?.gasEstimationAmount,w]),b=K(),{transition:T}=rt(),F=(0,Xs.useCallback)(E=>{let I=A[E];b.capture("swapperProviderSelected",{data:{provider:I.name}}),s(E),T({type:"quoteSelected",quoteIndex:E})},[s,A,b,T]);return{rows:A,selectedProviderIndex:n,isLoadingProviders:o,setSelectedProviderIndex:F}}i();a();var fg=C(R());var Qo=()=>{let{resume:e}=ot(),t=h(o=>o.resetSwapper);return(0,fg.useCallback)(()=>{e(),t()},[t,e])};i();a();var ei=C(R());i();a();var yg=C(R());i();a();var gg=C(R());var Js=()=>{let e=q();return{cancelQuotes:(0,gg.useCallback)(async()=>{await e.cancelQueries({queryKey:ue.quotesScope()}),await Bc(1)},[e])}};i();a();function Zs(e){return{chain:"solana",type:"fungible",address:e.type==="SPL"?e.data.mintAddress:void 0,symbol:e.data.symbol??""}}function qp(){let e=K(),t=h(n=>n.setBuyFungible),o=h(n=>n.buyFungible),{cancelQuotes:r}=Js();return(0,yg.useCallback)(async n=>{if(o&&Lo(n,o))return;await r();let s=Zs(n);e.capture("swapperUpdateToAsset",{data:s}),t(n)},[e,o,r,t])}i();a();i();a();var kI=l.enum(["pumpFun","moonshot"]),DI=l.object({type:kI,programId:l.string(),name:l.string(),iconUrl:l.string()}),NI=l.object({programs:l.array(DI)}),Sg=e=>{try{return NI.parse(e)}catch{return}};var Gp=[],_t=()=>{try{let e=Be.getMultivariateAssignment("enabled-ugc-programs");if(!e)return Gp;let t=JSON.parse(e);return Sg(t)?.programs??Gp}catch{return Gp}};i();a();var wg=e=>{Vp.getState().setAsset(e)},Vp=Ue(e=>({asset:void 0,setAsset(t){e({asset:t})}}));var BI=({onClose:e})=>{let t=qp(),o=Vp(s=>s.asset),r=(0,ei.useMemo)(()=>_t().find(p=>p.programId===o?.data?.ugcTokenMeta?.programId),[o]),n=(0,ei.useCallback)(async()=>{o&&(await t(o),e())},[t,o,e]);return{asset:o,program:r,handleConfirmPress:n}};i();a();var UI=()=>{let{review:e}=ro();e?Do(e):ln()};i();a();i();a();var Kp=()=>{let e=q(),t=h();return{clearQuotes:async()=>{t.resetQuote(),await e.invalidateQueries({queryKey:ue.quotesScope()})}}};i();a();i();a();var _I=({networkID:e,unsignedTransaction:t,pendingActivityRows:o,accountIdentifier:r,accountSigner:n,storage:s,includeCallPayload:p})=>({accountSigner:n,accountIdentifier:r,networkID:e,unsignedTransaction:t,...p&&{callPayload:{from:t.from,to:t.to,data:t.data,value:t.value}},pendingTransactionInput:{ownerAddress:t.from,networkID:e,data:{nonce:"",unsignedTransaction:t,hash:""},type:"swap",display:{summary:o}},storage:s}),Ag=async({transactions:e,transactionTypes:t,networkID:o,gasEstimation:r,pendingApprovalActivityRows:n,pendingSwapActivityRows:s,accountIdentifier:p,accountSigner:u,storage:c})=>{let m=!0,g="";for(let[f,S]of e.entries()){let w=r[f],y={gas:`0x${w.gasLimit.toString(16)}`,maxFeePerGas:`0x${w.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${w.maxPriorityFeePerGas.toString(16)}`},A=jo.parse({...S,...y}),T=t[f].includes("approval")?n:s,F=_I({networkID:o,accountIdentifier:p,pendingActivityRows:T.shift(),accountSigner:u,storage:c,unsignedTransaction:A,includeCallPayload:m});try{g="",g=await du(F)}catch(E){return{signature:g,error:E instanceof Error?E:new Error("Failed to process EVM swap transaction")}}m&&(m=!1)}return{signature:g}};i();a();var OI=({networkID:e,transaction:t,feePayer:o,connection:r,pendingActivityRows:n,accountIdentifier:s,accountSigner:p,storage:u})=>({accountSigner:p,accountIdentifier:s,transaction:t,feePayer:o,connection:r,opts:{skipPreflight:!0},pendingTransactionInput:{ownerAddress:o.toBase58(),networkID:e,data:{signature:""},type:"swap",display:{summary:n}},storage:u}),hg=async({callerAddress:e,connection:t,networkID:o,transactions:r,pendingSwapActivityRows:n,accountIdentifier:s,accountSigner:p,storage:u})=>{let c=new qr.PublicKey(e),m="";for(let[g,f]of r.entries()){let S=Wo(f,"bs58"),w=OI({networkID:o,transaction:S,feePayer:c,connection:t,pendingActivityRows:n[g],accountIdentifier:s,accountSigner:p,storage:u});try{m="",m=await yu(w),g!==r.length-1&&await gu({connection:t,signature:m})}catch(y){return{signature:m??"",error:y instanceof Error?y:new Error("Failed to process solana swap transaction")}}}return{signature:m??""}};var $p=({accountIdentifier:e,networkID:t})=>{let o=ee(),r=Xc();return ne({mutationFn:async s=>{let{swapTransactions:p,type:u}=s;if(p.type==="evm"&&u==="eip155"){let{gasEstimation:c,pendingApprovalActivityRows:m,pendingSwapActivityRows:g}=s,{signature:f,error:S}=await O.startSpan({name:"Process EVM Swap Txns"},()=>Ag({transactions:p.transactions,transactionTypes:p.transactionTypes,networkID:t,gasEstimation:c,pendingSwapActivityRows:g,pendingApprovalActivityRows:m,accountIdentifier:e,accountSigner:r,storage:o}));return{networkID:t,chainType:u,id:f,error:S}}else if(p.type==="solana"&&u==="solana"){let{callerAddress:c,connection:m,pendingSwapActivityRows:g}=s;if(!m)throw new Error("missing connection");let{signature:f,error:S}=await O.startSpan({name:"Process Solana Swap Txns"},()=>hg({callerAddress:c,connection:m,networkID:t,transactions:p.transactions,pendingSwapActivityRows:g,accountIdentifier:e,accountSigner:r,storage:o}));return{networkID:t,chainType:u,id:f,error:S}}throw new Error("unsupported")}})};i();a();i();a();var kr=C(R());i();a();var bg=C(R());function Tg(){let e=h(r=>r.setUiBuyAmountCryptoInput),t=h(r=>r.setUiBuyAmountFiatInput),o=h(r=>r.primaryCurrency);return(0,bg.useCallback)(({amount:r,decimals:n,usdPrice:s})=>{if(o==="crypto")if(r===void 0)e("");else{let p=J(r,n).toString(),u=at(p);e(u)}else if(o==="fiat"&&s)if(r===void 0)t("");else{let p=J(r,n).toString(),u=be(Number(p),s);t(u.toString())}},[o,t,e])}i();a();var Fg=C(R());function Ig(){let e=h(u=>u.setAmountType),t=h(u=>u.setSellAmount),o=h(u=>u.sellAmount),r=h(u=>u.setUiBuyAmountCryptoInput),n=K(),[s,p]=Xo(o,t,Er);return(0,Fg.useCallback)(async({fungibleValue:u,shouldUpdateQuote:c,decimals:m})=>{let g=Kt(u.substring(0,Bo)),f=at(g,m);e("buy"),r(f),await n.capture("swapperChangeReceiveCryptoAmount",{data:{amount:f}}),c&&p(f)},[n,e,r,p])}i();a();var vg=C(R());function ti(e){return(0,vg.useMemo)(()=>e===void 0?void 0:G(e),[e])}i();a();var Tn=C(R());var Eg=()=>{let e=h(A=>A.primaryCurrency),t=h(A=>A.sellFungible),o=h(A=>A.buyFungible),r=h(A=>A.uiSellAmountFiatInput),n=h(A=>A.uiBuyAmountFiatInput),s=h(A=>A.amountType),p=h(A=>A.setUiSellAmountCryptoInput),u=h(A=>A.setUiBuyAmountCryptoInput),c=h(A=>A.switchTokensForBuy),m=h(A=>A.switchTokensForSell),{data:g}=Le({query:t?{data:G(t)}:void 0}),{data:f}=Le({query:o?{data:G(o)}:void 0}),S=(0,Tn.useMemo)(()=>({fiatValue:r,decimals:t?.data.decimals??0,usdPrice:g?.usd}),[t?.data.decimals,r,g?.usd]),w=(0,Tn.useMemo)(()=>({fiatValue:n,decimals:o?.data.decimals??0,usdPrice:f?.usd}),[o?.data.decimals,f?.usd,n]),y=({fiatValue:A,decimals:b,usdPrice:T})=>{let F=A?"":zt(0,b);return T&&A&&(F=Ze(Number(A),T,b).toString()),F};return(0,Tn.useCallback)(()=>{if(e==="fiat"){let A=y(S);p(A);let b=y(w);u(b)}s==="sell"?m():c()},[s,w,e,S,u,p,c,m])};var QI={chainId:$.Solana.Mainnet,slip44:"501",resourceType:"nativeToken"};function zp(){let e=h(I=>I.buyFungible),t=ti(e),o=h(I=>I.sellFungible),r=h(I=>I.primaryCurrency),n=h(I=>I.uiBuyAmountCryptoInput),s=h(I=>I.uiBuyAmountFiatInput),p=h(I=>I.amountType),u=h(I=>I.setAmountType),c=h(I=>I.setSellAmount),m=h(I=>I.uiSellAmountCryptoInput),g=h(I=>I.uiSellAmountFiatInput),f=e?.data.decimals??0,{currentQuote:S}=Q(),w=e?G(e):QI,{data:y}=Le({query:{data:w}}),A=Eg(),b=Tg(),T=Ig();(0,kr.useEffect)(()=>{p==="sell"&&t&&b({amount:S?.buyAmount,decimals:f,usdPrice:y?.usd})},[p,t,S?.buyAmount,f,y?.usd,b]),(0,kr.useEffect)(()=>{if(Ie(o?.data.chain.id,e?.data.chain.id)&&p==="buy"){if(u("sell"),r==="crypto")c(m);else if(y?.usd){let I=Ze(g,y.usd,f);c(I.toString())}}},[p,e,f,y,r,o,u,c,m,g]);let F=(0,kr.useCallback)(I=>{T({fungibleValue:I,decimals:f,shouldUpdateQuote:!0})},[f,T]),E=(0,kr.useCallback)(()=>{A()},[A]);return{cryptoAmountInputValue:n,handleCryptoAmountInputChange:F,fiatAmountInputValue:s,handleSwitchTokensClick:E}}i();a();var it=C(R());i();a();var qI=3,GI=new D(356190),VI=e=>we.get(e).averageNetworkFee.times(qI);function oi({sellFungible:e,totalFees:t,transactionSpeedsToUnitCost:o,minRequiredBalance:r,isBridge:n=!1}){let{decimals:s,amount:p,chain:u}=e.data,c=new D(p),m=De(e.type),{source:g,destination:f}=r,w=KI({isNativeToken:m,network:u,totalFees:t,isBridge:n,transactionSpeedsToUnitCost:o}).plus(f),y=m?HI(c,w,g):c.toString();return qc(y,s)}function KI({isNativeToken:e,network:t,totalFees:o,isBridge:r,transactionSpeedsToUnitCost:n}){if(!e)return o;let s=we.get(t.id),p=r?s.bridgeDefaultFee:s.swapDefaultFee,u=n?.standard;return pu(u)&&(p=GI.multipliedBy(u.maxFeePerGas.plus(u.maxPriorityFeePerGas))),p.plus(VI(t.id))}function HI(e,t,o){let r=o.plus(t);return e.gt(r)?e.minus(r).toString():e.toString()}i();a();var xg=C(R());function Cg(){let e=h(c=>c.primaryCurrency),t=h(c=>c.setUiSellAmountFiatInput),o=h(c=>c.setUiBuyAmountFiatInput),r=h(c=>c.setAmountType),n=h(c=>c.setPrimaryCurrency),s=h(c=>c.setUiSellAmountCryptoInput),p=h(c=>c.setSellAmount),u=h(c=>c.setUiBuyAmountCryptoInput);return(0,xg.useCallback)(({buyAmountFromQuote:c,buyFungibleDecimals:m,buyFungibleUsdPrice:g,sellAmountFromQuote:f,sellFungibleUsdPrice:S})=>{if(e==="crypto"){if(r("sell"),S&&f){let w=be(Number(f),S);t(w.toString()),p(f.toString())}if(g&&c){let w=J(c,m).toString(),y=be(Number(w),g);o(y.toString())}n("fiat")}if(e==="fiat"){if(f&&s(f),g&&c){let w=J(c,m).toString();u(w)}n("crypto")}},[e,p,r,u,o,n,s,t])}i();a();var Rg=C(R());function Pg(){let e=h(r=>r.primaryCurrency),t=h(r=>r.setUiSellAmountCryptoInput),o=h(r=>r.setUiSellAmountFiatInput);return(0,Rg.useCallback)(({amount:r,decimals:n,usdPrice:s})=>{if(e==="crypto")if(r===void 0)t("0");else{let p=J(r,n).toString();t(p)}else if(e==="fiat"&&s)if(r===void 0)o("0");else{let p=J(r,n).toString(),u=be(Number(p),s);o(u.toString())}},[e,t,o])}i();a();var kg=C(R());function Dg(){let e=h(p=>p.setAmountType),t=h(p=>p.setUiSellAmountCryptoInput),o=h(p=>p.setSellAmount),r=h(p=>p.sellAmount),[n,s]=Xo(r,o,Er);return(0,kg.useCallback)(({fungibleValue:p,decimals:u,shouldUpdateQuote:c})=>{let m=Kt(p.substring(0,Bo)),g=at(m,u);e("sell"),t(g),c&&s(g)},[e,t,s])}i();a();var Ng=C(R());function Bg(){let e=h(p=>p.setAmountType),t=h(p=>p.setSellAmount),o=h(p=>p.sellAmount),r=h(p=>p.setUiSellAmountFiatInput),[n,s]=Xo(o,t,Er);return(0,Ng.useCallback)(({fiatValue:p,shouldUpdateQuote:u,decimals:c,priceData:m})=>{let g=Kt(p.substring(0,Bo)),f=at(g,2);if(e("sell"),r(f),u&&m?.usd){let S=Ze(f,m.usd,c);s(S.toString())}},[e,r,s])}i();a();var jg=C(R());i();a();var Ug=C(R());var $I={"Allbridge's fee":"destinationNetwork","Allbridge Liquidity Fee":"liquidityProvider"},Lg=()=>{let{currentQuote:e}=Q(),{destinationNetworkFee:t,liquidityFee:o}=(0,Ug.useMemo)(()=>{function r(s){return s?{amount:new Z(s.amount??0),uiAmount:`$${s.amountUSD??""}`,pct:parseFloat(s.percentage??"0")}:ao}let n=new Map([]);return e&&ce(e)&&(n=e.steps.flatMap(s=>s.includedFeeCosts).reduce((s,p)=>{if(!p)return s;let u=$I[p.name];return u&&s.set(u,p),s},n)),{destinationNetworkFee:r(n.get("destinationNetwork")),liquidityFee:r(n.get("liquidityProvider"))}},[e]);return{destinationNetworkFee:t,liquidityFee:o}};i();a();var _g=C(R());var zI={calculate({currentQuote:e,gasEstimationPriceData:t}){return{amount:(e&&t?.gasEstimationAmount)??new Z(0),uiAmount:(e&&t?.gasEstimationPriceUSD)??"",pct:0}}},jI={calculate({currentQuote:e,gasEstimationPriceData:t,maxGasEstimationPriceData:o}){return{amount:(e&&t?.gasEstimationAmount)??new Z(0),uiAmount:(e&&t?.gasEstimationPriceUSD)??"",maxAmount:(e&&o?.gasEstimationAmount)??new Z(0),maxUiAmount:(e&&o?.gasEstimationPriceUSD)??"",pct:0}}},Og=()=>{let{currentQuote:e}=Q(),t=h(m=>m.sellFungible),o=h(m=>m.gasEstimation),r=h(m=>m.maxGasEstimation),n=t?.data.chain.id??$.Solana.Mainnet,{data:s,isFetching:p}=Kr(n,bn(o)),{data:u}=Kr(n,bn(r));return{networkFee:(0,_g.useMemo)(()=>v.isEVMNetworkID(n)?jI.calculate({currentQuote:e,gasEstimationPriceData:s,maxGasEstimationPriceData:u}):zI.calculate({currentQuote:e,gasEstimationPriceData:s}),[e,s,u,n]),isFetchingGasEstimationPrice:p}};i();a();var Mg=C(R());var WI={calculate(){return ao}},YI={calculate({currentQuote:e,networkID:t,priceMap:o}){let r=Pr(e);return{amount:r,uiAmount:Lt(t,r,o),pct:0}}},Qg=({priceMap:e})=>{let{currentQuote:t}=Q(),r=h(s=>s.sellFungible)?.data.chain.id??$.Solana.Mainnet;return{nonIncludedFees:(0,Mg.useMemo)(()=>t&&ce(t)?YI.calculate({currentQuote:t,networkID:r,priceMap:e}):WI.calculate(),[r,t,e])}};i();a();var qg=C(R());var XI={calculate(e){let t=(e?.fees??[]).find(o=>o.type==="phantom");return{amount:new Z(t?.amount??0),uiAmount:"",pct:t?.percentage??0}}},JI={calculate(e){let t=e.steps.flatMap(o=>o.feeCosts).find(o=>o.name==="phantom");return{amount:new Z(t?.amount??0),uiAmount:"",pct:parseFloat(t?.percentage??"0")}}},Gg=()=>{let{currentQuote:e}=Q();return{phantomFee:(0,qg.useMemo)(()=>no(e)?XI.calculate(e):ce(e)?JI.calculate(e):ao,[e])}};i();a();var Vg=C(R());var ZI={calculate({currentQuote:e,networkID:t,priceMap:o}){let r=(e?.fees??[]).find(n=>n.name==="Token account deposits");return{amount:new Z(r?.amount??0),uiAmount:r?.amount?Lt(t,new Z(r.amount),o):"",pct:r?.percentage??0}}},ev={calculate(){return ao}},Kg=({priceMap:e})=>{let{currentQuote:t}=Q(),r=h(s=>s.sellFungible)?.data.chain.id??$.Solana.Mainnet;return{tokenAccountFee:(0,Vg.useMemo)(()=>no(t)?ZI.calculate({currentQuote:t,networkID:r,priceMap:e}):ev.calculate(),[t,r,e])}};i();a();var Hg=C(R());var $g={calculate:({tokenAccountFee:e,networkFee:t,nonIncludedFees:o,networkID:r,priceMap:n})=>{let s=e.amount.plus(t.amount).plus(o.amount);return{amount:s,uiAmount:Lt(r,s,n),pct:0}}},tv={calculate:({tokenAccountFee:e,networkFee:t,nonIncludedFees:o,networkID:r,priceMap:n})=>{let s=$g.calculate({tokenAccountFee:e,networkFee:t,nonIncludedFees:o,networkID:r,priceMap:n}),p=e.amount.plus(t.maxAmount??0).plus(o.amount);return{...s,maxAmount:p,maxUiAmount:Lt(r,p,n)}}},zg=({tokenAccountFee:e,networkFee:t,nonIncludedFees:o,priceMap:r})=>{let s=h(u=>u.sellFungible)?.data.chain.id??$.Solana.Mainnet;return{totalFees:(0,Hg.useMemo)(()=>v.isEVMNetworkID(s)?tv.calculate({tokenAccountFee:e,networkFee:t,nonIncludedFees:o,networkID:s,priceMap:r}):$g.calculate({tokenAccountFee:e,networkFee:t,nonIncludedFees:o,networkID:s,priceMap:r}),[t,s,o,r,e])}};var st=()=>{let e=h(S=>S.isFetchingGasEstimation),t=po(),{data:o={}}=ut({query:{data:t.map(S=>Ke(S))}}),{networkFee:r,isFetchingGasEstimationPrice:n}=Og(),s=e||n,{phantomFee:p}=Gg(),{tokenAccountFee:u}=Kg({priceMap:o}),{nonIncludedFees:c}=Qg({priceMap:o}),{totalFees:m}=zg({tokenAccountFee:u,networkFee:r,nonIncludedFees:c,priceMap:o}),{destinationNetworkFee:g,liquidityFee:f}=Lg();return(0,jg.useMemo)(()=>({phantomFee:p,networkFee:r,tokenAccountFee:u,totalFees:m,nonIncludedFees:c,destinationNetworkFee:g,liquidityFee:f,isFetchingFees:s}),[p,r,u,m,c,g,f,s])};i();a();var ov=20;function Wg(e,t){let o=ue.optimisticUpdates(),r=e.getQueryData(o)??[];e.setQueryData(o,[...r.filter(n=>n.id!==t.id),t])}function Yg(e,t){let o=ue.optimisticUpdates(),r=e.getQueryState(o);if(r){let n=t??Date.now(),s=r.dataUpdatedAt,p=U({seconds:ov});return n-s>p?(e.removeQueries({queryKey:o}),[]):r?.data??[]}else return[]}function ri(e){return`${e.type}-${e.data.key}`}i();a();var jp=C(R());var rv=.05,nv=({sellNetworkId:e,buyNetworkId:t,destinationMinRequiredBalance:o,priceMap:r})=>{if(!e||!t||!r)return new Z(0);let n=se(Ke(v.getChainID(e))),s=se(Ke(v.getChainID(t))),p=r[n]?.usd,u=r[s]?.usd;if(!p||!u)return new Z(0);let c=J(o.toNumber(),v.getTokenDecimals(t)),m=be(c.toNumber(),u),g=Ze(m,p,v.getTokenDecimals(e));return new Z(g).times(1+rv)},Dr=()=>{let e=js(),t=lo(),o=h(A=>A.sellFungible)??t,r=h(A=>A.buyFungible)??e,n=o.data.chain.id,s=r?.data.chain.id,p=s??n,u=Ie(n,s),{fungible:c}=lt({key:r?.data.key}),{data:m}=oe(),g=(0,jp.useMemo)(()=>m?.addresses.find(A=>A.networkID===p),[m,p]),S=po().map(A=>Ke(A)),{data:w}=ut({query:{data:S},queryOptions:{refetchInterval:!1}}),{data:y=0}=_n(g);return(0,jp.useMemo)(()=>{if(c)return new Z(0);let A=new Z(y);return u?nv({sellNetworkId:n,buyNetworkId:s,destinationMinRequiredBalance:A,priceMap:w}):A},[c,y,u,n,s,w])};i();a();var Wp=C(R());var Nr=()=>{let e=lo(),o=(h(p=>p.sellFungible)??e).data.chain.id,{data:r}=oe(),n=(0,Wp.useMemo)(()=>r?.addresses.find(p=>p.networkID===o),[r,o]),{data:s=0}=_n(n);return(0,Wp.useMemo)(()=>new Z(s),[s])};function Yp(){let e=q(),t=lo(),o=h(te=>te.sellFungible)??t,r=h(te=>te.buyFungible),n=h(te=>te.primaryCurrency),s=h(te=>te.isFetchingQuote),p=h(te=>te.sellAmount),u=h(te=>te.uiSellAmountCryptoInput),c=h(te=>te.setSellFungible),m=h(te=>te.uiSellAmountFiatInput),g=h(te=>te.amountType),f=h(te=>te.setSwapFilter),S=ti(o),w=o?.data.key,{fungible:y}=lt({key:w}),A=o?.data.chain.id,b=r?.data.chain.id,{totalFees:T}=st(),{data:F}=On({networkID:A}),E=Ie(A,b),I=Nr(),x=Dr(),k=o?.data.amount,P=o?o.data.decimals:0,z=(0,it.useMemo)(()=>oi({sellFungible:o,totalFees:T.amount,transactionSpeedsToUnitCost:v.isEVMNetworkID(o.data.chain.id)?F:void 0,isBridge:E,minRequiredBalance:{source:I,destination:x}}),[o,T.amount,F,E,x,I]),j=(0,it.useMemo)(()=>g==="buy"?new Z(u).isLessThanOrEqualTo(new Z(z)):p===""?!0:new Z(p).isLessThanOrEqualTo(new Z(z)),[g,z,p,u]),{currentQuote:L}=Q(),{data:Y}=Le({query:{data:G(o)}}),W=Y?.usd,{data:Se}=Le({query:r?{data:G(r)}:void 0}),V=Cg(),X=Dg(),_=Bg(),ke=Pg(),ie=(0,it.useCallback)(()=>{let te=L?.sellAmount?J(L?.sellAmount,P).toString():p,Ge=L?.buyAmount,Oe=r?.data.decimals??0,zo=Se?.usd;V({buyAmountFromQuote:Ge,buyFungibleDecimals:Oe,buyFungibleUsdPrice:zo,sellAmountFromQuote:te,sellFungibleUsdPrice:W})},[L?.sellAmount,L?.buyAmount,P,p,r?.data.decimals,Se?.usd,V,W]),le=(0,it.useCallback)(te=>{X({fungibleValue:te,decimals:P,shouldUpdateQuote:!0})},[P,X]),H=(0,it.useCallback)(te=>{_({priceData:Y,fiatValue:te,decimals:P,shouldUpdateQuote:!0})},[P,Y,_]),qt=(0,it.useCallback)(te=>{f(te);let Ge=Z(z).multipliedBy(te);if(n==="crypto")X({fungibleValue:Ge.toString(),decimals:P,shouldUpdateQuote:!0});else if(W){let Oe=be(Number(Ge),W);_({priceData:Y,fiatValue:Oe.toString(),decimals:P,shouldUpdateQuote:!0})}},[f,z,n,W,X,P,_,Y]);(0,it.useEffect)(()=>{let te=Yg(e);if(y){let Ge={...y},Oe=te.find(zo=>zo.id===ri(y));Oe&&y.data.amount!==Oe.amount&&(Ge.data={...Ge.data,amount:Oe.amount}),Ge.data.amount!==k&&c(Ge)}},[y,k,c,e]),(0,it.useEffect)(()=>{g==="buy"&&S&&ke({amount:L?.sellAmount,decimals:P,usdPrice:W})},[g,L?.sellAmount,P,Y?.usd,S,W,ke]);let En=Ws();return{maxSellAmount:z,sellFungible:o,notEnoughAssets:!j,uiSellAmountCryptoInput:u,uiSellAmountFiatInput:m,hasMinimumSellAmount:En,isFetchingQuote:s,handleToggleCurrencyClick:ie,handleFiatAmountInputChange:H,handleCryptoAmountInputChange:le,handleSwapFilterClick:qt}}i();a();var Xe=C(R());i();a();var sv=50,Xg=({includeOwnedAssets:e,sellAsset:t,ownedAssets:o,searchAssets:r})=>{if(!e||!t)return r;let n=f=>se(G(f)),s=n(t),p=t.data.chain.id,u=o.filter(f=>n(f)!==s&&v.compareNetworkID(p,f.data.chain.id)===0).slice(0,sv-1),c=u.map(f=>[n(f),f]),m=new Map(c),g=r.filter(f=>!m.has(n(f)));return[...u,...g]};function iv({enableQuery:e=!0}={}){let{sellFungible:t,searchQuery:o,setSearchQuery:r,setNumSearchResults:n}=h(),s=_c(o,150),{fungibles:p,isLoadingTokens:u,isRefetchingTokens:c,tokensError:m}=bt(),g=Ut(),[f,S]=(0,Xe.useState)(""),{data:w}=oe(),y=(0,Xe.useMemo)(()=>w?.addresses??[],[w]),{data:A,isSuccess:b,isFetching:T,error:F}=Co({query:s,networkIds:[t?.data.chain.id??v.solana.mainnetID],enableQuery:e,keepPreviousData:!0,searchContext:"swapper",supportedNetworkIds:g,chainAddresses:y}),E=!b&&T,I=(0,Xe.useMemo)(()=>p.map(L=>[se(G(L)),L]),[p]),x=(0,Xe.useMemo)(()=>{let L=Dc(I.map(([W])=>W).join("~")),Y=Nc(L);return kc(Y)},[I]),k=(0,Xe.useMemo)(()=>new Map(I),[x]),P=(0,Xe.useMemo)(()=>{if(!A||A.length===0)return[];S(Ec());let L=A.reduce((Y,W)=>{let Se="";if(De(W.type)){if(t&&De(t.type)&&W.data.chain.id===t.data.chain.id)return Y;Se=se(Ke(v.getChainID(W.data.chain.id)))}else{if(t&&W.data.tokenAddress===t.data.tokenAddress)return Y;Se=se(G(W))}let V,X=k.get(Se);return X&&X.data.balance?V=X:V=W,V&&Y.push(V),Y},[]);return n(L.length),L},[k,A,t,n]),z=K();(0,Xe.useEffect)(()=>{b&&P.length===0&&z.capture("swapperNullSearchResult",{data:{searchQuery:s}})},[b,P,s,z]);let j=(0,Xe.useMemo)(()=>Xg({includeOwnedAssets:!s,sellAsset:t,ownedAssets:p,searchAssets:P}),[s,p,P,t]);return(0,Xe.useMemo)(()=>({assets:j,initialFilterKey:t?.data.chain.id,isLoading:u||E,isFetching:u||E||c,error:m??F,searchRef:f,setSearchQuery:r}),[j,u,E,c,m,F,t,f,r])}i();a();var ve=C(R()),Zg=C(Qp());i();a();var ni="https://help.phantom.app/hc/en-us/articles/27085326202515";var qo=[.3,.5,1],av=qo.map(e=>`${e}%`),ey=[...av,"custom"],ty=ey.length-1,pv=5,cv=2,Xp=.1,Jp=30,uv=1,Jg=(e,t)=>{if(!e)return;let o=parseFloat(e);if(isNaN(o))return{message:t("swapSlippageSettingsCustomInvalidValue"),severity:"critical"};if(o>Jp)return{message:t("swapSlippageSettingsCustomMaxError",{maxSlippage:Jp}),severity:"critical"};if(o>uv)return{message:t("swapSlippageSettingsHighSlippageWarning"),severity:"warning"};if(o<Xp)return{message:t("swapSlippageSettingsCustomMinError",{minSlippage:Xp}),severity:"critical"}},lv=e=>e&&qo.indexOf(e)!==-1?qo.indexOf(e):e?ty:0,mv=e=>e&&qo.indexOf(e)===-1?`${e}`:"",dv=({onDismiss:e})=>{let{t}=Ht(),o=K(),{data:r,isFetched:n}=Oo(),{mutateAsync:s}=Ys(),{selectedSetting:p,isFetched:u,setSlippageSetting:c}=Pe(),[m,g]=(0,ve.useState)(p.type),f=(0,Zg.default)(u),[S,w]=(0,ve.useState)(!1),[y,A]=(0,ve.useState)(0),[b,T]=(0,ve.useState)(),[F,E]=(0,ve.useState)(""),[I,x]=(0,ve.useState)(),k=m==="auto",P=y===ty,z=k?!1:I?.severity==="critical"||P&&!F;(0,ve.useEffect)(()=>{f!==u&&m!==p.type&&g(p.type)},[f,u,p.type,m]);let j=(0,ve.useCallback)(X=>{y!==X&&(x(void 0),A(X),qo[X]?(T(qo[X]),E("")):T(void 0))},[y]),L=(0,ve.useCallback)(X=>{let _=Kt(X.substring(0,pv)),ke=at(_,cv),ie=parseFloat(ke);if(isNaN(ie)){x(void 0),E("");return}E(ke),x(Jg(ke,t))},[t]),Y=(0,ve.useCallback)(()=>{if(k)o.capture("slippageChanged",{data:{slippageType:"auto"}});else if(P){let X=parseFloat(F??"");s(X),o.capture("slippageChanged",{data:{slippageValue:X,slippageType:"custom"}}),T(void 0)}else b&&(s(b),o.capture("slippageChanged",{data:{slippageValue:b,slippageType:"preset"}}),E(""));c({type:m}),e()},[k,c,m,e,P,b,F,s,o]),W=(0,ve.useCallback)(()=>{let X=lv(r),_=mv(r);A(X),T(qo[X]),E(_),x(Jg(_,t)),g(p.type)},[r,t,p.type]),Se=(0,ve.useCallback)(()=>{g(m==="auto"?"fixed":"auto")},[m,g]),V=(0,ve.useMemo)(()=>({title:t("swapSlippageSettingsTitle"),subtitle:t("swapSlippageSettingsSubtitle",{minSlippage:Xp,maxSlippage:Jp}),custom:t("swapSlippageSettingsCustom"),auto:t("swapSlippageSettingsAuto"),autoSubtitle:t("swapSlippageSettingsAutoSubtitle"),learnMore:t("commandLearnMore"),button:t("commandConfirm")}),[t]);return(0,ve.useEffect)(()=>{!S&&n&&(W(),w(!0))},[n,S,W]),{options:ey,selectedIndex:y,customSlippageValue:F,i18nStrings:V,error:I,submitDisabled:z,isAutoEnabled:k,autoLearnMoreUrl:ni,onConfirm:Y,onDismiss:e,onSelectOption:j,onChangeCustomSlippage:L,onResetToDefault:W,onToggleAutoSlippage:Se}};i();a();var Go=C(R());i();a();i();a();var oy=()=>[{chainId:"solana:101",address:"2b1kV6DkPAnxd5ixfnxCpjxmKwqjjaYmCZfHsFu24GXo",resourceType:"address"}];var ry=e=>{let t=[];return gv(e)&&!yv(e)&&t.push({level:"warn",titleKey:"swapAssetWarningPermanentDelegate"}),(e.data.spamStatus==="NOT_VERIFIED"||e.data.spamStatus==="SPAM"||e.data.spamStatus==="POSSIBLE_SPAM")&&t.push({level:"info",titleKey:"swapAssetWarningUnverified"}),t};function gv(e){let t=e.data;return t?.mintExtensions?t.mintExtensions.some(o=>o.extension==="permanentDelegate"):!1}function yv(e){let t=G(e),o=oy();return t.resourceType==="address"?o.some(r=>r.resourceType===t.resourceType&&r.address===t.address&&r.chainId===t.chainId):!1}i();a();var sy=C(R());i();a();function ny(){return[new ec,new Zp]}var Zp=class{isEditable(t,o){return!Ie(t?.data.chain.id,o?.data.chain.id)}},ec=class{isEditable(){return Be.isFeatureEnabled("enable-swapper-exact-out")}};var tc=(e,t)=>{let o=(0,sy.useMemo)(()=>ny(),[]);return t?o.every(r=>r.isEditable(e,t)):!1};i();a();var ay=C(R());i();a();var oc=class{isSupported(t,o,r,n,s){switch(t){case"sell":return!!(r&&s);case"buy":return!1}}},rc=class{isSupported(t){return t!=="buy"}};function iy(){return[new oc,new rc]}var si=(e,t,o,r,n)=>(0,ay.useMemo)(()=>iy(),[]).every(p=>p.isSupported(e,t,o,r,n));i();a();var nc=class{format(t,o){return`${zt(t)} ${o}`}},sc=class{format(t,o){return`${kn(t,{compact:!0})} ${o}`}},ic=class{format(t){return kn(t,{compact:!0})}};function cc(e){switch(e){case"full":return new nc;case"compact":return new sc;case"compactNoSymbol":return new ic}}var ac=class{format(t,o,r,n){switch(o){case"crypto":return yo(be(Number(t),n));case"fiat":return`${zt(Ze(Number(t),n,r.data?.decimals??0))} ${r.data.symbol??""}`}}},ii=class{format(t,o,r,n){switch(o){case"crypto":return yo(be(Number(t),n),{compact:!0});case"fiat":return kn(Ze(Number(t),n,r.data?.decimals??0),{compact:!0})}}},pc=class{constructor(t){this.noSymbolDisplayStrategy=t}format(t,o,r,n){let s=this.noSymbolDisplayStrategy.format(t,o,r,n);switch(o){case"crypto":return s;case"fiat":return`${s} ${r.data?.symbol??""}`}}};function uc(e){switch(e){case"full":return new ac;case"compact":return new pc(new ii);case"compactNoSymbol":return new ii}}var Sv=Gt?[.25,.5,1]:[.5,1],py=Gt?cc("full"):cc("compactNoSymbol"),cy=Gt?uc("full"):uc("compact"),wv={chainId:$.Solana.Mainnet,slip44:"501",resourceType:"nativeToken"},Av=()=>{let t=h(le=>le.amountType)==="sell"?"sell":"buy",o=h(le=>le.primaryCurrency),r=o==="fiat"?"$":void 0,n=h(le=>le.swapFilter),s=h(le=>le.setSwapFilter),p=Zc(),{handleCryptoAmountInputChange:u,handleFiatAmountInputChange:c,sellFungible:m,uiSellAmountCryptoInput:g,isFetchingQuote:f,notEnoughAssets:S,hasMinimumSellAmount:w,handleToggleCurrencyClick:y,uiSellAmountFiatInput:A,handleSwapFilterClick:b,maxSellAmount:T}=Yp(),F=h(le=>le.buyFungible),E=F?G(F):wv,I=my(E),x=my(G(m)),k=si("sell",m,x,F,I),P=(0,Go.useMemo)(()=>({fungible:m,amount:o==="crypto"?g:A,secondaryAmount:uy(o==="crypto"?g:A,m,o,cy,x),balance:ly(m,py,p,T),isAmountLoading:f&&t!=="sell",isSecondaryAmountLoading:f,isWarning:S||!w,isAmountEditable:!0,supportsCurrencyDenominationSwitching:k,amountPrefix:r,filters:Sv,selectedFilter:n,warnings:[]}),[m,o,g,A,x,p,T,f,t,S,w,k,r,n]),{handleSwitchTokensClick:z,cryptoAmountInputValue:j,fiatAmountInputValue:L,handleCryptoAmountInputChange:Y}=zp(),W=si("buy",m,x,F,I),Se=tc(m,F),V=(0,Go.useMemo)(()=>{if(F)return{fungible:F,perspective:"buy",balance:ly(F,py,p),amount:o==="crypto"?j:L,secondaryAmount:uy(o==="crypto"?j:L,F,o,cy,I),isAmountLoading:f&&t!=="buy",isSecondaryAmountLoading:f,isWarning:!1,isAmountEditable:Se,supportsCurrencyDenominationSwitching:W,amountPrefix:r,filters:[],selectedFilter:void 0,warnings:ry(F)}},[F,p,o,j,L,I,f,t,Se,W,r]),X=(0,Go.useCallback)((le,H)=>{switch(s(void 0),le){case"sell":o==="crypto"?u(H):c(H);break;case"buy":if(o==="fiat")return;Y(H);break}},[s,o,u,c,Y]),_=K(),ke=(0,Go.useCallback)(async()=>{t==="sell"&&(y(),await _.capture("swapperToggleQuoteCurrency",{data:{value:o==="fiat"?"native":"fiat"}}))},[t,_,o,y]),ie=(0,Go.useCallback)((le,H)=>{H==="sell"&&b(le)},[b]);return{switchPerspective:z,sell:P,buy:V,setAmount:X,switchCurrencyDenomination:ke,setFilter:ie,currencyDenomination:o}};function uy(e,t,o,r,n){let s=t.data?.symbol??"",p=Number(e);switch(o){case"crypto":if(!n||p===0)return;break;case"fiat":if(!n)return`0 ${s}`;break}return r.format(p,o,t,n)}function ly(e,t,o,r){let n=r?Z(r):e.data?.balance;if(!(!n||o))return t.format(n,e.data?.symbol??"")}var my=e=>{let{data:t}=Le({query:{data:e}});return t?.usd};i();a();var hv=["lastSubmittedPairs","slippageTolerance"],lc=e=>{let t=String(e.queryKey[1]);return hv.includes(t)};i();a();var dy=C(R());function mc(e){let{t}=Ht();return(0,dy.useMemo)(()=>{let{networkFee:o,phantomFee:r,tokenAccountFee:n,nonIncludedFees:s,destinationNetworkFee:p,liquidityFee:u}=e;return{networkFee:{label:t("swapQuoteNetwork"),value:o.uiAmount,maxValue:o.maxUiAmount},bridgeFee:{label:t("swapQuoteBridgeFee"),value:s.uiAmount,maxValue:s.maxUiAmount},tokenAccountFee:{label:t("swapQuoteOneTimeTokenAccount"),value:n.uiAmount},phantomFeePercent:{label:r.pct?t("swapQuoteFeeDisclaimer",{feePercentage:Mc(r.pct)}):"",value:r.pct?`${r.pct}`:""},destinationNetworkFee:{label:t("swapQuoteDestinationNetwork"),value:p.uiAmount},liquidityProviderFee:{label:t("swapQuoteLiquidityProvider"),value:u.uiAmount}}},[e,t])}i();a();var fy=C(R());function bv(){let e=K(),t=h(f=>f.buyFungible),o=h(f=>f.sellFungible),r=h(f=>f.setBuyFungible),n=h(f=>f.setSellFungible),s=h(f=>f.setSellAmount),p=h(f=>f.setUiSellAmountCryptoInput),u=h(f=>f.resetQuote),c=h(f=>f.setSwapFilter),m=o?.data.amount,{cancelQuotes:g}=Js();return(0,fy.useCallback)(async f=>{if(o&&Lo(f,o)){f&&f.data.amount!==m&&(n(f),c(void 0));return}await g();let S=Zs(f);e.capture("swapperUpdateFromAsset",{data:S}),n(f),c(void 0),t&&o&&Lo(f,t)&&r(o),f&&o?.data.chain.id!==f.data.chain.id&&(u(),r(void 0),s(""),p(""))},[e,t,g,m,u,o,r,s,n,c,p])}i();a();var by=C(R());i();a();var mo=C(R());i();a();i();a();i();a();var ai=class{sections(t){let o=_t().map(s=>s.programId),r=t.reduce((s,p)=>{if(p.data.spamStatus==="VERIFIED")return s.verified.push(p),s;if(p.type!=="SPL"||!p.data.ugcTokenMeta||p.data.ugcTokenMeta.status==="graduated"||!o.includes(p.data.ugcTokenMeta.programId))return s.unverified.push(p),s;let u=p.data.ugcTokenMeta.programId,c=s[u]??[];return c.push(p),s[u]=c,s},{verified:[],unverified:[]}),n=_t().map(s=>{let p=r[s.programId]??[];return{id:s.programId,header:{title:B.t("swapSectionTitleTokens",{section:s.name}),iconUrl:s.iconUrl},data:p,behavior:"collapsible"}});return[{id:"verified",data:r.verified,behavior:"static"},{id:"unverified",header:{title:B.t("swapUnverifiedTokens")},data:r.unverified,behavior:"collapsible"},...n]}};i();a();var pi=class{sections(t){let o=t.filter(n=>n.data.spamStatus==="VERIFIED"),r=t.filter(n=>n.data.spamStatus!=="VERIFIED");return[{id:"verified",data:o,behavior:"static"},{id:"unverified",header:{title:B.t("swapUnverifiedTokens")},data:r,behavior:"static"}]}};function yy(e){return e?new ai:new pi}i();a();var wy=C(R());i();a();var ci=C(R());var Sy=()=>{let{data:e}=nt({key:"lastSelectedTokens",queryKey:ue.lastSelectedTokens()}),t=(0,ci.useMemo)(()=>e?JSON.parse(e):{},[e]),{mutateAsync:o}=St({key:"lastSelectedTokens",queryKey:ue.lastSelectedTokens()}),r=(0,ci.useCallback)(async n=>{let s={...t,[n]:!0};await o(JSON.stringify(s))},[t,o]);return{lastSelectedTokens:t,storeSelectedToken:r}};i();a();var ui=class{constructor(t,o){this.lastSelectedTokens=t;this.storeSelectedToken=o}intercept(t){let o=se(G(t));return this.lastSelectedTokens[o]||this.storeSelectedToken(o),"continue"}};i();a();i();a();var li=class{constructor(t){this.lastSelectedTokens=t}intercept(t,o){switch(t.type){case"SPL":{let r=se(G(t)),n=this.lastSelectedTokens[r];return t.data.ugcTokenMeta?.status==="preDeploy"&&!n?(wg(t),o("ugcWarning"),"interrupt"):"continue"}default:return"continue"}}};function Iv({enableUgcSwaps:e,lastSelectedTokens:t,storeSelectedToken:o}){let r=[];return e&&r.push(new ui(t,o),new li(t)),r}function Ay(e){let{lastSelectedTokens:t,storeSelectedToken:o}=Sy();return(0,wy.useMemo)(()=>Iv({enableUgcSwaps:e,lastSelectedTokens:t,storeSelectedToken:o}),[e,t,o])}var hy=(0,mo.createContext)(void 0),vv=({children:e})=>{let{data:[t]}=pe(["enable-ugc-swaps"]),o=(0,mo.useMemo)(()=>yy(t),[t]),r=Ay(t);return mo.default.createElement(hy.Provider,{value:{buyAssetSectionAdapter:o,interceptors:r}},e)},Fn=()=>{let e=(0,mo.useContext)(hy);if(!e)throw new Error("useSwapAssetSelect must be used within a SwapAssetSelectProvider");return e};var Ev=()=>{let{interceptors:e}=Fn();return{executeInterceptors:(0,by.useCallback)((o,r)=>{for(let n of e)if(n.intercept(o,r)==="interrupt")return"interrupt";return"continue"},[e])}};i();a();var Vo=C(R());var Ty=3;function dc(e){return{id:e.id,data:e.data,...e.header?{header:e.header}:{}}}var xv=e=>{let[t,o]=(0,Vo.useState)({}),r=(0,Vo.useCallback)((p,u)=>o(c=>({...c,[p]:u})),[]),{buyAssetSectionAdapter:n}=Fn(),s=(0,Vo.useMemo)(()=>n.sections(e),[n,e]);return(0,Vo.useMemo)(()=>s.map(p=>{switch(p.behavior){case"static":return dc(p);case"collapsible":{if(p.data.length<=Ty)return dc(p);let u=t[p.id],c=u?p.data:p.data.slice(0,Ty),m=()=>r(p.id,!u),g=dc(p);return{...g,header:{...g.header,button:{label:u?B.t("commandShowLess"):B.t("commandShowMore"),onClick:m}},data:c}}}}),[s,t,r])};i();a();var Cv=()=>{let e=ee(),t=q();return ne({mutationFn:async r=>{await Nu(e,r),t.setQueryData(["termsHaveBeenAcknowledged2"],r)}})};i();a();i();a();var Fy=async e=>!!await e.get("termsHaveBeenAcknowledged2");var fc=()=>{let e=ee(),t=async()=>!!await Fy(e);return N({queryKey:["termsHaveBeenAcknowledged2"],queryFn:t})};i();a();i();a();var Dv=C(R());i();a();var Iy=Jo(K,e=>new gc(e)),gc=class{constructor(t){this.onOpen=()=>this.#e.capture("connectHardwareOpen");this.onSelectedChains=t=>{let o=new Set(t),r=[];for(let s of v.getAllChainIDs())o.has(s)&&r.push(s);let n={numChains:r.length,selectedChains:r.map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(", ")};this.#e.capture("connectHardwareSelectedChains",{data:n})};this.onDerivedAccounts=t=>{let o={};for(let[r,n]of Object.entries(t.derivedAddresses)){if(!Rv(r))continue;let s={numberOfDerivedAccounts:n.addresses.length};n.duration!==void 0&&(s.derivationDuration=n.duration),o[r]=s}this.#e.capture("connectHardwareAccountsDerived",{data:{...o}})};this.onDiscoveredAccounts=t=>{let{discoveredAccounts:o}=t,r={};for(let n of o){if(n.status==="undiscovered")continue;let s=n.accounts.reduce((p,{derivationPathType:u,hasAccountActivity:c})=>{let m=So.getAddressType(u);return p[m]={derivationPathType:u,hasAccountActivity:c},p},{});for(let{hasAccountActivity:p,derivationPathType:u}of Object.values(s)){if(!p)continue;let c=r[u]??0;r[u]=c+1}}this.#e.capture("connectHardwareAccountsDiscovered",{data:{numberOfActiveAccounts:r}})};this.onConnectedAccounts=t=>{let o={};for(let r of t.accounts){let n=[...r.addresses,...r.publicKeys].reduce((s,p)=>{let u=So.getAddressType(p.pathType);return s[u]=p.pathType,s},{});for(let s of Object.values(n)){let p=o[s]??0;o[s]=p+1}}this.#e.capture("connectHardwareAccountsConnected",{data:{numberOfAccountsImported:t.accounts.length,numberOfAccountsImportedByDerivationPath:o}})};this.#e=t}#e};function Rv(e){return typeof e!="string"?!1:Object.keys(xi).includes(e)}i();a();i();a();var hee=["firstTimeOnboarding","isResettingApp"];i();a();i();a();var mi="@phantom/onboarding",Ot={firstTimeOnboarding:[`${mi}:first-time-onboarding`],isResettingApp:[`${mi}:is-resetting-app`],deriveLedgerAccounts:[`${mi}:derive-ledger-accounts`],discoverLedgerAccounts:[`${mi}:discover-ledger-accounts`]};i();a();i();a();i();a();i();a();var Nv="/discover/v1",Bv={Accept:"application/json"},Uv=e=>{if(!e||!Array.isArray(e.accounts))return!1;for(let t of e.accounts)if(!(typeof t.address=="string"&&typeof t.amount=="string"&&(!t.lastActivityTimestamp||typeof t.lastActivityTimestamp=="number")&&t.chain&&typeof t.chain.id=="string"&&new Set(v.getAllNetworkIDs()).has(t.chain.id)&&typeof t.chain.name=="string"&&typeof t.chain.symbol=="string"&&typeof t.chain.imageUrl=="string"))return!1;return!0},Lv=e=>!!e&&typeof e.message=="string",yc=async e=>{if(!e.accounts.length)throw new Error("Must send at least 1 account for discovery");let t=await M.api().headers(Bv).post(Nv,e),o=t.data;if(!ae(t))throw Lv(o)?new Error(o.message):new Error(`Unable to discover accounts with args: ${JSON.stringify(e)}`);if(Uv(o))return o;throw new Error(`Invalid discover accounts response: ${JSON.stringify(o)}`)};var _v="fetch-multi-chain-accounts-by-seed",Ov=()=>["bitcoinTaproot","bitcoinNativeSegwit"],Mv=()=>["bip44Change","bip44","deprecated"],Qv=()=>["bip44Ethereum","bip44EthereumSecondary","bip44EthereumTertiary"],qv=(e,t)=>Ov().map(o=>{let r={pathType:o,index:e},{publicKey:n}=t.derivePathType(o,e),s=So.getAddressType(o),p=Dn({publicKey:n,addressType:s});return{chainType:s,chainId:$.Bitcoin.Mainnet,address:p,publicKey:Buffer.from(n).toString("hex"),pathParams:r}}),Gv=(e,t)=>Qv().map(o=>{let r={pathType:o,index:e},{publicKey:n}=t.derivePathType(o,e),s=So.getAddressType(o),p=Dn({publicKey:n,addressType:"eip155"});return{chainType:s,pathType:o,address:p,publicKey:Buffer.from(n).toString("hex"),pathParams:r}}),Vv=(e,t)=>Mv().map(o=>{let r={pathType:o,index:e},n=t.derivePathType(o,e),s;switch(o){case"bip44Root":case"bip44":case"bip44Change":s=n.publicKey;break;case"deprecated":s=Kc(n.secretKey).publicKey;break}let p=Dn({publicKey:s,addressType:"solana"});return{chainType:"solana",chainId:$.Solana.Mainnet,address:p,publicKey:Buffer.from(s).toString("hex"),pathParams:r}}),Kv=1e4,vy=async(e,t=!0)=>{let o=Object.assign({},...e);try{let r=Object.values(o).map(({account:f})=>({address:f.address,chainId:f.chainId})),n;t?n=(await Uc(async()=>Rn(yc({accounts:r}),Kv),()=>!0,2)).accounts:n=(await yc({accounts:r})).accounts;let s={};for(let f of n){let{account:S}=o[`${f.chain.id}-${f.address}`],w=S.publicKey,y=S.chainType,A=Nn(S.pathParams),b={...f,publicKey:w,chainType:y,derivationPathType:S.pathParams.pathType,hasAccountActivity:!!f.lastActivityTimestamp||parseFloat(f.amount)>0};s[A]=[...s[A]||[],b]}Object.keys(s).forEach(f=>{s[f]=s[f].sort((S,w)=>v.compareNetworkID(S.chain.id,w.chain.id))});let p=Object.values(s),u=p.filter(f=>f.some(S=>S.hasAccountActivity)),c=!!u.length;return(c?u:p).map(f=>{let S=f[0];return{status:"discovered",seedIndex:o[`${S.chain.id}-${S.address}`].account.pathParams.index??-1,isSelectedByDefault:c,accounts:f}})}catch{let r=Object.values(o).map(({account:u})=>u),n={};for(let u of r){let{account:c}=o[`${u.chainId}-${u.address}`],m=Nn(c.pathParams),g={...u,chain:{id:u.chainId,name:v.getNetworkName(u.chainId),symbol:v.getTokenSymbol(u.chainId)},chainType:So.getAddressType(c.pathParams.pathType),derivationPathType:c.pathParams.pathType,hasAccountActivity:!1};n[m]=[...n[m]||[],g]}return Object.keys(n).forEach(u=>{n[u]=n[u].sort((c,m)=>v.compareNetworkID(c.chain.id,m.chain.id))}),Object.values(n).map(u=>{let c=u[0];return{status:"undiscovered",seedIndex:o[`${c.chain.id}-${c.address}`].account.pathParams.index??-1,accounts:u,isSelectedByDefault:!1}})}},Hv=async({hdWallet:e,startIndex:t,endIndex:o,enabledAddressTypes:r,enabledChains:n})=>{let s=[];for(let p=t;p<=o;++p){let u={};if(r.includes("bip122_p2wpkh"))for(let c of qv(p,e))u[`${$.Bitcoin.Mainnet}-${c.address}`]={account:c};if(r.includes("eip155")){let c=Gv(p,e),m=n.filter(g=>v.isEVMNetworkID(v[g].mainnetID));for(let g of m){let f=v[g];for(let{address:S,publicKey:w,chainType:y,pathParams:A}of c)u[`${f.mainnetID}-${S}`]={account:{chainType:y,chainId:f.mainnetID,address:S,publicKey:w,pathParams:A}}}}if(r.includes("solana"))for(let c of Vv(p,e))u[`${c.chainId}-${c.address}`]={account:c};s.push(u)}return vy(s)};function gte({batchSize:e,hdWallet:t,enabledAddressTypes:o,enabledChains:r}){let n=!!t&&o.length!=0;return Vt({enabled:n,queryKey:[_v,e],queryFn:async({pageParam:c=0})=>{try{if(e<1)throw new Error(`Need positive batchSize: ${e}`);if(!t)throw new Error("Missing HDWallet");let m=[],g=[],f=c===0,S=c,w=!0;for(;w;){let y=S,A=S+e-1,T=(await Hv({hdWallet:t,startIndex:y,endIndex:A,enabledAddressTypes:o,enabledChains:r})).flat(1);S+=e,w=!1;for(let F of T)m.push(F),(F.status==="undiscovered"||F.isSelectedByDefault)&&g.push(F),f&&F.status==="discovered"&&F.isSelectedByDefault&&(w=!0)}if(f&&g.length===0&&m.length>1){let y=m[0],A=y.accounts.map(T=>({...T,hasAccountActivity:!1})),b={status:"undiscovered",seedIndex:y.seedIndex,accounts:A,isSelectedByDefault:!1};g.push(b)}return g}catch(m){throw m instanceof Error&&O.captureError(m,"account"),m}},getNextPageParam:(c,m)=>{let g=m.length,f=g?m[0]:[],S=f.length?$v(f[f.length-1].seedIndex,e):0;return g===1?S:S+e*(g-1)},gcTime:0,staleTime:0,initialPageParam:0})}var $v=(e,t)=>Math.ceil(e/t)*t+t;i();a();i();a();var zv=()=>{let e=ee(),t=async()=>{let r=await e.get("firstTimeOnboarding");return r===null?!0:r.isFirstTimeOnboarding},{data:o}=N({queryKey:Ot.firstTimeOnboarding,queryFn:t});return o},jv=()=>{let e=ee(),t=q();return ne({mutationFn:async r=>{await e.set("firstTimeOnboarding",{isFirstTimeOnboarding:r}),Bu(e,r?void 0:Date.now()),t.setQueryData(Ot.firstTimeOnboarding,r)}})};i();a();var Wv=()=>{let e=ee(),t=async()=>{let r=await e.get("isResettingApp");return r===null?{isResettingApp:!1,isFirstTimeResettingApp:!1}:r},{data:o}=N({queryKey:Ot.isResettingApp,queryFn:t});return o},Yv=()=>{let e=ee(),t=q();return ne({mutationFn:async r=>{let s=(await e.get("isResettingApp"))?.isFirstTimeResettingApp??!1;await e.set("isResettingApp",{isResettingApp:r,isFirstTimeResettingApp:s}),t.setQueryData(Ot.isResettingApp,{isResettingApp:r,isFirstTimeResettingApp:s})}})},Xv=()=>{let e=ee(),t=q();return ne({mutationFn:async r=>{let s=(await e.get("isResettingApp"))?.isResettingApp??!1;await e.set("isResettingApp",{isResettingApp:s,isFirstTimeResettingApp:r}),t.setQueryData(Ot.isResettingApp,{isResettingApp:s,isFirstTimeResettingApp:r})}})};i();a();i();a();var Mt=C(R());i();a();i();a();i();a();var di=class{intercept({hasViewedAutoSlippageOptIn:t,selectedSetting:o,setHasViewedAutoSlippageOptIn:r,showOverlay:n}){return!t&&o!=="auto"?(n("autoSlippageOptIn"),r(!0),"interrupt"):"continue"}};i();a();var fi=class{intercept(){let{review:t}=ro();return t?Do(t):ln(),"continue"}};function Ey(e,t){let o=[];return e&&o.push(new di),t||o.push(new fi),o}var xy=(0,Mt.createContext)(void 0),Zv=({children:e})=>{let{data:[t,o]}=pe(["enable-auto-slippage","enable-swapper-skip-review"]),r=(0,Mt.useMemo)(()=>t?["auto","fixed"]:["fixed"],[t]),n=(0,Mt.useMemo)(()=>Ey(t,o),[t,o]),s=Ic,p=o;return Mt.default.createElement(xy.Provider,{value:{slippageSettingTypes:r,reviewInterceptors:n,inspectorEnabled:s,showStickyCTAButton:p}},e)},Sc=()=>{let e=(0,Mt.useContext)(xy);if(!e)throw new Error("useSwapper must be used within a SwapperProvider");return e};i();a();var In=()=>{let{selectedSetting:e}=Pe(),t=h(s=>s.selectedProviderIndex),o=h(s=>s.quoteResponse),r=co(t,e.type,o),{data:n}=Oo();return r??n??void 0};i();a();var eE="https://help.phantom.app/hc/en-us/articles/33745013398675";i();a();var tE=e=>ks.safeParse(e).success;i();a();var fo=C(R());i();a();i();a();function Cy(){return ro().review!==null?1:0}var Ry=(0,fo.createContext)(void 0),rE=({children:e})=>{let t=(0,fo.useMemo)(()=>Cy(),[]);return fo.default.createElement(Ry.Provider,{value:{infoRowDisplayStrategy:t}},e)},nE=()=>{let e=(0,fo.useContext)(Ry);if(!e)throw new Error("useSwapReview must be used within a SwapReviewProvider");return e};i();a();var qe=C(R());i();a();i();a();var Ko=C(R());i();a();i();a();var gi=e=>e&&ce(e)?e.executionDuration:0;var Py=e=>{let t=gi(e);return Mo(t)};i();a();var ky=({networkID:e,txReceipt:t,preferredExplorers:o})=>{let r=t?.id??"";if(!r)return;let n=o?.explorers[e];return Jc({networkID:e,endpoint:"transaction",explorerType:n,param:r})};i();a();i();a();var re=class extends Error{constructor(t,o){super(t),this.code=t,this.detailMessage=o}};function Dy(e,t){if(t){let o=sE(e),r=aE(e,t),n=pE(e,t);return{notEnoughSol:t.message==="NotEnoughSol",txErrorTitle:o,txErrorMessage:r,txErrorHelpButtonLink:n}}return{notEnoughSol:!1,txErrorTitle:"",txErrorMessage:"",txErrorHelpButtonLink:""}}var sE=e=>e?B.t("swapTxBridgeFailed"):B.t("swapTxConfirmationSwapFailed"),iE=e=>{switch(e.message){case"LedgerConnectionError":return B.t("swapTxConfirmationSwapFailedLedgerConnectionError");case"LedgerRejectAction":return B.t("swapTxConfirmationSwapFailedLedgerReject");case"LedgerUnknownSignError":return B.t("swapTxConfirmationSwapFailedLedgerSignError");case"LedgerUnknownError":return B.t("swapTxConfirmationSwapFailedLedgerError");default:return null}},aE=(e,t)=>{let o=iE(t);if(o!==null)return o;if(e)switch(t.message){case"slippageToleranceExceeded":return B.t("swapTxConfirmationSwapFailedSlippageLimit");default:return B.t("swapTxBridgeFailedDescription")}else switch(t.message){case"INSUFFICIENT_FUNDS":return B.t("swapTxConfirmationSwapFailedInsufficientBalance");case"slippageToleranceExceeded":return B.t("swapTxConfirmationSwapFailedSlippageLimit");case"EmptyRoute":return B.t("swapTxConfirmationSwapFailedEmptyRoute");case"AccountFrozen":return B.t("swapTxConfirmationSwapFailedAcountFrozen");case"SIMULATION_TIMEOUT":return B.t("swapTxConfirmationSwapFailedSimulationTimeout");case"INSUFFICIENT_GAS":return B.t("swapTxConfirmationSwapFailedInsufficientGas");case"Scan results are not valid":return B.t("swapTxConfirmationSwapFailedUnknownError");case"STALE_QUOTA":return B.t("swapTxConfirmationSwapFailedStaleQuota");case"SimulationUnknownError":return B.t("swapTxConfirmationSwapFailedSimulationUnknownError");default:return B.t("swapTxConfirmationSwapFailedTryAgain")}},pE=(e,t)=>e?Os:t.message==="AccountFrozen"?Lf:Os;i();a();var Ny=({sellAmount:e,sellFungible:t,buyAmount:o,buyFungible:r,txStatus:n,txReceipt:s,swapTransactions:p,isReadyToExecute:u,uiEstimatedTime:c,isBridge:m,isLedger:g,notEnoughSol:f,txError:S,txErrorTitle:w,txErrorMessage:y,explorerUrl:A,txErrorHelpButtonLink:b,addressType:T})=>{let F=J(e,t?.data.decimals??0).toNumber(),E=J(o,r?.data.decimals??0).toNumber(),I=n==="success",x=n==="error",k=!!s,P=p?.transactions.length||0;return{sellAsset:{amount:F,symbol:t?.data.symbol??"",networkID:t?.data.chain.id??$.Solana.Mainnet},buyAsset:{amount:E,symbol:r?.data.symbol??"",networkID:r?.data.chain.id??$.Solana.Mainnet},estimatedTime:c,isBridge:m,isSuccess:I,isFailure:x,isLedger:g,isClosable:k,notEnoughSol:f,txError:S,txErrorTitle:w,txErrorMessage:S?.detailMessage?`${y}

${S?.detailMessage}`:y,txLink:A??"",txErrorHelpButtonLink:b,numberOfTransactions:P,isReadyToExecute:u,addressType:T}};var wc=({sellFungible:e,txReceipt:t,swapTransactions:o,isBridge:r,txError:n,txStatus:s,isReadyToExecute:p,isLedger:u})=>{let c=e?.data.chain.id??$.Solana.Mainnet,{notEnoughSol:m,txErrorTitle:g,txErrorMessage:f,txErrorHelpButtonLink:S}=(0,Ko.useMemo)(()=>Dy(r,n),[r,n]),w=(0,Ko.useMemo)(()=>v.getAddressType(c),[c]),{currentQuote:y}=Q(),{buyAmount:A,sellAmount:b}=y??{buyAmount:"0",sellAmount:"0"},T=h(k=>k.buyFungible),{data:F}=eu(),E=(0,Ko.useMemo)(()=>ky({txReceipt:t,networkID:c,preferredExplorers:F}),[t,c,F]),I=(0,Ko.useMemo)(()=>Py(y),[y]);return(0,Ko.useCallback)(()=>Ny({sellFungible:e,txReceipt:t,addressType:w,swapTransactions:o,isBridge:r,txError:n,sellAmount:b,buyAmount:A,buyFungible:T,txStatus:s,isReadyToExecute:p,uiEstimatedTime:I,isLedger:u,notEnoughSol:m,txErrorTitle:g,txErrorMessage:f,explorerUrl:E,txErrorHelpButtonLink:S}),[e,t,w,o,r,n,b,A,T,s,p,I,u,m,g,f,E,S])()};i();a();var cE="slippageToleranceExceeded",uE="INSUFFICIENT_FUNDS",lE=su,mE="insufficient lamports",dE="lower balance than rent-exempt minimum",fE=nu,gE="Transaction confirmation failed",yE=["Ledger App not open","Ledger not connected","Unable to connect to Ledger","Unable to connect to Ledger device","Need permission to connect to Ledger"],SE="Ledger user rejected action",wE="Ledger Sign Error";function AE(e){try{return Number(e.split('"Custom":')[1].split("}")[0])}catch{return null}}function hE(e){switch(AE(e.message)){case 301:return"slippageToleranceExceeded";case 6e3:return"EmptyRoute";case 6001:return"slippageToleranceExceeded";case 6002:return"InvalidCalculation";case 6003:return"MissingPlatformFeeAccount";case 6004:return"InvalidSlippage";case 6005:return"NotEnoughPercent";case 6006:return"InvalidInputIndex";case 6007:return"InvalidOutputIndex";case 6008:return"NotEnoughAccountKeys";case 6009:return"NonZeroMinimumOutAmountNotSupported";case 6010:return"InvalidRoutePlan";case 6011:return"InvalidReferralAuthority";case 6012:return"LedgerTokenAccountDoesNotMatch";case 6013:return"InvalidTokenLedger";case 6014:return"IncorrectTokenProgramID";case 6015:return"TokenProgramNotProvided";case 6016:return"SwapNotSupported";case 6017:return"ExactOutAmountNotMatched";case 6018:return"SourceAndDstinationMintCannotBeTheSame";default:return null}}function bE(e){return yE.some(o=>e.message.includes(o))?"LedgerConnectionError":e.message.includes(SE)?"LedgerRejectAction":e.message.includes(wE)?"LedgerUnknownSignError":e.message.toLowerCase().includes("ledger")?"LedgerUnknownError":null}function Br(e){if(e===void 0)return new re("UnknownError");if(e instanceof re)return e;let t=TE(e);if(t.message.includes(uE))return new re("INSUFFICIENT_FUNDS");if(FE(t.message))return new re("slippageToleranceExceeded");if(t.message==="Scan results are not valid")return new re("Scan results are not valid");if([lE,mE,fE,dE].some(c=>t.message.includes(c)))return new re("NotEnoughSol");let s=hE(t);if(s!==null)return new re(s);if(t.message.includes(gE))return new re("Transaction confirmation failed");let u=bE(t);return u!==null?new re(u):new re("UnknownError")}function TE(e){return typeof e=="string"?new Error(e):typeof e=="object"&&"logs"in e&&e.logs?.length?new Error(e.logs.join(`
`)):e}function FE(e){return e.includes(cE)}i();a();var Lr=C(R());i();a();var Ur=e=>e?ce(e)?void 0:e.priceImpact:0;i();a();function By({buyAssetUsdValue:e,buyToken:t,sellAssetUsdValue:o,sellToken:r,buyAmount:n,sellAmount:s,phantomFeeUiAmount:p,priceImpact:u,provider:c,slippageTolerance:m,transactionId:g,slippageType:f,sellSwapFilter:S}){let w=zf({buyAssetUsdValue:e,buyToken:t,sellAssetUsdValue:o,sellToken:r,buyAmount:n,sellAmount:s,phantomFeeUiAmount:p,priceImpact:u,provider:c,slippageTolerance:m,slippageType:f,sellSwapFilter:S});return w?{data:{...w,id:g}}:{}}i();a();var Uy=({txReceipt:e,networkID:t,amountType:o,swapAnalytics:r})=>{let n=Vr(t);O.addBreadcrumb("swapper","submittedTransaction","info",{...n,txReceipt:e.id,method:n.chainType==="solana"?"signAndSendTransaction":n.chainType==="eip155"?"eth_sendRawTransaction":"UNKNOWN"}),n.chainType==="solana"?r.submittedTransaction(e.id,{...n,method:"signAndSendTransaction",swapType:o==="sell"?"exactIn":"exactOut"}):n.chainType==="eip155"&&r.submittedTransaction(e.id,{...n,method:"eth_sendRawTransaction",swapType:o==="sell"?"exactIn":"exactOut"})};var Ho=()=>{let e=K(),t=qs(),{currentQuote:o,quoteResponse:r}=Q(),n=h(x=>x.buyFungible),s=h(x=>x.sellFungible),p=h(x=>x.buyUsdValue),u=h(x=>x.sellUsdValue),c=h(x=>x.selectedProviderIndex),m=h(x=>x.swapFilter),{selectedSetting:g}=Pe(),f=h.getState().amountType,S=s?.data.chain.id??$.Solana.Mainnet,w=st(),{transition:y}=rt(),A=(0,Lr.useCallback)(x=>{let k=co(c,g.type,r);return By({buyToken:n,sellToken:s,buyAmount:o?.buyAmount.toString()??"",sellAmount:o?.sellAmount.toString()??"",phantomFeeUiAmount:w.phantomFee.uiAmount,priceImpact:Ur(o),provider:Qe(gt(o)),buyAssetUsdValue:p,sellAssetUsdValue:u,slippageTolerance:k,transactionId:x??"",slippageType:g.type,sellSwapFilter:m})},[n,s,o,w.phantomFee.uiAmount,p,u,r,c,g.type,m]),b=(0,Lr.useCallback)(x=>{Uy({txReceipt:x,networkID:S,amountType:f,swapAnalytics:t})},[S,f,t]),T=(0,Lr.useCallback)((x,k)=>{y({type:"transactionSubmissionFailed",error:x}),x.message!=="Scan results are not valid"&&x.message!=="slippageToleranceExceeded"&&O.captureError(x,"swapper");let P=A(k);e.capture("swapperSwapFailure",{data:{...P.data,error:x.message}})},[e,A,y]),F=()=>{e.capture("swapperSwapFailureNoSignature")},E=(0,Lr.useCallback)(x=>{let k=A(x.id);e.capture("swapperSwapSuccess",k);let P=Vr(x.networkID);O.addBreadcrumb("swapper","transactionStatus","info",{...P,txReceipt:x.id}),(P.chainType==="eip155"||P.chainType==="solana")&&t.transactionStatus(x.id,{...P,status:{type:"confirmed"}})},[e,A,t]),I=(0,Lr.useCallback)((x,k)=>{let P=x?.networkID?Vr(x.networkID):null;(P?.chainType==="eip155"||P?.chainType==="solana")&&x?.id&&(O.addBreadcrumb("swapper","transactionStatus","error",{...P,txReceipt:x.id}),t.transactionStatus(x.id,{...P,status:{type:"error"}}),y({type:"transactionConfirmationFailed",error:k,txReceipt:x}))},[t,y]);return{logTransactionSubmitted:b,logTransactionSubmissionError:T,logSwapFailureNoSignature:F,logTransactionConfirmed:E,logTransactionConfirmationFailed:I}};i();a();var zy=C(R());i();a();i();a();i();a();i();a();var Ly=3;function _y(){try{let e=Be.getMultivariateAssignment("swapper-high-slippage-threshold"),t=Number(e);return!e||isNaN(t)?Ly:t}catch{return Ly}}var Oy=({currentQuote:e,quoteResponse:t,gasEstimation:o,swapTransactions:r,scanResults:n,isSwapSimulationDisabled:s,slippageTolerance:p,enableGasEstimationOptimization:u})=>{if(!e)throw new re("Trying to execute swap with no current quote");if(!t)throw new re("Trying to execute swap with no quote response");if((u?v.isEVMNetworkID(t.sellToken.chainId):!0)&&(!o||o?.length===0))throw new re("No gas estimation available");if(!r)throw new re("No swap transactions available");if(n.state!=="valid"&&(O.addBreadcrumb("swapper","swapSimulationNotValid","info",Yo({scanResults:n.state})),!s)){let m=["Scan results are not valid","AccountFrozen","INSUFFICIENT_FUNDS","INSUFFICIENT_GAS","slippageToleranceExceeded","SIMULATION_TIMEOUT","MissingArgument","exceedsSimulationTolerance","STALE_QUOTA","SimulationUnknownError"];if(vE(n.state)&&m.includes(n.state.code)){if(IE(n.state,p))return;throw n.state}else throw new re("Scan results are not valid")}};function IE(e,t){return e.code==="slippageToleranceExceeded"&&t&&t>=_y()}function vE(e){return e instanceof re}var EE={swap:{solana:"executeSolanaSwap",evm:"executeEvmSwap"},bridge:{solana:"executeSolanaBridge",evm:"executeEvmBridge"}},xE=(e,t)=>EE[e?"bridge":"swap"][t??"solana"],My=async({isBridge:e,addressType:t,isSwapSimulationDisabled:o,sender:r,currentQuote:n,quoteResponse:s,gasEstimation:p,swapTransactions:u,scanResults:c,pendingActivityRows:m,connection:g,enableGasEstimationOptimization:f,logSwapFailureNoSignature:S,logTransactionSubmitted:w,onTransactionReceiptReceived:y,onTransactionSubmissionError:A,resetToInitialState:b,slippageTolerance:T,swapFungibles:F})=>{await O.startSpan({name:xE(e,u?.type)},async()=>{b();let E;try{Oy({currentQuote:n,quoteResponse:s,gasEstimation:p,swapTransactions:u,scanResults:c,isSwapSimulationDisabled:o,slippageTolerance:T,enableGasEstimationOptimization:f});let I=await F({type:t,callerAddress:r,swapTransactions:u,pendingSwapActivityRows:m.pendingSwapActivityRows,pendingApprovalActivityRows:m.pendingApprovalActivityRows,gasEstimation:p,connection:g});if(y(I),I.error)throw I.id||S(),E=I.id,I.error;w(I)}catch(I){let x=Br(I);A(x,E)}})};i();a();var qy=C(R());i();a();var Qy=C(R());function Si(e){return(0,Qy.useMemo)(()=>Qe(e),[e])}function Gy({sender:e}){let{t}=Ht(),{currentQuote:o}=Q(),r=h(w=>w.buyFungible),n=h(w=>w.sellFungible),s=Si(gt(o)),{data:p}=io({callerAddress:e,quote:o,sellFungible:n}),u=(w,y)=>y.find(A=>(To(w)??[]).includes(A.data.key)),c=({sellFungible:w,buyFungible:y,sellAmount:A,buyAmount:b,provider:T,isBridge:F,t:E})=>{let I=w.data.symbol,x=y.data.symbol,k=J(A??0,w.data.decimals??0),P=J(b??0,y.data.decimals??0);return{topLeft:{text:`${E(F?"transactionsPendingBridging":"transactionsPendingSwapping")} on ${T}`},topRight:{text:`${P} ${x}`,color:"accentSuccess"},bottomLeft:{text:`${I} \u2192 ${x}`},bottomRight:{text:`${k} ${I}`}}},m=p?.transactionPairs?.flatMap(w=>[...To(w.sellToken)??[],...To(w.buyToken)??[]])??[],g=[...new Set(m)],{fungibles:f}=bt({keys:g});return{pendingActivityRows:(0,qy.useMemo)(()=>{let w={pendingSwapActivityRows:[],pendingApprovalActivityRows:[]};return p?p.type==="evm"?p.transactionTypes.reduce((y,A,b)=>{let T=n,F=r,E,I=p.transactionPairs;if(I&&I[b]){let x=I[b];T=u(x.sellToken,f)??n,F=u(x.buyToken,f)??r,E=x.approvalMetadata}if(A.includes("approval")){let x=T?.data.symbol??"";y.pendingApprovalActivityRows.push({topLeft:E?{text:`${t("transactionsPendingApproving")} ${E.symbol}`}:{text:`${t("transactionsPendingApproving")} ${x}`}})}else T&&F&&y.pendingSwapActivityRows.push(c({sellFungible:T,buyFungible:F,sellAmount:o?.sellAmount,buyAmount:o?.buyAmount,provider:s,isBridge:A.includes("bridge"),t}));return y},w):p.transactionTypes.reduce((y,A,b)=>{let T=n,F=r,E=p.transactionPairs;if(E&&E[b]){let I=E[b];T=u(I.sellToken,f)??n,F=u(I.buyToken,f)??r}return T&&F&&y.pendingSwapActivityRows.push(c({sellFungible:T,buyFungible:F,sellAmount:o?.sellAmount,buyAmount:o?.buyAmount,provider:s,isBridge:A.includes("bridge"),t})),y},w):w},[p,n,r,f,t,o?.sellAmount,o?.buyAmount,s])}}i();a();var Ai=C(R());i();a();var Ky=.01,wi="swap-validation",Vy=e=>{if(e.resourceType==="nativeToken"){if(["60","966"].includes(e.slip44))return"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"}else if(e.resourceType==="address")return e.address??"";return""},Hy=({scanResult:e,scanResultError:t,quote:o,sellToken:r,buyToken:n,simulationTolerance:s=Ky})=>{if(t)return"valid";if(!o||!r||!n||!s)return O.addBreadcrumb(wi,`Missing necessary args: ${JSON.stringify({quote:!!o,scanResult:!!e,sellToken:r,buyToken:n,simulationTolerance:s})}`,"info"),new re("MissingArgument");if(e?.error===mt.SIMULATION_FAILED)return"valid";if(e?.error){if(O.addBreadcrumb(wi,`Simulation error: ${JSON.stringify({error:e.error})}`,"info"),e.error===mt.SLIPPAGE_EXCEEDED)return new re("slippageToleranceExceeded");if(e.error===mt.INSUFFICIENT_FUNDS)return new re("INSUFFICIENT_FUNDS");if(e.error===mt.INSUFFICIENT_GAS)return new re("INSUFFICIENT_GAS");if(e.error===mt.ACCOUNT_FROZEN)return new re("AccountFrozen");if(e.error===mt.SIMULATION_TIMEOUT)return new re("SIMULATION_TIMEOUT");if(e.error===mt.STALE_QUOTA)return new re("STALE_QUOTA");if(e.error===mt.UNKNOWN_ERROR){let g=RE(e);return new re("SimulationUnknownError",g)}return new re("Scan results are not valid")}if(!e)return O.addBreadcrumb(wi,`Missing necessary args: ${JSON.stringify({quote:!!o,scanResult:!1,sellToken:r,buyToken:n,simulationTolerance:s})}`,"info"),new re("MissingArgument");let p=e?.advancedDetails,{isSimulationToleranceExceeded:u,buyDiff:c,sellDiff:m}=CE(p,n,r,o,s);return u&&p?.networkId===$.Ethereum.Mainnet?(O.addBreadcrumb(wi,`Diff is larger than simulationTolerance: ${JSON.stringify({sellToken:r,buyToken:n,buyDiff:c.toString(),sellDiff:m.toString(),simulationTolerance:s})}`,"info"),new re("exceedsSimulationTolerance")):"valid"},CE=(e,t,o,r,n=Ky)=>{let s=e?.tokenChange||[],p=new D(s.find(y=>y.address===Vy(t))?.value??"0"),u=new D(s.find(y=>y.address===Vy(o))?.value??"0").abs(),c=o.resourceType==="nativeToken",m=new D(r.buyAmount),g=new D(r.sellAmount),f=p.minus(m).dividedBy(m).absoluteValue(),S=u.minus(g);if(c&&ce(r)){let y=Pr(r);S=S.minus(y)}return S=S.dividedBy(g).absoluteValue(),{isSimulationToleranceExceeded:!((ce(r)||f.lt(n))&&S.lt(n)),buyDiff:f,sellDiff:S}};function RE(e){return e.simulationError?e.simulationError.humanReadableError:e.warnings[0]?.message}var $y=({swapTransactions:e})=>{let t=h(A=>A.sellFungible),o=h(A=>A.buyFungible),r=t?.data.chain.id??$.Solana.Mainnet,{data:n}=Ao(t?{address:t.data.walletAddress,networkID:t.data.chain.id}:void 0),{selectedSetting:s}=Pe(),p=n?.address??"",{currentQuote:u,quoteResponse:c}=Q(),m=Qe(gt(u)),g=Ie(t?.data.chain.id,o?.data.chain.id),f={type:"transaction",userAccount:p,params:void 0,url:"https://phantom.app",networkID:r,context:g?"bridge":"swap",provider:m,slippageType:s.type};e?.type==="evm"&&v.isEVMNetworkID(r)&&(f.params={transactions:e.transactions}),e?.type==="solana"&&v.isSolanaNetworkID(r)&&(f.params={transactions:e.transactions,method:"signAndSendTransaction",simulatorConfig:{decodeAccounts:!1,decodeInstructions:!1}});let{transition:S}=rt(),w=(0,Ai.useCallback)((A,b)=>{b&&S({type:"simulationRequestError",error:b}),A&&S({type:"simulationResponseReceived",scannedTransactionResult:A})},[S]),y=dn(f,{disableRefetch:!0,onSettled:w});return(0,Ai.useMemo)(()=>{if(y.isLoading)return{isLoading:!0,state:"loading"};let A=Hy({scanResult:y.data,scanResultError:y.isError,quote:u,sellToken:c?.sellToken,buyToken:c?.buyToken,simulationTolerance:c?.simulationTolerance});return{isLoading:y.isLoading,state:A}},[y,u,c])};function jy({isBridge:e,addressType:t,isSwapSimulationDisabled:o,onTransactionReceiptReceived:r,onTransactionSubmissionError:n,resetToInitialState:s,sender:p}){let{logTransactionSubmitted:u,logSwapFailureNoSignature:c}=Ho(),{connection:m}=rr(),{data:g}=oe(),{data:[f]}=pe(["enable-swapper-gas-estimation-optimization"]),{currentQuote:S,quoteResponse:w}=Q(),y=In(),A=h(Y=>Y.maxGasEstimation),b=h(Y=>Y.sellFungible),T=b?.data.chain.id??$.Solana.Mainnet,{data:F,isSuccess:E}=io({callerAddress:p,quote:S,sellFungible:b}),I=$y({swapTransactions:F}),{pendingActivityRows:x}=Gy({sender:p}),{mutateAsync:k}=$p({accountIdentifier:g?.identifier??"",networkID:T}),[P,z]=(0,zy.useState)(!1),j=async()=>(z(!0),My({isBridge:e,addressType:t,isSwapSimulationDisabled:o,sender:p,currentQuote:S,quoteResponse:w,gasEstimation:A,swapTransactions:F,scanResults:I,pendingActivityRows:x,connection:m,slippageTolerance:y,enableGasEstimationOptimization:f,logSwapFailureNoSignature:c,logTransactionSubmitted:u,swapFungibles:k,onTransactionSubmissionError:n,onTransactionReceiptReceived:r,resetToInitialState:s}));return{isReadyToExecute:P||(!I.isLoading||o)&&E,executeSwap:j}}i();a();var hi=C(R());var Wy=({goToSwapTab:e,goToSwapReview:t,goToActivityTab:o})=>{let{resume:r}=ot(),{clearQuotes:n}=Kp(),s=Qo(),p=(0,hi.useCallback)(()=>{r(),n(),e()},[e,r,n]),u=(0,hi.useCallback)(()=>{r(),t()},[t,r]),c=(0,hi.useCallback)(()=>{s(),o()},[o,s]);return{onClose:p,onRetry:u,onSwapSuccess:c}};i();a();function Yy(){let{data:[e]}=pe(["kill-swapper-simulation"]);return e}i();a();var _r=C(R());var Xy=({onTransactionConfirmationSuccess:e,onTransactionConfirmationError:t,txReceipt:o})=>{let r=q(),{data:n}=oe(),s=(0,_r.useMemo)(()=>n?.addresses??[],[n]),p=Cu(s),u=Qo(),{logTransactionConfirmed:c,logTransactionConfirmationFailed:m}=Ho(),g=h(T=>T.sellFungible),{currentQuote:f}=Q(),{sellAmount:S}=f??{sellAmount:"0"},w=(0,_r.useCallback)(async T=>{if(c(T),u(),g){let F=new D(g.data.amount),E=new D(S),I=F.minus(E).toString();Wg(r,{id:ri(g),amount:I})}p()},[c,u,S,g,p,r]),{isSuccess:y,isError:A,error:b}=Eu(w,o);(0,_r.useEffect)(()=>{if(y)e();else if(A){let T=Br(b);t(T),m(o,T)}},[y,A,b,o,m,e,t])};function Jy({isLedger:e,goToSwapTab:t,goToSwapReview:o,goToActivityTab:r}){let{currentQuote:n}=Q(),s=h(ie=>ie.buyFungible),p=h(ie=>ie.sellFungible),u=Qo(),c=Yy(),{logTransactionSubmissionError:m}=Ho(),[g]=(0,qe.useState)(Ie(p?.data.chain.id,s?.data.chain.id)),f=p?.data.chain.id??$.Solana.Mainnet,{data:S}=oe(),w=(0,qe.useMemo)(()=>S?.addresses??[],[S]),y=(0,qe.useMemo)(()=>w.find(ie=>ie.networkID===p?.data.chain.id)?.address??"",[w,p]),A=(0,qe.useMemo)(()=>v.getAddressType(f),[f]),{data:b}=io({callerAddress:y,quote:n,sellFungible:p}),[T,F]=(0,qe.useState)(),[E,I]=(0,qe.useState)("loading"),[x,k]=(0,qe.useState)(),P=()=>{I("loading"),k(void 0),F(void 0)},z=ie=>{F(ie)},j=(0,qe.useCallback)((ie,le)=>{I("error"),k(ie),m(ie,le)},[m]),L=(0,qe.useCallback)(()=>{I("success")},[]),Y=(0,qe.useCallback)(ie=>{I("error"),k(Br(ie))},[]);Xy({onTransactionConfirmationSuccess:L,onTransactionConfirmationError:Y,txReceipt:E==="error"?void 0:T});let{executeSwap:W,isReadyToExecute:Se}=jy({isBridge:g,addressType:A,isSwapSimulationDisabled:c,onTransactionSubmissionError:j,onTransactionReceiptReceived:z,resetToInitialState:P,sender:y}),{onClose:V,onRetry:X,onSwapSuccess:_}=Wy({goToSwapTab:t,goToSwapReview:o,goToActivityTab:r});return{...wc({sellFungible:p,txReceipt:T,swapTransactions:b,isBridge:g,txStatus:E,isReadyToExecute:Se,isLedger:e,txError:x}),executeSwap:W,resetSwapper:u,onClose:V,onRetry:X,onSwapSuccess:_}}i();a();i();a();i();a();var tS=C(R());i();a();var Zy=C(R());var PE={status:!1,timestamp:""},eS=()=>{let{data:e}=nt({key:"hasViewedAutoSlippageOptIn",queryKey:ue.hasViewedAutoSlippageOptIn()}),{mutateAsync:t}=St({key:"hasViewedAutoSlippageOptIn",queryKey:ue.hasViewedAutoSlippageOptIn()}),o=(0,Zy.useCallback)(r=>void t({status:r,timestamp:new Date().toISOString()}),[t]);return{viewedOptInState:e??PE,setViewedOptInState:o}};var Ac=()=>{let{viewedOptInState:e,setViewedOptInState:t}=eS(),{selectedSetting:o}=Pe(),{reviewInterceptors:r}=Sc();return{executeInterceptors:(0,tS.useCallback)(s=>{for(let p of r)if(p.intercept({hasViewedAutoSlippageOptIn:e.status,selectedSetting:o.type,setHasViewedAutoSlippageOptIn:t,showOverlay:s})==="interrupt")return"interrupt";return"continue"},[e.status,r,o.type,t])}};i();a();var Sae=Ue(e=>({quoteSpan:void 0,previousBuyAmount:void 0,previousSellAmount:void 0,setQuoteSpan(t){e({quoteSpan:t})},setPreviousBuyAmount(t){e({previousBuyAmount:t})},setPreviousSellAmount(t){e({previousSellAmount:t})}}));i();a();var Fae=Ue(e=>({initialLoadSpan:void 0,setInitialLoadSpan(t){e({initialLoadSpan:t})}}));i();a();var $o=C(R());var kE=l.object({programId:l.string(),complete:l.boolean(),progress:l.string()}),DE=l.object({bondingCurves:l.record(l.string(),kE)});function NE(e){let t=oS(e),r=q().getQueryData(t.queryKey),{data:n,isFetching:s,isError:p}=N({...t,initialData:r,staleTime:0}),u=(0,$o.useMemo)(()=>_t(),[]);return(0,$o.useMemo)(()=>{let c=r===n;if(s&&!c)return{type:"Loading"};if(p)return{type:"Error"};let m=DE.safeParse(n);if(!m.success)return{type:"Error"};let g=m.data.bondingCurves[e];if(!g)return{type:"NoBondingCurve"};let f=u.find(w=>w.programId===g.programId);if(!f)return{type:"NoBondingCurve"};let S=LE(g.progress);return S?g.complete?{type:"Graduated",ugcProgram:f}:{type:c&&s?"BondingCurveRefreshing":"BondingCurve",progressPercentage:S,ugcProgram:f}:{type:"Error"}},[r,e,n,p,s,u])}var BE=e=>{let t=q(),o=oS(e),r=Be.isFeatureEnabled("enable-ugc-swaps");return(0,$o.useCallback)(async()=>{r&&await t.refetchQueries({queryKey:o.queryKey,type:"active"})},[t,o.queryKey,r])},oS=e=>{let t=(0,$o.useMemo)(()=>_t(),[]),o=(0,$o.useMemo)(()=>t.map(n=>n.programId),[t]);return{queryKey:["bonding-curve",e,o],queryFn:()=>UE(e,o)}},UE=async(e,t)=>(await M.api().post("/ugc/v1/bonding-curve",{tokens:[e],programIds:t})).data,LE=e=>{let t=Number(e);if(!isNaN(t))return Math.round(t*100)};i();a();var OE=C(R());var _ae=["simulationRequestErrored","simulationFailed","transactionSubmissionFailed","transactionNotConfirmed"];i();a();var bi=C(R());var ME=["enable","reject"],QE=({continueSwap:e,dismiss:t})=>{let o=K(),{setSlippageSetting:r}=Pe(),n=(0,bi.useCallback)(p=>{switch(t(),p){case"enable":o.capture("autoSlippageOptIn",{data:{step:"enabledAutoSlippage"}}),r({type:"auto"}),Do();break;case"reject":o.capture("autoSlippageOptIn",{data:{step:"rejectedAutoSlippage"}}),r({type:"fixed"}),e();break}},[e,t,r,o]),s=(0,bi.useMemo)(()=>ME.map(p=>({label:B.t(p==="enable"?"swapSlippageOptInEnableOption":"swapSlippageOptInRejectOption"),variant:p==="enable"?"primary":"secondary",onPress:()=>n(p)})),[n]);return{title:B.t("swapSlippageOptInTitle"),description:B.t("swapSlippageOptInSubtitle"),learnMoreText:B.t("commandLearnMore"),learnMoreUrl:ni,options:s}};i();a();var nS=C(R());var qE=({goToAssetSelect:e})=>{let{setSearchQuery:t}=h();return(0,nS.useCallback)(o=>{o==="buy"&&t(""),e(o)},[e,t])};i();a();i();a();i();a();var Or=C(R());i();a();var hc=C(R());i();a();var aS=C(R());i();a();function sS(e){if(e===void 0)return"#999";let t=parseFloat(e.toFixed(2));switch(!0){case t>=5:return"#EB3742";case(t>=1&&e<5):return"#FFDC62";case(e>=0&&e<1):return"#21E56F";default:return"#777777"}}i();a();function iS(e){if(e===void 0)return"-";switch(!0){case e>=1e3:return">1000%";case(e>=.01&&e<1e3):return`${e.toFixed(2)}%`;case(e>0&&e<.01):return"<0.01%";case e===0:return"0%";default:return"-"}}function Ti(e){return(0,aS.useMemo)(()=>{let t="",o="";if(e===void 0)return;let r=e*100;return t=sS(r),o=iS(r),{color:t,text:o,percentage:r}},[e])}i();a();var Fi=({priceImpact:e,slippage:t,displayRefuelRow:o,transferFees:r,shouldShowFees:n,shouldShowPriceImpact:s,shouldShowSlippage:p})=>{let u=[];return e&&e.percentage>Rp&&u.push("highPriceImpact"),t&&t.percentage>=Pp&&u.push("highSlippage"),(r?.totalPercentFees??0)>0&&u.push("transferFees"),u.push("providerPressable"),u.push("exchangeRate"),n&&u.push("fees"),s&&u.push("priceImpact"),p&&u.push("slippage"),o&&u.push("refuel"),u};i();a();function Ii(e){let t="",o="";if(e!==void 0)return t=GE(e),o=VE(e),{color:t,text:o,percentage:e}}function GE(e){let t=parseFloat(e.toFixed(2));switch(!0){case t>2:return"#EB3742";case(t>=1&&e<=2):return"#FFDC62";default:return"#777777"}}function VE(e){switch(!0){case e>=1e3:return">1000%";case(e>=.01&&e<1e3):return`${e.toFixed(2)}%`;case(e>0&&e<.01):return"<0.01%";case e===0:return"0%";default:return"-"}}i();a();var vi=e=>e.reduce((t,o)=>{if(!o||o.type!=="SPL")return t;let r;return o.type==="SPL"&&(r=KE(o)),r?{fees:[...t.fees,r],totalPercentFees:t.totalPercentFees+r.percentFee}:t},{fees:[],totalPercentFees:0}),KE=e=>{if(e.type!=="SPL")return;let o=(e.data.mintExtensions??[]).find(r=>r.extension==="transferFeeConfig");if(o)return{caip19:se(G(e)),fungibleKey:e.data.key,symbol:e.data.symbol??"",name:e.data.name??"",percentFee:o.state.newerTransferFee.transferFeeBasisPoints/100}};var pS=()=>{let{currentQuote:e,quoteResponse:t}=Q(),o=Ti(Ur(e)),r=(0,hc.useMemo)(()=>Ii(t?.slippageTolerance),[t?.slippageTolerance]),{showRefuelOption:n,refuelAmount:s}=Uo(),p=n&&!!s,u=h(S=>S.sellFungible),c=h(S=>S.buyFungible),m=(0,hc.useMemo)(()=>vi([u,c]),[u,c]),{data:[g]}=pe(["enable-swapper-skip-review"]);return{logSwapHomeState:()=>{let S=Fi({priceImpact:o,slippage:r,displayRefuelRow:p,transferFees:m,shouldShowFees:g,shouldShowPriceImpact:!!o&&g,shouldShowSlippage:!!r&&g}),w={slippage:JSON.stringify(r),priceImpact:JSON.stringify(o),rows:S};O.addBreadcrumb("swapper","swap-home","info",Yo(w))}}};i();a();var uS=C(R());i();a();function cS({sellFungible:e,totalFees:t,minRequiredBalance:o,currentQuote:r}){let n=t.maxAmount??t.amount,s=e?.type?De(e?.type):!1,{source:p,destination:u}=o;if(s){let c=new Z(r?.sellAmount??0);return n.plus(c)}else{let c=p.plus(u);return n.plus(c)}}var lS=()=>{let{currentQuote:e}=Q(),{totalFees:t}=st(),o=h(p=>p.sellFungible),r=Nr(),n=Dr();return(0,uS.useMemo)(()=>cS({sellFungible:o,totalFees:t,minRequiredBalance:{source:r,destination:n},currentQuote:e}),[o,t,r,n,e])};i();a();function mS({sellFungible:e,sellNativeFungible:t,totalNativeRequirement:o}){let r=e?.data.chain.id,n=t?Ee(t.data.amount,t.data.decimals):"-",s=t?Ee(o,t.data.decimals):"-";return{networkId:r,balance:n,required:s}}i();a();function dS({quoteResponse:e,hasInsufficientBalance:t,insufficientBalanceArgs:o,isTermsAcknowledged:r,shouldSkipSwapReview:n,logSwapHomeState:s,goToInsufficientBalance:p,goToSwapTermsOfService:u,goToSwapReview:c,onSwap:m,executeInterceptors:g}){if(e)t?p(o):(s(),r?g()==="continue"&&(n?m():c()):u());else return}var bc=({goToSwapTermsOfService:e,goToSwapReview:t,goToInsufficientBalance:o,goToConfirmation:r,showOverlay:n})=>{let{data:[s]}=pe(["enable-swapper-skip-review"]),{quoteResponse:p}=Q(),u=h(E=>E.sellFungible),c=u?.data.chain.id,{data:m}=fc(),{logSwapHomeState:g}=pS(),{fungible:f}=lt({key:c?nr(c,void 0):void 0}),S=lS(),w=(0,Or.useMemo)(()=>new Z(f?.data.amount??0).lt(S),[f,S]),y=(0,Or.useMemo)(()=>mS({sellFungible:u,sellNativeFungible:f,totalNativeRequirement:S}),[u,f,S]),A=An({goToConfirmation:r}),{executeInterceptors:b}=Ac(),T=(0,Or.useCallback)(()=>b(n),[b,n]);return{onClick:(0,Or.useCallback)(()=>dS({quoteResponse:p,hasInsufficientBalance:w,insufficientBalanceArgs:y,isTermsAcknowledged:m,shouldSkipSwapReview:s,logSwapHomeState:g,goToInsufficientBalance:o,goToSwapTermsOfService:e,goToSwapReview:t,onSwap:A,executeInterceptors:T}),[p,w,y,m,s,g,o,e,t,A,T])}};i();a();i();a();i();a();var fS=({sellFungible:e,totalFees:t,transactionSpeedsToUnitCost:o,currentQuote:r,isBridge:n,minRequiredBalance:s})=>{let p=e?oi({sellFungible:e,totalFees:t.amount,transactionSpeedsToUnitCost:v.isEVMNetworkID(e.data.chain.id)?o:void 0,isBridge:n,minRequiredBalance:s}):"0",u=e?.data.decimals;return r?.sellAmount?new D(J(r.sellAmount,u??0)).isLessThanOrEqualTo(new D(p)):!0};var gS=({sellFungible:e,isFetchingQuote:t,quoteResponse:o,currentQuote:r,gasEstimation:n,maxGasEstimation:s,hasNoRoutes:p,totalFees:u,transactionSpeedsToUnitCost:c,isBridge:m,minRequiredBalance:g,enableGasEstimationOptimization:f,shouldSkipSwapReview:S})=>{let w=fS({sellFungible:e,totalFees:u,transactionSpeedsToUnitCost:c,currentQuote:r,isBridge:m,minRequiredBalance:g});switch($E({quoteResponse:o,sellFungible:e,currentQuote:r,hasNoRoutes:p,hasEnoughAssets:w,isFetchingQuote:t,gasEstimation:n,maxGasEstimation:s,enableGasEstimationOptimization:f,shouldSkipSwapReview:S})){case"notSwappable":return{title:B.t("swapReviewFlowActionButtonPrimary"),type:"secondary",disabled:!0};case"swappable":return{title:B.t("swapReviewFlowActionButtonPrimary"),type:"primary",disabled:!1};case"reviewable":return{title:B.t("swapFlowActionButtonText"),type:"primary",disabled:!1};case"notReviewable":return{title:B.t("swapFlowActionButtonText"),type:"secondary",disabled:!0};case"insufficientBalance":return{title:B.t("swapReviewInsufficientBalance"),type:"alert",disabled:!0};case"noRoutes":return{title:B.t("swapNoQuotesFound"),type:"secondary",disabled:!0}}},HE=({sellFungible:e,enableGasEstimationOptimization:t})=>{let o=e?.data.chain.id??$.Solana.Mainnet;return t?v.isEVMNetworkID(o):!0};function $E({quoteResponse:e,sellFungible:t,currentQuote:o,hasNoRoutes:r,hasEnoughAssets:n,isFetchingQuote:s,gasEstimation:p,maxGasEstimation:u,enableGasEstimationOptimization:c,shouldSkipSwapReview:m}){if(!n)return"insufficientBalance";if(r)return"noRoutes";let g=HE({sellFungible:t,enableGasEstimationOptimization:c}),f=(p??[]).length>0&&(u??[]).length>0;return!e||!t||!o||g&&!f||s?m?"notSwappable":"notReviewable":m?"swappable":"reviewable"}function zE({goToInsufficientBalance:e,goToSwapReview:t,goToSwapTermsOfService:o,goToConfirmation:r,showOverlay:n}){let{currentQuote:s,isFetchingQuote:p,quoteResponse:u}=Q(),{data:[c,m]}=pe(["enable-swapper-gas-estimation-optimization","enable-swapper-skip-review"]),g=h(L=>L.hasNoRoutes),f=h(L=>L.sellFungible),S=f?.data.chain.id,w=h(L=>L.gasEstimation),y=h(L=>L.maxGasEstimation),b=h(L=>L.buyFungible)?.data.chain.id,T=Ie(S,b),{totalFees:F}=st(),{data:E}=On({networkID:S}),I=Nr(),x=Dr(),{title:k,type:P,disabled:z}=gS({sellFungible:f,currentQuote:s,quoteResponse:u,isFetchingQuote:p,isBridge:T,gasEstimation:w,maxGasEstimation:y,hasNoRoutes:g,totalFees:F,transactionSpeedsToUnitCost:E,minRequiredBalance:{source:I,destination:x},enableGasEstimationOptimization:c,shouldSkipSwapReview:m}),{onClick:j}=bc({goToInsufficientBalance:e,goToSwapReview:t,goToSwapTermsOfService:o,goToConfirmation:r,showOverlay:n});return{disabled:z,title:k,type:P,onClick:j}}i();a();i();a();var vn=C(R());i();a();var Mr=C(R());var jE=D(1);function yS(e,t,o){let r=K(),[n,s]=(0,Mr.useState)(!1),p=(0,Mr.useCallback)(async()=>{await r.capture("swapperToggleBestPriceRatio",{data:{unitCurrency:n?"buy token":"sell token"}}),s(!n)},[r,n]),u=h(m=>m.sellFungible),c=h(m=>m.buyFungible);return(0,Mr.useMemo)(()=>{let m=!1,g="";if(t&&o){let f=c?.data,S=u?.data;if(f&&S){let{buyAmount:w,sellAmount:y}=o,A=J(w,f.decimals),b=J(y,S.decimals),T=A.dividedBy(b),F=`1 ${S.symbol} \u2248 ${Rr(T)} ${f.symbol}`,E=`1 ${f.symbol} \u2248 ${Rr(jE.dividedBy(T))} ${S.symbol}`;m=new D(o.buyAmount).isEqualTo(e),g=n?E:F}}return{isBestRate:m,rate:g,flip:p}},[e,o,n,t,u,c,p])}i();a();var SS=({buyNetwork:e,sellNetwork:t,executionDuration:o,priceImpact:r,slippage:n,displayRefuelRow:s})=>{let p=[];return p.push("provider"),p.push("exchangeRate"),e&&t&&e!==t&&p.push("network"),p.push("fees"),o>0&&p.push("executionDuration"),r&&p.push("priceImpact"),n&&p.push("slippage"),s&&p.push("refuel"),p};function WE({isSwapReview:e,showProviders:t}){let{bestBuyAmount:o,currentQuote:r,hasNoRoutes:n,quoteResponse:s,quotes:p,isFetchingQuote:u}=Q(),c=yS(o,s,r),m=Ti(Ur(r)),g=In(),f=(0,vn.useMemo)(()=>Ii(g),[g]),S=Si(gt(r)),w=gi(r),y=Mo(w),[A]=(0,vn.useState)(y),b=s?.sellToken?.chainId?v.getChainName(s.sellToken.chainId):void 0,T=s?.buyToken?.chainId?v.getChainName(s.buyToken.chainId):void 0,F=st(),E=mc(F),{showRefuelOption:I,refuelAmount:x}=Uo(),k=h(V=>V.sellFungible),P=h(V=>V.buyFungible),z=(0,vn.useMemo)(()=>vi([k,P]),[k,P]),{data:[j]}=pe(["enable-swapper-skip-review"]),L=I&&(!e||!!x),W={exchangeRate:c,priceImpact:m,slippage:f,provider:S,fees:F,executionDuration:w,uiEstimatedTime:A,isFetchingQuote:u,sellNetwork:b,buyNetwork:T,feeBreakdown:E,selectProviderEnabled:!e&&!!S,isSwapReview:e,showProviders:t,transferFees:z},Se=e?SS({exchangeRate:c,priceImpact:m,slippage:f,displayRefuelRow:L,buyNetwork:T,sellNetwork:b,executionDuration:w}):Fi({priceImpact:m,slippage:f,displayRefuelRow:L,transferFees:z,shouldShowFees:j,shouldShowPriceImpact:!!m&&j,shouldShowSlippage:!!f&&j});return{exchangeRate:c,hasNoRoutes:n,priceImpact:m,slippage:f,provider:S,fees:F,nrOfQuotes:p.length,executionDuration:w,isFetchingQuote:u,sellNetwork:b,buyNetwork:T,rows:Se,sharedRowProps:W}}i();a();var hS=C(R());i();a();var Qt=()=>!0,wS={tokens:Qt,prices:vu,collectibles:xu,currency:ou,staking:Du,swapper:lc,transferFungibleLoggingContext:Qt,user:jc,[ru]:Qt,[oo]:Qt,[xs]:Qt,[Ru]:Qt,[Wr]:Qt,[Pu]:Qt,[dt]:Qt,"test-debug-query":xn},AS=e=>{if(e.queryKey.length===0||e.state.status!=="success")return!1;let t=String(e.queryKey[0]);return wS[t]?wS[t](e):!1};var YE=new Rc({defaultOptions:{mutations:{retry:!1,networkMode:"offlineFirst"},queries:{retry:!1,staleTime:1/0,gcTime:1/0,refetchOnWindowFocus:!1,networkMode:"offlineFirst"}}}),XE=xc({underlyingStorage:new Au,throttleMs:1e3,enableDebugLogs:xn()}),sme=e=>hS.default.createElement(Pc,{client:YE,persistOptions:{persister:XE,dehydrateOptions:{shouldDehydrateQuery:AS},buster:JE,maxAge:1/0}},e.children),JE="24.26.0";i();a();var ZE=(_=>(_.HasOnboarded="hasOnboarded",_.ResetHasOnboarded="resetHasOnboarded",_.LockExtension="lockExtension",_.UnlockExtension="unlockExtension",_.IsExtensionUnlocked="IsExtensionUnlocked",_.SetPassword="setPassword",_.VerifyPassword="verifyPassword",_.UpdatePassword="updatePassword",_.ImportPrivateKeyAccount="importPrivateKeyAccount",_.ImportReadOnlyAccount="importReadOnlyAccount",_.ImportSeedAccount="importSeedAccount",_.ImportSeedlessAccount="importSocialSeedAccount",_.IsExistingSeed="isExistingSeed",_.AddAccountForSeed="addAccountForSeed",_.AddAccountForSeedless="addAccountForSeedless",_.AddLedgerAccounts="addLedgerAccounts",_.DeriveAddresses="deriveAddresses",_.ExportPrivateKey="exportPrivateKey",_.ExportEntropy="exportEntropy",_.SetAccountIcon="setAccountIcon",_.RemoveAccount="removeAccount",_.ReorderAccount="reorderAccount",_.GetAllAccounts="getAllAccounts",_.GetAllSeeds="getAllSeeds",_.GetAllSeedless="getAllSeedlessSeeds",_.GetAuthenticationPublicKey="getAuthenticationPublicKey",_.Sign="sign",_.SyncAccounts="syncAccounts",_.CheckVaultIntegrity="checkVaultIntegrity",_.LogMessage="logMessage",_.DownloadLogs="downloadLogs",_.ProviderInjectionOptions="providerInjectionOptions",_))(ZE||{});i();a();function mme(e,t,o=Date.now()){return{jsonrpc:"2.0",id:o,method:e,params:t}}export{vy as a,gte as b,hee as c,RS as d,jS as e,Lu as f,Ni as g,QS as h,mt as i,qS as j,qn as k,$i as l,YS as m,XS as n,zi as o,ji as p,_e as q,cw as r,ew as s,tw as t,ow as u,zr as v,El as w,rw as x,nw as y,Nl as z,GT as A,HT as B,RT as C,PT as D,en as E,Rm as F,Ba as G,ap as H,MT as I,YT as J,tF as K,nF as L,ft as M,fF as N,u0 as O,Dd as P,l0 as Q,m0 as R,d0 as S,Nd as T,SF as U,hF as V,lp as W,mp as X,bF as Y,RF as Z,PF as _,TF as $,ko as aa,vF as ba,kF as ca,Wd as da,EF as ea,DF as fa,h as ga,Kp as ha,Q as ia,Ut as ja,_p as ka,_o as la,ot as ma,BF as na,UF as oa,dn as pa,uI as qa,Uo as ra,dI as sa,An as ta,bI as ua,TI as va,iv as wa,dv as xa,vI as ya,Av as za,PI as Aa,mc as Ba,Qo as Ca,qp as Da,bv as Ea,vv as Fa,Ev as Ga,BI as Ha,xv as Ia,UI as Ja,zv as Ka,jv as La,Wv as Ma,Yv as Na,Xv as Oa,Cv as Pa,fc as Qa,Zv as Ra,zE as Sa,In as Ta,eE as Ua,tE as Va,rE as Wa,nE as Xa,NE as Ya,BE as Za,Jy as _a,WE as $a,QE as ab,qE as bb,AS as cb,YE as db,sme as eb,ZE as fb,mme as gb};
//# sourceMappingURL=chunk-LTUJMY6D.js.map
