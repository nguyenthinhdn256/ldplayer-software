"use strict";(self.webpackChunk_tonkeeper_extension=self.webpackChunk_tonkeeper_extension||[]).push([[580],{31580:(e,n,t)=>{t.r(n),t.d(n,{default:()=>un});var s=t(80184),r=t(72791),i=t(23098),d=t(89242),a=t(30168),o=t(24539),l=t(65867),c=t(61945),u=t(26313),m=t(86704),x=t(91153),h=t(79309),f=t(5784),p=t(26503),j=t(47712),v=t(88754),g=t(68827),_=t(13093),w=t(11707);function b(e){return!!e.dns}var k=t(76978),Z=t(1849),C=t(40213),y=t(12020),P=t(27127),S=t(82820),T=t(34692);function A(e){var n;const t=(0,x.rT)();return void 0!==e.sale||!(0,P._k)(t.rawAddress,null===(n=e.owner)||void 0===n?void 0:n.address)}var F=t(41235),N=t(12116),R=t(33945),L=t(3280),B=t(29205);const I=e=>{const n=(0,N.qM)(N.SE),t=(0,B.Q)(n),s=(0,R.Hj)(),r=(0,x.Mu)().activeTonWallet.rawAddress;return(0,F.useQuery)(["estimate-link-nft",e.nftAddress,e.linkToAddress,s,t,r],(async()=>{const t=new L.w(r);return s.estimate(await n(),t.encodeNftLink(e))}),{enabled:!!n})};var z=t(55251),E=t(33455);const M=e=>{const n=(0,N.IS)(),t=(0,R.Hj)(),s=(0,x.Mu)(),r=(0,E.BJ)(),i=s.activeTonWallet.rawAddress;return(0,F.useMutation)((async()=>{const s=new L.w(i);return await t.send(await n(N.SE),z.ds,s.encodeNftLink(e)),r("link-dns"),!0}))};var O=t(37923);function D(e,n){const[t,s]=(0,r.useState)(!1),[i,d]=(0,r.useState)(!1),[a,o]=(0,r.useState)(!1),l=(0,r.useRef)(e.data),c=async()=>{const t=await e.refetch();if(a&&s(!1),n(t.data,l.current))return s(!1),void d(!0);l.current=t.data,setTimeout(c,1e3)};return(0,r.useEffect)((()=>()=>o(!0)),[]),{isLoading:t,isCompleted:i,data:e.data,refetch:function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;l.current=e.data,s(!0),o(!1),d(!1),setTimeout((()=>{t&&o(!0)}),n),c()}}}var W,H,V,G,$=t(73643),Q=t(59598),q=t(90820),J=t(38705),U=t(98502),Y=t(33375);const K=e=>{var n;let{nft:t}=e;const i=(0,Y.pm)(),{t:d}=(0,c.$G)(),a=(0,m.Lc)(t),{data:o,isLoading:l}=a,u=(null===o||void 0===o||null===(n=o.wallet)||void 0===n?void 0:n.address)||"",{refetch:x,isLoading:h,isCompleted:f}=D(a,((e,n)=>{var t,s;return!(null===n||void 0===n||null===(t=n.wallet)||void 0===t||!t.address)!==!(null===e||void 0===e||null===(s=e.wallet)||void 0===s||!s.address)}));return(0,r.useEffect)((()=>{f&&i(d(u?"dns_address_linked":"dns_address_unlinked"))}),[f,u]),u?(0,s.jsx)(ae,{nft:t,linkedAddress:u,isLoading:h,refetch:x}):(0,s.jsx)(te,{nft:t,isLoading:l||h,refetch:x})},X=(0,l.ZP)(j.pN)(W||(W=(0,a.Z)(["\n    cursor: pointer;\n    color: ",";\n    pointer-events: ",";\n"])),(e=>e.isDisabled?e.theme.textSecondary:e.theme.textAccent),(e=>e.isDisabled?"none":"unset")),ee=new T.Z(.02),ne=k.n.fromRelativeAmount({asset:Z.Ct,amount:ee}),te=e=>{let{nft:n,isLoading:t,refetch:i}=e;const a=(0,Y.Qb)(),{t:o}=(0,c.$G)(),[l,u]=(0,r.useState)(),m=(0,x.rT)(),[h,f]=(0,r.useState)(m.rawAddress),j=e=>{if("wallet"===l)return u("confirm");u(void 0),e?i():f(m.rawAddress)},{recipient:g,isLoading:_}=(0,O._)(n.address),{refetch:w,...b}=I({nftAddress:n.address,linkToAddress:h}),k=(0,r.useCallback)((async e=>{f(e),await w(),u("confirm")}),[w,n.address]),Z=M({nftAddress:n.address,linkToAddress:h}),C=(0,P.ks)(h,m.rawAddress),y=(0,x.i7)(),T=(0,r.useCallback)((()=>(0,s.jsx)(ie,{onSave:k,isLoading:b.isFetching,domain:n.dns})),[k,b.isFetching]),F=A(n),N=(0,S.s)(n.dns);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.zx,{type:"button",size:"large",secondary:!0,fullWidth:!0,disabled:F,loading:b.isFetching||_||t,onClick:()=>{b.error?a(b.error):u("confirm")},children:o(N?"nft_link_username_button":"nft_link_domain_button")}),(0,s.jsx)(d.P_,{title:o("wallet"===l?"wallet_address":"send_screen_steps_comfirm_title"),isOpen:!!l,hideButton:!0,handleClose:()=>j(),backShadow:!0,children:"wallet"===l?T:()=>(0,s.jsxs)(J.vp,{onClose:j,recipient:g,assetAmount:ne,fitContent:!0,estimation:b,...Z,children:[(0,s.jsx)(J.tv,{}),(0,s.jsx)(J.eZ,{}),(0,s.jsxs)(J.CP,{children:[(0,s.jsx)(p.HC,{hover:!1,children:(0,s.jsxs)(p.me,{children:[(0,s.jsx)(Q.__,{children:o(C?"dns_current_address":"wallet_address")}),(0,s.jsx)($.Uc,{right:!0,text:(0,P.FN)((0,P.Tg)(h,y)),secondary:(0,s.jsx)(X,{isDisabled:Z.isLoading,onClick:()=>u("wallet"),children:o("replace")})})]})}),(0,s.jsx)(J.pk,{}),(0,s.jsx)(J.RB,{})]}),(0,s.jsx)(J.mC,{children:(0,s.jsx)(J.uq,{MainButton:U.Rn})})]})})]})},se=(0,l.ZP)(j.mI)(H||(H=(0,a.Z)(["\n    color: ",";\n    margin-bottom: 1.5rem;\n"])),(e=>e.theme.textSecondary)),re=(0,l.ZP)(d.QT)(V||(V=(0,a.Z)(["\n    align-items: flex-start;\n"]))),ie=e=>{let{onSave:n,isLoading:t,domain:i}=e;const{t:d}=(0,c.$G)(),[a,o]=(0,r.useState)(""),[l,u]=(0,r.useState)(!1),m=(0,r.useMemo)((()=>{if(!l)return!0;try{return w.Address.parse(a),!0}catch{return!1}}),[l,a]);return(0,s.jsxs)(re,{onSubmit:e=>{e.stopPropagation(),e.preventDefault(),u(!0);try{n(w.Address.parse(a).toRawString())}catch(t){console.error(t)}},children:[(0,s.jsx)(se,{children:d("add_dns_address").replace("%1%",i)}),(0,s.jsx)(q.II,{id:"dns-address",disabled:t,isValid:m,value:a,onChange:o,label:d("wallet_address"),clearButton:!0}),(0,s.jsx)($.Zv,{}),(0,s.jsx)(v.zx,{fullWidth:!0,size:"large",primary:!0,disabled:!a,loading:t,children:"Save"})]})},de=(0,l.ZP)(j.pN)(G||(G=(0,a.Z)(["\n    text-align: center;\n    color: ",";\n"])),(e=>e.theme.accentOrange)),ae=e=>{let{nft:n,linkedAddress:t,isLoading:i,refetch:a}=e;const o=(0,Y.Qb)(),{t:l}=(0,c.$G)(),u=(0,x.rT)(),[m,h]=(0,r.useState)(!1),f=e=>{h(!1),!0===e&&a()},{recipient:p,isLoading:j}=(0,O._)(n.address),g=I({nftAddress:n.address,linkToAddress:""}),_=M({nftAddress:n.address,linkToAddress:""}),w=A(n),b=(0,S.s)(n.dns),k=(0,x.i7)(),Z=Object.values((0,C.jh)(u)?(0,y.$R)(u.publicKey,k):{}).every((e=>{let{address:n}=e;return!(0,P.ks)(n.toRawString(),t)}));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.zx,{type:"button",size:"large",secondary:!0,fullWidth:!0,disabled:w,loading:g.isFetching||j||i,onClick:()=>{g.error?o(g.error):h(!0)},children:l("nft_unlink_domain_button").replace("{{address}}",(0,P.FN)((0,P.Tg)(t,k)))}),Z&&!i&&(0,s.jsx)(de,{children:l(b?"tme_linked_with_another_address_warn":"dns_linked_with_another_address_warn")}),(0,s.jsx)(d.P_,{title:l("confirm_unlink"),isOpen:m,hideButton:!0,handleClose:()=>f(),backShadow:!0,children:()=>(0,s.jsxs)(J.vp,{onClose:f,recipient:p,assetAmount:ne,fitContent:!0,estimation:g,..._,children:[(0,s.jsx)(J.tv,{}),(0,s.jsx)(J.eZ,{}),(0,s.jsxs)(J.CP,{children:[(0,s.jsx)(J.pk,{}),(0,s.jsx)(J.RB,{})]}),(0,s.jsx)(J.mC,{children:(0,s.jsx)(J.uq,{MainButton:U.Rn})})]})})]})};var oe=t(79297);var le,ce,ue,me=t(17636);const xe=l.ZP.div(le||(le=(0,a.Z)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n"]))),he=(0,l.ZP)(v.zx)(ce||(ce=(0,a.Z)(["\n    margin-bottom: 0.75rem;\n"]))),fe=(0,l.ZP)(j.pN)(ue||(ue=(0,a.Z)(["\n    color: ",";\n"])),(e=>e.danger?e.theme.accentRed:e.theme.textSecondary)),pe=k.n.fromRelativeAmount({asset:Z.Ct,amount:new T.Z(.02)}),je={year:"numeric",hour:void 0,minute:void 0},ve=e=>{let{nft:n}=e;const t=(0,Y.pm)(),i=A(n),a=(0,Y.Qb)(),{t:o,i18n:{language:l}}=(0,c.$G)(),u=new Intl.RelativeTimeFormat((0,oe.l1)(l),{style:"long"}),h=(0,m.id)(n),{data:f,isLoading:p}=h,{refetch:j,isLoading:v,isCompleted:g}=D(h,((e,n)=>!(null===e||void 0===e||!e.getTime())&&e.getTime()!==(null===n||void 0===n?void 0:n.getTime())));(0,r.useEffect)((()=>{g&&t(o("renew_nft_renewed"))}),[g]);const _=(0,me.W)(Date.now()+316224e5,je),[w,b]=(0,r.useState)(!1),k=e=>{b(!1),e&&j()},{recipient:Z,isLoading:C}=(0,O._)(n.address),y=(e=>{const n=(0,N.qM)(N.SE),t=(0,B.Q)(n),s=(0,R.Hj)(),r=(0,x.Mu)().activeTonWallet.rawAddress;return(0,F.useQuery)(["estimate-nft-renew",e.nftAddress,s,t,r],(async()=>{const t=new L.w(r);return s.estimate(await n(),t.encodeNftRenew(e))}),{enabled:!!n})})({nftAddress:n.address}),P=(e=>{const n=(0,N.IS)(),t=(0,R.Hj)(),s=(0,x.Mu)(),r=(0,E.BJ)(),i=s.activeTonWallet.rawAddress;return(0,F.useMutation)((async()=>{const s=new L.w(i);return await t.send(await n(N.SE),z.ds,s.encodeNftRenew(e)),r("renew-dns"),!0}))})({nftAddress:n.address});if(!p&&!f)return null;const S=(0,me.V)(f);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(xe,{children:[(0,s.jsx)(he,{type:"button",disabled:i||v,loading:p||y.isFetching||C,onClick:()=>{y.error?a(y.error):b(!0)},size:"large",secondary:!0,fullWidth:!0,children:v?o("renew_nft_in_progress"):o("dns_renew_until_btn").replace("%{untilDate}",_)}),""!==S&&(0,s.jsx)(fe,{danger:Number(S)<=30,children:o("renew_nft_expiration_date").replace("%1%",u.format(Number(S),"days"))})]}),(0,s.jsx)(d.P_,{isOpen:w,hideButton:!0,handleClose:()=>k,backShadow:!0,children:()=>(0,s.jsx)(J.vp,{onClose:k,recipient:Z,assetAmount:pe,fitContent:!0,estimation:y,...P,children:(0,s.jsx)(J.mC,{children:(0,s.jsx)(J.uq,{MainButton:U.Rn})})})})]})};var ge,_e;const we=e=>{const{marketplace:n}=e.metadata,t=w.Address.parse(e.address).toString();return"https://getgems.io/nft/".concat(t)},be=e=>{let{url:n}=e;const{t:t}=(0,c.$G)(),r=(0,i._)();return(0,s.jsx)(v.zx,{size:"large",secondary:!0,fullWidth:!0,onClick:e=>{e.preventDefault(),e.stopPropagation(),r.openPage(n)},children:t("nft_open_in_marketplace")})},ke=e=>{var n;let{nftItem:t}=e;const r=(0,i._)(),{t:d}=(0,c.$G)(),a=(0,x.rT)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.zx,{primary:!0,size:"large",fullWidth:!0,disabled:void 0!==t.sale||(null===(n=t.owner)||void 0===n?void 0:n.address)!==a.rawAddress,onClick:e=>{e.preventDefault(),e.stopPropagation(),r.uiEvents.emit("transferNft",{method:"transferNft",params:t})},children:d("nft_transfer_nft")}),t.sale&&(0,s.jsx)(Ce,{children:d("nft_on_sale_text")})]})},Ze=(0,l.ZP)(j.pN)(ge||(ge=(0,a.Z)(["\n    width: 100%;\n    color: ",";\n"])),(e=>e.theme.textSecondary)),Ce=(0,l.ZP)(Ze)(_e||(_e=(0,a.Z)(["\n    width: 100%;\n    padding: 0 1rem;\n    text-align: left;\n"]))),ye=e=>{let{kind:n,nftItem:t}=e;if((0,x.TH)())return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(be,{url:we(t)})});switch(n){case"token":return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ke,{nftItem:t}),(0,s.jsx)(be,{url:we(t)})]});case"ton.dns":var r;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ke,{nftItem:t}),(0,s.jsx)(be,{url:"https://dns.ton.org/#".concat(null===(r=t.dns)||void 0===r?void 0:r.slice(0,-4))}),b(t)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(K,{nft:t}),(0,s.jsx)(ve,{nft:t})]})]});case"telegram.number":{const e=t.metadata.name.replace(/\s/g,"").slice(1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ke,{nftItem:t}),(0,s.jsx)(be,{url:"https://fragment.com/number/".concat(e)})]})}case"telegram.name":var i;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ke,{nftItem:t}),(0,s.jsx)(be,{url:"https://fragment.com/username/".concat(null===(i=t.dns)||void 0===i?void 0:i.slice(0,-5))}),b(t)&&(0,s.jsx)(K,{nft:t})]})}};var Pe,Se,Te,Ae;const Fe=l.ZP.div(Pe||(Pe=(0,a.Z)(["\n    width: 100%;\n"]))),Ne=l.ZP.div(Se||(Se=(0,a.Z)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 0.625rem;\n"]))),Re=(0,l.ZP)(j.RV)(Te||(Te=(0,a.Z)(["\n    cursor: pointer;\n    color: ",";\n"])),(e=>e.theme.textAccent)),Le=(0,l.ZP)(j.mI)(Ae||(Ae=(0,a.Z)(["\n    color: ",";\n"])),(e=>e.theme.textSecondary)),Be=r.memo((e=>{var n,t;let{nftItem:r}=e;const{t:d}=(0,c.$G)(),{data:a}=(0,m.T_)(r.address),{data:o,isLoading:l}=(0,m.id)(r),u=(0,me.W)(o,{year:"numeric",hour:void 0,minute:void 0}),h=null!==a&&void 0!==a?a:r,v=(0,i._)(),g=(0,x.TB)(),_=null===(n=h.owner)||void 0===n?void 0:n.address,b=w.Address.parse(h.address).toString(),k=(0,x.i7)(),Z=null!==(t=g.NFTOnExplorerUrl)&&void 0!==t?t:"https://tonviewer.com/nft/%s",C=(0,P.Tg)(b,k,!0);return(0,s.jsxs)(Fe,{children:[(0,s.jsxs)(Ne,{children:[(0,s.jsx)(j.H3,{children:d("nft_details")}),(0,s.jsx)(Re,{onClick:()=>v.openPage(Z.replace("%s",b)),children:d("nft_view_in_explorer")})]}),(0,s.jsxs)(p.L8,{margin:!1,children:[_&&(0,s.jsx)(p.HC,{onClick:()=>v.copyToClipboard((0,P.Tg)(_,k)),children:(0,s.jsxs)(p.me,{children:[(0,s.jsx)(Le,{children:d("nft_owner_address")}),(0,s.jsx)(j.RV,{children:(0,P.FN)((0,P.Tg)(_,k))})]})}),!(!o&&!l)&&(0,s.jsx)(p.HC,{hover:!1,children:(0,s.jsxs)(p.me,{children:[(0,s.jsx)(Le,{children:d("dns_expiration_date")}),o?(0,s.jsx)(j.RV,{children:u}):(0,s.jsx)(f.L4,{})]})}),(0,s.jsx)(p.HC,{onClick:()=>v.copyToClipboard(C),children:(0,s.jsxs)(p.me,{children:[(0,s.jsx)(Le,{children:d("nft_contract_address")}),(0,s.jsx)(j.RV,{children:(0,P.FN)(C)})]})})]})]})}));var Ie,ze,Ee,Me,Oe,De,We,He,Ve,Ge,$e,Qe=t(74639),qe=t(30345);const Je=l.ZP.div(Ie||(Ie=(0,a.Z)(["\n    display: flex;\n    flex-direction: column;\n    padding: 0.875rem 1rem;\n"]))),Ue=l.ZP.div(ze||(ze=(0,a.Z)(["\n    border-top: 1px solid ",";\n"])),(e=>e.theme.separatorCommon)),Ye=(0,l.ZP)(j.RV)(Ee||(Ee=(0,a.Z)(["\n    margin-bottom: 0.5rem;\n"]))),Ke=l.ZP.span(Me||(Me=(0,a.Z)(["\n    position: relative;\n    top: 3px;\n    margin-left: 4px;\n"]))),Xe="0:b774d95eb20543f186c06b371ab88ad704f7e256130caf96189368a7d0cb6ccf",en="0:80d78a35f955a14b679faa887ff4cd5bfc0f43b4a4eea2a7e6927f3701b273c2",nn="0:0e41dc1dc3c9067ed24248580e12b3359818d83dee0304fabcf80845eafafdb2",tn=(0,l.ZP)(j.H2)(Oe||(Oe=(0,a.Z)(["\n    word-break: break-word;\n\n    user-select: none;\n"]))),sn=(0,l.ZP)(j.cV)(De||(De=(0,a.Z)(["\n    color: ",";\n    border: 1px solid ",";\n    border-radius: 6px;\n    padding: 3.5px 6px 4.5px;\n    text-transform: uppercase;\n\n    position: relative;\n    top: -3px;\n\n    white-space: nowrap;\n"])),(e=>e.theme.textSecondary),(e=>e.theme.buttonTertiaryBackground)),rn=(0,l.ZP)(j.pN)(We||(We=(0,a.Z)(["\n    color: ",";\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n"])),(e=>e.isTrusted?e.theme.textSecondary:e.theme.accentOrange)),dn=l.ZP.div(He||(He=(0,a.Z)(["\n    text-align: center;\n"]))),an=l.ZP.div(Ve||(Ve=(0,a.Z)(["\n    display: flex;\n    gap: 8px;\n    width: 100%;\n\n    > * {\n        flex: 1;\n    }\n"]))),on=l.ZP.div(Ge||(Ge=(0,a.Z)(["\n    .drop-down-container {\n        z-index: 100;\n        top: calc(100% + 12px);\n        right: 0;\n    }\n"]))),ln=(0,l.ZP)(p.L8)($e||($e=(0,a.Z)(["\n    margin: 0;\n\n    svg {\n        color: ",";\n    }\n"])),(e=>e.theme.accentBlue)),cn=e=>{var n,t,a,l,w,b,k;let{onClose:Z,nftItem:C}=e;const{mutateAsync:y,isLoading:P}=(0,m.qZ)(),{mutate:S,isLoading:T}=(0,m.Bo)(),{mutateAsync:A}=(0,m.h8)(),{data:F}=(0,x.cr)(),N=C.trust!==o.DPS.Whitelist,R=!(null===F||void 0===F||!F.trustedNfts.includes((null===(n=C.collection)||void 0===n?void 0:n.address)||C.address)),L=(0,r.useRef)(null),{t:B}=(0,c.$G)(),{data:I}=(0,m._7)(C),{description:z}=C.metadata,E=null!==(t=C.dns)&&void 0!==t?t:C.metadata.name,M=(0,r.useMemo)((()=>{var e;switch(null===(e=C.collection)||void 0===e?void 0:e.address){case Xe:return"ton.dns";case en:return"telegram.name";case nn:return"telegram.number";default:return"token"}}),[C]),O=null===C||void 0===C||null===(a=C.collection)||void 0===a?void 0:a.name,D=null===(l=C.previews)||void 0===l?void 0:l.find((e=>"1500x1500"===e.resolution)),{isOpen:W,onClose:H,onOpen:V}=(0,u.q)(),G=(0,x.TB)(),$=(0,i._)(),Q=null!==(w=G.NFTOnExplorerUrl)&&void 0!==w?w:"https://tonviewer.com/nft/%s";return(0,s.jsxs)(d.QT,{children:[Z&&(0,s.jsxs)(d.hy,{children:[(0,s.jsx)(g.z,{onClick:Z,children:(0,s.jsx)(f.v4,{})}),(0,s.jsxs)(dn,{children:[(0,s.jsx)(j.H3,{children:null!==(b=C.dns)&&void 0!==b?b:C.metadata.name}),N&&(0,s.jsxs)(rn,{isTrusted:R,onClick:V,children:[B("suspicious_label_full"),"\xa0",(0,s.jsx)(f.uM,{color:R?"textSecondary":"accentOrange"})]})]}),(0,s.jsx)(qe.i,{isOpen:W,onClose:e=>{"mark_spam"===e?y(C).then(Z):"mark_trusted"===e&&S(C),H()},isTrusted:R}),(0,s.jsx)(on,{children:(0,s.jsx)(h.vb,{containerClassName:"drop-down-container",payload:e=>(0,s.jsxs)(ln,{children:[(0,s.jsx)(p.Sp,{onClick:()=>{e(),A(C).then(Z)},children:(0,s.jsxs)(p.me,{children:[(0,s.jsx)(j.RV,{children:B("nft_actions_hide_nft")}),(0,s.jsx)(f.d9,{})]})}),(0,s.jsx)(p.Sp,{onClick:()=>{e(),y(C).then(Z)},children:(0,s.jsxs)(p.me,{children:[(0,s.jsx)(j.RV,{children:B("nft_actions_hide_and_report")}),(0,s.jsx)(f.wD,{})]})}),(0,s.jsx)(p.Sp,{onClick:()=>$.openPage(Q.replace("%s",C.address)),children:(0,s.jsxs)(p.me,{children:[(0,s.jsx)(j.RV,{children:B("nft_actions_view_on_explorer")}),(0,s.jsx)(f.n9,{})]})})]}),children:(0,s.jsx)(g.z,{children:(0,s.jsx)(f.ws,{})})})})]}),N&&!R&&(0,s.jsxs)(an,{children:[(0,s.jsx)(v.zx,{warn:!0,type:"button",onClick:()=>y(C).then(Z),loading:P,children:B("suspicious_buttons_report")}),(0,s.jsx)(v.zx,{type:"button",onClick:()=>S(C),loading:T,children:B("suspicious_buttons_not_spam")})]}),(0,s.jsxs)(Qe.qR,{children:[D&&(0,s.jsx)(Qe.Ee,{ref:L,url:D.url}),(0,s.jsxs)(Je,{children:[(0,s.jsxs)(tn,{children:[E,C.sale&&(0,s.jsxs)(s.Fragment,{children:["  ",(0,s.jsx)(sn,{children:B("nft_on_sale")})]})]}),O&&(0,s.jsxs)(_.u,{open:!0,margin:"small",children:[O,C.approvedBy&&C.approvedBy.length>0&&(0,s.jsx)(Ke,{children:(0,s.jsx)(f.of,{})})]}),z&&(0,s.jsx)(_.F,{text:z,margin:"last",contentColor:!0})]}),I&&(null===(k=I.metadata)||void 0===k?void 0:k.description)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Ue,{}),(0,s.jsxs)(Je,{children:[(0,s.jsx)(Ye,{children:B("nft_about_collection")}),(0,s.jsx)(_.F,{text:I.metadata.description,margin:"last",contentColor:!0})]})]})]}),(0,s.jsx)(ye,{nftItem:C,kind:M}),(0,s.jsx)(Be,{nftItem:C,kind:M})]})},un=()=>{const e=(0,i._)(),[n,t]=(0,r.useState)(void 0),a=(0,r.useCallback)((()=>{t(void 0)}),[t]);(0,r.useEffect)((()=>{const n=e=>{t(e.params)};return e.uiEvents.on("nft",n),()=>{e.uiEvents.off("nft",n)}}),[e,t]);const o=(0,r.useCallback)((()=>{if(n)return(0,s.jsx)(cn,{onClose:a,nftItem:n})}),[n,a]);return(0,s.jsx)(d.P_,{isOpen:void 0!==n,hideButton:!0,handleClose:a,backShadow:!0,children:o})}},74639:(e,n,t)=>{t.d(n,{Ee:()=>y,JQ:()=>F,qR:()=>Z});var s,r,i,d,a,o,l,c,u,m,x=t(30168),h=t(80184),f=t(72791),p=t(65867),j=t(87594),v=t(23098),g=t(17636),_=t(5784),w=t(67418),b=t(86704);const k=p.ZP.div(s||(s=(0,x.Z)(["\n    display: grid;\n    margin: 0 0 2rem 0;\n    gap: 0.5rem;\n    grid-template-columns: repeat(3, minmax(0, 1fr));\n"]))),Z=p.ZP.div(r||(r=(0,x.Z)(["\n    position: relative;\n    user-select: none;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n\n    background-color: ",";\n    transition: background-color 0.1s ease;\n\n    border-radius: ",";\n\n    overflow: hidden;\n\n    ","\n"])),(e=>e.theme.backgroundContent),(e=>e.theme.cornerSmall),(e=>e.ios?e.isHover?(0,p.iv)(i||(i=(0,x.Z)(["\n                    background-color: ",";\n                "])),e.theme.backgroundContentTint):void 0:e.hover?(0,p.iv)(d||(d=(0,x.Z)(["\n                    cursor: pointer;\n\n                    &:hover {\n                        background-color: ",";\n                    }\n                "])),e.theme.backgroundContentTint):void 0)),C=p.ZP.div(a||(a=(0,x.Z)(["\n    width: 100%;\n    position: relative;\n"]))),y=p.ZP.div(o||(o=(0,x.Z)(["\n    width: 100%;\n    padding-bottom: 100%;\n\n    ","\n    background-size: cover;\n"])),(e=>e.url&&(0,p.iv)(l||(l=(0,x.Z)(["\n            background-image: url('","');\n        "])),e.url))),P=p.ZP.div(c||(c=(0,x.Z)(["\n    display: flex;\n    flex-direction: column;\n    padding: 0.5rem 0.75rem 0.5rem;\n    white-space: nowrap;\n"]))),S=p.ZP.div(u||(u=(0,x.Z)(["\n    position: absolute;\n    top: 10px;\n    right: 8px;\n"]))),T=p.ZP.div(m||(m=(0,x.Z)(["\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    height: 32px;\n    width: 32px;\n"]))),A=f.memo((e=>{var n;let{nft:t,resolution:s,onOpen:r}=e;const i=void 0!==t.sale,d=null===(n=t.previews)||void 0===n?void 0:n.find((e=>e.resolution===s)),{ios:a}=(0,j.bp)(),[o,l]=(0,f.useState)(!1),c=(0,f.useRef)(null),u=(0,f.useContext)(j._N),{data:m}=(0,b.id)(t);(0,f.useLayoutEffect)((()=>{c.current&&u&&c.current.contains(u)?l(!0):l(!1)}),[c.current,u,l]);const x=m&&Number((0,g.V)(m))<=30;return(0,h.jsxs)(Z,{hover:!0,isHover:o,ios:a,ref:c,onClick:()=>r(t),children:[(0,h.jsxs)(C,{children:[(0,h.jsx)(y,{url:null===d||void 0===d?void 0:d.url}),i&&(0,h.jsx)(S,{children:(0,h.jsx)(_.rG,{})}),x&&(0,h.jsx)(T,{children:(0,h.jsx)(_.XN,{})})]}),(0,h.jsxs)(P,{children:[(0,h.jsx)(w.Ok,{nft:t}),(0,h.jsx)(w.is,{nft:t})]})]})})),F=e=>{let{nfts:n,className:t}=e;const s=(0,v._)();return(0,h.jsx)(k,{className:t,children:(null!==n&&void 0!==n?n:[]).map((e=>{var n;return"hidden"===(null===(n=e.metadata)||void 0===n?void 0:n.render_type)?(0,h.jsx)(h.Fragment,{}):(0,h.jsx)(A,{nft:e,resolution:"500x500",onOpen:()=>s.openNft(e)},e.address)}))})}},37923:(e,n,t)=>{t.d(n,{_:()=>o});var s=t(14182),r=t(27127),i=t(72791),d=t(14316),a=t(91153);function o(e){const n=(0,a.i7)(),t=(0,i.useRef)(!0),{isLoading:o,data:l,mutate:c}=(0,d.gW)();(0,i.useEffect)((()=>{t.current=!1,c({address:e})}),[e]);return{recipient:(0,i.useMemo)((()=>({address:{address:(0,r.Tg)(e,n,!0),blockchain:s.S.TON},comment:"",done:!1,toAccount:l})),[l,n]),isLoading:!!t.current||o}}},17636:(e,n,t)=>{t.d(n,{V:()=>a,W:()=>d});var s=t(79297),r=t(72791),i=t(61945);function d(e,n){const{i18n:t}=(0,i.$G)();return(0,r.useMemo)((()=>e?new Intl.DateTimeFormat((0,s.l1)(t.language),{month:"short",day:"numeric",year:(new Date).getFullYear()-1===new Date(e).getFullYear()?"numeric":void 0,hour:"numeric",minute:"numeric",...n}).format(e):""),[e,t.language,n])}function a(e){if(!e)return"";const n=Math.floor((new Date(e).getTime()-Date.now())/864e5);return n<0?"0":n.toString()}}}]);
//# sourceMappingURL=580.41f2d212.chunk.js.map