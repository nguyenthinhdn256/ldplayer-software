"use strict";(self.webpackChunk_tonkeeper_extension=self.webpackChunk_tonkeeper_extension||[]).push([[338],{97541:(e,t,s)=>{s.d(t,{b:()=>X,t:()=>Y});var n=s(80184),a=s(72791),r=s(12827),i=s(5606),o=s(29857),c=s(34684),d=s(89242),l=s(59598),m=s(14182),x=s(93853),u=s(61819),j=s(61945),v=s(57443),p=s(26503),h=s(89050),g=s(91153);const k=e=>{let{tonTransfer:t,timestamp:s,event:a,isScam:r,status:i}=e;const o=(0,g.rT)(),{data:c}=(0,v.UJ)(m.C.TON),{fiatAmount:d}=(0,v.to)(c,(0,x.og)(t.amount)),u=t.recipient.address===o.rawAddress?"received":"send";return(0,n.jsxs)(l.A$,{event:a,children:[(0,n.jsx)(h.I2,{isScam:r,amount:t.amount,symbol:m.C.TON,total:d,timestamp:s,kind:u,status:i}),(0,n.jsxs)(p.L8,{margin:!1,fullWidth:!0,children:["received"===u&&(0,n.jsx)(l.s$,{sender:t.sender}),"send"===u&&(0,n.jsx)(l.$Z,{recipient:t.recipient}),(0,n.jsx)(l.KV,{eventId:a.eventId}),(0,n.jsx)(l.xv,{extra:a.extra}),(0,n.jsx)(h.Az,{comment:r?void 0:t.comment})]})]})},f=e=>{let{action:t,timestamp:s,event:a,isScam:r}=e;const{tonTransfer:i}=t;return i?(0,n.jsx)(k,{tonTransfer:i,event:a,isScam:r,timestamp:s,status:t.status}):(0,n.jsx)(l.LK,{event:a})},T=e=>{var t;let{action:s,timestamp:a,event:r}=e;const{t:i}=(0,j.$G)(),{auctionBid:o}=s,c=(0,u.rs)(),{data:d}=(0,v.UJ)(m.C.TON),{fiatAmount:g}=(0,v.to)(d,(0,x.og)(null!==(t=null===o||void 0===o?void 0:o.amount.value)&&void 0!==t?t:0));return o?(0,n.jsxs)(l.A$,{event:r,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(l.Dx,{children:i("transaction_type_bid")}),(0,n.jsxs)(h.$d,{children:[c(o.amount.value)," ",o.amount.tokenName]}),g&&(0,n.jsxs)(h.$d,{children:["\u2248\u2009",g]}),(0,n.jsx)(l.yq,{kind:"send",timestamp:a}),(0,n.jsx)(h.I,{status:s.status})]}),(0,n.jsxs)(p.L8,{margin:!1,fullWidth:!0,children:[(0,n.jsx)(l.of,{beneficiary:o.auction}),(0,n.jsx)(l.KV,{eventId:r.eventId}),(0,n.jsx)(l.xv,{extra:r.extra})]})]}):(0,n.jsx)(l.LK,{event:r})},C=e=>{let{action:t,timestamp:s,event:a}=e;const{domainRenew:r}=t;return r?(0,n.jsxs)(l.A$,{event:a,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(l.Dx,{children:r.domain}),(0,n.jsx)(l.yq,{kind:"send",timestamp:s}),(0,n.jsx)(h.I,{status:t.status})]}),(0,n.jsxs)(p.L8,{margin:!1,fullWidth:!0,children:[(0,n.jsx)(l.s$,{sender:r.renewer,bounced:!0}),(0,n.jsx)(l.KV,{eventId:a.eventId}),(0,n.jsx)(l.xv,{extra:a.extra})]})]}):(0,n.jsx)(l.LK,{event:a})},w=e=>{var t;let{action:s,timestamp:a,event:r}=e;const{smartContractExec:i}=s,o=(0,u.rs)(),{data:c}=(0,v.UJ)(m.C.TON),{fiatAmount:d}=(0,v.to)(c,(0,x.og)(null!==(t=null===i||void 0===i?void 0:i.tonAttached)&&void 0!==t?t:0));return i?(0,n.jsxs)(l.A$,{event:r,children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(l.Dx,{children:["-\u2009",o(i.tonAttached)," ",m.C.TON]}),d&&(0,n.jsxs)(h.$d,{children:["\u2248\u2009",d]}),(0,n.jsx)(l.yq,{kind:"call",timestamp:a}),(0,n.jsx)(h.I,{status:s.status})]}),(0,n.jsxs)(p.L8,{margin:!1,fullWidth:!0,children:[(0,n.jsx)(l.$Z,{recipient:i.contract,bounced:!0}),(0,n.jsx)(l.KV,{eventId:r.eventId}),(0,n.jsx)(l.xv,{extra:r.extra}),(0,n.jsx)(h.Zy,{operation:i.operation})]})]}):(0,n.jsx)(l.LK,{event:r})};var y=s(37785),S=s(22967),A=s(8616);const I=e=>{let{depositStake:t,timestamp:s,event:a,status:r}=e;const{t:i}=(0,j.$G)(),{data:o}=(0,v.UJ)(m.C.TON),c=(0,u.rs)(),{fiatAmount:d}=(0,v.to)(o,(0,x.og)(t.amount));return(0,n.jsxs)(l.A$,{event:a,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(l.Dx,{children:i("staking_deposit")}),(0,n.jsxs)(h.$d,{children:["-\u2009",c(t.amount)," ",m.C.TON]}),(0,n.jsxs)(h.$d,{children:["\u2248\u2009",d]}),(0,n.jsx)(l.yq,{kind:"send",timestamp:s}),(0,n.jsx)(h.I,{status:r})]}),(0,n.jsxs)(p.L8,{margin:!1,fullWidth:!0,children:[(0,n.jsx)(l.gu,{pool:t.pool}),(0,n.jsx)(l.KV,{eventId:a.eventId}),(0,n.jsx)(l.xv,{extra:a.extra})]})]})},$=e=>{let{action:t,timestamp:s,event:a,isScam:r}=e;const{depositStake:i}=t;return i?(0,n.jsx)(I,{depositStake:i,timestamp:s,event:a,isScam:r,status:t.status}):(0,n.jsx)(l.LK,{event:a})},b=e=>{let{withdrawStake:t,timestamp:s,event:a,status:r}=e;const{t:i}=(0,j.$G)(),{data:o}=(0,v.UJ)(m.C.TON),c=(0,u.rs)(),{fiatAmount:d}=(0,v.to)(o,(0,x.og)(t.amount));return(0,n.jsxs)(l.A$,{event:a,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(l.Dx,{children:i("staking_withdraw")}),(0,n.jsxs)(h.$d,{children:["+\u2009",c(t.amount)," ",m.C.TON]}),(0,n.jsxs)(h.$d,{children:["\u2248\u2009",d]}),(0,n.jsx)(l.yq,{kind:"send",timestamp:s}),(0,n.jsx)(h.I,{status:r})]}),(0,n.jsxs)(p.L8,{margin:!1,fullWidth:!0,children:[(0,n.jsx)(l.gu,{pool:t.pool}),(0,n.jsx)(l.KV,{eventId:a.eventId}),(0,n.jsx)(l.xv,{extra:a.extra})]})]})},R=e=>{let{action:t,timestamp:s,event:a,isScam:r}=e;const{withdrawStake:i}=t;return i?(0,n.jsx)(b,{withdrawStake:i,timestamp:s,event:a,isScam:r,status:t.status}):(0,n.jsx)(l.LK,{event:a})},L=e=>{var t;let{withdrawStakeRequest:s,timestamp:a,event:r,status:i}=e;const{t:o}=(0,j.$G)(),{data:c}=(0,v.UJ)(m.C.TON),d=(0,u.rs)(),{fiatAmount:g}=(0,v.to)(c,(0,x.og)(null!==(t=s.amount)&&void 0!==t?t:0));return(0,n.jsxs)(l.A$,{event:r,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(l.Dx,{children:o("activityActionModal_withdrawal_request")}),s.amount&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(h.$d,{children:["+\u2009",d(s.amount)," ",m.C.TON]}),(0,n.jsxs)(h.$d,{children:["\u2248\u2009",g]})]}),(0,n.jsx)(l.yq,{kind:"send",timestamp:a}),(0,n.jsx)(h.I,{status:i})]}),(0,n.jsxs)(p.L8,{margin:!1,fullWidth:!0,children:[(0,n.jsx)(l.gu,{pool:s.pool}),(0,n.jsx)(l.KV,{eventId:r.eventId}),(0,n.jsx)(l.xv,{extra:r.extra})]})]})},_=e=>{let{action:t,timestamp:s,event:a,isScam:r}=e;const{withdrawStakeRequest:i}=t;return i?(0,n.jsx)(L,{withdrawStakeRequest:i,timestamp:s,event:a,isScam:r,status:t.status}):(0,n.jsx)(l.LK,{event:a})};var K=s(26165);const N=e=>{switch(e.action.type){case"TonTransfer":return(0,n.jsx)(f,{...e});case"NftItemTransfer":return(0,n.jsx)(A.kj,{...e});case"ContractDeploy":return(0,n.jsx)(y._,{...e});case"UnSubscribe":return(0,n.jsx)(K.EA,{...e});case"Subscribe":return(0,n.jsx)(K.G_,{...e});case"AuctionBid":return(0,n.jsx)(T,{...e});case"DomainRenew":return(0,n.jsx)(C,{...e});case"SmartContractExec":return(0,n.jsx)(w,{...e});case"JettonTransfer":return(0,n.jsx)(S.gy,{...e});case"JettonSwap":return(0,n.jsx)(S.XH,{...e});case"JettonMint":return(0,n.jsx)(S.kX,{...e});case"JettonBurn":return(0,n.jsx)(S.q7,{...e});case"DepositStake":return(0,n.jsx)($,{...e});case"WithdrawStake":return(0,n.jsx)(R,{...e});case"WithdrawStakeRequest":return(0,n.jsx)(_,{...e});case"NftPurchase":return(0,n.jsx)(A.q6,{...e});case"Unknown":return(0,n.jsx)(l.LK,{event:e.event});default:return console.log(e),(0,n.jsx)(l.LK,{event:e.event,children:e.action.type})}},q=e=>{let{value:t,handleClose:s}=e;const r=(0,a.useCallback)((()=>{if(t)return(0,n.jsx)(N,{isScam:t.isScam,action:t.action,timestamp:t.timestamp,event:t.event})}),[t,s]);return(0,n.jsx)(d.P_,{isOpen:!!t,handleClose:s,children:r})};var D=s(49376);const O=e=>{let{sendTRC20:t,timestamp:s,event:r}=e;const i=(0,a.useMemo)((()=>(0,x.og)(t.amount,t.token.decimals)),[t]),{data:o}=(0,v.UJ)(t.token.symbol),{fiatAmount:c}=(0,v.to)(o,i);return(0,n.jsxs)(l.Tq,{event:r,children:[(0,n.jsx)(h.I2,{amount:t.amount,decimals:t.token.decimals,symbol:t.token.symbol,total:c,timestamp:s,kind:"send"}),(0,n.jsxs)(p.L8,{margin:!1,fullWidth:!0,children:[(0,n.jsx)(l.jQ,{address:t.recipient}),(0,n.jsx)(l.KV,{eventId:r.txHash}),r.fees&&(0,n.jsx)(l.Z7,{fees:r.fees})]})]})},W=e=>{let{action:t,timestamp:s,event:a}=e;const{sendTRC20:r}=t;return r?(0,n.jsx)(O,{sendTRC20:r,event:a,timestamp:s}):(0,n.jsx)(l.tT,{event:a})},J=e=>{let{receiveTRC20:t,timestamp:s,event:r}=e;const i=(0,a.useMemo)((()=>(0,x.og)(t.amount,t.token.decimals)),[t]),{data:o}=(0,v.UJ)(t.token.symbol),{fiatAmount:c}=(0,v.to)(o,i);return(0,n.jsxs)(l.Tq,{event:r,children:[(0,n.jsx)(h.I2,{amount:t.amount,decimals:t.token.decimals,symbol:t.token.symbol,total:c,timestamp:s,kind:"received"}),(0,n.jsxs)(p.L8,{margin:!1,fullWidth:!0,children:[(0,n.jsx)(l.Lx,{address:t.sender}),(0,n.jsx)(l.KV,{eventId:r.txHash})]})]})},E=e=>{let{action:t,timestamp:s,event:a}=e;const{receiveTRC20:r}=t;return r?(0,n.jsx)(J,{receiveTRC20:r,event:a,timestamp:s}):(0,n.jsx)(l.tT,{event:a})},H=e=>{let{action:t,timestamp:s,event:a}=e;const{t:r}=(0,j.$G)(),{contractDeploy:i}=t;return i?(0,n.jsxs)(l.Tq,{event:a,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(l.Dx,{children:r("transaction_type_wallet_initialized")}),(0,n.jsx)(l.yq,{kind:"send",timestamp:s})]}),(0,n.jsxs)(p.L8,{margin:!1,fullWidth:!0,children:[(0,n.jsx)(l.kR,{address:i.ownerAddress}),(0,n.jsx)(l.KV,{eventId:a.txHash}),a.fees&&(0,n.jsx)(l.Z7,{fees:a.fees})]})]}):(0,n.jsx)(l.tT,{event:a})},P=e=>{switch(e.action.type){case"ReceiveTRC20":return(0,n.jsx)(E,{...e});case"SendTRC20":return(0,n.jsx)(W,{...e});case"ContractDeploy":return(0,n.jsx)(H,{...e});default:return console.log(e),(0,n.jsx)(l.tT,{event:e.event,children:e.action.type})}},U=e=>{let{value:t,handleClose:s}=e;const r=(0,a.useCallback)((()=>{if(t)return(0,n.jsx)(P,{action:t.action,timestamp:t.timestamp,event:t.event})}),[t,s]);return(0,n.jsx)(d.P_,{isOpen:!!t,handleClose:s,children:r})};var V=s(27127),F=s(94607),G=s(1715);const Z=e=>{let{receiveTRC20:t,date:s}=e;const a=(0,u.rs)();return(0,n.jsx)(F.pA,{amount:a(t.amount,t.token.decimals),symbol:t.token.symbol,sender:(0,V.FN)(t.sender),date:s})},M=e=>{let{sendTRC20:t,date:s}=e;const a=(0,u.rs)();return(0,n.jsx)(F.yp,{amount:a(t.amount,t.token.decimals),symbol:t.token.symbol,recipient:(0,V.FN)(t.recipient),date:s})},B=e=>{let{contractDeploy:t,date:s}=e;return(0,n.jsx)(F.Cf,{address:(0,V.FN)(t.ownerAddress),date:s})},Q=e=>{let{action:t,date:s}=e;const{t:a}=(0,j.$G)();return t.receiveTRC20?(0,n.jsx)(Z,{receiveTRC20:t.receiveTRC20,date:s}):t.sendTRC20?(0,n.jsx)(M,{sendTRC20:t.sendTRC20,date:s}):t.contractDeploy?(0,n.jsx)(B,{contractDeploy:t.contractDeploy,date:s}):(console.log(t),(0,n.jsx)(G._X,{children:a("txActions_signRaw_types_unknownTransaction")}))},z=e=>{let{event:t,date:s,timestamp:a,setTronAction:r}=e;return(0,n.jsx)(n.Fragment,{children:t.actions.map(((e,i)=>(0,n.jsxs)(p.HC,{onClick:()=>r({action:e,timestamp:a,event:t}),children:[(0,n.jsx)(Q,{action:e,date:s}),t.inProgress&&(0,n.jsx)(c.QO,{})]},i)))})},X=e=>{let{isFetched:t,isFetchingNextPage:s,tonEvents:r,tronEvents:c}=e;const d=(0,a.useMemo)((()=>(0,i.Q)(r,c)),[r,c]);return t?(0,n.jsxs)(o.YB,{children:[(0,n.jsx)(Y,{items:d}),s&&(0,n.jsx)(o.mp,{size:3})]}):(0,n.jsx)(o.ZC,{})},Y=e=>{let{items:t}=e;const[s,i]=(0,a.useState)(void 0),[o,d]=(0,a.useState)(void 0),{i18n:l}=(0,j.$G)();return(0,n.jsxs)(n.Fragment,{children:[t.map((e=>{let[t,s]=e;return(0,n.jsxs)(c.ZA,{children:[(0,n.jsx)(c.Dx,{children:(0,r.HK)(l.language,t,s[0].timestamp)}),s.map((e=>{let{timestamp:s,event:a,key:o}=e;const m=(0,r.Ue)(l.language,t,s);return(0,n.jsx)(c.aV,{children:"tron"===a.kind?(0,n.jsx)(z,{event:a.event,date:m,timestamp:s,setTronAction:d}):"ton"===a.kind?(0,n.jsx)(D.W,{event:a.event,date:m,timestamp:s,setActivity:i}):null},o)}))]},t)})),(0,n.jsx)(q,{value:s,handleClose:()=>i(void 0)}),(0,n.jsx)(U,{value:o,handleClose:()=>d(void 0)})]})}},71757:(e,t,s)=>{s.d(t,{N:()=>r});var n=s(27127),a=s(72791);const r=(e,t,s,r,i)=>{(0,a.useEffect)((()=>{if(!e)return;const a=r?null===i||void 0===i?void 0:i.current:window;if(!a)return;const o=(0,n.P2)((()=>{if(!t&&"is-locked"!==document.documentElement.className)if(a===window)window.innerHeight+window.scrollY>=document.body.offsetHeight-500&&s();else{const e=a;e.scrollTop>=e.scrollHeight-window.innerHeight-500&&s()}}),50);return a.addEventListener("scroll",o),o(),()=>{a.removeEventListener("scroll",o)}}),[e,r,i])}},5606:(e,t,s)=>{s.d(t,{Q:()=>a});var n=s(12827);const a=(e,t)=>(0,n.L2)(((e,t)=>{const s=[];if(e&&e.pages.forEach((e=>{const t=e.events.map((e=>({timestamp:1e3*e.timestamp,key:e.eventId,event:{kind:"ton",event:e}})));s.push(...t)})),t){const n=((e,t)=>{if(!e||!e.pages.length)return t;if(e.pageParams.length){const s=e.pageParams[e.pageParams.length-1];if(void 0===s||0===s)return t}const{events:s}=e.pages[e.pages.length-1];if(!s.length)return t;const n=1e3*s[s.length-1].timestamp;return{pageParams:t.pageParams,pages:t.pages.map((e=>({...e,events:e.events.filter((e=>e.timestamp>n))})))}})(e,t);n.pages.forEach((e=>{const t=e.events.map((e=>({timestamp:e.timestamp,key:"".concat(e.txHash,"-").concat(e.actions.map((e=>e.type)).join("-")),event:{kind:"tron",event:e}})));s.push(...t)}))}return s})(e,t))}}]);
//# sourceMappingURL=338.07f7a5a2.chunk.js.map