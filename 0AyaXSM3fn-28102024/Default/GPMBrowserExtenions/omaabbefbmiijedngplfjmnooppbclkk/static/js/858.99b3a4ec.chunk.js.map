{"version":3,"file":"static/js/858.99b3a4ec.chunk.js","mappings":"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","sources":["../../../packages/uikit/dist/hooks/useEventListener.js","../../../packages/uikit/dist/hooks/useAreaClick.js","../../../packages/core/dist/service/urlService.js","../../../packages/uikit/dist/pages/browser/CategoryBlock.js","../../../packages/uikit/dist/hooks/browser/useRecommendations.js","../../../packages/uikit/dist/pages/browser/CategoryPage.js","../../../packages/uikit/dist/components/browser/PromotionsCarousel.js","../../../packages/uikit/dist/pages/browser/BrowserRecommendationsPage.js","../../../packages/uikit/dist/pages/browser/index.js"],"sourcesContent":["import { useEffect, useLayoutEffect, useRef } from 'react';\nfunction useEventListener(eventName, handler, element, options) {\n    const savedHandler = useRef(handler);\n    useLayoutEffect(() => {\n        savedHandler.current = handler;\n    }, [handler]);\n    useEffect(() => {\n        const targetElement = element?.current ?? window;\n        if (!(targetElement && targetElement.addEventListener))\n            return;\n        const listener = event => savedHandler.current(event);\n        targetElement.addEventListener(eventName, listener, options);\n        return () => {\n            targetElement.removeEventListener(eventName, listener, options);\n        };\n    }, [eventName, element, options]);\n}\nexport { useEventListener };\n","import { formatBrowserUrl } from '@tonkeeper/core/dist/service/urlService';\nimport { useCallback, useRef } from 'react';\nimport { useClickBrowser } from './amplitude';\nimport { useAppSdk } from './appSdk';\nimport { useEventListener } from './useEventListener';\nexport function useAreaClick({ callback, precisionXPx, precisionYPx }) {\n    const clickedPosition = useRef({\n        clientX: 0,\n        clientY: 0\n    });\n    const ref = useRef(null);\n    const onMouseDown = useCallback((e) => {\n        clickedPosition.current = {\n            clientY: e.clientY,\n            clientX: e.clientX\n        };\n    }, []);\n    const onMouseUp = useCallback((e) => {\n        const xInArea = Math.abs(e.clientX - clickedPosition.current.clientX) < (precisionXPx ?? 10);\n        const yInArea = Math.abs(e.clientY - clickedPosition.current.clientY) < (precisionYPx ?? 10);\n        if (xInArea && yInArea) {\n            callback();\n        }\n    }, [callback, precisionXPx, precisionYPx]);\n    useEventListener('mousedown', onMouseDown, ref);\n    useEventListener('mouseup', onMouseUp, ref);\n    return ref;\n}\nexport function useOpenLinkOnAreaClick(url, source, track) {\n    const sdk = useAppSdk();\n    const event = useClickBrowser();\n    const callback = useCallback(() => {\n        event(url, source);\n        sdk.openPage(formatBrowserUrl(url, source, track));\n    }, [url, sdk, event]);\n    return useAreaClick({ callback });\n}\n","import queryString from 'query-string';\nexport const formatBrowserUrl = (source, camp, track) => {\n    const date = new Date();\n    const stringified = queryString.stringify({\n        utm_source: 'tonkeeper',\n        utm_campaign: camp === 'recommendation'\n            ? 'recom'\n            : `feat-${date.getMonth() + 1}-${date.getFullYear()}`,\n        utm_medium: track\n    });\n    const startChar = source.includes('?') ? '&' : '?';\n    return `${source}${startChar}${stringified}`;\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useMemo } from 'react';\nimport { Link } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { ChevronRightIcon } from '../../components/Icon';\nimport { ListBlock, ListItem } from '../../components/List';\nimport { Body3, H3, Label1, Label2 } from '../../components/Text';\nimport { Carousel } from '../../components/shared';\nimport { useAppContext } from '../../hooks/appContext';\nimport { useOpenLinkOnAreaClick } from '../../hooks/useAreaClick';\nimport { useElementSize } from '../../hooks/useElementSize';\nimport { BrowserRoute } from '../../libs/routes';\nimport { PromotedItem, PromotedItemImage, PromotedItemText } from './PromotedItem';\nconst Heading = styled.div `\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 14px 1rem;\n    gap: 1rem;\n`;\nconst AllButton = styled.button `\n    border: none;\n    background: transparent;\n    height: fit-content;\n    width: fit-content;\n    color: ${props => props.theme.textAccent};\n    cursor: pointer;\n    padding: 4px 8px;\n`;\nconst ListContainer = styled.div `\n    padding-left: 1rem;\n    padding-right: 1rem;\n`;\nconst ListBlockStyled = styled(ListBlock) `\n    width: ${props => props.width} !important;\n    margin-left: ${props => props.marginLeft} !important;\n    margin-bottom: 0;\n`;\nconst IconContainerStyled = styled.div `\n    margin-left: auto;\n    margin-right: 1rem;\n    color: ${props => props.theme.iconTertiary};\n    transition: transform 0.15s ease;\n`;\nconst ListItemStyled = styled(ListItem) `\n    padding-left: 1rem;\n\n    &:hover ${IconContainerStyled} {\n        transform: translateX(2px);\n    }\n`;\nexport const CategoryBlock = ({ category, className }) => {\n    const { browserLength } = useAppContext();\n    const [containerRef, { width: w }] = useElementSize();\n    const width = w - 36;\n    const groups = useMemo(() => category.apps.reduce((acc, app, index) => {\n        if (index % (browserLength ?? 3) === 0) {\n            acc.push([app]);\n        }\n        else {\n            acc[acc.length - 1].push(app);\n        }\n        return acc;\n    }, []), [category.apps]);\n    const groupsKeys = useMemo(() => groups.map(group => group.map(i => i.url).join('')), [groups]);\n    const canExpand = groups.length > 1;\n    return (_jsxs(\"div\", { className: className, ref: containerRef, children: [_jsxs(Heading, { children: [_jsx(H3, { children: category.title }), canExpand && (_jsx(Link, { to: '.' + BrowserRoute.category + '/' + category.id, children: _jsx(AllButton, { children: _jsx(Label1, { children: \"All\" }) }) }))] }), canExpand ? (_jsx(Carousel, { gap: \"8px\", infinite: false, children: groups.map((group, groupIndex) => (_jsx(ListBlockStyled, { width: groupIndex === 0 || groupIndex === groups.length - 1\n                        ? (width - 28).toString() + 'px'\n                        : 'unset', marginLeft: groupIndex === 0 ? '-34px' : '0', children: group.map(item => (_jsx(CategoryGroupItem, { item: item }, item.url))) }, groupsKeys[groupIndex]))) })) : (groups.map((group, groupIndex) => (_jsx(ListContainer, { children: _jsx(ListBlockStyled, { width: \"100%\", children: group.map(item => (_jsx(CategoryGroupItem, { item: item }, item.url))) }, groupsKeys[groupIndex]) }, groupsKeys[groupIndex]))))] }));\n};\nexport const CategoryGroupItem = ({ item }) => {\n    const { tonendpoint } = useAppContext();\n    const ref = useOpenLinkOnAreaClick(item.url, 'recommendation', tonendpoint.getTrack());\n    return (_jsx(ListItemStyled, { ref: ref, children: _jsxs(PromotedItem, { children: [_jsx(PromotedItemImage, { src: item.icon }), _jsxs(PromotedItemText, { children: [_jsx(Label2, { children: item.name }), _jsx(Body3, { children: item.description })] }), _jsx(IconContainerStyled, { children: _jsx(ChevronRightIcon, {}) })] }) }, item.url));\n};\n","import { useQuery } from '@tanstack/react-query';\nimport { QueryKey } from '../../libs/queryKey';\nimport { useUserCountry } from '../../state/country';\nimport { useAppContext } from '../appContext';\nfunction shuffle(array) {\n    let currentIndex = array.length;\n    // While there remain elements to shuffle...\n    while (currentIndex != 0) {\n        // Pick a remaining element...\n        let randomIndex = Math.floor(Math.random() * currentIndex);\n        currentIndex--;\n        // And swap it with the current element.\n        [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];\n    }\n}\nexport function useRecommendations() {\n    const { tonendpoint } = useAppContext();\n    const country = useUserCountry();\n    const lang = country.data || 'en';\n    return useQuery([QueryKey.featuredRecommendations, lang], async () => {\n        const data = await tonendpoint.getAppsPopular(lang);\n        // TODO: Remove mobile hack\n        data.categories = data.categories.filter(item => item.id !== 'featured');\n        if (data.apps) {\n            shuffle(data.apps);\n        }\n        return data;\n    });\n}\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { SubHeader } from '../../components/SubHeader';\nimport { InnerBody } from '../../components/Body';\nimport { useParams } from 'react-router-dom';\nimport { CategoryGroupItem } from './CategoryBlock';\nimport { ListBlock } from '../../components/List';\nimport { useRecommendations } from '../../hooks/browser/useRecommendations';\nimport { RecommendationPageListItemSkeleton } from '../../components/skeletons/BrowserSkeletons';\nexport const CategoryPage = () => {\n    const { id } = useParams();\n    const { data } = useRecommendations();\n    const group = data?.categories.find(item => item.id === id);\n    return (_jsxs(_Fragment, { children: [_jsx(SubHeader, { title: group?.title }), _jsx(InnerBody, { children: group ? (_jsx(ListBlock, { children: group.apps.map(item => (_jsx(CategoryGroupItem, { item: item }, item.url))) })) : (_jsxs(ListBlock, { children: [_jsx(RecommendationPageListItemSkeleton, {}), _jsx(RecommendationPageListItemSkeleton, {}), _jsx(RecommendationPageListItemSkeleton, {}), _jsx(RecommendationPageListItemSkeleton, {}), _jsx(RecommendationPageListItemSkeleton, {})] })) })] }));\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport styled from 'styled-components';\nimport { Body3, Label2 } from '../Text';\nimport { Carousel } from '../shared';\nimport { useAppContext } from '../../hooks/appContext';\nimport { useOpenLinkOnAreaClick } from '../../hooks/useAreaClick';\nimport { PromotedItem, PromotedItemImage, PromotedItemText } from '../../pages/browser/PromotedItem';\nimport { useActiveConfig } from '../../state/wallet';\nconst CarouselCard = styled.div `\n    width: 100%;\n    aspect-ratio: 2 / 1;\n\n    background-image: ${props => `url(${props.img})`};\n    background-size: cover;\n    border-radius: ${props => props.theme.cornerSmall};\n\n    display: inline-flex !important;\n    align-items: flex-end;\n    justify-content: flex-start;\n    cursor: pointer;\n`;\nconst CarouselCardFooter = styled(PromotedItem) `\n    margin-left: 1rem;\n`;\nexport const PromotionsCarousel = ({ apps, className, ...rest }) => {\n    const config = useActiveConfig();\n    const speed = config.featured_play_interval || 1000 * 10;\n    return (_jsx(Carousel, { className: className, gap: \"8px\", autoplay: true, centerPadding: \"16px\", autoplaySpeed: speed, ...rest, children: apps.map(item => (_jsx(CarouselItem, { item: item }, item.url))) }));\n};\nconst CarouselItem = ({ item }) => {\n    const { tonendpoint } = useAppContext();\n    const ref = useOpenLinkOnAreaClick(item.url, 'featured', tonendpoint.getTrack());\n    return (_jsx(CarouselCard, { img: item.poster, ref: ref, children: _jsxs(CarouselCardFooter, { children: [_jsx(PromotedItemImage, { src: item.icon }), _jsxs(PromotedItemText, { color: item.textColor, children: [_jsx(Label2, { children: item.name }), _jsx(Body3, { children: item.description })] })] }) }));\n};\n","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useEffect } from 'react';\nimport styled from 'styled-components';\nimport { InnerBody } from '../../components/Body';\nimport { BrowserHeader } from '../../components/Header';\nimport { PromotionsCarousel } from '../../components/browser/PromotionsCarousel';\nimport { RecommendationsPageBodySkeleton } from '../../components/skeletons/BrowserSkeletons';\nimport { useOpenBrowser } from '../../hooks/amplitude';\nimport { useRecommendations } from '../../hooks/browser/useRecommendations';\nimport { CategoryBlock } from './CategoryBlock';\nconst InnerBodyStyled = styled(InnerBody) `\n    padding: 0;\n`;\nconst PromotionsCarouselStyled = styled(PromotionsCarousel) `\n    margin-bottom: 1rem;\n`;\nconst CategoryBlockStyled = styled(CategoryBlock) `\n    margin-bottom: 1rem;\n`;\nconst SkeletonContainer = styled.div `\n    padding: 0 1rem;\n`;\nexport const BrowserRecommendationsPage = () => {\n    const { data } = useRecommendations();\n    const track = useOpenBrowser();\n    useEffect(() => {\n        if (data)\n            track();\n    }, [track, data]);\n    return (_jsxs(_Fragment, { children: [_jsx(BrowserHeader, {}), _jsx(InnerBodyStyled, { children: data ? (_jsxs(_Fragment, { children: [data.apps.length > 0 ? (_jsx(PromotionsCarouselStyled, { apps: data.apps })) : null, data.categories.map(category => (_jsx(CategoryBlockStyled, { category: category }, category.id)))] })) : (_jsx(SkeletonContainer, { children: _jsx(RecommendationsPageBodySkeleton, {}) })) })] }));\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { BrowserRoute } from '../../libs/routes';\nimport { Route, Routes } from 'react-router-dom';\nimport { CategoryPage } from './CategoryPage';\nimport { BrowserRecommendationsPage } from './BrowserRecommendationsPage';\nconst BrowserPage = () => {\n    return (_jsxs(Routes, { children: [_jsx(Route, { path: BrowserRoute.category + '/:id', element: _jsx(CategoryPage, {}) }), _jsx(Route, { path: \"*\", element: _jsx(BrowserRecommendationsPage, {}) })] }));\n};\nexport default BrowserPage;\n"],"names":["useEventListener","eventName","handler","element","options","savedHandler","useRef","useLayoutEffect","current","useEffect","_element$current","targetElement","window","addEventListener","listener","event","removeEventListener","useOpenLinkOnAreaClick","url","source","track","sdk","useAppSdk","useClickBrowser","callback","useCallback","openPage","formatBrowserUrl","camp","date","Date","stringified","queryString","stringify","utm_source","utm_campaign","concat","getMonth","getFullYear","utm_medium","startChar","includes","_ref","precisionXPx","precisionYPx","clickedPosition","clientX","clientY","ref","onMouseDown","e","onMouseUp","xInArea","Math","abs","yInArea","useAreaClick","Heading","styled","div","_templateObject","_taggedTemplateLiteral","AllButton","button","_templateObject2","props","theme","textAccent","ListContainer","_templateObject3","ListBlockStyled","ListBlock","_templateObject4","width","marginLeft","IconContainerStyled","_templateObject5","iconTertiary","ListItemStyled","ListItem","_templateObject6","CategoryGroupItem","_ref2","item","tonendpoint","useAppContext","getTrack","_jsx","children","_jsxs","PromotedItem","PromotedItemImage","src","icon","PromotedItemText","Label2","name","Body3","description","ChevronRightIcon","useRecommendations","lang","useUserCountry","data","useQuery","QueryKey","featuredRecommendations","async","getAppsPopular","categories","filter","id","apps","array","currentIndex","length","randomIndex","floor","random","shuffle","CategoryPage","useParams","group","find","_Fragment","SubHeader","title","InnerBody","map","RecommendationPageListItemSkeleton","CarouselCard","img","cornerSmall","CarouselCardFooter","CarouselItem","poster","color","textColor","InnerBodyStyled","PromotionsCarouselStyled","className","rest","speed","useActiveConfig","featured_play_interval","Carousel","gap","autoplay","centerPadding","autoplaySpeed","CategoryBlockStyled","category","browserLength","containerRef","w","useElementSize","groups","useMemo","reduce","acc","app","index","push","groupsKeys","i","join","canExpand","H3","Link","to","BrowserRoute","Label1","infinite","groupIndex","toString","SkeletonContainer","BrowserRecommendationsPage","useOpenBrowser","BrowserHeader","RecommendationsPageBodySkeleton","BrowserPage","Routes","Route","path"],"sourceRoot":""}