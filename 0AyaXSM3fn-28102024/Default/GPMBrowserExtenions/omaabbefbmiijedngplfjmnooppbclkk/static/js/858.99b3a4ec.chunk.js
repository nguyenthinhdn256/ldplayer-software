"use strict";(self.webpackChunk_tonkeeper_extension=self.webpackChunk_tonkeeper_extension||[]).push([[858],{11858:(n,e,t)=>{t.r(e),t.d(e,{default:()=>an});var r=t(80184),i=t(29305),s=t(57689),a=t(3735),c=t(99326),l=t(30168),o=t(72791),d=t(11087),u=t(65867),p=t(5784),m=t(26503),x=t(47712),h=t(14756),g=t(87594),j=t(33975);var f=t(33455),v=t(23098);function Z(n,e,t,r){const i=(0,o.useRef)(e);(0,o.useLayoutEffect)((()=>{i.current=e}),[e]),(0,o.useEffect)((()=>{var e;const s=null!==(e=null===t||void 0===t?void 0:t.current)&&void 0!==e?e:window;if(!s||!s.addEventListener)return;const a=n=>i.current(n);return s.addEventListener(n,a,r),()=>{s.removeEventListener(n,a,r)}}),[n,t,r])}function b(n,e,t){const r=(0,v._)(),i=(0,f.y9)(),s=(0,o.useCallback)((()=>{i(n,e),r.openPage(((n,e,t)=>{const r=new Date,i=j.Z.stringify({utm_source:"tonkeeper",utm_campaign:"recommendation"===e?"recom":"feat-".concat(r.getMonth()+1,"-").concat(r.getFullYear()),utm_medium:t}),s=n.includes("?")?"&":"?";return"".concat(n).concat(s).concat(i)})(n,e,t))}),[n,r,i]);return function(n){let{callback:e,precisionXPx:t,precisionYPx:r}=n;const i=(0,o.useRef)({clientX:0,clientY:0}),s=(0,o.useRef)(null),a=(0,o.useCallback)((n=>{i.current={clientY:n.clientY,clientX:n.clientX}}),[]),c=(0,o.useCallback)((n=>{const s=Math.abs(n.clientX-i.current.clientX)<(null!==t&&void 0!==t?t:10),a=Math.abs(n.clientY-i.current.clientY)<(null!==r&&void 0!==r?r:10);s&&a&&e()}),[e,t,r]);return Z("mousedown",a,s),Z("mouseup",c,s),s}({callback:s})}var k,y,P,w,L,_,F=t(73447),C=t(14911);const E=u.ZP.div(k||(k=(0,l.Z)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 14px 1rem;\n    gap: 1rem;\n"]))),T=u.ZP.button(y||(y=(0,l.Z)(["\n    border: none;\n    background: transparent;\n    height: fit-content;\n    width: fit-content;\n    color: ",";\n    cursor: pointer;\n    padding: 4px 8px;\n"])),(n=>n.theme.textAccent)),X=u.ZP.div(P||(P=(0,l.Z)(["\n    padding-left: 1rem;\n    padding-right: 1rem;\n"]))),A=(0,u.ZP)(m.L8)(w||(w=(0,l.Z)(["\n    width: "," !important;\n    margin-left: "," !important;\n    margin-bottom: 0;\n"])),(n=>n.width),(n=>n.marginLeft)),M=u.ZP.div(L||(L=(0,l.Z)(["\n    margin-left: auto;\n    margin-right: 1rem;\n    color: ",";\n    transition: transform 0.15s ease;\n"])),(n=>n.theme.iconTertiary)),Y=(0,u.ZP)(m.HC)(_||(_=(0,l.Z)(["\n    padding-left: 1rem;\n\n    &:hover "," {\n        transform: translateX(2px);\n    }\n"])),M),R=n=>{let{item:e}=n;const{tonendpoint:t}=(0,g.bp)(),i=b(e.url,"recommendation",t.getTrack());return(0,r.jsx)(Y,{ref:i,children:(0,r.jsxs)(C.iT,{children:[(0,r.jsx)(C.E1,{src:e.icon}),(0,r.jsxs)(C.i2,{children:[(0,r.jsx)(x.fA,{children:e.name}),(0,r.jsx)(x.De,{children:e.description})]}),(0,r.jsx)(M,{children:(0,r.jsx)(p.XC,{})})]})},e.url)};var N=t(41235),H=t(97957),S=t(14322);function D(){const{tonendpoint:n}=(0,g.bp)(),e=(0,S.Nq)().data||"en";return(0,N.useQuery)([H.S8.featuredRecommendations,e],(async()=>{const t=await n.getAppsPopular(e);return t.categories=t.categories.filter((n=>"featured"!==n.id)),t.apps&&function(n){let e=n.length;for(;0!=e;){let t=Math.floor(Math.random()*e);e--,[n[e],n[t]]=[n[t],n[e]]}}(t.apps),t}))}var U=t(79436);const V=()=>{const{id:n}=(0,s.UO)(),{data:e}=D(),t=null===e||void 0===e?void 0:e.categories.find((e=>e.id===n));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.bU,{title:null===t||void 0===t?void 0:t.title}),(0,r.jsx)(c.HV,{children:t?(0,r.jsx)(m.L8,{children:t.apps.map((n=>(0,r.jsx)(R,{item:n},n.url)))}):(0,r.jsxs)(m.L8,{children:[(0,r.jsx)(U.F,{}),(0,r.jsx)(U.F,{}),(0,r.jsx)(U.F,{}),(0,r.jsx)(U.F,{}),(0,r.jsx)(U.F,{})]})})]})};var W,q,z=t(96491),B=t(91153);const O=u.ZP.div(W||(W=(0,l.Z)(["\n    width: 100%;\n    aspect-ratio: 2 / 1;\n\n    background-image: ",";\n    background-size: cover;\n    border-radius: ",";\n\n    display: inline-flex !important;\n    align-items: flex-end;\n    justify-content: flex-start;\n    cursor: pointer;\n"])),(n=>"url(".concat(n.img,")")),(n=>n.theme.cornerSmall)),Q=(0,u.ZP)(C.iT)(q||(q=(0,l.Z)(["\n    margin-left: 1rem;\n"]))),G=n=>{let{item:e}=n;const{tonendpoint:t}=(0,g.bp)(),i=b(e.url,"featured",t.getTrack());return(0,r.jsx)(O,{img:e.poster,ref:i,children:(0,r.jsxs)(Q,{children:[(0,r.jsx)(C.E1,{src:e.icon}),(0,r.jsxs)(C.i2,{color:e.textColor,children:[(0,r.jsx)(x.fA,{children:e.name}),(0,r.jsx)(x.De,{children:e.description})]})]})})};var I,J,K,$;const nn=(0,u.ZP)(c.HV)(I||(I=(0,l.Z)(["\n    padding: 0;\n"]))),en=(0,u.ZP)((n=>{let{apps:e,className:t,...i}=n;const s=(0,B.TB)().featured_play_interval||1e4;return(0,r.jsx)(h.l,{className:t,gap:"8px",autoplay:!0,centerPadding:"16px",autoplaySpeed:s,...i,children:e.map((n=>(0,r.jsx)(G,{item:n},n.url)))})}))(J||(J=(0,l.Z)(["\n    margin-bottom: 1rem;\n"]))),tn=(0,u.ZP)((n=>{let{category:e,className:t}=n;const{browserLength:s}=(0,g.bp)(),[a,{width:c}]=(0,F.h)(),l=c-36,u=(0,o.useMemo)((()=>e.apps.reduce(((n,e,t)=>(t%(null!==s&&void 0!==s?s:3)===0?n.push([e]):n[n.length-1].push(e),n)),[])),[e.apps]),p=(0,o.useMemo)((()=>u.map((n=>n.map((n=>n.url)).join("")))),[u]),m=u.length>1;return(0,r.jsxs)("div",{className:t,ref:a,children:[(0,r.jsxs)(E,{children:[(0,r.jsx)(x.H3,{children:e.title}),m&&(0,r.jsx)(d.rU,{to:"."+i.T3.category+"/"+e.id,children:(0,r.jsx)(T,{children:(0,r.jsx)(x.RV,{children:"All"})})})]}),m?(0,r.jsx)(h.l,{gap:"8px",infinite:!1,children:u.map(((n,e)=>(0,r.jsx)(A,{width:0===e||e===u.length-1?(l-28).toString()+"px":"unset",marginLeft:0===e?"-34px":"0",children:n.map((n=>(0,r.jsx)(R,{item:n},n.url)))},p[e])))}):u.map(((n,e)=>(0,r.jsx)(X,{children:(0,r.jsx)(A,{width:"100%",children:n.map((n=>(0,r.jsx)(R,{item:n},n.url)))},p[e])},p[e])))]})}))(K||(K=(0,l.Z)(["\n    margin-bottom: 1rem;\n"]))),rn=u.ZP.div($||($=(0,l.Z)(["\n    padding: 0 1rem;\n"]))),sn=()=>{const{data:n}=D(),e=(0,f.vR)();return(0,o.useEffect)((()=>{n&&e()}),[e,n]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.Z1,{}),(0,r.jsx)(nn,{children:n?(0,r.jsxs)(r.Fragment,{children:[n.apps.length>0?(0,r.jsx)(en,{apps:n.apps}):null,n.categories.map((n=>(0,r.jsx)(tn,{category:n},n.id)))]}):(0,r.jsx)(rn,{children:(0,r.jsx)(U.l,{})})})]})},an=()=>(0,r.jsxs)(s.Z5,{children:[(0,r.jsx)(s.AW,{path:i.T3.category+"/:id",element:(0,r.jsx)(V,{})}),(0,r.jsx)(s.AW,{path:"*",element:(0,r.jsx)(sn,{})})]})}}]);
//# sourceMappingURL=858.99b3a4ec.chunk.js.map