(self.webpackChunk_tonkeeper_extension=self.webpackChunk_tonkeeper_extension||[]).push([[109],{52694:(e,n,t)=>{"use strict";t.r(n),t.d(n,{SignerContent:()=>g,default:()=>j});var s=t(80184),i=t(6952),r=t(77220);var o=t(72791),a=t(87594),d=t(23098),l=t(54143);var c=t(61945),x=t(89242),u=t(88754),p=t(56494),h=t(53961),m=t(91153),v=t(27127);const g=e=>{let{sdk:n,transactionParams:t,onClose:d,handleResult:g}=e;const j=(0,m.rT)(),{t:f}=(0,c.$G)(),{extension:b}=(0,a.bp)();((e,n)=>{(0,o.useEffect)((()=>(e.uiEvents.on("navigate",n),()=>{e.uiEvents.off("navigate",n)})),[e,n])})(n,d);const k=(0,o.useCallback)((e=>{const n=(new i.x).parseSignature(e);g(n.signature)}),[]),w=(0,l.L)(null,k),y=(0,o.useMemo)((()=>{return e=t.message,n=t.messageType,s=(0,v.Tg)(j.rawAddress),i=t.pathInfo,new r.x({origin:"TonKeeper"}).generateSignRequest({signData:e.toString("hex"),dataType:"transaction"===n?1:2,address:s,xfp:null===i||void 0===i?void 0:i.mfp,derivationPath:null===i||void 0===i?void 0:i.path});var e,n,s,i}),[t]);return(0,s.jsxs)(x.QT,{onSubmit:e=>{e.preventDefault(),e.stopPropagation(),w()},children:[(0,s.jsx)(p.VO,{title:f("keystone_sign_title"),description:f("keystone_sign_subtitle")}),(0,s.jsx)(p.Aq,{extension:b,margin:!0,children:(0,s.jsx)(h.Gb,{data:y})}),(0,s.jsx)(u.zx,{primary:!0,size:"large",fullWidth:!0,type:"submit",children:f("signer_scan_result")})]})},j=()=>{const e=(0,d._)(),[n,t]=(0,o.useState)(void 0),[i,r]=(0,o.useState)(void 0),a=(0,o.useCallback)((()=>{t(void 0),r(void 0)}),[]),l=(0,o.useCallback)((n=>{e.uiEvents.emit("response",{method:"response",id:i,params:n}),a()}),[e,i,a]),c=(0,o.useCallback)((()=>{i&&e.uiEvents.emit("response",{method:"response",id:i,params:new Error("Cancel auth request")}),a()}),[i,e,a]);(0,o.useEffect)((()=>{const n=e=>{t(e.params),r(e.id)};return e.uiEvents.on("keystone",n),()=>{e.uiEvents.off("keystone",n)}}),[e]);const u=(0,o.useCallback)((()=>{if(n&&i)return(0,s.jsx)(g,{sdk:e,transactionParams:n,onClose:c,handleResult:l})}),[e,n,i,c,l]);return(0,s.jsx)(x.P_,{isOpen:null!=n&&null!=i,handleClose:c,children:u})}},56494:(e,n,t)=>{"use strict";t.d(n,{Aq:()=>N,ON:()=>K,VO:()=>V});var s,i,r,o,a,d,l,c,x,u,p,h=t(30168),m=t(80184),v=t(14182),g=t(27127),j=t(72791),f=t(37887),b=t(4959),k=t(73485),w=t(65867),y=t(87594),C=t(23098),_=t(61945),T=t(35300),Z=t(5784),S=t(89242),P=t(47712),R=t(88754),E=t(98502),A=t(53961),z=t(91153),I=t(68456),O=t(87812),q=t(1849),Q=t(11707);const G=w.ZP.div(s||(s=(0,h.Z)(["\n    display: flex;\n    align-items: center;\n"]))),N=w.ZP.div(i||(i=(0,h.Z)(["\n    padding: 20px;\n    width: 100%;\n    box-sizing: border-box;\n    border-radius: 20px;\n    background: white;\n    max-width: 300px;\n\n    ","\n\n    ","\n\n    canvas {\n        width: 100% !important;\n        height: 100% !important;\n        position: absolute;\n    }\n"])),(e=>e.margin&&(0,w.iv)(r||(r=(0,h.Z)(["\n            margin-bottom: 16px;\n        "])))),(e=>e.extension&&(0,w.iv)(o||(o=(0,h.Z)(["\n            @media (max-width: 768px) {\n                max-width: 217px;\n                padding: 16px;\n            }\n        "]))))),D=(0,w.ZP)(P.mI)(a||(a=(0,h.Z)(["\n    display: inline-block;\n    word-break: break-all;\n    color: black;\n    margin: 16px 4px 0;\n    text-align: center;\n    font-family: ",";\n\n    ","\n"])),(e=>e.theme.fontMono),(e=>e.extension&&(0,w.iv)(d||(d=(0,h.Z)(["\n            @media (max-width: 768px) {\n                margin-top: 8px;\n            }\n        "]))))),$=w.ZP.div(l||(l=(0,h.Z)(["\n    display: flex;\n    padding-bottom: 16px;\n    flex-direction: column;\n    align-items: center;\n    width: 100%;\n\n    ","\n"])),(e=>e.extension&&(0,w.iv)(c||(c=(0,h.Z)(["\n            @media (max-width: 768px) {\n                padding-bottom: 0;\n            }\n        "]))))),L=(0,w.ZP)(P.H3)(x||(x=(0,h.Z)(["\n    text-align: center;\n"]))),H=(0,w.ZP)(P.mI)(u||(u=(0,h.Z)(["\n    text-align: center;\n    color: ",";\n"])),(e=>e.theme.textSecondary)),M=(0,w.ZP)(I.tm)(p||(p=(0,h.Z)(["\n    width: fit-content;\n    margin: 0 auto 10px;\n"]))),V=e=>{let{title:n,description:t}=e;const{extension:s}=(0,y.bp)();return(0,m.jsxs)($,{extension:s,children:[n&&(0,m.jsx)(L,{children:n}),(0,m.jsx)(H,{children:t})]})},J=e=>{let{address:n}=e;const t=(0,C._)(),{t:s}=(0,_.$G)();return(0,m.jsx)(G,{children:(0,m.jsxs)(R.zx,{secondary:!0,onClick:e=>{e.preventDefault(),t.copyToClipboard(n,s("address_copied"))},children:[(0,m.jsx)(Z.TI,{}),(0,m.jsx)("span",{children:s("Copy_address")})]})})},W=e=>{let{jetton:n}=e;const t=(0,C._)(),{extension:s}=(0,y.bp)(),i=(0,z.rT)(),r=(0,z.TH)(),{t:o}=(0,_.$G)(),a=(0,z.i7)(),d=(0,O.vP)({blockchain:v.S.TON,address:n?Q.Address.parse(n):q.Ct.address}),l=(0,g.Tg)(i.rawAddress,a);return(0,m.jsxs)(S.QT,{children:[(0,m.jsx)(V,{title:o("receive_ton"),description:o("receive_ton_description")}),(0,m.jsxs)(N,{extension:s,onClick:e=>{e.preventDefault(),t.copyToClipboard(l,o("address_copied"))},children:[r&&(0,m.jsx)(M,{accountType:"watch-only"}),(0,m.jsx)(A.Ak,{children:(0,m.jsx)(f.QRCode,{size:400,value:(0,g.VY)({address:l,jetton:n}),logoImage:d||"https://wallet.tonkeeper.com/img/toncoin.svg",logoPadding:8,qrStyle:"dots",eyeRadius:{inner:2,outer:16}})}),(0,m.jsx)(D,{extension:s,children:l})]}),(0,m.jsx)(J,{address:l})]})},F=e=>{let{tron:n}=e;const t=(0,C._)(),{t:s}=(0,_.$G)(),{extension:i}=(0,y.bp)();return(0,m.jsxs)(S.QT,{children:[(0,m.jsx)(V,{title:s("receive_trc20"),description:s("receive_trc20_description")}),(0,m.jsxs)(N,{extension:i,onClick:e=>{e.preventDefault(),t.copyToClipboard(n.walletAddress,s("address_copied"))},children:[(0,m.jsx)(A.Ak,{children:(0,m.jsx)(f.QRCode,{size:400,value:n.walletAddress,logoImage:"https://wallet-dev.tonkeeper.com/img/usdt.svg",logoPadding:8,qrStyle:"dots",eyeRadius:{inner:2,outer:16}})}),(0,m.jsx)(D,{extension:i,children:n.walletAddress})]}),(0,m.jsx)(J,{address:n.walletAddress})]})},K=e=>{let{chain:n=v.S.TON,jetton:t,handleClose:s}=e;const{standalone:i}=(0,y.bp)(),[r]=(0,j.useState)(n),{data:o}=(0,T.yw)(r===v.S.TRON),a=(0,j.useRef)(null),d=(0,j.useRef)(null),l=r===v.S.TON||!o,c=l?a:d,x=l?"ton":"tron";return(0,m.jsxs)(S.Jz,{standalone:i,children:[(0,m.jsx)(S.JE,{children:(0,m.jsx)(S.O$,{children:(0,m.jsx)(S.Xk,{handleClose:s,center:!0})})}),(0,m.jsx)(E.im,{standalone:!1,extension:!0,fullWidth:!0,children:(0,m.jsx)(b.Z,{childFactory:(0,E.mH)(!l),children:(0,m.jsx)(k.Z,{nodeRef:c,classNames:"right-to-left",addEndListener:e=>{setTimeout(e,E.x9)},children:(0,m.jsx)("div",{ref:c,children:l?(0,m.jsx)(W,{jetton:(null===t||void 0===t?void 0:t.toLowerCase())===q.Ct.address.toString().toLowerCase()?void 0:t}):(0,m.jsx)(F,{tron:o})})},x)})})]})}},53961:(e,n,t)=>{"use strict";t.d(n,{Ak:()=>c,Gb:()=>x});var s,i=t(30168),r=t(80184),o=t(45351),a=t.n(o),d=t(72791),l=t(37887);const c=t(65867).zo.div(s||(s=(0,i.Z)(["\n    width: 100%;\n    padding-bottom: 100%;\n    position: relative;\n"])));d.memo((e=>{let{message:n}=e;const[t,s]=(0,d.useState)("");return(0,d.useEffect)((()=>{const e=function(e,n){for(var t=[],s=0,i=e.length;s<i;)t.push(e.slice(s,s+=n));return t}([...n],256);if(1!==e.length){let n=0;const t=setInterval((()=>{let t=e[n];s(t.join("")),n++,n===e.length&&(n=0)}),100);return()=>clearInterval(t)}s(n)}),[n]),(0,r.jsx)(c,{children:(0,r.jsx)(l.QRCode,{size:400,value:t,qrStyle:"dots",eyeRadius:{inner:2,outer:16}})})}));const x=e=>{let{data:n}=e;const t=(0,d.useMemo)((()=>new(a())(n)),[]),[s,i]=(0,d.useState)(t.nextPart());return(0,d.useEffect)((()=>{const e=setInterval((()=>{i(t.nextPart().toUpperCase())}),200);return()=>{clearInterval(e)}}),[]),(0,r.jsx)(c,{children:(0,r.jsx)(l.QRCode,{size:400,value:s,qrStyle:"dots",eyeRadius:{inner:2,outer:16}})})}},81563:()=>{},60943:()=>{}}]);
//# sourceMappingURL=109.1ca8a9c9.chunk.js.map