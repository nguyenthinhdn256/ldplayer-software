"use strict";(self.webpackChunk_tonkeeper_extension=self.webpackChunk_tonkeeper_extension||[]).push([[259],{89259:(e,n,t)=>{t.r(n),t.d(n,{default:()=>_e});var i=t(80184),s=t(14182),o=t(76978),a=t(1849),r=t(48544),l=t(18203),c=t(93853),d=t(34692),u=t(72791),m=t(4959),p=t(73485),v=t(87594),h=t(23098),x=t(42770),f=t(61945),j=t(82430),k=t(7393),g=t(35300),y=t(89242),b=t(68973),w=t(97667),V=t(38705),E=t(12116),C=t(60793),R=t(67086),M=t(24539),S=t(58687),_=t(41235),Z=t(91153);const A=e=>{let{isMax:n,assetAmount:t,...s}=e;const l=(0,Z.jE)(),m=(0,u.useMemo)((()=>({type:"transfer",asset:t.asset})),[t.asset]),p=(0,C.hh)(t.asset),[v,h]=(0,u.useState)(t),{data:x}=(0,E.ib)(m);(0,u.useEffect)((()=>{x&&j(x[0].type)}),[x]);const[f,j]=(0,u.useState)(),k=(0,b.g)({recipient:s.recipient,amount:v,isMax:n,senderType:f}),g=(0,w.N)({recipient:s.recipient,amount:v,isMax:n,estimation:k.data,senderType:f}),y=(0,S.y)(t.asset)?(0,r.J)(t.asset.address):void 0,A=y!==a.Ct.address&&n&&"gasless"===f&&(0,S.y)(t.asset)&&p,O=(0,_.useQuery)(["current-token-to-ton-rate",(0,r.J)(t.asset.address)],(async()=>{const e=await new M.m5R(l.tonApiV2).getRates({tokens:[y],currencies:["TON"]});return Object.values(e.rates)[0].prices.TON}),{enabled:!!A});return(0,u.useEffect)((()=>{if(!A)return h(t);if(!O.data)return;const e=((e,n)=>{const t=e.id===a.FS.id?.9:.5,i=(0,c.PE)(new d.Z(R.N.jettonTransferAmount.toString())).multipliedBy(1.2).div(t).div(n);return o.n.fromRelativeAmount({asset:e,amount:i})})(t.asset,O.data);h(new o.n({asset:t.asset,weiAmount:p.minus(e.weiAmount)}))}),[n,t,f,null===p||void 0===p?void 0:p.toFixed(0)]),(0,i.jsx)(V.vp,{estimation:k,...g,...s,assetAmount:v,selectedSenderType:f,onSenderTypeChange:j,availableSendersChoices:x})};var O,F=t(14316),N=t(144),B=t(61819),P=t(87812),T=t(57443),L=t(73643),z=t(47712),D=t(30168),J=t(65867);const H=J.ZP.input(O||(O=(0,D.Z)(["\n    padding: 0;\n    margin: 0;\n    border: none;\n    outline: none;\n    /* added styles */\n    font-family: inherit;\n    font-size: inherit;\n    background: transparent;\n    color: ",";\n\n    font-family: 'Montserrat', sans-serif;\n    font-style: normal;\n    font-weight: 600;\n\n    line-height: 49px;\n    text-align: right;\n\n    -moz-appearance: textfield;\n\n    &::-webkit-outer-spin-button,\n    &::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n    }\n"])),(e=>e.theme.textPrimary)),U=u.forwardRef(((e,n)=>{let{value:t,setValue:s,inputSize:o}=e;return(0,i.jsx)(H,{autoComplete:"off",id:"sentence","data-testid":"amount-input",ref:n,style:{fontSize:"".concat(o.size,"px"),width:"".concat(o.width,"px")},inputMode:"decimal",type:"text",value:t,onChange:e=>{s(e.target.value)}})}));U.displayName="Sentence";var q,I,W,Q,$,G,K=t(12850),X=t(79309),Y=t(5784),ee=t(26503);const ne=J.ZP.div(q||(q=(0,D.Z)(["\n    background: ",";\n    border-radius: ",";\n    padding: 0.5rem 1rem;\n    display: flex;\n    gap: 0.5rem;\n"])),(e=>e.theme.buttonTertiaryBackground),(e=>e.theme.cornerMedium)),te=J.ZP.span(I||(I=(0,D.Z)(["\n    color: ",";\n    display: flex;\n    align-items: center;\n"])),(e=>e.theme.iconSecondary)),ie=J.ZP.img(W||(W=(0,D.Z)(["\n    border-radius: ",";\n    width: 24px;\n    height: 24px;\n"])),(e=>e.theme.cornerFull)),se=J.ZP.div(Q||(Q=(0,D.Z)(["\n    display: flex;\n    gap: 0.5rem;\n    width: 200px;\n    overflow: hidden;\n"]))),oe=(0,J.ZP)(z.mI)($||($=(0,D.Z)(["\n    color: ",";\n    text-overflow: ellipsis;\n    overflow: hidden;\n"])),(e=>e.theme.textSecondary)),ae=J.ZP.span(G||(G=(0,D.Z)(["\n    padding-left: 0.5rem;\n    color: ",";\n    display: flex;\n"])),(e=>e.theme.accentBlue)),re=e=>{var n;let{onClose:t,jetton:o,jettons:a,setJetton:r,info:l}=e;const c=(0,B.rs)(),d=(0,u.useRef)(null);return(0,u.useEffect)((()=>{var e;d.current&&(null===(e=d.current.parentElement)||void 0===e||null===(e=e.parentElement)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[d]),(0,i.jsxs)(ee.L8,{margin:!1,dropDown:!0,children:[(0,i.jsx)(ee.HC,{dropDown:!0,onClick:()=>{r(s.C.TON),t()},children:(0,i.jsxs)(ee.me,{children:[(0,i.jsxs)(se,{children:[(0,i.jsx)(ie,{src:"https://wallet.tonkeeper.com/img/toncoin.svg"}),(0,i.jsx)(z.RV,{children:s.C.TON}),(0,i.jsx)(oe,{children:c(null!==(n=null===l||void 0===l?void 0:l.balance)&&void 0!==n?n:0)})]}),s.C.TON===o?(0,i.jsx)(ae,{children:(0,i.jsx)(Y.qw,{})}):void 0]})}),a.balances.map((e=>(0,i.jsx)(ee.HC,{dropDown:!0,onClick:()=>{r(e.jetton.address),t()},children:(0,i.jsxs)(ee.me,{children:[(0,i.jsxs)(se,{children:[(0,i.jsx)(ie,{src:e.jetton.image}),(0,i.jsx)(z.RV,{children:e.jetton.symbol}),(0,i.jsx)(oe,{children:c(e.balance,e.jetton.decimals)})]}),e.jetton.address===o?(0,i.jsx)(ae,{ref:d,children:(0,i.jsx)(Y.qw,{})}):void 0]})},e.jetton.address)))]})},le=e=>{let{jetton:n,jettons:t,setJetton:s,info:o}=e;return(0,i.jsx)(X.vb,{center:!0,payload:e=>(0,i.jsx)(re,{info:o,onClose:e,jetton:n,jettons:t,setJetton:s}),children:(0,i.jsxs)(ne,{children:[(0,i.jsx)(z.RV,{children:(0,N.TB)(n,t)}),(0,i.jsx)(te,{children:(0,i.jsx)(Y.KL,{})})]})})};var ce=t(81987);const de=(e,n)=>{const{ios:t,standalone:i}=(0,v.bp)();(0,u.useEffect)((()=>{if(!t)return;const s=window.innerHeight;function o(){const t=e.current;if(!t)return;const o=s-this.height+16,a=i?Math.max(32,o):o;t.style.bottom="".concat(a,"px");const r=Math.min(this.height-16-56-16-36-16-16-16-16-37,272);n.current&&(n.current.style.height="".concat(r,"px"))}const a=window.visualViewport;return a&&(setTimeout((()=>o.call(a)),300),a.addEventListener("resize",o)),()=>{!function(){const n=window.visualViewport;n&&n.removeEventListener("resize",o),setTimeout((()=>{const n=e.current;n&&(n.style.bottom=null)}))}()}}),[e.current,n.current])},ue={size:40,width:30};var me=t(27494);function pe(e){return e.toFormat({groupSeparator:(0,me.ce)(),decimalSeparator:(0,me.Yz)()})}const ve=(e,n)=>{const{kind:t,payload:i}=n;switch(t){case"select":return{inputValue:"0",coinValue:new d.Z(0),token:i.token,inFiat:!1,isMax:!1};case"max":if(void 0!==i.prices){const n=i.value.multipliedBy(i.prices).decimalPlaces(2,d.Z.ROUND_FLOOR);return{...e,inputValue:pe(e.inFiat?n:i.value),fiatValue:n,coinValue:i.value,isMax:!e.isMax}}return{...e,inputValue:pe(i.value),coinValue:i.value,isMax:!e.isMax};case"input":{var s,o;const n=e.inFiat?2:e.token.decimals;let t=(0,K.VI)(i.value);(0,K.vu)(t,n)||(t=e.inputValue),(0,N.kE)(t)&&(t=(0,N.z6)(t));const a=(0,K.NU)(t),r=e.inFiat?a.div(null!==(s=i.prices)&&void 0!==s?s:0):a,l=e.inFiat?a:a.multipliedBy(null!==(o=i.prices)&&void 0!==o?o:0);return{...e,inputValue:t,coinValue:r,fiatValue:l,isMax:!1}}case"price":{if(!i.prices)return e;const n=e.coinValue.multipliedBy(i.prices).decimalPlaces(2,d.Z.ROUND_FLOOR);return{...e,fiatValue:n}}case"toggle":{var a,r;const n=pe(e.inFiat?e.coinValue.decimalPlaces(e.token.decimals,d.Z.ROUND_FLOOR):null!==(a=null===(r=e.fiatValue)||void 0===r?void 0:r.decimalPlaces(2,d.Z.ROUND_FLOOR))&&void 0!==a?a:new d.Z(0));return{...e,inputValue:n,inFiat:!e.inFiat}}default:return e}},he=e=>{let{recipient:n,onClose:t,onBack:o,onConfirm:l,defaults:c,MainButton:m,HeaderBlock:p,isAnimationProcess:x}=e;const{t:g}=(0,f.$G)(),b=(0,h._)(),{standalone:w,fiat:V}=(0,v.bp)(),E=n.address.blockchain,C=(0,j.c)()&&x,{data:R}=(0,k.NR)(),{data:M}=(0,Z.IR)(),[S,_]=(0,u.useReducer)(ve,((e,n)=>{var t,i,o,r;const l=null!==(t=null===e||void 0===e?void 0:e.inFiat)&&void 0!==t&&t;return{inputValue:null!==(i=null===e||void 0===e?void 0:e.inputValue)&&void 0!==i?i:pe((l?null===e||void 0===e?void 0:e.fiatValue:null===e||void 0===e?void 0:e.coinValue)||new d.Z(0)),coinValue:null!==(o=null===e||void 0===e?void 0:e.coinValue)&&void 0!==o?o:new d.Z(0),fiatValue:null===e||void 0===e?void 0:e.fiatValue,token:(null===e||void 0===e?void 0:e.token)||(n===s.S.TON?a.Ct:a.tr),inFiat:l,isMax:null!==(r=null===e||void 0===e?void 0:e.isMax)&&void 0!==r&&r}})(c,E)),{data:A,isLoading:O}=(0,T.UJ)((e=>e.token.blockchain===s.S.TRON?e.token.symbol:(0,r.mi)(e.token,{userFriendly:!0}))(S)),{data:F,isLoading:D}=(0,P.t6)(S.token),J=(0,u.useRef)(null),H=(0,u.useRef)(null),q=(0,u.useRef)(null);de(q,H),((e,n)=>{(0,u.useEffect)((()=>{const n=setTimeout((()=>{e.current&&e.current.focus()}),300);return()=>{clearTimeout(n)}}),[e.current,n])})(J,S.token);const[I,W]=(0,u.useState)(ue);(0,u.useLayoutEffect)((()=>{H.current&&W(((e,n)=>{const t=n.clientWidth;let i=ue.size,s=(0,ce.m)(e,"600 ".concat(i,"px 'Montserrat'"));for(;Math.round(s)>t-115;)i=Math.max(1,i-1),s=(0,ce.m)(e,"600 ".concat(i,"px 'Montserrat'"));return{width:Math.max(Math.round(s)+5,6*e.length,30),size:i}})(S.inputValue,H.current))}),[H.current,S.inputValue]),(0,u.useEffect)((()=>{_({kind:"price",payload:{prices:null===A||void 0===A?void 0:A.prices}})}),[_,A]);const Q=(0,u.useCallback)((()=>{_({kind:"toggle",payload:void 0})}),[]),$=(0,u.useCallback)((e=>{_({kind:"input",payload:{value:e,prices:null===A||void 0===A?void 0:A.prices}})}),[_,A]),G=(0,u.useCallback)((()=>{_({kind:"max",payload:{value:F.relativeAmount,prices:null===A||void 0===A?void 0:A.prices}})}),[_,F,A]),X=(0,u.useCallback)((e=>{R&&_({kind:"select",payload:{token:(0,r.Px)(e,R)}})}),[_,R]),Y=F.relativeAmount.minus(S.coinValue),ee=Y.gte(0),ne=(0,u.useMemo)((()=>ee&&(0,N.kE)(S.inputValue)&&(0,K.NU)(S.inputValue).isGreaterThan(0)),[ee,S.inputValue]),te=(0,u.useCallback)((()=>{o(S)}),[o,S]),ie=(0,u.useCallback)((()=>{ne?l(S):b.hapticNotification("error")}),[ne,l,S,b]);return(0,i.jsxs)(y.r4,{onSubmit:async e=>{e.stopPropagation(),e.preventDefault(),ie()},standalone:w,children:[!C&&(0,i.jsx)(y.JE,{children:(0,i.jsx)(y.O$,{children:(0,i.jsx)(p,{onClose:t,onBack:te,children:(0,i.jsxs)(K.DK,{children:[g("send_screen_steps_done_to").replace("%{name}",""),(0,i.jsx)(K.XT,{recipient:n}),(0,i.jsx)(K.b9,{recipient:n})]})})})}),(0,i.jsxs)(K.wU,{ref:H,children:[(0,i.jsx)(K.je,{children:E===s.S.TON?(0,i.jsx)(le,{info:M,jetton:(0,r.mi)(S.token),setJetton:X,jettons:null!==R&&void 0!==R?R:{balances:[]}}):(0,i.jsx)(K.bx,{children:(0,i.jsx)(z.RV,{children:"TRC20"})})}),(0,i.jsxs)(K.S7,{children:[(0,i.jsx)(U,{ref:J,value:S.inputValue,setValue:$,inputSize:I}),(0,i.jsx)(K.mN,{children:S.inFiat?V:S.token.symbol})]}),(0,i.jsx)(K.t$,{amountState:S,toggleFiat:Q})]}),(0,i.jsxs)(K.X$,{children:[(0,i.jsx)(K.ER,{maxValue:S.isMax,onClick:G,children:g("send_screen_steps_amount_max")}),ee?(0,i.jsxs)(K.JD,{children:[g("send_screen_steps_amount_remaining").replace("%{amount}",B.zW.format(Y,{decimals:S.token.decimals}))," ",S.token.symbol]}):(0,i.jsx)(K.rL,{children:g("send_screen_steps_amount_insufficient_balance")})]}),(0,i.jsx)(L.Zv,{}),!C&&(0,i.jsx)(y.gH,{children:(0,i.jsx)(y.B6,{children:(0,i.jsx)(m,{ref:q,isDisabled:!ne,isLoading:O||D,onClick:ie})})})]})};var xe=t(98502),fe=t(3182),je=t(60560),ke=t(27127),ge=t(33945),ye=t(29205);const be={type:"multisig",ttlSeconds:300};var we=t(33455),Ve=t(33375);var Ee,Ce=t(87294);const Re=(0,J.zo)(Ce.G)(Ee||(Ee=(0,D.Z)(["\n    margin-bottom: 1rem;\n"]))),Me=e=>{let{isMax:n,ttl:t,...s}=e;const{signerWallet:o}=(0,je.h3)(),{data:r}=(0,je.F)(),l=function(e,n,t){const i=(0,E.qM)(be),s=(0,ye.Q)(i),o=(0,ge.Sh)();return(0,_.useQuery)(["multisig-transfer-estimation",e,n,t,s],(async()=>{const s=await i(),a=e.comment;return o.estimate(s,{to:(0,ke.Ig)(e.address.address)?e.address.address:e.toAccount.address,amount:n,isMax:t,payload:a?{type:"comment",value:a}:void 0})}),{enabled:!!e,refetchOnMount:"always"})}(s.recipient,s.assetAmount,n),c=function(e,n,t,i,s){const o=(0,ge.Sh)(),r=(0,Ve.Qb)(),l=(0,E.IS)(),c=(0,we.BJ)(),{mutateAsync:d}=(0,Z.x_)();return(0,_.useMutation)((async()=>{try{const r=60*Number(i),d=await l({type:"multisig",ttlSeconds:r}),u=e.comment;await o.send(d,s,{to:(0,ke.Ig)(e.address.address)?e.address.address:e.toAccount.address,amount:n,isMax:t,payload:u?{type:"comment",value:u}:void 0}),n.asset.id===a.Ct.id?c("send-ton"):c("send-jetton")}catch(u){await r(u)}return await d(),!0}))}(s.recipient,s.assetAmount,n,t,l.data);return(0,i.jsx)(V.vp,{estimation:l,...c,...s,children:(0,i.jsx)(V.ud,{children:r?(0,i.jsx)(Re,{status:"progress",signedWallets:[],threshold:r.threshold,pendingWallets:r.signers,hostAddress:o.rawAddress,secondsLeft:60*Number(t)}):null})})},Se=e=>{var n;let{onClose:t,chain:b,initRecipient:w,initAmountState:E}=e;const C=(0,h._)(),{standalone:R,ios:M,extension:S}=(0,v.bp)(),{t:_}=(0,f.$G)(),{data:Z}=(0,k.NR)(),O=(0,j.c)(),N=(0,je.IW)(),B=(0,we.yL)(),[P,T]=(0,u.useState)(N?"multisig-settings":"recipient"),L=(0,u.useCallback)((e=>{N||"multisig-settings"!==e||(e="recipient"),T(e)}),[T,N]),[z,D]=(0,u.useState)(!0),[J,H]=(0,u.useState)(),[U,q]=(0,u.useState)(w),[I,W]=(0,u.useState)(E);(0,u.useEffect)((()=>{var e,n;w&&B("send_click",{from:"send_amount",token:null!==(e=null===I||void 0===I||null===(n=I.token)||void 0===n?void 0:n.symbol)&&void 0!==e?e:"ton"})}),[]);const{data:Q}=(0,g.Ru)(),{mutateAsync:$,isLoading:G}=(0,F.gW)(),K=e=>{var n,t;null!==I&&void 0!==I&&null!==(n=I.token)&&void 0!==n&&n.blockchain&&(null===I||void 0===I||null===(t=I.token)||void 0===t?void 0:t.blockchain)!==e.address.blockchain&&W(void 0),q(e),Q&&e.address.blockchain===s.S.TRON&&W({token:(0,a.FZ)(Q.balances[0])})},X=e=>{var n,t;D(!0),K(e),L("amount"),B("send_click",{from:"send_recipient",token:null!==(n=null===I||void 0===I||null===(t=I.token)||void 0===t?void 0:t.symbol)&&void 0!==n?n:"ton"})},Y=e=>{var n,t;D(!0),W(e),L("confirm"),B("send_confirm",{from:"send_amount",token:null!==(n=null===I||void 0===I||null===(t=I.token)||void 0===t?void 0:t.symbol)&&void 0!==n?n:"ton"})},ee=e=>{D(!1),W(e),L("recipient")},ne=()=>{M&&(0,x.Q)("decimal"),D(!1),L("amount")},te=(0,u.useCallback)((async e=>{let{amount:n,jetton:t}=e;if(t&&Z){let e;try{e=(0,r.Px)(t,Z)}catch(i){return C.uiEvents.emit("copy",{method:"copy",params:_("Unexpected_QR_Code")}),!1}const s=new o.n({asset:e,weiAmount:n||"0"});W({coinValue:s.relativeAmount,token:e,inFiat:!1,isMax:!1})}else W({coinValue:n?(0,c.PE)(n):new d.Z("0"),token:null===E||void 0===E?void 0:E.token,inFiat:!1,isMax:!1});return!0}),[C,Z,null===E||void 0===E?void 0:E.token]),ie=async e=>{const n=(0,l.p)({url:e});if(!n)return C.uiEvents.emit("copy",{method:"copy",params:_("Unexpected_QR_Code")});await te(n)&&await(async e=>{let{address:n,text:t}=e;const i={address:n,blockchain:s.S.TON},o=await $(i),a=!o.memoRequired||!(!o.memoRequired||!t);K({address:i,toAccount:o,comment:null!==t&&void 0!==t?t:"",done:a}),a&&L("amount")})(n)},se={"multisig-settings":(0,u.useRef)(null),recipient:(0,u.useRef)(null),amount:(0,u.useRef)(null),confirm:(0,u.useRef)(null)}[P],oe=(0,u.useMemo)((()=>null!==I&&void 0!==I&&I.token&&null!==I&&void 0!==I&&I.coinValue?o.n.fromRelativeAmount({asset:I.token,amount:I.coinValue}):null),[null===I||void 0===I||null===(n=I.token)||void 0===n?void 0:n.id,null===I||void 0===I?void 0:I.coinValue]);return(0,i.jsx)(xe.im,{standalone:R,extension:S,children:(0,i.jsx)(m.Z,{childFactory:(0,xe.mH)(z),children:(0,i.jsx)(p.Z,{nodeRef:se,classNames:"right-to-left",addEndListener:e=>{setTimeout(e,xe.x9)},children:e=>(0,i.jsxs)("div",{ref:se,children:["multisig-settings"===P&&(0,i.jsx)(fe.d,{onSubmit:e=>{D(!0),H(e.lifetime),L("recipient")},isAnimationProcess:"exiting"===e,Header:()=>(0,i.jsx)(xe.io,{title:_("multisig_create_order_title"),onClose:t}),MainButton:xe.c7}),"recipient"===P&&(0,i.jsx)(F.Aq,{data:U,setRecipient:X,onScan:ie,keyboard:"decimal",isExternalLoading:G,acceptBlockchains:b?[b]:void 0,MainButton:xe.c7,HeaderBlock:()=>(0,i.jsx)(xe.ap,{onBack:N?()=>{D(!1),L("multisig-settings")}:void 0,title:_("transaction_recipient"),onClose:t}),isAnimationProcess:"exiting"===e}),"amount"===P&&(0,i.jsx)(he,{defaults:I,onClose:t,onBack:ee,recipient:U,onConfirm:Y,MainButton:xe.Jy,HeaderBlock:xe.gI,isAnimationProcess:"exiting"===e}),"confirm"===P&&(N?(0,i.jsxs)(Me,{onClose:t,onBack:ne,recipient:U,assetAmount:o.n.fromRelativeAmount({asset:I.token,amount:I.coinValue}),isMax:I.isMax,ttl:J,children:["exiting"!==e&&O&&(0,i.jsx)(V.tv,{children:(0,i.jsx)(y.JE,{children:(0,i.jsx)(y.O$,{children:(0,i.jsx)(V.NG,{})})})}),"exiting"!==e&&O&&(0,i.jsx)(V.mC,{children:(0,i.jsx)(y.gH,{children:(0,i.jsx)(y.B6,{children:(0,i.jsx)(V.uq,{MainButton:xe.y8})})})})]}):(0,i.jsxs)(A,{onClose:t,onBack:ne,recipient:U,assetAmount:oe,isMax:I.isMax,children:["exiting"!==e&&O&&(0,i.jsx)(V.tv,{children:(0,i.jsx)(y.JE,{children:(0,i.jsx)(y.O$,{children:(0,i.jsx)(V.NG,{})})})}),"exiting"!==e&&O&&(0,i.jsx)(V.mC,{children:(0,i.jsx)(y.gH,{children:(0,i.jsx)(y.B6,{children:(0,i.jsx)(V.uq,{MainButton:xe.y8})})})})]}))]})},P)})})},_e=()=>{const[e,n]=(0,u.useState)(!1),[t,s]=(0,u.useState)(void 0),[o,a]=(0,u.useState)(void 0),{data:r}=(0,k.NR)(),{mutateAsync:l,reset:c}=(0,F.gW)(),d=(0,h._)(),m=(0,we.yL)();(0,u.useEffect)((()=>{const e=e=>{c();const t=e.params;s(e.params.chain),t.address?l({address:t.address}).then((e=>{a((0,xe.Lq)(t,e,r)),n(!0)})):(a({initAmountState:(0,xe.ai)(t,r)}),n(!0)),m("send_open",{from:t.from})};return d.uiEvents.on("transfer",e),()=>{d.uiEvents.off("transfer",e)}}),[r,m]);const p=(0,u.useCallback)((()=>{a(void 0),n(!1)}),[]),v=(0,u.useCallback)((()=>{if(e)return(0,i.jsx)(Se,{onClose:p,chain:t,initAmountState:null===o||void 0===o?void 0:o.initAmountState,initRecipient:null===o||void 0===o?void 0:o.initRecipient})}),[e,o,t]);return(0,i.jsx)(y.P_,{isOpen:e,handleClose:p,hideButton:!0,backShadow:!0,footer:(0,i.jsx)(i.Fragment,{}),children:v})}},4959:(e,n,t)=>{t.d(n,{Z:()=>p});var i=t(9116),s=t(29580);var o=t(61174),a=t(72791),r=t(99172);function l(e,n){var t=Object.create(null);return e&&a.Children.map(e,(function(e){return e})).forEach((function(e){t[e.key]=function(e){return n&&(0,a.isValidElement)(e)?n(e):e}(e)})),t}function c(e,n,t){return null!=t[n]?t[n]:e.props[n]}function d(e,n,t){var i=l(e.children),s=function(e,n){function t(t){return t in n?n[t]:e[t]}e=e||{},n=n||{};var i,s=Object.create(null),o=[];for(var a in e)a in n?o.length&&(s[a]=o,o=[]):o.push(a);var r={};for(var l in n){if(s[l])for(i=0;i<s[l].length;i++){var c=s[l][i];r[s[l][i]]=t(c)}r[l]=t(l)}for(i=0;i<o.length;i++)r[o[i]]=t(o[i]);return r}(n,i);return Object.keys(s).forEach((function(o){var r=s[o];if((0,a.isValidElement)(r)){var l=o in n,d=o in i,u=n[o],m=(0,a.isValidElement)(u)&&!u.props.in;!d||l&&!m?d||!l||m?d&&l&&(0,a.isValidElement)(u)&&(s[o]=(0,a.cloneElement)(r,{onExited:t.bind(null,r),in:u.props.in,exit:c(r,"exit",e),enter:c(r,"enter",e)})):s[o]=(0,a.cloneElement)(r,{in:!1}):s[o]=(0,a.cloneElement)(r,{onExited:t.bind(null,r),in:!0,exit:c(r,"exit",e),enter:c(r,"enter",e)})}})),s}var u=Object.values||function(e){return Object.keys(e).map((function(n){return e[n]}))},m=function(e){function n(n,t){var i,s=(i=e.call(this,n,t)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i));return i.state={contextValue:{isMounting:!0},handleExited:s,firstRender:!0},i}(0,o.Z)(n,e);var t=n.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var t,i,s=n.children,o=n.handleExited;return{children:n.firstRender?(t=e,i=o,l(t.children,(function(e){return(0,a.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:c(e,"appear",t),enter:c(e,"enter",t),exit:c(e,"exit",t)})}))):d(e,s,o),firstRender:!1}},t.handleExited=function(e,n){var t=l(this.props.children);e.key in t||(e.props.onExited&&e.props.onExited(n),this.mounted&&this.setState((function(n){var t=(0,s.Z)({},n.children);return delete t[e.key],{children:t}})))},t.render=function(){var e=this.props,n=e.component,t=e.childFactory,s=(0,i.Z)(e,["component","childFactory"]),o=this.state.contextValue,l=u(this.state.children).map(t);return delete s.appear,delete s.enter,delete s.exit,null===n?a.createElement(r.Z.Provider,{value:o},l):a.createElement(r.Z.Provider,{value:o},a.createElement(n,s,l))},n}(a.Component);m.propTypes={},m.defaultProps={component:"div",childFactory:function(e){return e}};const p=m}}]);
//# sourceMappingURL=259.eae64296.chunk.js.map